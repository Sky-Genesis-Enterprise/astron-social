import{j as s}from"./client-wT6vtYO_.js";import{r as c,u as P,d as w}from"./index-BdTwX--g.js";import{H as E}from"./Helmet-ZVWnGmbg.js";import{S as F}from"./group-Xgbn5g1L.js";import{S as R}from"./hashtags-DlzQcrtL.js";import{S as D}from"./tag-fitE3XYd.js";import{a as C,u as Z,dT as G,dU as V,I as g}from"./useSelectableClick-DeaJbL2_.js";import{A as T}from"./account-0xT8MC3X.js";import{C as z}from"./column-B4vwzadM.js";import{C as B}from"./column_header-FN7GyEAs.js";import{C as q}from"./hashtag-C8K46vBm.js";import{S as K}from"./scrollable_list-lNykmhKA.js";import{S as I}from"./status_quoted-COu-QToA.js";import{S as Q}from"./search-BPrZ-C9C.js";import{u as k}from"./useSearchParam-CCVsk9qx.js";import{M as l}from"./message-UFwkQlnu.js";import"./short_number-WomMu2iV.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./content_warning-DZ8mar1O.js";import"./skeleton-D9NbTYr9.js";import"./index-BZWHsOPk.js";import"./counters-BJ0cOeaq.js";import"./follow_button-BdqDKUmA.js";import"./loading_indicator-7xMB1U6D.js";import"./verified_badge-CtK79Pb7.js";import"./scroll-BygYx8ga.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./index-DwQAxx91.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";import"./domain_blocks-CYnp0hav.js";import"./reports-DBOcsYZF.js";import"./status-CiF0hsk4.js";import"./index.es-B0ZBMj49.js";import"./card-CttmBekj.js";import"./avatar_overlay-BeG39OK4.js";import"./toString-Cy1Ecq9L.js";import"./status_content-CaIN8-0B.js";import"./poll-CjurB963.js";import"./permissions-Djze7cmB.js";import"./visibility_icon-DbVVvHFb.js";import"./index-OwtqmxAM.js";const U=e=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},c.createElement("path",{d:"m590-160 80 80H240q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h360l200 240v480q0 20-8.5 36.5T768-96L560-302q-17 11-37 16.5t-43 5.5q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 23-5.5 43T618-360l102 104v-356L562-800H240v640h350ZM480-360q33 0 56.5-23.5T560-440q0-33-23.5-56.5T480-520q-33 0-56.5 23.5T400-440q0 33 23.5 56.5T480-360Zm0-80Zm0 0Z"})),x=({title:e,onClickMore:r,children:m})=>s.jsxs("div",{className:"search-results__section",children:[s.jsxs("div",{className:"search-results__section__header",children:[s.jsx("h3",{children:e}),r&&s.jsx("button",{onClick:r,children:s.jsx(l,{id:"search_results.see_all",defaultMessage:"See all"})})]}),m]}),f=w({title:{id:"search_results.title",defaultMessage:'Search for "{q}"'}}),p=10,j=4,S=e=>e.length>p&&e.length%p===1?e.slice(0,-2):e,Y=e=>S(e).map(r=>s.jsx(T,{id:r},r)),J=e=>S(e).map(r=>s.jsx(q,{hashtag:r},r.name)),O=e=>S(e).map(r=>s.jsx(I,{id:r},r)),W=e=>e&&["all","accounts","statuses","hashtags"].includes(e)?e:"all",Xs=({multiColumn:e})=>{const r=c.useRef(null),m=P(),[n]=k("q"),[y,i]=k("type"),_=C(a=>a.search.loading),t=C(a=>a.search.results),d=Z(),o=W(y),h=(n==null?void 0:n.trim())??"";c.useEffect(()=>{h.length>0&&d(G({q:h,type:o==="all"?void 0:o}))},[d,h,o]);const A=c.useCallback(()=>{var a;(a=r.current)==null||a.scrollTop()},[]),N=c.useCallback(()=>{i(null)},[i]),v=c.useCallback(()=>{i("accounts")},[i]),M=c.useCallback(()=>{i("hashtags")},[i]),b=c.useCallback(()=>{i("statuses")},[i]),H=c.useCallback(()=>{o!=="all"&&d(V({type:o}))},[d,o]),L=o!=="all"&&t?t[o].length>p&&t[o].length%p===1:!1;let u;if(t)switch(o){case"all":u=t.accounts.length+t.hashtags.length+t.statuses.length>0?s.jsxs(s.Fragment,{children:[t.accounts.length>0&&s.jsx(x,{title:s.jsxs(s.Fragment,{children:[s.jsx(g,{id:"users",icon:F}),s.jsx(l,{id:"search_results.accounts",defaultMessage:"Profiles"})]}),onClickMore:v,children:t.accounts.slice(0,j).map(a=>s.jsx(T,{id:a},a))},"accounts"),t.hashtags.length>0&&s.jsx(x,{title:s.jsxs(s.Fragment,{children:[s.jsx(g,{id:"hashtag",icon:D}),s.jsx(l,{id:"search_results.hashtags",defaultMessage:"Hashtags"})]}),onClickMore:M,children:t.hashtags.slice(0,j).map(a=>s.jsx(q,{hashtag:a},a.name))},"hashtags"),t.statuses.length>0&&s.jsx(x,{title:s.jsxs(s.Fragment,{children:[s.jsx(g,{id:"quote-right",icon:U}),s.jsx(l,{id:"search_results.statuses",defaultMessage:"Posts"})]}),onClickMore:b,children:t.statuses.slice(0,j).map(a=>s.jsx(I,{id:a},a))},"statuses")]}):[];break;case"accounts":u=Y(t.accounts);break;case"hashtags":u=J(t.hashtags);break;case"statuses":u=O(t.statuses);break}return s.jsxs(z,{bindToDocument:!e,ref:r,label:m.formatMessage(f.title,{q:n}),children:[s.jsx(B,{icon:"search",iconComponent:R,title:m.formatMessage(f.title,{q:n}),onClick:A,multiColumn:e}),s.jsx("div",{className:"explore__search-header",children:s.jsx(Q,{singleColumn:!0,initialValue:h})}),s.jsxs("div",{className:"account__section-headline",children:[s.jsx("button",{onClick:N,className:o==="all"?"active":void 0,children:s.jsx(l,{id:"search_results.all",defaultMessage:"All"})}),s.jsx("button",{onClick:v,className:o==="accounts"?"active":void 0,children:s.jsx(l,{id:"search_results.accounts",defaultMessage:"Profiles"})}),s.jsx("button",{onClick:M,className:o==="hashtags"?"active":void 0,children:s.jsx(l,{id:"search_results.hashtags",defaultMessage:"Hashtags"})}),s.jsx("button",{onClick:b,className:o==="statuses"?"active":void 0,children:s.jsx(l,{id:"search_results.statuses",defaultMessage:"Posts"})})]}),s.jsx("div",{className:"explore__search-results","data-nosnippet":!0,children:s.jsx(K,{scrollKey:"search-results",isLoading:_,showLoading:_&&!t,onLoadMore:H,hasMore:L,emptyMessage:h.length>0?s.jsx(l,{id:"search_results.no_results",defaultMessage:"No results."}):s.jsx(l,{id:"search_results.no_search_yet",defaultMessage:"Try searching for posts, profiles or hashtags."}),bindToDocument:!0,children:u})}),s.jsxs(E,{children:[s.jsx("title",{children:m.formatMessage(f.title,{q:n})}),s.jsx("meta",{name:"robots",content:"noindex"})]})]})};export{Xs as SearchResults,Xs as default};
//# sourceMappingURL=search-index-CKTtFEei.js.map
