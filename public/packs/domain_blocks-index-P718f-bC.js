import{j as o}from"./client-wT6vtYO_.js";import{r as n,u as _,d as B}from"./index-BdTwX--g.js";import{H as C}from"./Helmet-ZVWnGmbg.js";import{S as D}from"./block-fill-C6CxGr6f.js";import{a as S,g as v}from"./api-B2m7efUy.js";import{C as L}from"./column-B4vwzadM.js";import{C as y}from"./column_header-FN7GyEAs.js";import{u as E}from"./domain_blocks-CYnp0hav.js";import{u as T}from"./useSelectableClick-DeaJbL2_.js";import{B as H}from"./index-BZWHsOPk.js";import{M as k}from"./message-UFwkQlnu.js";import{S as N}from"./scrollable_list-lNykmhKA.js";import"./short_number-WomMu2iV.js";import"./numbers-CGZQWBYL.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./scroll-BygYx8ga.js";import"./index-DizoKcfL.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";import"./loading_indicator-7xMB1U6D.js";const g=async s=>{const e=await S().request({method:"GET",url:s??"/api/v1/domain_blocks"});return{domains:e.data,links:v(e)}},w=({domain:s})=>{const e=T(),m=n.useCallback(()=>{e(E(s))},[e,s]);return o.jsxs("div",{className:"domain",children:[o.jsx("div",{className:"domain__domain-name",children:o.jsx("strong",{children:s})}),o.jsx("div",{className:"domain__buttons",children:o.jsx(H,{onClick:m,children:o.jsx(k,{id:"account.unblock_domain_short",defaultMessage:"Unblock"})})})]})},u=B({heading:{id:"column.domain_blocks",defaultMessage:"Blocked domains"}}),po=({multiColumn:s})=>{const e=_(),[m,c]=n.useState([]),[f,a]=n.useState(!1),[d,l]=n.useState(),x=!!d,h=n.useRef(null);n.useEffect(()=>{a(!0),g().then(({domains:t,links:p})=>{const r=p.refs.find(i=>i.rel==="next");return a(!1),c(t),l(r==null?void 0:r.uri),""}).catch(()=>{a(!1)})},[a,c,l]);const b=n.useCallback(()=>{a(!0),g(d).then(({domains:t,links:p})=>{const r=p.refs.find(i=>i.rel==="next");return a(!1),c(i=>[...i,...t]),l(r==null?void 0:r.uri),""}).catch(()=>{a(!1)})},[a,c,l,d]),j=n.useCallback(()=>{var t;(t=h.current)==null||t.scrollTop()},[]),M=o.jsx(k,{id:"empty_column.domain_blocks",defaultMessage:"There are no blocked domains yet."});return o.jsxs(L,{bindToDocument:!s,ref:h,label:e.formatMessage(u.heading),children:[o.jsx(y,{icon:"ban",iconComponent:D,title:e.formatMessage(u.heading),onClick:j,multiColumn:s,showBackButton:!0}),o.jsx(N,{scrollKey:"domain_blocks",onLoadMore:b,hasMore:x,isLoading:f,showLoading:f&&m.length===0,emptyMessage:M,trackScroll:!s,bindToDocument:!s,children:m.map(t=>o.jsx(w,{domain:t},t))}),o.jsxs(C,{children:[o.jsx("title",{children:e.formatMessage(u.heading)}),o.jsx("meta",{name:"robots",content:"noindex"})]})]})};export{po as default};
//# sourceMappingURL=domain_blocks-index-P718f-bC.js.map
