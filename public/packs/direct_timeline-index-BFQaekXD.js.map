{"version":3,"file":"direct_timeline-index-BFQaekXD.js","sources":["../../app/javascript/material-icons/400-24px/link.svg?react","../../app/javascript/mastodon/components/attachment_list.jsx","../../app/javascript/mastodon/components/avatar_composite.jsx","../../app/javascript/mastodon/features/direct_timeline/components/conversation.jsx","../../app/javascript/mastodon/features/direct_timeline/components/conversations_list.jsx","../../app/javascript/mastodon/features/direct_timeline/index.jsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgLink = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z\" }));\nexport default SvgLink;\n","import PropTypes from 'prop-types';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport LinkIcon from '@/material-icons/400-24px/link.svg?react';\nimport { Icon }  from 'mastodon/components/icon';\n\nconst filename = url => url.split('/').pop().split('#')[0].split('?')[0];\n\nexport default class AttachmentList extends ImmutablePureComponent {\n\n  static propTypes = {\n    media: ImmutablePropTypes.list.isRequired,\n    compact: PropTypes.bool,\n  };\n\n  render () {\n    const { media, compact } = this.props;\n\n    return (\n      <div className={classNames('attachment-list', { compact })}>\n        {!compact && (\n          <div className='attachment-list__icon'>\n            <Icon id='link' icon={LinkIcon} />\n          </div>\n        )}\n\n        <ul className='attachment-list__list'>\n          {media.map(attachment => {\n            const displayUrl = attachment.get('remote_url') || attachment.get('url');\n\n            return (\n              <li key={attachment.get('id')}>\n                <a href={displayUrl} target='_blank' rel='noopener'>\n                  {compact && <Icon id='link' icon={LinkIcon} />}\n                  {compact && ' ' }\n                  {displayUrl ? filename(displayUrl) : <FormattedMessage id='attachments_list.unprocessed' defaultMessage='(unprocessed)' />}\n                </a>\n              </li>\n            );\n          })}\n        </ul>\n      </div>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\n\nimport { autoPlayGif } from '../initial_state';\n\nimport { Avatar } from './avatar';\n\nexport default class AvatarComposite extends PureComponent {\n\n  static propTypes = {\n    accounts: ImmutablePropTypes.list.isRequired,\n    animate: PropTypes.bool,\n    size: PropTypes.number.isRequired,\n  };\n\n  static defaultProps = {\n    animate: autoPlayGif,\n  };\n\n  renderItem (account, size, index) {\n    const { animate } = this.props;\n\n    let width  = 50;\n    let height = 100;\n    let top    = 'auto';\n    let left   = 'auto';\n    let bottom = 'auto';\n    let right  = 'auto';\n\n    if (size === 1) {\n      width = 100;\n    }\n\n    if (size === 4 || (size === 3 && index > 0)) {\n      height = 50;\n    }\n\n    if (size === 2) {\n      if (index === 0) {\n        right = '1px';\n      } else {\n        left = '1px';\n      }\n    } else if (size === 3) {\n      if (index === 0) {\n        right = '1px';\n      } else if (index > 0) {\n        left = '1px';\n      }\n\n      if (index === 1) {\n        bottom = '1px';\n      } else if (index > 1) {\n        top = '1px';\n      }\n    } else if (size === 4) {\n      if (index === 0 || index === 2) {\n        right = '1px';\n      }\n\n      if (index === 1 || index === 3) {\n        left = '1px';\n      }\n\n      if (index < 2) {\n        bottom = '1px';\n      } else {\n        top = '1px';\n      }\n    }\n\n    const style = {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: `${width}%`,\n      height: `${height}%`,\n    };\n\n    return (\n      <div key={account.get('id')} style={style}>\n        <Avatar account={account} animate={animate} />\n      </div>\n    );\n  }\n\n  render() {\n    const { accounts, size } = this.props;\n\n    return (\n      <div className='account__avatar-composite' style={{ width: `${size}px`, height: `${size}px` }}>\n        {accounts.take(4).map((account, i) => this.renderItem(account, Math.min(accounts.size, 4), i))}\n\n        {accounts.size > 4 && (\n          <span className='account__avatar-composite__label'>\n            +{accounts.size - 4}\n          </span>\n        )}\n      </div>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { useCallback } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { createSelector } from '@reduxjs/toolkit';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { useDispatch, useSelector } from 'react-redux';\n\n\nimport { HotKeys } from 'react-hotkeys';\n\nimport MoreHorizIcon from '@/material-icons/400-24px/more_horiz.svg?react';\nimport ReplyIcon from '@/material-icons/400-24px/reply.svg?react';\nimport { replyCompose } from 'mastodon/actions/compose';\nimport { markConversationRead, deleteConversation } from 'mastodon/actions/conversations';\nimport { openModal } from 'mastodon/actions/modal';\nimport { muteStatus, unmuteStatus, toggleStatusSpoilers } from 'mastodon/actions/statuses';\nimport AttachmentList from 'mastodon/components/attachment_list';\nimport AvatarComposite from 'mastodon/components/avatar_composite';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport { RelativeTimestamp } from 'mastodon/components/relative_timestamp';\nimport StatusContent from 'mastodon/components/status_content';\nimport { Dropdown } from 'mastodon/components/dropdown_menu';\nimport { autoPlayGif } from 'mastodon/initial_state';\nimport { makeGetStatus } from 'mastodon/selectors';\n\nconst messages = defineMessages({\n  more: { id: 'status.more', defaultMessage: 'More' },\n  open: { id: 'conversation.open', defaultMessage: 'View conversation' },\n  reply: { id: 'status.reply', defaultMessage: 'Reply' },\n  markAsRead: { id: 'conversation.mark_as_read', defaultMessage: 'Mark as read' },\n  delete: { id: 'conversation.delete', defaultMessage: 'Delete conversation' },\n  muteConversation: { id: 'status.mute_conversation', defaultMessage: 'Mute conversation' },\n  unmuteConversation: { id: 'status.unmute_conversation', defaultMessage: 'Unmute conversation' },\n});\n\nconst getAccounts = createSelector(\n  (state) => state.get('accounts'),\n  (_, accountIds) => accountIds,\n  (accounts, accountIds) =>\n    accountIds.map(id => accounts.get(id))\n);\n\nconst getStatus = makeGetStatus();\n\nexport const Conversation = ({ conversation, scrollKey, onMoveUp, onMoveDown }) => {\n  const id = conversation.get('id');\n  const unread = conversation.get('unread');\n  const lastStatusId = conversation.get('last_status');\n  const accountIds = conversation.get('accounts');\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const lastStatus = useSelector(state => getStatus(state, { id: lastStatusId }));\n  const accounts = useSelector(state => getAccounts(state, accountIds));\n\n  const handleMouseEnter = useCallback(({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-original');\n    }\n  }, []);\n\n  const handleMouseLeave = useCallback(({ currentTarget }) => {\n    if (autoPlayGif) {\n      return;\n    }\n\n    const emojis = currentTarget.querySelectorAll('.custom-emoji');\n\n    for (var i = 0; i < emojis.length; i++) {\n      let emoji = emojis[i];\n      emoji.src = emoji.getAttribute('data-static');\n    }\n  }, []);\n\n  const handleClick = useCallback(() => {\n    if (unread) {\n      dispatch(markConversationRead(id));\n    }\n\n    history.push(`/@${lastStatus.getIn(['account', 'acct'])}/${lastStatus.get('id')}`);\n  }, [dispatch, history, unread, id, lastStatus]);\n\n  const handleMarkAsRead = useCallback(() => {\n    dispatch(markConversationRead(id));\n  }, [dispatch, id]);\n\n  const handleReply = useCallback(() => {\n    dispatch((_, getState) => {\n      let state = getState();\n\n      if (state.getIn(['compose', 'text']).trim().length !== 0) {\n        dispatch(openModal({ modalType: 'CONFIRM_REPLY', modalProps: { status: lastStatus } }));\n      } else {\n        dispatch(replyCompose(lastStatus));\n      }\n    });\n  }, [dispatch, lastStatus]);\n\n  const handleDelete = useCallback(() => {\n    dispatch(deleteConversation(id));\n  }, [dispatch, id]);\n\n  const handleHotkeyMoveUp = useCallback(() => {\n    onMoveUp(id);\n  }, [id, onMoveUp]);\n\n  const handleHotkeyMoveDown = useCallback(() => {\n    onMoveDown(id);\n  }, [id, onMoveDown]);\n\n  const handleConversationMute = useCallback(() => {\n    if (lastStatus.get('muted')) {\n      dispatch(unmuteStatus(lastStatus.get('id')));\n    } else {\n      dispatch(muteStatus(lastStatus.get('id')));\n    }\n  }, [dispatch, lastStatus]);\n\n  const handleShowMore = useCallback(() => {\n    dispatch(toggleStatusSpoilers(lastStatus.get('id')));\n  }, [dispatch, lastStatus]);\n\n  if (!lastStatus) {\n    return null;\n  }\n\n  const menu = [\n    { text: intl.formatMessage(messages.open), action: handleClick },\n    null,\n    { text: intl.formatMessage(lastStatus.get('muted') ? messages.unmuteConversation : messages.muteConversation), action: handleConversationMute },\n  ];\n\n  if (unread) {\n    menu.push({ text: intl.formatMessage(messages.markAsRead), action: handleMarkAsRead });\n    menu.push(null);\n  }\n\n  menu.push({ text: intl.formatMessage(messages.delete), action: handleDelete });\n\n  const names = accounts.map(a => (\n    <Link to={`/@${a.get('acct')}`} key={a.get('id')} data-hover-card-account={a.get('id')}>\n      <bdi>\n        <strong\n          className='display-name__html'\n          dangerouslySetInnerHTML={{ __html: a.get('display_name_html') }}\n        />\n      </bdi>\n    </Link>\n  )).reduce((prev, cur) => [prev, ', ', cur]);\n\n  const handlers = {\n    reply: handleReply,\n    open: handleClick,\n    moveUp: handleHotkeyMoveUp,\n    moveDown: handleHotkeyMoveDown,\n    toggleHidden: handleShowMore,\n  };\n\n  return (\n    <HotKeys handlers={handlers}>\n      <div className={classNames('conversation focusable muted', { unread })} tabIndex={0}>\n        <div className='conversation__avatar' onClick={handleClick} role='presentation'>\n          <AvatarComposite accounts={accounts} size={48} />\n        </div>\n\n        <div className='conversation__content'>\n          <div className='conversation__content__info'>\n            <div className='conversation__content__relative-time'>\n              {unread && <span className='conversation__unread' />} <RelativeTimestamp timestamp={lastStatus.get('created_at')} />\n            </div>\n\n            <div className='conversation__content__names' onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n              <FormattedMessage id='conversation.with' defaultMessage='With {names}' values={{ names: <span>{names}</span> }} />\n            </div>\n          </div>\n\n          <StatusContent\n            status={lastStatus}\n            onClick={handleClick}\n            expanded={!lastStatus.get('hidden')}\n            onExpandedToggle={handleShowMore}\n            collapsible\n          />\n\n          {lastStatus.get('media_attachments').size > 0 && (\n            <AttachmentList\n              compact\n              media={lastStatus.get('media_attachments')}\n            />\n          )}\n\n          <div className='status__action-bar'>\n            <IconButton className='status__action-bar-button' title={intl.formatMessage(messages.reply)} icon='reply' iconComponent={ReplyIcon} onClick={handleReply} />\n\n            <div className='status__action-bar-dropdown'>\n              <Dropdown\n                scrollKey={scrollKey}\n                status={lastStatus}\n                items={menu}\n                icon='ellipsis-h'\n                iconComponent={MoreHorizIcon}\n                size={18}\n                direction='right'\n                title={intl.formatMessage(messages.more)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </HotKeys>\n  );\n};\n\nConversation.propTypes = {\n  conversation: ImmutablePropTypes.map.isRequired,\n  scrollKey: PropTypes.string,\n  onMoveUp: PropTypes.func,\n  onMoveDown: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nimport { useRef, useMemo, useCallback } from 'react';\n\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { debounce } from 'lodash';\n\nimport { expandConversations } from 'mastodon/actions/conversations';\nimport ScrollableList from 'mastodon/components/scrollable_list';\n\nimport { Conversation } from './conversation';\n\nconst focusChild = (node, index, alignTop) => {\n  const element = node.querySelector(`article:nth-of-type(${index + 1}) .focusable`);\n\n  if (element) {\n    if (alignTop && node.scrollTop > element.offsetTop) {\n      element.scrollIntoView(true);\n    } else if (!alignTop && node.scrollTop + node.clientHeight < element.offsetTop + element.offsetHeight) {\n      element.scrollIntoView(false);\n    }\n\n    element.focus();\n  }\n};\n\nexport const ConversationsList = ({ scrollKey, ...other }) => {\n  const listRef = useRef();\n  const conversations = useSelector(state => state.getIn(['conversations', 'items']));\n  const isLoading = useSelector(state => state.getIn(['conversations', 'isLoading'], true));\n  const hasMore = useSelector(state => state.getIn(['conversations', 'hasMore'], false));\n  const dispatch = useDispatch();\n  const lastStatusId = conversations.last()?.get('last_status');\n\n  const handleMoveUp = useCallback(id => {\n    const elementIndex = conversations.findIndex(x => x.get('id') === id) - 1;\n    focusChild(listRef.current.node, elementIndex, true);\n  }, [listRef, conversations]);\n\n  const handleMoveDown = useCallback(id => {\n    const elementIndex = conversations.findIndex(x => x.get('id') === id) + 1;\n    focusChild(listRef.current.node, elementIndex, false);\n  }, [listRef, conversations]);\n\n  const debouncedLoadMore = useMemo(() => debounce(id => {\n    dispatch(expandConversations({ maxId: id }));\n  }, 300, { leading: true }), [dispatch]);\n\n  const handleLoadMore = useCallback(() => {\n    if (lastStatusId) {\n      debouncedLoadMore(lastStatusId);\n    }\n  }, [debouncedLoadMore, lastStatusId]);\n\n  return (\n    <ScrollableList {...other} scrollKey={scrollKey} isLoading={isLoading} showLoading={isLoading && conversations.isEmpty()} hasMore={hasMore} onLoadMore={handleLoadMore} ref={listRef}>\n      {conversations.map(item => (\n        <Conversation\n          key={item.get('id')}\n          conversation={item}\n          onMoveUp={handleMoveUp}\n          onMoveDown={handleMoveDown}\n          scrollKey={scrollKey}\n        />\n      ))}\n    </ScrollableList>\n  );\n};\n\nConversationsList.propTypes = {\n  scrollKey: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport { useRef, useCallback, useEffect } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport { useDispatch } from 'react-redux';\n\nimport AlternateEmailIcon from '@/material-icons/400-24px/alternate_email.svg?react';\nimport { addColumn, removeColumn, moveColumn } from 'mastodon/actions/columns';\nimport { mountConversations, unmountConversations, expandConversations } from 'mastodon/actions/conversations';\nimport { connectDirectStream } from 'mastodon/actions/streaming';\nimport Column from 'mastodon/components/column';\nimport ColumnHeader from 'mastodon/components/column_header';\n\nimport { ConversationsList } from './components/conversations_list';\n\nconst messages = defineMessages({\n  title: { id: 'column.direct', defaultMessage: 'Private mentions' },\n});\n\nconst DirectTimeline = ({ columnId, multiColumn }) => {\n  const columnRef = useRef();\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const pinned = !!columnId;\n\n  const handlePin = useCallback(() => {\n    if (columnId) {\n      dispatch(removeColumn(columnId));\n    } else {\n      dispatch(addColumn('DIRECT', {}));\n    }\n  }, [dispatch, columnId]);\n\n  const handleMove = useCallback((dir) => {\n    dispatch(moveColumn(columnId, dir));\n  }, [dispatch, columnId]);\n\n  const handleHeaderClick = useCallback(() => {\n    columnRef.current.scrollTop();\n  }, [columnRef]);\n\n  useEffect(() => {\n    dispatch(mountConversations());\n    dispatch(expandConversations());\n\n    const disconnect = dispatch(connectDirectStream());\n\n    return () => {\n      dispatch(unmountConversations());\n      disconnect();\n    };\n  }, [dispatch]);\n\n  return (\n    <Column bindToDocument={!multiColumn} ref={columnRef} label={intl.formatMessage(messages.title)}>\n      <ColumnHeader\n        icon='at'\n        iconComponent={AlternateEmailIcon}\n        title={intl.formatMessage(messages.title)}\n        onPin={handlePin}\n        onMove={handleMove}\n        onClick={handleHeaderClick}\n        pinned={pinned}\n        multiColumn={multiColumn}\n      />\n\n      <ConversationsList\n        trackScroll={!pinned}\n        scrollKey={`direct_timeline-${columnId}`}\n        emptyMessage={<FormattedMessage id='empty_column.direct' defaultMessage=\"You don't have any private mentions yet. When you send or receive one, it will show up here.\" />}\n        bindToDocument={!multiColumn}\n        prepend={<div className='follow_requests-unlocked_explanation'><span><FormattedMessage id='compose_form.encryption_warning' defaultMessage='Posts on Mastodon are not end-to-end encrypted. Do not share any dangerous information over Mastodon.' /> <a href='/terms' target='_blank'><FormattedMessage id='compose_form.direct_message_warning_learn_more' defaultMessage='Learn more' /></a></span></div>}\n        alwaysPrepend\n      />\n\n      <Helmet>\n        <title>{intl.formatMessage(messages.title)}</title>\n        <meta name='robots' content='noindex' />\n      </Helmet>\n    </Column>\n  );\n};\n\nDirectTimeline.propTypes = {\n  columnId: PropTypes.string,\n  multiColumn: PropTypes.bool,\n};\n\nexport default DirectTimeline;\n"],"names":["SvgLink","props","React.createElement","filename","url","split","pop","AttachmentList","ImmutablePureComponent","render","media","compact","jsxs","classNames","jsx","Icon","LinkIcon","map","attachment","displayUrl","get","FormattedMessage","__publicField","propTypes","ImmutablePropTypes","list","isRequired","PropTypes","bool","AvatarComposite","PureComponent","renderItem","account","size","index","animate","width","height","top","left","bottom","right","style","Avatar","accounts","take","i","Math","min","defaultProps","autoPlayGif","messages","defineMessages","more","id","defaultMessage","open","reply","markAsRead","delete","muteConversation","unmuteConversation","getAccounts","createSelector","state","_","accountIds","getStatus","makeGetStatus","Conversation","conversation","scrollKey","onMoveUp","onMoveDown","unread","lastStatusId","intl","useIntl","dispatch","useDispatch","history","useHistory","lastStatus","useSelector","handleMouseEnter","useCallback","currentTarget","emojis","querySelectorAll","length","emoji","src","getAttribute","handleMouseLeave","handleClick","markConversationRead","push","getIn","handleMarkAsRead","handleReply","getState","trim","openModal","modalType","modalProps","status","replyCompose","handleDelete","deleteConversation","handleHotkeyMoveUp","handleHotkeyMoveDown","handleConversationMute","unmuteStatus","muteStatus","handleShowMore","toggleStatusSpoilers","menu","text","formatMessage","action","names","a","Link","__html","reduce","prev","cur","handlers","moveUp","moveDown","toggleHidden","HotKeys","RelativeTimestamp","StatusContent","IconButton","ReplyIcon","Dropdown","MoreHorizIcon","focusChild","node","alignTop","element","querySelector","scrollTop","offsetTop","scrollIntoView","clientHeight","offsetHeight","focus","ConversationsList","other","listRef","useRef","conversations","isLoading","hasMore","last","handleMoveUp","elementIndex","findIndex","x","current","handleMoveDown","debouncedLoadMore","useMemo","debounce","expandConversations","maxId","leading","handleLoadMore","ScrollableList","isEmpty","item","title","DirectTimeline","columnId","multiColumn","columnRef","pinned","handlePin","removeColumn","addColumn","handleMove","dir","moveColumn","handleHeaderClick","useEffect","mountConversations","disconnect","connectDirectStream","unmountConversations","Column","ColumnHeader","AlternateEmailIcon","Helmet"],"mappings":"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"}