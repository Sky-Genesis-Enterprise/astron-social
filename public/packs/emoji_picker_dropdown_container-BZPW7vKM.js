var _=Object.defineProperty;var M=(s,o,e)=>o in s?_(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e;var i=(s,o,e)=>M(s,typeof o!="symbol"?o+"":o,e);import{b as E,O as w,bT as T,an as y,bv as S,j as q,bU as D,aM as P}from"./useSelectableClick-DeaJbL2_.js";import{j as t}from"./client-wT6vtYO_.js";import{r as c,i as C,d as L}from"./index-BdTwX--g.js";import{c as F}from"./index-DizoKcfL.js";import{n as O,d as U}from"./index-CAH5FfLP.js";import{al as N}from"./content_warning-DZ8mar1O.js";import{M as R}from"./message-UFwkQlnu.js";const z=s=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:20,viewBox:"0 -960 960 960",width:20,...s},c.createElement("path",{d:"M612-516q25 0 42.5-17.5T672-576q0-25-17.5-42.5T612-636q-25 0-42.5 17.5T552-576q0 25 17.5 42.5T612-516Zm-264 0q25 0 42.5-17.5T408-576q0-25-17.5-42.5T348-636q-25 0-42.5 17.5T288-576q0 25 17.5 42.5T348-516Zm132 228q60 0 110.5-31t79.5-84H290q29 53 79.5 84T480-288Zm.28 192Q401-96 331-126t-122.5-82.5Q156-261 126-330.96t-30-149.5Q96-560 126-629.5q30-69.5 82.5-122T330.96-834q69.96-30 149.5-30t149.04 30q69.5 30 122 82.5T834-629.28q30 69.73 30 149Q864-401 834-331t-82.5 122.5Q699-156 629.28-126q-69.73 30-149 30ZM480-480Zm0 312q130 0 221-91t91-221q0-130-91-221t-221-91q-130 0-221 91t-91 221q0 130 91 221t221 91Z"})),a=L({emoji:{id:"emoji_button.label",defaultMessage:"Insert emoji"},emoji_search:{id:"emoji_button.search",defaultMessage:"Search..."},custom:{id:"emoji_button.custom",defaultMessage:"Custom"},recent:{id:"emoji_button.recent",defaultMessage:"Frequently used"},search_results:{id:"emoji_button.search_results",defaultMessage:"Search results"},people:{id:"emoji_button.people",defaultMessage:"People"},nature:{id:"emoji_button.nature",defaultMessage:"Nature"},food:{id:"emoji_button.food",defaultMessage:"Food & Drink"},activity:{id:"emoji_button.activity",defaultMessage:"Activity"},travel:{id:"emoji_button.travel",defaultMessage:"Travel & Places"},objects:{id:"emoji_button.objects",defaultMessage:"Objects"},symbols:{id:"emoji_button.symbols",defaultMessage:"Symbols"},flags:{id:"emoji_button.flags",defaultMessage:"Flags"}});let k,r;const f=T?{passive:!0,capture:!0}:!0,A=()=>t.jsxs("div",{className:"emoji-mart-no-results",children:[t.jsx(r,{emoji:"sleuth_or_spy",size:32}),t.jsx("div",{className:"emoji-mart-no-results-label",children:t.jsx(R,{id:"emoji_button.not_found",defaultMessage:"No matching emojis found"})})]});class I extends c.PureComponent{constructor(){super(...arguments);i(this,"handleClick",e=>{this.props.onSelect(e.currentTarget.getAttribute("data-index")*1)});i(this,"handleDocumentClick",e=>{this.node&&!this.node.contains(e.target)&&this.props.onClose()});i(this,"setRef",e=>{this.node=e})}UNSAFE_componentWillReceiveProps(e){e.active?this.attachListeners():this.removeListeners()}componentWillUnmount(){this.removeListeners()}attachListeners(){document.addEventListener("click",this.handleDocumentClick,{capture:!0}),document.addEventListener("touchend",this.handleDocumentClick,f)}removeListeners(){document.removeEventListener("click",this.handleDocumentClick,{capture:!0}),document.removeEventListener("touchend",this.handleDocumentClick,f)}render(){const{active:e}=this.props;return t.jsxs("div",{className:"emoji-picker-dropdown__modifiers__menu",style:{display:e?"block":"none"},ref:this.setRef,children:[t.jsx("button",{type:"button",onClick:this.handleClick,"data-index":1,children:t.jsx(r,{emoji:"fist",size:22,skin:1})}),t.jsx("button",{type:"button",onClick:this.handleClick,"data-index":2,children:t.jsx(r,{emoji:"fist",size:22,skin:2})}),t.jsx("button",{type:"button",onClick:this.handleClick,"data-index":3,children:t.jsx(r,{emoji:"fist",size:22,skin:3})}),t.jsx("button",{type:"button",onClick:this.handleClick,"data-index":4,children:t.jsx(r,{emoji:"fist",size:22,skin:4})}),t.jsx("button",{type:"button",onClick:this.handleClick,"data-index":5,children:t.jsx(r,{emoji:"fist",size:22,skin:5})}),t.jsx("button",{type:"button",onClick:this.handleClick,"data-index":6,children:t.jsx(r,{emoji:"fist",size:22,skin:6})})]})}}class Z extends c.PureComponent{constructor(){super(...arguments);i(this,"handleClick",()=>{this.props.active?this.props.onClose():this.props.onOpen()});i(this,"handleSelect",e=>{this.props.onChange(e),this.props.onClose()})}render(){const{active:e,modifier:n}=this.props;return t.jsxs("div",{className:"emoji-picker-dropdown__modifiers",children:[t.jsx(r,{emoji:"fist",size:22,skin:n,onClick:this.handleClick}),t.jsx(I,{active:e,onSelect:this.handleSelect,onClose:this.props.onClose})]})}}class b extends c.PureComponent{constructor(){super(...arguments);i(this,"state",{modifierOpen:!1,readyToFocus:!1});i(this,"handleDocumentClick",e=>{this.node&&!this.node.contains(e.target)&&!this.props.pickerButtonRef.contains(e.target)&&this.props.onClose()});i(this,"setRef",e=>{this.node=e});i(this,"getI18n",()=>{const{intl:e}=this.props;return{search:e.formatMessage(a.emoji_search),categories:{search:e.formatMessage(a.search_results),recent:e.formatMessage(a.recent),people:e.formatMessage(a.people),nature:e.formatMessage(a.nature),foods:e.formatMessage(a.food),activity:e.formatMessage(a.activity),places:e.formatMessage(a.travel),objects:e.formatMessage(a.objects),symbols:e.formatMessage(a.symbols),flags:e.formatMessage(a.flags),custom:e.formatMessage(a.custom)}}});i(this,"handleClick",(e,n)=>{e.native||(e.native=e.colons),n.ctrlKey||n.metaKey||this.props.onClose(),this.props.onPick(e)});i(this,"handleModifierOpen",()=>{this.setState({modifierOpen:!0})});i(this,"handleModifierClose",()=>{this.setState({modifierOpen:!1})});i(this,"handleModifierChange",e=>{this.props.onSkinTone(e)})}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,{capture:!0}),document.addEventListener("touchend",this.handleDocumentClick,f),requestAnimationFrame(()=>{if(this.setState({readyToFocus:!0}),this.node){const e=this.node.querySelector('input[type="search"]');e&&e.focus()}})}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,{capture:!0}),document.removeEventListener("touchend",this.handleDocumentClick,f)}render(){const{loading:e,style:n,intl:l,custom_emojis:m,skinTone:h,frequentlyUsedEmojis:g}=this.props;if(e)return t.jsx("div",{style:{width:299}});const d=l.formatMessage(a.emoji),{modifierOpen:u}=this.state,p=["recent","people","nature","foods","activity","places","objects","symbols","flags"];return p.splice(1,0,...Array.from(O(m)).sort()),t.jsxs("div",{className:F("emoji-picker-dropdown__menu",{selecting:u}),style:n,ref:this.setRef,children:[t.jsx(k,{perLine:8,emojiSize:22,custom:U(m),color:"",emoji:"",title:d,i18n:this.getI18n(),onClick:this.handleClick,include:p,recent:g,skin:h,showPreview:!1,showSkinTones:!1,notFound:A,autoFocus:this.state.readyToFocus,emojiTooltip:!0}),t.jsx(Z,{active:u,modifier:h,onOpen:this.handleModifierOpen,onClose:this.handleModifierClose,onChange:this.handleModifierChange})]})}}i(b,"defaultProps",{style:{},loading:!0,frequentlyUsedEmojis:[]});const H=C(b);let K=class extends c.PureComponent{constructor(){super(...arguments);i(this,"state",{active:!1,loading:!1,placement:"bottom"});i(this,"setRef",e=>{this.dropdown=e});i(this,"onShowDropdown",()=>{this.setState({active:!0}),k||(this.setState({loading:!0}),N().then(e=>{k=e.Picker,r=e.Emoji,this.setState({loading:!1})}).catch(()=>{this.setState({loading:!1,active:!1})}))});i(this,"onHideDropdown",()=>{this.setState({active:!1})});i(this,"onToggle",e=>{!this.state.loading&&(!e.key||e.key==="Enter")&&(this.state.active?this.onHideDropdown():this.onShowDropdown(e))});i(this,"handleKeyDown",e=>{e.key==="Escape"&&this.onHideDropdown()});i(this,"setTargetRef",e=>{this.target=e});i(this,"findTarget",()=>this.target);i(this,"handleOverlayEnter",e=>{this.setState({placement:e.placement})})}render(){const{intl:e,onPickEmoji:n,onSkinTone:l,skinTone:m,frequentlyUsedEmojis:h}=this.props,g=e.formatMessage(a.emoji),{active:d,loading:u,placement:p}=this.state;return t.jsxs("div",{className:"emoji-picker-dropdown",onKeyDown:this.handleKeyDown,ref:this.setTargetRef,children:[t.jsx(E,{title:g,"aria-expanded":d,active:d,iconComponent:z,onClick:this.onToggle,inverted:!0}),t.jsx(w,{show:d,placement:p,flip:!0,target:this.findTarget,popperConfig:{strategy:"fixed",onFirstUpdate:this.handleOverlayEnter},children:({props:v,placement:x})=>t.jsx("div",{...v,style:{...v.style},children:t.jsx("div",{className:`dropdown-animation ${x}`,children:t.jsx(H,{custom_emojis:this.props.custom_emojis,loading:u,onClose:this.onHideDropdown,onPick:n,onSkinTone:l,skinTone:m,frequentlyUsedEmojis:h,pickerButtonRef:this.target})})})})]})}};const Q=C(K),B=8,$=2,j=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","yum","disappointed","thinking_face","weary","sob","sunglasses","heart","ok_hand"],W=y([s=>s.getIn(["settings","frequentlyUsedEmojis"],S())],s=>{let o=s.keySeq().sort((e,n)=>s.get(e)-s.get(n)).reverse().slice(0,B*$).toArray();if(o.length<j.length){let e=j.filter(n=>!o.includes(n));o=o.concat(e.slice(0,j.length-o.length))}return o}),G=y([s=>s.get("custom_emojis")],s=>s.filter(o=>o.get("visible_in_picker")).sort((o,e)=>{const n=o.get("shortcode").toLowerCase(),l=e.get("shortcode").toLowerCase();return n<l?-1:n>l?1:0})),J=s=>({custom_emojis:G(s),skinTone:s.getIn(["settings","skinTone"]),frequentlyUsedEmojis:W(s)}),V=(s,{onPickEmoji:o})=>({onSkinTone:e=>{s(P(["skinTone"],e))},onPickEmoji:e=>{s(D(e)),o&&o(e)}}),re=q(J,V)(Q);export{re as E};
//# sourceMappingURL=emoji_picker_dropdown_container-BZPW7vKM.js.map
