{"version":3,"file":"explore-index-CDfUnPvL.js","sources":["../../app/javascript/mastodon/features/explore/components/story.jsx","../../app/javascript/mastodon/features/explore/links.jsx","../../app/javascript/mastodon/features/explore/statuses.jsx","../../app/javascript/mastodon/features/explore/components/card.tsx","../../app/javascript/mastodon/features/explore/suggestions.jsx","../../app/javascript/mastodon/features/explore/tags.jsx","../../app/javascript/mastodon/features/explore/index.tsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { useState, useCallback } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\n\n\n\nimport { Blurhash } from 'mastodon/components/blurhash';\nimport { RelativeTimestamp } from 'mastodon/components/relative_timestamp';\nimport { ShortNumber } from 'mastodon/components/short_number';\nimport { Skeleton } from 'mastodon/components/skeleton';\n\nimport { AuthorLink } from './author_link';\n\nconst sharesCountRenderer = (displayNumber, pluralReady) => (\n  <FormattedMessage\n    id='link_preview.shares'\n    defaultMessage='{count, plural, one {{counter} post} other {{counter} posts}}'\n    values={{\n      count: pluralReady,\n      counter: <strong>{displayNumber}</strong>,\n    }}\n  />\n);\n\nexport const Story = ({\n  url,\n  title,\n  lang,\n  publisher,\n  publishedAt,\n  author,\n  authorAccount,\n  sharedTimes,\n  thumbnail,\n  thumbnailDescription,\n  blurhash,\n  expanded\n}) => {\n  const [thumbnailLoaded, setThumbnailLoaded] = useState(false);\n\n  const handleImageLoad = useCallback(() => {\n    setThumbnailLoaded(true);\n  }, [setThumbnailLoaded]);\n\n  return (\n    <div className={classNames('story', { expanded })}>\n      <div className='story__details'>\n        <div className='story__details__publisher'>\n          {publisher ? <span lang={lang}>{publisher}</span> : <Skeleton width={50} />}{publishedAt && <> Â· <RelativeTimestamp timestamp={publishedAt} /></>}\n        </div>\n\n        <a className='story__details__title' lang={lang} href={url} target='blank' rel='noopener'>\n          {title ? title : <Skeleton />}\n        </a>\n\n        <div className='story__details__shared'>\n          {author ? <FormattedMessage id='link_preview.author' className='story__details__shared__author' defaultMessage='By {name}' values={{ name: authorAccount ? <AuthorLink accountId={authorAccount} /> : <strong>{author}</strong> }} /> : <span />}\n          {typeof sharedTimes === 'number' ? <Link className='story__details__shared__pill' to={`/links/${encodeURIComponent(url)}`}><ShortNumber value={sharedTimes} renderer={sharesCountRenderer} /></Link> : <Skeleton width='10ch' />}\n        </div>\n      </div>\n\n      <a className='story__thumbnail' href={url} target='blank' rel='noopener'>\n        {thumbnail ? (\n          <>\n            {!thumbnailLoaded && <Blurhash hash={blurhash} className='story__thumbnail__preview' />}\n            <img src={thumbnail} onLoad={handleImageLoad} alt={thumbnailDescription} title={thumbnailDescription} lang={lang} />\n          </>\n        ) : <Skeleton />}\n      </a>\n    </div>\n  );\n};\n\nStory.propTypes = {\n  url: PropTypes.string,\n  title: PropTypes.string,\n  lang: PropTypes.string,\n  publisher: PropTypes.string,\n  publishedAt: PropTypes.string,\n  author: PropTypes.string,\n  authorAccount: PropTypes.string,\n  sharedTimes: PropTypes.number,\n  thumbnail: PropTypes.string,\n  thumbnailDescription: PropTypes.string,\n  blurhash: PropTypes.string,\n  expanded: PropTypes.bool,\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport { withRouter } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\n\nimport { fetchTrendingLinks } from 'mastodon/actions/trends';\nimport { DismissableBanner } from 'mastodon/components/dismissable_banner';\nimport { LoadingIndicator } from 'mastodon/components/loading_indicator';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nimport { Story } from './components/story';\n\nconst mapStateToProps = state => ({\n  links: state.getIn(['trends', 'links', 'items']),\n  isLoading: state.getIn(['trends', 'links', 'isLoading']),\n});\n\nclass Links extends PureComponent {\n\n  static propTypes = {\n    links: ImmutablePropTypes.list,\n    isLoading: PropTypes.bool,\n    dispatch: PropTypes.func.isRequired,\n    ...WithRouterPropTypes,\n  };\n\n  componentDidMount () {\n    const { dispatch, links, history } = this.props;\n\n    // If we're navigating back to the screen, do not trigger a reload\n    if (history.action === 'POP' && links.size > 0) {\n      return;\n    }\n\n    dispatch(fetchTrendingLinks());\n  }\n\n  render () {\n    const { isLoading, links } = this.props;\n\n    if (!isLoading && links.isEmpty()) {\n      return (\n        <div className='explore__links scrollable scrollable--flex'>\n          <div className='empty-column-indicator'>\n            <FormattedMessage id='empty_column.explore_statuses' defaultMessage='Nothing is trending right now. Check back later!' />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className='explore__links scrollable' data-nosnippet>\n        {isLoading ? (<LoadingIndicator />) : links.map((link, i) => (\n          <Story\n            key={link.get('id')}\n            expanded={i === 0}\n            lang={link.get('language')}\n            url={link.get('url')}\n            title={link.get('title')}\n            publisher={link.get('provider_name')}\n            publishedAt={link.get('published_at')}\n            author={link.get('author_name')}\n            authorAccount={link.getIn(['authors', 0, 'account', 'id'])}\n            sharedTimes={link.getIn(['history', 0, 'accounts']) * 1 + link.getIn(['history', 1, 'accounts']) * 1}\n            thumbnail={link.get('image')}\n            thumbnailDescription={link.get('image_description')}\n            blurhash={link.get('blurhash')}\n          />\n        ))}\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(withRouter(Links));\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport { withRouter } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\n\nimport { debounce } from 'lodash';\n\n\nimport { fetchTrendingStatuses, expandTrendingStatuses } from 'mastodon/actions/trends';\nimport { DismissableBanner } from 'mastodon/components/dismissable_banner';\nimport StatusList from 'mastodon/components/status_list';\nimport { getStatusList } from 'mastodon/selectors';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nconst mapStateToProps = state => ({\n  statusIds: getStatusList(state, 'trending'),\n  isLoading: state.getIn(['status_lists', 'trending', 'isLoading'], true),\n  hasMore: !!state.getIn(['status_lists', 'trending', 'next']),\n});\n\nclass Statuses extends PureComponent {\n\n  static propTypes = {\n    statusIds: ImmutablePropTypes.list,\n    isLoading: PropTypes.bool,\n    hasMore: PropTypes.bool,\n    multiColumn: PropTypes.bool,\n    dispatch: PropTypes.func.isRequired,\n    ...WithRouterPropTypes,\n  };\n\n  componentDidMount () {\n    const { dispatch, statusIds, history } = this.props;\n\n    // If we're navigating back to the screen, do not trigger a reload\n    if (history.action === 'POP' && statusIds.size > 0) {\n      return;\n    }\n\n    dispatch(fetchTrendingStatuses());\n  }\n\n  handleLoadMore = debounce(() => {\n    const { dispatch } = this.props;\n    dispatch(expandTrendingStatuses());\n  }, 300, { leading: true });\n\n  render () {\n    const { isLoading, hasMore, statusIds, multiColumn } = this.props;\n\n    const emptyMessage = <FormattedMessage id='empty_column.explore_statuses' defaultMessage='Nothing is trending right now. Check back later!' />;\n\n    return (\n      <StatusList\n        trackScroll\n        alwaysPrepend\n        timelineId='explore'\n        statusIds={statusIds}\n        scrollKey='explore-statuses'\n        hasMore={hasMore}\n        isLoading={isLoading}\n        onLoadMore={this.handleLoadMore}\n        emptyMessage={emptyMessage}\n        bindToDocument={!multiColumn}\n        withCounters\n      />\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(withRouter(Statuses));\n","import { useCallback } from 'react';\n\nimport { FormattedMessage, useIntl, defineMessages } from 'react-intl';\n\nimport { Link } from 'react-router-dom';\n\nimport CloseIcon from '@/material-icons/400-24px/close.svg?react';\nimport { dismissSuggestion } from 'mastodon/actions/suggestions';\nimport { Avatar } from 'mastodon/components/avatar';\nimport { DisplayName } from 'mastodon/components/display_name';\nimport { FollowButton } from 'mastodon/components/follow_button';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport { domain } from 'mastodon/initial_state';\nimport { useAppDispatch, useAppSelector } from 'mastodon/store';\n\nconst messages = defineMessages({\n  dismiss: {\n    id: 'follow_suggestions.dismiss',\n    defaultMessage: \"Don't show again\",\n  },\n});\n\ntype SuggestionSource =\n  | 'friends_of_friends'\n  | 'similar_to_recently_followed'\n  | 'featured'\n  | 'most_followed'\n  | 'most_interactions';\n\nexport const Card: React.FC<{ id: string; source: SuggestionSource }> = ({\n  id,\n  source,\n}) => {\n  const intl = useIntl();\n  const account = useAppSelector((state) => state.accounts.get(id));\n  const dispatch = useAppDispatch();\n\n  const handleDismiss = useCallback(() => {\n    void dispatch(dismissSuggestion({ accountId: id }));\n  }, [id, dispatch]);\n\n  let label;\n\n  switch (source) {\n    case 'friends_of_friends':\n      label = (\n        <FormattedMessage\n          id='follow_suggestions.friends_of_friends_longer'\n          defaultMessage='Popular among people you follow'\n        />\n      );\n      break;\n    case 'similar_to_recently_followed':\n      label = (\n        <FormattedMessage\n          id='follow_suggestions.similar_to_recently_followed_longer'\n          defaultMessage='Similar to profiles you recently followed'\n        />\n      );\n      break;\n    case 'featured':\n      label = (\n        <FormattedMessage\n          id='follow_suggestions.featured_longer'\n          defaultMessage='Hand-picked by the {domain} team'\n          values={{ domain }}\n        />\n      );\n      break;\n    case 'most_followed':\n      label = (\n        <FormattedMessage\n          id='follow_suggestions.popular_suggestion_longer'\n          defaultMessage='Popular on {domain}'\n          values={{ domain }}\n        />\n      );\n      break;\n    case 'most_interactions':\n      label = (\n        <FormattedMessage\n          id='follow_suggestions.popular_suggestion_longer'\n          defaultMessage='Popular on {domain}'\n          values={{ domain }}\n        />\n      );\n      break;\n  }\n\n  if (!account) {\n    return null;\n  }\n\n  return (\n    <div className='explore-suggestions-card'>\n      <div className='explore-suggestions-card__source'>{label}</div>\n\n      <div className='explore-suggestions-card__body'>\n        <Link\n          to={`/@${account.get('acct')}`}\n          data-hover-card-account={account.id}\n          className='explore-suggestions-card__link'\n        >\n          <Avatar\n            account={account}\n            size={48}\n            className='explore-suggestions-card__avatar'\n          />\n          <DisplayName account={account} />\n        </Link>\n        <div className='explore-suggestions-card__actions'>\n          <IconButton\n            icon='close'\n            iconComponent={CloseIcon}\n            onClick={handleDismiss}\n            title={intl.formatMessage(messages.dismiss)}\n            className='explore-suggestions-card__dismiss-button'\n          />\n          <FollowButton accountId={account.get('id')} />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport { withRouter } from 'react-router-dom';\n\nimport { connect } from 'react-redux';\n\nimport { fetchSuggestions } from 'mastodon/actions/suggestions';\nimport { LoadingIndicator } from 'mastodon/components/loading_indicator';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nimport { Card } from './components/card';\n\nconst mapStateToProps = state => ({\n  suggestions: state.suggestions.items,\n  isLoading: state.suggestions.isLoading,\n});\n\nclass Suggestions extends PureComponent {\n\n  static propTypes = {\n    isLoading: PropTypes.bool,\n    suggestions: PropTypes.array,\n    dispatch: PropTypes.func.isRequired,\n    ...WithRouterPropTypes,\n  };\n\n  componentDidMount () {\n    const { dispatch, suggestions, history } = this.props;\n\n    // If we're navigating back to the screen, do not trigger a reload\n    if (history.action === 'POP' && suggestions.length > 0) {\n      return;\n    }\n\n    dispatch(fetchSuggestions());\n  }\n\n  render () {\n    const { isLoading, suggestions } = this.props;\n\n    if (!isLoading && suggestions.length === 0) {\n      return (\n        <div className='explore__suggestions scrollable scrollable--flex'>\n          <div className='empty-column-indicator'>\n            <FormattedMessage id='empty_column.explore_statuses' defaultMessage='Nothing is trending right now. Check back later!' />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className='explore__suggestions scrollable' data-nosnippet>\n        {isLoading ? <LoadingIndicator /> : suggestions.map(suggestion => (\n          <Card\n            key={suggestion.account_id}\n            id={suggestion.account_id}\n            source={suggestion.sources[0]}\n          />\n        ))}\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(withRouter(Suggestions));\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport { withRouter } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\n\nimport { fetchTrendingHashtags } from 'mastodon/actions/trends';\nimport { DismissableBanner } from 'mastodon/components/dismissable_banner';\nimport { ImmutableHashtag as Hashtag } from 'mastodon/components/hashtag';\nimport { LoadingIndicator } from 'mastodon/components/loading_indicator';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nconst mapStateToProps = state => ({\n  hashtags: state.getIn(['trends', 'tags', 'items']),\n  isLoadingHashtags: state.getIn(['trends', 'tags', 'isLoading']),\n});\n\nclass Tags extends PureComponent {\n\n  static propTypes = {\n    hashtags: ImmutablePropTypes.list,\n    isLoading: PropTypes.bool,\n    dispatch: PropTypes.func.isRequired,\n    ...WithRouterPropTypes,\n  };\n\n  componentDidMount () {\n    const { dispatch, history, hashtags } = this.props;\n\n    // If we're navigating back to the screen, do not trigger a reload\n    if (history.action === 'POP' && hashtags.size > 0) {\n      return;\n    }\n\n    dispatch(fetchTrendingHashtags());\n  }\n\n  render () {\n    const { isLoading, hashtags } = this.props;\n\n    if (!isLoading && hashtags.isEmpty()) {\n      return (\n        <div className='explore__links scrollable scrollable--flex'>\n          <div className='empty-column-indicator'>\n            <FormattedMessage id='empty_column.explore_statuses' defaultMessage='Nothing is trending right now. Check back later!' />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className='scrollable explore__links' data-nosnippet>\n        {isLoading ? (<LoadingIndicator />) : hashtags.map(hashtag => (\n          <Hashtag key={hashtag.get('name')} hashtag={hashtag} />\n        ))}\n      </div>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(withRouter(Tags));\n","import { useCallback, useRef } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\nimport { NavLink, Switch, Route } from 'react-router-dom';\n\nimport TrendingUpIcon from '@/material-icons/400-24px/trending_up.svg?react';\nimport { Column } from 'mastodon/components/column';\nimport type { ColumnRef } from 'mastodon/components/column';\nimport { ColumnHeader } from 'mastodon/components/column_header';\nimport { SymbolLogo } from 'mastodon/components/logo';\nimport { Search } from 'mastodon/features/compose/components/search';\nimport { useBreakpoint } from 'mastodon/features/ui/hooks/useBreakpoint';\nimport { useIdentity } from 'mastodon/identity_context';\n\nimport Links from './links';\nimport Statuses from './statuses';\nimport Suggestions from './suggestions';\nimport Tags from './tags';\n\nconst messages = defineMessages({\n  title: { id: 'explore.title', defaultMessage: 'Trending' },\n});\n\nconst Explore: React.FC<{ multiColumn: boolean }> = ({ multiColumn }) => {\n  const { signedIn } = useIdentity();\n  const intl = useIntl();\n  const columnRef = useRef<ColumnRef>(null);\n  const logoRequired = useBreakpoint('full');\n\n  const handleHeaderClick = useCallback(() => {\n    columnRef.current?.scrollTop();\n  }, []);\n\n  return (\n    <Column\n      bindToDocument={!multiColumn}\n      ref={columnRef}\n      label={intl.formatMessage(messages.title)}\n    >\n      <ColumnHeader\n        icon={'explore'}\n        iconComponent={logoRequired ? SymbolLogo : TrendingUpIcon}\n        title={intl.formatMessage(messages.title)}\n        onClick={handleHeaderClick}\n        multiColumn={multiColumn}\n      />\n\n      <div className='explore__search-header'>\n        <Search singleColumn />\n      </div>\n\n      <div className='account__section-headline'>\n        <NavLink exact to='/explore'>\n          <FormattedMessage\n            tagName='div'\n            id='explore.trending_statuses'\n            defaultMessage='Posts'\n          />\n        </NavLink>\n\n        <NavLink exact to='/explore/tags'>\n          <FormattedMessage\n            tagName='div'\n            id='explore.trending_tags'\n            defaultMessage='Hashtags'\n          />\n        </NavLink>\n\n        {signedIn && (\n          <NavLink exact to='/explore/suggestions'>\n            <FormattedMessage\n              tagName='div'\n              id='explore.suggested_follows'\n              defaultMessage='People'\n            />\n          </NavLink>\n        )}\n\n        <NavLink exact to='/explore/links'>\n          <FormattedMessage\n            tagName='div'\n            id='explore.trending_links'\n            defaultMessage='News'\n          />\n        </NavLink>\n      </div>\n\n      <Switch>\n        <Route path='/explore/tags' component={Tags} />\n        <Route path='/explore/links' component={Links} />\n        <Route path='/explore/suggestions' component={Suggestions} />\n        <Route exact path={['/explore', '/explore/posts']}>\n          <Statuses multiColumn={multiColumn} />\n        </Route>\n      </Switch>\n\n      <Helmet>\n        <title>{intl.formatMessage(messages.title)}</title>\n        <meta name='robots' content='all' />\n      </Helmet>\n    </Column>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default Explore;\n"],"names":["sharesCountRenderer","displayNumber","pluralReady","jsx","FormattedMessage","count","counter","Story","url","title","lang","publisher","publishedAt","author","authorAccount","sharedTimes","thumbnail","thumbnailDescription","blurhash","expanded","thumbnailLoaded","setThumbnailLoaded","useState","handleImageLoad","useCallback","jsxs","classNames","Skeleton","Fragment","RelativeTimestamp","name","AuthorLink","Link","encodeURIComponent","ShortNumber","Blurhash","mapStateToProps","state","links","getIn","isLoading","Links","PureComponent","componentDidMount","dispatch","history","props","action","size","fetchTrendingLinks","render","isEmpty","LoadingIndicator","map","link","i","get","Links$1","connect","withRouter","statusIds","getStatusList","hasMore","Statuses","handleLoadMore","debounce","expandTrendingStatuses","leading","fetchTrendingStatuses","multiColumn","emptyMessage","StatusList","Statuses$1","messages","defineMessages","dismiss","id","defaultMessage","Card","source","intl","useIntl","account","useAppSelector","accounts","useAppDispatch","handleDismiss","dismissSuggestion","accountId","label","domain","Avatar","DisplayName","IconButton","CloseIcon","formatMessage","FollowButton","suggestions","items","Suggestions","length","fetchSuggestions","suggestion","account_id","sources","Suggestions$1","hashtags","isLoadingHashtags","Tags","fetchTrendingHashtags","hashtag","Hashtag","Tags$1","Explore","signedIn","useIdentity","columnRef","useRef","logoRequired","useBreakpoint","handleHeaderClick","current","scrollTop","Column","ColumnHeader","SymbolLogo","TrendingUpIcon","Search","NavLink","Switch","Route","Helmet"],"mappings":"i1EAiBA,MAAMA,GAAsBA,CAACC,EAAeC,IAC1CC,MAACC,GACC,GAAE,sBACF,eAAe,gEACf,OAAQ,CACNC,MAAOH,EACPI,QAASH,EAAAA,IAAC,SAAA,CAAQF,SAAAA,CAAAA,CAAc,CAClC,EAAE,EAIOM,GAAQA,CAAC,CACpBC,IAAAA,EACAC,MAAAA,EACAC,KAAAA,EACAC,UAAAA,EACAC,YAAAA,EACAC,OAAAA,EACAC,cAAAA,EACAC,YAAAA,EACAC,UAAAA,EACAC,qBAAAA,EACAC,SAAAA,EACAC,SAAAA,CACF,IAAM,CACJ,KAAM,CAACC,EAAiBC,CAAkB,EAAIC,EAAAA,SAAS,EAAK,EAEtDC,EAAkBC,EAAAA,YAAY,IAAM,CACxCH,EAAmB,EAAI,CAAA,EACtB,CAACA,CAAkB,CAAC,EAEvB,OACEI,EAAAA,KAAC,MAAA,CAAI,UAAWC,GAAW,QAAS,CAAEP,SAAAA,CAAAA,CAAU,EAC9C,SAAA,CAAAM,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACZd,SAAAA,CAAAA,EAAYR,EAAAA,IAAC,QAAK,KAAAO,EAAaC,SAAAA,EAAU,EAAUR,EAAAA,IAACwB,EAAA,CAAS,MAAO,EAAA,GAAQf,GAAea,EAAAA,KAAAG,WAAA,CAAE,SAAA,CAAA,MAAGzB,EAAAA,IAAC0B,GAAA,CAAkB,UAAWjB,CAAAA,IAAe,CAAA,EAChJ,EAEAT,MAAC,IAAA,CAAE,UAAU,wBAAwB,KAAAO,EAAY,KAAMF,EAAK,OAAO,QAAQ,IAAI,WAC5EC,SAAAA,GAAgBN,EAAAA,IAACwB,IAAQ,EAC5B,EAEAF,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACZZ,SAAAA,CAAAA,EAASV,EAAAA,IAACC,GAAiB,GAAE,sBAAuB,UAAU,iCAAiC,eAAe,YAAY,OAAQ,CAAE0B,KAAMhB,EAAgBX,MAAC4B,EAAA,CAAW,UAAWjB,CAAAA,CAAc,EAAMX,EAAAA,IAAC,SAAA,CAAQU,SAAAA,CAAAA,CAAO,CAAA,CAAU,CAAE,EAAMV,EAAAA,IAAC,OAAA,EAAI,EAC5O,OAAOY,GAAgB,SAAWZ,MAAC6B,EAAA,CAAK,UAAU,+BAA+B,GAAI,UAAUC,mBAAmBzB,CAAG,CAAC,GAAI,SAAAL,EAAAA,IAAC+B,EAAA,CAAY,MAAOnB,EAAa,SAAUf,GAAoB,EAAG,EAAUG,EAAAA,IAACwB,EAAA,CAAS,MAAM,MAAA,CAAM,CAAA,CAAA,CAC/N,CAAA,EACF,EAEAxB,EAAAA,IAAC,IAAA,CAAE,UAAU,mBAAmB,KAAMK,EAAK,OAAO,QAAQ,IAAI,WAC3DQ,SAAAA,EACCS,EAAAA,KAAAG,EAAAA,SAAA,CACG,SAAA,CAAA,CAACR,GAAmBjB,EAAAA,IAACgC,EAAA,CAAS,KAAMjB,EAAU,UAAU,4BAA2B,EACpFf,EAAAA,IAAC,MAAA,CAAI,IAAKa,EAAW,OAAQO,EAAiB,IAAKN,EAAsB,MAAOA,EAAsB,KAAAP,CAAA,CAAW,CAAA,CAAA,CACnH,EACEP,EAAAA,IAACwB,EAAA,CAAA,CAAQ,CAAA,CACf,CAAA,EACF,CAEJ,EC1DMS,GAAkBC,IAAU,CAChCC,MAAOD,EAAME,MAAM,CAAC,SAAU,QAAS,OAAO,CAAC,EAC/CC,UAAWH,EAAME,MAAM,CAAC,SAAU,QAAS,WAAW,CAAC,CACzD,GAEA,MAAME,WAAcC,EAAAA,aAAc,CAShCC,mBAAqB,CACnB,KAAM,CAAEC,SAAAA,EAAUN,MAAAA,EAAOO,QAAAA,CAAAA,EAAY,KAAKC,MAGtCD,EAAQE,SAAW,OAAST,EAAMU,KAAO,GAI7CJ,EAASK,GAAoB,CAAA,CAG/BC,QAAU,CACR,KAAM,CAAEV,UAAAA,EAAWF,MAAAA,CAAAA,EAAU,KAAKQ,MAElC,MAAI,CAACN,GAAaF,EAAMa,UAEpBhD,EAAAA,IAAC,MAAA,CAAI,UAAU,6CACb,eAAC,MAAA,CAAI,UAAU,yBACb,SAAAA,EAAAA,IAACC,GAAiB,mCAAmC,eAAe,kDAAA,CAAkD,EACxH,EACF,EAKFD,EAAAA,IAAC,OAAI,UAAU,4BAA4B,iBAAc,GACtDqC,SAAAA,QAAcY,EAAA,CAAA,CAAgB,EAAOd,EAAMe,IAAI,CAACC,EAAMC,IACrDpD,EAAAA,IAACI,IAEC,SAAUgD,IAAM,EAChB,KAAMD,EAAKE,IAAI,UAAU,EACzB,IAAKF,EAAKE,IAAI,KAAK,EACnB,MAAOF,EAAKE,IAAI,OAAO,EACvB,UAAWF,EAAKE,IAAI,eAAe,EACnC,YAAaF,EAAKE,IAAI,cAAc,EACpC,OAAQF,EAAKE,IAAI,aAAa,EAC9B,cAAeF,EAAKf,MAAM,CAAC,UAAW,EAAG,UAAW,IAAI,CAAC,EACzD,YAAae,EAAKf,MAAM,CAAC,UAAW,EAAG,UAAU,CAAC,EAAI,EAAIe,EAAKf,MAAM,CAAC,UAAW,EAAG,UAAU,CAAC,EAAI,EACnG,UAAWe,EAAKE,IAAI,OAAO,EAC3B,qBAAsBF,EAAKE,IAAI,mBAAmB,EAClD,SAAUF,EAAKE,IAAI,UAAU,CAAA,EAZxBF,EAAKE,IAAI,IAAI,CAYa,CAElC,EACH,CAAA,CAIN,CAEA,MAAAC,GAAeC,EAAQtB,EAAe,EAAEuB,EAAWlB,EAAK,CAAC,EC7DnDL,GAAkBC,IAAU,CAChCuB,UAAWC,GAAcxB,EAAO,UAAU,EAC1CG,UAAWH,EAAME,MAAM,CAAC,eAAgB,WAAY,WAAW,EAAG,EAAI,EACtEuB,QAAS,CAAC,CAACzB,EAAME,MAAM,CAAC,eAAgB,WAAY,MAAM,CAAC,CAC7D,GAEA,MAAMwB,WAAiBrB,EAAAA,aAAc,CAArC,kCAsBEsB,EAAAA,sBAAiBC,EAAS,IAAM,CAC9B,KAAM,CAAErB,SAAAA,CAAAA,EAAa,KAAKE,MAC1BF,EAASsB,GAAwB,CAAA,EAChC,IAAK,CAAEC,QAAS,EAAA,CAAM,GAdzBxB,mBAAqB,CACnB,KAAM,CAAEC,SAAAA,EAAUgB,UAAAA,EAAWf,QAAAA,CAAAA,EAAY,KAAKC,MAG1CD,EAAQE,SAAW,OAASa,EAAUZ,KAAO,GAIjDJ,EAASwB,GAAuB,CAAA,CAQlClB,QAAU,CACR,KAAM,CAAEV,UAAAA,EAAWsB,QAAAA,EAASF,UAAAA,EAAWS,YAAAA,CAAAA,EAAgB,KAAKvB,MAEtDwB,EAAenE,EAAAA,IAACC,EAAA,CAAiB,GAAE,gCAAiC,eAAe,mDAAkD,EAE3I,OACED,MAACoE,IACC,YAAW,GACX,cAAa,GACb,WAAW,UACX,UAAAX,EACA,UAAU,mBACV,QAAAE,EACA,UAAAtB,EACA,WAAY,KAAKwB,eACjB,aAAAM,EACA,eAAgB,CAACD,EACjB,aAAY,EAAA,CAAA,CAAA,CAKpB,CAEA,MAAAG,GAAed,EAAQtB,EAAe,EAAEuB,EAAWI,EAAQ,CAAC,EC7DtDU,GAAWC,EAAe,CAC9BC,QAAS,CACPC,GAAE,6BACFC,eAAc,kBAAA,CAElB,CAAC,EASYC,GAA2DA,CAAC,CACvEF,GAAAA,EACAG,OAAAA,CACF,IAAM,CACJ,MAAMC,EAAOC,EAAAA,EACPC,EAAUC,EAAgB9C,GAAUA,EAAM+C,SAAS5B,IAAIoB,CAAE,CAAC,EAC1DhC,EAAWyC,EAAAA,EAEXC,EAAgB9D,EAAAA,YAAY,IAAM,CACjCoB,EAAS2C,EAAkB,CAAEC,UAAWZ,CAAAA,CAAI,CAAC,CAAA,EACjD,CAACA,EAAIhC,CAAQ,CAAC,EAEjB,IAAI6C,EAEJ,OAAQV,EAAAA,CACN,IAAK,qBACHU,EACEtF,EAAAA,IAACC,EAAA,CACC,kDACA,eAAe,kCAAiC,EAGpD,MACF,IAAK,+BACHqF,EACEtF,EAAAA,IAACC,EAAA,CACC,4DACA,eAAe,4CAA2C,EAG9D,MACF,IAAK,WACHqF,QACGrF,EAAA,CACC,GAAE,qCACF,eAAe,mCACf,OAAQ,CAAEsF,OAAAA,CAAAA,EAAS,EAGvB,MACF,IAAK,gBACHD,QACGrF,EAAA,CACC,GAAE,+CACF,eAAe,sBACf,OAAQ,CAAEsF,OAAAA,CAAAA,EAAS,EAGvB,MACF,IAAK,oBACHD,QACGrF,EAAA,CACC,GAAE,+CACF,eAAe,sBACf,OAAQ,CAAEsF,OAAAA,CAAAA,EAAS,EAGvB,KAAA,CAGJ,OAAKR,EAKHzD,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAtB,EAAAA,IAAC,MAAA,CAAI,UAAU,mCAAoCsF,SAAAA,EAAM,EAEzDhE,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAA,EAAAA,KAACO,EAAA,CACC,GAAI,KAAKkD,EAAQ1B,IAAI,MAAM,CAAC,GAC5B,0BAAyB0B,EAAQN,GACjC,UAAU,iCAEV,SAAA,CAAAzE,EAAAA,IAACwF,EAAA,CACC,QAAAT,EACA,KAAM,GACN,UAAU,mCAAkC,EAE9C/E,MAACyF,IAAY,QAAAV,CAAA,CAAiB,CAAA,EAChC,EACAzD,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAtB,EAAAA,IAAC0F,EAAA,CACC,KAAK,QACL,cAAeC,GACf,QAASR,EACT,MAAON,EAAKe,cAActB,GAASE,OAAO,EAC1C,UAAU,2CAA0C,QAErDqB,GAAA,CAAa,UAAWd,EAAQ1B,IAAI,IAAI,CAAA,CAAE,CAAA,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,EACF,EA/BO,IAiCX,EC5GMpB,GAAkBC,IAAU,CAChC4D,YAAa5D,EAAM4D,YAAYC,MAC/B1D,UAAWH,EAAM4D,YAAYzD,SAC/B,GAEA,MAAM2D,WAAoBzD,EAAAA,aAAc,CAStCC,mBAAqB,CACnB,KAAM,CAAEC,SAAAA,EAAUqD,YAAAA,EAAapD,QAAAA,CAAAA,EAAY,KAAKC,MAG5CD,EAAQE,SAAW,OAASkD,EAAYG,OAAS,GAIrDxD,EAASyD,GAAkB,CAAA,CAG7BnD,QAAU,CACR,KAAM,CAAEV,UAAAA,EAAWyD,YAAAA,CAAAA,EAAgB,KAAKnD,MAExC,MAAI,CAACN,GAAayD,EAAYG,SAAW,EAErCjG,EAAAA,IAAC,MAAA,CAAI,UAAU,mDACb,eAAC,MAAA,CAAI,UAAU,yBACb,SAAAA,EAAAA,IAACC,GAAiB,mCAAmC,eAAe,kDAAA,CAAkD,EACxH,EACF,EAKFD,EAAAA,IAAC,MAAA,CAAI,UAAU,kCAAkC,iBAAc,GAC5DqC,SAAAA,EAAYrC,EAAAA,IAACiD,EAAA,CAAA,CAAgB,EAAM6C,EAAY5C,IAAIiD,SACjDxB,GAAA,CAEC,GAAIwB,EAAWC,WACf,OAAQD,EAAWE,QAAQ,CAAC,CAAA,EAFvBF,EAAWC,WAInB,CAAA,CACH,CAAA,CAIN,CAEA,MAAAE,GAAe/C,EAAQtB,EAAe,EAAEuB,EAAWwC,EAAW,CAAC,ECpDzD/D,GAAkBC,IAAU,CAChCqE,SAAUrE,EAAME,MAAM,CAAC,SAAU,OAAQ,OAAO,CAAC,EACjDoE,kBAAmBtE,EAAME,MAAM,CAAC,SAAU,OAAQ,WAAW,CAAC,CAChE,GAEA,MAAMqE,WAAalE,EAAAA,aAAc,CAS/BC,mBAAqB,CACnB,KAAM,CAAEC,SAAAA,EAAUC,QAAAA,EAAS6D,SAAAA,CAAAA,EAAa,KAAK5D,MAGzCD,EAAQE,SAAW,OAAS2D,EAAS1D,KAAO,GAIhDJ,EAASiE,GAAuB,CAAA,CAGlC3D,QAAU,CACR,KAAM,CAAEV,UAAAA,EAAWkE,SAAAA,CAAAA,EAAa,KAAK5D,MAErC,MAAI,CAACN,GAAakE,EAASvD,UAEvBhD,EAAAA,IAAC,MAAA,CAAI,UAAU,6CACb,eAAC,MAAA,CAAI,UAAU,yBACb,SAAAA,EAAAA,IAACC,GAAiB,mCAAmC,eAAe,kDAAA,CAAkD,EACxH,EACF,EAKFD,MAAC,OAAI,UAAU,4BAA4B,iBAAc,GACtDqC,SAAAA,QAAcY,EAAA,CAAA,CAAgB,EAAOsD,EAASrD,IAAIyD,SAChDC,GAAA,CAAkC,QAAAD,CAAA,EAArBA,EAAQtD,IAAI,MAAM,EACjC,CAAA,CACH,CAAA,CAIN,CAEA,MAAAwD,GAAetD,EAAQtB,EAAe,EAAEuB,EAAWiD,EAAI,CAAC,EC5ClDnC,EAAWC,EAAe,CAC9BjE,MAAO,CAAEmE,GAAE,gBAAmBC,eAAc,UAAA,CAC9C,CAAC,EAEKoC,GAA8CA,CAAC,CAAE5C,YAAAA,CAAY,IAAM,CACvE,KAAM,CAAE6C,SAAAA,CAAAA,EAAaC,GAAAA,EACfnC,EAAOC,EAAAA,EACPmC,EAAYC,EAAAA,OAAkB,IAAI,EAClCC,EAAeC,EAAc,MAAM,EAEnCC,EAAoBhG,EAAAA,YAAY,IAAM,QAC1C4F,EAAAA,EAAUK,UAAVL,MAAAA,EAAmBM,WAAU,EAC5B,EAAE,EAEL,OACEjG,EAAAA,KAACkG,EAAA,CACC,eAAgB,CAACtD,EACjB,IAAK+C,EACL,MAAOpC,EAAKe,cAActB,EAAShE,KAAK,EAExC,SAAA,CAAAN,EAAAA,IAACyH,EAAA,CACC,KAAM,UACN,cAAeN,EAAeO,EAAaC,EAC3C,MAAO9C,EAAKe,cAActB,EAAShE,KAAK,EACxC,QAAS+G,EACT,YAAAnD,EAAyB,EAG3BlE,EAAAA,IAAC,OAAI,UAAU,yBACb,eAAC4H,EAAA,CAAO,aAAY,GAAA,CAAA,CACtB,EAEAtG,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAtB,EAAAA,IAAC6H,EAAA,CAAQ,MAAK,GAAC,GAAG,WAChB,SAAA7H,EAAAA,IAACC,EAAA,CACC,QAAQ,MACR,GAAE,4BACF,eAAe,QAAO,EAE1B,EAEAD,EAAAA,IAAC6H,EAAA,CAAQ,MAAK,GAAC,GAAG,gBAChB,SAAA7H,EAAAA,IAACC,EAAA,CACC,QAAQ,MACR,GAAE,wBACF,eAAe,WAAU,EAE7B,EAEC8G,GACC/G,EAAAA,IAAC6H,EAAA,CAAQ,MAAK,GAAC,GAAG,uBAChB,SAAA7H,EAAAA,IAACC,EAAA,CACC,QAAQ,MACR,GAAE,4BACF,eAAe,SAAQ,EAE3B,EAGFD,EAAAA,IAAC6H,EAAA,CAAQ,MAAK,GAAC,GAAG,iBAChB,SAAA7H,EAAAA,IAACC,EAAA,CACC,QAAQ,MACR,GAAE,yBACF,eAAe,OAAM,CAAA,CAEzB,CAAA,EACF,SAEC6H,EAAA,CACC,SAAA,CAAA9H,EAAAA,IAAC+H,EAAA,CAAM,KAAK,gBAAgB,UAAWtB,GAAK,EAC5CzG,EAAAA,IAAC+H,EAAA,CAAM,KAAK,iBAAiB,UAAWzF,GAAM,EAC9CtC,EAAAA,IAAC+H,EAAA,CAAM,KAAK,uBAAuB,UAAW/B,GAAY,EAC1DhG,EAAAA,IAAC+H,EAAA,CAAM,MAAK,GAAC,KAAM,CAAC,WAAY,gBAAgB,EAC9C,SAAA/H,EAAAA,IAAC4D,GAAA,CAAS,YAAAM,CAAA,CAAyB,CAAA,CACrC,CAAA,EACF,SAEC8D,EAAA,CACC,SAAA,CAAAhI,MAAC,QAAA,CAAO6E,SAAAA,EAAKe,cAActB,EAAShE,KAAK,EAAE,EAC3CN,EAAAA,IAAC,OAAA,CAAK,KAAK,SAAS,QAAQ,KAAA,CAAK,CAAA,CAAA,CACnC,CAAA,EACF,CAEJ"}