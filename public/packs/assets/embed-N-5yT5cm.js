import{j as r,c as h}from"../client-wT6vtYO_.js";import{r as n}from"../index-BdTwX--g.js";import{U as l,W as S,_ as y,$ as x,a,u as j,a2 as w,a3 as E}from"../useSelectableClick-DeaJbL2_.js";import{D as b}from"../detailed_status-BXIq3on5.js";import{i as d}from"../initial_state-BP3UcUr4.js";import{I}from"../intl_provider-DvXl4eEi.js";import{m as P,a as R}from"../index-OwtqmxAM.js";import{l as v}from"../index-CAH5FfLP.js";import{r as H}from"../ready-DpOgoWSg.js";import"../short_number-WomMu2iV.js";import"../numbers-CGZQWBYL.js";import"../message-UFwkQlnu.js";import"../api-B2m7efUy.js";import"../index-lj9VQs0f.js";import"../load_locale-tOpKhmcM.js";import"../index-DizoKcfL.js";import"../content_warning-DZ8mar1O.js";import"../skeleton-D9NbTYr9.js";import"../formatted_date-jZOhBAMt.js";import"../inline_account-Dg3-UMsJ.js";import"../status-CiF0hsk4.js";import"../index.es-B0ZBMj49.js";import"../card-CttmBekj.js";import"../avatar_overlay-BeG39OK4.js";import"../toString-Cy1Ecq9L.js";import"../status_content-CaIN8-0B.js";import"../poll-CjurB963.js";import"../permissions-Djze7cmB.js";import"../visibility_icon-DbVVvHFb.js";import"../media_gallery-DTAKF-fT.js";import"../alt_text_badge-CwO3PXb3.js";import"../status_quoted-COu-QToA.js";import"../domain_blocks-CYnp0hav.js";import"../reports-DBOcsYZF.js";import"../schedule_idle_task-Co3Ydhdu.js";let m=!1,p;const N=t=>{m?t():p=t},_=()=>()=>{m||(m=!0,typeof p<"u"&&window.requestAnimationFrame(()=>{p()}))},k=P(),A=R(),D=({id:t})=>{const e=a(i=>k(i,{id:t})),o=a(i=>A(i,{id:t})),c=a(i=>i.meta.get("domain")),s=j(),u=_();n.useEffect(()=>{s(w(t,!1,!1))},[s,t]);const f=n.useCallback(()=>{s(E(t))},[s,t]);e&&u();const g=e==null?void 0:e.get("url");return r.jsxs("div",{className:"embed",children:[r.jsx(b,{status:e,domain:c,pictureInPicture:o,onToggleHidden:f,withLogo:!0}),r.jsx("a",{className:"embed__overlay",href:g,target:"_blank",rel:"noopener","aria-label":""})]})},T=({id:t})=>(n.useEffect(()=>{d&&l.dispatch(S(d))},[]),r.jsx(I,{children:r.jsx(y,{store:l,children:r.jsx(x,{children:r.jsx(D,{id:t})})})}));function B(){const t=document.getElementById("mastodon-status");if(t){const e=t.getAttribute("data-props");if(!e)return;const o=JSON.parse(e);h.createRoot(t).render(r.jsx(T,{...o}))}}function G(){H(B).catch(t=>{console.error(t)})}v().then(G).catch(t=>{console.error(t)});function L(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="setHeight")}window.addEventListener("message",t=>{if(!t.data||!L(t.data)||!window.parent)return;const e=t.data;document.body.style.overflow="hidden",N(()=>{var o;window.parent.postMessage({type:"setHeight",id:e.id,height:(o=document.getElementsByTagName("html")[0])==null?void 0:o.scrollHeight},"*")})});
//# sourceMappingURL=embed-N-5yT5cm.js.map
