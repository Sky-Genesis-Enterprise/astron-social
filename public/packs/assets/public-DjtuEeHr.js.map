{"version":3,"mappings":";oYAIA,SAASA,GAA2B,CAClC,OAAAC,EAAA,IAAO,OAAO,+BAAsB,KACtC,CAEe,SAASC,GAAyB,CAC/C,MAAI,QAAQC,KAAKC,UAAUC,SAAS,EAC3BL,EAAwB,EAAGM,KAAKC,GAAe,CACpDA,EAAYC,SAAQ,CACtB,CAAC,EAEIC,QAAQC,QAAO,CACxB,CCfA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,IAAIC,EAAuB,EAEvBC,EAAc,UAAY,CAC5B,OAAQ,IAAI,KAAI,EAAG,QAAO,EAAKD,GACnC,EAEME,EAAmB,SAAUC,EAAI,CACnC,MAAO,IAAMA,EAAK,KACtB,EAEMC,EAAwB,SAAUD,EAAI,CACxC,MAAO,IAAMA,EAAK,KACtB,EAEME,EAAuB,SAAUC,EAAeC,EAAoBC,EAAU,CAChF,GAAI,CAACF,EACH,OAAOE,EAAS,WAGlB,GAAI,OAAOF,GAAkB,WAC3B,OAAIC,GACF,QAAQ,KAAK,wGAAwG,EAEhHD,EAAcE,CAAQ,EAG/B,GAAI,OAAOF,GAAkB,SAC3B,OAAIC,EACKC,EAASD,CAAkB,EAAED,CAAa,EAE1CA,IAAkB,OAASE,EAAW,SAAS,cAAcF,CAAa,CAGzF,EAEMG,EAAe,SAAUC,EAAM,CACjC,OAAOA,EAAK,cAAc,YAAYA,CAAI,CAC9C,EAEMC,EAA2B,SAAUC,EAAMC,EAAU,CAKvD,QAJIC,EAAUF,EAAK,uBAIZE,GAAS,CACd,IAAIC,EAAQD,EAAQ,QAAQD,CAAQ,EACpC,GAAIE,EAAO,OAAOD,EAClBA,EAAUA,EAAQ,sBACxB,CACA,EAEME,EAAkB,SAAU,EAAGC,EAAQ,CACzC,EAAE,eAAc,EAChB,EAAE,gBAAe,EAEjB,IAAIT,EAAWS,EACXC,EAAQV,EAAS,aAAa,kBAAkB,EAChDW,EAASX,EAAS,aAAa,mBAAmB,EAClDY,EAAUZ,EAAS,aAAa,qCAAqC,EACrEa,EAAkBb,EAAS,aAAa,mCAAmC,GAAKA,EAAS,aAAa,qCAAqC,GAAK,SAChJF,EAAgBE,EAAS,aAAa,iCAAiC,EACvED,EAAqBC,EAAS,aAAa,sCAAsC,EACjFc,EAAQ,SAASd,EAAS,aAAa,YAAY,EAAG,EAAE,EACxDe,EAAe,IAAI,OAAO,UAAYL,EAAQ,cAAe,GAAG,EAChEM,EAAoB,IAAI,OAAO,QAAUN,EAAQ,UAAW,GAAG,EAC/DO,EAAQxB,EAAW,EACnByB,EAAaN,EAAQ,QAAQG,EAAcrB,EAAiBuB,CAAK,CAAC,EAClEE,EAAc,GACdC,EAAgB,EAcpB,IAZIF,IAAeN,IACjBG,EAAe,IAAI,OAAO,UAAYJ,EAAS,cAAe,GAAG,EACjEK,EAAoB,IAAI,OAAO,QAAUL,EAAS,UAAW,GAAG,EAChEO,EAAaN,EAAQ,QAAQG,EAAcrB,EAAiBuB,CAAK,CAAC,GAGpEC,EAAaA,EAAW,QAAQF,EAAmBpB,EAAsBqB,CAAK,CAAC,EAC/EE,EAAc,CAACD,CAAU,EAEzBJ,EAAS,MAAMA,CAAK,EAAI,EAAI,KAAK,IAAIA,EAAO,CAAC,EAC7CA,GAAS,EAEFA,GACLG,EAAQxB,EAAW,EACnByB,EAAaN,EAAQ,QAAQG,EAAcrB,EAAiBuB,CAAK,CAAC,EAClEC,EAAaA,EAAW,QAAQF,EAAmBpB,EAAsBqB,CAAK,CAAC,EAC/EE,EAAY,KAAKD,CAAU,EAE3BJ,GAAS,EAGX,IAAIO,EAAoBxB,EAAqBC,EAAeC,EAAoBC,CAAQ,GAEpF,CAACqB,GAAsBA,EAAkB,SAAW,IACtD,QAAQ,KAAK,0IAA0I,EAGzJF,EAAY,QAAQ,SAAUjB,EAAMoB,GAAG,CACrC,IAAIC,EAAcrB,EAEdsB,EAAe,IAAI,YAAY,uBAAwB,CAAE,QAAS,GAAM,WAAY,GAAM,OAAQ,CAACD,EAAaH,CAAa,CAAC,CAAE,EAGpI,GAFAC,EAAkB,cAAcG,CAAY,EAExC,CAACA,EAAa,iBAAkB,CAIlC,IAAIC,EAAc,CAChB,OAAQ,cACR,QAAS,aACT,OAAQ,YACR,MAAO,UACjB,EAEYC,EAAaD,EAAYZ,CAAe,EACxCc,EAAeN,EAAkB,mBAAmBK,EAAYH,CAAW,EAE3EG,IAAeD,EAAY,OAC7BE,EAAeN,EAAkB,uBACxBK,IAAeD,EAAY,QACpCE,EAAeN,EAAkB,kBACxBK,IAAeD,EAAY,OACpCE,EAAeN,EAAkB,iBACxBK,IAAeD,EAAY,QACpCE,EAAeN,EAAkB,oBAGnC,IAAIO,EAAc,IAAI,YAAY,sBAAuB,CAAE,QAAS,GAAM,OAAQ,CAACL,EAAaH,EAAeO,CAAY,CAAC,CAAE,EAC9HN,EAAkB,cAAcO,CAAW,CACnD,CACA,CAAK,CACL,EAEMC,EAAqB,SAAU,EAAGpB,EAAQ,CAC5C,IAAIT,EAAWS,EACXqB,EAAe9B,EAAS,aAAa,oBAAoB,GAAK,gBAC9D+B,EAAe/B,EAAS,QAAQ,IAAM8B,CAAY,EAClDE,EAAcD,EAAa,WAC3BX,EAAgB,EAEpB,EAAE,eAAc,EAChB,EAAE,gBAAe,EAEjB,IAAIa,EAAe,IAAI,YAAY,uBAAwB,CAAE,QAAS,GAAM,WAAY,GAAM,OAAQ,CAACF,EAAcX,CAAa,CAAC,CAAE,EAGrI,GAFAY,EAAY,cAAcC,CAAY,EAElC,CAACA,EAAa,iBAAkB,CAClC,IAAIC,EAAUF,EAAY,aAAa,qBAAqB,GAAK,EAEjE,WAAW,UAAY,CACrB,GAAIhC,EAAS,UAAU,SAAS,SAAS,EACvCC,EAAa8B,CAAY,MACpB,CACL,IAAII,EAAchC,EAAyBH,EAAU,oBAAoB,EACzEmC,EAAY,MAAQ,IACpBJ,EAAa,MAAM,QAAU,OAG7B,QADIK,EAASL,EAAa,iBAAiB,iBAAiB,EACnDT,EAAI,EAAGA,EAAIc,EAAO,OAAQd,IACjCc,EAAOd,CAAC,EAAE,gBAAgB,UAAU,CAEhD,CACQ,IAAIe,EAAc,IAAI,YAAY,sBAAuB,CAAE,QAAS,GAAM,OAAQ,CAACN,EAAcX,CAAa,CAAC,CAAE,EACjHY,EAAY,cAAcK,CAAW,CAC7C,EAASH,CAAO,CAChB,CACA,EAEE,SAAS,iBAAiB,QAAS,SAAU,EAAG,CAC9C,QAASzB,EAAS,EAAE,OAAQA,GAAUA,IAAW,KAAMA,EAASA,EAAO,WAAY,CACjF,GAAIA,EAAO,QAAQ,aAAa,EAAG,CACjCD,EAAgB,EAAGC,CAAM,EACzB,MACR,CACM,GAAIA,EAAO,QAAQ,gBAAgB,EAAG,CACpCoB,EAAmB,EAAGpB,CAAM,EAC5B,MACR,CACA,CACA,EAAK,EAAK,EAER,IAAI6B,EAAoB,UAAY,CAElC,QADIC,EAAU,SAAS,iBAAiB,mCAAmC,EAClEjB,EAAI,EAAGA,EAAIiB,EAAQ,OAAQjB,IAAK,CACvC,IAAItB,EAAWuC,EAAQjB,CAAC,EACpBQ,EAAe9B,EAAS,aAAa,oBAAoB,GAAK,gBAC9DwC,EAAaxC,EAAS,QAAQ,IAAM8B,CAAY,EAEpDU,EAAW,MAAM,QAAU,MACjC,CACA,EAEE,SAAS,iBAAiB,YAAaF,CAAiB,EACxD,SAAS,iBAAiB,kBAAmBA,CAAiB,EAC9D,SAAS,iBAAiB,aAAcA,CAAiB,EAEzDA,EAAiB,CACnB,CAAC,ECnLD,MAAMG,EAAWC,EAAe,CAC9BC,cAAe,CACbhD,GAAE,iBACFiD,eAAc,uCAEhBC,sBAAuB,CACrBlD,GAAE,0CACFiD,eAAc,6DAEhBE,qBAAsB,CACpBnD,GAAE,oCACFiD,eAAc,uCAElB,CAAC,EAED,SAASG,GAAS,CAChB,KAAM,CAAEN,SAAUO,GAAeC,IAE3BC,EAASC,SAASC,gBAAgBC,KAElCC,EAAiB,IAAIC,KAAKC,eAAeN,EAAQ,CACrDO,KAAM,UACNC,MAAO,OACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACT,EAEKC,EAAa,IAAIP,KAAKC,eAAeN,EAAQ,CACjDO,KAAM,UACNC,MAAO,QACPC,IAAK,UACN,EAEKI,EAAa,IAAIR,KAAKC,eAAeN,EAAQ,CACjDc,UAAW,QACZ,EAEKC,EAAgBA,CACpB,CAAEtE,KAAIiD,kBACNsB,IACG,CACH,IAAIC,EAEJ,OAAIxE,IAAIwE,EAAUnB,EAAWrD,CAAE,GAE/BwE,MAAYvB,GAEU,IAAIwB,EAAkBD,EAASjB,CAAM,EACtCmB,OAAOH,CAAM,GAGpCf,SAASmB,iBAAiB,UAAU,EAAEC,QAAS3D,GAAY,CACzDA,EAAQ4D,UAAYC,EAAQ7D,EAAQ4D,SAAS,EAC9C,EAEDrB,SACGmB,iBAAkC,gBAAgB,EAClDC,QAAS3D,GAAY,CACpB,MAAM8D,EAAW,IAAIC,KAAK/D,EAAQgE,QAAQ,EACpCC,EAAgBvB,EAAee,OAAOK,CAAQ,EAEpD9D,EAAQkE,MAAQD,EAChBjE,EAAQmE,YAAcF,EACvB,EAEH,MAAMG,EAAWC,GAAe,CAC9B,MAAMC,MAAYP,KAElB,OACEM,EAAKE,YAAcD,EAAMC,WACzBF,EAAKG,aAAeF,EAAME,YAC1BH,EAAKI,gBAAkBH,EAAMG,aAAY,EAGvCC,EAAc,IAAIlB,EACtBpB,EAAW,uBAAuB,GAAK,kBACvCE,CACF,EAEAC,SACGmB,iBAAkC,yBAAyB,EAC3DC,QAAS3D,GAAY,CACpB,MAAM8D,EAAW,IAAIC,KAAK/D,EAAQgE,QAAQ,EAE1C,IAAIW,EAEJ,GAAIP,EAAQN,CAAQ,EAAG,CACrB,MAAMc,EAAgBzB,EAAWM,OAAOK,CAAQ,EAEhDa,EAAmBD,EAAYjB,OAAO,CACpCoB,KAAMD,EACP,OAEDD,EAAmBzB,EAAWO,OAAOK,CAAQ,EAG/C,MAAMgB,EAAY9E,EAAQgE,SAASe,SAAS,GAAG,EAC/C/E,EAAQkE,MAAQY,EACZpC,EAAee,OAAOK,CAAQ,EAC9BZ,EAAWO,OAAOK,CAAQ,EAE9B9D,EAAQmE,YAAcQ,EACvB,EAEHpC,SACGmB,iBAAkC,eAAe,EACjDC,QAAS3D,GAAY,CACpB,MAAM8D,EAAW,IAAIC,KAAK/D,EAAQgE,QAAQ,EACpCgB,MAAUjB,KAEVe,EAAY9E,EAAQgE,SAASe,SAAS,GAAG,EAC/C/E,EAAQkE,MAAQY,EACZpC,EAAee,OAAOK,CAAQ,EAC9BZ,EAAWO,OAAOK,CAAQ,EAC9B9D,EAAQmE,YAAcc,EACpB,CACE5B,gBACA6B,WAAYA,CAACb,EAAYc,IACvB,IAAIxC,KAAKC,eAAeN,EAAQ6C,CAAO,EAAE1B,OAAOY,CAAI,GAExDP,EACAkB,EAAII,UACJJ,EAAIP,cACJK,CACF,EACD,EAEH,MAAMO,EAAkB9C,SAASmB,iBAAiB,kBAAkB,EAEhE2B,EAAgBC,OAAS,GAC3BpH,EAAA,wBAAAqH,CAAA,eAAO,gCAAwC,mHAC5ChH,KAAK,CAAC,CAAEiH,QAASD,KAAqB,CACrCF,EAAgB1B,QAAS8B,GAAc,CACrCC,MAAMC,KAAKF,EAAUG,QAAQ,EAAEjC,QAASkC,GAAU,CAChDJ,EAAUK,YAAYD,CAAK,EAC5B,EACF,EAED,MAAM7F,EAAUuC,SAASwD,cAAc,KAAK,EAG5CC,OADaC,aAAWjG,CAAO,EAC1BkG,OACHC,MAACZ,EAAA,CAAe,OAAAjD,EAAgB,WAAY+C,GAC9C,EACA9C,SAAS6D,KAAKC,YAAYrG,CAAO,EAE1B,GACR,EACAsG,MAAOC,GAAmB,CACzBC,QAAQD,MAAMA,CAAK,EACpB,EAGLE,EAAMC,SACJnE,SACA,yCACA,QACAoE,EACE,CAAC,CAAE9G,YAAa,CACRA,aAAkB+G,mBAEpB/G,EAAOgH,OAAShH,EAAOgH,MAAMvB,OAAS,EACxCwB,EACGC,IAAI,0BAA2B,CAAEC,OAAQ,CAAEC,KAAMpH,EAAOgH,MAAM,CAAG,EACjEtI,KAAK,KACJsB,EAAOqH,kBAAkB7D,EAAcxB,EAASE,aAAa,CAAC,EACvD,GACR,EACAuE,MAAM,IAAM,CACXzG,EAAOqH,kBAAkB,EAAE,EAC5B,EAEHrH,EAAOqH,kBAAkB,EAAE,EAC7B,EAEF,IACA,CAAEC,QAAS,GAAOC,SAAU,GAC9B,CACF,EAEAX,EAAMC,SACJnE,SACA,6CACA,QACA,IAAM,CACJ,MAAM8E,EAAW9E,SAAS+E,cACxB,qBACF,EACMC,EAAehF,SAAS+E,cAC5B,kCACF,EACI,CAACC,GAAgB,CAACF,IAGpBE,EAAaV,OACbU,EAAaV,MAAMvB,OAAS+B,EAASG,UAErCD,EAAaL,kBACX7D,EAAcxB,EAASI,qBAAqB,CAC9C,EACSoF,EAASR,OAASQ,EAASR,QAAUU,EAAaV,MAC3DU,EAAaL,kBACX7D,EAAcxB,EAASK,oBAAoB,CAC7C,EAEAqF,EAAaL,kBAAkB,EAAE,EACnC,CAEJ,CACF,CAEAT,EAAMC,SACJnE,SACA,iCACA,SACA,CAAC,CAAE1C,QAAO,IAAM,CACd,GAAI,EAAEA,aAAkB+G,kBAAmB,OAE3C,MAAMa,EAASlF,SAAS+E,cACtB,OAAOzH,EAAOd,EAAE,UAClB,EAEA,GAAI,CAAC0I,EAAQ,OAEb,IAAIC,EACA7H,EAAO8H,QAAOD,EAAO7H,EAAO8H,MAAM,CAAC,GAEvC,MAAMC,EAAMF,EAAOG,IAAIC,gBAAgBJ,CAAI,EAAID,EAAOM,QAAQC,YAE1DJ,MAAYK,IAAML,EACxB,CACF,EAEAnB,EAAMC,SAASnE,SAAU,oBAAqB,QAAS,CAAC,CAAE1C,QAAO,IAAM,CAC/DA,aAAkB+G,mBAExB/G,EAAOqI,QACPrI,EAAOsI,SACPtI,EAAOuI,kBAAkB,EAAGvI,EAAOgH,MAAMvB,MAAM,EACjD,CAAC,EAEDmB,EAAMC,SAASnE,SAAU,qBAAsB,QAAS,CAAC,CAAE1C,QAAO,IAAM,OACtE,GAAI,EAAEA,aAAkBwI,mBAAoB,OAE5C,MAAMC,GAAQzI,IAAO0I,aAAP1I,cAAmByH,cAC/B,8BAGGgB,GAELjK,UAAUmK,UACPC,UAAUH,EAAMzB,KAAK,EACrBtI,KAAK,IAAM,CACV,MAAMmK,EAAS7I,EAAO8I,cAEtB,OAAID,IACFA,EAAOE,UAAUC,IAAI,QAAQ,EAE7BC,WAAW,IAAM,CACfJ,EAAOE,UAAUG,OAAO,QAAQ,GAC/B,GAAG,GAGD,GACR,EACAzC,MAAOC,GAAmB,CACzBC,QAAQD,MAAMA,CAAK,EACpB,CACL,CAAC,EAED,MAAMyC,EAAgBA,IAAM,CAC1B,MAAMC,EAAU1G,SAAS+E,cAAgC,aAAa,EAChE4B,EAAe3G,SAAS+E,cAC5B,yBACF,EAEI,CAAC2B,GAAW,CAACC,IAEbD,EAAQL,UAAUO,SAAS,SAAS,GACtC5G,SAAS6D,KAAKgD,MAAMC,SAAW,GAC/BH,EAAaI,aAAa,gBAAiB,OAAO,IAElD/G,SAAS6D,KAAKgD,MAAMC,SAAW,SAC/BH,EAAaI,aAAa,gBAAiB,MAAM,GAGnDJ,EAAaN,UAAUW,OAAO,QAAQ,EACtCN,EAAQL,UAAUW,OAAO,SAAS,EACpC,EAEA9C,EAAMC,SAASnE,SAAU,yBAA0B,QAAS,IAAM,CAChEyG,GACF,CAAC,EAEDvC,EAAMC,SAASnE,SAAU,yBAA0B,UAAYiH,GAAM,EAC/DA,EAAEC,MAAQ,KAAOD,EAAEC,MAAQ,WAC7BD,EAAEE,iBACFV,IAEJ,CAAC,EAEDvC,EAAMC,SAASnE,SAAU,mBAAoB,YAAa,CAAC,CAAE1C,QAAO,IAAM,CACpEA,aAAkB8J,kBAAoB9J,EAAOkI,QAAQ6B,WACvD/J,EAAOoI,IAAMpI,EAAOkI,QAAQ6B,SAChC,CAAC,EACDnD,EAAMC,SAASnE,SAAU,mBAAoB,WAAY,CAAC,CAAE1C,QAAO,IAAM,CACnEA,aAAkB8J,kBAAoB9J,EAAOkI,QAAQ8B,SACvDhK,EAAOoI,IAAMpI,EAAOkI,QAAQ8B,OAChC,CAAC,EAED,MAAMC,EAAmBA,CACvBxB,EACAyB,IACG,CACHzB,EAAMyB,SAAWA,EAEjB,MAAMC,EAAU1B,EAAM2B,QAAQ,aAAa,EAC3C,GAAID,EAAS,CACXA,EAAQpB,UAAUW,OAAO,WAAYjB,EAAMyB,QAAQ,EAEnD,MAAMG,EACJ5B,EAAM6B,OAAS,YACfH,EAAQ1C,cAAgC,+BAA+B,EACrE4C,IACFA,EAAOH,SAAWzB,EAAMyB,SAC1B,CAEJ,EAEAtD,EAAMC,SACJnE,SACA,2CACA,SACA,CAAC,CAAE1C,QAAO,IAAM,CACV,EAAEA,aAAkB+G,mBAAqB,CAAC/G,EAAOuK,MAErDvK,EAAOuK,KACJ1G,iBAEC,4EAA4E,EAC7EC,QAAS2E,GAAU,CAClBwB,EAAiBxB,EAAO,CAACzI,EAAOwK,OAAO,EACxC,CACL,CACF,EAIA5D,EAAMC,SAASnE,SAAU,mCAAoC,SAAU,IAAM,CAC3E,CACE,eACA,wBACA,4BACA,oCAAoC,EACpCoB,QAAS5E,GAAO,CAChB,MAAMuL,EAAQ/H,SAAS+E,cAAgC,SAASvI,CAAE,EAAE,EAChEuL,IACFA,EAAMzD,MAAQ,GAChB,CACD,CACH,CAAC,EAEDJ,EAAMC,SAASnE,SAAU,qBAAsB,QAAS,CAAC,CAAE1C,QAAO,IAAM,CACtE,GAAI,EAAEA,aAAkB0K,aACtB,OAGF,MAAMC,EAAS3K,EAAOoK,QAAQ,QAAQ,EAEjCO,IAIDA,EAAOC,eAAiB,OAC1BD,EAAOC,aAAe,QAEtBD,EAAOC,aAAe,OAE1B,CAAC,EAED,SAASC,IAAO,CACdC,EAAMxI,CAAM,EAAEmE,MAAOC,GAAmB,CACtCC,QAAQD,MAAMA,CAAK,EACpB,CACH,CAEAqE,IACGrM,KAAKsM,CAAU,EACftM,KAAKmM,EAAI,EACTnM,KAAKJ,CAAsB,EAC3BmI,MAAOC,GAAmB,CACzBC,QAAQD,MAAMA,CAAK,CACrB,CAAC","names":["importArrowKeyNavigation","__vitePreload","loadKeyboardExtensions","test","navigator","userAgent","then","arrowKeyNav","register","Promise","resolve","cocoonElementCounter","createNewID","newcontentBraced","id","newcontentUnderscored","getInsertionNodeElem","insertionNode","insertionTraversal","thisNode","cocoonDetach","node","cocoonGetPreviousSibling","elem","selector","sibling","match","cocoonAddFields","target","assoc","assocs","content","insertionMethod","count","regexpBraced","regexpUnderscored","newId","newContent","newContents","originalEvent","insertionNodeElem","i","contentNode","beforeInsert","htmlMapping","htmlMethod","addedContent","afterInsert","cocoonRemoveFields","wrapperClass","nodeToDelete","triggerNode","beforeRemove","timeout","hiddenInput","inputs","afterRemove","hideRemovedFields","targets","nodeToHide","messages","defineMessages","usernameTaken","defaultMessage","passwordExceedsLength","passwordDoesNotMatch","loaded","localeData","getLocale","locale","document","documentElement","lang","dateTimeFormat","Intl","DateTimeFormat","year","month","day","hour","minute","dateFormat","timeFormat","timeStyle","formatMessage","values","message","IntlMessageFormat","format","querySelectorAll","forEach","innerHTML","emojify","datetime","Date","dateTime","formattedDate","title","textContent","isToday","date","today","getDate","getMonth","getFullYear","todayFormat","formattedContent","formattedTime","time","timeGiven","includes","now","timeAgoString","formatDate","options","getTime","reactComponents","length","MediaContainer","default","component","Array","from","children","child","removeChild","createElement","root","createRoot","render","jsx","body","appendChild","catch","error","console","Rails","delegate","throttle","HTMLInputElement","value","axios","get","params","acct","setCustomValidity","leading","trailing","password","querySelector","confirmation","maxLength","avatar","file","files","url","URL","createObjectURL","dataset","originalSrc","src","focus","select","setSelectionRange","HTMLButtonElement","input","parentNode","clipboard","writeText","parent","parentElement","classList","add","setTimeout","remove","toggleSidebar","sidebar","toggleButton","contains","style","overflow","setAttribute","toggle","e","key","preventDefault","HTMLImageElement","original","static","setInputDisabled","disabled","wrapper","closest","hidden","type","form","checked","field","HTMLElement","button","ariaExpanded","main","ready","loadPolyfills","loadLocale"],"ignoreList":[1],"sources":["../../../app/javascript/mastodon/load_keyboard_extensions.js","../../../node_modules/cocoon-js-vanilla/index.js","../../../app/javascript/entrypoints/public.tsx"],"sourcesContent":["// On KaiOS, we may not be able to use a mouse cursor or navigate using Tab-based focus, so we install\n// special left/right focus navigation keyboard listeners, at least on public pages (i.e. so folks\n// can at least log in using KaiOS devices).\n\nfunction importArrowKeyNavigation() {\n  return import('arrow-key-navigation');\n}\n\nexport default function loadKeyboardExtensions() {\n  if (/KAIOS/.test(navigator.userAgent)) {\n    return importArrowKeyNavigation().then(arrowKeyNav => {\n      arrowKeyNav.register();\n    });\n  }\n  return Promise.resolve();\n}\n","document.addEventListener('DOMContentLoaded', function () {\n  var cocoonElementCounter = 0;\n\n  var createNewID = function () {\n    return (new Date().getTime() + cocoonElementCounter++);\n  };\n\n  var newcontentBraced = function (id) {\n    return '[' + id + ']$1';\n  };\n\n  var newcontentUnderscored = function (id) {\n    return '_' + id + '_$1';\n  };\n\n  var getInsertionNodeElem = function (insertionNode, insertionTraversal, thisNode) {\n    if (!insertionNode) {\n      return thisNode.parentNode;\n    }\n\n    if (typeof insertionNode === 'function') {\n      if (insertionTraversal) {\n        console.warn('association-insertion-traversal is ignored, because association-insertion-node is given as a function.');\n      }\n      return insertionNode(thisNode);\n    }\n\n    if (typeof insertionNode === 'string') {\n      if (insertionTraversal) {\n        return thisNode[insertionTraversal](insertionNode);\n      } else {\n        return insertionNode === 'this' ? thisNode : document.querySelector(insertionNode);\n      }\n    }\n  };\n\n  var cocoonDetach = function (node) {\n    return node.parentElement.removeChild(node);\n  };\n\n  var cocoonGetPreviousSibling = function (elem, selector) {\n    var sibling = elem.previousElementSibling;\n\n    if (!selector) return sibling;\n\n    while (sibling) {\n      var match = sibling.matches(selector);\n      if (match) return sibling;\n      sibling = sibling.previousElementSibling;\n    }\n  };\n\n  var cocoonAddFields = function (e, target) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    var thisNode = target;\n    var assoc = thisNode.getAttribute('data-association');\n    var assocs = thisNode.getAttribute('data-associations');\n    var content = thisNode.getAttribute('data-association-insertion-template');\n    var insertionMethod = thisNode.getAttribute('data-association-insertion-method') || thisNode.getAttribute('data-association-insertion-position') || 'before';\n    var insertionNode = thisNode.getAttribute('data-association-insertion-node');\n    var insertionTraversal = thisNode.getAttribute('data-association-insertion-traversal');\n    var count = parseInt(thisNode.getAttribute('data-count'), 10);\n    var regexpBraced = new RegExp('\\\\[new_' + assoc + '\\\\](.*?\\\\s)', 'g');\n    var regexpUnderscored = new RegExp('_new_' + assoc + '_(\\\\w*)', 'g');\n    var newId = createNewID();\n    var newContent = content.replace(regexpBraced, newcontentBraced(newId));\n    var newContents = [];\n    var originalEvent = e;\n\n    if (newContent === content) {\n      regexpBraced = new RegExp('\\\\[new_' + assocs + '\\\\](.*?\\\\s)', 'g');\n      regexpUnderscored = new RegExp('_new_' + assocs + '_(\\\\w*)', 'g');\n      newContent = content.replace(regexpBraced, newcontentBraced(newId));\n    }\n\n    newContent = newContent.replace(regexpUnderscored, newcontentUnderscored(newId));\n    newContents = [newContent];\n\n    count = (isNaN(count) ? 1 : Math.max(count, 1));\n    count -= 1;\n\n    while (count) {\n      newId = createNewID();\n      newContent = content.replace(regexpBraced, newcontentBraced(newId));\n      newContent = newContent.replace(regexpUnderscored, newcontentUnderscored(newId));\n      newContents.push(newContent);\n\n      count -= 1;\n    }\n\n    var insertionNodeElem = getInsertionNodeElem(insertionNode, insertionTraversal, thisNode);\n\n    if (!insertionNodeElem || (insertionNodeElem.length === 0)) {\n      console.warn(\"Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct.\");\n    }\n\n    newContents.forEach(function (node, i) {\n      var contentNode = node;\n\n      var beforeInsert = new CustomEvent('cocoon:before-insert', { bubbles: true, cancelable: true, detail: [contentNode, originalEvent] });\n      insertionNodeElem.dispatchEvent(beforeInsert);\n\n      if (!beforeInsert.defaultPrevented) {\n        // allow any of the jquery dom manipulation methods (after, before, append, prepend, etc)\n        // to be called on the node.  allows the insertion node to be the parent of the inserted\n        // code and doesn't force it to be a sibling like after/before does. default: 'before'\n        var htmlMapping = {\n          before: 'beforebegin',\n          prepend: 'afterbegin',\n          append: 'beforeend',\n          after: 'afterend'\n        };\n\n        var htmlMethod = htmlMapping[insertionMethod];\n        var addedContent = insertionNodeElem.insertAdjacentHTML(htmlMethod, contentNode);\n\n        if (htmlMethod === htmlMapping.before) {\n          addedContent = insertionNodeElem.previousElementSibling;\n        } else if (htmlMethod === htmlMapping.prepend) {\n          addedContent = insertionNodeElem.firstElementChild;\n        } else if (htmlMethod === htmlMapping.append) {\n          addedContent = insertionNodeElem.lastElementChild;\n        } else if (htmlMethod === htmlMapping.after) {\n          addedContent = insertionNodeElem.nextElementSibling;\n        }\n\n        var afterInsert = new CustomEvent('cocoon:after-insert', { bubbles: true, detail: [contentNode, originalEvent, addedContent] });\n        insertionNodeElem.dispatchEvent(afterInsert);\n      }\n    });\n  };\n\n  var cocoonRemoveFields = function (e, target) {\n    var thisNode = target;\n    var wrapperClass = thisNode.getAttribute('data-wrapper-class') || 'nested-fields';\n    var nodeToDelete = thisNode.closest('.' + wrapperClass);\n    var triggerNode = nodeToDelete.parentNode;\n    var originalEvent = e;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    var beforeRemove = new CustomEvent('cocoon:before-remove', { bubbles: true, cancelable: true, detail: [nodeToDelete, originalEvent] });\n    triggerNode.dispatchEvent(beforeRemove);\n\n    if (!beforeRemove.defaultPrevented) {\n      var timeout = triggerNode.getAttribute('data-remove-timeout') || 0;\n\n      setTimeout(function () {\n        if (thisNode.classList.contains('dynamic')) {\n          cocoonDetach(nodeToDelete);\n        } else {\n          var hiddenInput = cocoonGetPreviousSibling(thisNode, 'input[type=hidden]');\n          hiddenInput.value = '1';\n          nodeToDelete.style.display = 'none';\n\n          var inputs = nodeToDelete.querySelectorAll(\"input[required]\");\n          for (var i = 0; i < inputs.length; i++) {\n            inputs[i].removeAttribute(\"required\");\n          }\n        }\n        var afterRemove = new CustomEvent('cocoon:after-remove', { bubbles: true, detail: [nodeToDelete, originalEvent] });\n        triggerNode.dispatchEvent(afterRemove);\n      }, timeout);\n    }\n  };\n\n  document.addEventListener('click', function (e) {\n    for (var target = e.target; target && target !== this; target = target.parentNode) {\n      if (target.matches('.add_fields')) {\n        cocoonAddFields(e, target);\n        return;\n      }\n      if (target.matches('.remove_fields')) {\n        cocoonRemoveFields(e, target);\n        return;\n      }\n    }\n  }, false);\n\n  var hideRemovedFields = function () {    \n    var targets = document.querySelectorAll('.remove_fields.existing.destroyed');\n    for (var i = 0; i < targets.length; i++) {\n      var thisNode = targets[i];\n      var wrapperClass = thisNode.getAttribute('data-wrapper-class') || 'nested-fields';\n      var nodeToHide = thisNode.closest('.' + wrapperClass);\n      \n      nodeToHide.style.display = 'none';\n    }\n  }\n\n  document.addEventListener('page:load', hideRemovedFields);\n  document.addEventListener('turbolinks:load', hideRemovedFields); // Has been replaced by Turbo\n  document.addEventListener('turbo:load', hideRemovedFields);\n\n  hideRemovedFields();\n});\n","import { createRoot } from 'react-dom/client';\n\nimport { IntlMessageFormat } from 'intl-messageformat';\nimport type { MessageDescriptor, PrimitiveType } from 'react-intl';\nimport { defineMessages } from 'react-intl';\n\nimport Rails from '@rails/ujs';\nimport axios from 'axios';\nimport { throttle } from 'lodash';\n\nimport { timeAgoString } from '../mastodon/components/relative_timestamp';\nimport emojify from '../mastodon/features/emoji/emoji';\nimport loadKeyboardExtensions from '../mastodon/load_keyboard_extensions';\nimport { loadLocale, getLocale } from '../mastodon/locales';\nimport { loadPolyfills } from '../mastodon/polyfills';\nimport ready from '../mastodon/ready';\n\nimport 'cocoon-js-vanilla';\n\nconst messages = defineMessages({\n  usernameTaken: {\n    id: 'username.taken',\n    defaultMessage: 'That username is taken. Try another',\n  },\n  passwordExceedsLength: {\n    id: 'password_confirmation.exceeds_maxlength',\n    defaultMessage: 'Password confirmation exceeds the maximum password length',\n  },\n  passwordDoesNotMatch: {\n    id: 'password_confirmation.mismatching',\n    defaultMessage: 'Password confirmation does not match',\n  },\n});\n\nfunction loaded() {\n  const { messages: localeData } = getLocale();\n\n  const locale = document.documentElement.lang;\n\n  const dateTimeFormat = new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n\n  const dateFormat = new Intl.DateTimeFormat(locale, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n\n  const timeFormat = new Intl.DateTimeFormat(locale, {\n    timeStyle: 'short',\n  });\n\n  const formatMessage = (\n    { id, defaultMessage }: MessageDescriptor,\n    values?: Record<string, PrimitiveType>,\n  ) => {\n    let message: string | undefined = undefined;\n\n    if (id) message = localeData[id];\n\n    message ??= defaultMessage as string;\n\n    const messageFormat = new IntlMessageFormat(message, locale);\n    return messageFormat.format(values) as string;\n  };\n\n  document.querySelectorAll('.emojify').forEach((content) => {\n    content.innerHTML = emojify(content.innerHTML);\n  });\n\n  document\n    .querySelectorAll<HTMLTimeElement>('time.formatted')\n    .forEach((content) => {\n      const datetime = new Date(content.dateTime);\n      const formattedDate = dateTimeFormat.format(datetime);\n\n      content.title = formattedDate;\n      content.textContent = formattedDate;\n    });\n\n  const isToday = (date: Date) => {\n    const today = new Date();\n\n    return (\n      date.getDate() === today.getDate() &&\n      date.getMonth() === today.getMonth() &&\n      date.getFullYear() === today.getFullYear()\n    );\n  };\n  const todayFormat = new IntlMessageFormat(\n    localeData['relative_format.today'] ?? 'Today at {time}',\n    locale,\n  );\n\n  document\n    .querySelectorAll<HTMLTimeElement>('time.relative-formatted')\n    .forEach((content) => {\n      const datetime = new Date(content.dateTime);\n\n      let formattedContent: string;\n\n      if (isToday(datetime)) {\n        const formattedTime = timeFormat.format(datetime);\n\n        formattedContent = todayFormat.format({\n          time: formattedTime,\n        }) as string;\n      } else {\n        formattedContent = dateFormat.format(datetime);\n      }\n\n      const timeGiven = content.dateTime.includes('T');\n      content.title = timeGiven\n        ? dateTimeFormat.format(datetime)\n        : dateFormat.format(datetime);\n\n      content.textContent = formattedContent;\n    });\n\n  document\n    .querySelectorAll<HTMLTimeElement>('time.time-ago')\n    .forEach((content) => {\n      const datetime = new Date(content.dateTime);\n      const now = new Date();\n\n      const timeGiven = content.dateTime.includes('T');\n      content.title = timeGiven\n        ? dateTimeFormat.format(datetime)\n        : dateFormat.format(datetime);\n      content.textContent = timeAgoString(\n        {\n          formatMessage,\n          formatDate: (date: Date, options) =>\n            new Intl.DateTimeFormat(locale, options).format(date),\n        },\n        datetime,\n        now.getTime(),\n        now.getFullYear(),\n        timeGiven,\n      );\n    });\n\n  const reactComponents = document.querySelectorAll('[data-component]');\n\n  if (reactComponents.length > 0) {\n    import('../mastodon/containers/media_container')\n      .then(({ default: MediaContainer }) => {\n        reactComponents.forEach((component) => {\n          Array.from(component.children).forEach((child) => {\n            component.removeChild(child);\n          });\n        });\n\n        const content = document.createElement('div');\n\n        const root = createRoot(content);\n        root.render(\n          <MediaContainer locale={locale} components={reactComponents} />,\n        );\n        document.body.appendChild(content);\n\n        return true;\n      })\n      .catch((error: unknown) => {\n        console.error(error);\n      });\n  }\n\n  Rails.delegate(\n    document,\n    'input#user_account_attributes_username',\n    'input',\n    throttle(\n      ({ target }) => {\n        if (!(target instanceof HTMLInputElement)) return;\n\n        if (target.value && target.value.length > 0) {\n          axios\n            .get('/api/v1/accounts/lookup', { params: { acct: target.value } })\n            .then(() => {\n              target.setCustomValidity(formatMessage(messages.usernameTaken));\n              return true;\n            })\n            .catch(() => {\n              target.setCustomValidity('');\n            });\n        } else {\n          target.setCustomValidity('');\n        }\n      },\n      500,\n      { leading: false, trailing: true },\n    ),\n  );\n\n  Rails.delegate(\n    document,\n    '#user_password,#user_password_confirmation',\n    'input',\n    () => {\n      const password = document.querySelector<HTMLInputElement>(\n        'input#user_password',\n      );\n      const confirmation = document.querySelector<HTMLInputElement>(\n        'input#user_password_confirmation',\n      );\n      if (!confirmation || !password) return;\n\n      if (\n        confirmation.value &&\n        confirmation.value.length > password.maxLength\n      ) {\n        confirmation.setCustomValidity(\n          formatMessage(messages.passwordExceedsLength),\n        );\n      } else if (password.value && password.value !== confirmation.value) {\n        confirmation.setCustomValidity(\n          formatMessage(messages.passwordDoesNotMatch),\n        );\n      } else {\n        confirmation.setCustomValidity('');\n      }\n    },\n  );\n}\n\nRails.delegate(\n  document,\n  '#edit_profile input[type=file]',\n  'change',\n  ({ target }) => {\n    if (!(target instanceof HTMLInputElement)) return;\n\n    const avatar = document.querySelector<HTMLImageElement>(\n      `img#${target.id}-preview`,\n    );\n\n    if (!avatar) return;\n\n    let file: File | undefined;\n    if (target.files) file = target.files[0];\n\n    const url = file ? URL.createObjectURL(file) : avatar.dataset.originalSrc;\n\n    if (url) avatar.src = url;\n  },\n);\n\nRails.delegate(document, '.input-copy input', 'click', ({ target }) => {\n  if (!(target instanceof HTMLInputElement)) return;\n\n  target.focus();\n  target.select();\n  target.setSelectionRange(0, target.value.length);\n});\n\nRails.delegate(document, '.input-copy button', 'click', ({ target }) => {\n  if (!(target instanceof HTMLButtonElement)) return;\n\n  const input = target.parentNode?.querySelector<HTMLInputElement>(\n    '.input-copy__wrapper input',\n  );\n\n  if (!input) return;\n\n  navigator.clipboard\n    .writeText(input.value)\n    .then(() => {\n      const parent = target.parentElement;\n\n      if (parent) {\n        parent.classList.add('copied');\n\n        setTimeout(() => {\n          parent.classList.remove('copied');\n        }, 700);\n      }\n\n      return true;\n    })\n    .catch((error: unknown) => {\n      console.error(error);\n    });\n});\n\nconst toggleSidebar = () => {\n  const sidebar = document.querySelector<HTMLUListElement>('.sidebar ul');\n  const toggleButton = document.querySelector<HTMLAnchorElement>(\n    'a.sidebar__toggle__icon',\n  );\n\n  if (!sidebar || !toggleButton) return;\n\n  if (sidebar.classList.contains('visible')) {\n    document.body.style.overflow = '';\n    toggleButton.setAttribute('aria-expanded', 'false');\n  } else {\n    document.body.style.overflow = 'hidden';\n    toggleButton.setAttribute('aria-expanded', 'true');\n  }\n\n  toggleButton.classList.toggle('active');\n  sidebar.classList.toggle('visible');\n};\n\nRails.delegate(document, '.sidebar__toggle__icon', 'click', () => {\n  toggleSidebar();\n});\n\nRails.delegate(document, '.sidebar__toggle__icon', 'keydown', (e) => {\n  if (e.key === ' ' || e.key === 'Enter') {\n    e.preventDefault();\n    toggleSidebar();\n  }\n});\n\nRails.delegate(document, 'img.custom-emoji', 'mouseover', ({ target }) => {\n  if (target instanceof HTMLImageElement && target.dataset.original)\n    target.src = target.dataset.original;\n});\nRails.delegate(document, 'img.custom-emoji', 'mouseout', ({ target }) => {\n  if (target instanceof HTMLImageElement && target.dataset.static)\n    target.src = target.dataset.static;\n});\n\nconst setInputDisabled = (\n  input: HTMLInputElement | HTMLSelectElement,\n  disabled: boolean,\n) => {\n  input.disabled = disabled;\n\n  const wrapper = input.closest('.with_label');\n  if (wrapper) {\n    wrapper.classList.toggle('disabled', input.disabled);\n\n    const hidden =\n      input.type === 'checkbox' &&\n      wrapper.querySelector<HTMLInputElement>('input[type=hidden][value=\"0\"]');\n    if (hidden) {\n      hidden.disabled = input.disabled;\n    }\n  }\n};\n\nRails.delegate(\n  document,\n  '#account_statuses_cleanup_policy_enabled',\n  'change',\n  ({ target }) => {\n    if (!(target instanceof HTMLInputElement) || !target.form) return;\n\n    target.form\n      .querySelectorAll<\n        HTMLInputElement | HTMLSelectElement\n      >('input:not([type=hidden], #account_statuses_cleanup_policy_enabled), select')\n      .forEach((input) => {\n        setInputDisabled(input, !target.checked);\n      });\n  },\n);\n\n// Empty the honeypot fields in JS in case something like an extension\n// automatically filled them.\nRails.delegate(document, '#registration_new_user,#new_user', 'submit', () => {\n  [\n    'user_website',\n    'user_confirm_password',\n    'registration_user_website',\n    'registration_user_confirm_password',\n  ].forEach((id) => {\n    const field = document.querySelector<HTMLInputElement>(`input#${id}`);\n    if (field) {\n      field.value = '';\n    }\n  });\n});\n\nRails.delegate(document, '.rules-list button', 'click', ({ target }) => {\n  if (!(target instanceof HTMLElement)) {\n    return;\n  }\n\n  const button = target.closest('button');\n\n  if (!button) {\n    return;\n  }\n\n  if (button.ariaExpanded === 'true') {\n    button.ariaExpanded = 'false';\n  } else {\n    button.ariaExpanded = 'true';\n  }\n});\n\nfunction main() {\n  ready(loaded).catch((error: unknown) => {\n    console.error(error);\n  });\n}\n\nloadPolyfills()\n  .then(loadLocale)\n  .then(main)\n  .then(loadKeyboardExtensions)\n  .catch((error: unknown) => {\n    console.error(error);\n  });\n"],"file":"assets/public-DjtuEeHr.js"}