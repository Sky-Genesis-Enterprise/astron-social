const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["push_notifications-index-EEFAVoaE.js","useSelectableClick-DeaJbL2_.js","index-BdTwX--g.js","client-wT6vtYO_.js","short_number-WomMu2iV.js","numbers-CGZQWBYL.js","message-UFwkQlnu.js","api-B2m7efUy.js","index-lj9VQs0f.js","initial_state-BP3UcUr4.js","ready-DpOgoWSg.js","index-CAH5FfLP.js","load_locale-tOpKhmcM.js","index-DizoKcfL.js"])))=>i.map(i=>d[i]);
var Zt=Object.defineProperty;var Qt=(t,d,n)=>d in t?Zt(t,d,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[d]=n;var C=(t,d,n)=>Qt(t,typeof d!="symbol"?d+"":d,n);import{i as vt,a as Pe,l as Kt}from"../load_locale-tOpKhmcM.js";import{j as e,c as Jt,_ as Be}from"../client-wT6vtYO_.js";import{g as Xt,r as j,u as q,d as D,i as _t}from"../index-BdTwX--g.js";import{I as B,S as Yt,u as $,a as A,f as en,A as Te,O as xt,b as bt,r as tn,c as nn,V as rn,d as de,t as on,o as me,e as Fe,g as ke,h as sn,i as Ee,j as $e,k as an,m as cn,l as ln,n as un,p as Y,q as dn,s as mn,v as hn,w as pn,x as fn,y as gn,z as vn,B as _n,C as xn,D as bn,E as yn,F as wn,G as jn,H as Cn,J as Sn,K as Mn,L as Tn,M as kn,N as En,P as Nn,Q as Ln,R as An,T as On,U,W as Rn,X as In,Y as Pn,Z as Fn,_ as $n,$ as qn,a0 as Dn,a1 as Hn}from"../useSelectableClick-DeaJbL2_.js";import{H as yt}from"../Helmet-ZVWnGmbg.js";import{S as Bn}from"../react-router-scroll-4.es-CU7ja20b.js";import{c as Gn}from"../streaming-BaFGIdWo.js";import{v as Un,s as zn,d as J,a as le,r as wt,b as Ge,m as Ue,t as jt,c as Wn,e as H,f as Vn,g as Zn,o as pe,i as X,h as Qn,j as ze,k as Kn}from"../initial_state-BP3UcUr4.js";import{M as k}from"../message-UFwkQlnu.js";import{c as z}from"../index-DizoKcfL.js";import{i as Jn}from"../index.es-B0ZBMj49.js";import{I as Xn}from"../onboarding-w4rAx4s2.js";import{B as Ct,A as Yn,L as er,M as tr}from"../modal_container-BVBmHnZD.js";import{L as W,S as Ne,u as he,a as nr,N as rr,P as fe,b as or,R as qe,w as sr,c as P}from"../short_number-WomMu2iV.js";import{u as St,a as ar,S as Mt}from"../notifications-CKA6ESoP.js";import{A as ir}from"../avatar_group-PUipFlog.js";import{F as cr,a as lr}from"../counters-BJ0cOeaq.js";import{g as ur,D as Tt,a as dr,b as mr,S as hr,c as pr,d as fr,e as kt,L as Le,B as Et,F as Nt,f as Lt,H as Ae,C as gr,P as We,N as At,h as Ot,i as Rt,G as vr,K as _r,A as xr,j as br,T as yr,k as ge,l as wr,m as Ve,n as jr,o as Cr,p as Sr,q as Mr,O as Tr,r as kr,E as Er,s as Nr,t as ve,u as Lr,v as Ar,w as Or,x as Rr,y as Ze,R as Qe,z as Ke,I as Ir,J as Pr,M as Fr,Q as $r,U as qr,V as Dr}from"../content_warning-DZ8mar1O.js";import{F as Hr}from"../follow_button-BdqDKUmA.js";import{L as It}from"../loading_indicator-7xMB1U6D.js";import{u as _e}from"../useTimeout-F7jeHEBA.js";import{F as Br}from"../media_modal-WOAjqFh6.js";import{S as Gr}from"../close-BsPe8EbX.js";import{B as ue}from"../bundle_column_error-Cn2E6aKL.js";import{S as Oe}from"../add-D8GR9P00.js";import{S as Pt}from"../home-fill-BjwEpYg3.js";import{S as Ur}from"../menu-BK7v8qg4.js";import{S as Ft}from"../notifications-fill-BPpVqP74.js";import{S as zr}from"../hashtags-DlzQcrtL.js";import{I as V}from"../icon_with_badge-zn31jvrZ.js";import{s as $t}from"../notifications-0yz-Se0w.js";import{s as Wr}from"../scroll-BygYx8ga.js";import{C as Vr,u as Zr,a as Qr}from"../column_header-FN7GyEAs.js";import{C as Kr}from"../column-B4vwzadM.js";import{A as qt}from"../account-0xT8MC3X.js";import{S as Jr}from"../server_hero_image-CXn_HQh5.js";import{S as Z}from"../skeleton-D9NbTYr9.js";import{S as Dt}from"../search-BPrZ-C9C.js";import{C as Xr}from"../compose_form_container-CfVtoFBv.js";import{L as Yr}from"../link_footer-Bqw-3xSQ.js";import{u as eo}from"../use-gesture-react.esm-PiBFdzIE.js";import{S as to}from"../bookmarks-fill-DgzxJ_c4.js";import{S as no}from"../info-HtHaDKcq.js";import{S as ro}from"../person_add-fill-D1U4oKl8.js";import{S as oo}from"../person_add-Bq7Kcwwn.js";import{S as so}from"../trending_up-De1RKRI5.js";import{W as ao}from"../card-CttmBekj.js";import{C as R,T as io}from"../trends-DoB3pV3p.js";import{u as Je}from"../useBreakpoint-lQ5WUdV4.js";import{S as Xe}from"../tag-fitE3XYd.js";import{a as co}from"../tags-CLqn3B8f.js";import{S as Ye}from"../list_alt-yox9TcbF.js";import"../api-B2m7efUy.js";import{g as lo}from"../lists-5L5TUNK8.js";import{c as uo,a as mo}from"../permissions-Djze7cmB.js";import"../status-CiF0hsk4.js";import{I as ho}from"../intl_provider-DvXl4eEi.js";import{r as po}from"../ready-DpOgoWSg.js";import{l as fo}from"../index-CAH5FfLP.js";import"../index-lj9VQs0f.js";import"../interopRequireDefault-CdiRfGvq.js";import"../react-textarea-autosize.browser.esm-GiEI5riT.js";import"../use-isomorphic-layout-effect.browser.esm-D-sFEUJ5.js";import"../index-BZWHsOPk.js";import"../embedded_status-CRZOb2jI.js";import"../embedded_status_content-Dm1KuweQ.js";import"../gif-BtN1axMk.js";import"../numbers-CGZQWBYL.js";import"../index-Dy8WPmut.js";import"../chevron_left-CnYIoVsW.js";import"../verified_badge-CtK79Pb7.js";import"../emoji_picker_dropdown_container-BZPW7vKM.js";import"../dropdown_selector-TPsaB6cz.js";import"../fuzzysort-BUgAtj0X.js";import"../navigation_bar-CaTTFSc8.js";import"../edit-Cyfwv5F_.js";import"../hashtag-C8K46vBm.js";import"../index-DwQAxx91.js";import"../avatar_overlay-BeG39OK4.js";import"../toString-Cy1Ecq9L.js";import"../status_content-CaIN8-0B.js";import"../poll-CjurB963.js";import"../visibility_icon-DbVVvHFb.js";var re={exports:{}},oe={exports:{}},se={exports:{}},go=se.exports,et;function De(){return et||(et=1,function(t,d){(function(n,r){t.exports=r()})(go,function(){function n(i){return!isNaN(parseFloat(i))&&isFinite(i)}function r(i){return i.charAt(0).toUpperCase()+i.substring(1)}function a(i){return function(){return this[i]}}var c=["isConstructor","isEval","isNative","isToplevel"],g=["columnNumber","lineNumber"],_=["fileName","functionName","source"],f=["args"],v=["evalOrigin"],o=c.concat(g,_,f,v);function u(i){if(i)for(var x=0;x<o.length;x++)i[o[x]]!==void 0&&this["set"+r(o[x])](i[o[x]])}u.prototype={getArgs:function(){return this.args},setArgs:function(i){if(Object.prototype.toString.call(i)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=i},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(i){if(i instanceof u)this.evalOrigin=i;else if(i instanceof Object)this.evalOrigin=new u(i);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var i=this.getFileName()||"",x=this.getLineNumber()||"",b=this.getColumnNumber()||"",l=this.getFunctionName()||"";return this.getIsEval()?i?"[eval] ("+i+":"+x+":"+b+")":"[eval]:"+x+":"+b:l?l+" ("+i+":"+x+":"+b+")":i+":"+x+":"+b}},u.fromString=function(x){var b=x.indexOf("("),l=x.lastIndexOf(")"),h=x.substring(0,b),w=x.substring(b+1,l).split(","),y=x.substring(l+1);if(y.indexOf("@")===0)var M=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(y,""),N=M[1],E=M[2],L=M[3];return new u({functionName:h,args:w||void 0,fileName:N,lineNumber:E||void 0,columnNumber:L||void 0})};for(var s=0;s<c.length;s++)u.prototype["get"+r(c[s])]=a(c[s]),u.prototype["set"+r(c[s])]=function(i){return function(x){this[i]=!!x}}(c[s]);for(var m=0;m<g.length;m++)u.prototype["get"+r(g[m])]=a(g[m]),u.prototype["set"+r(g[m])]=function(i){return function(x){if(!n(x))throw new TypeError(i+" must be a Number");this[i]=Number(x)}}(g[m]);for(var p=0;p<_.length;p++)u.prototype["get"+r(_[p])]=a(_[p]),u.prototype["set"+r(_[p])]=function(i){return function(x){this[i]=String(x)}}(_[p]);return u})}(se)),se.exports}var vo=oe.exports,tt;function _o(){return tt||(tt=1,function(t,d){(function(n,r){t.exports=r(De())})(vo,function(r){var a=/(^|@)\S+:\d+/,c=/^\s*at .*(\S+:\d+|\(native\))/m,g=/^(eval@)?(\[native code])?$/;return{parse:function(f){if(typeof f.stacktrace<"u"||typeof f["opera#sourceloc"]<"u")return this.parseOpera(f);if(f.stack&&f.stack.match(c))return this.parseV8OrIE(f);if(f.stack)return this.parseFFOrSafari(f);throw new Error("Cannot parse given Error object")},extractLocation:function(f){if(f.indexOf(":")===-1)return[f];var v=/(.+?)(?::(\d+))?(?::(\d+))?$/,o=v.exec(f.replace(/[()]/g,""));return[o[1],o[2]||void 0,o[3]||void 0]},parseV8OrIE:function(f){var v=f.stack.split(`
`).filter(function(o){return!!o.match(c)},this);return v.map(function(o){o.indexOf("(eval ")>-1&&(o=o.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));var u=o.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,""),s=u.match(/ (\(.+\)$)/);u=s?u.replace(s[0],""):u;var m=this.extractLocation(s?s[1]:u),p=s&&u||void 0,i=["eval","<anonymous>"].indexOf(m[0])>-1?void 0:m[0];return new r({functionName:p,fileName:i,lineNumber:m[1],columnNumber:m[2],source:o})},this)},parseFFOrSafari:function(f){var v=f.stack.split(`
`).filter(function(o){return!o.match(g)},this);return v.map(function(o){if(o.indexOf(" > eval")>-1&&(o=o.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),o.indexOf("@")===-1&&o.indexOf(":")===-1)return new r({functionName:o});var u=/((.*".+"[^@]*)?[^@]*)(?:@)/,s=o.match(u),m=s&&s[1]?s[1]:void 0,p=this.extractLocation(o.replace(u,""));return new r({functionName:m,fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:o})},this)},parseOpera:function(f){return!f.stacktrace||f.message.indexOf(`
`)>-1&&f.message.split(`
`).length>f.stacktrace.split(`
`).length?this.parseOpera9(f):f.stack?this.parseOpera11(f):this.parseOpera10(f)},parseOpera9:function(f){for(var v=/Line (\d+).*script (?:in )?(\S+)/i,o=f.message.split(`
`),u=[],s=2,m=o.length;s<m;s+=2){var p=v.exec(o[s]);p&&u.push(new r({fileName:p[2],lineNumber:p[1],source:o[s]}))}return u},parseOpera10:function(f){for(var v=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=f.stacktrace.split(`
`),u=[],s=0,m=o.length;s<m;s+=2){var p=v.exec(o[s]);p&&u.push(new r({functionName:p[3]||void 0,fileName:p[2],lineNumber:p[1],source:o[s]}))}return u},parseOpera11:function(f){var v=f.stack.split(`
`).filter(function(o){return!!o.match(a)&&!o.match(/^Error created at/)},this);return v.map(function(o){var u=o.split("@"),s=this.extractLocation(u.pop()),m=u.shift()||"",p=m.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,i;m.match(/\(([^)]*)\)/)&&(i=m.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var x=i===void 0||i==="[arguments not available]"?void 0:i.split(",");return new r({functionName:p,args:x,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:o})},this)}}})}(oe)),oe.exports}var ae={exports:{}},xo=ae.exports,nt;function bo(){return nt||(nt=1,function(t,d){(function(n,r){t.exports=r(De())})(xo,function(n){return{backtrace:function(a){var c=[],g=10;typeof a=="object"&&typeof a.maxStackSize=="number"&&(g=a.maxStackSize);for(var _=arguments.callee;_&&c.length<g&&_.arguments;){for(var f=new Array(_.arguments.length),v=0;v<f.length;++v)f[v]=_.arguments[v];/function(?:\s+([\w$]+))+\s*\(/.test(_.toString())?c.push(new n({functionName:RegExp.$1||void 0,args:f})):c.push(new n({args:f}));try{_=_.caller}catch{break}}return c}}})}(ae)),ae.exports}var ie={exports:{}},Q={},xe={},rt;function Ht(){return rt||(rt=1,function(t){function d(l,h,w){if(h in l)return l[h];if(arguments.length===3)return w;throw new Error('"'+h+'" is a required argument.')}t.getArg=d;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,r=/^data:.+\,.+$/;function a(l){var h=l.match(n);return h?{scheme:h[1],auth:h[2],host:h[3],port:h[4],path:h[5]}:null}t.urlParse=a;function c(l){var h="";return l.scheme&&(h+=l.scheme+":"),h+="//",l.auth&&(h+=l.auth+"@"),l.host&&(h+=l.host),l.port&&(h+=":"+l.port),l.path&&(h+=l.path),h}t.urlGenerate=c;function g(l){var h=l,w=a(l);if(w){if(!w.path)return l;h=w.path}for(var y=t.isAbsolute(h),M=h.split(/\/+/),N,E=0,L=M.length-1;L>=0;L--)N=M[L],N==="."?M.splice(L,1):N===".."?E++:E>0&&(N===""?(M.splice(L+1,E),E=0):(M.splice(L,2),E--));return h=M.join("/"),h===""&&(h=y?"/":"."),w?(w.path=h,c(w)):h}t.normalize=g;function _(l,h){l===""&&(l="."),h===""&&(h=".");var w=a(h),y=a(l);if(y&&(l=y.path||"/"),w&&!w.scheme)return y&&(w.scheme=y.scheme),c(w);if(w||h.match(r))return h;if(y&&!y.host&&!y.path)return y.host=h,c(y);var M=h.charAt(0)==="/"?h:g(l.replace(/\/+$/,"")+"/"+h);return y?(y.path=M,c(y)):M}t.join=_,t.isAbsolute=function(l){return l.charAt(0)==="/"||!!l.match(n)};function f(l,h){l===""&&(l="."),l=l.replace(/\/$/,"");for(var w=0;h.indexOf(l+"/")!==0;){var y=l.lastIndexOf("/");if(y<0||(l=l.slice(0,y),l.match(/^([^\/]+:\/)?\/*$/)))return h;++w}return Array(w+1).join("../")+h.substr(l.length+1)}t.relative=f;var v=function(){var l=Object.create(null);return!("__proto__"in l)}();function o(l){return l}function u(l){return m(l)?"$"+l:l}t.toSetString=v?o:u;function s(l){return m(l)?l.slice(1):l}t.fromSetString=v?o:s;function m(l){if(!l)return!1;var h=l.length;if(h<9||l.charCodeAt(h-1)!==95||l.charCodeAt(h-2)!==95||l.charCodeAt(h-3)!==111||l.charCodeAt(h-4)!==116||l.charCodeAt(h-5)!==111||l.charCodeAt(h-6)!==114||l.charCodeAt(h-7)!==112||l.charCodeAt(h-8)!==95||l.charCodeAt(h-9)!==95)return!1;for(var w=h-10;w>=0;w--)if(l.charCodeAt(w)!==36)return!1;return!0}function p(l,h,w){var y=l.source-h.source;return y!==0||(y=l.originalLine-h.originalLine,y!==0)||(y=l.originalColumn-h.originalColumn,y!==0||w)||(y=l.generatedColumn-h.generatedColumn,y!==0)||(y=l.generatedLine-h.generatedLine,y!==0)?y:l.name-h.name}t.compareByOriginalPositions=p;function i(l,h,w){var y=l.generatedLine-h.generatedLine;return y!==0||(y=l.generatedColumn-h.generatedColumn,y!==0||w)||(y=l.source-h.source,y!==0)||(y=l.originalLine-h.originalLine,y!==0)||(y=l.originalColumn-h.originalColumn,y!==0)?y:l.name-h.name}t.compareByGeneratedPositionsDeflated=i;function x(l,h){return l===h?0:l>h?1:-1}function b(l,h){var w=l.generatedLine-h.generatedLine;return w!==0||(w=l.generatedColumn-h.generatedColumn,w!==0)||(w=x(l.source,h.source),w!==0)||(w=l.originalLine-h.originalLine,w!==0)||(w=l.originalColumn-h.originalColumn,w!==0)?w:x(l.name,h.name)}t.compareByGeneratedPositionsInflated=b}(xe)),xe}var be={},ot;function yo(){return ot||(ot=1,function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function d(n,r,a,c,g,_){var f=Math.floor((r-n)/2)+n,v=g(a,c[f],!0);return v===0?f:v>0?r-f>1?d(f,r,a,c,g,_):_==t.LEAST_UPPER_BOUND?r<c.length?r:-1:f:f-n>1?d(n,f,a,c,g,_):_==t.LEAST_UPPER_BOUND?f:n<0?-1:n}t.search=function(r,a,c,g){if(a.length===0)return-1;var _=d(-1,a.length,r,a,c,g||t.GREATEST_LOWER_BOUND);if(_<0)return-1;for(;_-1>=0&&c(a[_],a[_-1],!0)===0;)--_;return _}}(be)),be}var ye={},st;function wo(){if(st)return ye;st=1;var t=Ht(),d=Object.prototype.hasOwnProperty;function n(){this._array=[],this._set=Object.create(null)}return n.fromArray=function(a,c){for(var g=new n,_=0,f=a.length;_<f;_++)g.add(a[_],c);return g},n.prototype.size=function(){return Object.getOwnPropertyNames(this._set).length},n.prototype.add=function(a,c){var g=t.toSetString(a),_=d.call(this._set,g),f=this._array.length;(!_||c)&&this._array.push(a),_||(this._set[g]=f)},n.prototype.has=function(a){var c=t.toSetString(a);return d.call(this._set,c)},n.prototype.indexOf=function(a){var c=t.toSetString(a);if(d.call(this._set,c))return this._set[c];throw new Error('"'+a+'" is not in the set.')},n.prototype.at=function(a){if(a>=0&&a<this._array.length)return this._array[a];throw new Error("No element indexed by "+a)},n.prototype.toArray=function(){return this._array.slice()},ye.ArraySet=n,ye}var ee={},te={},at;function jo(){if(at)return te;at=1;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return te.encode=function(d){if(0<=d&&d<t.length)return t[d];throw new TypeError("Must be between 0 and 63: "+d)},te.decode=function(d){var n=65,r=90,a=97,c=122,g=48,_=57,f=43,v=47,o=26,u=52;return n<=d&&d<=r?d-n:a<=d&&d<=c?d-a+o:g<=d&&d<=_?d-g+u:d==f?62:d==v?63:-1},te}var it;function Co(){if(it)return ee;it=1;var t=jo(),d=5,n=1<<d,r=n-1,a=n;function c(_){return _<0?(-_<<1)+1:(_<<1)+0}function g(_){var f=(_&1)===1,v=_>>1;return f?-v:v}return ee.encode=function(f){var v="",o,u=c(f);do o=u&r,u>>>=d,u>0&&(o|=a),v+=t.encode(o);while(u>0);return v},ee.decode=function(f,v,o){var u=f.length,s=0,m=0,p,i;do{if(v>=u)throw new Error("Expected more digits in base 64 VLQ value.");if(i=t.decode(f.charCodeAt(v++)),i===-1)throw new Error("Invalid base64 digit: "+f.charAt(v-1));p=!!(i&a),i&=r,s=s+(i<<m),m+=d}while(p);o.value=g(s),o.rest=v},ee}var we={},ct;function So(){if(ct)return we;ct=1;function t(r,a,c){var g=r[a];r[a]=r[c],r[c]=g}function d(r,a){return Math.round(r+Math.random()*(a-r))}function n(r,a,c,g){if(c<g){var _=d(c,g),f=c-1;t(r,_,g);for(var v=r[g],o=c;o<g;o++)a(r[o],v)<=0&&(f+=1,t(r,f,o));t(r,f+1,o);var u=f+1;n(r,a,c,u-1),n(r,a,u+1,g)}}return we.quickSort=function(r,a){n(r,a,0,r.length-1)},we}var lt;function Mo(){if(lt)return Q;lt=1;var t=Ht(),d=yo(),n=wo().ArraySet,r=Co(),a=So().quickSort;function c(v){var o=v;return typeof v=="string"&&(o=JSON.parse(v.replace(/^\)\]\}'/,""))),o.sections!=null?new f(o):new g(o)}c.fromSourceMap=function(v){return g.fromSourceMap(v)},c.prototype._version=3,c.prototype.__generatedMappings=null,Object.defineProperty(c.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),c.prototype.__originalMappings=null,Object.defineProperty(c.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),c.prototype._charIsMappingSeparator=function(o,u){var s=o.charAt(u);return s===";"||s===","},c.prototype._parseMappings=function(o,u){throw new Error("Subclasses must implement _parseMappings")},c.GENERATED_ORDER=1,c.ORIGINAL_ORDER=2,c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.prototype.eachMapping=function(o,u,s){var m=u||null,p=s||c.GENERATED_ORDER,i;switch(p){case c.GENERATED_ORDER:i=this._generatedMappings;break;case c.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var x=this.sourceRoot;i.map(function(b){var l=b.source===null?null:this._sources.at(b.source);return l!=null&&x!=null&&(l=t.join(x,l)),{source:l,generatedLine:b.generatedLine,generatedColumn:b.generatedColumn,originalLine:b.originalLine,originalColumn:b.originalColumn,name:b.name===null?null:this._names.at(b.name)}},this).forEach(o,m)},c.prototype.allGeneratedPositionsFor=function(o){var u=t.getArg(o,"line"),s={source:t.getArg(o,"source"),originalLine:u,originalColumn:t.getArg(o,"column",0)};if(this.sourceRoot!=null&&(s.source=t.relative(this.sourceRoot,s.source)),!this._sources.has(s.source))return[];s.source=this._sources.indexOf(s.source);var m=[],p=this._findMapping(s,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,d.LEAST_UPPER_BOUND);if(p>=0){var i=this._originalMappings[p];if(o.column===void 0)for(var x=i.originalLine;i&&i.originalLine===x;)m.push({line:t.getArg(i,"generatedLine",null),column:t.getArg(i,"generatedColumn",null),lastColumn:t.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++p];else for(var b=i.originalColumn;i&&i.originalLine===u&&i.originalColumn==b;)m.push({line:t.getArg(i,"generatedLine",null),column:t.getArg(i,"generatedColumn",null),lastColumn:t.getArg(i,"lastGeneratedColumn",null)}),i=this._originalMappings[++p]}return m},Q.SourceMapConsumer=c;function g(v){var o=v;typeof v=="string"&&(o=JSON.parse(v.replace(/^\)\]\}'/,"")));var u=t.getArg(o,"version"),s=t.getArg(o,"sources"),m=t.getArg(o,"names",[]),p=t.getArg(o,"sourceRoot",null),i=t.getArg(o,"sourcesContent",null),x=t.getArg(o,"mappings"),b=t.getArg(o,"file",null);if(u!=this._version)throw new Error("Unsupported version: "+u);s=s.map(String).map(t.normalize).map(function(l){return p&&t.isAbsolute(p)&&t.isAbsolute(l)?t.relative(p,l):l}),this._names=n.fromArray(m.map(String),!0),this._sources=n.fromArray(s,!0),this.sourceRoot=p,this.sourcesContent=i,this._mappings=x,this.file=b}g.prototype=Object.create(c.prototype),g.prototype.consumer=c,g.fromSourceMap=function(o){var u=Object.create(g.prototype),s=u._names=n.fromArray(o._names.toArray(),!0),m=u._sources=n.fromArray(o._sources.toArray(),!0);u.sourceRoot=o._sourceRoot,u.sourcesContent=o._generateSourcesContent(u._sources.toArray(),u.sourceRoot),u.file=o._file;for(var p=o._mappings.toArray().slice(),i=u.__generatedMappings=[],x=u.__originalMappings=[],b=0,l=p.length;b<l;b++){var h=p[b],w=new _;w.generatedLine=h.generatedLine,w.generatedColumn=h.generatedColumn,h.source&&(w.source=m.indexOf(h.source),w.originalLine=h.originalLine,w.originalColumn=h.originalColumn,h.name&&(w.name=s.indexOf(h.name)),x.push(w)),i.push(w)}return a(u.__originalMappings,t.compareByOriginalPositions),u},g.prototype._version=3,Object.defineProperty(g.prototype,"sources",{get:function(){return this._sources.toArray().map(function(v){return this.sourceRoot!=null?t.join(this.sourceRoot,v):v},this)}});function _(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}g.prototype._parseMappings=function(o,u){for(var s=1,m=0,p=0,i=0,x=0,b=0,l=o.length,h=0,w={},y={},M=[],N=[],E,L,T,G,He;h<l;)if(o.charAt(h)===";")s++,h++,m=0;else if(o.charAt(h)===",")h++;else{for(E=new _,E.generatedLine=s,G=h;G<l&&!this._charIsMappingSeparator(o,G);G++);if(L=o.slice(h,G),T=w[L],T)h+=L.length;else{for(T=[];h<G;)r.decode(o,h,y),He=y.value,h=y.rest,T.push(He);if(T.length===2)throw new Error("Found a source, but no line and column");if(T.length===3)throw new Error("Found a source and line, but no column");w[L]=T}E.generatedColumn=m+T[0],m=E.generatedColumn,T.length>1&&(E.source=x+T[1],x+=T[1],E.originalLine=p+T[2],p=E.originalLine,E.originalLine+=1,E.originalColumn=i+T[3],i=E.originalColumn,T.length>4&&(E.name=b+T[4],b+=T[4])),N.push(E),typeof E.originalLine=="number"&&M.push(E)}a(N,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=N,a(M,t.compareByOriginalPositions),this.__originalMappings=M},g.prototype._findMapping=function(o,u,s,m,p,i){if(o[s]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+o[s]);if(o[m]<0)throw new TypeError("Column must be greater than or equal to 0, got "+o[m]);return d.search(o,u,p,i)},g.prototype.computeColumnSpans=function(){for(var o=0;o<this._generatedMappings.length;++o){var u=this._generatedMappings[o];if(o+1<this._generatedMappings.length){var s=this._generatedMappings[o+1];if(u.generatedLine===s.generatedLine){u.lastGeneratedColumn=s.generatedColumn-1;continue}}u.lastGeneratedColumn=1/0}},g.prototype.originalPositionFor=function(o){var u={generatedLine:t.getArg(o,"line"),generatedColumn:t.getArg(o,"column")},s=this._findMapping(u,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(o,"bias",c.GREATEST_LOWER_BOUND));if(s>=0){var m=this._generatedMappings[s];if(m.generatedLine===u.generatedLine){var p=t.getArg(m,"source",null);p!==null&&(p=this._sources.at(p),this.sourceRoot!=null&&(p=t.join(this.sourceRoot,p)));var i=t.getArg(m,"name",null);return i!==null&&(i=this._names.at(i)),{source:p,line:t.getArg(m,"originalLine",null),column:t.getArg(m,"originalColumn",null),name:i}}}return{source:null,line:null,column:null,name:null}},g.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(o){return o==null}):!1},g.prototype.sourceContentFor=function(o,u){if(!this.sourcesContent)return null;if(this.sourceRoot!=null&&(o=t.relative(this.sourceRoot,o)),this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];var s;if(this.sourceRoot!=null&&(s=t.urlParse(this.sourceRoot))){var m=o.replace(/^file:\/\//,"");if(s.scheme=="file"&&this._sources.has(m))return this.sourcesContent[this._sources.indexOf(m)];if((!s.path||s.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(u)return null;throw new Error('"'+o+'" is not in the SourceMap.')},g.prototype.generatedPositionFor=function(o){var u=t.getArg(o,"source");if(this.sourceRoot!=null&&(u=t.relative(this.sourceRoot,u)),!this._sources.has(u))return{line:null,column:null,lastColumn:null};u=this._sources.indexOf(u);var s={source:u,originalLine:t.getArg(o,"line"),originalColumn:t.getArg(o,"column")},m=this._findMapping(s,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(o,"bias",c.GREATEST_LOWER_BOUND));if(m>=0){var p=this._originalMappings[m];if(p.source===s.source)return{line:t.getArg(p,"generatedLine",null),column:t.getArg(p,"generatedColumn",null),lastColumn:t.getArg(p,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Q.BasicSourceMapConsumer=g;function f(v){var o=v;typeof v=="string"&&(o=JSON.parse(v.replace(/^\)\]\}'/,"")));var u=t.getArg(o,"version"),s=t.getArg(o,"sections");if(u!=this._version)throw new Error("Unsupported version: "+u);this._sources=new n,this._names=new n;var m={line:-1,column:0};this._sections=s.map(function(p){if(p.url)throw new Error("Support for url field in sections not implemented.");var i=t.getArg(p,"offset"),x=t.getArg(i,"line"),b=t.getArg(i,"column");if(x<m.line||x===m.line&&b<m.column)throw new Error("Section offsets must be ordered and non-overlapping.");return m=i,{generatedOffset:{generatedLine:x+1,generatedColumn:b+1},consumer:new c(t.getArg(p,"map"))}})}return f.prototype=Object.create(c.prototype),f.prototype.constructor=c,f.prototype._version=3,Object.defineProperty(f.prototype,"sources",{get:function(){for(var v=[],o=0;o<this._sections.length;o++)for(var u=0;u<this._sections[o].consumer.sources.length;u++)v.push(this._sections[o].consumer.sources[u]);return v}}),f.prototype.originalPositionFor=function(o){var u={generatedLine:t.getArg(o,"line"),generatedColumn:t.getArg(o,"column")},s=d.search(u,this._sections,function(p,i){var x=p.generatedLine-i.generatedOffset.generatedLine;return x||p.generatedColumn-i.generatedOffset.generatedColumn}),m=this._sections[s];return m?m.consumer.originalPositionFor({line:u.generatedLine-(m.generatedOffset.generatedLine-1),column:u.generatedColumn-(m.generatedOffset.generatedLine===u.generatedLine?m.generatedOffset.generatedColumn-1:0),bias:o.bias}):{source:null,line:null,column:null,name:null}},f.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(o){return o.consumer.hasContentsOfAllSources()})},f.prototype.sourceContentFor=function(o,u){for(var s=0;s<this._sections.length;s++){var m=this._sections[s],p=m.consumer.sourceContentFor(o,!0);if(p)return p}if(u)return null;throw new Error('"'+o+'" is not in the SourceMap.')},f.prototype.generatedPositionFor=function(o){for(var u=0;u<this._sections.length;u++){var s=this._sections[u];if(s.consumer.sources.indexOf(t.getArg(o,"source"))!==-1){var m=s.consumer.generatedPositionFor(o);if(m){var p={line:m.line+(s.generatedOffset.generatedLine-1),column:m.column+(s.generatedOffset.generatedLine===m.line?s.generatedOffset.generatedColumn-1:0)};return p}}}return{line:null,column:null}},f.prototype._parseMappings=function(o,u){this.__generatedMappings=[],this.__originalMappings=[];for(var s=0;s<this._sections.length;s++)for(var m=this._sections[s],p=m.consumer._generatedMappings,i=0;i<p.length;i++){var x=p[i],b=m.consumer._sources.at(x.source);m.consumer.sourceRoot!==null&&(b=t.join(m.consumer.sourceRoot,b)),this._sources.add(b),b=this._sources.indexOf(b);var l=m.consumer._names.at(x.name);this._names.add(l),l=this._names.indexOf(l);var h={source:b,generatedLine:x.generatedLine+(m.generatedOffset.generatedLine-1),generatedColumn:x.generatedColumn+(m.generatedOffset.generatedLine===x.generatedLine?m.generatedOffset.generatedColumn-1:0),originalLine:x.originalLine,originalColumn:x.originalColumn,name:l};this.__generatedMappings.push(h),typeof h.originalLine=="number"&&this.__originalMappings.push(h)}a(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),a(this.__originalMappings,t.compareByOriginalPositions)},Q.IndexedSourceMapConsumer=f,Q}var To=ie.exports,ut;function ko(){return ut||(ut=1,function(t,d){(function(n,r){t.exports=r(Mo(),De())})(To,function(n,r){function a(s){return new Promise(function(m,p){var i=new XMLHttpRequest;i.open("get",s),i.onerror=p,i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300||s.substr(0,7)==="file://"&&i.responseText?m(i.responseText):p(new Error("HTTP status: "+i.status+" retrieving "+s)))},i.send()})}function c(s){if(typeof window<"u"&&window.atob)return window.atob(s);throw new Error("You must supply a polyfill for window.atob in this environment")}function g(s){if(typeof JSON<"u"&&JSON.parse)return JSON.parse(s);throw new Error("You must supply a polyfill for JSON.parse in this environment")}function _(s,m){for(var p=[/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,/function\s+([^('"`]*?)\s*\(([^)]*)\)/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,/\b(?!(?:if|for|switch|while|with|catch)\b)(?:(?:static)\s+)?(\S+)\s*\(.*?\)\s*\{/,/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*\(.*?\)\s*=>/],i=s.split(`
`),x="",b=Math.min(m,20),l=0;l<b;++l){var h=i[m-l-1],w=h.indexOf("//");if(w>=0&&(h=h.substr(0,w)),h){x=h+x;for(var y=p.length,M=0;M<y;M++){var N=p[M].exec(x);if(N&&N[1])return N[1]}}}}function f(){if(typeof Object.defineProperty!="function"||typeof Object.create!="function")throw new Error("Unable to consume source maps in older browsers")}function v(s){if(typeof s!="object")throw new TypeError("Given StackFrame is not an object");if(typeof s.fileName!="string")throw new TypeError("Given file name is not a String");if(typeof s.lineNumber!="number"||s.lineNumber%1!==0||s.lineNumber<1)throw new TypeError("Given line number must be a positive integer");if(typeof s.columnNumber!="number"||s.columnNumber%1!==0||s.columnNumber<0)throw new TypeError("Given column number must be a non-negative integer");return!0}function o(s){for(var m=/\/\/[#@] ?sourceMappingURL=([^\s'"]+)\s*$/mg,p,i;i=m.exec(s);)p=i[1];if(p)return p;throw new Error("sourceMappingURL not found")}function u(s,m,p){return new Promise(function(i,x){var b=m.originalPositionFor({line:s.lineNumber,column:s.columnNumber});if(b.source){var l=m.sourceContentFor(b.source);l&&(p[b.source]=l),i(new r({functionName:b.name||s.functionName,args:s.args,fileName:b.source,lineNumber:b.line,columnNumber:b.column}))}else x(new Error("Could not get original source for given stackframe and source map"))})}return function s(m){if(!(this instanceof s))return new s(m);m=m||{},this.sourceCache=m.sourceCache||{},this.sourceMapConsumerCache=m.sourceMapConsumerCache||{},this.ajax=m.ajax||a,this._atob=m.atob||c,this._get=function(i){return new Promise((function(x,b){var l=i.substr(0,5)==="data:";if(this.sourceCache[i])x(this.sourceCache[i]);else if(m.offline&&!l)b(new Error("Cannot make network requests in offline mode"));else if(l){var h=/^data:application\/json;([\w=:"-]+;)*base64,/,w=i.match(h);if(w){var y=w[0].length,M=i.substr(y),N=this._atob(M);this.sourceCache[i]=N,x(N)}else b(new Error("The encoding of the inline sourcemap is not supported"))}else{var E=this.ajax(i,{method:"get"});this.sourceCache[i]=E,E.then(x,b)}}).bind(this))},this._getSourceMapConsumer=function(i,x){return new Promise((function(b){if(this.sourceMapConsumerCache[i])b(this.sourceMapConsumerCache[i]);else{var l=new Promise((function(h,w){return this._get(i).then(function(y){typeof y=="string"&&(y=g(y.replace(/^\)\]\}'/,""))),typeof y.sourceRoot>"u"&&(y.sourceRoot=x),h(new n.SourceMapConsumer(y))}).catch(w)}).bind(this));this.sourceMapConsumerCache[i]=l,b(l)}}).bind(this))},this.pinpoint=function(i){return new Promise((function(x,b){this.getMappedLocation(i).then((function(l){function h(){x(l)}this.findFunctionName(l).then(x,h).catch(h)}).bind(this),b)}).bind(this))},this.findFunctionName=function(i){return new Promise((function(x,b){v(i),this._get(i.fileName).then(function(h){var w=i.lineNumber,y=i.columnNumber,M=_(h,w);x(M?new r({functionName:M,args:i.args,fileName:i.fileName,lineNumber:w,columnNumber:y}):i)},b).catch(b)}).bind(this))},this.getMappedLocation=function(i){return new Promise((function(x,b){f(),v(i);var l=this.sourceCache,h=i.fileName;this._get(h).then((function(w){var y=o(w),M=y.substr(0,5)==="data:",N=h.substring(0,h.lastIndexOf("/")+1);return y[0]!=="/"&&!M&&!/^https?:\/\/|^\/\//i.test(y)&&(y=N+y),this._getSourceMapConsumer(y,N).then(function(E){return u(i,E,l).then(x).catch(function(){x(i)})})}).bind(this),b).catch(b)}).bind(this))}}})}(ie)),ie.exports}var Eo=re.exports,dt;function No(){return dt||(dt=1,function(t,d){(function(n,r){t.exports=r(_o(),bo(),ko())})(Eo,function(r,a,c){var g={filter:function(u){return(u.functionName||"").indexOf("StackTrace$$")===-1&&(u.functionName||"").indexOf("ErrorStackParser$$")===-1&&(u.functionName||"").indexOf("StackTraceGPS$$")===-1&&(u.functionName||"").indexOf("StackGenerator$$")===-1},sourceCache:{}},_=function(){try{throw new Error}catch(s){return s}};function f(u,s){var m={};return[u,s].forEach(function(p){for(var i in p)Object.prototype.hasOwnProperty.call(p,i)&&(m[i]=p[i]);return m}),m}function v(u){return u.stack||u["opera#sourceloc"]}function o(u,s){return typeof s=="function"?u.filter(s):u}return{get:function(s){var m=_();return v(m)?this.fromError(m,s):this.generateArtificially(s)},getSync:function(s){s=f(g,s);var m=_(),p=v(m)?r.parse(m):a.backtrace(s);return o(p,s.filter)},fromError:function(s,m){m=f(g,m);var p=new c(m);return new Promise((function(i){var x=o(r.parse(s),m.filter);i(Promise.all(x.map(function(b){return new Promise(function(l){function h(){l(b)}p.pinpoint(b).then(l,h).catch(h)})})))}).bind(this))},generateArtificially:function(s){s=f(g,s);var m=a.backtrace(s);return typeof s.filter=="function"&&(m=m.filter(s.filter)),Promise.resolve(m)},instrument:function(s,m,p,i){if(typeof s!="function")throw new Error("Cannot instrument non-function object");if(typeof s.__stacktraceOriginalFn=="function")return s;var x=(function(){try{return this.get().then(m,p).catch(p),s.apply(i||this,arguments)}catch(l){throw v(l)&&this.fromError(l).then(m,p).catch(p),l}}).bind(this);return x.__stacktraceOriginalFn=s,x},deinstrument:function(s){if(typeof s!="function")throw new Error("Cannot de-instrument non-function object");return typeof s.__stacktraceOriginalFn=="function"?s.__stacktraceOriginalFn:s},report:function(s,m,p,i){return new Promise(function(x,b){var l=new XMLHttpRequest;if(l.onerror=b,l.onreadystatechange=function(){l.readyState===4&&(l.status>=200&&l.status<400?x(l.responseText):b(new Error("POST to "+m+" failed with status: "+l.status)))},l.open("post",m),l.setRequestHeader("Content-Type","application/json"),i&&typeof i.headers=="object"){var h=i.headers;for(var w in h)Object.prototype.hasOwnProperty.call(h,w)&&l.setRequestHeader(w,h[w])}var y={stack:s};p!=null&&(y.message=p),l.send(JSON.stringify(y))})}}})}(re)),re.exports}var Lo=No();const Bt=Xt(Lo);class Ao extends j.PureComponent{constructor(){super(...arguments);C(this,"state",{hasError:!1,errorMessage:void 0,stackTrace:void 0,mappedStackTrace:void 0,componentStack:void 0});C(this,"handleCopyStackTrace",()=>{const{errorMessage:n,stackTrace:r,mappedStackTrace:a}=this.state,c=document.createElement("textarea");let g=[n,r];a&&g.push(a),c.textContent=g.join(`


`),c.style.position="fixed",document.body.appendChild(c);try{c.select(),document.execCommand("copy")}catch{}finally{document.body.removeChild(c)}this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),700)})}componentDidCatch(n,r){this.setState({hasError:!0,errorMessage:n.toString(),stackTrace:n.stack,componentStack:r&&r.componentStack,mappedStackTrace:void 0}),Bt.fromError(n).then(a=>{this.setState({mappedStackTrace:a.map(c=>c.toString()).join(`
`)})}).catch(()=>{this.setState({mappedStackTrace:void 0})})}render(){const{hasError:n,copied:r,errorMessage:a}=this.state;if(!n)return this.props.children;const c=a&&a.includes("NotFoundError");return e.jsxs("div",{className:"error-boundary",children:[e.jsxs("div",{children:[e.jsx("p",{className:"error-boundary__error",children:c?e.jsx(k,{id:"error.unexpected_crash.explanation_addons",defaultMessage:"This page could not be displayed correctly. This error is likely caused by a browser add-on or automatic translation tools."}):e.jsx(k,{id:"error.unexpected_crash.explanation",defaultMessage:"Due to a bug in our code or a browser compatibility issue, this page could not be displayed correctly."})}),e.jsx("p",{children:c?e.jsx(k,{id:"error.unexpected_crash.next_steps_addons",defaultMessage:"Try disabling them and refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app."}):e.jsx(k,{id:"error.unexpected_crash.next_steps",defaultMessage:"Try refreshing the page. If that does not help, you may still be able to use Mastodon through a different browser or native app."})}),e.jsxs("p",{className:"error-boundary__footer",children:["Mastodon v",Un," · ",e.jsx("a",{href:zn,rel:"noopener",target:"_blank",children:e.jsx(k,{id:"errors.unexpected_crash.report_issue",defaultMessage:"Report issue"})})," · ",e.jsx("button",{onClick:this.handleCopyStackTrace,className:r?"copied":"",children:e.jsx(k,{id:"errors.unexpected_crash.copy_stacktrace",defaultMessage:"Copy stacktrace to clipboard"})})]})]}),e.jsx(yt,{children:e.jsx("meta",{name:"robots",content:"noindex"})})]})}}const Oo=({note:t,className:d})=>{const n=St();return t.length===0||t==="<p></p>"?null:e.jsx("div",{className:`${d} translate`,dangerouslySetInnerHTML:{__html:t},onClickCapture:n})},Ro=({fields:t,limit:d=-1})=>{const n=St();return t.size===0?null:e.jsx("div",{className:"account-fields",onClickCapture:n,children:t.take(d).map((r,a)=>e.jsxs("dl",{className:z({verified:r.get("verified_at")}),children:[e.jsx("dt",{dangerouslySetInnerHTML:{__html:r.get("name_emojified")},className:"translate"}),e.jsxs("dd",{className:"translate",title:r.get("value_plain")??"",children:[r.get("verified_at")&&e.jsx(B,{id:"check",icon:Yt,className:"verified__mark"}),e.jsx("span",{dangerouslySetInnerHTML:{__html:r.get("value_emojified")}})]})]},a))})},Gt=j.forwardRef(({accountId:t},d)=>{const n=$(),r=A(p=>t?p.accounts.get(t):void 0),a=r==null?void 0:r.suspended,c=A(p=>t?ur(p,t):void 0),g=!!(a||c),_=A(p=>p.relationships.getIn([t,"note"]));j.useEffect(()=>{t&&!r&&n(en(t))},[n,t,r]);const{familiarFollowers:f}=ar({accountId:t}),v=A(p=>t?p.relationships.get(t):void 0),o=(v==null?void 0:v.followed_by)&&v.following,u=v==null?void 0:v.followed_by,s=!!v,m=f.length>0&&s&&!o&&!u;return e.jsx("div",{ref:d,id:"hover-card",role:"tooltip",className:z("hover-card dropdown-animation",{"hover-card--loading":!r}),children:r?e.jsxs(e.Fragment,{children:[e.jsxs(W,{to:`/@${r.acct}`,className:"hover-card__name",children:[e.jsx(Te,{account:g?void 0:r,size:46}),e.jsx(Tt,{account:r,localDomain:J})]}),g?e.jsx("div",{className:"hover-card__limited-account-note",children:a?e.jsx(k,{id:"empty_column.account_suspended",defaultMessage:"Account suspended"}):e.jsx(k,{id:"limited_account_hint.title",defaultMessage:"This profile has been hidden by the moderators of {domain}.",values:{domain:J}})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hover-card__text-row",children:[e.jsx(Oo,{note:r.note_emojified,className:"hover-card__bio"}),e.jsx(Ro,{fields:r.fields,limit:2}),_&&_.length>0&&e.jsxs("dl",{className:"hover-card__note",children:[e.jsx("dt",{className:"hover-card__note-label",children:e.jsx(k,{id:"account.account_note_header",defaultMessage:"Personal note"})}),e.jsx("dd",{children:_})]})]}),e.jsxs("div",{className:"hover-card__numbers",children:[e.jsx(Ne,{value:r.followers_count,renderer:cr}),m&&e.jsxs(e.Fragment,{children:["·",e.jsxs("div",{className:"hover-card__familiar-followers",children:[e.jsx(Ne,{value:f.length,renderer:lr}),e.jsx(ir,{compact:!0,children:f.slice(0,3).map(p=>e.jsx(Te,{account:p,size:22},p.id))})]})]}),(o||u)&&e.jsxs(e.Fragment,{children:["·",o?e.jsx(k,{id:"account.mutual",defaultMessage:"You follow each other"}):e.jsx(k,{id:"account.follows_you",defaultMessage:"Follows you"})]})]}),e.jsx(Hr,{accountId:t})]})]}):e.jsx(It,{})})});Gt.displayName="HoverCardAccount";const Io=[-12,4],mt=750,Po=150,Fo={strategy:"fixed"},$o=t=>t.matches("[data-hover-card-account]"),qo=()=>{const[t,d]=j.useState(!1),[n,r]=j.useState(),[a,c]=j.useState(null),g=j.useRef(null),[_,f]=_e(),[v,o,u]=_e(),[s]=_e(),m=he(),p=j.useCallback(()=>{o(),f(),d(!1),c(null)},[o,f,d,c]);return j.useEffect(()=>{p()},[p,m]),j.useEffect(()=>{let i=!1,x=null,b=null;const l=L=>{L.setAttribute("aria-describedby","hover-card"),d(!0),c(L),r(L.getAttribute("data-hover-card-account")??void 0)},h=()=>{x==null||x.removeAttribute("aria-describedby"),x=null,d(!1),c(null),r(void 0)},w=L=>{const{target:T}=L;if(!(T instanceof HTMLElement)){h();return}!i&&$o(T)&&(f(),x==null||x.removeAttribute("aria-describedby"),x=T,b=T.getAttribute("title"),T.removeAttribute("title"),v(()=>{l(T)},mt)),!i&&(T===x||T===g.current)&&f()},y=L=>{const{target:T}=L;x&&(b&&T instanceof HTMLElement&&T===x&&T.setAttribute("title",b),(T===x||T===g.current)&&(o(),_(()=>{h()},Po)))},M=()=>{i=!1},N=()=>{i=!0,o(),s(M,100)},E=()=>{u(mt)};return document.body.addEventListener("mouseenter",w,{passive:!0,capture:!0}),document.body.addEventListener("mousemove",E,{passive:!0,capture:!1}),document.body.addEventListener("mouseleave",y,{passive:!0,capture:!0}),document.addEventListener("scroll",N,{passive:!0,capture:!0}),()=>{document.body.removeEventListener("mouseenter",w),document.body.removeEventListener("mousemove",E),document.body.removeEventListener("mouseleave",y),document.removeEventListener("scroll",N)}},[v,_,s,o,f,u,d,r,c]),e.jsx(xt,{rootClose:!0,onHide:p,show:t,target:a,placement:"bottom-start",flip:!0,offset:Io,popperConfig:Fo,children:({props:i})=>e.jsx("div",{...i,className:"hover-card-controller",children:e.jsx(Gt,{accountId:n,ref:g})})})},Do=D({close:{id:"lightbox.close",defaultMessage:"Close"}}),Ho=({accountId:t,statusId:d,onClose:n})=>{const r=A(c=>c.accounts.get(t)),a=q();return r?e.jsxs("div",{className:"picture-in-picture__header",children:[e.jsxs(W,{to:`/@${r.get("acct")}/${d}`,className:"picture-in-picture__header__account",children:[e.jsx(Te,{account:r,size:36}),e.jsx(Tt,{account:r})]}),e.jsx(bt,{icon:"times",iconComponent:Gr,onClick:n,title:a.formatMessage(Do.close)})]}):null},Bo=()=>{const t=$(),d=j.useCallback(()=>{t(tn())},[t]),n=A(i=>i.picture_in_picture);if(n.type===null)return null;const{type:r,src:a,currentTime:c,accountId:g,statusId:_,volume:f,muted:v,poster:o,backgroundColor:u,foregroundColor:s,accentColor:m}=n;if(!a)return null;let p;switch(r){case"video":p=e.jsx(rn,{src:a,startTime:c,startVolume:f,startMuted:v,startPlaying:!0,alwaysVisible:!0});break;case"audio":p=e.jsx(nn,{src:a,startTime:c,startVolume:f,startMuted:v,startPlaying:!0,poster:o,backgroundColor:u,foregroundColor:s,accentColor:m})}return e.jsxs("div",{className:"picture-in-picture",children:[e.jsx(Ho,{accountId:g,statusId:_,onClose:d}),p,e.jsx(Br,{statusId:_,onClose:d})]})},Ut=t=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},j.createElement("path",{d:"M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"})),K=D({home:{id:"tabs_bar.home",defaultMessage:"Home"},search:{id:"tabs_bar.search",defaultMessage:"Search"},publish:{id:"tabs_bar.publish",defaultMessage:"New Post"},notifications:{id:"tabs_bar.notifications",defaultMessage:"Notifications"},menu:{id:"tabs_bar.menu",defaultMessage:"Menu"}}),ce=({to:t,icon:d,activeIcon:n,title:r})=>{const a=nr(t);return e.jsx(rr,{className:"ui__navigation-bar__item",activeClassName:"active",to:t,"aria-label":r,children:a&&n?n:d})},Go=()=>{const t=A($t),d=q();return e.jsx(ce,{to:"/notifications",icon:e.jsx(V,{id:"bell",icon:Mt,count:t,className:""}),activeIcon:e.jsx(V,{id:"bell",icon:Ft,count:t,className:""}),title:d.formatMessage(K.notifications)})},Uo=()=>{const t=$(),d=A(r=>r.server.getIn(["server","registrations","url"],null)??"/auth/sign_up"),n=j.useCallback(()=>{t(me({modalType:"CLOSED_REGISTRATIONS",modalProps:{}}))},[t]);if(j.useEffect(()=>{t(Fe())},[t]),le)return e.jsx("div",{className:"ui__navigation-bar__sign-up",children:e.jsx("a",{href:le,"data-method":"post",className:"button button--block button-tertiary",children:e.jsx(k,{id:"sign_in_banner.sso_redirect",defaultMessage:"Login or Register"})})});{let r;return wt?r=e.jsx("a",{href:d,className:"button",children:e.jsx(k,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})}):r=e.jsx("button",{className:"button",onClick:n,children:e.jsx(k,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})}),e.jsxs("div",{className:"ui__navigation-bar__sign-up",children:[r,e.jsx("a",{href:"/auth/sign_in",className:"button button-tertiary",children:e.jsx(k,{id:"sign_in_banner.sign_in",defaultMessage:"Login"})})]})}},zo=()=>{const{signedIn:t}=de(),d=$(),n=A(c=>c.navigation.open),r=q(),a=j.useCallback(()=>{d(on())},[d]);return e.jsxs("div",{className:"ui__navigation-bar",children:[!t&&e.jsx(Uo,{}),e.jsxs("div",{className:z("ui__navigation-bar__items",{active:t}),children:[t&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{title:r.formatMessage(K.home),to:"/home",icon:e.jsx(B,{id:"",icon:Ut}),activeIcon:e.jsx(B,{id:"",icon:Pt})}),e.jsx(ce,{title:r.formatMessage(K.search),to:"/explore",icon:e.jsx(B,{id:"",icon:zr})}),e.jsx(ce,{title:r.formatMessage(K.publish),to:"/publish",icon:e.jsx(B,{id:"",icon:Oe})}),e.jsx(Go,{})]}),e.jsx("button",{className:z("ui__navigation-bar__item",{active:n}),onClick:a,"aria-label":r.formatMessage(K.menu),children:e.jsx(B,{id:"",icon:Ur})})]})]})},Wo=({active:t,onClose:d})=>{const n=j.useCallback(c=>{t&&c.key==="Escape"&&(c.preventDefault(),c.stopPropagation(),d())},[t,d]);j.useEffect(()=>(window.addEventListener("keyup",n,!1),()=>{window.removeEventListener("keyup",n)}),[n]);const r=ke({from:{opacity:0},to:{opacity:1},reverse:!t}),a=ke({from:{transform:"scale(0.95)"},to:{transform:"scale(1)"},reverse:!t,config:sn.wobbly});return e.jsx(Ee.div,{className:"upload-area",style:{...r,visibility:t?"visible":"hidden"},children:e.jsxs("div",{className:"upload-area__drop",children:[e.jsx(Ee.div,{className:"upload-area__background",style:a}),e.jsx("div",{className:"upload-area__content",children:e.jsx(k,{id:"upload_area.title",defaultMessage:"Drag & drop to upload"})})]})})},je=D({browseHashtag:{id:"hashtag.browse",defaultMessage:"Browse posts in #{hashtag}"},browseHashtagFromAccount:{id:"hashtag.browse_from_account",defaultMessage:"Browse posts from @{name} in #{hashtag}"},muteHashtag:{id:"hashtag.mute",defaultMessage:"Mute #{hashtag}"}}),Vo=[5,5],Zo={strategy:"fixed"},Qo=t=>t?t.matches("[data-menu-hashtag]"):!1,Ko=()=>{const t=q(),[d,n]=j.useState(!1),[{accountId:r,hashtag:a},c]=j.useState({}),g=j.useRef(null),_=he(),f=A(u=>r?u.accounts.get(r):void 0);j.useEffect(()=>{n(!1),g.current=null},[n,_]),j.useEffect(()=>{const u=s=>{const m=s.target.closest("a");if(s.button!==0||s.ctrlKey||s.metaKey||!Qo(m))return;const p=m.text.replace(/^#/,""),i=m.getAttribute("data-menu-hashtag");!p||!i||(s.preventDefault(),s.stopPropagation(),g.current=m,n(!0),c({hashtag:p,accountId:i}))};return document.addEventListener("click",u,{capture:!0}),()=>{document.removeEventListener("click",u)}},[c,n]);const v=j.useCallback(()=>{n(!1),g.current=null},[n]),o=j.useMemo(()=>[{text:t.formatMessage(je.browseHashtag,{hashtag:a}),to:`/tags/${a}`},{text:t.formatMessage(je.browseHashtagFromAccount,{hashtag:a,name:f==null?void 0:f.username}),to:`/@${f==null?void 0:f.acct}/tagged/${a}`},null,{text:t.formatMessage(je.muteHashtag,{hashtag:a}),href:"/filters",dangerous:!0}],[t,a,f]);return d?e.jsx(xt,{show:d,offset:Vo,placement:"bottom",flip:!0,target:g,popperConfig:Zo,children:({props:u,arrowProps:s,placement:m})=>e.jsx("div",{...u,children:e.jsxs("div",{className:`dropdown-animation dropdown-menu ${m}`,children:[e.jsx("div",{className:`dropdown-menu__arrow ${m}`,...s}),e.jsx(dr,{items:o,onClose:v,openedViaKeyboard:!1})]})})}):null},zt=t=>e.jsxs(Kr,{children:[e.jsx(Vr,{...t}),e.jsx("div",{className:"scrollable"})]}),Jo=()=>{const t=A(d=>d.meta.get("layout"));return{singleColumn:t==="single-column"||t==="mobile",layout:t}},Xo=D({aboutActiveUsers:{id:"server_banner.about_active_users",defaultMessage:"People using this server during the last 30 days (Monthly Active Users)"}}),Yo=t=>({server:t.getIn(["server","server"])});class es extends j.PureComponent{componentDidMount(){const{dispatch:d}=this.props;d(Fe())}render(){const{server:d,intl:n}=this.props,r=d.get("isLoading");return e.jsxs("div",{className:"server-banner",children:[e.jsx("div",{className:"server-banner__introduction",children:e.jsx(k,{id:"server_banner.is_one_of_many",defaultMessage:"{domain} is one of the many independent Mastodon servers you can use to participate in the fediverse.",values:{domain:e.jsx("strong",{children:J}),mastodon:e.jsx("a",{href:"https://joinmastodon.org",target:"_blank",rel:"noopener",children:"Mastodon"})}})}),e.jsx(W,{to:"/about",children:e.jsx(Jr,{blurhash:d.getIn(["thumbnail","blurhash"]),src:d.getIn(["thumbnail","url"]),className:"server-banner__hero"})}),e.jsx("div",{className:"server-banner__description",children:r?e.jsxs(e.Fragment,{children:[e.jsx(Z,{width:"100%"}),e.jsx("br",{}),e.jsx(Z,{width:"100%"}),e.jsx("br",{}),e.jsx(Z,{width:"70%"})]}):d.get("description")}),e.jsxs("div",{className:"server-banner__meta",children:[e.jsxs("div",{className:"server-banner__meta__column",children:[e.jsx("h4",{children:e.jsx(k,{id:"server_banner.administered_by",defaultMessage:"Administered by:"})}),e.jsx(qt,{id:d.getIn(["contact","account","id"]),size:36,minimal:!0})]}),e.jsxs("div",{className:"server-banner__meta__column",children:[e.jsx("h4",{children:e.jsx(k,{id:"server_banner.server_stats",defaultMessage:"Server stats:"})}),r?e.jsxs(e.Fragment,{children:[e.jsx("strong",{className:"server-banner__number",children:e.jsx(Z,{width:"10ch"})}),e.jsx("br",{}),e.jsx("span",{className:"server-banner__number-label",children:e.jsx(Z,{width:"5ch"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{className:"server-banner__number",children:e.jsx(Ne,{value:d.getIn(["usage","users","active_month"])})}),e.jsx("br",{}),e.jsx("span",{className:"server-banner__number-label",title:n.formatMessage(Xo.aboutActiveUsers),children:e.jsx(k,{id:"server_banner.active_users",defaultMessage:"active users"})})]})]})]})]})}}const ts=$e(Yo)(_t(es)),ns=()=>{const t=$(),d=j.useCallback(()=>{t(an(!0))},[t]),{signedIn:n}=de(),r=A(c=>{const g=c.compose.get("mounted");return typeof g=="number"?g>1:!1});j.useEffect(()=>(t(cn()),()=>{t(ln())}),[t]);const{singleColumn:a}=Jo();return e.jsxs("div",{className:"compose-panel",onFocus:d,children:[e.jsx(Dt,{singleColumn:a}),!n&&e.jsxs(e.Fragment,{children:[e.jsx(ts,{}),e.jsx("div",{className:"flex-spacer"})]}),n&&!r&&e.jsx(Xr,{singleColumn:!0}),n&&r&&e.jsx("div",{className:"compose-form"}),e.jsx(Yr,{multiColumn:!a})]})},rs=()=>e.jsx("div",{className:"drawer",children:e.jsx("div",{className:"drawer__pager",children:e.jsx("div",{className:"drawer__inner"})})}),os=t=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},j.createElement("path",{d:"M160-80v-560q0-33 23.5-56.5T240-720h320q33 0 56.5 23.5T640-640v560L400-200 160-80Zm80-121 160-86 160 86v-439H240v439Zm480-39v-560H280v-80h440q33 0 56.5 23.5T800-800v560h-80ZM240-640h320-320Z"})),ss=t=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},j.createElement("path",{d:"m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"})),as=()=>{const t=A(c=>Ge?c.accounts.get(Ge):void 0),d=A(c=>Ue?c.accounts.get(Ue):void 0),n=$(),r=j.useCallback(c=>(c.preventDefault(),c.stopPropagation(),n(me({modalType:"CONFIRM_LOG_OUT",modalProps:{}})),!1),[n]),a=e.jsxs(W,{to:`/@${t==null?void 0:t.acct}`,children:[t==null?void 0:t.acct,"@",J]});return e.jsxs("div",{className:"sign-in-banner",children:[e.jsx("p",{children:d?e.jsx(k,{id:"moved_to_account_banner.text",defaultMessage:"Your account {disabledAccount} is currently disabled because you moved to {movedToAccount}.",values:{disabledAccount:a,movedToAccount:e.jsx(W,{to:`/@${d.acct}`,children:d.acct.includes("@")?d.acct:`${d.acct}@${J}`})}}):e.jsx(k,{id:"disabled_account_banner.text",defaultMessage:"Your account {disabledAccount} is currently disabled.",values:{disabledAccount:a}})}),e.jsx("a",{href:"/auth/edit",className:"button button--block",children:e.jsx(k,{id:"disabled_account_banner.account_settings",defaultMessage:"Account settings"})}),e.jsx("button",{type:"button",className:"button button--block button-tertiary",onClick:r,children:e.jsx(k,{id:"confirmations.logout.confirm",defaultMessage:"Log out"})})]})},is=t=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},j.createElement("path",{d:"M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"})),cs=t=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},j.createElement("path",{d:"M480-528 296-344l-56-56 240-240 240 240-56 56-184-184Z"})),Wt=({children:t,to:d,icon:n,iconComponent:r,activeIconComponent:a,title:c,collapseTitle:g,expandTitle:_,loading:f})=>{const[v,o]=j.useState(!1),u=j.useId(),s=j.useCallback(()=>{o(m=>!m)},[o]);return e.jsxs("div",{className:"navigation-panel__list-panel",children:[e.jsxs("div",{className:"navigation-panel__list-panel__header",children:[e.jsx(R,{transparent:!0,to:d,icon:n,iconComponent:r,activeIconComponent:a,text:c,id:`${u}-title`}),(f||t.length>0)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"navigation-panel__list-panel__header__sep"}),e.jsx(bt,{icon:"down",expanded:v,iconComponent:f?It:v?cs:is,title:v?g:_,onClick:s,"aria-controls":`${u}-content`})]})]}),t.length>0&&v&&e.jsx("div",{className:"navigation-panel__list-panel__items",role:"region",id:`${u}-content`,"aria-labelledby":`${u}-title`,children:t})]})},Ce=D({followedTags:{id:"navigation_bar.followed_tags",defaultMessage:"Followed hashtags"},expand:{id:"navigation_panel.expand_followed_tags",defaultMessage:"Expand followed hashtags menu"},collapse:{id:"navigation_panel.collapse_followed_tags",defaultMessage:"Collapse followed hashtags menu"}}),ls=()=>{const t=q(),[d,n]=j.useState([]),[r,a]=j.useState(!1);return j.useEffect(()=>{a(!0),co(void 0,4).then(({tags:c})=>(n(c),a(!1),"")).catch(()=>{a(!1)})},[a,n]),e.jsx(Wt,{to:"/followed_tags",icon:"hashtag",iconComponent:Xe,title:t.formatMessage(Ce.followedTags),collapseTitle:t.formatMessage(Ce.collapse),expandTitle:t.formatMessage(Ce.expand),loading:r,children:d.map(c=>e.jsx(R,{icon:"hashtag",iconComponent:Xe,text:`#${c.name}`,to:`/tags/${c.name}`,transparent:!0},c.name))})},ht=t=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},j.createElement("path",{d:"M320-280q17 0 28.5-11.5T360-320q0-17-11.5-28.5T320-360q-17 0-28.5 11.5T280-320q0 17 11.5 28.5T320-280Zm0-160q17 0 28.5-11.5T360-480q0-17-11.5-28.5T320-520q-17 0-28.5 11.5T280-480q0 17 11.5 28.5T320-440Zm0-160q17 0 28.5-11.5T360-640q0-17-11.5-28.5T320-680q-17 0-28.5 11.5T280-640q0 17 11.5 28.5T320-600Zm120 320h240v-80H440v80Zm0-160h240v-80H440v80Zm0-160h240v-80H440v80ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Z"})),Se=D({lists:{id:"navigation_bar.lists",defaultMessage:"Lists"},expand:{id:"navigation_panel.expand_lists",defaultMessage:"Expand list menu"},collapse:{id:"navigation_panel.collapse_lists",defaultMessage:"Collapse list menu"}}),us=()=>{const t=q(),d=$(),n=A(c=>lo(c)),[r,a]=j.useState(!1);return j.useEffect(()=>{a(!0),d(un()).then(()=>(a(!1),""))},[d,a]),e.jsx(Wt,{to:"/lists",icon:"list-ul",iconComponent:Ye,activeIconComponent:ht,title:t.formatMessage(Se.lists),collapseTitle:t.formatMessage(Se.collapse),expandTitle:t.formatMessage(Se.expand),loading:r,children:n.map(c=>e.jsx(R,{icon:"list-ul",iconComponent:Ye,activeIconComponent:ht,text:c.title,to:`/lists/${c.id}`,transparent:!0},c.id))})},F=D({blocks:{id:"navigation_bar.blocks",defaultMessage:"Blocked users"},domainBlocks:{id:"navigation_bar.domain_blocks",defaultMessage:"Blocked domains"},mutes:{id:"navigation_bar.mutes",defaultMessage:"Muted users"},filters:{id:"navigation_bar.filters",defaultMessage:"Muted words"},administration:{id:"navigation_bar.administration",defaultMessage:"Administration"},moderation:{id:"navigation_bar.moderation",defaultMessage:"Moderation"},logout:{id:"navigation_bar.logout",defaultMessage:"Logout"},automatedDeletion:{id:"navigation_bar.automated_deletion",defaultMessage:"Automated post deletion"},accountSettings:{id:"navigation_bar.account_settings",defaultMessage:"Password and security"},importExport:{id:"navigation_bar.import_export",defaultMessage:"Import and export"},privacyAndReach:{id:"navigation_bar.privacy_and_reach",defaultMessage:"Privacy and reach"}}),ds=()=>{const t=q(),{permissions:d}=de(),n=$(),r=j.useMemo(()=>{const a=[{text:t.formatMessage(F.filters),href:"/filters"},{text:t.formatMessage(F.mutes),to:"/mutes"},{text:t.formatMessage(F.blocks),to:"/blocks"},{text:t.formatMessage(F.domainBlocks),to:"/domain_blocks"}];a.push(null,{href:"/settings/privacy",text:t.formatMessage(F.privacyAndReach)},{href:"/statuses_cleanup",text:t.formatMessage(F.automatedDeletion)},{href:"/auth/edit",text:t.formatMessage(F.accountSettings)},{href:"/settings/export",text:t.formatMessage(F.importExport)}),uo(d)&&a.push(null,{href:"/admin/reports",text:t.formatMessage(F.moderation)}),mo(d)&&a.push({href:"/admin/dashboard",text:t.formatMessage(F.administration)});const c=()=>{n(me({modalType:"CONFIRM_LOG_OUT",modalProps:{}}))};return a.push(null,{text:t.formatMessage(F.logout),action:c}),a},[t,n,d]);return e.jsx(mr,{items:r,children:e.jsxs("button",{className:"column-link column-link--transparent",children:[e.jsx(B,{id:"",icon:hr,className:"column-link__icon"}),e.jsx(k,{id:"navigation_bar.more",defaultMessage:"More"})]})})},ms=()=>{const t=$(),d=j.useCallback(()=>t(me({modalType:"CLOSED_REGISTRATIONS",modalProps:{}})),[t]);let n;const r=A(a=>a.server.getIn(["server","registrations","url"],null)??"/auth/sign_up");return le?e.jsxs("div",{className:"sign-in-banner",children:[e.jsx("p",{children:e.jsx("strong",{children:e.jsx(k,{id:"sign_in_banner.mastodon_is",defaultMessage:"Mastodon is the best way to keep up with what's happening."})})}),e.jsx("p",{children:e.jsx(k,{id:"sign_in_banner.follow_anyone",defaultMessage:"Follow anyone across the fediverse and see it all in chronological order. No algorithms, ads, or clickbait in sight."})}),e.jsx("a",{href:le,"data-method":"post",className:"button button--block button-tertiary",children:e.jsx(k,{id:"sign_in_banner.sso_redirect",defaultMessage:"Login or Register"})})]}):(wt?n=e.jsx("a",{href:r,className:"button button--block",children:e.jsx(k,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})}):n=e.jsx("button",{className:"button button--block",onClick:d,children:e.jsx(k,{id:"sign_in_banner.create_account",defaultMessage:"Create account"})}),e.jsxs("div",{className:"sign-in-banner",children:[e.jsx("p",{children:e.jsx("strong",{children:e.jsx(k,{id:"sign_in_banner.mastodon_is",defaultMessage:"Mastodon is the best way to keep up with what's happening."})})}),e.jsx("p",{children:e.jsx(k,{id:"sign_in_banner.follow_anyone",defaultMessage:"Follow anyone across the fediverse and see it all in chronological order. No algorithms, ads, or clickbait in sight."})}),n,e.jsx("a",{href:"/auth/sign_in",className:"button button--block button-tertiary",children:e.jsx(k,{id:"sign_in_banner.sign_in",defaultMessage:"Login"})})]}))},I=D({home:{id:"tabs_bar.home",defaultMessage:"Home"},notifications:{id:"tabs_bar.notifications",defaultMessage:"Notifications"},explore:{id:"explore.title",defaultMessage:"Trending"},firehose:{id:"column.firehose",defaultMessage:"Live feeds"},direct:{id:"navigation_bar.direct",defaultMessage:"Private mentions"},favourites:{id:"navigation_bar.favourites",defaultMessage:"Favorites"},bookmarks:{id:"navigation_bar.bookmarks",defaultMessage:"Bookmarks"},preferences:{id:"navigation_bar.preferences",defaultMessage:"Preferences"},followsAndFollowers:{id:"navigation_bar.follows_and_followers",defaultMessage:"Follows and followers"},about:{id:"navigation_bar.about",defaultMessage:"About"},search:{id:"navigation_bar.search",defaultMessage:"Search"},searchTrends:{id:"navigation_bar.search_trends",defaultMessage:"Search / Trending"},advancedInterface:{id:"navigation_bar.advanced_interface",defaultMessage:"Open in advanced web interface"},openedInClassicInterface:{id:"navigation_bar.opened_in_classic_interface",defaultMessage:"Posts, accounts, and other specific pages are opened by default in the classic web interface."},followRequests:{id:"navigation_bar.follow_requests",defaultMessage:"Follow requests"},logout:{id:"navigation_bar.logout",defaultMessage:"Logout"},compose:{id:"tabs_bar.publish",defaultMessage:"New Post"}}),hs=()=>{const t=A($t),d=q();return e.jsx(R,{transparent:!0,to:"/notifications",icon:e.jsx(V,{id:"bell",icon:Mt,count:t,className:"column-link__icon"}),activeIcon:e.jsx(V,{id:"bell",icon:Ft,count:t,className:"column-link__icon"}),text:d.formatMessage(I.notifications)},"notifications")},ps=()=>{const t=q(),d=A(r=>{var a;return((a=r.user_lists.getIn(["follow_requests","items"]))==null?void 0:a.size)??0}),n=$();return j.useEffect(()=>{n(fn())},[n]),d===0?null:e.jsx(R,{transparent:!0,to:"/follow_requests",icon:e.jsx(V,{id:"user-plus",icon:oo,count:d,className:"column-link__icon"}),activeIcon:e.jsx(V,{id:"user-plus",icon:ro,count:d,className:"column-link__icon"}),text:t.formatMessage(I.followRequests)})},fs=()=>H?e.jsx("div",{className:"navigation-bar",children:e.jsx(qt,{id:H,minimal:!0,size:36})}):null,gs=(t,{pathname:d})=>!!t||d.startsWith("/public"),Me=284,vs=()=>{const t=q(),{signedIn:d,disabledAccountId:n}=de(),r=A(b=>b.navigation.open),a=$(),c=Je("openable"),g=Je("full"),_=he(),f=j.useRef(null);j.useEffect(()=>{a(Y())},[a,_]),j.useEffect(()=>{const b=h=>{f.current&&h.target===f.current&&a(Y())},l=h=>{h.key==="Escape"&&a(Y())};return document.addEventListener("click",b),document.addEventListener("keyup",l),()=>{document.removeEventListener("click",b),document.removeEventListener("keyup",l)}},[a]);const v=getComputedStyle(document.body).direction!=="rtl",o=v?Me:-Me,[{x:u},s]=ke(()=>({x:r?0:o,onRest:{x({value:b}){b===0?a(dn()):(v?b>0:b<0)&&a(Y())}}}),[r]),m=eo(({last:b,offset:[l],velocity:[h],direction:[w],cancel:y})=>{const M=v?w:-w,N=v?l:-l;if(N<-70&&y(),b){const L=N>Me/2,T=h>.5&&M>0;L||T?s.start({x:o}):s.start({x:0})}else s.start({x:l,immediate:!0})},{from:()=>[u.get(),0],filterTaps:!0,bounds:v?{left:0}:{right:0},rubberband:!0}),p=j.useRef();j.useEffect(()=>{var b;if(r){const l=document.querySelector(".navigation-panel__menu .column-link");p.current=document.activeElement,l==null||l.focus()}else(b=p.current)==null||b.focus()},[r]);let i;mn&&(i=e.jsxs("div",{className:"switch-to-advanced",children:[t.formatMessage(I.openedInClassicInterface)," ",e.jsx("a",{href:`/deck${_.pathname}`,className:"switch-to-advanced__toggle",children:t.formatMessage(I.advancedInterface)})]}));const x=c&&r;return e.jsx("div",{className:z("columns-area__panels__pane columns-area__panels__pane--start columns-area__panels__pane--navigational",{"columns-area__panels__pane--overlay":x}),ref:f,children:e.jsx(Ee.div,{className:"columns-area__panels__pane__inner",...m(),style:c?{x:u}:void 0,children:e.jsxs("div",{className:"navigation-panel",children:[e.jsx("div",{className:"navigation-panel__logo",children:e.jsx(W,{to:"/",className:"column-link column-link--logo",children:e.jsx(ao,{})})}),g&&e.jsx(Dt,{singleColumn:!0}),e.jsx(fs,{}),i&&e.jsx("div",{className:"navigation-panel__banner",children:i}),e.jsxs("div",{className:"navigation-panel__menu",children:[d&&e.jsxs(e.Fragment,{children:[e.jsx(R,{to:"/publish",icon:"plus",iconComponent:Oe,activeIconComponent:Oe,text:t.formatMessage(I.compose),className:"button navigation-panel__compose-button"}),e.jsx(R,{transparent:!0,to:"/home",icon:"home",iconComponent:Ut,activeIconComponent:Pt,text:t.formatMessage(I.home)})]}),jt&&e.jsx(R,{transparent:!0,to:"/explore",icon:"explore",iconComponent:so,text:t.formatMessage(I.explore)}),(d||Wn)&&e.jsx(R,{transparent:!0,to:"/public/local",icon:"globe",iconComponent:pr,isActive:gs,text:t.formatMessage(I.firehose)}),d&&e.jsxs(e.Fragment,{children:[e.jsx(hs,{}),e.jsx(ps,{}),e.jsx("hr",{}),e.jsx(us,{}),e.jsx(ls,{}),e.jsx(R,{transparent:!0,to:"/favourites",icon:"star",iconComponent:pn,activeIconComponent:hn,text:t.formatMessage(I.favourites)}),e.jsx(R,{transparent:!0,to:"/bookmarks",icon:"bookmarks",iconComponent:os,activeIconComponent:to,text:t.formatMessage(I.bookmarks)}),e.jsx(R,{transparent:!0,to:"/conversations",icon:"at",iconComponent:fr,text:t.formatMessage(I.direct)}),e.jsx("hr",{}),e.jsx(R,{transparent:!0,href:"/settings/preferences",icon:"cog",iconComponent:ss,text:t.formatMessage(I.preferences)}),e.jsx(ds,{})]}),e.jsx("div",{className:"navigation-panel__legal",children:e.jsx(R,{transparent:!0,to:"/about",icon:"ellipsis-h",iconComponent:no,text:t.formatMessage(I.about)})}),!d&&e.jsxs("div",{className:"navigation-panel__sign-in-banner",children:[e.jsx("hr",{}),n?e.jsx(as,{}):e.jsx(ms,{})]})]}),e.jsx("div",{className:"flex-spacer"}),e.jsx(io,{})]})})})},_s={COMPOSE:Rt,HOME:Ot,NOTIFICATIONS:At,PUBLIC:We,REMOTE:We,COMMUNITY:gr,HASHTAG:Ae,DIRECT:Lt,FAVOURITES:Nt,BOOKMARKS:Et,LIST:Le,DIRECTORY:kt},xs=()=>{const{setTabsBarElement:t}=Zr(),d=j.useCallback(n=>{n&&t(n)},[t]);return e.jsx("div",{id:"tabs-bar__portal",ref:d})};class Vt extends gn{constructor(){super(...arguments);C(this,"mediaQuery","matchMedia"in window&&window.matchMedia("(max-width: 1174px)"));C(this,"state",{renderComposePanel:!(this.mediaQuery&&this.mediaQuery.matches)});C(this,"handleLayoutChange",n=>{this.setState({renderComposePanel:!n.matches})});C(this,"setRef",n=>{this.node=n});C(this,"renderLoading",n=>()=>n==="COMPOSE"?e.jsx(rs,{}):e.jsx(zt,{multiColumn:!0}));C(this,"renderError",n=>e.jsx(ue,{multiColumn:!0,errorType:"network",...n}))}componentDidMount(){this.mediaQuery&&(this.mediaQuery.addEventListener?this.mediaQuery.addEventListener("change",this.handleLayoutChange):this.mediaQuery.addListener(this.handleLayoutChange),this.setState({renderComposePanel:!this.mediaQuery.matches})),this.isRtlLayout=document.getElementsByTagName("body")[0].classList.contains("rtl")}componentWillUnmount(){this.mediaQuery&&(this.mediaQuery.removeEventListener?this.mediaQuery.removeEventListener("change",this.handleLayoutChange):this.mediaQuery.removeListener(this.handleLayoutChange))}handleChildrenContentChange(){if(!this.props.singleColumn){const n=this.isRtlLayout?-1:1;Wr(this.node,(this.node.scrollWidth-window.innerWidth)*n)}}render(){const{columns:n,children:r,singleColumn:a,isModalOpen:c}=this.props,{renderComposePanel:g}=this.state;return a?e.jsxs("div",{className:"columns-area__panels",children:[e.jsx("div",{className:"columns-area__panels__pane columns-area__panels__pane--compositional",children:e.jsx("div",{className:"columns-area__panels__pane__inner",children:g&&e.jsx(ns,{})})}),e.jsxs("div",{className:"columns-area__panels__main",children:[e.jsx("div",{className:"tabs-bar__wrapper",children:e.jsx(xs,{})}),e.jsx("div",{className:"columns-area columns-area--mobile",children:r})]}),e.jsx(vs,{})]}):e.jsxs("div",{className:`columns-area ${c?"unscrollable":""}`,ref:this.setRef,children:[n.map(_=>{const f=_.get("params",null)===null?null:_.get("params").toJS(),v=f&&f.other?f.other:{};return e.jsx(Ct,{fetchComponent:_s[_.get("id")],loading:this.renderLoading(_.get("id")),error:this.renderError,children:o=>e.jsx(o,{columnId:_.get("uuid"),params:f,multiColumn:!0,...v})},_.get("uuid"))}),j.Children.map(r,_=>j.cloneElement(_,{multiColumn:!0}))]})}}C(Vt,"propTypes",{columns:vn.list.isRequired,isModalOpen:fe.bool.isRequired,singleColumn:fe.bool,children:fe.node});const bs=t=>({columns:t.getIn(["settings","columns"]),isModalOpen:!!t.get("modal").modalType}),ys=$e(bs,null,null,{forwardRef:!0})(Vt),ws=({multiColumn:t,children:d})=>{const n=he(),r=t&&n.pathname.startsWith("/deck")?{...n,pathname:n.pathname.slice(5)}:n;return e.jsx(or,{location:r,children:j.Children.map(d,a=>a?j.cloneElement(a,{multiColumn:t}):null)})};class S extends j.Component{constructor(){super(...arguments);C(this,"state",{hasError:!1,stacktrace:""});C(this,"renderComponent",({match:n})=>{const{component:r,content:a,multiColumn:c,componentParams:g}=this.props,{hasError:_,stacktrace:f}=this.state;return _?e.jsx(ue,{stacktrace:f,multiColumn:c,errorType:"error"}):e.jsx(Ct,{fetchComponent:r,loading:this.renderLoading,error:this.renderError,children:v=>e.jsx(v,{params:n.params,multiColumn:c,...g,children:a})})});C(this,"renderLoading",()=>{const{multiColumn:n}=this.props;return e.jsx(zt,{multiColumn:n})});C(this,"renderError",n=>e.jsx(ue,{...n,errorType:"network"}))}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(n){Bt.fromError(n).then(r=>{this.setState({stacktrace:n.toString()+`
`+r.map(a=>a.toString()).join(`
`)})}).catch(r=>{console.error(r)})}render(){const{component:n,content:r,...a}=this.props;return e.jsx(qe,{...a,render:this.renderComponent})}}C(S,"defaultProps",{componentParams:{}});const js=D({beforeUnload:{id:"ui.beforeunload",defaultMessage:"Your draft will be lost if you leave Mastodon."}}),Cs=t=>({layout:t.getIn(["meta","layout"]),isComposing:t.getIn(["compose","is_composing"]),hasComposingText:t.getIn(["compose","text"]).trim().length!==0,hasMediaAttachments:t.getIn(["compose","media_attachments"]).size>0,canUploadMore:!t.getIn(["compose","media_attachments"]).some(d=>["audio","video"].includes(d.get("type")))&&t.getIn(["compose","media_attachments"]).size<t.getIn(["server","server","configuration","statuses","max_media_attachments"]),firstLaunch:t.getIn(["settings","introductionVersion"],0)<Xn,newAccount:!t.getIn(["accounts",H,"note"])&&!t.getIn(["accounts",H,"bot"])&&t.getIn(["accounts",H,"following_count"],0)===0&&t.getIn(["accounts",H,"statuses_count"],0)===0,username:t.getIn(["accounts",H,"username"])}),Ss={help:"?",new:"n",search:["s","/"],forceNew:"option+n",toggleComposeSpoilers:"option+x",focusColumn:["1","2","3","4","5","6","7","8","9"],reply:"r",favourite:"f",boost:"b",mention:"m",open:["enter","o"],openProfile:"p",moveDown:["down","j"],moveUp:["up","k"],back:"backspace",goToHome:"g h",goToNotifications:"g n",goToLocal:"g l",goToFederated:"g t",goToDirect:"g d",goToStart:"g s",goToFavourites:"g f",goToPinned:"g p",goToProfile:"g u",goToBlocked:"g b",goToMuted:"g m",goToRequests:"g r",toggleHidden:"x",toggleSensitive:"h",openMedia:"e",onTranslate:"t"};class Ms extends j.PureComponent{constructor(){super(...arguments);C(this,"setRef",n=>{n&&(this.node=n)})}UNSAFE_componentWillMount(){this.props.singleColumn?(document.body.classList.toggle("layout-single-column",!0),document.body.classList.toggle("layout-multiple-columns",!1)):(document.body.classList.toggle("layout-single-column",!1),document.body.classList.toggle("layout-multiple-columns",!0))}componentDidUpdate(n){[this.props.location.pathname,"/"].includes(n.location.pathname)||this.node.handleChildrenContentChange(),n.singleColumn!==this.props.singleColumn&&(document.body.classList.toggle("layout-single-column",this.props.singleColumn),document.body.classList.toggle("layout-multiple-columns",!this.props.singleColumn))}render(){var f;const{children:n,singleColumn:r,forceOnboarding:a}=this.props,{signedIn:c}=this.props.identity,g=this.props.location.pathname;let _;return c?a?_=e.jsx(P,{from:"/",to:"/start",exact:!0}):r?_=e.jsx(P,{from:"/",to:"/home",exact:!0}):_=e.jsx(P,{from:"/",to:"/deck/getting-started",exact:!0}):Zn&&pe&&((f=X)!=null&&f.accounts[pe])?_=e.jsx(P,{from:"/",to:`/@${X.accounts[pe].username}`,exact:!0}):jt&&Qn?_=e.jsx(P,{from:"/",to:"/explore",exact:!0}):_=e.jsx(P,{from:"/",to:"/about",exact:!0}),e.jsx(Qr,{multiColumn:!r,children:e.jsx(ys,{ref:this.setRef,singleColumn:r,children:e.jsxs(ws,{children:[_,r?e.jsx(P,{from:"/deck",to:"/home",exact:!0}):null,r&&g.startsWith("/deck/")?e.jsx(P,{from:g,to:{...this.props.location,pathname:g.slice(5)}}):null,!r&&g==="/getting-started"?e.jsx(P,{from:"/getting-started",to:"/deck/getting-started",exact:!0}):null,!r&&g==="/home"?e.jsx(P,{from:"/home",to:"/deck/getting-started",exact:!0}):null,e.jsx(S,{path:"/getting-started",component:vr,content:n}),e.jsx(S,{path:"/keyboard-shortcuts",component:_r,content:n}),e.jsx(S,{path:"/about",component:xr,content:n}),e.jsx(S,{path:"/privacy-policy",component:br,content:n}),e.jsx(S,{path:"/terms-of-service/:date?",component:yr,content:n}),e.jsx(S,{path:["/home","/timelines/home"],component:Ot,content:n}),e.jsx(P,{from:"/timelines/public",to:"/public",exact:!0}),e.jsx(P,{from:"/timelines/public/local",to:"/public/local",exact:!0}),e.jsx(S,{path:"/public",exact:!0,component:ge,componentParams:{feedType:"public"},content:n}),e.jsx(S,{path:"/public/local",exact:!0,component:ge,componentParams:{feedType:"community"},content:n}),e.jsx(S,{path:"/public/remote",exact:!0,component:ge,componentParams:{feedType:"public:remote"},content:n}),e.jsx(S,{path:["/conversations","/timelines/direct"],component:Lt,content:n}),e.jsx(S,{path:"/tags/:id",component:Ae,content:n}),e.jsx(S,{path:"/links/:url",component:wr,content:n}),e.jsx(S,{path:"/lists/new",component:Ve,content:n}),e.jsx(S,{path:"/lists/:id/edit",component:Ve,content:n}),e.jsx(S,{path:"/lists/:id/members",component:jr,content:n}),e.jsx(S,{path:"/lists/:id",component:Le,content:n}),e.jsx(S,{path:"/notifications",component:At,content:n,exact:!0}),e.jsx(S,{path:"/notifications/requests",component:Cr,content:n,exact:!0}),e.jsx(S,{path:"/notifications/requests/:id",component:Sr,content:n,exact:!0}),e.jsx(S,{path:"/favourites",component:Nt,content:n}),e.jsx(S,{path:"/bookmarks",component:Et,content:n}),e.jsx(S,{path:"/pinned",component:Mr,content:n}),e.jsx(S,{path:["/start","/start/profile"],exact:!0,component:Tr,content:n}),e.jsx(S,{path:"/start/follows",component:kr,content:n}),e.jsx(S,{path:"/directory",component:kt,content:n}),e.jsx(S,{path:"/explore",component:Er,content:n}),e.jsx(S,{path:"/search",component:Nr,content:n}),e.jsx(S,{path:["/publish","/statuses/new"],component:Rt,content:n}),e.jsx(S,{path:["/@:acct","/accounts/:id"],exact:!0,component:ve,content:n}),e.jsx(S,{path:["/@:acct/featured","/accounts/:id/featured"],component:Lr,content:n}),e.jsx(S,{path:"/@:acct/tagged/:tagged?",exact:!0,component:ve,content:n}),e.jsx(S,{path:["/@:acct/with_replies","/accounts/:id/with_replies"],component:ve,content:n,componentParams:{withReplies:!0}}),e.jsx(S,{path:["/accounts/:id/followers","/users/:acct/followers","/@:acct/followers"],component:Ar,content:n}),e.jsx(S,{path:["/accounts/:id/following","/users/:acct/following","/@:acct/following"],component:Or,content:n}),e.jsx(S,{path:["/@:acct/media","/accounts/:id/media"],component:Rr,content:n}),e.jsx(S,{path:"/@:acct/:statusId",exact:!0,component:Ze,content:n}),e.jsx(S,{path:"/@:acct/:statusId/reblogs",component:Qe,content:n}),e.jsx(S,{path:"/@:acct/:statusId/favourites",component:Ke,content:n}),e.jsx(S,{path:"/timelines/tag/:id",component:Ae,content:n}),e.jsx(S,{path:"/timelines/list/:id",component:Le,content:n}),e.jsx(S,{path:"/statuses/:statusId",exact:!0,component:Ze,content:n}),e.jsx(S,{path:"/statuses/:statusId/reblogs",component:Qe,content:n}),e.jsx(S,{path:"/statuses/:statusId/favourites",component:Ke,content:n}),e.jsx(S,{path:"/follow_requests",component:Ir,content:n}),e.jsx(S,{path:"/blocks",component:Pr,content:n}),e.jsx(S,{path:"/domain_blocks",component:Fr,content:n}),e.jsx(S,{path:"/followed_tags",component:$r,content:n}),e.jsx(S,{path:"/mutes",component:qr,content:n}),e.jsx(S,{path:"/lists",component:Dr,content:n}),e.jsx(qe,{component:ue})]})})})}}class Ts extends j.PureComponent{constructor(){super(...arguments);C(this,"state",{draggingOver:!1});C(this,"handleBeforeUnload",n=>{const{intl:r,dispatch:a,isComposing:c,hasComposingText:g,hasMediaAttachments:_}=this.props;a(xn()),c&&(g||_)&&(n.preventDefault(),n.returnValue=r.formatMessage(js.beforeUnload))});C(this,"handleWindowFocus",()=>{this.props.dispatch(bn()),this.props.dispatch(yn({immediate:!0}))});C(this,"handleWindowBlur",()=>{this.props.dispatch(wn())});C(this,"handleDragEnter",n=>{n.preventDefault(),this.dragTargets||(this.dragTargets=[]),this.dragTargets.indexOf(n.target)===-1&&this.dragTargets.push(n.target),n.dataTransfer&&Array.from(n.dataTransfer.types).includes("Files")&&this.props.canUploadMore&&this.props.identity.signedIn&&this.setState({draggingOver:!0})});C(this,"handleDragOver",n=>{if(this.dataTransferIsText(n.dataTransfer))return!1;n.preventDefault(),n.stopPropagation();try{n.dataTransfer.dropEffect="copy"}catch{}return!1});C(this,"handleDrop",n=>{this.dataTransferIsText(n.dataTransfer)||(n.preventDefault(),this.setState({draggingOver:!1}),this.dragTargets=[],n.dataTransfer&&n.dataTransfer.files.length>=1&&this.props.canUploadMore&&this.props.identity.signedIn&&this.props.dispatch(jn(n.dataTransfer.files)))});C(this,"handleDragLeave",n=>{n.preventDefault(),n.stopPropagation(),this.dragTargets=this.dragTargets.filter(r=>r!==n.target&&this.node.contains(r)),!(this.dragTargets.length>0)&&this.setState({draggingOver:!1})});C(this,"dataTransferIsText",n=>n&&Array.from(n.types).filter(r=>r==="text/plain").length===1);C(this,"closeUploadModal",()=>{this.setState({draggingOver:!1})});C(this,"handleServiceWorkerPostMessage",({data:n})=>{n.type==="navigate"?this.props.history.push(n.path):console.warn("Unknown message type:",n.type)});C(this,"handleLayoutChange",Cn(()=>{this.props.dispatch(Sn())},500,{trailing:!0}));C(this,"handleResize",()=>{const n=Tn();n!==this.props.layout?(this.handleLayoutChange.cancel(),this.props.dispatch(Mn({layout:n}))):this.handleLayoutChange()});C(this,"setRef",n=>{this.node=n});C(this,"handleHotkeyNew",n=>{n.preventDefault();const r=this.node.querySelector(".autosuggest-textarea__textarea");r&&r.focus()});C(this,"handleHotkeySearch",n=>{n.preventDefault();const r=this.node.querySelector(".search__input");r&&r.focus()});C(this,"handleHotkeyForceNew",n=>{this.handleHotkeyNew(n),this.props.dispatch(An())});C(this,"handleHotkeyToggleComposeSpoilers",n=>{n.preventDefault(),this.props.dispatch(On())});C(this,"handleHotkeyFocusColumn",n=>{const r=n.key*1+1,a=this.node.querySelector(`.column:nth-child(${r})`);if(!a)return;const c=a.querySelector(".scrollable");if(c){const g=c.querySelector(".focusable");g&&(c.scrollTop>g.offsetTop&&g.scrollIntoView(!0),g.focus())}});C(this,"handleHotkeyBack",n=>{var a,c;n.preventDefault();const{history:r}=this.props;(c=(a=r.location)==null?void 0:a.state)!=null&&c.fromMastodon?r.goBack():r.push("/")});C(this,"setHotkeysRef",n=>{this.hotkeys=n});C(this,"handleHotkeyToggleHelp",()=>{this.props.location.pathname==="/keyboard-shortcuts"?this.props.history.goBack():this.props.history.push("/keyboard-shortcuts")});C(this,"handleHotkeyGoToHome",()=>{this.props.history.push("/home")});C(this,"handleHotkeyGoToNotifications",()=>{this.props.history.push("/notifications")});C(this,"handleHotkeyGoToLocal",()=>{this.props.history.push("/public/local")});C(this,"handleHotkeyGoToFederated",()=>{this.props.history.push("/public")});C(this,"handleHotkeyGoToDirect",()=>{this.props.history.push("/conversations")});C(this,"handleHotkeyGoToStart",()=>{this.props.history.push("/getting-started")});C(this,"handleHotkeyGoToFavourites",()=>{this.props.history.push("/favourites")});C(this,"handleHotkeyGoToPinned",()=>{this.props.history.push("/pinned")});C(this,"handleHotkeyGoToProfile",()=>{this.props.history.push(`/@${this.props.username}`)});C(this,"handleHotkeyGoToBlocked",()=>{this.props.history.push("/blocks")});C(this,"handleHotkeyGoToMuted",()=>{this.props.history.push("/mutes")});C(this,"handleHotkeyGoToRequests",()=>{this.props.history.push("/follow_requests")})}componentDidMount(){const{signedIn:n}=this.props.identity;window.addEventListener("focus",this.handleWindowFocus,!1),window.addEventListener("blur",this.handleWindowBlur,!1),window.addEventListener("beforeunload",this.handleBeforeUnload,!1),window.addEventListener("resize",this.handleResize,{passive:!0}),document.addEventListener("dragenter",this.handleDragEnter,!1),document.addEventListener("dragover",this.handleDragOver,!1),document.addEventListener("drop",this.handleDrop,!1),document.addEventListener("dragleave",this.handleDragLeave,!1),document.addEventListener("dragend",this.handleDragEnd,!1),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",this.handleServiceWorkerPostMessage),n&&(this.props.dispatch(kn()),this.props.dispatch(En()),this.props.dispatch(Nn()),this.props.dispatch(Ln()),setTimeout(()=>this.props.dispatch(Fe()),3e3)),this.hotkeys.__mousetrap__.stopCallback=(r,a)=>["TEXTAREA","SELECT","INPUT"].includes(a.tagName)}componentWillUnmount(){window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("beforeunload",this.handleBeforeUnload),window.removeEventListener("resize",this.handleResize),document.removeEventListener("dragenter",this.handleDragEnter),document.removeEventListener("dragover",this.handleDragOver),document.removeEventListener("drop",this.handleDrop),document.removeEventListener("dragleave",this.handleDragLeave),document.removeEventListener("dragend",this.handleDragEnd)}render(){const{draggingOver:n}=this.state,{children:r,isComposing:a,location:c,layout:g,firstLaunch:_,newAccount:f}=this.props,v={help:this.handleHotkeyToggleHelp,new:this.handleHotkeyNew,search:this.handleHotkeySearch,forceNew:this.handleHotkeyForceNew,toggleComposeSpoilers:this.handleHotkeyToggleComposeSpoilers,focusColumn:this.handleHotkeyFocusColumn,back:this.handleHotkeyBack,goToHome:this.handleHotkeyGoToHome,goToNotifications:this.handleHotkeyGoToNotifications,goToLocal:this.handleHotkeyGoToLocal,goToFederated:this.handleHotkeyGoToFederated,goToDirect:this.handleHotkeyGoToDirect,goToStart:this.handleHotkeyGoToStart,goToFavourites:this.handleHotkeyGoToFavourites,goToPinned:this.handleHotkeyGoToPinned,goToProfile:this.handleHotkeyGoToProfile,goToBlocked:this.handleHotkeyGoToBlocked,goToMuted:this.handleHotkeyGoToMuted,goToRequests:this.handleHotkeyGoToRequests};return e.jsx(Jn.HotKeys,{keyMap:Ss,handlers:v,ref:this.setHotkeysRef,attach:window,focused:!0,children:e.jsxs("div",{className:z("ui",{"is-composing":a}),ref:this.setRef,children:[e.jsx(Ms,{identity:this.props.identity,location:c,singleColumn:g==="mobile"||g==="single-column",forceOnboarding:_&&f,children:r}),e.jsx(zo,{}),g!=="mobile"&&e.jsx(Bo,{}),e.jsx(Yn,{}),!Vn&&e.jsx(qo,{}),e.jsx(Ko,{}),e.jsx(er,{className:"loading-bar"}),e.jsx(tr,{}),e.jsx(Wo,{active:n,onClose:this.closeUploadModal})]})})}}const ks=$e(Cs)(_t(sr(_n(Ts)))),pt=vt()?ze:`${ze} (Dev)`,Es=Rn(X);U.dispatch(Es);X.meta.me&&U.dispatch(In());class Ns extends j.PureComponent{constructor(){super(...arguments);C(this,"identity",Pn(X))}componentDidMount(){this.identity.signedIn&&(this.disconnect=U.dispatch(Gn()))}componentWillUnmount(){this.disconnect&&(this.disconnect(),this.disconnect=null)}shouldUpdateScroll(n,{location:r}){var a,c,g,_;return!((a=r.state)!=null&&a.mastodonModalKey&&((c=r.state)==null?void 0:c.mastodonModalKey)!==((_=(g=n==null?void 0:n.location)==null?void 0:g.state)==null?void 0:_.mastodonModalKey))}render(){return e.jsx(Fn.Provider,{value:this.identity,children:e.jsx(ho,{children:e.jsx($n,{store:U,children:e.jsxs(Ao,{children:[e.jsx(qn,{children:e.jsx(Bn,{shouldUpdateScroll:this.shouldUpdateScroll,children:e.jsx(qe,{path:"/",component:ks})})}),e.jsx(yt,{defaultTitle:pt,titleTemplate:`%s - ${pt}`})]})})})})}}var O=typeof performance<"u"&&performance,ft=O&&O.now?function(){return O.now()}:function(){return Date.now()};function ne(t){if(!t)throw new Error("name must be non-empty")}function Ls(t,d){for(var n=0,r=t.length,a;n<r;)a=n+r>>>1,t[a].startTime<d.startTime?n=a+1:r=a;t.splice(n,0,d)}var Re,Ie;if(O&&O.mark&&O.measure&&O.getEntriesByName&&O.getEntriesByType&&O.clearMarks&&O.clearMeasures)Re=function(t){ne(t),O.mark("start "+t)},Ie=function(t){ne(t),O.mark("end "+t);var d=O.measure(t,"start "+t,"end "+t);if(d)return d;var n=O.getEntriesByName(t);return n[n.length-1]};else{var gt={},As=[];Re=function(t){ne(t);var d=ft();gt["$"+t]=d},Ie=function(t){ne(t);var d=ft(),n=gt["$"+t];if(!n)throw new Error("no known mark: "+t);var r={startTime:n,name:t,duration:d-n,entryType:"measure"};return Ls(As,r),r}}function Os(t){Pe()&&Re(t)}function Rs(t){Pe()&&Ie(t)}function Is(){return Os("main()"),po(async()=>{const t=document.getElementById("mastodon");if(!t)throw new Error("Mount node not found");const d=JSON.parse(t.getAttribute("data-props")??"{}");if(Kn&&Dn.assign({skipAnimation:!0}),Jt.createRoot(t).render(e.jsx(Ns,{...d})),U.dispatch(Hn()),vt()&&H&&"serviceWorker"in navigator){const{Workbox:r}=await Be(async()=>{const{Workbox:g}=await import("../workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:g}},[]),a=new r(Pe()?"/packs-dev/dev-sw.js?dev-sw":"/sw.js",{type:"module",scope:"/"});let c;try{c=await a.register()}catch(g){console.error(g)}if(c&&"Notification"in window&&Notification.permission==="granted"){const g=await Be(()=>import("../push_notifications-index-EEFAVoaE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]));U.dispatch(g.register())}}Rs("main()")})}fo().then(Kt).then(Is).catch(t=>{console.error(t)});
//# sourceMappingURL=application-B_5mRGU_.js.map
