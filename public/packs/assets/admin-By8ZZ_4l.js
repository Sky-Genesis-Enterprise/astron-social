const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["admin_component-KkdqLpvy.js","client-wT6vtYO_.js","index-BdTwX--g.js","intl_provider-DvXl4eEi.js","load_locale-tOpKhmcM.js","Counter-B_UWCqqG.js","index-DizoKcfL.js","index-DwQAxx91.js","api-B2m7efUy.js","index-lj9VQs0f.js","initial_state-BP3UcUr4.js","ready-DpOgoWSg.js","skeleton-D9NbTYr9.js","Dimension-Dva9I8Z_.js","numbers-CGZQWBYL.js","ImpactReport-B2eEV7cA.js","message-UFwkQlnu.js","ReportReasonSelector-D1Q64ifo.js","Retention-DkRq0bhb.js","Trends-DEF4flaQ.js","hashtag-C8K46vBm.js","short_number-WomMu2iV.js"])))=>i.map(i=>d[i]);
import{_ as r,a as E,c as L,j as _}from"../client-wT6vtYO_.js";import{R as l}from"../rails-ujs.esm-DLwK8N9E.js";import{r as g}from"../ready-DpOgoWSg.js";const h=e=>{const n=e.value&&e.validity.valid,t=document.querySelector('input[type="datetime-local"]#announcement_ends_at');t&&(n?(t.classList.remove("optional"),t.required=!0,t.min=e.value):(t.classList.add("optional"),t.removeAttribute("required"),t.removeAttribute("min")))};l.delegate(document,'input[type="datetime-local"]#announcement_starts_at',"change",({target:e})=>{e instanceof HTMLInputElement&&h(e)});const d='.batch-checkbox input[type="checkbox"]',f=()=>{const e=document.querySelector(".batch-table__select-all");e==null||e.classList.add("active")},b=()=>{const e=document.querySelector(".batch-table__select-all"),n=document.querySelector("input#select_all_matching"),t=document.querySelector(".batch-table__select-all .selected"),o=document.querySelector(".batch-table__select-all .not-selected");e==null||e.classList.remove("active"),t==null||t.classList.remove("active"),o==null||o.classList.add("active"),n&&(n.value="0")};l.delegate(document,"#batch_checkbox_all","change",({target:e})=>{if(!(e instanceof HTMLInputElement))return;const n=document.querySelector(".batch-table__select-all");document.querySelectorAll(d).forEach(t=>{t.checked=e.checked}),n&&(e.checked?f():b())});l.delegate(document,".batch-table__select-all button","click",()=>{const e=document.querySelector("#select_all_matching");if(!e)return;const n=e.value==="1",t=document.querySelector(".batch-table__select-all .selected"),o=document.querySelector(".batch-table__select-all .not-selected");!t||!o||(n?(e.value="0",t.classList.remove("active"),o.classList.add("active")):(e.value="1",o.classList.remove("active"),t.classList.add("active")))});l.delegate(document,d,"change",()=>{const e=document.querySelector("input#batch_checkbox_all"),n=document.querySelector(".batch-table__select-all");if(e){const t=Array.from(document.querySelectorAll(d));e.checked=t.every(o=>o.checked),e.indeterminate=!e.checked&&t.some(o=>o.checked),n&&(e.checked?f():b())}});l.delegate(document,".filter-subset--with-select select","change",({target:e})=>{var n;e instanceof HTMLSelectElement&&((n=e.form)==null||n.submit())});const v=e=>{const n=document.querySelector(".input.with_label.domain_block_reject_media"),t=document.querySelector(".input.with_label.domain_block_reject_reports");n&&n instanceof HTMLElement&&(n.style.display=e.value==="suspend"?"none":"block"),t&&t instanceof HTMLElement&&(t.style.display=e.value==="suspend"?"none":"block")};l.delegate(document,"#domain_block_severity","change",({target:e})=>{e instanceof HTMLSelectElement&&v(e)});const y=e=>{var t,o,s,i,c,a;const n=document.querySelector("#form_admin_settings_bootstrap_timeline_accounts");n&&(n.disabled=!e.checked,e.checked?((t=n.parentElement)==null||t.classList.remove("disabled"),(s=(o=n.parentElement)==null?void 0:o.parentElement)==null||s.classList.remove("disabled")):((i=n.parentElement)==null||i.classList.add("disabled"),(a=(c=n.parentElement)==null?void 0:c.parentElement)==null||a.classList.add("disabled")))};l.delegate(document,"#form_admin_settings_enable_bootstrap_timeline_accounts","change",({target:e})=>{e instanceof HTMLInputElement&&y(e)});const S=e=>{const n=e.value==="approved";document.querySelectorAll(".form_admin_settings_registrations_mode .warning-hint").forEach(t=>{t.style.display=e.value==="open"?"inline":"none"}),document.querySelectorAll("input#form_admin_settings_require_invite_text").forEach(t=>{if(t.disabled=!n,n){let o=t;do o.classList.remove("disabled"),o=o.parentElement;while(o&&!o.classList.contains("fields-group"))}else{let o=t;do o.classList.add("disabled"),o=o.parentElement;while(o&&!o.classList.contains("fields-group"))}})},p=e=>{const n=new Date(e+"Z"),t=o=>o.toString().padStart(2,"0");return`${n.getFullYear()}-${t(n.getMonth()+1)}-${t(n.getDate())}T${t(n.getHours())}:${t(n.getMinutes())}`};function k(e){const t=new Date(e).toISOString();return t.slice(0,t.indexOf("T")+6)}l.delegate(document,"#form_admin_settings_registrations_mode","change",({target:e})=>{e instanceof HTMLSelectElement&&S(e)});async function A(e){const n=e.getAttribute("data-admin-component"),t=e.getAttribute("data-props");if(!t)return;const o=JSON.parse(t),{default:s}=await r(async()=>{const{default:a}=await import("../admin_component-KkdqLpvy.js");return{default:a}},__vite__mapDeps([0,1,2,3,4])),{default:i}=await E(Object.assign({"../mastodon/components/admin/Counter.jsx":()=>r(()=>import("../Counter-B_UWCqqG.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12])),"../mastodon/components/admin/Dimension.jsx":()=>r(()=>import("../Dimension-Dva9I8Z_.js"),__vite__mapDeps([13,1,2,8,9,10,11,12,14])),"../mastodon/components/admin/ImpactReport.jsx":()=>r(()=>import("../ImpactReport-B2eEV7cA.js"),__vite__mapDeps([15,1,2,6,8,9,10,11,12,16])),"../mastodon/components/admin/ReportReasonSelector.jsx":()=>r(()=>import("../ReportReasonSelector-D1Q64ifo.js"),__vite__mapDeps([17,1,2,6,8,9,10,11])),"../mastodon/components/admin/Retention.jsx":()=>r(()=>import("../Retention-DkRq0bhb.js"),__vite__mapDeps([18,1,2,6,8,9,10,11,14,16])),"../mastodon/components/admin/Trends.jsx":()=>r(()=>import("../Trends-DEF4flaQ.js"),__vite__mapDeps([19,1,2,6,8,9,10,11,20,21,14,16,7,12]))}),`../mastodon/components/admin/${n}.jsx`,5);L.createRoot(e).render(_.jsx(s,{children:_.jsx(i,{...o})}))}g(()=>{var i;const e=document.querySelector("select#domain_block_severity");e&&v(e);const n=document.querySelector("input#form_admin_settings_enable_bootstrap_timeline_accounts");n&&y(n);const t=document.querySelector("select#form_admin_settings_registrations_mode");t&&S(t);const o=document.querySelector("input#batch_checkbox_all");if(o){const c=Array.from(document.querySelectorAll(d));o.checked=c.every(a=>a.checked),o.indeterminate=!o.checked&&c.some(a=>a.checked)}(i=document.querySelector("a#add-instance-button"))==null||i.addEventListener("click",c=>{var m;const a=(m=document.querySelector('input[type="text"]#by_domain'))==null?void 0:m.value;if(a&&c.target instanceof HTMLAnchorElement){const u=new URL(c.target.href);u.searchParams.set("_domain",a),c.target.href=u.toString()}}),document.querySelectorAll('input[type="datetime-local"]').forEach(c=>{c.value&&(c.value=p(c.value)),c.placeholder&&(c.placeholder=p(c.placeholder))}),l.delegate(document,"form","submit",({target:c})=>{c instanceof HTMLFormElement&&c.querySelectorAll('input[type="datetime-local"]').forEach(a=>{a.value&&a.validity.valid&&(a.value=k(a.value))})});const s=document.querySelector('input[type="datetime-local"]#announcement_starts_at');s&&h(s),document.querySelectorAll("[data-admin-component]").forEach(c=>{A(c)})}).catch(e=>{throw e});
//# sourceMappingURL=admin-By8ZZ_4l.js.map
