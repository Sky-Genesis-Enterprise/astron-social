const h="a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",y={selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},T="select[data-remote], input[data-remote], textarea[data-remote]",d="form:not([data-turbo=true])",x="form:not([data-turbo=true]) input[type=submit], form:not([data-turbo=true]) input[type=image], form:not([data-turbo=true]) button[type=submit], form:not([data-turbo=true]) button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",I="input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",P="input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",et="input[name][type=file]:not([disabled])",w="a[data-disable-with], a[data-disable]",A="button[data-remote][data-disable-with], button[data-remote][data-disable]";let W=null;const N=()=>{const t=document.querySelector("meta[name=csp-nonce]");return W=t&&t.content},z=()=>W||N(),F=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,c=function(t,e){return e.exclude?F.call(t,e.selector)&&!F.call(t,e.exclude):F.call(t,e)},R="_ujsData",f=(t,e)=>t[R]?t[R][e]:void 0,u=function(t,e,n){return t[R]||(t[R]={}),t[R][e]=n},M=t=>Array.prototype.slice.call(document.querySelectorAll(t)),H=function(t){var e=!1;do{if(t.isContentEditable){e=!0;break}t=t.parentElement}while(t);return e},q=()=>{const t=document.querySelector("meta[name=csrf-token]");return t&&t.content},X=()=>{const t=document.querySelector("meta[name=csrf-param]");return t&&t.content},$=t=>{const e=q();if(e)return t.setRequestHeader("X-CSRF-Token",e)},B=()=>{const t=q(),e=X();if(t&&e)return M('form input[name="'+e+'"]').forEach(n=>n.value=t)},U={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},K=t=>{t=nt(t);var e=at(t,function(){const n=rt(e.response!=null?e.response:e.responseText,e.getResponseHeader("Content-Type"));return Math.floor(e.status/100)===2?typeof t.success=="function"&&t.success(n,e.statusText,e):typeof t.error=="function"&&t.error(n,e.statusText,e),typeof t.complete=="function"?t.complete(e,e.statusText):void 0});if(t.beforeSend&&!t.beforeSend(e,t))return!1;if(e.readyState===XMLHttpRequest.OPENED)return e.send(t.data)};var nt=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),t.type==="GET"&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),t.dataType in U||(t.dataType="*"),t.accept=U[t.dataType],t.dataType!=="*"&&(t.accept+=", */*; q=0.01"),t},at=function(t,e){const n=new XMLHttpRequest;return n.open(t.type,t.url,!0),n.setRequestHeader("Accept",t.accept),typeof t.data=="string"&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.crossDomain||(n.setRequestHeader("X-Requested-With","XMLHttpRequest"),$(n)),n.withCredentials=!!t.withCredentials,n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)return e(n)},n},rt=function(t,e){if(typeof t=="string"&&typeof e=="string"){if(e.match(/\bjson\b/))try{t=JSON.parse(t)}catch{}else if(e.match(/\b(?:java|ecma)script\b/)){const n=document.createElement("script");n.setAttribute("nonce",z()),n.text=t,document.head.appendChild(n).parentNode.removeChild(n)}else if(e.match(/\b(xml|html|svg)\b/)){const n=new DOMParser;e=e.replace(/;.+/,"");try{t=n.parseFromString(t,e)}catch{}}}return t};const ot=t=>t.href,_=function(t){const e=document.createElement("a");e.href=location.href;const n=document.createElement("a");try{return n.href=t,!((!n.protocol||n.protocol===":")&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch{return!0}};let G,{CustomEvent:v}=window;typeof v!="function"&&(v=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n},v.prototype=window.Event.prototype,{preventDefault:G}=v.prototype,v.prototype.preventDefault=function(){const t=G.call(this);return this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get(){return!0}}),t});const l=(t,e,n)=>{const i=new v(e,{bubbles:!0,cancelable:!0,detail:n});return t.dispatchEvent(i),!i.defaultPrevented},E=t=>{l(t.target,"ujs:everythingStopped"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},o=(t,e,n,i)=>t.addEventListener(n,function(r){let{target:a}=r;for(;a instanceof Element&&!c(a,e);)a=a.parentNode;a instanceof Element&&i.call(a,r)===!1&&(r.preventDefault(),r.stopPropagation())}),L=t=>Array.prototype.slice.call(t),O=(t,e)=>{let n=[t];c(t,"form")&&(n=L(t.elements));const i=[];return n.forEach(function(r){!r.name||r.disabled||c(r,"fieldset[disabled] *")||(c(r,"select")?L(r.options).forEach(function(a){a.selected&&i.push({name:r.name,value:a.value})}):(r.checked||["radio","checkbox","submit"].indexOf(r.type)===-1)&&i.push({name:r.name,value:r.value}))}),e&&i.push(e),i.map(function(r){return r.name?`${encodeURIComponent(r.name)}=${encodeURIComponent(r.value)}`:r}).join("&")},Q=(t,e)=>c(t,"form")?L(t.elements).filter(n=>c(n,e)):L(t.querySelectorAll(e)),it=t=>function(e){st(this,t)||E(e)},ct=(t,e)=>window.confirm(t);var st=function(t,e){let n;const i=t.getAttribute("data-confirm");if(!i)return!0;let r=!1;if(l(t,"confirm")){try{r=e.confirm(i,t)}catch{}n=l(t,"confirm:complete",[r])}return r&&n};const g=function(t){this.disabled&&E(t)},b=t=>{let e;if(t instanceof Event){if(mt(t))return;e=t.target}else e=t;if(!H(e)){if(c(e,w))return lt(e);if(c(e,A)||c(e,P))return V(e);if(c(e,d))return ft(e)}},C=t=>{const e=t instanceof Event?t.target:t;if(!H(e)){if(c(e,w))return ut(e);if(c(e,A)||c(e,I))return J(e);if(c(e,d))return dt(e)}};var ut=function(t){if(f(t,"ujs:disabled"))return;const e=t.getAttribute("data-disable-with");return e!=null&&(u(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e),t.addEventListener("click",E),u(t,"ujs:disabled",!0)},lt=function(t){const e=f(t,"ujs:enable-with");return e!=null&&(t.innerHTML=e,u(t,"ujs:enable-with",null)),t.removeEventListener("click",E),u(t,"ujs:disabled",null)},dt=t=>Q(t,I).forEach(J),J=function(t){if(f(t,"ujs:disabled"))return;const e=t.getAttribute("data-disable-with");return e!=null&&(c(t,"button")?(u(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e):(u(t,"ujs:enable-with",t.value),t.value=e)),t.disabled=!0,u(t,"ujs:disabled",!0)},ft=t=>Q(t,P).forEach(e=>V(e)),V=function(t){const e=f(t,"ujs:enable-with");return e!=null&&(c(t,"button")?t.innerHTML=e:t.value=e,u(t,"ujs:enable-with",null)),t.disabled=!1,u(t,"ujs:disabled",null)},mt=function(t){const e=t.detail?t.detail[0]:void 0;return e&&e.getResponseHeader("X-Xhr-Redirect")};const bt=t=>function(e){const n=this,i=n.getAttribute("data-method");if(!i||H(this))return;const r=t.href(n),a=q(),j=X(),m=document.createElement("form");let s=`<input name='_method' value='${i}' type='hidden' />`;j&&a&&!_(r)&&(s+=`<input name='${j}' value='${a}' type='hidden' />`),s+='<input type="submit" />',m.method="post",m.action=r,m.target=n.target,m.innerHTML=s,m.style.display="none",document.body.appendChild(m),m.querySelector('[type="submit"]').click(),E(e)},pt=function(t){const e=t.getAttribute("data-remote");return e!=null&&e!=="false"},ht=t=>function(e){let n,i,r;const a=this;if(!pt(a))return!0;if(!l(a,"ajax:before")||H(a))return l(a,"ajax:stopped"),!1;const j=a.getAttribute("data-with-credentials"),m=a.getAttribute("data-type")||"script";if(c(a,d)){const s=f(a,"ujs:submit-button");i=f(a,"ujs:submit-button-formmethod")||a.getAttribute("method")||"get",r=f(a,"ujs:submit-button-formaction")||a.getAttribute("action")||location.href,i.toUpperCase()==="GET"&&(r=r.replace(/\?.*$/,"")),a.enctype==="multipart/form-data"?(n=new FormData(a),s!=null&&n.append(s.name,s.value)):n=O(a,s),u(a,"ujs:submit-button",null),u(a,"ujs:submit-button-formmethod",null),u(a,"ujs:submit-button-formaction",null)}else c(a,y)||c(a,T)?(i=a.getAttribute("data-method"),r=a.getAttribute("data-url"),n=O(a,a.getAttribute("data-params"))):(i=a.getAttribute("data-method"),r=t.href(a),n=a.getAttribute("data-params"));K({type:i||"GET",url:r,data:n,dataType:m,beforeSend(s,tt){return l(a,"ajax:beforeSend",[s,tt])?l(a,"ajax:send",[s]):(l(a,"ajax:stopped"),!1)},success(...s){return l(a,"ajax:success",s)},error(...s){return l(a,"ajax:error",s)},complete(...s){return l(a,"ajax:complete",s)},crossDomain:_(r),withCredentials:j!=null&&j!=="false"}),E(e)},Y=function(t){const e=this,{form:n}=e;if(n)return e.name&&u(n,"ujs:submit-button",{name:e.name,value:e.value}),u(n,"ujs:formnovalidate-button",e.formNoValidate),u(n,"ujs:submit-button-formaction",e.getAttribute("formaction")),u(n,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},D=function(t){const e=this,n=(e.getAttribute("data-method")||"GET").toUpperCase(),i=e.getAttribute("data-params"),a=(t.metaKey||t.ctrlKey)&&n==="GET"&&!i;(t.button!=null&&t.button!==0||a)&&t.stopImmediatePropagation()},p={$:M,ajax:K,buttonClickSelector:y,buttonDisableSelector:A,confirm:ct,cspNonce:z,csrfToken:q,csrfParam:X,CSRFProtection:$,delegate:o,disableElement:C,enableElement:b,fileInputSelector:et,fire:l,formElements:Q,formEnableSelector:P,formDisableSelector:I,formInputClickSelector:x,formSubmitButtonClick:Y,formSubmitSelector:d,getData:f,handleDisabledElement:g,href:ot,inputChangeSelector:T,isCrossDomain:_,linkClickSelector:h,linkDisableSelector:w,loadCSPNonce:N,matches:c,preventInsignificantClick:D,refreshCSRFTokens:B,serializeElement:O,setData:u,stopEverything:E},k=it(p);p.handleConfirm=k;const Z=bt(p);p.handleMethod=Z;const S=ht(p);p.handleRemote=S;const yt=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){M(P).forEach(function(t){f(t,"ujs:disabled")&&b(t)}),M(w).forEach(function(t){f(t,"ujs:disabled")&&b(t)})}),o(document,w,"ajax:complete",b),o(document,w,"ajax:stopped",b),o(document,A,"ajax:complete",b),o(document,A,"ajax:stopped",b),o(document,h,"click",D),o(document,h,"click",g),o(document,h,"click",k),o(document,h,"click",C),o(document,h,"click",S),o(document,h,"click",Z),o(document,y,"click",D),o(document,y,"click",g),o(document,y,"click",k),o(document,y,"click",C),o(document,y,"click",S),o(document,T,"change",g),o(document,T,"change",k),o(document,T,"change",S),o(document,d,"submit",g),o(document,d,"submit",k),o(document,d,"submit",S),o(document,d,"submit",t=>setTimeout(()=>C(t),13)),o(document,d,"ajax:send",C),o(document,d,"ajax:complete",b),o(document,x,"click",D),o(document,x,"click",g),o(document,x,"click",k),o(document,x,"click",Y),document.addEventListener("DOMContentLoaded",B),document.addEventListener("DOMContentLoaded",N),window._rails_loaded=!0};p.start=yt;if(typeof jQuery<"u"&&jQuery&&jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=p,jQuery.ajaxPrefilter(function(t,e,n){if(!t.crossDomain)return $(n)})}export{p as R};
//# sourceMappingURL=rails-ujs.esm-DLwK8N9E.js.map
