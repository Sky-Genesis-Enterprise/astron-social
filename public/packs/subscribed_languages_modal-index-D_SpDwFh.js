var f=Object.defineProperty;var b=(s,a,e)=>a in s?f(s,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[a]=e;var l=(s,a,e)=>b(s,typeof a!="symbol"?a+"":a,e);import{j as t}from"./client-wT6vtYO_.js";import{P as o}from"./short_number-WomMu2iV.js";import{i as x,d as j}from"./index-BdTwX--g.js";import{j as L,dY as m,an as _,bX as u,y as S,z as d,b as v,be as C,bg as y}from"./useSelectableClick-DeaJbL2_.js";import{S as I}from"./close-BsPe8EbX.js";import{B as M}from"./index-BZWHsOPk.js";import{O as T}from"./option-D2m0pPLV.js";import{B as N}from"./initial_state-BP3UcUr4.js";import{M as g}from"./message-UFwkQlnu.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./done-illPsXew.js";const O=j({close:{id:"lightbox.close",defaultMessage:"Close"}}),P=_([(s,a)=>s.getIn(["timelines",`account:${a}`,"items"],u()),s=>s.get("statuses")],(s,a)=>m(s.map(e=>a.get(e)).filter(e=>!e.get("reblog")).map(e=>e.get("language")))),R=(s,{accountId:a})=>({acct:s.getIn(["accounts",a,"acct"]),availableLanguages:P(s,a),selectedLanguages:m(s.getIn(["relationships",a,"languages"])||u())}),q=(s,{accountId:a})=>({onSubmit(e){s(y(a,{languages:e}))}});class c extends S{constructor(){super(...arguments);l(this,"state",{selectedLanguages:this.props.selectedLanguages});l(this,"handleLanguageToggle",(e,i)=>{const{selectedLanguages:n}=this.state;i?this.setState({selectedLanguages:n.add(e)}):this.setState({selectedLanguages:n.delete(e)})});l(this,"handleSubmit",()=>{this.props.onSubmit(this.state.selectedLanguages.toArray()),this.props.onClose()})}renderItem(e){const i=this.props.languages.find(r=>r[0]===e),n=this.state.selectedLanguages.includes(e);return i?t.jsx(T,{name:"languages",value:e,label:i[1],checked:n,onToggle:this.handleLanguageToggle,multiple:!0},e):null}render(){const{acct:e,availableLanguages:i,selectedLanguages:n,intl:r,onClose:p}=this.props;return t.jsxs("div",{className:"modal-root__modal report-dialog-modal",children:[t.jsxs("div",{className:"report-modal__target",children:[t.jsx(v,{className:"report-modal__close",title:r.formatMessage(O.close),icon:"times",iconComponent:I,onClick:p,size:20}),t.jsx(g,{id:"subscribed_languages.target",defaultMessage:"Change subscribed languages for {target}",values:{target:t.jsx("strong",{children:e})}})]}),t.jsxs("div",{className:"report-dialog-modal__container",children:[t.jsx("p",{className:"report-dialog-modal__lead",children:t.jsx(g,{id:"subscribed_languages.lead",defaultMessage:"Only posts in selected languages will appear on your home and list timelines after the change. Select none to receive posts in all languages."})}),t.jsx("div",{children:i.union(n).delete(null).map(h=>this.renderItem(h))}),t.jsx("div",{className:"flex-spacer"}),t.jsx("div",{className:"report-dialog-modal__actions",children:t.jsx(M,{disabled:C(this.state.selectedLanguages,this.props.selectedLanguages),onClick:this.handleSubmit,children:t.jsx(g,{id:"subscribed_languages.save",defaultMessage:"Save changes"})})})]})]})}}l(c,"propTypes",{accountId:o.string.isRequired,acct:o.string.isRequired,availableLanguages:d.setOf(o.string),selectedLanguages:d.setOf(o.string),onClose:o.func.isRequired,languages:o.arrayOf(o.arrayOf(o.string)),intl:o.object.isRequired,submit:o.func.isRequired}),l(c,"defaultProps",{languages:N});const W=L(R,q)(x(c));export{W as default};
//# sourceMappingURL=subscribed_languages_modal-index-D_SpDwFh.js.map
