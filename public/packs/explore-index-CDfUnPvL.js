var C=Object.defineProperty;var P=(t,a,o)=>a in t?C(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;var N=(t,a,o)=>P(t,typeof a!="symbol"?a+"":a,o);import{j as s}from"./client-wT6vtYO_.js";import{r as l,u as y,d as M}from"./index-BdTwX--g.js";import{H as T}from"./Helmet-ZVWnGmbg.js";import{L as k,S as R,w as g,N as m,b as D,R as p}from"./short_number-WomMu2iV.js";import{S as H}from"./trending_up-De1RKRI5.js";import{C as $}from"./column-B4vwzadM.js";import{C as z}from"./column_header-FN7GyEAs.js";import{A,S as E}from"./card-CttmBekj.js";import{S as B}from"./search-BPrZ-C9C.js";import{u as F}from"./useBreakpoint-lQ5WUdV4.js";import{b4 as O,j as h,dQ as U,dR as Q,H as q,dS as K,a as V,u as W,cV as G,A as J,b as X,cU as Y,bQ as Z,d as ss}from"./useSelectableClick-DeaJbL2_.js";import{L as f}from"./loading_indicator-7xMB1U6D.js";import{c as es}from"./index-DizoKcfL.js";import{R as ts}from"./index-CAH5FfLP.js";import{S as u}from"./skeleton-D9NbTYr9.js";import{M as r}from"./message-UFwkQlnu.js";import{S as os}from"./status_list-DPL_DhlK.js";import{d as x}from"./initial_state-BP3UcUr4.js";import{ao as as,D as rs}from"./content_warning-DZ8mar1O.js";import{S as is}from"./close-BsPe8EbX.js";import{F as ns}from"./follow_button-BdqDKUmA.js";import{I as ls}from"./hashtag-C8K46vBm.js";import"./numbers-CGZQWBYL.js";import"./scroll-BygYx8ga.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./hashtags-DlzQcrtL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./load_locale-tOpKhmcM.js";import"./gif-BtN1axMk.js";import"./info-HtHaDKcq.js";import"./verified_badge-CtK79Pb7.js";import"./status_quoted-COu-QToA.js";import"./domain_blocks-CYnp0hav.js";import"./reports-DBOcsYZF.js";import"./status-CiF0hsk4.js";import"./index.es-B0ZBMj49.js";import"./avatar_overlay-BeG39OK4.js";import"./toString-Cy1Ecq9L.js";import"./status_content-CaIN8-0B.js";import"./poll-CjurB963.js";import"./permissions-Djze7cmB.js";import"./visibility_icon-DbVVvHFb.js";import"./index-OwtqmxAM.js";import"./load_gap-6rwcZCuh.js";import"./scrollable_list-lNykmhKA.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";import"./index-BZWHsOPk.js";import"./index-DwQAxx91.js";const ds=(t,a)=>s.jsx(r,{id:"link_preview.shares",defaultMessage:"{count, plural, one {{counter} post} other {{counter} posts}}",values:{count:a,counter:s.jsx("strong",{children:t})}}),cs=({url:t,title:a,lang:o,publisher:e,publishedAt:n,author:d,authorAccount:i,sharedTimes:c,thumbnail:j,thumbnailDescription:b,blurhash:S,expanded:L})=>{const[w,v]=l.useState(!1),I=l.useCallback(()=>{v(!0)},[v]);return s.jsxs("div",{className:es("story",{expanded:L}),children:[s.jsxs("div",{className:"story__details",children:[s.jsxs("div",{className:"story__details__publisher",children:[e?s.jsx("span",{lang:o,children:e}):s.jsx(u,{width:50}),n&&s.jsxs(s.Fragment,{children:[" Â· ",s.jsx(ts,{timestamp:n})]})]}),s.jsx("a",{className:"story__details__title",lang:o,href:t,target:"blank",rel:"noopener",children:a||s.jsx(u,{})}),s.jsxs("div",{className:"story__details__shared",children:[d?s.jsx(r,{id:"link_preview.author",className:"story__details__shared__author",defaultMessage:"By {name}",values:{name:i?s.jsx(A,{accountId:i}):s.jsx("strong",{children:d})}}):s.jsx("span",{}),typeof c=="number"?s.jsx(k,{className:"story__details__shared__pill",to:`/links/${encodeURIComponent(t)}`,children:s.jsx(R,{value:c,renderer:ds})}):s.jsx(u,{width:"10ch"})]})]}),s.jsx("a",{className:"story__thumbnail",href:t,target:"blank",rel:"noopener",children:j?s.jsxs(s.Fragment,{children:[!w&&s.jsx(O,{hash:S,className:"story__thumbnail__preview"}),s.jsx("img",{src:j,onLoad:I,alt:b,title:b,lang:o})]}):s.jsx(u,{})})]})},ms=t=>({links:t.getIn(["trends","links","items"]),isLoading:t.getIn(["trends","links","isLoading"])});class ps extends l.PureComponent{componentDidMount(){const{dispatch:a,links:o,history:e}=this.props;e.action==="POP"&&o.size>0||a(U())}render(){const{isLoading:a,links:o}=this.props;return!a&&o.isEmpty()?s.jsx("div",{className:"explore__links scrollable scrollable--flex",children:s.jsx("div",{className:"empty-column-indicator",children:s.jsx(r,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"})})}):s.jsx("div",{className:"explore__links scrollable","data-nosnippet":!0,children:a?s.jsx(f,{}):o.map((e,n)=>s.jsx(cs,{expanded:n===0,lang:e.get("language"),url:e.get("url"),title:e.get("title"),publisher:e.get("provider_name"),publishedAt:e.get("published_at"),author:e.get("author_name"),authorAccount:e.getIn(["authors",0,"account","id"]),sharedTimes:e.getIn(["history",0,"accounts"])*1+e.getIn(["history",1,"accounts"])*1,thumbnail:e.get("image"),thumbnailDescription:e.get("image_description"),blurhash:e.get("blurhash")},e.get("id")))})}}const us=h(ms)(g(ps)),gs=t=>({statusIds:as(t,"trending"),isLoading:t.getIn(["status_lists","trending","isLoading"],!0),hasMore:!!t.getIn(["status_lists","trending","next"])});class hs extends l.PureComponent{constructor(){super(...arguments);N(this,"handleLoadMore",q(()=>{const{dispatch:o}=this.props;o(K())},300,{leading:!0}))}componentDidMount(){const{dispatch:o,statusIds:e,history:n}=this.props;n.action==="POP"&&e.size>0||o(Q())}render(){const{isLoading:o,hasMore:e,statusIds:n,multiColumn:d}=this.props,i=s.jsx(r,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"});return s.jsx(os,{trackScroll:!0,alwaysPrepend:!0,timelineId:"explore",statusIds:n,scrollKey:"explore-statuses",hasMore:e,isLoading:o,onLoadMore:this.handleLoadMore,emptyMessage:i,bindToDocument:!d,withCounters:!0})}}const xs=h(gs)(g(hs)),_s=M({dismiss:{id:"follow_suggestions.dismiss",defaultMessage:"Don't show again"}}),fs=({id:t,source:a})=>{const o=y(),e=V(c=>c.accounts.get(t)),n=W(),d=l.useCallback(()=>{n(G({accountId:t}))},[t,n]);let i;switch(a){case"friends_of_friends":i=s.jsx(r,{id:"follow_suggestions.friends_of_friends_longer",defaultMessage:"Popular among people you follow"});break;case"similar_to_recently_followed":i=s.jsx(r,{id:"follow_suggestions.similar_to_recently_followed_longer",defaultMessage:"Similar to profiles you recently followed"});break;case"featured":i=s.jsx(r,{id:"follow_suggestions.featured_longer",defaultMessage:"Hand-picked by the {domain} team",values:{domain:x}});break;case"most_followed":i=s.jsx(r,{id:"follow_suggestions.popular_suggestion_longer",defaultMessage:"Popular on {domain}",values:{domain:x}});break;case"most_interactions":i=s.jsx(r,{id:"follow_suggestions.popular_suggestion_longer",defaultMessage:"Popular on {domain}",values:{domain:x}});break}return e?s.jsxs("div",{className:"explore-suggestions-card",children:[s.jsx("div",{className:"explore-suggestions-card__source",children:i}),s.jsxs("div",{className:"explore-suggestions-card__body",children:[s.jsxs(k,{to:`/@${e.get("acct")}`,"data-hover-card-account":e.id,className:"explore-suggestions-card__link",children:[s.jsx(J,{account:e,size:48,className:"explore-suggestions-card__avatar"}),s.jsx(rs,{account:e})]}),s.jsxs("div",{className:"explore-suggestions-card__actions",children:[s.jsx(X,{icon:"close",iconComponent:is,onClick:d,title:o.formatMessage(_s.dismiss),className:"explore-suggestions-card__dismiss-button"}),s.jsx(ns,{accountId:e.get("id")})]})]})]}):null},js=t=>({suggestions:t.suggestions.items,isLoading:t.suggestions.isLoading});class bs extends l.PureComponent{componentDidMount(){const{dispatch:a,suggestions:o,history:e}=this.props;e.action==="POP"&&o.length>0||a(Y())}render(){const{isLoading:a,suggestions:o}=this.props;return!a&&o.length===0?s.jsx("div",{className:"explore__suggestions scrollable scrollable--flex",children:s.jsx("div",{className:"empty-column-indicator",children:s.jsx(r,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"})})}):s.jsx("div",{className:"explore__suggestions scrollable","data-nosnippet":!0,children:a?s.jsx(f,{}):o.map(e=>s.jsx(fs,{id:e.account_id,source:e.sources[0]},e.account_id))})}}const vs=h(js)(g(bs)),Ns=t=>({hashtags:t.getIn(["trends","tags","items"]),isLoadingHashtags:t.getIn(["trends","tags","isLoading"])});class ys extends l.PureComponent{componentDidMount(){const{dispatch:a,history:o,hashtags:e}=this.props;o.action==="POP"&&e.size>0||a(Z())}render(){const{isLoading:a,hashtags:o}=this.props;return!a&&o.isEmpty()?s.jsx("div",{className:"explore__links scrollable scrollable--flex",children:s.jsx("div",{className:"empty-column-indicator",children:s.jsx(r,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"})})}):s.jsx("div",{className:"scrollable explore__links","data-nosnippet":!0,children:a?s.jsx(f,{}):o.map(e=>s.jsx(ls,{hashtag:e},e.get("name")))})}}const Ms=h(Ns)(g(ys)),_=M({title:{id:"explore.title",defaultMessage:"Trending"}}),Le=({multiColumn:t})=>{const{signedIn:a}=ss(),o=y(),e=l.useRef(null),n=F("full"),d=l.useCallback(()=>{var i;(i=e.current)==null||i.scrollTop()},[]);return s.jsxs($,{bindToDocument:!t,ref:e,label:o.formatMessage(_.title),children:[s.jsx(z,{icon:"explore",iconComponent:n?E:H,title:o.formatMessage(_.title),onClick:d,multiColumn:t}),s.jsx("div",{className:"explore__search-header",children:s.jsx(B,{singleColumn:!0})}),s.jsxs("div",{className:"account__section-headline",children:[s.jsx(m,{exact:!0,to:"/explore",children:s.jsx(r,{tagName:"div",id:"explore.trending_statuses",defaultMessage:"Posts"})}),s.jsx(m,{exact:!0,to:"/explore/tags",children:s.jsx(r,{tagName:"div",id:"explore.trending_tags",defaultMessage:"Hashtags"})}),a&&s.jsx(m,{exact:!0,to:"/explore/suggestions",children:s.jsx(r,{tagName:"div",id:"explore.suggested_follows",defaultMessage:"People"})}),s.jsx(m,{exact:!0,to:"/explore/links",children:s.jsx(r,{tagName:"div",id:"explore.trending_links",defaultMessage:"News"})})]}),s.jsxs(D,{children:[s.jsx(p,{path:"/explore/tags",component:Ms}),s.jsx(p,{path:"/explore/links",component:us}),s.jsx(p,{path:"/explore/suggestions",component:vs}),s.jsx(p,{exact:!0,path:["/explore","/explore/posts"],children:s.jsx(xs,{multiColumn:t})})]}),s.jsxs(T,{children:[s.jsx("title",{children:o.formatMessage(_.title)}),s.jsx("meta",{name:"robots",content:"all"})]})]})};export{Le as default};
//# sourceMappingURL=explore-index-CDfUnPvL.js.map
