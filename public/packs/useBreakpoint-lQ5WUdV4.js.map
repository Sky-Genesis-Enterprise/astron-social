{"version":3,"file":"useBreakpoint-lQ5WUdV4.js","sources":["../../app/javascript/mastodon/features/ui/hooks/useBreakpoint.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst breakpoints = {\n  openable: 759, // Device width at which the sidebar becomes an openable hamburger menu\n  full: 1174, // Device width at which all 3 columns can be displayed\n};\n\ntype Breakpoint = 'openable' | 'full';\n\nexport const useBreakpoint = (breakpoint: Breakpoint) => {\n  const [isMatching, setIsMatching] = useState(false);\n\n  useEffect(() => {\n    const mediaWatcher = window.matchMedia(\n      `(max-width: ${breakpoints[breakpoint]}px)`,\n    );\n\n    setIsMatching(mediaWatcher.matches);\n\n    const handleChange = (e: MediaQueryListEvent) => {\n      setIsMatching(e.matches);\n    };\n\n    mediaWatcher.addEventListener('change', handleChange);\n\n    return () => {\n      mediaWatcher.removeEventListener('change', handleChange);\n    };\n  }, [breakpoint, setIsMatching]);\n\n  return isMatching;\n};\n\ninterface WithBreakpointType {\n  matchesBreakpoint: boolean;\n}\n\nexport function withBreakpoint<P>(\n  Component: React.ComponentType<P & WithBreakpointType>,\n  breakpoint: Breakpoint = 'full',\n) {\n  const displayName = `withMobileLayout(${Component.displayName ?? Component.name})`;\n\n  const ComponentWithBreakpoint = (props: P) => {\n    const matchesBreakpoint = useBreakpoint(breakpoint);\n\n    return <Component matchesBreakpoint={matchesBreakpoint} {...props} />;\n  };\n\n  ComponentWithBreakpoint.displayName = displayName;\n\n  return ComponentWithBreakpoint;\n}\n"],"names":["breakpoints","openable","full","useBreakpoint","breakpoint","isMatching","setIsMatching","useState","useEffect","mediaWatcher","window","matchMedia","matches","handleChange","e","addEventListener","removeEventListener","withBreakpoint","Component","displayName","name","ComponentWithBreakpoint","props","matchesBreakpoint","jsx"],"mappings":"iFAEA,MAAMA,EAAc,CAClBC,SAAU,IACVC,KAAM,IACR,EAIaC,EAAiBC,GAA2B,CACvD,KAAM,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAS,EAAK,EAElDC,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAeC,OAAOC,WAC1B,eAAeX,EAAYI,CAAU,CAAC,KACxC,EAEAE,EAAcG,EAAaG,OAAO,EAElC,MAAMC,EAAgBC,GAA2B,CAC/CR,EAAcQ,EAAEF,OAAO,CAAA,EAGzBH,OAAAA,EAAaM,iBAAiB,SAAUF,CAAY,EAE7C,IAAM,CACXJ,EAAaO,oBAAoB,SAAUH,CAAY,CAAA,CACzD,EACC,CAACT,EAAYE,CAAa,CAAC,EAEvBD,CACT,EAMO,SAASY,EACdC,EACAd,EAAyB,OACzB,CACA,MAAMe,EAAc,oBAAoBD,EAAUC,aAAeD,EAAUE,IAAI,IAEzEC,EAA2BC,GAAa,CAC5C,MAAMC,EAAoBpB,EAAcC,CAAU,EAElD,OAAOoB,EAAAA,IAACN,EAAA,CAAU,kBAAAK,EAAsC,GAAID,CAAAA,CAAM,CAAA,EAGpED,OAAAA,EAAwBF,YAAcA,EAE/BE,CACT"}