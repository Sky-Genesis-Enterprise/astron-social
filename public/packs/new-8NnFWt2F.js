import{j as e}from"./client-wT6vtYO_.js";import{u as j,r as i,d as y}from"./index-BdTwX--g.js";import{H as C}from"./Helmet-ZVWnGmbg.js";import{j as S,d as A,L}from"./short_number-WomMu2iV.js";import{u as w,a as k,d7 as E,ea as H,dJ as I,b7 as T,eb as F,I as P,aQ as R,A as $}from"./useSelectableClick-DeaJbL2_.js";import{T as z}from"./index-Dk6IJ02w.js";import{S as B}from"./list_alt-yox9TcbF.js";import{A as D}from"./avatar_group-PUipFlog.js";import{C as G}from"./column-B4vwzadM.js";import{C as q}from"./column_header-FN7GyEAs.js";import{L as J}from"./loading_indicator-7xMB1U6D.js";import{messages as Q}from"./members-BLbYVDxO.js";import{M as a}from"./message-UFwkQlnu.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./scroll-BygYx8ga.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./index.module-sM2fS0Fl.js";import"./squiggly_arrow-jedqCbUN.js";import"./index-BZWHsOPk.js";import"./column_search_header-reFrdFDN.js";import"./counters-BJ0cOeaq.js";import"./content_warning-DZ8mar1O.js";import"./skeleton-D9NbTYr9.js";import"./scrollable_list-lNykmhKA.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";import"./verified_badge-CtK79Pb7.js";const c=y({edit:{id:"column.edit_list",defaultMessage:"Edit list"},create:{id:"column.create_list",defaultMessage:"Create list"}}),K=({id:n})=>{const o=j(),[s,m]=i.useState(0),[d,r]=i.useState([]);return i.useEffect(()=>{F(n).then(l=>{m(l.length),r(l.slice(0,3))}).catch(()=>{})},[n]),e.jsxs(L,{to:`/lists/${n}/members`,className:"app-form__link",children:[e.jsxs("div",{className:"app-form__link__text",children:[e.jsxs("strong",{children:[o.formatMessage(Q.manageMembers),e.jsx(P,{id:"chevron_right",icon:R})]}),e.jsx(a,{id:"lists.list_members_count",defaultMessage:"{count, plural, one {# member} other {# members}}",values:{count:s}})]}),e.jsx(D,{compact:!0,children:d.map(l=>e.jsx($,{account:l,size:30},l.id))})]})},He=({multiColumn:n})=>{const o=w(),{id:s}=S(),m=j(),d=A(),r=k(t=>s?t.lists.get(s):void 0),[l,p]=i.useState(""),[u,h]=i.useState(!1),[f,x]=i.useState("list"),[_,g]=i.useState(!1);i.useEffect(()=>{s&&o(E(s))},[o,s]),i.useEffect(()=>{s&&r&&(p(r.title),h(r.exclusive),x(r.replies_policy))},[p,h,x,s,r]);const v=i.useCallback(({target:{value:t}})=>{p(t)},[p]),b=i.useCallback(({target:{checked:t}})=>{h(t)},[h]),M=i.useCallback(({target:{value:t}})=>{x(t)},[x]),N=i.useCallback(()=>{g(!0),s?o(H({id:s,title:l,exclusive:u,replies_policy:f})).then(()=>(g(!1),"")):o(I({title:l,exclusive:u,replies_policy:f})).then(t=>(g(!1),T(t)&&(d.replace(`/lists/${t.payload.id}/edit`),d.push(`/lists/${t.payload.id}/members`)),""))},[d,o,g,s,l,u,f]);return e.jsxs(G,{bindToDocument:!n,label:m.formatMessage(s?c.edit:c.create),children:[e.jsx(q,{title:m.formatMessage(s?c.edit:c.create),icon:"list-ul",iconComponent:B,multiColumn:n,showBackButton:!0}),e.jsx("div",{className:"scrollable",children:e.jsxs("form",{className:"simple_form app-form",onSubmit:N,children:[e.jsx("div",{className:"fields-group",children:e.jsx("div",{className:"input with_label",children:e.jsxs("div",{className:"label_input",children:[e.jsx("label",{htmlFor:"list_title",children:e.jsx(a,{id:"lists.list_name",defaultMessage:"List name"})}),e.jsx("div",{className:"label_input__wrapper",children:e.jsx("input",{id:"list_title",type:"text",value:l,onChange:v,maxLength:30,required:!0,placeholder:" "})})]})})}),e.jsx("div",{className:"fields-group",children:e.jsx("div",{className:"input with_label",children:e.jsxs("div",{className:"label_input",children:[e.jsx("label",{htmlFor:"list_replies_policy",children:e.jsx(a,{id:"lists.show_replies_to",defaultMessage:"Include replies from list members to"})}),e.jsx("div",{className:"label_input__wrapper",children:e.jsxs("select",{id:"list_replies_policy",value:f,onChange:M,children:[e.jsx(a,{id:"lists.replies_policy.none",defaultMessage:"No one",children:t=>e.jsx("option",{value:"none",children:t})}),e.jsx(a,{id:"lists.replies_policy.list",defaultMessage:"Members of the list",children:t=>e.jsx("option",{value:"list",children:t})}),e.jsx(a,{id:"lists.replies_policy.followed",defaultMessage:"Any followed user",children:t=>e.jsx("option",{value:"followed",children:t})})]})})]})})}),s&&e.jsx("div",{className:"fields-group",children:e.jsx(K,{id:s})}),e.jsx("div",{className:"fields-group",children:e.jsxs("label",{className:"app-form__toggle",children:[e.jsxs("div",{className:"app-form__toggle__label",children:[e.jsx("strong",{children:e.jsx(a,{id:"lists.exclusive",defaultMessage:"Hide members in Home"})}),e.jsx("span",{className:"hint",children:e.jsx(a,{id:"lists.exclusive_hint",defaultMessage:"If someone is on this list, hide them in your Home feed to avoid seeing their posts twice."})})]}),e.jsx("div",{className:"app-form__toggle__toggle",children:e.jsx("div",{children:e.jsx(z,{checked:u,onChange:b})})})]})}),e.jsx("div",{className:"actions",children:e.jsx("button",{className:"button",type:"submit",children:_?e.jsx(J,{}):s?e.jsx(a,{id:"lists.save",defaultMessage:"Save"}):e.jsx(a,{id:"lists.create",defaultMessage:"Create"})})})]})}),e.jsxs(C,{children:[e.jsx("title",{children:m.formatMessage(s?c.edit:c.create)}),e.jsx("meta",{name:"robots",content:"noindex"})]})]})};export{He as default};
//# sourceMappingURL=new-8NnFWt2F.js.map
