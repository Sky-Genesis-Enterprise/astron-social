import{j as d}from"./client-wT6vtYO_.js";import{u as M,r as u,d as c}from"./index-BdTwX--g.js";import{c as k}from"./index-DizoKcfL.js";import{u as y,d as x,a as w,ap as N,o as p,bg as F}from"./useSelectableClick-DeaJbL2_.js";import{B as _}from"./index-BZWHsOPk.js";import{L as j}from"./loading_indicator-7xMB1U6D.js";import{e as m}from"./initial_state-BP3UcUr4.js";const a=c({unfollow:{id:"account.unfollow",defaultMessage:"Unfollow"},follow:{id:"account.follow",defaultMessage:"Follow"},followBack:{id:"account.follow_back",defaultMessage:"Follow back"},editProfile:{id:"account.edit_profile",defaultMessage:"Edit profile"}}),O=({accountId:o,compact:n})=>{const t=M(),f=y(),{signedIn:r}=x(),s=w(i=>o?i.accounts.get(o):void 0),e=w(i=>o?i.relationships.get(o):void 0),g=(e==null?void 0:e.following)||(e==null?void 0:e.requested);u.useEffect(()=>{o&&r&&f(N([o]))},[f,o,r]);const b=u.useCallback(()=>{r||f(p({modalType:"INTERACTION",modalProps:{type:"follow",accountId:o,url:s==null?void 0:s.url}})),!(!e||!o)&&o!==m&&(s&&(e.following||e.requested)?f(p({modalType:"CONFIRM_UNFOLLOW",modalProps:{account:s}})):f(F(o)))},[f,o,e,s,r]);let l;return r?o===m?l=t.formatMessage(a.editProfile):e?e.following||e.requested?l=t.formatMessage(a.unfollow):e.followed_by?l=t.formatMessage(a.followBack):l=t.formatMessage(a.follow):l=d.jsx(j,{}):l=t.formatMessage(a.follow),o===m?d.jsx("a",{href:"/settings/profile",target:"_blank",rel:"noopener",className:k("button button-secondary",{"button--compact":n}),children:l}):d.jsx(_,{onClick:b,disabled:(e==null?void 0:e.blocked_by)||(e==null?void 0:e.blocking)||!(e!=null&&e.following||e!=null&&e.requested)&&((s==null?void 0:s.suspended)||!!(s!=null&&s.moved)),secondary:g,compact:n,className:g?"button--destructive":void 0,children:l})};export{O as F};
//# sourceMappingURL=follow_button-BdqDKUmA.js.map
