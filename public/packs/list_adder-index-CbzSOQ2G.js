import{j as e}from"./client-wT6vtYO_.js";import{u as f,r,d as v}from"./index-BdTwX--g.js";import{u as x,a as g,n as N,dG as M,dH as _,dI as k,b as A,dJ as S,b7 as w,I as j}from"./useSelectableClick-DeaJbL2_.js";import{S as B}from"./close-BsPe8EbX.js";import{S as C}from"./list_alt-yox9TcbF.js";import"./api-B2m7efUy.js";import{B as y}from"./index-BZWHsOPk.js";import{C as E}from"./check_box-DEDjOsQz.js";import{g as F}from"./lists-5L5TUNK8.js";import{M as T}from"./message-UFwkQlnu.js";import"./short_number-WomMu2iV.js";import"./numbers-CGZQWBYL.js";import"./index-CAH5FfLP.js";import"./ready-DpOgoWSg.js";import"./initial_state-BP3UcUr4.js";import"./load_locale-tOpKhmcM.js";import"./index-lj9VQs0f.js";import"./index-DizoKcfL.js";import"./done-illPsXew.js";const u=v({newList:{id:"lists.new_list_name",defaultMessage:"New list name"},createList:{id:"lists.create",defaultMessage:"Create"},close:{id:"lightbox.close",defaultMessage:"Close"}}),G=({id:t,title:c,checked:m,onChange:i})=>{const l=r.useCallback(d=>{i(t,d.target.checked)},[t,i]);return e.jsxs("label",{className:"lists__item",children:[e.jsxs("div",{className:"lists__item__title",children:[e.jsx(j,{id:"list-ul",icon:C}),e.jsx("span",{children:c})]}),e.jsx(E,{value:t,checked:m,onChange:l})]})},R=({onCreate:t})=>{const c=f(),m=x(),[i,l]=r.useState(""),d=r.useCallback(({target:{value:a}})=>{l(a)},[l]),p=r.useCallback(()=>{i.trim().length!==0&&m(S({title:i})).then(a=>(w(a)&&(t(a.payload),l("")),""))},[l,m,t,i]);return e.jsxs("form",{className:"lists__item",onSubmit:p,children:[e.jsxs("label",{className:"lists__item__title",children:[e.jsx(j,{id:"list-ul",icon:C}),e.jsx("input",{type:"text",value:i,onChange:d,maxLength:30,required:!0,placeholder:c.formatMessage(u.newList)})]}),e.jsx(y,{text:c.formatMessage(u.createList),type:"submit"})]})},ts=({accountId:t,onClose:c})=>{const m=f(),i=x(),l=g(s=>s.accounts.get(t)),d=g(s=>F(s)),[p,a]=r.useState([]);r.useEffect(()=>{i(N()),M(t).then(s=>(a(s.map(n=>n.id)),"")).catch(()=>{})},[i,a,t]);const L=r.useCallback((s,n)=>{n?(a(o=>[s,...o]),_(s,t).catch(()=>{a(o=>o.filter(h=>h!==s))})):(a(o=>o.filter(h=>h!==s)),k(s,t).catch(()=>{a(o=>[s,...o])}))},[a,t]),b=r.useCallback(s=>{a(n=>[s.id,...n]),_(s.id,t).catch(()=>{a(n=>n.filter(o=>o!==s.id))})},[a,t]);return e.jsxs("div",{className:"modal-root__modal dialog-modal",children:[e.jsxs("div",{className:"dialog-modal__header",children:[e.jsx(A,{className:"dialog-modal__header__close",title:m.formatMessage(u.close),icon:"times",iconComponent:B,onClick:c}),e.jsx("span",{className:"dialog-modal__header__title",children:e.jsx(T,{id:"lists.add_to_lists",defaultMessage:"Add {name} to lists",values:{name:e.jsxs("strong",{children:["@",l==null?void 0:l.acct]})}})})]}),e.jsx("div",{className:"dialog-modal__content",children:e.jsxs("div",{className:"lists-scrollable",children:[e.jsx(R,{onCreate:b}),d.map(s=>e.jsx(G,{id:s.id,title:s.title,checked:p.includes(s.id),onChange:L},s.id))]})})]})};export{ts as default};
//# sourceMappingURL=list_adder-index-CbzSOQ2G.js.map
