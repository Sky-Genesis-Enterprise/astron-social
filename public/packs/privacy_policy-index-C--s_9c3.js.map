{"version":3,"file":"privacy_policy-index-C--s_9c3.js","sources":["../../app/javascript/mastodon/features/privacy_policy/index.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nimport { FormattedMessage, useIntl, defineMessages } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport { apiGetPrivacyPolicy } from 'mastodon/api/instance';\nimport type { ApiPrivacyPolicyJSON } from 'mastodon/api_types/instance';\nimport { Column } from 'mastodon/components/column';\nimport { FormattedDateWrapper } from 'mastodon/components/formatted_date';\nimport { Skeleton } from 'mastodon/components/skeleton';\n\nconst messages = defineMessages({\n  title: { id: 'privacy_policy.title', defaultMessage: 'Privacy Policy' },\n});\n\nconst PrivacyPolicy: React.FC<{\n  multiColumn: boolean;\n}> = ({ multiColumn }) => {\n  const intl = useIntl();\n  const [response, setResponse] = useState<ApiPrivacyPolicyJSON>();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    apiGetPrivacyPolicy()\n      .then((data) => {\n        setResponse(data);\n        setLoading(false);\n        return '';\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  return (\n    <Column\n      bindToDocument={!multiColumn}\n      label={intl.formatMessage(messages.title)}\n    >\n      <div className='scrollable privacy-policy'>\n        <div className='column-title'>\n          <h3>\n            <FormattedMessage\n              id='privacy_policy.title'\n              defaultMessage='Privacy Policy'\n            />\n          </h3>\n          <p>\n            <FormattedMessage\n              id='privacy_policy.last_updated'\n              defaultMessage='Last updated {date}'\n              values={{\n                date: loading ? (\n                  <Skeleton width='10ch' />\n                ) : (\n                  <FormattedDateWrapper\n                    value={response?.updated_at}\n                    year='numeric'\n                    month='short'\n                    day='2-digit'\n                  />\n                ),\n              }}\n            />\n          </p>\n        </div>\n\n        {response && (\n          <div\n            className='privacy-policy__body prose'\n            dangerouslySetInnerHTML={{ __html: response.content }}\n          />\n        )}\n      </div>\n\n      <Helmet>\n        <title>{intl.formatMessage(messages.title)}</title>\n        <meta name='robots' content='all' />\n      </Helmet>\n    </Column>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default PrivacyPolicy;\n"],"names":["messages","defineMessages","title","id","defaultMessage","PrivacyPolicy","multiColumn","intl","useIntl","response","setResponse","useState","loading","setLoading","useEffect","apiGetPrivacyPolicy","then","data","catch","jsxs","Column","formatMessage","jsx","FormattedMessage","date","Skeleton","FormattedDateWrapper","updated_at","__html","content","Helmet"],"mappings":"sjBAYA,MAAMA,EAAWC,EAAe,CAC9BC,MAAO,CAAEC,GAAE,uBAA0BC,eAAc,gBAAA,CACrD,CAAC,EAEKC,EAEDA,CAAC,CAAEC,YAAAA,CAAY,IAAM,CACxB,MAAMC,EAAOC,EAAAA,EACP,CAACC,EAAUC,CAAW,EAAIC,WAAAA,EAC1B,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAE3CG,OAAAA,EAAAA,UAAU,IAAM,CACdC,EAAAA,EACGC,KAAMC,IACLP,EAAYO,CAAI,EAChBJ,EAAW,EAAK,EACT,GACR,EACAK,MAAM,IAAM,CACXL,EAAW,EAAK,CAAA,CACjB,CAAA,EACF,EAAE,EAGHM,OAACC,EAAA,CACC,eAAgB,CAACd,EACjB,MAAOC,EAAKc,cAAcrB,EAASE,KAAK,EAExC,SAAA,CAAAiB,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,eACb,SAAA,CAAAG,EAAAA,IAAC,MACC,SAAAA,EAAAA,IAACC,EAAA,CACC,0BACA,eAAe,iBAAgB,CAAA,CAEnC,EACAD,EAAAA,IAAC,KACC,SAAAA,MAACC,EAAA,CACC,GAAE,8BACF,eAAe,sBACf,OAAQ,CACNC,KAAMZ,EACJU,EAAAA,IAACG,EAAA,CAAS,MAAM,OAAM,EAEtBH,MAACI,EAAA,CACC,MAAOjB,GAAAA,YAAAA,EAAUkB,WACjB,KAAK,UACL,MAAM,QACN,IAAI,SAAA,CAAS,CAAA,EAGjB,CAAA,CAEN,CAAA,EACF,EAEClB,GACCa,EAAAA,IAAC,MAAA,CACC,UAAU,6BACV,wBAAyB,CAAEM,OAAQnB,EAASoB,OAAAA,CAAQ,CAAE,CAAA,EAG5D,SAECC,EAAA,CACC,SAAA,CAAAR,MAAC,QAAA,CAAOf,SAAAA,EAAKc,cAAcrB,EAASE,KAAK,EAAE,EAC3CoB,EAAAA,IAAC,OAAA,CAAK,KAAK,SAAS,QAAQ,KAAA,CAAK,CAAA,CAAA,CACnC,CAAA,EACF,CAEJ"}