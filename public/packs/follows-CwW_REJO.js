import{j as e}from"./client-wT6vtYO_.js";import{u as C,r as s,d as L}from"./index-BdTwX--g.js";import{H as y}from"./Helmet-ZVWnGmbg.js";import{L as R}from"./short_number-WomMu2iV.js";import{c as B}from"./index.module-sM2fS0Fl.js";import{S as D}from"./person-DcoiY4fW.js";import{u as E,a as S,cU as F,dO as I,dP as H,ap as N}from"./useSelectableClick-DeaJbL2_.js";import{d as _}from"./api-B2m7efUy.js";import{A as q}from"./account-0xT8MC3X.js";import{C as P}from"./column-B4vwzadM.js";import{C as T}from"./column_header-FN7GyEAs.js";import{C as U}from"./column_search_header-reFrdFDN.js";import{S as z}from"./scrollable_list-lNykmhKA.js";import{M as g}from"./message-UFwkQlnu.js";import"./numbers-CGZQWBYL.js";import"./index-CAH5FfLP.js";import"./ready-DpOgoWSg.js";import"./initial_state-BP3UcUr4.js";import"./load_locale-tOpKhmcM.js";import"./index-lj9VQs0f.js";import"./index-DizoKcfL.js";import"./content_warning-DZ8mar1O.js";import"./skeleton-D9NbTYr9.js";import"./index-BZWHsOPk.js";import"./counters-BJ0cOeaq.js";import"./follow_button-BdqDKUmA.js";import"./loading_indicator-7xMB1U6D.js";import"./verified_badge-CtK79Pb7.js";import"./scroll-BygYx8ga.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";const m=L({title:{id:"onboarding.follows.title",defaultMessage:"Follow people to get started"},search:{id:"onboarding.follows.search",defaultMessage:"Search"},back:{id:"onboarding.follows.back",defaultMessage:"Back"}}),Ce=({multiColumn:a})=>{const i=C(),t=E(),h=S(o=>o.suggestions.isLoading),M=S(o=>o.suggestions.items),[j,b]=s.useState([]),[d,n]=s.useState("remove"),[x,p]=s.useState(!1),[w,l]=s.useState(!1);s.useEffect(()=>(t(F()),()=>{t(I("home"))}),[t]);const k=s.useCallback(()=>{n("add")},[n]),A=s.useCallback(()=>{n("remove"),l(!1)},[n,l]),c=s.useRef(null),v=B(o=>{if(c.current&&c.current.abort(),o.trim().length===0){l(!1),b([]);return}l(!0),p(!0),c.current=new AbortController,_("GET","v1/accounts/search",{signal:c.current.signal,params:{q:o}}).then(u=>(t(H(u)),t(N(u.map(f=>f.id))),b(u.map(f=>f.id)),p(!1),"")).catch(()=>{p(!1)})},500,{leading:!0,trailing:!0});let r;return d==="add"&&w?r=j:r=M.map(o=>o.account_id),e.jsxs(P,{bindToDocument:!a,label:i.formatMessage(m.title),children:[e.jsx(T,{title:i.formatMessage(m.title),icon:"person",iconComponent:D,multiColumn:a,showBackButton:!0}),e.jsx(U,{placeholder:i.formatMessage(m.search),onBack:A,onActivate:k,active:d==="add",onSubmit:v}),e.jsx(z,{scrollKey:"follow_recommendations",trackScroll:!a,bindToDocument:!a,showLoading:(h||x)&&r.length===0,hasMore:!1,isLoading:h||x,footer:e.jsxs(e.Fragment,{children:[r.length>0&&e.jsx("div",{className:"spacer"}),e.jsx("div",{className:"column-footer",children:e.jsx(R,{className:"button button--block",to:"/home",children:e.jsx(g,{id:"onboarding.follows.done",defaultMessage:"Done"})})})]}),emptyMessage:d==="remove"?e.jsx(g,{id:"onboarding.follows.empty",defaultMessage:"Unfortunately, no results can be shown right now. You can try using search or browsing the explore page to find people to follow, or try again later."}):e.jsx(g,{id:"lists.no_results_found",defaultMessage:"No results found."}),children:r.map(o=>e.jsx(q,{id:o,withBio:!0,withMenu:!1},o))}),e.jsxs(y,{children:[e.jsx("title",{children:i.formatMessage(m.title)}),e.jsx("meta",{name:"robots",content:"noindex"})]})]})};export{Ce as Follows,Ce as default};
//# sourceMappingURL=follows-CwW_REJO.js.map
