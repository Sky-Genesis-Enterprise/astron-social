var w=Object.defineProperty;var T=(t,r,e)=>r in t?w(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var l=(t,r,e)=>T(t,typeof r!="symbol"?r+"":r,e);import{j as s}from"./client-wT6vtYO_.js";import{P as i}from"./short_number-WomMu2iV.js";import"./index-BdTwX--g.js";import{j as C,dd as k,y as B,z as H,f as P,dp as S,df as I,H as E,dq as F,a as v}from"./useSelectableClick-DeaJbL2_.js";import{A as R}from"./account-0xT8MC3X.js";import{T as U}from"./timeline_hint-0fHjsenK.js";import{C as q,A as z,L as D}from"./limited_account_hint-Dq-fgEQD.js";import{B as K}from"./bundle_column_error-Cn2E6aKL.js";import{g as G}from"./content_warning-DZ8mar1O.js";import{L as J}from"./loading_indicator-7xMB1U6D.js";import{S as N}from"./scrollable_list-lNykmhKA.js";import{C as b}from"./column-Cq3LGCyF.js";import{M as m}from"./message-UFwkQlnu.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./index-BZWHsOPk.js";import"./counters-BJ0cOeaq.js";import"./follow_button-BdqDKUmA.js";import"./skeleton-D9NbTYr9.js";import"./verified_badge-CtK79Pb7.js";import"./column_header-FN7GyEAs.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./Helmet-ZVWnGmbg.js";import"./notifications-CKA6ESoP.js";import"./notifications_active-fill-Bd5B72X1.js";import"./domain_blocks-CYnp0hav.js";import"./reports-DBOcsYZF.js";import"./group-Xgbn5g1L.js";import"./person-DcoiY4fW.js";import"./content_copy-CD6CbhEl.js";import"./formatted_date-jZOhBAMt.js";import"./react-textarea-autosize.browser.esm-GiEI5riT.js";import"./use-isomorphic-layout-effect.browser.esm-D-sFEUJ5.js";import"./permissions-Djze7cmB.js";import"./avatar_group-PUipFlog.js";import"./avatar_overlay-BeG39OK4.js";import"./column-B4vwzadM.js";import"./scroll-BygYx8ga.js";import"./gif-BtN1axMk.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";const O=(t,{params:{acct:r,id:e}})=>{const o=e||t.accounts_map[k(r)];return o?{accountId:o,remote:t.getIn(["accounts",o,"acct"])!==t.getIn(["accounts",o,"username"]),remoteUrl:t.getIn(["accounts",o,"url"]),isAccount:!!t.getIn(["accounts",o]),accountIds:t.getIn(["user_lists","following",o,"items"]),hasMore:!!t.getIn(["user_lists","following",o,"next"]),isLoading:t.getIn(["user_lists","following",o,"isLoading"],!0),suspended:t.getIn(["accounts",o,"suspended"],!1),hideCollections:t.getIn(["accounts",o,"hide_collections"],!1),hidden:G(t,o),blockedBy:t.getIn(["relationships",o,"blocked_by"],!1)}:{isLoading:!0}},y=({accountId:t,url:r})=>{const e=v(n=>{var a;return(a=n.accounts.get(t))==null?void 0:a.acct}),o=e?e.split("@")[1]:void 0;return s.jsx(U,{url:r,message:s.jsx(m,{id:"hints.profiles.follows_may_be_missing",defaultMessage:"Follows for this profile may be missing."}),label:s.jsx(m,{id:"hints.profiles.see_more_follows",defaultMessage:"See more follows on {domain}",values:{domain:s.jsx("strong",{children:o})}})})};class j extends B{constructor(){super(...arguments);l(this,"handleLoadMore",E(()=>{this.props.dispatch(F(this.props.accountId))},300,{leading:!0}))}_load(){const{accountId:e,isAccount:o,dispatch:n}=this.props;o||n(P(e)),n(S(e))}componentDidMount(){const{params:{acct:e},accountId:o,dispatch:n}=this.props;o?this._load():n(I(e))}componentDidUpdate(e){const{params:{acct:o},accountId:n,dispatch:a}=this.props;e.accountId!==n&&n?this._load():e.params.acct!==o&&a(I(o))}render(){const{accountId:e,accountIds:o,hasMore:n,blockedBy:a,isAccount:_,multiColumn:p,isLoading:M,suspended:d,hidden:u,remote:f,remoteUrl:h,hideCollections:A}=this.props;if(!_)return s.jsx(K,{multiColumn:p,errorType:"routing"});if(!o)return s.jsx(b,{children:s.jsx(J,{})});let c;const g=a||d||u;d?c=s.jsx(m,{id:"empty_column.account_suspended",defaultMessage:"Account suspended"}):u?c=s.jsx(D,{accountId:e}):a?c=s.jsx(m,{id:"empty_column.account_unavailable",defaultMessage:"Profile unavailable"}):A&&o.isEmpty()?c=s.jsx(m,{id:"empty_column.account_hides_collections",defaultMessage:"This user has chosen to not make this information available"}):f&&o.isEmpty()?c=s.jsx(y,{accountId:e,url:h}):c=s.jsx(m,{id:"account.follows.empty",defaultMessage:"This user doesn't follow anyone yet."});const L=f?s.jsx(y,{accountId:e,url:h}):null;return s.jsxs(b,{children:[s.jsx(q,{}),s.jsx(N,{scrollKey:"following",hasMore:!g&&n,isLoading:M,onLoadMore:this.handleLoadMore,prepend:s.jsx(z,{accountId:this.props.accountId,hideTabs:!0}),alwaysPrepend:!0,append:L,emptyMessage:c,bindToDocument:!p,children:g?[]:o.map(x=>s.jsx(R,{id:x},x))})]})}}l(j,"propTypes",{params:i.shape({acct:i.string,id:i.string}).isRequired,accountId:i.string,dispatch:i.func.isRequired,accountIds:H.list,hasMore:i.bool,isLoading:i.bool,blockedBy:i.bool,isAccount:i.bool,suspended:i.bool,hidden:i.bool,remote:i.bool,remoteUrl:i.string,multiColumn:i.bool});const Qo=C(O)(j);export{Qo as default};
//# sourceMappingURL=following-index-chycDG6T.js.map
