{"version":3,"file":"trends-DoB3pV3p.js","sources":["../../app/javascript/mastodon/features/ui/components/column_link.tsx","../../app/javascript/mastodon/features/navigation_panel/components/trends.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport { useRouteMatch, NavLink } from 'react-router-dom';\n\nimport { Icon } from 'mastodon/components/icon';\nimport type { IconProp } from 'mastodon/components/icon';\n\nexport const ColumnLink: React.FC<{\n  icon: React.ReactNode;\n  iconComponent?: IconProp;\n  activeIcon?: React.ReactNode;\n  activeIconComponent?: IconProp;\n  isActive?: (match: unknown, location: { pathname: string }) => boolean;\n  text: string;\n  to?: string;\n  href?: string;\n  method?: string;\n  badge?: React.ReactNode;\n  transparent?: boolean;\n  optional?: boolean;\n  className?: string;\n  id?: string;\n}> = ({\n  icon,\n  activeIcon,\n  iconComponent,\n  activeIconComponent,\n  text,\n  to,\n  href,\n  method,\n  badge,\n  transparent,\n  optional,\n  ...other\n}) => {\n  const match = useRouteMatch(to ?? '');\n  const className = classNames('column-link', {\n    'column-link--transparent': transparent,\n    'column-link--optional': optional,\n  });\n  const badgeElement =\n    typeof badge !== 'undefined' ? (\n      <span className='column-link__badge'>{badge}</span>\n    ) : null;\n  const iconElement = iconComponent ? (\n    <Icon\n      id={typeof icon === 'string' ? icon : ''}\n      icon={iconComponent}\n      className='column-link__icon'\n    />\n  ) : (\n    icon\n  );\n  const activeIconElement =\n    activeIcon ??\n    (activeIconComponent ? (\n      <Icon\n        id={typeof icon === 'string' ? icon : ''}\n        icon={activeIconComponent}\n        className='column-link__icon'\n      />\n    ) : (\n      iconElement\n    ));\n  const active = !!match;\n\n  if (href) {\n    return (\n      <a href={href} className={className} data-method={method} {...other}>\n        {active ? activeIconElement : iconElement}\n        <span>{text}</span>\n        {badgeElement}\n      </a>\n    );\n  } else if (to) {\n    return (\n      <NavLink to={to} className={className} {...other}>\n        {active ? activeIconElement : iconElement}\n        <span>{text}</span>\n        {badgeElement}\n      </NavLink>\n    );\n  } else {\n    return null;\n  }\n};\n","import { useEffect } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport { Link } from 'react-router-dom';\n\nimport type { List as ImmutableList, Map as ImmutableMap } from 'immutable';\n\nimport { fetchTrendingHashtags } from 'mastodon/actions/trends';\nimport { ImmutableHashtag as Hashtag } from 'mastodon/components/hashtag';\nimport { showTrends } from 'mastodon/initial_state';\nimport { useAppSelector, useAppDispatch } from 'mastodon/store';\n\nexport const Trends: React.FC = () => {\n  const dispatch = useAppDispatch();\n  const trends = useAppSelector(\n    (state) =>\n      state.trends.getIn(['tags', 'items']) as ImmutableList<\n        ImmutableMap<string, unknown>\n      >,\n  );\n\n  useEffect(() => {\n    dispatch(fetchTrendingHashtags());\n\n    const refreshInterval = setInterval(() => {\n      dispatch(fetchTrendingHashtags());\n    }, 900 * 1000);\n\n    return () => {\n      clearInterval(refreshInterval);\n    };\n  }, [dispatch]);\n\n  if (!showTrends || trends.isEmpty()) {\n    return null;\n  }\n\n  return (\n    <div className='navigation-panel__portal'>\n      <div className='getting-started__trends'>\n        <h4>\n          <Link to={'/explore/tags'}>\n            <FormattedMessage\n              id='trends.trending_now'\n              defaultMessage='Trending now'\n            />\n          </Link>\n        </h4>\n\n        {trends.take(4).map((hashtag) => (\n          <Hashtag key={hashtag.get('name') as string} hashtag={hashtag} />\n        ))}\n      </div>\n    </div>\n  );\n};\n"],"names":["ColumnLink","icon","activeIcon","iconComponent","activeIconComponent","text","to","href","method","badge","transparent","optional","other","match","useRouteMatch","className","classNames","badgeElement","iconElement","jsx","Icon","activeIconElement","active","jsxs","NavLink","Trends","dispatch","useAppDispatch","trends","useAppSelector","state","getIn","useEffect","fetchTrendingHashtags","refreshInterval","setInterval","clearInterval","showTrends","isEmpty","Link","FormattedMessage","take","map","hashtag","Hashtag","get"],"mappings":"qYAMO,MAAMA,EAeRA,CAAC,CACJC,KAAAA,EACAC,WAAAA,EACAC,cAAAA,EACAC,oBAAAA,EACAC,KAAAA,EACAC,GAAAA,EACAC,KAAAA,EACAC,OAAAA,EACAC,MAAAA,EACAC,YAAAA,EACAC,SAAAA,EACA,GAAGC,CACL,IAAM,CACJ,MAAMC,EAAQC,EAAcR,GAAM,EAAE,EAC9BS,EAAYC,EAAW,cAAe,CAC1C,2BAA4BN,EAC5B,wBAAyBC,CAAAA,CAC1B,EACKM,EACJ,OAAOR,EAAU,UACd,OAAA,CAAK,UAAU,qBAAsBA,SAAAA,CAAAA,CAAM,EAC1C,KACAS,EAAcf,EAClBgB,EAAAA,IAACC,EAAA,CACC,GAAI,OAAOnB,GAAS,SAAWA,EAAO,GACtC,KAAME,EACN,UAAU,oBAAmB,EAG/BF,EAEIoB,EACJnB,IACCE,EACCe,EAAAA,IAACC,GACC,GAAI,OAAOnB,GAAS,SAAWA,EAAO,GACtC,KAAMG,EACN,UAAU,oBAAmB,EAG/Bc,GAEEI,EAAS,CAAC,CAACT,EAEjB,OAAIN,SAEC,IAAA,CAAE,KAAAA,EAAY,UAAAQ,EAAsB,cAAaP,EAAQ,GAAII,EAC3DU,SAAAA,CAAAA,EAASD,EAAoBH,EAC9BC,EAAAA,IAAC,QAAMd,SAAAA,CAAAA,CAAK,EACXY,CAAAA,EACH,EAEOX,EAEPiB,EAAAA,KAACC,EAAA,CAAQ,GAAAlB,EAAQ,UAAAS,EAAsB,GAAIH,EACxCU,SAAAA,CAAAA,EAASD,EAAoBH,EAC9BC,EAAAA,IAAC,QAAMd,SAAAA,CAAAA,CAAK,EACXY,CAAAA,EACH,EAGK,IAEX,ECxEaQ,EAAmBA,IAAM,CACpC,MAAMC,EAAWC,EAAAA,EACXC,EAASC,EACZC,GACCA,EAAMF,OAAOG,MAAM,CAAC,OAAQ,OAAO,CAAC,CAGxC,EAcA,OAZAC,EAAAA,UAAU,IAAM,CACdN,EAASO,GAAuB,EAEhC,MAAMC,EAAkBC,YAAY,IAAM,CACxCT,EAASO,GAAuB,CAAA,EAC/B,IAAM,GAAI,EAEb,MAAO,IAAM,CACXG,cAAcF,CAAe,CAAA,CAC/B,EACC,CAACR,CAAQ,CAAC,EAET,CAACW,GAAcT,EAAOU,UACjB,WAIN,MAAA,CAAI,UAAU,2BACb,SAAAf,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAJ,EAAAA,IAAC,KAAA,CACC,SAAAA,EAAAA,IAACoB,EAAA,CAAK,GAAI,gBACR,SAAApB,EAAAA,IAACqB,EAAA,CACC,yBACA,eAAe,cAAA,CAAc,CAAA,CAEjC,EACF,EAECZ,EAAOa,KAAK,CAAC,EAAEC,IAAKC,GACnBxB,EAAAA,IAACyB,EAAA,CAA4C,QAAAD,CAAA,EAA/BA,EAAQE,IAAI,MAAM,EACjC,CAAA,CAAA,CACH,CAAA,CACF,CAEJ"}