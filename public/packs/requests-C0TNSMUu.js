import{j as e}from"./client-wT6vtYO_.js";import{u as D,r as n,d as v}from"./index-BdTwX--g.js";import{H as T}from"./Helmet-ZVWnGmbg.js";import{bs as j,bt as q,d$ as B,e0 as z,bK as L,c3 as H,A as P,b as E,e1 as F,e2 as I,aM as $,o as R,e3 as O,e4 as Y,I as K}from"./useSelectableClick-DeaJbL2_.js";import{P as V,S as G}from"./policy_controls-dBLdekz7.js";import{S as W}from"./inventory_2-Cl3pumXb.js";import{ak as J,b as w,S}from"./content_warning-DZ8mar1O.js";import{C as y}from"./check_box-DEDjOsQz.js";import{C as Q}from"./column-B4vwzadM.js";import{C as U}from"./column_header-FN7GyEAs.js";import{S as X}from"./scrollable_list-lNykmhKA.js";import{c as Z}from"./index-DizoKcfL.js";import{d as ee,L as te}from"./short_number-WomMu2iV.js";import{S as se}from"./delete-U0WLrPiU.js";import{i as ie}from"./reports-DBOcsYZF.js";import"./initial_state-BP3UcUr4.js";import{a as oe}from"./numbers-CGZQWBYL.js";import{S as ne}from"./setting_toggle-56grnhBH.js";import{M as C}from"./message-UFwkQlnu.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./dropdown_selector-TPsaB6cz.js";import"./info-HtHaDKcq.js";import"./skeleton-D9NbTYr9.js";import"./done-illPsXew.js";import"./scroll-BygYx8ga.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";import"./loading_indicator-7xMB1U6D.js";import"./index-Dk6IJ02w.js";const ae=J(),M=v({accept:{id:"notification_requests.accept",defaultMessage:"Accept"},dismiss:{id:"notification_requests.dismiss",defaultMessage:"Dismiss"},view:{id:"notification_requests.view",defaultMessage:"View notifications"},mute:{id:"account.mute",defaultMessage:"Mute @{name}"},block:{id:"account.block",defaultMessage:"Block @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},more:{id:"status.more",defaultMessage:"More"}}),ce=({id:i,accountId:d,notificationsCount:c,checked:l,showCheckbox:r,toggleCheck:s})=>{const a=j(),t=q(h=>ae(h,d)),m=D(),{push:g}=ee(),f=n.useCallback(()=>{a(B({id:i}))},[a,i]),x=n.useCallback(()=>{a(z({id:i}))},[a,i]),_=n.useCallback(()=>{a(L(t))},[a,t]),b=n.useCallback(()=>{a(H(t))},[a,t]),k=n.useCallback(()=>{a(ie(t))},[a,t]),N=n.useCallback(()=>{g(`/notifications/requests/${i}`)},[g,i]),A=[{text:m.formatMessage(M.view),action:N},null,{text:m.formatMessage(M.accept),action:x},null,{text:m.formatMessage(M.mute,{name:t.username}),action:_,dangerous:!0},{text:m.formatMessage(M.block,{name:t.username}),action:b,dangerous:!0},{text:m.formatMessage(M.report,{name:t.username}),action:k,dangerous:!0}],o=n.useCallback(()=>{s(i)},[s,i]),p=n.useCallback(h=>{r&&(s(i),h.preventDefault(),h.stopPropagation())},[s,i,r]);return e.jsxs("div",{className:Z("notification-request",r&&"notification-request--forced-checkbox"),onClick:p,children:[e.jsx("div",{className:"notification-request__checkbox","aria-hidden":!r,children:e.jsx(y,{checked:l,onChange:o})}),e.jsxs(te,{to:`/notifications/requests/${i}`,className:"notification-request__link",onClick:p,title:t==null?void 0:t.acct,children:[e.jsx(P,{account:t,size:40,counter:oe(c)}),e.jsxs("div",{className:"notification-request__name",children:[e.jsx("div",{className:"notification-request__name__display-name",children:e.jsx("bdi",{children:e.jsx("strong",{dangerouslySetInnerHTML:{__html:t==null?void 0:t.get("display_name_html")}})})}),e.jsxs("span",{children:["@",t==null?void 0:t.get("acct")]})]})]}),e.jsxs("div",{className:"notification-request__actions",children:[e.jsx(E,{iconComponent:se,onClick:f,title:m.formatMessage(M.dismiss)}),e.jsx(w,{items:A,icon:"ellipsis-h",iconComponent:S,title:m.formatMessage(M.more)})]})]})},u=v({title:{id:"notification_requests.title",defaultMessage:"Filtered notifications"},maximize:{id:"notification_requests.maximize",defaultMessage:"Maximize"},more:{id:"status.more",defaultMessage:"More"},acceptMultiple:{id:"notification_requests.accept_multiple",defaultMessage:"{count, plural, one {Accept # request…} other {Accept # requests…}}"},dismissMultiple:{id:"notification_requests.dismiss_multiple",defaultMessage:"{count, plural, one {Dismiss # request…} other {Dismiss # requests…}}"},confirmAcceptMultipleTitle:{id:"notification_requests.confirm_accept_multiple.title",defaultMessage:"Accept notification requests?"},confirmAcceptMultipleMessage:{id:"notification_requests.confirm_accept_multiple.message",defaultMessage:"You are about to accept {count, plural, one {one notification request} other {# notification requests}}. Are you sure you want to proceed?"},confirmAcceptMultipleButton:{id:"notification_requests.confirm_accept_multiple.button",defaultMessage:"{count, plural, one {Accept request} other {Accept requests}}"},confirmDismissMultipleTitle:{id:"notification_requests.confirm_dismiss_multiple.title",defaultMessage:"Dismiss notification requests?"},confirmDismissMultipleMessage:{id:"notification_requests.confirm_dismiss_multiple.message",defaultMessage:"You are about to dismiss {count, plural, one {one notification request} other {# notification requests}}. You won't be able to easily access {count, plural, one {it} other {them}} again. Are you sure you want to proceed?"},confirmDismissMultipleButton:{id:"notification_requests.confirm_dismiss_multiple.button",defaultMessage:"{count, plural, one {Dismiss request} other {Dismiss requests}}"}}),re=()=>{const i=j(),d=q(l=>l.settings.get("notifications")),c=n.useCallback((l,r)=>{i($(["notifications",...l],r))},[i]);return e.jsxs("div",{className:"column-settings",children:[e.jsx("section",{children:e.jsx("div",{className:"column-settings__row",children:e.jsx(ne,{prefix:"notifications",settings:d,settingPath:["minimizeFilteredBanner"],onChange:c,label:e.jsx(C,{id:"notification_requests.minimize_banner",defaultMessage:"Minimize filtered notifications banner"})})})}),e.jsx(V,{})]})},le=({selectAllChecked:i,toggleSelectAll:d,selectedItems:c,selectionMode:l,setSelectionMode:r})=>{const s=D(),a=j(),t=c.length,m=n.useCallback(()=>{a(R({modalType:"CONFIRM",modalProps:{title:s.formatMessage(u.confirmAcceptMultipleTitle),message:s.formatMessage(u.confirmAcceptMultipleMessage,{count:c.length}),confirm:s.formatMessage(u.confirmAcceptMultipleButton,{count:c.length}),onConfirm:()=>a(O({ids:c}))}}))},[a,s,c]),g=n.useCallback(()=>{a(R({modalType:"CONFIRM",modalProps:{title:s.formatMessage(u.confirmDismissMultipleTitle),message:s.formatMessage(u.confirmDismissMultipleMessage,{count:c.length}),confirm:s.formatMessage(u.confirmDismissMultipleButton,{count:c.length}),onConfirm:()=>a(Y({ids:c}))}}))},[a,s,c]),f=n.useCallback(()=>{r(b=>!b)},[r]),x=[{text:s.formatMessage(u.acceptMultiple,{count:t}),action:m},{text:s.formatMessage(u.dismissMultiple,{count:t}),action:g}],_=n.useCallback(()=>{r(!0),d()},[r,d]);return e.jsxs("div",{className:"column-header__select-row",children:[e.jsx("div",{className:"column-header__select-row__checkbox",children:e.jsx(y,{checked:i,indeterminate:t>0&&!i,onChange:_})}),e.jsx(w,{items:x,icons:"ellipsis-h",iconComponent:S,direction:"right",title:s.formatMessage(u.more),children:e.jsxs("button",{className:"dropdown-button column-header__select-row__select-menu",disabled:c.length===0,children:[e.jsxs("span",{className:"dropdown-button__label",children:[t," selected"]}),e.jsx(K,{id:"down",icon:G})]})}),e.jsx("div",{className:"column-header__select-row__mode-button",children:e.jsx("button",{className:"text-btn",tabIndex:0,onClick:f,children:l?e.jsx(C,{id:"notification_requests.exit_selection",defaultMessage:"Done"}):e.jsx(C,{id:"notification_requests.edit_selection",defaultMessage:"Edit"})})})]})},Je=({multiColumn:i})=>{const d=n.useRef(),c=D(),l=j(),r=q(o=>o.notificationRequests.isLoading),s=q(o=>o.notificationRequests.items),a=q(o=>!!o.notificationRequests.next),[t,m]=n.useState(!1),[g,f]=n.useState([]),[x,_]=n.useState(!1),b=n.useCallback(()=>{var o;(o=d.current)==null||o.scrollTop()},[d]),k=n.useCallback(o=>{f(p=>{const h=p.indexOf(o);return h>-1?p.splice(h,1):p.push(o),_(p.length===s.length),[...p]})},[f,s]),N=n.useCallback(()=>{_(o=>(f(o?[]:s.map(p=>p.id)),!o))},[s]),A=n.useCallback(()=>{l(F())},[l]);return n.useEffect(()=>{l(I())},[l]),e.jsxs(Q,{bindToDocument:!i,ref:d,label:c.formatMessage(u.title),children:[e.jsx(U,{icon:"archive",iconComponent:W,title:c.formatMessage(u.title),onClick:b,multiColumn:i,showBackButton:!0,appendContent:s.length>0&&e.jsx(le,{selectionMode:t,setSelectionMode:m,selectAllChecked:x,toggleSelectAll:N,selectedItems:g}),children:e.jsx(re,{})}),e.jsx(X,{scrollKey:"notification_requests",trackScroll:!i,bindToDocument:!i,isLoading:r,showLoading:r&&s.size===0,hasMore:a,onLoadMore:A,emptyMessage:e.jsx(C,{id:"empty_column.notification_requests",defaultMessage:"All clear! There is nothing here. When you receive new notifications, they will appear here according to your settings."}),children:s.map(o=>e.jsx(ce,{id:o.id,accountId:o.account_id,notificationsCount:o.notifications_count,showCheckbox:t,checked:g.includes(o.id),toggleCheck:k},o.id))}),e.jsxs(T,{children:[e.jsx("title",{children:c.formatMessage(u.title)}),e.jsx("meta",{name:"robots",content:"noindex"})]})]})};export{Je as NotificationRequests,Je as default};
//# sourceMappingURL=requests-C0TNSMUu.js.map
