import{j as t}from"./client-wT6vtYO_.js";import{u as D,r as p,d as U}from"./index-BdTwX--g.js";import{c as N}from"./index-DizoKcfL.js";import{L as q,S as B}from"./short_number-WomMu2iV.js";import{b as E,S as P,D as H}from"./content_warning-DZ8mar1O.js";import{d as V,a as A,u as W,bH as J,bI as K,bJ as $,bK as z,A as G,bL as F,o as T,bM as Q,bN as X,a9 as Y,bO as Z,bP as ee}from"./useSelectableClick-DeaJbL2_.js";import{B as I}from"./index-BZWHsOPk.js";import{F as se}from"./counters-BJ0cOeaq.js";import{F as te}from"./follow_button-BdqDKUmA.js";import{R as oe}from"./index-CAH5FfLP.js";import{S as L}from"./skeleton-D9NbTYr9.js";import{V as ae}from"./verified_badge-CtK79Pb7.js";import{e as S}from"./initial_state-BP3UcUr4.js";import{M as ne}from"./message-UFwkQlnu.js";const c=U({follow:{id:"account.follow",defaultMessage:"Follow"},unfollow:{id:"account.unfollow",defaultMessage:"Unfollow"},cancel_follow_request:{id:"account.cancel_follow_request",defaultMessage:"Withdraw follow request"},unblock:{id:"account.unblock_short",defaultMessage:"Unblock"},unmute:{id:"account.unmute_short",defaultMessage:"Unmute"},mute_notifications:{id:"account.mute_notifications_short",defaultMessage:"Mute notifications"},unmute_notifications:{id:"account.unmute_notifications_short",defaultMessage:"Unmute notifications"},mute:{id:"account.mute_short",defaultMessage:"Mute"},block:{id:"account.block_short",defaultMessage:"Block"},more:{id:"status.more",defaultMessage:"More"},addToLists:{id:"account.add_or_remove_from_list",defaultMessage:"Add or Remove from lists"},openOriginalPage:{id:"account.open_original_page",defaultMessage:"Open original page"}}),be=({id:o,size:m=46,hidden:y,minimal:d,defaultAction:r,withBio:M,withMenu:C=!0})=>{const i=D(),{signedIn:x}=V(),e=A(n=>n.accounts.get(o)),s=A(n=>n.relationships.get(o)),a=W(),f=e==null?void 0:e.url,h=(e==null?void 0:e.acct)!==(e==null?void 0:e.username),O=p.useCallback(()=>{s!=null&&s.blocking?a(J(o)):a(K(o))},[a,o,s]),R=p.useCallback(()=>{s!=null&&s.muting?a($(o)):a(z(e))},[a,o,e,s]),b=p.useMemo(()=>{let n=[];if(r==="mute"){const _=()=>{a(F(o,!0))},l=()=>{a(F(o,!1))};n=[{text:i.formatMessage(s!=null&&s.muting_notifications?c.unmute_notifications:c.mute_notifications),action:s!=null&&s.muting_notifications?l:_}]}else if(r!=="block"&&(h&&f&&n.push({text:i.formatMessage(c.openOriginalPage),href:f}),x)){const _=()=>{const l=()=>{a(T({modalType:"LIST_ADDER",modalProps:{accountId:o}}))};s!=null&&s.following||s!=null&&s.requested||o===S?l():a(T({modalType:"CONFIRM_FOLLOW_TO_LIST",modalProps:{accountId:o,onConfirm:()=>{Q(o).then(g=>{a(X({relationship:g,alreadyFollowing:!1})),l()}).catch(g=>{a(Y(g))})}}}))};if(n.push({text:i.formatMessage(c.addToLists),action:_}),o!==S&&(s!=null&&s.following||s!=null&&s.requested)){const l=()=>{s.endorsed?a(Z(o)):a(ee(o))};n.push({text:i.formatMessage(s.endorsed?{id:"account.unendorse"}:{id:"account.endorse"}),action:l})}}return n},[a,i,o,f,s,r,h,x]);if(y)return t.jsxs(t.Fragment,{children:[e==null?void 0:e.display_name,e==null?void 0:e.username]});let u,j;b.length>0&&C&&(j=t.jsx(E,{items:b,icon:"ellipsis-h",iconComponent:P,title:i.formatMessage(c.more)})),r==="block"?u=t.jsx(I,{text:i.formatMessage(s!=null&&s.blocking?c.unblock:c.block),onClick:O}):r==="mute"?u=t.jsx(I,{text:i.formatMessage(s!=null&&s.muting?c.unmute:c.mute),onClick:R}):u=t.jsx(te,{accountId:o});let w;e!=null&&e.mute_expires_at&&(w=t.jsxs(t.Fragment,{children:["Â· ",t.jsx(oe,{timestamp:e.mute_expires_at,futureDate:!0})]}));let k;const v=e==null?void 0:e.fields.find(n=>!!n.verified_at);return v&&(k=t.jsx(ae,{link:v.value})),t.jsx("div",{className:N("account",{"account--minimal":d}),children:t.jsxs("div",{className:N("account__wrapper",{"account__wrapper--with-bio":e&&M}),children:[t.jsxs("div",{className:"account__info-wrapper",children:[t.jsxs(q,{className:"account__display-name",title:e==null?void 0:e.acct,to:`/@${e==null?void 0:e.acct}`,"data-hover-card-account":o,children:[t.jsx("div",{className:"account__avatar-wrapper",children:e?t.jsx(G,{account:e,size:m}):t.jsx(L,{width:m,height:m})}),t.jsxs("div",{className:"account__contents",children:[t.jsx(H,{account:e}),!d&&t.jsx("div",{className:"account__details",children:e?t.jsxs(t.Fragment,{children:[t.jsx(B,{value:e.followers_count,renderer:se})," ",k," ",w]}):t.jsx(L,{width:"7ch"})})]})]}),e&&M&&(e.note.length>0?t.jsx("div",{className:"account__note translate",dangerouslySetInnerHTML:{__html:e.note_emojified}}):t.jsx("div",{className:"account__note account__note--missing",children:t.jsx(ne,{id:"account.no_bio",defaultMessage:"No description provided."})}))]}),!d&&t.jsxs("div",{className:"account__relationship",children:[j,u]})]})})};export{be as A};
//# sourceMappingURL=account-0xT8MC3X.js.map
