import{j as t}from"./client-wT6vtYO_.js";import{r}from"./index-BdTwX--g.js";import{E as L,a as R,b as W}from"./embedded_status_content-Dm1KuweQ.js";import{u as q,a as x,a3 as B,A as P,I as M}from"./useSelectableClick-DeaJbL2_.js";import{D as U,ag as X}from"./content_warning-DZ8mar1O.js";import{d as Y}from"./short_number-WomMu2iV.js";import{M as C}from"./message-UFwkQlnu.js";const Z=({statusId:i})=>{const g=Y(),l=r.useRef(),h=q(),e=x(o=>o.statuses.get(i)),d=x(o=>o.accounts.get(e==null?void 0:e.get("account"))),S=r.useCallback(({clientX:o,clientY:s})=>{l.current=[o,s]},[l]),k=r.useCallback(({clientX:o,clientY:s,target:n,button:a,ctrlKey:b,metaKey:_})=>{const[D,z]=l.current??[0,0],[H,F]=[Math.abs(o-D),Math.abs(s-z)];let c=n;for(;c;){if(c.localName==="button"||c.localName==="a"||c.localName==="label")return;c=c.parentNode}if(H+F<5&&d){const j=`/@${d.acct}/${i}`;a===0&&!(b||_)?g.push(j):(a===1||a===0&&(b||_))&&window.open(j,"_blank","noopener")}l.current=null},[l,i,d,g]),v=r.useCallback(({currentTarget:o})=>{const s=o.querySelectorAll(".custom-emoji");for(const n of s){const a=n.getAttribute("data-original");a&&(n.src=a)}},[]),y=r.useCallback(({currentTarget:o})=>{const s=o.querySelectorAll(".custom-emoji");for(const n of s){const a=n.getAttribute("data-static");a&&(n.src=a)}},[]),A=r.useCallback(()=>{h(B(i))},[h,i]);if(!e)return null;const N=e.get("contentHtml"),m=e.get("spoilerHtml"),f=e.get("poll"),E=e.get("language"),w=e.get("mentions"),u=!e.get("hidden")||!m,p=e.get("media_attachments").size;return t.jsxs("div",{className:"notification-group__embedded-status",role:"button",tabIndex:-1,onMouseDown:S,onMouseUp:k,onMouseEnter:v,onMouseLeave:y,children:[t.jsxs("div",{className:"notification-group__embedded-status__account",children:[t.jsx(P,{account:d,size:16}),t.jsx(U,{account:d})]}),m&&t.jsx(X,{text:m,onClick:A,expanded:u}),(!m||u)&&t.jsx(L,{className:"notification-group__embedded-status__content reply-indicator__content translate",content:N,language:E,mentions:w}),u&&(f||p>0)&&t.jsxs("div",{className:"notification-group__embedded-status__attachments reply-indicator__attachments",children:[!!f&&t.jsxs(t.Fragment,{children:[t.jsx(M,{icon:R,id:"bar-chart-4-bars"}),t.jsx(C,{id:"reply_indicator.poll",defaultMessage:"Poll"})]}),p>0&&t.jsxs(t.Fragment,{children:[t.jsx(M,{icon:W,id:"photo-library"}),t.jsx(C,{id:"reply_indicator.attachments",defaultMessage:"{count, plural, one {# attachment} other {# attachments}}",values:{count:p}})]})]})]})};export{Z as E};
//# sourceMappingURL=embedded_status-CRZOb2jI.js.map
