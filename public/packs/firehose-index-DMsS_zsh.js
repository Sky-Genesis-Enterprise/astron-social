import{j as e}from"./client-wT6vtYO_.js";import{u as N,r as n,d as R}from"./index-BdTwX--g.js";import{H as w}from"./Helmet-ZVWnGmbg.js";import{N as p}from"./short_number-WomMu2iV.js";import{u as M,d as I,a as h,cF as u,cZ as c,c$ as f,aM as P}from"./useSelectableClick-DeaJbL2_.js";import{c as E}from"./content_warning-DZ8mar1O.js";import{a as g,b as L}from"./streaming-BaFGIdWo.js";import{D as x}from"./dismissable_banner-DYkkvrn4.js";import{d as j}from"./initial_state-BP3UcUr4.js";import{C as D}from"./column-B4vwzadM.js";import{C as $}from"./column_header-FN7GyEAs.js";import{S as H}from"./setting_toggle-56grnhBH.js";import{S as T}from"./status_list_container-7VQVJmu6.js";import{M as r}from"./message-UFwkQlnu.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./skeleton-D9NbTYr9.js";import"./close-BsPe8EbX.js";import"./scroll-BygYx8ga.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./index-Dk6IJ02w.js";import"./status_list-DPL_DhlK.js";import"./gif-BtN1axMk.js";import"./info-HtHaDKcq.js";import"./follow_button-BdqDKUmA.js";import"./index-BZWHsOPk.js";import"./loading_indicator-7xMB1U6D.js";import"./verified_badge-CtK79Pb7.js";import"./status_quoted-COu-QToA.js";import"./domain_blocks-CYnp0hav.js";import"./reports-DBOcsYZF.js";import"./status-CiF0hsk4.js";import"./index.es-B0ZBMj49.js";import"./card-CttmBekj.js";import"./avatar_overlay-BeG39OK4.js";import"./toString-Cy1Ecq9L.js";import"./status_content-CaIN8-0B.js";import"./poll-CjurB963.js";import"./permissions-Djze7cmB.js";import"./visibility_icon-DbVVvHFb.js";import"./index-OwtqmxAM.js";import"./load_gap-6rwcZCuh.js";import"./scrollable_list-lNykmhKA.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";const d=R({title:{id:"column.firehose",defaultMessage:"Live feeds"}}),A=()=>{const s=M(),l=h(a=>a.getIn(["settings","firehose"])),t=n.useCallback((a,m)=>s(P(["firehose",...a],m)),[s]);return e.jsx("div",{className:"column-settings",children:e.jsx("section",{children:e.jsx("div",{className:"column-settings__row",children:e.jsx(H,{settings:l,settingPath:["onlyMedia"],onChange:t,label:e.jsx(r,{id:"community.column_settings.media_only",defaultMessage:"Media only"})})})})})},Be=({feedType:s,multiColumn:l})=>{const t=M(),a=N(),{signedIn:m}=I(),b=n.useRef(null),i=h(o=>o.getIn(["settings","firehose","onlyMedia"],!1)),y=h(o=>o.getIn(["timelines",`${s}${i?":media":""}`,"unread"],0)>0),k=n.useCallback(()=>{switch(s){case"community":t(u("COMMUNITY",{other:{onlyMedia:i}}));break;case"public":t(u("PUBLIC",{other:{onlyMedia:i}}));break;case"public:remote":t(u("REMOTE",{other:{onlyMedia:i,onlyRemote:!0}}));break}},[t,i,s]),C=n.useCallback(o=>{switch(s){case"community":t(f({maxId:o,onlyMedia:i}));break;case"public":t(c({maxId:o,onlyMedia:i}));break;case"public:remote":t(c({maxId:o,onlyMedia:i,onlyRemote:!0}));break}},[t,i,s]),v=n.useCallback(()=>{var o;return(o=b.current)==null?void 0:o.scrollTop()},[]);n.useEffect(()=>{let o;switch(s){case"community":t(f({onlyMedia:i})),m&&(o=t(L({onlyMedia:i})));break;case"public":t(c({onlyMedia:i})),m&&(o=t(g({onlyMedia:i})));break;case"public:remote":t(c({onlyMedia:i,onlyRemote:!0})),m&&(o=t(g({onlyMedia:i,onlyRemote:!0})));break}return()=>o==null?void 0:o()},[t,m,s,i]);const _=s==="community"?e.jsx(x,{id:"community_timeline",children:e.jsx(r,{id:"dismissable_banner.community_timeline",defaultMessage:"These are the most recent public posts from people whose accounts are hosted by {domain}.",values:{domain:j}})}):e.jsx(x,{id:"public_timeline",children:e.jsx(r,{id:"dismissable_banner.public_timeline",defaultMessage:"These are the most recent public posts from people on the fediverse that people on {domain} follow.",values:{domain:j}})}),S=s==="community"?e.jsx(r,{id:"empty_column.community",defaultMessage:"The local timeline is empty. Write something publicly to get the ball rolling!"}):e.jsx(r,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"});return e.jsxs(D,{bindToDocument:!l,ref:b,label:a.formatMessage(d.title),children:[e.jsx($,{icon:"globe",iconComponent:E,active:y,title:a.formatMessage(d.title),onPin:k,onClick:v,multiColumn:l,children:e.jsx(A,{})}),e.jsxs("div",{className:"account__section-headline",children:[e.jsx(p,{exact:!0,to:"/public/local",children:e.jsx(r,{tagName:"div",id:"firehose.local",defaultMessage:"This server"})}),e.jsx(p,{exact:!0,to:"/public/remote",children:e.jsx(r,{tagName:"div",id:"firehose.remote",defaultMessage:"Other servers"})}),e.jsx(p,{exact:!0,to:"/public",children:e.jsx(r,{tagName:"div",id:"firehose.all",defaultMessage:"All"})})]}),e.jsx(T,{prepend:_,timelineId:`${s}${i?":media":""}`,onLoadMore:C,trackScroll:!0,scrollKey:"firehose",emptyMessage:S,bindToDocument:!l}),e.jsxs(w,{children:[e.jsx("title",{children:a.formatMessage(d.title)}),e.jsx("meta",{name:"robots",content:"noindex"})]})]})};export{Be as default};
//# sourceMappingURL=firehose-index-DMsS_zsh.js.map
