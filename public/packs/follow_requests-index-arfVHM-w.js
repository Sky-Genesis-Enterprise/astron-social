var z=Object.defineProperty;var b=(o,t,s)=>t in o?z(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var r=(o,t,s)=>b(o,typeof t!="symbol"?t+"":t,s);import{j as e}from"./client-wT6vtYO_.js";import{P as a,L as k}from"./short_number-WomMu2iV.js";import{i as h,d as f}from"./index-BdTwX--g.js";import{H as R}from"./Helmet-ZVWnGmbg.js";import{y as g,z as j,A as S,b as m,S as A,j as _,cu as C,ct as I,x as L,H as T,dv as N}from"./useSelectableClick-DeaJbL2_.js";import{S as P}from"./person_add-Bq7Kcwwn.js";import{S as F}from"./scrollable_list-lNykmhKA.js";import{e as D}from"./initial_state-BP3UcUr4.js";import{C as E}from"./column-Cq3LGCyF.js";import{D as H,ak as B}from"./content_warning-DZ8mar1O.js";import{S as $}from"./close-BsPe8EbX.js";import{M as d}from"./message-UFwkQlnu.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";import"./loading_indicator-7xMB1U6D.js";import"./column_header-FN7GyEAs.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./scroll-BygYx8ga.js";import"./skeleton-D9NbTYr9.js";const p=f({authorize:{id:"follow_request.authorize",defaultMessage:"Authorize"},reject:{id:"follow_request.reject",defaultMessage:"Reject"}});class x extends g{render(){const{intl:t,account:s,onAuthorize:n,onReject:c}=this.props,i={__html:s.get("note_emojified")};return e.jsxs("div",{className:"account-authorize__wrapper",children:[e.jsxs("div",{className:"account-authorize",children:[e.jsxs(k,{to:`/@${s.get("acct")}`,className:"detailed-status__display-name",children:[e.jsx("div",{className:"account-authorize__avatar",children:e.jsx(S,{account:s,size:48})}),e.jsx(H,{account:s})]}),e.jsx("div",{className:"account__header__content translate",dangerouslySetInnerHTML:i})]}),e.jsxs("div",{className:"account--panel",children:[e.jsx("div",{className:"account--panel__button",children:e.jsx(m,{title:t.formatMessage(p.authorize),icon:"check",iconComponent:A,onClick:n})}),e.jsx("div",{className:"account--panel__button",children:e.jsx(m,{title:t.formatMessage(p.reject),icon:"times",iconComponent:$,onClick:c})})]})]})}}r(x,"propTypes",{account:j.record.isRequired,onAuthorize:a.func.isRequired,onReject:a.func.isRequired,intl:a.object.isRequired});const W=h(x),G=()=>{const o=B();return(s,n)=>({account:o(s,n.id)})},K=(o,{id:t})=>({onAuthorize(){o(I(t))},onReject(){o(C(t))}}),U=_(G,K)(W),Y=f({heading:{id:"column.follow_requests",defaultMessage:"Follow requests"}}),J=o=>({accountIds:o.getIn(["user_lists","follow_requests","items"]),isLoading:o.getIn(["user_lists","follow_requests","isLoading"],!0),hasMore:!!o.getIn(["user_lists","follow_requests","next"]),locked:!!o.getIn(["accounts",D,"locked"]),domain:o.getIn(["meta","domain"])});class w extends g{constructor(){super(...arguments);r(this,"handleLoadMore",T(()=>{this.props.dispatch(N())},300,{leading:!0}))}UNSAFE_componentWillMount(){this.props.dispatch(L())}render(){const{intl:s,accountIds:n,hasMore:c,multiColumn:i,locked:q,domain:M,isLoading:l}=this.props,v=e.jsx(d,{id:"empty_column.follow_requests",defaultMessage:"You don't have any follow requests yet. When you receive one, it will show up here."}),y=!q&&n.size>0&&e.jsx("div",{className:"follow_requests-unlocked_explanation",children:e.jsx(d,{id:"follow_requests.unlocked_explanation",defaultMessage:"Even though your account is not locked, the {domain} staff thought you might want to review follow requests from these accounts manually.",values:{domain:M}})});return e.jsxs(E,{bindToDocument:!i,icon:"user-plus",iconComponent:P,heading:s.formatMessage(Y.heading),alwaysShowBackButton:!0,children:[e.jsx(F,{scrollKey:"follow_requests",onLoadMore:this.handleLoadMore,hasMore:c,isLoading:l,showLoading:l&&n.size===0,emptyMessage:v,bindToDocument:!i,prepend:y,children:n.map(u=>e.jsx(U,{id:u},u))}),e.jsx(R,{children:e.jsx("meta",{name:"robots",content:"noindex"})})]})}}r(w,"propTypes",{params:a.object.isRequired,dispatch:a.func.isRequired,hasMore:a.bool,isLoading:a.bool,accountIds:j.list,locked:a.bool,domain:a.string,intl:a.object.isRequired,multiColumn:a.bool});const be=_(J)(h(w));export{be as default};
//# sourceMappingURL=follow_requests-index-arfVHM-w.js.map
