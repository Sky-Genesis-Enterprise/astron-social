import{j as e}from"./client-wT6vtYO_.js";import{r as n,u as C,d as N}from"./index-BdTwX--g.js";import{I as k,O as F,u as S,a as E,o as P,cM as D}from"./useSelectableClick-DeaJbL2_.js";import{c as I}from"./index-DizoKcfL.js";import{D as A}from"./dropdown_selector-TPsaB6cz.js";import{M as l}from"./message-UFwkQlnu.js";const O=o=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...o},n.createElement("path",{d:"M480-360 280-560h400L480-360Z"})),L=({value:o,options:t,disabled:s,onChange:p,placement:u="bottom-end"})=>{const c=n.useRef(null),_=n.useRef(null),[i,r]=n.useState(!1),[a,x]=n.useState(u),w=n.useCallback(()=>{i&&c.current&&c.current instanceof HTMLElement&&c.current.focus({preventScroll:!0}),r(!i)},[i,r]),y=n.useCallback(()=>{i||(c.current=document.activeElement)},[i]),j=n.useCallback(d=>{switch(d.key){case" ":case"Enter":i||(c.current=document.activeElement);break}},[i]),v=n.useCallback(()=>{i&&c.current&&c.current instanceof HTMLElement&&c.current.focus({preventScroll:!0}),r(!1)},[i]),M=n.useCallback(d=>{d.placement&&x(d.placement)},[x]),g=t.find(d=>d.value===o);return e.jsxs("div",{ref:_,children:[e.jsxs("button",{type:"button",onClick:w,onMouseDown:y,onKeyDown:j,disabled:s,className:I("dropdown-button",{active:i}),children:[e.jsx("span",{className:"dropdown-button__label",children:g==null?void 0:g.text}),e.jsx(k,{id:"down",icon:O})]}),e.jsx(F,{show:i,offset:[5,5],placement:a,flip:!0,target:_,popperConfig:{strategy:"fixed",onFirstUpdate:M},children:({props:d,placement:b})=>e.jsx("div",{...d,children:e.jsx("div",{className:`dropdown-animation privacy-dropdown__dropdown ${b}`,children:e.jsx(A,{items:t,value:o,onClose:v,onChange:p,classNamePrefix:"privacy-dropdown"})})})})]})},h=({value:o,options:t,disabled:s,children:p,onChange:u})=>e.jsxs("label",{className:"app-form__toggle",children:[e.jsx("div",{className:"app-form__toggle__label",children:p}),e.jsx("div",{className:"app-form__toggle__toggle",children:e.jsx("div",{children:e.jsx(L,{value:o,onChange:u,disabled:s,options:t})})})]}),f=N({accept:{id:"notifications.policy.accept",defaultMessage:"Accept"},accept_hint:{id:"notifications.policy.accept_hint",defaultMessage:"Show in notifications"},filter:{id:"notifications.policy.filter",defaultMessage:"Filter"},filter_hint:{id:"notifications.policy.filter_hint",defaultMessage:"Send to filtered notifications inbox"},drop:{id:"notifications.policy.drop",defaultMessage:"Ignore"},drop_hint:{id:"notifications.policy.drop_hint",defaultMessage:"Send to the void, never to be seen again"}}),m=(o,t,s)=>{o(s==="drop"?P({modalType:"IGNORE_NOTIFICATIONS",modalProps:{filterType:t}}):D({[t]:s}))},B=()=>{const o=C(),t=S(),s=E(a=>a.notificationPolicy),p=n.useCallback(a=>{m(t,"for_not_following",a)},[t]),u=n.useCallback(a=>{m(t,"for_not_followers",a)},[t]),c=n.useCallback(a=>{m(t,"for_new_accounts",a)},[t]),_=n.useCallback(a=>{m(t,"for_private_mentions",a)},[t]),i=n.useCallback(a=>{m(t,"for_limited_accounts",a)},[t]);if(!s)return null;const r=[{value:"accept",text:o.formatMessage(f.accept),meta:o.formatMessage(f.accept_hint)},{value:"filter",text:o.formatMessage(f.filter),meta:o.formatMessage(f.filter_hint)},{value:"drop",text:o.formatMessage(f.drop),meta:o.formatMessage(f.drop_hint)}];return e.jsxs("section",{children:[e.jsx("h3",{children:e.jsx(l,{id:"notifications.policy.title",defaultMessage:"Manage notifications fromâ€¦"})}),e.jsxs("div",{className:"column-settings__row",children:[e.jsxs(h,{value:s.for_not_following,onChange:p,options:r,children:[e.jsx("strong",{children:e.jsx(l,{id:"notifications.policy.filter_not_following_title",defaultMessage:"People you don't follow"})}),e.jsx("span",{className:"hint",children:e.jsx(l,{id:"notifications.policy.filter_not_following_hint",defaultMessage:"Until you manually approve them"})})]}),e.jsxs(h,{value:s.for_not_followers,onChange:u,options:r,children:[e.jsx("strong",{children:e.jsx(l,{id:"notifications.policy.filter_not_followers_title",defaultMessage:"People not following you"})}),e.jsx("span",{className:"hint",children:e.jsx(l,{id:"notifications.policy.filter_not_followers_hint",defaultMessage:"Including people who have been following you fewer than {days, plural, one {one day} other {# days}}",values:{days:3}})})]}),e.jsxs(h,{value:s.for_new_accounts,onChange:c,options:r,children:[e.jsx("strong",{children:e.jsx(l,{id:"notifications.policy.filter_new_accounts_title",defaultMessage:"New accounts"})}),e.jsx("span",{className:"hint",children:e.jsx(l,{id:"notifications.policy.filter_new_accounts.hint",defaultMessage:"Created within the past {days, plural, one {one day} other {# days}}",values:{days:30}})})]}),e.jsxs(h,{value:s.for_private_mentions,onChange:_,options:r,children:[e.jsx("strong",{children:e.jsx(l,{id:"notifications.policy.filter_private_mentions_title",defaultMessage:"Unsolicited private mentions"})}),e.jsx("span",{className:"hint",children:e.jsx(l,{id:"notifications.policy.filter_private_mentions_hint",defaultMessage:"Filtered unless it's in reply to your own mention or if you follow the sender"})})]}),e.jsxs(h,{value:s.for_limited_accounts,onChange:i,options:r,children:[e.jsx("strong",{children:e.jsx(l,{id:"notifications.policy.filter_limited_accounts_title",defaultMessage:"Moderated accounts"})}),e.jsx("span",{className:"hint",children:e.jsx(l,{id:"notifications.policy.filter_limited_accounts_hint",defaultMessage:"Limited by server moderators"})})]})]})]})};export{B as P,O as S};
//# sourceMappingURL=policy_controls-dBLdekz7.js.map
