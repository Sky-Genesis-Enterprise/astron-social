{"version":3,"file":"initial_state-BP3UcUr4.js","sources":["../../app/javascript/mastodon/initial_state.js"],"sourcesContent":["// @ts-check\n\n\n/**\n * @typedef {[code: string, name: string, localName: string]} InitialStateLanguage\n */\n\n/**\n * @typedef InitialStateMeta\n * @property {string} access_token\n * @property {boolean=} advanced_layout\n * @property {boolean} auto_play_gif\n * @property {boolean} activity_api_enabled\n * @property {string} admin\n * @property {boolean=} boost_modal\n * @property {boolean=} delete_modal\n * @property {boolean=} missing_alt_text_modal\n * @property {boolean=} disable_swiping\n * @property {boolean=} disable_hover_cards\n * @property {string=} disabled_account_id\n * @property {string} display_media\n * @property {string} domain\n * @property {boolean=} expand_spoilers\n * @property {boolean} limited_federation_mode\n * @property {string} locale\n * @property {string | null} mascot\n * @property {string=} me\n * @property {string=} moved_to_account_id\n * @property {string=} owner\n * @property {boolean} profile_directory\n * @property {boolean} registrations_open\n * @property {boolean} reduce_motion\n * @property {string} repository\n * @property {boolean} search_enabled\n * @property {boolean} trends_enabled\n * @property {boolean} single_user_mode\n * @property {string} source_url\n * @property {string} streaming_api_base_url\n * @property {boolean} timeline_preview\n * @property {string} title\n * @property {boolean} show_trends\n * @property {boolean} trends_as_landing_page\n * @property {boolean} use_blurhash\n * @property {boolean=} use_pending_items\n * @property {string} version\n * @property {string} sso_redirect\n * @property {string} status_page_url\n * @property {boolean} terms_of_service_enabled\n */\n\n/**\n * @typedef Role\n * @property {string} id\n * @property {string} name\n * @property {string} permissions\n * @property {string} color\n * @property {boolean} highlighted\n */\n\n/**\n * @typedef InitialState\n * @property {Record<string, import(\"./api_types/accounts\").ApiAccountJSON>} accounts\n * @property {InitialStateLanguage[]} languages\n * @property {boolean=} critical_updates_pending\n * @property {InitialStateMeta} meta\n * @property {Role?} role\n */\n\nconst element = document.getElementById('initial-state');\n/** @type {InitialState | undefined} */\nconst initialState = element?.textContent && JSON.parse(element.textContent);\n\n/** @type {string} */\nconst initialPath = document.querySelector(\"head meta[name=initialPath]\")?.getAttribute(\"content\") ?? '';\n/** @type {boolean} */\nexport const hasMultiColumnPath = initialPath === '/'\n  || initialPath === '/getting-started'\n  || initialPath === '/home'\n  || initialPath.startsWith('/deck');\n\n/**\n * @template {keyof InitialStateMeta} K\n * @param {K} prop\n * @returns {InitialStateMeta[K] | undefined}\n */\nconst getMeta = (prop) => initialState?.meta && initialState.meta[prop];\n\nexport const activityApiEnabled = getMeta('activity_api_enabled');\nexport const autoPlayGif = getMeta('auto_play_gif');\nexport const boostModal = getMeta('boost_modal');\nexport const deleteModal = getMeta('delete_modal');\nexport const missingAltTextModal = getMeta('missing_alt_text_modal');\nexport const disableSwiping = getMeta('disable_swiping');\nexport const disableHoverCards = getMeta('disable_hover_cards');\nexport const disabledAccountId = getMeta('disabled_account_id');\nexport const displayMedia = getMeta('display_media');\nexport const domain = getMeta('domain');\nexport const expandSpoilers = getMeta('expand_spoilers');\nexport const forceSingleColumn = !getMeta('advanced_layout');\nexport const limitedFederationMode = getMeta('limited_federation_mode');\nexport const mascot = getMeta('mascot');\nexport const me = getMeta('me');\nexport const movedToAccountId = getMeta('moved_to_account_id');\nexport const owner = getMeta('owner');\nexport const profile_directory = getMeta('profile_directory');\nexport const reduceMotion = getMeta('reduce_motion');\nexport const registrationsOpen = getMeta('registrations_open');\nexport const repository = getMeta('repository');\nexport const searchEnabled = getMeta('search_enabled');\nexport const trendsEnabled = getMeta('trends_enabled');\nexport const showTrends = getMeta('show_trends');\nexport const singleUserMode = getMeta('single_user_mode');\nexport const source_url = getMeta('source_url');\nexport const timelinePreview = getMeta('timeline_preview');\nexport const title = getMeta('title');\nexport const trendsAsLanding = getMeta('trends_as_landing_page');\nexport const useBlurhash = getMeta('use_blurhash');\nexport const usePendingItems = getMeta('use_pending_items');\nexport const version = getMeta('version');\nexport const criticalUpdatesPending = initialState?.critical_updates_pending;\nexport const statusPageUrl = getMeta('status_page_url');\nexport const sso_redirect = getMeta('sso_redirect');\nexport const termsOfServiceEnabled = getMeta('terms_of_service_enabled');\n\nconst displayNames = Intl.DisplayNames && new Intl.DisplayNames(getMeta('locale'), {\n  type: 'language',\n  fallback: 'none',\n  languageDisplay: 'standard',\n});\n\nexport const languages = initialState?.languages?.map(lang => {\n  // zh-YUE is not a valid CLDR unicode_language_id\n  return [lang[0], displayNames?.of(lang[0].replace('zh-YUE', 'yue')) || lang[1], lang[2]];\n});\n\n/**\n * @returns {string | undefined}\n */\nexport function getAccessToken() {\n  return getMeta('access_token');\n}\n\nexport default initialState;\n"],"names":["element","document","getElementById","initialState","textContent","JSON","parse","_a","initialPath","querySelector","getAttribute","hasMultiColumnPath","startsWith","getMeta","prop","meta","autoPlayGif","boostModal","deleteModal","missingAltTextModal","disableSwiping","disableHoverCards","disabledAccountId","displayMedia","domain","expandSpoilers","forceSingleColumn","mascot","me","movedToAccountId","owner","profile_directory","reduceMotion","registrationsOpen","searchEnabled","trendsEnabled","showTrends","singleUserMode","source_url","timelinePreview","title","trendsAsLanding","useBlurhash","usePendingItems","version","criticalUpdatesPending","critical_updates_pending","statusPageUrl","sso_redirect","termsOfServiceEnabled","displayNames","Intl","DisplayNames","type","fallback","languageDisplay","languages","map","lang","of","replace","getAccessToken"],"mappings":"AAoEA,MAAMA,EAAUC,SAASC,eAAe,eAAe,EAEjDC,GAAeH,GAAAA,YAAAA,EAASI,cAAeC,KAAKC,MAAMN,EAAQI,WAAW,EAtE3E,IAAAG,EAyEA,MAAMC,IAAcP,EAAAA,SAASQ,cAAc,6BAA6B,IAApDR,YAAAA,EAAuDS,aAAa,aAAc,GAEzFC,EAAqBH,IAAgB,KAC7CA,IAAgB,oBAChBA,IAAgB,SAChBA,EAAYI,WAAW,OAAO,EAO7BC,EAAWC,IAASX,GAAAA,YAAAA,EAAcY,OAAQZ,EAAaY,KAAKD,CAAI,EAEpCD,EAAQ,sBAAsB,QACnDG,EAAcH,EAAQ,eAAe,EACrCI,EAAaJ,EAAQ,aAAa,EAClCK,EAAcL,EAAQ,cAAc,EACpCM,EAAsBN,EAAQ,wBAAwB,EACtDO,EAAiBP,EAAQ,iBAAiB,EAC1CQ,EAAoBR,EAAQ,qBAAqB,EACjDS,EAAoBT,EAAQ,qBAAqB,EACjDU,EAAeV,EAAQ,eAAe,EACtCW,EAASX,EAAQ,QAAQ,EACzBY,EAAiBZ,EAAQ,iBAAiB,EAC1Ca,EAAoB,CAACb,EAAQ,iBAAiB,EACtBA,EAAQ,yBAAyB,QACzDc,EAASd,EAAQ,QAAQ,EACzBe,EAAKf,EAAQ,IAAI,EACjBgB,EAAmBhB,EAAQ,qBAAqB,EAChDiB,EAAQjB,EAAQ,OAAO,EACvBkB,EAAoBlB,EAAQ,mBAAmB,EAC/CmB,EAAenB,EAAQ,eAAe,EACtCoB,EAAoBpB,EAAQ,oBAAoB,EACnCA,EAAQ,YAAY,QACjCqB,EAAgBrB,EAAQ,gBAAgB,EACxCsB,EAAgBtB,EAAQ,gBAAgB,EACxCuB,EAAavB,EAAQ,aAAa,EAClCwB,EAAiBxB,EAAQ,kBAAkB,EAC3CyB,EAAazB,EAAQ,YAAY,EACjC0B,EAAkB1B,EAAQ,kBAAkB,EAC5C2B,EAAQ3B,EAAQ,OAAO,EACvB4B,EAAkB5B,EAAQ,wBAAwB,EAClD6B,EAAc7B,EAAQ,cAAc,EACpC8B,EAAkB9B,EAAQ,mBAAmB,EAC7C+B,EAAU/B,EAAQ,SAAS,EAC3BgC,EAAyB1C,GAAAA,YAAAA,EAAc2C,yBACvCC,EAAgBlC,EAAQ,iBAAiB,EACzCmC,EAAenC,EAAQ,cAAc,EACrCoC,EAAwBpC,EAAQ,0BAA0B,EAEjEqC,EAAeC,KAAKC,cAAgB,IAAID,KAAKC,aAAavC,EAAQ,QAAQ,EAAG,CACjFwC,KAAM,WACNC,SAAU,OACVC,gBAAiB,UACnB,CAAC,EAhID,IAAAhD,EAkIO,MAAMiD,GAAYrD,EAAAA,GAAAA,YAAAA,EAAcqD,YAAdrD,YAAAA,EAAyBsD,IAAIC,GAE7C,CAACA,EAAK,CAAC,GAAGR,GAAAA,YAAAA,EAAcS,GAAGD,EAAK,CAAC,EAAEE,QAAQ,SAAU,KAAK,KAAMF,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,GAMlF,SAASG,GAAiB,CAC/B,OAAOhD,EAAQ,cAAc,CAC/B"}