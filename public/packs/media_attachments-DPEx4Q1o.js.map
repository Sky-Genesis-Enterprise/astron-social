{"version":3,"file":"media_attachments-DPEx4Q1o.js","sources":["../../node_modules/lodash/noop.js","../../app/javascript/mastodon/components/media_attachments.jsx"],"sourcesContent":["/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","import PropTypes from 'prop-types';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport noop from 'lodash/noop';\n\nimport Bundle from 'mastodon/features/ui/components/bundle';\nimport { MediaGallery, Video, Audio } from 'mastodon/features/ui/util/async-components';\n\nexport default class MediaAttachments extends ImmutablePureComponent {\n\n  static propTypes = {\n    status: ImmutablePropTypes.map.isRequired,\n    lang: PropTypes.string,\n    height: PropTypes.number,\n    width: PropTypes.number,\n    visible: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    height: 110,\n    width: 239,\n  };\n\n  updateOnProps = [\n    'status',\n  ];\n\n  renderLoadingMediaGallery = () => {\n    const { height, width } = this.props;\n\n    return (\n      <div className='media-gallery' style={{ height, width }} />\n    );\n  };\n\n  renderLoadingVideoPlayer = () => {\n    const { height, width } = this.props;\n\n    return (\n      <div className='video-player' style={{ height, width }} />\n    );\n  };\n\n  renderLoadingAudioPlayer = () => {\n    const { height, width } = this.props;\n\n    return (\n      <div className='audio-player' style={{ height, width }} />\n    );\n  };\n\n  render () {\n    const { status, width, height, visible } = this.props;\n    const mediaAttachments = status.get('media_attachments');\n    const language = status.getIn(['language', 'translation']) || status.get('language') || this.props.lang;\n\n    if (mediaAttachments.size === 0) {\n      return null;\n    }\n\n    if (mediaAttachments.getIn([0, 'type']) === 'audio') {\n      const audio = mediaAttachments.get(0);\n      const description = audio.getIn(['translation', 'description']) || audio.get('description');\n\n      return (\n        <Bundle fetchComponent={Audio} loading={this.renderLoadingAudioPlayer} >\n          {Component => (\n            <Component\n              src={audio.get('url')}\n              alt={description}\n              lang={language}\n              width={width}\n              height={height}\n              poster={audio.get('preview_url') || status.getIn(['account', 'avatar_static'])}\n              backgroundColor={audio.getIn(['meta', 'colors', 'background'])}\n              foregroundColor={audio.getIn(['meta', 'colors', 'foreground'])}\n              accentColor={audio.getIn(['meta', 'colors', 'accent'])}\n              duration={audio.getIn(['meta', 'original', 'duration'], 0)}\n            />\n          )}\n        </Bundle>\n      );\n    } else if (mediaAttachments.getIn([0, 'type']) === 'video') {\n      const video = mediaAttachments.get(0);\n      const description = video.getIn(['translation', 'description']) || video.get('description');\n\n      return (\n        <Bundle fetchComponent={Video} loading={this.renderLoadingVideoPlayer} >\n          {Component => (\n            <Component\n              preview={video.get('preview_url')}\n              frameRate={video.getIn(['meta', 'original', 'frame_rate'])}\n              blurhash={video.get('blurhash')}\n              src={video.get('url')}\n              alt={description}\n              lang={language}\n              width={width}\n              height={height}\n              inline\n              sensitive={status.get('sensitive')}\n              visible={visible}\n              onOpenVideo={noop}\n            />\n          )}\n        </Bundle>\n      );\n    } else {\n      return (\n        <Bundle fetchComponent={MediaGallery} loading={this.renderLoadingMediaGallery} >\n          {Component => (\n            <Component\n              media={mediaAttachments}\n              lang={language}\n              sensitive={status.get('sensitive')}\n              defaultWidth={width}\n              visible={visible}\n              height={height}\n              onOpenMedia={noop}\n            />\n          )}\n        </Bundle>\n      );\n    }\n  }\n\n}\n"],"names":["noop","noop_1","MediaAttachments","ImmutablePureComponent","updateOnProps","renderLoadingMediaGallery","height","width","props","jsx","renderLoadingVideoPlayer","renderLoadingAudioPlayer","render","status","visible","mediaAttachments","get","language","getIn","lang","size","audio","description","Bundle","Audio","Component","video","Video","MediaGallery","__publicField","propTypes","ImmutablePropTypes","map","isRequired","PropTypes","string","number","bool","defaultProps"],"mappings":"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","x_google_ignoreList":[0]}