{"version":3,"file":"filter_modal-Br0eGIeD.js","sources":["../../app/javascript/mastodon/features/filters/added_to_filter.jsx","../../app/javascript/mastodon/utils/icons.tsx","../../app/javascript/mastodon/features/filters/select_filter.jsx","../../app/javascript/mastodon/features/ui/components/filter_modal.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\n\nimport { Button } from 'mastodon/components/button';\nimport { toServerSideType } from 'mastodon/utils/filters';\n\nconst mapStateToProps = (state, { filterId }) => ({\n  filter: state.getIn(['filters', filterId]),\n});\n\nclass AddedToFilter extends PureComponent {\n\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    contextType: PropTypes.string,\n    filter: ImmutablePropTypes.map.isRequired,\n    dispatch: PropTypes.func.isRequired,\n  };\n\n  handleCloseClick = () => {\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  render () {\n    const { filter, contextType } = this.props;\n\n    let expiredMessage = null;\n    if (filter.get('expires_at') && filter.get('expires_at') < new Date()) {\n      expiredMessage = (\n        <>\n          <h4 className='report-dialog-modal__subtitle'><FormattedMessage id='filter_modal.added.expired_title' defaultMessage='Expired filter!' /></h4>\n          <p className='report-dialog-modal__lead'>\n            <FormattedMessage\n              id='filter_modal.added.expired_explanation'\n              defaultMessage='This filter category has expired, you will need to change the expiration date for it to apply.'\n            />\n          </p>\n        </>\n      );\n    }\n\n    let contextMismatchMessage = null;\n    if (contextType && !filter.get('context').includes(toServerSideType(contextType))) {\n      contextMismatchMessage = (\n        <>\n          <h4 className='report-dialog-modal__subtitle'><FormattedMessage id='filter_modal.added.context_mismatch_title' defaultMessage='Context mismatch!' /></h4>\n          <p className='report-dialog-modal__lead'>\n            <FormattedMessage\n              id='filter_modal.added.context_mismatch_explanation'\n              defaultMessage='This filter category does not apply to the context in which you have accessed this post. If you want the post to be filtered in this context too, you will have to edit the filter.'\n            />\n          </p>\n        </>\n      );\n    }\n\n    const settings_link = (\n      <a href={`/filters/${filter.get('id')}/edit`}>\n        <FormattedMessage\n          id='filter_modal.added.settings_link'\n          defaultMessage='settings page'\n        />\n      </a>\n    );\n\n    return (\n      <>\n        <h3 className='report-dialog-modal__title'><FormattedMessage id='filter_modal.added.title' defaultMessage='Filter added!' /></h3>\n        <p className='report-dialog-modal__lead'>\n          <FormattedMessage\n            id='filter_modal.added.short_explanation'\n            defaultMessage='This post has been added to the following filter category: {title}.'\n            values={{ title: filter.get('title') }}\n          />\n        </p>\n\n        {expiredMessage}\n        {contextMismatchMessage}\n\n        <h4 className='report-dialog-modal__subtitle'><FormattedMessage id='filter_modal.added.review_and_configure_title' defaultMessage='Filter settings' /></h4>\n        <p className='report-dialog-modal__lead'>\n          <FormattedMessage\n            id='filter_modal.added.review_and_configure'\n            defaultMessage='To review and further configure this filter category, go to the {settings_link}.'\n            values={{ settings_link }}\n          />\n        </p>\n\n        <div className='flex-spacer' />\n\n        <div className='report-dialog-modal__actions'>\n          <Button onClick={this.handleCloseClick}><FormattedMessage id='report.close' defaultMessage='Done' /></Button>\n        </div>\n      </>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(AddedToFilter);\n","// Copied from emoji-mart for consistency with emoji picker and since\n// they don't export the icons in the package\nexport const loupeIcon = (\n  <svg\n    xmlns='http://www.w3.org/2000/svg'\n    viewBox='0 0 20 20'\n    width='13'\n    height='13'\n  >\n    <path d='M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z' />\n  </svg>\n);\n\nexport const deleteIcon = (\n  <svg\n    xmlns='http://www.w3.org/2000/svg'\n    viewBox='0 0 20 20'\n    width='13'\n    height='13'\n  >\n    <path d='M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z' />\n  </svg>\n);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport { connect } from 'react-redux';\n\nimport fuzzysort from 'fuzzysort';\n\nimport AddIcon from '@/material-icons/400-24px/add.svg?react';\nimport { Icon }  from 'mastodon/components/icon';\nimport { toServerSideType } from 'mastodon/utils/filters';\nimport { loupeIcon, deleteIcon } from 'mastodon/utils/icons';\n\nconst messages = defineMessages({\n  search: { id: 'filter_modal.select_filter.search', defaultMessage: 'Search or create' },\n  clear: { id: 'emoji_button.clear', defaultMessage: 'Clear' },\n});\n\nconst mapStateToProps = (state, { contextType }) => ({\n  filters: Array.from(state.get('filters').values()).map((filter) => [\n    filter.get('id'),\n    filter.get('title'),\n    filter.get('keywords')?.map((keyword) => keyword.get('keyword')).join('\\n'),\n    filter.get('expires_at') && filter.get('expires_at') < new Date(),\n    contextType && !filter.get('context').includes(toServerSideType(contextType)),\n  ]),\n});\n\nclass SelectFilter extends PureComponent {\n\n  static propTypes = {\n    onSelectFilter: PropTypes.func.isRequired,\n    onNewFilter: PropTypes.func.isRequired,\n    filters: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.object)),\n    intl: PropTypes.object.isRequired,\n  };\n\n  state = {\n    searchValue: '',\n  };\n\n  search () {\n    const { filters } = this.props;\n    const { searchValue } = this.state;\n\n    if (searchValue === '') {\n      return filters;\n    }\n\n    return fuzzysort.go(searchValue, filters, {\n      keys: ['1', '2'],\n      limit: 5,\n      threshold: -10000,\n    }).map(result => result.obj);\n  }\n\n  renderItem = filter => {\n    let warning = null;\n    if (filter[3] || filter[4]) {\n      warning = (\n        <span className='language-dropdown__dropdown__results__item__common-name'>\n          (\n          {filter[3] && <FormattedMessage id='filter_modal.select_filter.expired' defaultMessage='expired' />}\n          {filter[3] && filter[4] && ', '}\n          {filter[4] && <FormattedMessage id='filter_modal.select_filter.context_mismatch' defaultMessage='does not apply to this context' />}\n          )\n        </span>\n      );\n    }\n\n    return (\n      <div key={filter[0]} role='button' tabIndex={0} data-index={filter[0]} className='language-dropdown__dropdown__results__item' onClick={this.handleItemClick} onKeyDown={this.handleKeyDown}>\n        <span className='language-dropdown__dropdown__results__item__native-name'>{filter[1]}</span> {warning}\n      </div>\n    );\n  };\n\n  renderCreateNew (name) {\n    return (\n      <div key='add-new-filter' role='button' tabIndex={0} className='language-dropdown__dropdown__results__item' onClick={this.handleNewFilterClick} onKeyDown={this.handleKeyDown}>\n        <Icon id='plus' icon={AddIcon} /> <FormattedMessage id='filter_modal.select_filter.prompt_new' defaultMessage='New category: {name}' values={{ name }} />\n      </div>\n    );\n  }\n\n  handleSearchChange = ({ target }) => {\n    this.setState({ searchValue: target.value });\n  };\n\n  setListRef = c => {\n    this.listNode = c;\n  };\n\n  handleKeyDown = e => {\n    const index = Array.from(this.listNode.childNodes).findIndex(node => node === e.currentTarget);\n\n    let element = null;\n\n    switch(e.key) {\n    case ' ':\n    case 'Enter':\n      e.currentTarget.click();\n      break;\n    case 'ArrowDown':\n      element = this.listNode.childNodes[index + 1] || this.listNode.firstChild;\n      break;\n    case 'ArrowUp':\n      element = this.listNode.childNodes[index - 1] || this.listNode.lastChild;\n      break;\n    case 'Tab':\n      if (e.shiftKey) {\n        element = this.listNode.childNodes[index - 1] || this.listNode.lastChild;\n      } else {\n        element = this.listNode.childNodes[index + 1] || this.listNode.firstChild;\n      }\n      break;\n    case 'Home':\n      element = this.listNode.firstChild;\n      break;\n    case 'End':\n      element = this.listNode.lastChild;\n      break;\n    }\n\n    if (element) {\n      element.focus();\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  handleSearchKeyDown = e => {\n    let element = null;\n\n    switch(e.key) {\n    case 'Tab':\n    case 'ArrowDown':\n      element = this.listNode.firstChild;\n\n      if (element) {\n        element.focus();\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      break;\n    }\n  };\n\n  handleClear = () => {\n    this.setState({ searchValue: '' });\n  };\n\n  handleItemClick = e => {\n    const value = e.currentTarget.getAttribute('data-index');\n\n    e.preventDefault();\n\n    this.props.onSelectFilter(value);\n  };\n\n  handleNewFilterClick = e => {\n    e.preventDefault();\n\n    this.props.onNewFilter(this.state.searchValue);\n  };\n\n  render () {\n    const { intl } = this.props;\n\n    const { searchValue } = this.state;\n    const isSearching = searchValue !== '';\n    const results = this.search();\n\n    return (\n      <>\n        <h3 className='report-dialog-modal__title'><FormattedMessage id='filter_modal.select_filter.title' defaultMessage='Filter this post' /></h3>\n        <p className='report-dialog-modal__lead'><FormattedMessage id='filter_modal.select_filter.subtitle' defaultMessage='Use an existing category or create a new one' /></p>\n\n        <div className='emoji-mart-search'>\n          <input type='search' value={searchValue} onChange={this.handleSearchChange} onKeyDown={this.handleSearchKeyDown} placeholder={intl.formatMessage(messages.search)} autoFocus />\n          <button type='button' className='emoji-mart-search-icon' disabled={!isSearching} aria-label={intl.formatMessage(messages.clear)} onClick={this.handleClear}>{!isSearching ? loupeIcon : deleteIcon}</button>\n        </div>\n\n        <div className='language-dropdown__dropdown__results emoji-mart-scroll' role='listbox' ref={this.setListRef}>\n          {results.map(this.renderItem)}\n          {isSearching && this.renderCreateNew(searchValue) }\n        </div>\n\n      </>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(SelectFilter));\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\n\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport CloseIcon from '@/material-icons/400-24px/close.svg?react';\nimport { fetchFilters, createFilter, createFilterStatus } from 'mastodon/actions/filters';\nimport { fetchStatus } from 'mastodon/actions/statuses';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport AddedToFilter from 'mastodon/features/filters/added_to_filter';\nimport SelectFilter from 'mastodon/features/filters/select_filter';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n});\n\nclass FilterModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    statusId: PropTypes.string.isRequired,\n    contextType: PropTypes.string,\n    dispatch: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  state = {\n    step: 'select',\n    filterId: null,\n    isSubmitting: false,\n    isSubmitted: false,\n  };\n\n  handleNewFilterSuccess = (result) => {\n    this.handleSelectFilter(result.id);\n  };\n\n  handleSuccess = () => {\n    const { dispatch, statusId } = this.props;\n    dispatch(fetchStatus(statusId, true));\n    this.setState({ isSubmitting: false, isSubmitted: true, step: 'submitted' });\n  };\n\n  handleFail = () => {\n    this.setState({ isSubmitting: false });\n  };\n\n  handleNextStep = step => {\n    this.setState({ step });\n  };\n\n  handleSelectFilter = (filterId) => {\n    const { dispatch, statusId } = this.props;\n\n    this.setState({ isSubmitting: true, filterId });\n\n    dispatch(createFilterStatus({\n      filter_id: filterId,\n      status_id: statusId,\n    }, this.handleSuccess, this.handleFail));\n  };\n\n  handleNewFilter = (title) => {\n    const { dispatch } = this.props;\n\n    this.setState({ isSubmitting: true });\n\n    dispatch(createFilter({\n      title,\n      context: ['home', 'notifications', 'public', 'thread', 'account'],\n      action: 'warn',\n    }, this.handleNewFilterSuccess, this.handleFail));\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n\n    dispatch(fetchFilters());\n  }\n\n  render () {\n    const {\n      intl,\n      statusId,\n      contextType,\n      onClose,\n    } = this.props;\n\n    const {\n      step,\n      filterId,\n    } = this.state;\n\n    let stepComponent;\n\n    switch(step) {\n    case 'select':\n      stepComponent = (\n        <SelectFilter\n          contextType={contextType}\n          onSelectFilter={this.handleSelectFilter}\n          onNewFilter={this.handleNewFilter}\n        />\n      );\n      break;\n    case 'create':\n      stepComponent = null;\n      break;\n    case 'submitted':\n      stepComponent = (\n        <AddedToFilter\n          contextType={contextType}\n          filterId={filterId}\n          statusId={statusId}\n          onClose={onClose}\n        />\n      );\n    }\n\n    return (\n      <div className='modal-root__modal report-dialog-modal'>\n        <div className='report-modal__target'>\n          <IconButton className='report-modal__close' title={intl.formatMessage(messages.close)} icon='times' iconComponent={CloseIcon} onClick={onClose} size={20} />\n          <FormattedMessage id='filter_modal.title.status' defaultMessage='Filter a post' />\n        </div>\n\n        <div className='report-dialog-modal__container'>\n          {stepComponent}\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default connect()(injectIntl(FilterModal));\n"],"names":["mapStateToProps","state","filterId","filter","getIn","AddedToFilter","PureComponent","handleCloseClick","onClose","props","render","contextType","expiredMessage","get","Date","jsxs","Fragment","jsx","FormattedMessage","contextMismatchMessage","includes","toServerSideType","settings_link","title","Button","AddedToFilter$1","connect","loupeIcon","deleteIcon","messages","defineMessages","search","id","defaultMessage","clear","filters","Array","from","values","map","keyword","join","SelectFilter","searchValue","renderItem","warning","handleItemClick","handleKeyDown","handleSearchChange","target","setState","value","setListRef","c","listNode","e","index","childNodes","findIndex","node","currentTarget","element","key","click","firstChild","lastChild","shiftKey","focus","preventDefault","stopPropagation","handleSearchKeyDown","handleClear","getAttribute","onSelectFilter","handleNewFilterClick","onNewFilter","fuzzysort","go","keys","limit","threshold","result","obj","renderCreateNew","name","Icon","AddIcon","intl","isSearching","results","formatMessage","SelectFilter$1","injectIntl","close","FilterModal","ImmutablePureComponent","step","isSubmitting","isSubmitted","handleNewFilterSuccess","handleSelectFilter","handleSuccess","dispatch","statusId","fetchStatus","handleFail","handleNextStep","createFilterStatus","filter_id","status_id","handleNewFilter","createFilter","context","action","componentDidMount","fetchFilters","stepComponent","IconButton","CloseIcon","__publicField","propTypes","PropTypes","string","isRequired","func","object","filter_modal"],"mappings":"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"}