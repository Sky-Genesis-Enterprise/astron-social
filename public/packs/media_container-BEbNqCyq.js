var O=Object.defineProperty;var y=(a,e,t)=>e in a?O(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>y(a,typeof e!="symbol"?e+"":e,t);import{j as r}from"./client-wT6vtYO_.js";import{r as b}from"./index-BdTwX--g.js";import{ec as l,bk as S,aO as k,c as E,V as P}from"./useSelectableClick-DeaJbL2_.js";import{I as V}from"./hashtag-C8K46vBm.js";import j from"./media_gallery-DTAKF-fT.js";import{a as f,M as v,b as w}from"./media_modal-WOAjqFh6.js";import{P as I}from"./poll-CjurB963.js";import{C as A}from"./card-CttmBekj.js";import{I as N}from"./intl_provider-DvXl4eEi.js";import"./short_number-WomMu2iV.js";import"./numbers-CGZQWBYL.js";import"./message-UFwkQlnu.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./index-DwQAxx91.js";import"./skeleton-D9NbTYr9.js";import"./alt_text_badge-CwO3PXb3.js";import"./index-Dy8WPmut.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./use-gesture-react.esm-PiBFdzIE.js";import"./loading_indicator-7xMB1U6D.js";const R={MediaGallery:j,Video:P,Card:A,Poll:I,Hashtag:V,Audio:E};class lt extends b.PureComponent{constructor(){super(...arguments);s(this,"state",{media:null,index:null,lang:null,time:null,backgroundColor:null,options:null});s(this,"handleOpenMedia",(t,o,i)=>{document.body.classList.add("with-modals--active"),document.documentElement.style.marginRight=`${f()}px`,this.setState({media:t,index:o,lang:i})});s(this,"handleOpenVideo",(t,o)=>{const{components:i}=this.props,{media:n}=JSON.parse(i[o.componentIndex].getAttribute("data-props")),m=l(n);document.body.classList.add("with-modals--active"),document.documentElement.style.marginRight=`${f()}px`,this.setState({media:m,lang:t,options:o})});s(this,"handleCloseMedia",()=>{document.body.classList.remove("with-modals--active"),document.documentElement.style.marginRight="0",this.setState({media:null,index:null,time:null,backgroundColor:null,options:null})});s(this,"setBackgroundColor",t=>{this.setState({backgroundColor:t})})}render(){var i,n,m;const{components:t}=this.props;let o;return window.self===window.top&&(o=this.handleOpenVideo),r.jsx(N,{children:r.jsxs(r.Fragment,{children:[Array.from(t).map((d,p)=>{const c=d.getAttribute("data-component"),M=R[c],{media:h,card:u,poll:g,hashtag:C,...x}=JSON.parse(d.getAttribute("data-props"));return Object.assign(x,{...h?{media:l(h)}:{},...u?{card:l(u)}:{},...g?{poll:S(g)}:{},...C?{hashtag:l(C)}:{},...c==="Video"?{componentIndex:p,onOpenVideo:o}:{onOpenMedia:this.handleOpenMedia}}),k.createPortal(b.createElement(M,{...x,key:`media-${p}`}),d)}),r.jsx(v,{backgroundColor:this.state.backgroundColor,onClose:this.handleCloseMedia,children:this.state.media&&r.jsx(w,{media:this.state.media,index:this.state.index||0,lang:this.state.lang,currentTime:(i=this.state.options)==null?void 0:i.startTime,autoPlay:(n=this.state.options)==null?void 0:n.autoPlay,volume:(m=this.state.options)==null?void 0:m.defaultVolume,onClose:this.handleCloseMedia,onChangeBackgroundColor:this.setBackgroundColor})})]})})}}export{lt as default};
//# sourceMappingURL=media_container-BEbNqCyq.js.map
