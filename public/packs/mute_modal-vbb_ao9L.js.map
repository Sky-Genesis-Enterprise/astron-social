{"version":3,"file":"mute_modal-vbb_ao9L.js","sources":["../../app/javascript/mastodon/features/ui/components/mute_modal.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { useCallback, useState } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { useDispatch } from 'react-redux';\n\n\nimport AlternateEmailIcon from '@/material-icons/400-24px/alternate_email.svg?react';\nimport CampaignIcon from '@/material-icons/400-24px/campaign.svg?react';\nimport ReplyIcon from '@/material-icons/400-24px/reply.svg?react';\nimport VisibilityOffIcon from '@/material-icons/400-24px/visibility_off.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off.svg?react';\nimport { muteAccount } from 'mastodon/actions/accounts';\nimport { closeModal } from 'mastodon/actions/modal';\nimport { Button } from 'mastodon/components/button';\nimport { CheckBox } from 'mastodon/components/check_box';\nimport { Icon } from 'mastodon/components/icon';\nimport { RadioButton } from 'mastodon/components/radio_button';\n\nconst messages = defineMessages({\n  minutes: { id: 'intervals.full.minutes', defaultMessage: '{number, plural, one {# minute} other {# minutes}}' },\n  hours: { id: 'intervals.full.hours', defaultMessage: '{number, plural, one {# hour} other {# hours}}' },\n  days: { id: 'intervals.full.days', defaultMessage: '{number, plural, one {# day} other {# days}}' },\n  indefinite: { id: 'mute_modal.indefinite', defaultMessage: 'Until I unmute them' },\n  hideFromNotifications: { id: 'mute_modal.hide_from_notifications', defaultMessage: 'Hide from notifications' },\n});\n\nconst RadioButtonLabel = ({ name, value, currentValue, onChange, label }) => (\n  <RadioButton\n    name={name}\n    value={value}\n    checked={value === currentValue}\n    onChange={onChange}\n    label={label}\n  />\n);\n\nRadioButtonLabel.propTypes = {\n  name: PropTypes.string,\n  value: PropTypes.oneOf([PropTypes.string, PropTypes.number, PropTypes.bool]),\n  currentValue: PropTypes.oneOf([PropTypes.string, PropTypes.number, PropTypes.bool]),\n  checked: PropTypes.bool,\n  onChange: PropTypes.func,\n  label: PropTypes.node,\n};\n\nexport const MuteModal = ({ accountId, acct }) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const [notifications, setNotifications] = useState(true);\n  const [muteDuration, setMuteDuration] = useState('0');\n  const [expanded, setExpanded] = useState(false);\n\n  const handleClick = useCallback(() => {\n    dispatch(closeModal({ modalType: undefined, ignoreFocus: false }));\n    dispatch(muteAccount(accountId, notifications, muteDuration));\n  }, [dispatch, accountId, notifications, muteDuration]);\n\n  const handleCancel = useCallback(() => {\n    dispatch(closeModal({ modalType: undefined, ignoreFocus: false }));\n  }, [dispatch]);\n\n  const handleToggleNotifications = useCallback(({ target }) => {\n    setNotifications(target.checked);\n  }, [setNotifications]);\n\n  const handleChangeMuteDuration = useCallback(({ target }) => {\n    setMuteDuration(target.value);\n  }, [setMuteDuration]);\n\n  const handleToggleSettings = useCallback(() => {\n    setExpanded(!expanded);\n  }, [expanded, setExpanded]);\n\n  return (\n    <div className='modal-root__modal safety-action-modal'>\n      <div className='safety-action-modal__top'>\n        <div className='safety-action-modal__header'>\n          <div className='safety-action-modal__header__icon'>\n            <Icon icon={VolumeOffIcon} />\n          </div>\n\n          <div>\n            <h1><FormattedMessage id='mute_modal.title' defaultMessage='Mute user?' /></h1>\n            <div>@{acct}</div>\n          </div>\n        </div>\n\n        <div className='safety-action-modal__bullet-points'>\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={CampaignIcon} /></div>\n            <div><FormattedMessage id='mute_modal.they_wont_know' defaultMessage=\"They won't know they've been muted.\" /></div>\n          </div>\n\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={VisibilityOffIcon} /></div>\n            <div><FormattedMessage id='mute_modal.you_wont_see_posts' defaultMessage=\"They can still see your posts, but you won't see theirs.\" /></div>\n          </div>\n\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={AlternateEmailIcon} /></div>\n            <div><FormattedMessage id='mute_modal.you_wont_see_mentions' defaultMessage=\"You won't see posts that mention them.\" /></div>\n          </div>\n\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={ReplyIcon} /></div>\n            <div><FormattedMessage id='mute_modal.they_can_mention_and_follow' defaultMessage=\"They can mention and follow you, but you won't see them.\" /></div>\n          </div>\n        </div>\n      </div>\n\n      <div className={classNames('safety-action-modal__bottom', { active: expanded })}>\n        <div className='safety-action-modal__bottom__collapsible'>\n          <div className='safety-action-modal__field-group'>\n            <RadioButtonLabel name='duration' value='0' label={intl.formatMessage(messages.indefinite)} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='21600' label={intl.formatMessage(messages.hours, { number: 6 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='86400' label={intl.formatMessage(messages.hours, { number: 24 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='604800' label={intl.formatMessage(messages.days, { number: 7 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='2592000' label={intl.formatMessage(messages.days, { number: 30 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n          </div>\n\n          <div className='safety-action-modal__field-group'>\n            <CheckBox label={intl.formatMessage(messages.hideFromNotifications)} checked={notifications} onChange={handleToggleNotifications} />\n          </div>\n        </div>\n\n        <div className='safety-action-modal__actions'>\n          <button onClick={handleToggleSettings} className='link-button'>\n            {expanded ? <FormattedMessage id='mute_modal.hide_options' defaultMessage='Hide options' /> : <FormattedMessage id='mute_modal.show_options' defaultMessage='Show options' />}\n          </button>\n\n          <div className='spacer' />\n\n          <button onClick={handleCancel} className='link-button'>\n            <FormattedMessage id='confirmation_modal.cancel' defaultMessage='Cancel' />\n          </button>\n\n          <Button onClick={handleClick} autoFocus>\n            <FormattedMessage id='confirmations.mute.confirm' defaultMessage='Mute' />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMuteModal.propTypes = {\n  accountId: PropTypes.string.isRequired,\n  acct: PropTypes.string.isRequired,\n};\n\nexport default MuteModal;\n"],"names":["messages","defineMessages","minutes","id","defaultMessage","hours","days","indefinite","hideFromNotifications","RadioButtonLabel","name","value","currentValue","onChange","label","jsx","RadioButton","MuteModal","accountId","acct","intl","useIntl","dispatch","useDispatch","notifications","setNotifications","useState","muteDuration","setMuteDuration","expanded","setExpanded","handleClick","useCallback","closeModal","modalType","undefined","ignoreFocus","muteAccount","handleCancel","handleToggleNotifications","target","checked","handleChangeMuteDuration","handleToggleSettings","jsxs","Icon","VolumeOffIcon","FormattedMessage","CampaignIcon","VisibilityOffIcon","AlternateEmailIcon","ReplyIcon","classNames","active","formatMessage","number","CheckBox","Button"],"mappings":"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"}