{"version":3,"file":"useTimeout-F7jeHEBA.js","sources":["../../app/javascript/mastodon/hooks/useTimeout.ts"],"sourcesContent":["import { useRef, useCallback, useEffect } from 'react';\n\nexport const useTimeout = () => {\n  const timeoutRef = useRef<ReturnType<typeof setTimeout>>();\n  const callbackRef = useRef<() => void>();\n\n  const set = useCallback((callback: () => void, delay: number) => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    callbackRef.current = callback;\n    timeoutRef.current = setTimeout(callback, delay);\n  }, []);\n\n  const delay = useCallback((delay: number) => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n\n    if (!callbackRef.current) {\n      return;\n    }\n\n    timeoutRef.current = setTimeout(callbackRef.current, delay);\n  }, []);\n\n  const cancel = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = undefined;\n      callbackRef.current = undefined;\n    }\n  }, []);\n\n  useEffect(\n    () => () => {\n      cancel();\n    },\n    [cancel],\n  );\n\n  return [set, cancel, delay] as const;\n};\n"],"names":["useTimeout","timeoutRef","useRef","callbackRef","set","useCallback","callback","delay","current","clearTimeout","setTimeout","cancel","undefined","useEffect"],"mappings":"mCAEO,MAAMA,EAAaA,IAAM,CAC9B,MAAMC,EAAaC,EAAAA,OAAAA,EACbC,EAAcD,EAAAA,OAAAA,EAEdE,EAAMC,EAAAA,YAAY,CAACC,EAAsBC,IAAkB,CAC3DN,EAAWO,SACbC,aAAaR,EAAWO,OAAO,EAGjCL,EAAYK,QAAUF,EACtBL,EAAWO,QAAUE,WAAWJ,EAAUC,CAAK,CAAA,EAC9C,EAAE,EAECA,EAAQF,cAAaE,GAAkB,CACvCN,EAAWO,SACbC,aAAaR,EAAWO,OAAO,EAG5BL,EAAYK,UAIjBP,EAAWO,QAAUE,WAAWP,EAAYK,QAASD,CAAK,EAAA,EACzD,EAAE,EAECI,EAASN,EAAAA,YAAY,IAAM,CAC3BJ,EAAWO,UACbC,aAAaR,EAAWO,OAAO,EAC/BP,EAAWO,QAAUI,OACrBT,EAAYK,QAAUI,OACxB,EACC,EAAE,EAELC,OAAAA,EAAAA,UACE,IAAM,IAAM,CACVF,EAAAA,CAAO,EAET,CAACA,CAAM,CACT,EAEO,CAACP,EAAKO,EAAQJ,CAAK,CAC5B"}