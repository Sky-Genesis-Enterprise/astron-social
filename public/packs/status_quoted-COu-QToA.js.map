{"version":3,"file":"status_quoted-COu-QToA.js","sources":["../../app/javascript/material-icons/400-24px/article.svg?react","../../app/javascript/mastodon/containers/status_container.jsx","../../app/javascript/images/quote.svg?react","../../app/javascript/mastodon/components/status_quoted.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgArticle = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M280-280h280v-80H280v80Zm0-160h400v-80H280v80Zm0-160h400v-80H280v80Zm-80 480q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z\" }));\nexport default SvgArticle;\n","import { injectIntl } from 'react-intl';\n\nimport { connect } from 'react-redux';\n\nimport {\n  unmuteAccount,\n  unblockAccount,\n} from '../actions/accounts';\nimport { initBlockModal } from '../actions/blocks';\nimport {\n  replyCompose,\n  mentionCompose,\n  directCompose,\n} from '../actions/compose';\nimport {\n  initDomainBlockModal,\n  unblockDomain,\n} from '../actions/domain_blocks';\nimport {\n  initAddFilter,\n} from '../actions/filters';\nimport {\n  toggleReblog,\n  toggleFavourite,\n  bookmark,\n  unbookmark,\n  pin,\n  unpin,\n} from '../actions/interactions';\nimport { openModal } from '../actions/modal';\nimport { initMuteModal } from '../actions/mutes';\nimport { deployPictureInPicture } from '../actions/picture_in_picture';\nimport { initReport } from '../actions/reports';\nimport {\n  muteStatus,\n  unmuteStatus,\n  deleteStatus,\n  toggleStatusSpoilers,\n  toggleStatusCollapse,\n  editStatus,\n  translateStatus,\n  undoStatusTranslation,\n} from '../actions/statuses';\nimport Status from '../components/status';\nimport { deleteModal } from '../initial_state';\nimport { makeGetStatus, makeGetPictureInPicture } from '../selectors';\n\nconst makeMapStateToProps = () => {\n  const getStatus = makeGetStatus();\n  const getPictureInPicture = makeGetPictureInPicture();\n\n  const mapStateToProps = (state, props) => ({\n    status: getStatus(state, props),\n    nextInReplyToId: props.nextId ? state.getIn(['statuses', props.nextId, 'in_reply_to_id']) : null,\n    pictureInPicture: getPictureInPicture(state, props),\n  });\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch, { contextType }) => ({\n\n  onReply (status) {\n    dispatch((_, getState) => {\n      let state = getState();\n\n      if (state.getIn(['compose', 'text']).trim().length !== 0) {\n        dispatch(openModal({ modalType: 'CONFIRM_REPLY', modalProps: { status } }));\n      } else {\n        dispatch(replyCompose(status));\n      }\n    });\n  },\n\n  onReblog (status, e) {\n    dispatch(toggleReblog(status.get('id'), e.shiftKey));\n  },\n\n  onFavourite (status) {\n    dispatch(toggleFavourite(status.get('id')));\n  },\n\n  onBookmark (status) {\n    if (status.get('bookmarked')) {\n      dispatch(unbookmark(status));\n    } else {\n      dispatch(bookmark(status));\n    }\n  },\n\n  onPin (status) {\n    if (status.get('pinned')) {\n      dispatch(unpin(status));\n    } else {\n      dispatch(pin(status));\n    }\n  },\n\n  onEmbed (status) {\n    dispatch(openModal({\n      modalType: 'EMBED',\n      modalProps: { id: status.get('id') },\n    }));\n  },\n\n  onDelete (status, withRedraft = false) {\n    if (!deleteModal) {\n      dispatch(deleteStatus(status.get('id'), withRedraft));\n    } else {\n      dispatch(openModal({ modalType: 'CONFIRM_DELETE_STATUS', modalProps: { statusId: status.get('id'), withRedraft } }));\n    }\n  },\n\n  onEdit (status) {\n    dispatch((_, getState) => {\n      let state = getState();\n      if (state.getIn(['compose', 'text']).trim().length !== 0) {\n        dispatch(openModal({ modalType: 'CONFIRM_EDIT_STATUS', modalProps: { statusId: status.get('id') } }));\n      } else {\n        dispatch(editStatus(status.get('id')));\n      }\n    });\n  },\n\n  onTranslate (status) {\n    if (status.get('translation')) {\n      dispatch(undoStatusTranslation(status.get('id'), status.get('poll')));\n    } else {\n      dispatch(translateStatus(status.get('id')));\n    }\n  },\n\n  onDirect (account) {\n    dispatch(directCompose(account));\n  },\n\n  onMention (account) {\n    dispatch(mentionCompose(account));\n  },\n\n  onOpenMedia (statusId, media, index, lang) {\n    dispatch(openModal({\n      modalType: 'MEDIA',\n      modalProps: { statusId, media, index, lang },\n    }));\n  },\n\n  onOpenVideo (statusId, media, lang, options) {\n    dispatch(openModal({\n      modalType: 'VIDEO',\n      modalProps: { statusId, media, lang, options },\n    }));\n  },\n\n  onBlock (status) {\n    const account = status.get('account');\n    dispatch(initBlockModal(account));\n  },\n\n  onUnblock (account) {\n    dispatch(unblockAccount(account.get('id')));\n  },\n\n  onReport (status) {\n    dispatch(initReport(status.get('account'), status));\n  },\n\n  onAddFilter (status) {\n    dispatch(initAddFilter(status, { contextType }));\n  },\n\n  onMute (account) {\n    dispatch(initMuteModal(account));\n  },\n\n  onUnmute (account) {\n    dispatch(unmuteAccount(account.get('id')));\n  },\n\n  onMuteConversation (status) {\n    if (status.get('muted')) {\n      dispatch(unmuteStatus(status.get('id')));\n    } else {\n      dispatch(muteStatus(status.get('id')));\n    }\n  },\n\n  onToggleHidden (status) {\n    dispatch(toggleStatusSpoilers(status.get('id')));\n  },\n\n  onToggleCollapsed (status, isCollapsed) {\n    dispatch(toggleStatusCollapse(status.get('id'), isCollapsed));\n  },\n\n  onBlockDomain (account) {\n    dispatch(initDomainBlockModal(account));\n  },\n\n  onUnblockDomain (domain) {\n    dispatch(unblockDomain(domain));\n  },\n\n  deployPictureInPicture (status, type, mediaProps) {\n    dispatch(deployPictureInPicture({statusId: status.get('id'), accountId: status.getIn(['account', 'id']), playerType: type, props: mediaProps}));\n  },\n\n  onInteractionModal (type, status) {\n    dispatch(openModal({\n      modalType: 'INTERACTION',\n      modalProps: {\n        type,\n        accountId: status.getIn(['account', 'id']),\n        url: status.get('uri'),\n      },\n    }));\n  },\n\n});\n\nexport default injectIntl(connect(makeMapStateToProps, mapDispatchToProps)(Status));\n","import * as React from \"react\";\nconst SvgQuote = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 20, viewBox: \"0 0 24 20\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M23.933 2.82414C22.324 4.07931 21.0726 5.3569 20.1788 6.6569C19.3296 7.91207 18.905 9.1 18.905 10.2207C19.0838 10.131 19.3073 10.0862 19.5754 10.0862C19.8883 10.0414 20.1564 10.019 20.3799 10.019C21.4078 10.019 22.257 10.4448 22.9274 11.2966C23.6425 12.1034 24 13.1121 24 14.3224C24 15.8017 23.5084 17.0345 22.5251 18.0207C21.5419 19.0069 20.3129 19.5 18.838 19.5C17.2737 19.5 16.0447 18.9397 15.1508 17.819C14.257 16.6535 13.8101 15.1069 13.8101 13.1793C13.8101 10.8931 14.5028 8.62931 15.8883 6.38793C17.2737 4.14655 19.3073 2.01724 21.9888 0L23.933 2.82414ZM10.1229 2.82414C8.51397 4.07931 7.26257 5.3569 6.36872 6.6569C5.51955 7.91207 5.09497 9.1 5.09497 10.2207C5.27374 10.131 5.49721 10.0862 5.76536 10.0862C6.07821 10.0414 6.34637 10.019 6.56983 10.019C7.59777 10.019 8.44693 10.4448 9.11732 11.2966C9.8324 12.1034 10.1899 13.1121 10.1899 14.3224C10.1899 15.8017 9.69832 17.0345 8.71508 18.0207C7.73184 19.0069 6.50279 19.5 5.02793 19.5C3.46369 19.5 2.23464 18.9397 1.34078 17.819C0.446927 16.6535 0 15.1069 0 13.1793C0 10.8931 0.692738 8.62931 2.07821 6.38793C3.46369 4.14655 5.49721 2.01724 8.17877 0L10.1229 2.82414Z\", fill: \"currentColor\" }));\nexport default SvgQuote;\n","import { useEffect, useMemo } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\n\nimport type { Map as ImmutableMap } from 'immutable';\n\nimport ArticleIcon from '@/material-icons/400-24px/article.svg?react';\nimport ChevronRightIcon from '@/material-icons/400-24px/chevron_right.svg?react';\nimport { Icon } from 'mastodon/components/icon';\nimport StatusContainer from 'mastodon/containers/status_container';\nimport type { Status } from 'mastodon/models/status';\nimport type { RootState } from 'mastodon/store';\nimport { useAppDispatch, useAppSelector } from 'mastodon/store';\n\nimport QuoteIcon from '../../images/quote.svg?react';\nimport { fetchStatus } from '../actions/statuses';\nimport { makeGetStatus } from '../selectors';\n\nconst MAX_QUOTE_POSTS_NESTING_LEVEL = 1;\n\nconst QuoteWrapper: React.FC<{\n  isError?: boolean;\n  children: React.ReactElement;\n}> = ({ isError, children }) => {\n  return (\n    <div\n      className={classNames('status__quote', {\n        'status__quote--error': isError,\n      })}\n    >\n      <Icon id='quote' icon={QuoteIcon} className='status__quote-icon' />\n      {children}\n    </div>\n  );\n};\n\nconst NestedQuoteLink: React.FC<{\n  status: Status;\n}> = ({ status }) => {\n  const accountId = status.get('account') as string;\n  const account = useAppSelector((state) =>\n    accountId ? state.accounts.get(accountId) : undefined,\n  );\n\n  const quoteAuthorName = account?.display_name_html;\n\n  if (!quoteAuthorName) {\n    return null;\n  }\n\n  const quoteAuthorElement = (\n    <span dangerouslySetInnerHTML={{ __html: quoteAuthorName }} />\n  );\n  const quoteUrl = `/@${account.get('acct')}/${status.get('id') as string}`;\n\n  return (\n    <Link to={quoteUrl} className='status__quote-author-button'>\n      <FormattedMessage\n        id='status.quote_post_author'\n        defaultMessage='Post by {name}'\n        values={{ name: quoteAuthorElement }}\n      />\n      <Icon id='chevron_right' icon={ChevronRightIcon} />\n      <Icon id='article' icon={ArticleIcon} />\n    </Link>\n  );\n};\n\ntype QuoteMap = ImmutableMap<'state' | 'quoted_status', string | null>;\ntype GetStatusSelector = (\n  state: RootState,\n  props: { id?: string | null; contextType?: string },\n) => Status | null;\n\nexport const QuotedStatus: React.FC<{\n  quote: QuoteMap;\n  contextType?: string;\n  variant?: 'full' | 'link';\n  nestingLevel?: number;\n}> = ({ quote, contextType, nestingLevel = 1, variant = 'full' }) => {\n  const dispatch = useAppDispatch();\n  const quotedStatusId = quote.get('quoted_status');\n  const quoteState = quote.get('state');\n  const status = useAppSelector((state) =>\n    quotedStatusId ? state.statuses.get(quotedStatusId) : undefined,\n  );\n\n  useEffect(() => {\n    if (!status && quotedStatusId) {\n      dispatch(fetchStatus(quotedStatusId));\n    }\n  }, [status, quotedStatusId, dispatch]);\n\n  // In order to find out whether the quoted post should be completely hidden\n  // due to a matching filter, we run it through the selector used by `status_container`.\n  // If this returns null even though `status` exists, it's because it's filtered.\n  const getStatus = useMemo(() => makeGetStatus(), []) as GetStatusSelector;\n  const statusWithExtraData = useAppSelector((state) =>\n    getStatus(state, { id: quotedStatusId, contextType }),\n  );\n  const isFilteredAndHidden = status && statusWithExtraData === null;\n\n  let quoteError: React.ReactNode = null;\n\n  if (isFilteredAndHidden) {\n    quoteError = (\n      <FormattedMessage\n        id='status.quote_error.filtered'\n        defaultMessage='Hidden due to one of your filters'\n      />\n    );\n  } else if (quoteState === 'deleted') {\n    quoteError = (\n      <FormattedMessage\n        id='status.quote_error.removed'\n        defaultMessage='This post was removed by its author.'\n      />\n    );\n  } else if (quoteState === 'unauthorized') {\n    quoteError = (\n      <FormattedMessage\n        id='status.quote_error.unauthorized'\n        defaultMessage='This post cannot be displayed as you are not authorized to view it.'\n      />\n    );\n  } else if (quoteState === 'pending') {\n    quoteError = (\n      <FormattedMessage\n        id='status.quote_error.pending_approval'\n        defaultMessage='This post is pending approval from the original author.'\n      />\n    );\n  } else if (quoteState === 'rejected' || quoteState === 'revoked') {\n    quoteError = (\n      <FormattedMessage\n        id='status.quote_error.rejected'\n        defaultMessage='This post cannot be displayed as the original author does not allow it to be quoted.'\n      />\n    );\n  } else if (!status || !quotedStatusId) {\n    quoteError = (\n      <FormattedMessage\n        id='status.quote_error.not_found'\n        defaultMessage='This post cannot be displayed.'\n      />\n    );\n  }\n\n  if (quoteError) {\n    return <QuoteWrapper isError>{quoteError}</QuoteWrapper>;\n  }\n\n  if (variant === 'link' && status) {\n    return <NestedQuoteLink status={status} />;\n  }\n\n  const childQuote = status?.get('quote') as QuoteMap | undefined;\n  const canRenderChildQuote =\n    childQuote && nestingLevel <= MAX_QUOTE_POSTS_NESTING_LEVEL;\n\n  return (\n    <QuoteWrapper>\n      {/* @ts-expect-error Status is not yet typed */}\n      <StatusContainer\n        isQuotedPost\n        id={quotedStatusId}\n        contextType={contextType}\n        avatarSize={40}\n      >\n        {canRenderChildQuote && (\n          <QuotedStatus\n            quote={childQuote}\n            contextType={contextType}\n            variant={\n              nestingLevel === MAX_QUOTE_POSTS_NESTING_LEVEL ? 'link' : 'full'\n            }\n            nestingLevel={nestingLevel + 1}\n          />\n        )}\n      </StatusContainer>\n    </QuoteWrapper>\n  );\n};\n\ninterface StatusQuoteManagerProps {\n  id: string;\n  contextType?: string;\n  [key: string]: unknown;\n}\n\n/**\n * This wrapper component takes a status ID and, if the associated status\n * is a quote post, it renders the quote into `StatusContainer` as a child.\n * It passes all other props through to `StatusContainer`.\n */\n\nexport const StatusQuoteManager = (props: StatusQuoteManagerProps) => {\n  const status = useAppSelector((state) => {\n    const status = state.statuses.get(props.id);\n    const reblogId = status?.get('reblog') as string | undefined;\n    return reblogId ? state.statuses.get(reblogId) : status;\n  });\n  const quote = status?.get('quote') as QuoteMap | undefined;\n\n  if (quote) {\n    return (\n      <StatusContainer {...props}>\n        <QuotedStatus quote={quote} contextType={props.contextType} />\n      </StatusContainer>\n    );\n  }\n\n  return <StatusContainer {...props} />;\n};\n"],"names":["SvgArticle","props","React.createElement","makeMapStateToProps","getStatus","makeGetStatus","getPictureInPicture","makeGetPictureInPicture","mapStateToProps","state","status","nextInReplyToId","nextId","getIn","pictureInPicture","mapDispatchToProps","dispatch","contextType","onReply","_","getState","trim","length","openModal","modalType","modalProps","replyCompose","onReblog","e","toggleReblog","get","shiftKey","onFavourite","toggleFavourite","onBookmark","unbookmark","bookmark","onPin","unpin","pin","onEmbed","id","onDelete","withRedraft","deleteModal","statusId","deleteStatus","onEdit","editStatus","onTranslate","undoStatusTranslation","translateStatus","onDirect","account","directCompose","onMention","mentionCompose","onOpenMedia","media","index","lang","onOpenVideo","options","onBlock","initBlockModal","onUnblock","unblockAccount","onReport","initReport","onAddFilter","initAddFilter","onMute","initMuteModal","onUnmute","unmuteAccount","onMuteConversation","unmuteStatus","muteStatus","onToggleHidden","toggleStatusSpoilers","onToggleCollapsed","isCollapsed","toggleStatusCollapse","onBlockDomain","initDomainBlockModal","onUnblockDomain","domain","unblockDomain","deployPictureInPicture","type","mediaProps","accountId","playerType","onInteractionModal","url","StatusContainer","injectIntl","connect","Status","SvgQuote","MAX_QUOTE_POSTS_NESTING_LEVEL","QuoteWrapper","isError","children","jsxs","classNames","jsx","Icon","QuoteIcon","NestedQuoteLink","useAppSelector","accounts","undefined","quoteAuthorName","display_name_html","quoteAuthorElement","__html","quoteUrl","Link","FormattedMessage","name","ChevronRightIcon","ArticleIcon","QuotedStatus","quote","nestingLevel","variant","useAppDispatch","quotedStatusId","quoteState","statuses","useEffect","fetchStatus","useMemo","statusWithExtraData","isFilteredAndHidden","quoteError","childQuote","canRenderChildQuote","StatusQuoteManager","reblogId"],"mappings":"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"}