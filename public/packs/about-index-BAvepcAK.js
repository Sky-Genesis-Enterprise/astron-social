var S=Object.defineProperty;var y=(a,s,t)=>s in a?S(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t;var f=(a,s,t)=>y(a,typeof s!="symbol"?s+"":s,t);import{j as e}from"./client-wT6vtYO_.js";import{r as h,u as I,d as M,i as L}from"./index-BdTwX--g.js";import{H as C}from"./Helmet-ZVWnGmbg.js";import{I as D,aQ as E,a as _,an as w,j as A,e as T,dZ as B,d_ as F}from"./useSelectableClick-DeaJbL2_.js";import{A as H}from"./account-0xT8MC3X.js";import{C as R}from"./column-B4vwzadM.js";import{S as $}from"./server_hero_image-CXn_HQh5.js";import{S as m}from"./skeleton-D9NbTYr9.js";import{L as z}from"./link_footer-Bqw-3xSQ.js";import{c as P}from"./index-DizoKcfL.js";import{M as r}from"./message-UFwkQlnu.js";import"./short_number-WomMu2iV.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./content_warning-DZ8mar1O.js";import"./index-BZWHsOPk.js";import"./counters-BJ0cOeaq.js";import"./follow_button-BdqDKUmA.js";import"./loading_indicator-7xMB1U6D.js";import"./verified_badge-CtK79Pb7.js";import"./scroll-BygYx8ga.js";const Z=a=>h.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...a},h.createElement("path",{d:"M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"})),x=({title:a,children:s,open:t=!1,onOpen:o})=>{const[n,l]=h.useState(!t),c=h.useCallback(()=>{l(i=>!i),o==null||o()},[o]);return e.jsxs("div",{className:P("about__section",{active:!n}),children:[e.jsxs("button",{className:"about__section__title",tabIndex:0,onClick:c,children:[e.jsx(D,{id:n?"chevron-right":"chevron-down",icon:n?E:Z})," ",a]}),!n&&e.jsx("div",{className:"about__section__body",children:s})]})},g=M({rules:{id:"about.rules",defaultMessage:"Server rules"},defaultLocale:{id:"about.default_locale",defaultMessage:"Default"}}),G=({isLoading:a=!1})=>{const s=I(),[t,o]=h.useState(s.locale),n=_(i=>J(i,t)),l=_(i=>O(i,s)),c=h.useCallback(i=>{o(i.currentTarget.value)},[]);return a?e.jsx(x,{title:s.formatMessage(g.rules)}):n.length===0?e.jsx(x,{title:s.formatMessage(g.rules),children:e.jsx("p",{children:e.jsx(r,{id:"about.not_available",defaultMessage:"This information has not been made available on this server."})})}):e.jsxs(x,{title:s.formatMessage(g.rules),children:[e.jsx("ol",{className:"rules-list",children:n.map(i=>e.jsxs("li",{children:[e.jsx("div",{className:"rules-list__text",children:i.text}),!!i.hint&&e.jsx("div",{className:"rules-list__hint",children:i.hint})]},i.id))}),e.jsxs("div",{className:"rules-languages",children:[e.jsx("label",{htmlFor:"language-select",children:e.jsx(r,{id:"about.language_label",defaultMessage:"Language"})}),e.jsx("select",{onChange:c,id:"language-select",children:l.map(i=>e.jsx("option",{value:i.value,selected:i.value===t,children:i.text},i.value))})]})]})},N=a=>{const s=a.server.getIn(["server","rules"]);return s?s.toJS():[]},J=w([N,(a,s)=>s],(a,s)=>a.map(t=>{const o=t.translations;if(!o)return t;const n=s.split("-")[0];return n&&o[n]&&(t.text=o[n].text,t.hint=o[n].hint),o[s]&&(t.text=o[s].text,t.hint=o[s].hint),t})),O=w([N,(a,s)=>s],(a,s)=>{const t={default:{value:"default",text:s.formatMessage(g.defaultLocale)}},o=new Intl.DisplayNames(s.locale,{type:"language"});for(const{translations:n}of a)for(const l in n)t[l]||(t[l]={value:l,text:o.of(l)??l});return Object.values(t)}),u=M({title:{id:"column.about",defaultMessage:"About"},blocks:{id:"about.blocks",defaultMessage:"Moderated servers"},silenced:{id:"about.domain_blocks.silenced.title",defaultMessage:"Limited"},silencedExplanation:{id:"about.domain_blocks.silenced.explanation",defaultMessage:"You will generally not see profiles and content from this server, unless you explicitly look it up or opt into it by following."},suspended:{id:"about.domain_blocks.suspended.title",defaultMessage:"Suspended"},suspendedExplanation:{id:"about.domain_blocks.suspended.explanation",defaultMessage:"No data from this server will be processed, stored or exchanged, making any interaction or communication with users from this server impossible."}}),v={silence:{title:u.silenced,explanation:u.silencedExplanation},suspend:{title:u.suspended,explanation:u.suspendedExplanation}},Q=a=>({server:a.getIn(["server","server"]),locale:a.getIn(["meta","locale"]),extendedDescription:a.getIn(["server","extendedDescription"]),domainBlocks:a.getIn(["server","domainBlocks"])});class Y extends h.PureComponent{constructor(){super(...arguments);f(this,"handleDomainBlocksOpen",()=>{const{dispatch:t}=this.props;t(F())})}componentDidMount(){const{dispatch:t}=this.props;t(T()),t(B())}render(){var b,j;const{multiColumn:t,intl:o,server:n,extendedDescription:l,domainBlocks:c,locale:i}=this.props,p=n.get("isLoading");return e.jsxs(R,{bindToDocument:!t,label:o.formatMessage(u.title),children:[e.jsxs("div",{className:"scrollable about",children:[e.jsxs("div",{className:"about__header",children:[e.jsx($,{blurhash:n.getIn(["thumbnail","blurhash"]),src:n.getIn(["thumbnail","url"]),srcSet:(b=n.getIn(["thumbnail","versions"]))==null?void 0:b.map((d,k)=>`${d} ${k.replace("@","")}`).join(", "),className:"about__header__hero"}),e.jsx("h1",{children:p?e.jsx(m,{width:"10ch"}):n.get("domain")}),e.jsx("p",{children:e.jsx(r,{id:"about.powered_by",defaultMessage:"Decentralized social media powered by {mastodon}",values:{mastodon:e.jsx("a",{href:"https://joinmastodon.org",className:"about__mail",target:"_blank",rel:"noopener",children:"Mastodon"})}})})]}),e.jsxs("div",{className:"about__meta",children:[e.jsxs("div",{className:"about__meta__column",children:[e.jsx("h4",{children:e.jsx(r,{id:"server_banner.administered_by",defaultMessage:"Administered by:"})}),e.jsx(H,{id:n.getIn(["contact","account","id"]),size:36,minimal:!0})]}),e.jsx("hr",{className:"about__meta__divider"}),e.jsxs("div",{className:"about__meta__column",children:[e.jsx("h4",{children:e.jsx(r,{id:"about.contact",defaultMessage:"Contact:"})}),p?e.jsx(m,{width:"10ch"}):e.jsx("a",{className:"about__mail",href:`mailto:${n.getIn(["contact","email"])}`,children:n.getIn(["contact","email"])})]})]}),e.jsx(x,{open:!0,title:o.formatMessage(u.title),children:l.get("isLoading")?e.jsxs(e.Fragment,{children:[e.jsx(m,{width:"100%"}),e.jsx("br",{}),e.jsx(m,{width:"100%"}),e.jsx("br",{}),e.jsx(m,{width:"100%"}),e.jsx("br",{}),e.jsx(m,{width:"70%"})]}):((j=l.get("content"))==null?void 0:j.length)>0?e.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:l.get("content")}}):e.jsx("p",{children:e.jsx(r,{id:"about.not_available",defaultMessage:"This information has not been made available on this server."})})}),e.jsx(G,{}),e.jsx(x,{title:o.formatMessage(u.blocks),onOpen:this.handleDomainBlocksOpen,children:c.get("isLoading")?e.jsxs(e.Fragment,{children:[e.jsx(m,{width:"100%"}),e.jsx("br",{}),e.jsx(m,{width:"70%"})]}):c.get("isAvailable")?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(r,{id:"about.domain_blocks.preamble",defaultMessage:"Mastodon generally allows you to view content from and interact with users from any other server in the fediverse. These are the exceptions that have been made on this particular server."})}),c.get("items").size>0&&e.jsx("div",{className:"about__domain-blocks",children:c.get("items").map(d=>e.jsxs("div",{className:"about__domain-blocks__domain",children:[e.jsxs("div",{className:"about__domain-blocks__domain__header",children:[e.jsx("h6",{children:e.jsx("span",{title:`SHA-256: ${d.get("digest")}`,children:d.get("domain")})}),e.jsx("span",{className:"about__domain-blocks__domain__type",title:o.formatMessage(v[d.get("severity")].explanation),children:o.formatMessage(v[d.get("severity")].title)})]}),e.jsx("p",{children:(d.get("comment")||"").length>0?d.get("comment"):e.jsx(r,{id:"about.domain_blocks.no_reason_available",defaultMessage:"Reason not available"})})]},d.get("domain")))})]}):e.jsx("p",{children:e.jsx(r,{id:"about.not_available",defaultMessage:"This information has not been made available on this server."})})}),e.jsx(z,{}),e.jsx("div",{className:"about__footer",children:e.jsx("p",{children:e.jsx(r,{id:"about.disclaimer",defaultMessage:"Mastodon is free, open-source software, and a trademark of Mastodon gGmbH."})})})]}),e.jsxs(C,{children:[e.jsx("title",{children:o.formatMessage(u.title)}),e.jsx("meta",{name:"robots",content:"all"})]})]})}}const ve=A(Q)(L(Y));export{ve as default};
//# sourceMappingURL=about-index-BAvepcAK.js.map
