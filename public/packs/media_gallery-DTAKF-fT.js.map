{"version":3,"file":"media_gallery-DTAKF-fT.js","sources":["../../app/javascript/mastodon/components/media_gallery.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\n\nimport { debounce } from 'lodash';\n\nimport { AltTextBadge } from 'mastodon/components/alt_text_badge';\nimport { Blurhash } from 'mastodon/components/blurhash';\nimport { SpoilerButton } from 'mastodon/components/spoiler_button';\nimport { formatTime } from 'mastodon/features/video';\n\nimport { autoPlayGif, displayMedia, useBlurhash } from '../initial_state';\n\nclass Item extends PureComponent {\n\n  static propTypes = {\n    attachment: ImmutablePropTypes.map.isRequired,\n    lang: PropTypes.string,\n    standalone: PropTypes.bool,\n    index: PropTypes.number.isRequired,\n    size: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    displayWidth: PropTypes.number,\n    visible: PropTypes.bool.isRequired,\n    autoplay: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    standalone: false,\n    index: 0,\n    size: 1,\n  };\n\n  state = {\n    loaded: false,\n    error: false,\n  };\n\n  handleMouseEnter = (e) => {\n    if (this.hoverToPlay()) {\n      e.target.play();\n    }\n  };\n\n  handleMouseLeave = (e) => {\n    if (this.hoverToPlay()) {\n      e.target.pause();\n      e.target.currentTime = 0;\n    }\n  };\n\n  getAutoPlay() {\n    return this.props.autoplay || autoPlayGif;\n  }\n\n  hoverToPlay () {\n    const { attachment } = this.props;\n    return !this.getAutoPlay() && ['gifv', 'video'].includes(attachment.get('type'));\n  }\n\n  handleClick = (e) => {\n    const { index, onClick } = this.props;\n\n    if (e.button === 0 && !(e.ctrlKey || e.metaKey)) {\n      if (this.hoverToPlay()) {\n        e.target.pause();\n        e.target.currentTime = 0;\n      }\n      e.preventDefault();\n      onClick(index);\n    }\n\n    e.stopPropagation();\n  };\n\n  handleImageLoad = () => {\n    this.setState({ loaded: true });\n  };\n\n  handleImageError = () => {\n    this.setState({ error: true });\n  };\n\n  render () {\n    const { attachment, lang, index, size, standalone, displayWidth, visible } = this.props;\n\n    let badges = [], thumbnail;\n\n    let width  = 50;\n    let height = 100;\n\n    if (size === 1) {\n      width = 100;\n    }\n\n    if (size === 4 || (size === 3 && index > 0)) {\n      height = 50;\n    }\n\n    const description = attachment.getIn(['translation', 'description']) || attachment.get('description');\n\n    if (description?.length > 0) {\n      badges.push(<AltTextBadge key='alt' description={description} />);\n    }\n\n    if (attachment.get('type') === 'unknown') {\n      return (\n        <div className={classNames('media-gallery__item', { standalone, 'media-gallery__item--tall': height === 100, 'media-gallery__item--wide': width === 100 })} key={attachment.get('id')}>\n          <a className='media-gallery__item-thumbnail' href={attachment.get('remote_url') || attachment.get('url')} style={{ cursor: 'pointer' }} title={description} lang={lang} target='_blank' rel='noopener'>\n            <Blurhash\n              hash={attachment.get('blurhash')}\n              className='media-gallery__preview'\n              dummy={!useBlurhash}\n            />\n          </a>\n        </div>\n      );\n    } else if (attachment.get('type') === 'image') {\n      const previewUrl   = attachment.get('preview_url');\n      const previewWidth = attachment.getIn(['meta', 'small', 'width']);\n\n      const originalUrl   = attachment.get('url');\n      const originalWidth = attachment.getIn(['meta', 'original', 'width']);\n\n      const hasSize = typeof originalWidth === 'number' && typeof previewWidth === 'number';\n\n      const srcSet = hasSize ? `${originalUrl} ${originalWidth}w, ${previewUrl} ${previewWidth}w` : null;\n      const sizes  = hasSize && (displayWidth > 0) ? `${displayWidth * (width / 100)}px` : null;\n\n      const focusX = attachment.getIn(['meta', 'focus', 'x']) || 0;\n      const focusY = attachment.getIn(['meta', 'focus', 'y']) || 0;\n      const x      = ((focusX /  2) + .5) * 100;\n      const y      = ((focusY / -2) + .5) * 100;\n\n      thumbnail = (\n        <a\n          className='media-gallery__item-thumbnail'\n          href={attachment.get('remote_url') || originalUrl}\n          onClick={this.handleClick}\n          target='_blank'\n          rel='noopener'\n        >\n          <img\n            src={previewUrl}\n            srcSet={srcSet}\n            sizes={sizes}\n            alt={description}\n            lang={lang}\n            style={{ objectPosition: `${x}% ${y}%` }}\n            onLoad={this.handleImageLoad}\n            onError={this.handleImageError}\n          />\n        </a>\n      );\n    } else if (['gifv', 'video'].includes(attachment.get('type'))) {\n      const autoPlay = this.getAutoPlay();\n      const duration = attachment.getIn(['meta', 'original', 'duration']);\n\n      if (attachment.get('type') === 'gifv') {\n        badges.push(<span key='gif' className='media-gallery__alt__label media-gallery__alt__label--non-interactive'>GIF</span>);\n      } else {\n        badges.push(<span key='video' className='media-gallery__alt__label media-gallery__alt__label--non-interactive'>{formatTime(Math.floor(duration))}</span>);\n      }\n\n      thumbnail = (\n        <div className={classNames('media-gallery__gifv', { autoplay: autoPlay })}>\n          <video\n            className='media-gallery__item-gifv-thumbnail'\n            aria-label={description}\n            lang={lang}\n            role='application'\n            src={attachment.get('url')}\n            onClick={this.handleClick}\n            onMouseEnter={this.handleMouseEnter}\n            onMouseLeave={this.handleMouseLeave}\n            onLoadedData={this.handleImageLoad}\n            autoPlay={autoPlay}\n            playsInline\n            loop\n            muted\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className={classNames('media-gallery__item', { standalone, 'media-gallery__item--error': this.state.error, 'media-gallery__item--tall': height === 100, 'media-gallery__item--wide': width === 100 })} key={attachment.get('id')}>\n        <Blurhash\n          hash={attachment.get('blurhash')}\n          dummy={!useBlurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': visible && this.state.loaded,\n          })}\n        />\n\n        {visible && thumbnail}\n\n        {visible && badges && (\n          <div className='media-gallery__item__badges'>\n            {badges}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n}\n\nclass MediaGallery extends PureComponent {\n\n  static propTypes = {\n    sensitive: PropTypes.bool,\n    media: ImmutablePropTypes.list.isRequired,\n    lang: PropTypes.string,\n    size: PropTypes.object,\n    height: PropTypes.number.isRequired,\n    onOpenMedia: PropTypes.func.isRequired,\n    defaultWidth: PropTypes.number,\n    cacheWidth: PropTypes.func,\n    visible: PropTypes.bool,\n    autoplay: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    matchedFilters: PropTypes.arrayOf(PropTypes.string),\n  };\n\n  state = {\n    visible: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n    width: this.props.defaultWidth,\n  };\n\n  componentDidMount () {\n    window.addEventListener('resize', this.handleResize, { passive: true });\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.media, this.props.media) && nextProps.visible === undefined) {\n      this.setState({ visible: displayMedia !== 'hide_all' && !nextProps.sensitive || displayMedia === 'show_all' });\n    } else if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ visible: nextProps.visible });\n    }\n  }\n\n  handleResize = debounce(() => {\n    if (this.node) {\n      this._setDimensions();\n    }\n  }, 250, {\n    trailing: true,\n  });\n\n  handleOpen = () => {\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ visible: !this.state.visible });\n    }\n  };\n\n  handleClick = (index) => {\n    this.props.onOpenMedia(this.props.media, index, this.props.lang);\n  };\n\n  handleRef = c => {\n    this.node = c;\n\n    if (this.node) {\n      this._setDimensions();\n    }\n  };\n\n  _setDimensions () {\n    const width = this.node.offsetWidth;\n\n    // offsetWidth triggers a layout, so only calculate when we need to\n    if (this.props.cacheWidth) {\n      this.props.cacheWidth(width);\n    }\n\n    this.setState({\n      width: width,\n    });\n  }\n\n  isFullSizeEligible() {\n    const { media } = this.props;\n    return media.size === 1 && media.getIn([0, 'meta', 'small', 'aspect']);\n  }\n\n  render () {\n    const { media, lang, sensitive, defaultWidth, autoplay, matchedFilters } = this.props;\n    const { visible } = this.state;\n    const width = this.state.width || defaultWidth;\n\n    let children;\n\n    const style = {};\n\n    if (this.isFullSizeEligible()) {\n      style.aspectRatio = `${this.props.media.getIn([0, 'meta', 'small', 'aspect'])}`;\n    } else {\n      style.aspectRatio = '3 / 2';\n    }\n\n    const size     = media.size;\n    const uncached = media.every(attachment => attachment.get('type') === 'unknown');\n\n    if (this.isFullSizeEligible()) {\n      children = <Item standalone autoplay={autoplay} onClick={this.handleClick} attachment={media.get(0)} lang={lang} displayWidth={width} visible={visible} />;\n    } else {\n      children = media.map((attachment, i) => <Item key={attachment.get('id')} autoplay={autoplay} onClick={this.handleClick} attachment={attachment} index={i} lang={lang} size={size} displayWidth={width} visible={visible || uncached} />);\n    }\n\n    return (\n      <div className={`media-gallery media-gallery--layout-${size}`} style={style} ref={this.handleRef}>\n        {children}\n\n        {(!visible || uncached) && <SpoilerButton uncached={uncached} sensitive={sensitive} onClick={this.handleOpen} matchedFilters={matchedFilters} />}\n\n        {(visible && !uncached) && (\n          <div className='media-gallery__actions'>\n            <button className='media-gallery__actions__pill' onClick={this.handleOpen}><FormattedMessage id='media_gallery.hide' defaultMessage='Hide' /></button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n}\n\nexport default MediaGallery;\n"],"names":["Item","PureComponent","state","loaded","error","handleMouseEnter","e","hoverToPlay","target","play","handleMouseLeave","pause","currentTime","handleClick","index","onClick","props","button","ctrlKey","metaKey","preventDefault","stopPropagation","handleImageLoad","setState","handleImageError","getAutoPlay","autoplay","autoPlayGif","attachment","includes","get","render","lang","size","standalone","displayWidth","visible","badges","thumbnail","width","height","description","getIn","length","push","jsx","AltTextBadge","classNames","cursor","Blurhash","useBlurhash","previewUrl","previewWidth","originalUrl","originalWidth","hasSize","srcSet","sizes","focusX","focusY","x","y","objectPosition","autoPlay","duration","formatTime","Math","floor","jsxs","__publicField","defaultProps","MediaGallery","undefined","displayMedia","sensitive","defaultWidth","handleResize","debounce","node","_setDimensions","trailing","handleOpen","onToggleVisibility","onOpenMedia","media","handleRef","c","componentDidMount","window","addEventListener","passive","componentWillUnmount","removeEventListener","UNSAFE_componentWillReceiveProps","nextProps","is","offsetWidth","cacheWidth","isFullSizeEligible","matchedFilters","children","style","aspectRatio","uncached","every","map","i","SpoilerButton","FormattedMessage"],"mappings":"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"}