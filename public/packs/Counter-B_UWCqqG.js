var x=Object.defineProperty;var j=(t,a,s)=>a in t?x(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var d=(t,a,s)=>j(t,typeof a!="symbol"?a+"":a,s);import{j as e}from"./client-wT6vtYO_.js";import{r as v,F as h}from"./index-BdTwX--g.js";import{c as f}from"./index-DizoKcfL.js";import{b as u}from"./index-DwQAxx91.js";import{a as g}from"./api-B2m7efUy.js";import{S as _}from"./skeleton-D9NbTYr9.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";const k=(t,a)=>{let s;return a!==0?t!==0?s=(a-t)/t:s=1:a===0&&t===0?s=0:s=-1,s};class M extends v.PureComponent{constructor(){super(...arguments);d(this,"state",{loading:!0,data:null})}componentDidMount(){const{measure:s,start_at:n,end_at:p,params:i}=this.props;g(!1).post("/api/v1/admin/measures",{keys:[s],start_at:n,end_at:p,[s]:i}).then(l=>{this.setState({loading:!1,data:l.data})}).catch(l=>{console.error(l)})}render(){const{label:s,href:n,target:p}=this.props,{loading:i,data:l}=this.state;let c;if(i)c=e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sparkline__value__total",children:e.jsx(_,{width:43})}),e.jsx("span",{className:"sparkline__value__change",children:e.jsx(_,{width:43})})]});else{const r=l[0],o=r.previous_total&&k(r.previous_total*1,r.total*1);c=e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sparkline__value__total",children:r.human_value||e.jsx(h,{value:r.total})}),r.previous_total&&e.jsxs("span",{className:f("sparkline__value__change",{positive:o>0,negative:o<0}),children:[o>0&&"+",e.jsx(h,{value:o,style:"percent"})]})]})}const m=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sparkline__value",children:c}),e.jsx("div",{className:"sparkline__label",children:s}),e.jsx("div",{className:"sparkline__graph",children:!i&&e.jsx(u.Sparklines,{width:259,height:55,data:l[0].data.map(r=>r.value*1),children:e.jsx(u.SparklinesCurve,{})})})]});return n?e.jsx("a",{href:n,className:"sparkline",target:p,children:m}):e.jsx("div",{className:"sparkline",children:m})}}export{M as default};
//# sourceMappingURL=Counter-B_UWCqqG.js.map
