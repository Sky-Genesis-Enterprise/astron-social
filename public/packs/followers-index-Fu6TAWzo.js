var w=Object.defineProperty;var C=(e,r,s)=>r in e?w(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s;var l=(e,r,s)=>C(e,typeof r!="symbol"?r+"":r,s);import{j as t}from"./client-wT6vtYO_.js";import{P as i}from"./short_number-WomMu2iV.js";import"./index-BdTwX--g.js";import{j as T,dd as k,y as B,z as H,f as P,dm as S,df as I,H as E,dn as F,a as v}from"./useSelectableClick-DeaJbL2_.js";import{A as R}from"./account-0xT8MC3X.js";import{T as U}from"./timeline_hint-0fHjsenK.js";import{C as z,A as D,L as q}from"./limited_account_hint-Dq-fgEQD.js";import{B as K}from"./bundle_column_error-Cn2E6aKL.js";import{g as N}from"./content_warning-DZ8mar1O.js";import{L as G}from"./loading_indicator-7xMB1U6D.js";import{S as J}from"./scrollable_list-lNykmhKA.js";import{C as b}from"./column-Cq3LGCyF.js";import{M as m}from"./message-UFwkQlnu.js";import"./numbers-CGZQWBYL.js";import"./api-B2m7efUy.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-CAH5FfLP.js";import"./load_locale-tOpKhmcM.js";import"./index-DizoKcfL.js";import"./index-BZWHsOPk.js";import"./counters-BJ0cOeaq.js";import"./follow_button-BdqDKUmA.js";import"./skeleton-D9NbTYr9.js";import"./verified_badge-CtK79Pb7.js";import"./column_header-FN7GyEAs.js";import"./add-D8GR9P00.js";import"./chevron_left-CnYIoVsW.js";import"./close-BsPe8EbX.js";import"./Helmet-ZVWnGmbg.js";import"./notifications-CKA6ESoP.js";import"./notifications_active-fill-Bd5B72X1.js";import"./domain_blocks-CYnp0hav.js";import"./reports-DBOcsYZF.js";import"./group-Xgbn5g1L.js";import"./person-DcoiY4fW.js";import"./content_copy-CD6CbhEl.js";import"./formatted_date-jZOhBAMt.js";import"./react-textarea-autosize.browser.esm-GiEI5riT.js";import"./use-isomorphic-layout-effect.browser.esm-D-sFEUJ5.js";import"./permissions-Djze7cmB.js";import"./avatar_group-PUipFlog.js";import"./avatar_overlay-BeG39OK4.js";import"./column-B4vwzadM.js";import"./scroll-BygYx8ga.js";import"./gif-BtN1axMk.js";import"./scroll_container-Bq73vRM7.js";import"./react-router-scroll-4.es-CU7ja20b.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-Co3Ydhdu.js";import"./load_more-qGthrhsi.js";const O=(e,{params:{acct:r,id:s}})=>{const o=s||e.accounts_map[k(r)];return o?{accountId:o,remote:e.getIn(["accounts",o,"acct"])!==e.getIn(["accounts",o,"username"]),remoteUrl:e.getIn(["accounts",o,"url"]),isAccount:!!e.getIn(["accounts",o]),accountIds:e.getIn(["user_lists","followers",o,"items"]),hasMore:!!e.getIn(["user_lists","followers",o,"next"]),isLoading:e.getIn(["user_lists","followers",o,"isLoading"],!0),suspended:e.getIn(["accounts",o,"suspended"],!1),hideCollections:e.getIn(["accounts",o,"hide_collections"],!1),hidden:N(e,o),blockedBy:e.getIn(["relationships",o,"blocked_by"],!1)}:{isLoading:!0}},j=({accountId:e,url:r})=>{const s=v(n=>{var a;return(a=n.accounts.get(e))==null?void 0:a.acct}),o=s?s.split("@")[1]:void 0;return t.jsx(U,{url:r,message:t.jsx(m,{id:"hints.profiles.followers_may_be_missing",defaultMessage:"Followers for this profile may be missing."}),label:t.jsx(m,{id:"hints.profiles.see_more_followers",defaultMessage:"See more followers on {domain}",values:{domain:t.jsx("strong",{children:o})}})})};class y extends B{constructor(){super(...arguments);l(this,"handleLoadMore",E(()=>{this.props.dispatch(F(this.props.accountId))},300,{leading:!0}))}_load(){const{accountId:s,isAccount:o,dispatch:n}=this.props;o||n(P(s)),n(S(s))}componentDidMount(){const{params:{acct:s},accountId:o,dispatch:n}=this.props;o?this._load():n(I(s))}componentDidUpdate(s){const{params:{acct:o},accountId:n,dispatch:a}=this.props;s.accountId!==n&&n?this._load():s.params.acct!==o&&a(I(o))}render(){const{accountId:s,accountIds:o,hasMore:n,blockedBy:a,isAccount:_,multiColumn:p,isLoading:M,suspended:d,hidden:u,remote:f,remoteUrl:h,hideCollections:A}=this.props;if(!_)return t.jsx(K,{multiColumn:p,errorType:"routing"});if(!o)return t.jsx(b,{children:t.jsx(G,{})});let c;const g=a||d||u;d?c=t.jsx(m,{id:"empty_column.account_suspended",defaultMessage:"Account suspended"}):u?c=t.jsx(q,{accountId:s}):a?c=t.jsx(m,{id:"empty_column.account_unavailable",defaultMessage:"Profile unavailable"}):A&&o.isEmpty()?c=t.jsx(m,{id:"empty_column.account_hides_collections",defaultMessage:"This user has chosen to not make this information available"}):f&&o.isEmpty()?c=t.jsx(j,{accountId:s,url:h}):c=t.jsx(m,{id:"account.followers.empty",defaultMessage:"No one follows this user yet."});const L=f?t.jsx(j,{accountId:s,url:h}):null;return t.jsxs(b,{children:[t.jsx(z,{}),t.jsx(J,{scrollKey:"followers",hasMore:!g&&n,isLoading:M,onLoadMore:this.handleLoadMore,prepend:t.jsx(D,{accountId:this.props.accountId,hideTabs:!0}),alwaysPrepend:!0,append:L,emptyMessage:c,bindToDocument:!p,children:g?[]:o.map(x=>t.jsx(R,{id:x},x))})]})}}l(y,"propTypes",{params:i.shape({acct:i.string,id:i.string}).isRequired,accountId:i.string,dispatch:i.func.isRequired,accountIds:H.list,hasMore:i.bool,isLoading:i.bool,blockedBy:i.bool,isAccount:i.bool,suspended:i.bool,hidden:i.bool,remote:i.bool,remoteUrl:i.string,multiColumn:i.bool});const Qo=T(O)(y);export{Qo as default};
//# sourceMappingURL=followers-index-Fu6TAWzo.js.map
