{"version":3,"file":"useSelectableClick-DeaJbL2_.js","sources":["../../node_modules/@react-spring/rafz/dist/react-spring_rafz.modern.mjs","../../node_modules/@react-spring/shared/dist/react-spring_shared.modern.mjs","../../node_modules/@react-spring/animated/dist/react-spring_animated.modern.mjs","../../node_modules/@react-spring/core/dist/react-spring_core.modern.mjs","../../node_modules/@react-spring/web/dist/react-spring_web.modern.mjs","../../app/javascript/mastodon/utils/html.ts","../../app/javascript/mastodon/utils/notifications.ts","../../node_modules/detect-it/dist/detect-it.esm.js","../../app/javascript/mastodon/is_mobile.ts","../../app/javascript/mastodon/components/router.tsx","../../app/javascript/mastodon/utils/debounce.ts","../../node_modules/redux/dist/redux.mjs","../../node_modules/immer/dist/immer.mjs","../../node_modules/reselect/dist/reselect.mjs","../../node_modules/redux-thunk/dist/redux-thunk.mjs","../../node_modules/@reduxjs/toolkit/dist/redux-toolkit.modern.mjs","../../app/javascript/mastodon/api/accounts.ts","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.production.js","../../node_modules/use-sync-external-store/with-selector.js","../../node_modules/react-redux/dist/react-redux.mjs","../../app/javascript/mastodon/store/typed_functions.ts","../../node_modules/escape-html/index.js","../../node_modules/immutable/dist/immutable.es.js","../../app/javascript/mastodon/models/custom_emoji.ts","../../app/javascript/mastodon/models/poll.ts","../../app/javascript/mastodon/actions/importer/accounts.ts","../../app/javascript/mastodon/actions/importer/normalizer.js","../../app/javascript/mastodon/actions/importer/polls.ts","../../app/javascript/mastodon/actions/importer/index.js","../../app/javascript/mastodon/actions/accounts_typed.ts","../../app/javascript/mastodon/actions/accounts.js","../../app/javascript/mastodon/compare_id.ts","../../app/javascript/mastodon/actions/markers.ts","../../app/javascript/mastodon/actions/notifications_typed.ts","../../app/javascript/mastodon/settings.js","../../app/javascript/mastodon/utils/base64.ts","../../app/javascript/mastodon/actions/push_notifications/setter.js","../../app/javascript/mastodon/actions/push_notifications/registerer.js","../../app/javascript/mastodon/actions/notifications.js","../../app/javascript/mastodon/actions/custom_emojis.js","../../app/javascript/mastodon/features/emoji/unicode_to_unified_name.js","../../app/javascript/mastodon/features/emoji/emoji_mart_data_light.ts","../../app/javascript/mastodon/features/emoji/emoji_utils.js","../../app/javascript/mastodon/features/emoji/emoji_mart_search_light.js","../../app/javascript/mastodon/actions/alerts.ts","../../app/javascript/mastodon/actions/settings.js","../../app/javascript/mastodon/actions/emojis.js","../../app/javascript/mastodon/actions/modal.ts","../../app/javascript/mastodon/actions/timelines_typed.ts","../../app/javascript/mastodon/actions/timelines.js","../../app/javascript/mastodon/actions/compose.js","../../app/javascript/mastodon/api/search.ts","../../app/javascript/mastodon/actions/search.ts","../../app/javascript/mastodon/actions/store.js","../../app/javascript/mastodon/actions/announcements.js","../../app/javascript/mastodon/actions/conversations.js","../../app/javascript/mastodon/api/notifications.ts","../../app/javascript/mastodon/api_types/notifications.ts","../../app/javascript/mastodon/selectors/settings.ts","../../app/javascript/mastodon/actions/notification_groups.ts","../../app/javascript/mastodon/api/statuses.ts","../../app/javascript/mastodon/actions/statuses_typed.ts","../../app/javascript/mastodon/actions/statuses.js","../../app/javascript/mastodon/actions/app.ts","../../node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","../../node_modules/react-redux/dist/cjs/react-redux.production.min.cjs","../../node_modules/react-redux/dist/cjs/index.js","../../node_modules/react-redux-loading-bar/build/loading_bar_ducks.js","../../node_modules/react-redux-loading-bar/build/loading_bar.js","../../node_modules/react-redux-loading-bar/build/loading_bar_middleware.js","../../node_modules/react-redux-loading-bar/build/immutable.js","../../node_modules/react-redux-loading-bar/build/index.js","../../node_modules/redux-immutable/dist/utilities/getStateName.js","../../node_modules/redux-immutable/dist/utilities/getUnexpectedInvocationParameterMessage.js","../../node_modules/redux-immutable/dist/utilities/validateNextState.js","../../node_modules/redux-immutable/dist/utilities/index.js","../../node_modules/redux-immutable/dist/combineReducers.js","../../node_modules/redux-immutable/dist/index.js","../../app/javascript/mastodon/models/account.ts","../../app/javascript/mastodon/reducers/accounts.ts","../../app/javascript/mastodon/actions/accounts_familiar_followers.ts","../../app/javascript/mastodon/reducers/accounts_familiar_followers.ts","../../app/javascript/mastodon/reducers/accounts_map.ts","../../app/javascript/mastodon/reducers/alerts.ts","../../app/javascript/mastodon/reducers/announcements.js","../../app/javascript/mastodon/api/compose.ts","../../app/javascript/mastodon/actions/compose_typed.ts","../../app/javascript/mastodon/uuid.ts","../../app/javascript/mastodon/reducers/compose.js","../../app/javascript/mastodon/reducers/contexts.ts","../../app/javascript/mastodon/actions/domain_blocks_typed.ts","../../app/javascript/mastodon/reducers/conversations.js","../../app/javascript/mastodon/reducers/custom_emojis.js","../../app/javascript/mastodon/actions/dropdown_menu.ts","../../app/javascript/mastodon/reducers/dropdown_menu.ts","../../app/javascript/mastodon/actions/filters.js","../../app/javascript/mastodon/reducers/filters.js","../../app/javascript/mastodon/actions/height_cache.js","../../app/javascript/mastodon/reducers/height_cache.js","../../app/javascript/mastodon/actions/history.js","../../app/javascript/mastodon/reducers/history.js","../../app/javascript/mastodon/api/lists.ts","../../app/javascript/mastodon/actions/lists_typed.ts","../../app/javascript/mastodon/models/list.ts","../../app/javascript/mastodon/actions/lists.js","../../app/javascript/mastodon/reducers/lists.ts","../../app/javascript/mastodon/reducers/markers.ts","../../app/javascript/mastodon/reducers/media_attachments.js","../../app/javascript/mastodon/reducers/meta.js","../../app/javascript/mastodon/reducers/modal.ts","../../app/javascript/mastodon/actions/navigation.ts","../../app/javascript/mastodon/reducers/navigation.ts","../../app/javascript/mastodon/models/notification_group.ts","../../app/javascript/mastodon/reducers/notification_groups.ts","../../app/javascript/mastodon/api/notification_policies.ts","../../app/javascript/mastodon/actions/notification_policies.ts","../../app/javascript/mastodon/reducers/notification_policy.ts","../../app/javascript/mastodon/actions/notification_requests.ts","../../app/javascript/mastodon/models/notification_request.ts","../../app/javascript/mastodon/reducers/notifications.js","../../app/javascript/mastodon/reducers/notification_requests.ts","../../app/javascript/mastodon/actions/picture_in_picture.ts","../../app/javascript/mastodon/reducers/picture_in_picture.ts","../../app/javascript/mastodon/reducers/polls.ts","../../app/javascript/mastodon/reducers/push_notifications.js","../../app/javascript/mastodon/models/relationship.ts","../../app/javascript/mastodon/actions/account_notes.ts","../../app/javascript/mastodon/reducers/relationships.ts","../../app/javascript/mastodon/models/search.ts","../../app/javascript/mastodon/reducers/search.ts","../../app/javascript/mastodon/actions/server.js","../../app/javascript/mastodon/reducers/server.js","../../app/javascript/mastodon/actions/columns.js","../../app/javascript/mastodon/reducers/settings.js","../../app/javascript/mastodon/actions/bookmarks.js","../../app/javascript/mastodon/actions/favourites.js","../../app/javascript/mastodon/api/interactions.ts","../../app/javascript/mastodon/actions/interactions_typed.ts","../../app/javascript/mastodon/actions/interactions.js","../../app/javascript/mastodon/actions/pin_statuses.js","../../app/javascript/mastodon/actions/trends.js","../../app/javascript/mastodon/reducers/status_lists.js","../../app/javascript/mastodon/reducers/statuses.js","../../app/javascript/mastodon/api/suggestions.ts","../../app/javascript/mastodon/actions/suggestions.ts","../../app/javascript/mastodon/models/suggestion.ts","../../app/javascript/mastodon/reducers/suggestions.ts","../../app/javascript/mastodon/reducers/timelines.js","../../app/javascript/mastodon/reducers/trends.js","../../app/javascript/mastodon/api/directory.ts","../../app/javascript/mastodon/actions/directory.ts","../../app/javascript/mastodon/actions/featured_tags.ts","../../app/javascript/mastodon/actions/blocks.js","../../app/javascript/mastodon/actions/mutes.js","../../app/javascript/mastodon/reducers/user_lists.js","../../app/javascript/mastodon/reducers/index.ts","../../app/javascript/mastodon/store/middlewares/errors.ts","../../app/javascript/mastodon/store/middlewares/loading_bar.ts","../../app/javascript/mastodon/store/middlewares/sounds.ts","../../app/javascript/mastodon/store/store.ts","../../node_modules/@restart/hooks/esm/useCallbackRef.js","../../node_modules/@restart/hooks/esm/useMergedRefs.js","../../node_modules/@popperjs/core/lib/enums.js","../../node_modules/@popperjs/core/lib/utils/getBasePlacement.js","../../node_modules/@popperjs/core/lib/dom-utils/getWindow.js","../../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","../../node_modules/@popperjs/core/lib/utils/math.js","../../node_modules/@popperjs/core/lib/utils/userAgent.js","../../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js","../../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","../../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","../../node_modules/@popperjs/core/lib/dom-utils/contains.js","../../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","../../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","../../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","../../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","../../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","../../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","../../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","../../node_modules/@popperjs/core/lib/utils/within.js","../../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","../../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","../../node_modules/@popperjs/core/lib/utils/expandToHashMap.js","../../node_modules/@popperjs/core/lib/modifiers/arrow.js","../../node_modules/@popperjs/core/lib/utils/getVariation.js","../../node_modules/@popperjs/core/lib/modifiers/computeStyles.js","../../node_modules/@popperjs/core/lib/modifiers/eventListeners.js","../../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","../../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","../../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","../../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","../../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","../../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","../../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","../../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","../../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","../../node_modules/@popperjs/core/lib/utils/rectToClientRect.js","../../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","../../node_modules/@popperjs/core/lib/utils/computeOffsets.js","../../node_modules/@popperjs/core/lib/utils/detectOverflow.js","../../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","../../node_modules/@popperjs/core/lib/modifiers/flip.js","../../node_modules/@popperjs/core/lib/modifiers/hide.js","../../node_modules/@popperjs/core/lib/modifiers/offset.js","../../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","../../node_modules/@popperjs/core/lib/utils/getAltAxis.js","../../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","../../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","../../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","../../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","../../node_modules/@popperjs/core/lib/utils/orderModifiers.js","../../node_modules/@popperjs/core/lib/utils/debounce.js","../../node_modules/@popperjs/core/lib/utils/mergeByName.js","../../node_modules/@popperjs/core/lib/createPopper.js","../../node_modules/react-overlays/esm/popper.js","../../node_modules/@restart/hooks/esm/useMounted.js","../../node_modules/@restart/hooks/esm/useSafeState.js","../../node_modules/react-overlays/esm/usePopper.js","../../node_modules/dom-helpers/esm/contains.js","../../node_modules/dom-helpers/esm/canUseDOM.js","../../node_modules/dom-helpers/esm/addEventListener.js","../../node_modules/dom-helpers/esm/removeEventListener.js","../../node_modules/dom-helpers/esm/listen.js","../../node_modules/@restart/hooks/esm/useCommittedRef.js","../../node_modules/@restart/hooks/esm/useEventCallback.js","../../node_modules/warning/warning.js","../../node_modules/dom-helpers/esm/ownerDocument.js","../../node_modules/react-overlays/esm/safeFindDOMNode.js","../../node_modules/react-overlays/esm/ownerDocument.js","../../node_modules/react-overlays/esm/useRootClose.js","../../node_modules/react-overlays/esm/useWaitForDOMRef.js","../../node_modules/react-overlays/esm/mergeOptionsWithPopperConfig.js","../../node_modules/react-overlays/esm/Overlay.js","../../app/javascript/material-icons/400-24px/check.svg?react","../../app/javascript/material-icons/400-24px/check_box_outline_blank.svg?react","../../app/javascript/mastodon/components/icon.tsx","../../app/javascript/mastodon/hooks/useHovering.ts","../../app/javascript/mastodon/components/avatar.tsx","../../app/javascript/mastodon/identity_context.tsx","../../app/javascript/mastodon/components/circular_progress.tsx","../../app/javascript/material-icons/400-24px/download.svg?react","../../app/javascript/material-icons/400-24px/forward_5-fill.svg?react","../../app/javascript/material-icons/400-24px/pause-fill.svg?react","../../app/javascript/material-icons/400-24px/play_arrow-fill.svg?react","../../app/javascript/material-icons/400-24px/replay_5-fill.svg?react","../../app/javascript/material-icons/400-24px/volume_off-fill.svg?react","../../app/javascript/material-icons/400-24px/volume_up-fill.svg?react","../../node_modules/blurhash/dist/esm/index.js","../../app/javascript/mastodon/components/blurhash.tsx","../../app/javascript/mastodon/components/spoiler_button.tsx","../../app/javascript/material-icons/400-24px/fullscreen.svg?react","../../app/javascript/material-icons/400-24px/fullscreen_exit.svg?react","../../app/javascript/material-icons/400-24px/rectangle.svg?react","../../app/javascript/material-icons/400-24px/volume_down-fill.svg?react","../../app/javascript/mastodon/features/ui/util/fullscreen.ts","../../app/javascript/mastodon/features/video/components/hotkey_indicator.tsx","../../app/javascript/mastodon/features/video/index.tsx","../../app/javascript/mastodon/hooks/useAudioContext.ts","../../app/javascript/mastodon/hooks/useAudioVisualizer.ts","../../app/javascript/mastodon/features/audio/index.tsx","../../app/javascript/material-icons/400-24px/open_in_new.svg?react","../../app/javascript/material-icons/400-24px/repeat.svg?react","../../app/javascript/material-icons/400-24px/reply.svg?react","../../app/javascript/material-icons/400-24px/reply_all.svg?react","../../app/javascript/material-icons/400-24px/star-fill.svg?react","../../app/javascript/material-icons/400-24px/star.svg?react","../../app/javascript/svg-icons/repeat_active.svg?react","../../app/javascript/svg-icons/repeat_disabled.svg?react","../../app/javascript/svg-icons/repeat_private.svg?react","../../app/javascript/svg-icons/repeat_private_active.svg?react","../../app/javascript/mastodon/components/animated_number.tsx","../../app/javascript/mastodon/components/icon_button.tsx","../../app/javascript/mastodon/utils/react_router.tsx","../../node_modules/react-immutable-proptypes/dist/ImmutablePropTypes.js","../../node_modules/react-immutable-pure-component/lib/react-immutable-pure-component.es.js","../../app/javascript/material-icons/400-24px/chevron_right.svg?react","../../app/javascript/mastodon/hooks/useSelectableClick.ts"],"sourcesContent":["// src/index.ts\nvar updateQueue = makeQueue();\nvar raf = (fn) => schedule(fn, updateQueue);\nvar writeQueue = makeQueue();\nraf.write = (fn) => schedule(fn, writeQueue);\nvar onStartQueue = makeQueue();\nraf.onStart = (fn) => schedule(fn, onStartQueue);\nvar onFrameQueue = makeQueue();\nraf.onFrame = (fn) => schedule(fn, onFrameQueue);\nvar onFinishQueue = makeQueue();\nraf.onFinish = (fn) => schedule(fn, onFinishQueue);\nvar timeouts = [];\nraf.setTimeout = (handler, ms) => {\n  const time = raf.now() + ms;\n  const cancel = () => {\n    const i = timeouts.findIndex((t) => t.cancel == cancel);\n    if (~i)\n      timeouts.splice(i, 1);\n    pendingCount -= ~i ? 1 : 0;\n  };\n  const timeout = { time, handler, cancel };\n  timeouts.splice(findTimeout(time), 0, timeout);\n  pendingCount += 1;\n  start();\n  return timeout;\n};\nvar findTimeout = (time) => ~(~timeouts.findIndex((t) => t.time > time) || ~timeouts.length);\nraf.cancel = (fn) => {\n  onStartQueue.delete(fn);\n  onFrameQueue.delete(fn);\n  onFinishQueue.delete(fn);\n  updateQueue.delete(fn);\n  writeQueue.delete(fn);\n};\nraf.sync = (fn) => {\n  sync = true;\n  raf.batchedUpdates(fn);\n  sync = false;\n};\nraf.throttle = (fn) => {\n  let lastArgs;\n  function queuedFn() {\n    try {\n      fn(...lastArgs);\n    } finally {\n      lastArgs = null;\n    }\n  }\n  function throttled(...args) {\n    lastArgs = args;\n    raf.onStart(queuedFn);\n  }\n  throttled.handler = fn;\n  throttled.cancel = () => {\n    onStartQueue.delete(queuedFn);\n    lastArgs = null;\n  };\n  return throttled;\n};\nvar nativeRaf = typeof window != \"undefined\" ? window.requestAnimationFrame : (\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  () => {\n  }\n);\nraf.use = (impl) => nativeRaf = impl;\nraf.now = typeof performance != \"undefined\" ? () => performance.now() : Date.now;\nraf.batchedUpdates = (fn) => fn();\nraf.catch = console.error;\nraf.frameLoop = \"always\";\nraf.advance = () => {\n  if (raf.frameLoop !== \"demand\") {\n    console.warn(\n      \"Cannot call the manual advancement of rafz whilst frameLoop is not set as demand\"\n    );\n  } else {\n    update();\n  }\n};\nvar ts = -1;\nvar pendingCount = 0;\nvar sync = false;\nfunction schedule(fn, queue) {\n  if (sync) {\n    queue.delete(fn);\n    fn(0);\n  } else {\n    queue.add(fn);\n    start();\n  }\n}\nfunction start() {\n  if (ts < 0) {\n    ts = 0;\n    if (raf.frameLoop !== \"demand\") {\n      nativeRaf(loop);\n    }\n  }\n}\nfunction stop() {\n  ts = -1;\n}\nfunction loop() {\n  if (~ts) {\n    nativeRaf(loop);\n    raf.batchedUpdates(update);\n  }\n}\nfunction update() {\n  const prevTs = ts;\n  ts = raf.now();\n  const count = findTimeout(ts);\n  if (count) {\n    eachSafely(timeouts.splice(0, count), (t) => t.handler());\n    pendingCount -= count;\n  }\n  if (!pendingCount) {\n    stop();\n    return;\n  }\n  onStartQueue.flush();\n  updateQueue.flush(prevTs ? Math.min(64, ts - prevTs) : 16.667);\n  onFrameQueue.flush();\n  writeQueue.flush();\n  onFinishQueue.flush();\n}\nfunction makeQueue() {\n  let next = /* @__PURE__ */ new Set();\n  let current = next;\n  return {\n    add(fn) {\n      pendingCount += current == next && !next.has(fn) ? 1 : 0;\n      next.add(fn);\n    },\n    delete(fn) {\n      pendingCount -= current == next && next.has(fn) ? 1 : 0;\n      return next.delete(fn);\n    },\n    flush(arg) {\n      if (current.size) {\n        next = /* @__PURE__ */ new Set();\n        pendingCount -= current.size;\n        eachSafely(current, (fn) => fn(arg) && next.add(fn));\n        pendingCount += next.size;\n        current = next;\n      }\n    }\n  };\n}\nfunction eachSafely(values, each) {\n  values.forEach((value) => {\n    try {\n      each(value);\n    } catch (e) {\n      raf.catch(e);\n    }\n  });\n}\nvar __raf = {\n  /** The number of pending tasks */\n  count() {\n    return pendingCount;\n  },\n  /** Whether there's a raf update loop running */\n  isRunning() {\n    return ts >= 0;\n  },\n  /** Clear internal state. Never call from update loop! */\n  clear() {\n    ts = -1;\n    timeouts = [];\n    onStartQueue = makeQueue();\n    updateQueue = makeQueue();\n    onFrameQueue = makeQueue();\n    writeQueue = makeQueue();\n    onFinishQueue = makeQueue();\n    pendingCount = 0;\n  }\n};\nexport {\n  __raf,\n  raf\n};\n//# sourceMappingURL=react-spring_rafz.modern.mjs.map","var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/globals.ts\nvar globals_exports = {};\n__export(globals_exports, {\n  assign: () => assign,\n  colors: () => colors,\n  createStringInterpolator: () => createStringInterpolator,\n  skipAnimation: () => skipAnimation,\n  to: () => to,\n  willAdvance: () => willAdvance\n});\nimport { raf } from \"@react-spring/rafz\";\n\n// src/helpers.ts\nfunction noop() {\n}\nvar defineHidden = (obj, key, value) => Object.defineProperty(obj, key, { value, writable: true, configurable: true });\nvar is = {\n  arr: Array.isArray,\n  obj: (a) => !!a && a.constructor.name === \"Object\",\n  fun: (a) => typeof a === \"function\",\n  str: (a) => typeof a === \"string\",\n  num: (a) => typeof a === \"number\",\n  und: (a) => a === void 0\n};\nfunction isEqual(a, b) {\n  if (is.arr(a)) {\n    if (!is.arr(b) || a.length !== b.length)\n      return false;\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] !== b[i])\n        return false;\n    }\n    return true;\n  }\n  return a === b;\n}\nvar each = (obj, fn) => obj.forEach(fn);\nfunction eachProp(obj, fn, ctx) {\n  if (is.arr(obj)) {\n    for (let i = 0; i < obj.length; i++) {\n      fn.call(ctx, obj[i], `${i}`);\n    }\n    return;\n  }\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn.call(ctx, obj[key], key);\n    }\n  }\n}\nvar toArray = (a) => is.und(a) ? [] : is.arr(a) ? a : [a];\nfunction flush(queue, iterator) {\n  if (queue.size) {\n    const items = Array.from(queue);\n    queue.clear();\n    each(items, iterator);\n  }\n}\nvar flushCalls = (queue, ...args) => flush(queue, (fn) => fn(...args));\nvar isSSR = () => typeof window === \"undefined\" || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\n\n// src/globals.ts\nvar createStringInterpolator;\nvar to;\nvar colors = null;\nvar skipAnimation = false;\nvar willAdvance = noop;\nvar assign = (globals) => {\n  if (globals.to)\n    to = globals.to;\n  if (globals.now)\n    raf.now = globals.now;\n  if (globals.colors !== void 0)\n    colors = globals.colors;\n  if (globals.skipAnimation != null)\n    skipAnimation = globals.skipAnimation;\n  if (globals.createStringInterpolator)\n    createStringInterpolator = globals.createStringInterpolator;\n  if (globals.requestAnimationFrame)\n    raf.use(globals.requestAnimationFrame);\n  if (globals.batchedUpdates)\n    raf.batchedUpdates = globals.batchedUpdates;\n  if (globals.willAdvance)\n    willAdvance = globals.willAdvance;\n  if (globals.frameLoop)\n    raf.frameLoop = globals.frameLoop;\n};\n\n// src/FrameLoop.ts\nimport { raf as raf2 } from \"@react-spring/rafz\";\nvar startQueue = /* @__PURE__ */ new Set();\nvar currentFrame = [];\nvar prevFrame = [];\nvar priority = 0;\nvar frameLoop = {\n  get idle() {\n    return !startQueue.size && !currentFrame.length;\n  },\n  /** Advance the given animation on every frame until idle. */\n  start(animation) {\n    if (priority > animation.priority) {\n      startQueue.add(animation);\n      raf2.onStart(flushStartQueue);\n    } else {\n      startSafely(animation);\n      raf2(advance);\n    }\n  },\n  /** Advance all animations by the given time. */\n  advance,\n  /** Call this when an animation's priority changes. */\n  sort(animation) {\n    if (priority) {\n      raf2.onFrame(() => frameLoop.sort(animation));\n    } else {\n      const prevIndex = currentFrame.indexOf(animation);\n      if (~prevIndex) {\n        currentFrame.splice(prevIndex, 1);\n        startUnsafely(animation);\n      }\n    }\n  },\n  /**\n   * Clear all animations. For testing purposes.\n   *\n   * ☠️ Never call this from within the frameloop.\n   */\n  clear() {\n    currentFrame = [];\n    startQueue.clear();\n  }\n};\nfunction flushStartQueue() {\n  startQueue.forEach(startSafely);\n  startQueue.clear();\n  raf2(advance);\n}\nfunction startSafely(animation) {\n  if (!currentFrame.includes(animation))\n    startUnsafely(animation);\n}\nfunction startUnsafely(animation) {\n  currentFrame.splice(\n    findIndex(currentFrame, (other) => other.priority > animation.priority),\n    0,\n    animation\n  );\n}\nfunction advance(dt) {\n  const nextFrame = prevFrame;\n  for (let i = 0; i < currentFrame.length; i++) {\n    const animation = currentFrame[i];\n    priority = animation.priority;\n    if (!animation.idle) {\n      willAdvance(animation);\n      animation.advance(dt);\n      if (!animation.idle) {\n        nextFrame.push(animation);\n      }\n    }\n  }\n  priority = 0;\n  prevFrame = currentFrame;\n  prevFrame.length = 0;\n  currentFrame = nextFrame;\n  return currentFrame.length > 0;\n}\nfunction findIndex(arr, test) {\n  const index = arr.findIndex(test);\n  return index < 0 ? arr.length : index;\n}\n\n// src/clamp.ts\nvar clamp = (min, max, v) => Math.min(Math.max(v, min), max);\n\n// src/colors.ts\nvar colors2 = {\n  transparent: 0,\n  aliceblue: 4042850303,\n  antiquewhite: 4209760255,\n  aqua: 16777215,\n  aquamarine: 2147472639,\n  azure: 4043309055,\n  beige: 4126530815,\n  bisque: 4293182719,\n  black: 255,\n  blanchedalmond: 4293643775,\n  blue: 65535,\n  blueviolet: 2318131967,\n  brown: 2771004159,\n  burlywood: 3736635391,\n  burntsienna: 3934150143,\n  cadetblue: 1604231423,\n  chartreuse: 2147418367,\n  chocolate: 3530104575,\n  coral: 4286533887,\n  cornflowerblue: 1687547391,\n  cornsilk: 4294499583,\n  crimson: 3692313855,\n  cyan: 16777215,\n  darkblue: 35839,\n  darkcyan: 9145343,\n  darkgoldenrod: 3095792639,\n  darkgray: 2846468607,\n  darkgreen: 6553855,\n  darkgrey: 2846468607,\n  darkkhaki: 3182914559,\n  darkmagenta: 2332068863,\n  darkolivegreen: 1433087999,\n  darkorange: 4287365375,\n  darkorchid: 2570243327,\n  darkred: 2332033279,\n  darksalmon: 3918953215,\n  darkseagreen: 2411499519,\n  darkslateblue: 1211993087,\n  darkslategray: 793726975,\n  darkslategrey: 793726975,\n  darkturquoise: 13554175,\n  darkviolet: 2483082239,\n  deeppink: 4279538687,\n  deepskyblue: 12582911,\n  dimgray: 1768516095,\n  dimgrey: 1768516095,\n  dodgerblue: 512819199,\n  firebrick: 2988581631,\n  floralwhite: 4294635775,\n  forestgreen: 579543807,\n  fuchsia: 4278255615,\n  gainsboro: 3705462015,\n  ghostwhite: 4177068031,\n  gold: 4292280575,\n  goldenrod: 3668254975,\n  gray: 2155905279,\n  green: 8388863,\n  greenyellow: 2919182335,\n  grey: 2155905279,\n  honeydew: 4043305215,\n  hotpink: 4285117695,\n  indianred: 3445382399,\n  indigo: 1258324735,\n  ivory: 4294963455,\n  khaki: 4041641215,\n  lavender: 3873897215,\n  lavenderblush: 4293981695,\n  lawngreen: 2096890111,\n  lemonchiffon: 4294626815,\n  lightblue: 2916673279,\n  lightcoral: 4034953471,\n  lightcyan: 3774873599,\n  lightgoldenrodyellow: 4210742015,\n  lightgray: 3553874943,\n  lightgreen: 2431553791,\n  lightgrey: 3553874943,\n  lightpink: 4290167295,\n  lightsalmon: 4288707327,\n  lightseagreen: 548580095,\n  lightskyblue: 2278488831,\n  lightslategray: 2005441023,\n  lightslategrey: 2005441023,\n  lightsteelblue: 2965692159,\n  lightyellow: 4294959359,\n  lime: 16711935,\n  limegreen: 852308735,\n  linen: 4210091775,\n  magenta: 4278255615,\n  maroon: 2147483903,\n  mediumaquamarine: 1724754687,\n  mediumblue: 52735,\n  mediumorchid: 3126187007,\n  mediumpurple: 2473647103,\n  mediumseagreen: 1018393087,\n  mediumslateblue: 2070474495,\n  mediumspringgreen: 16423679,\n  mediumturquoise: 1221709055,\n  mediumvioletred: 3340076543,\n  midnightblue: 421097727,\n  mintcream: 4127193855,\n  mistyrose: 4293190143,\n  moccasin: 4293178879,\n  navajowhite: 4292783615,\n  navy: 33023,\n  oldlace: 4260751103,\n  olive: 2155872511,\n  olivedrab: 1804477439,\n  orange: 4289003775,\n  orangered: 4282712319,\n  orchid: 3664828159,\n  palegoldenrod: 4008225535,\n  palegreen: 2566625535,\n  paleturquoise: 2951671551,\n  palevioletred: 3681588223,\n  papayawhip: 4293907967,\n  peachpuff: 4292524543,\n  peru: 3448061951,\n  pink: 4290825215,\n  plum: 3718307327,\n  powderblue: 2967529215,\n  purple: 2147516671,\n  rebeccapurple: 1714657791,\n  red: 4278190335,\n  rosybrown: 3163525119,\n  royalblue: 1097458175,\n  saddlebrown: 2336560127,\n  salmon: 4202722047,\n  sandybrown: 4104413439,\n  seagreen: 780883967,\n  seashell: 4294307583,\n  sienna: 2689740287,\n  silver: 3233857791,\n  skyblue: 2278484991,\n  slateblue: 1784335871,\n  slategray: 1887473919,\n  slategrey: 1887473919,\n  snow: 4294638335,\n  springgreen: 16744447,\n  steelblue: 1182971135,\n  tan: 3535047935,\n  teal: 8421631,\n  thistle: 3636451583,\n  tomato: 4284696575,\n  turquoise: 1088475391,\n  violet: 4001558271,\n  wheat: 4125012991,\n  white: 4294967295,\n  whitesmoke: 4126537215,\n  yellow: 4294902015,\n  yellowgreen: 2597139199\n};\n\n// src/colorMatchers.ts\nvar NUMBER = \"[-+]?\\\\d*\\\\.?\\\\d+\";\nvar PERCENTAGE = NUMBER + \"%\";\nfunction call(...parts) {\n  return \"\\\\(\\\\s*(\" + parts.join(\")\\\\s*,\\\\s*(\") + \")\\\\s*\\\\)\";\n}\nvar rgb = new RegExp(\"rgb\" + call(NUMBER, NUMBER, NUMBER));\nvar rgba = new RegExp(\"rgba\" + call(NUMBER, NUMBER, NUMBER, NUMBER));\nvar hsl = new RegExp(\"hsl\" + call(NUMBER, PERCENTAGE, PERCENTAGE));\nvar hsla = new RegExp(\n  \"hsla\" + call(NUMBER, PERCENTAGE, PERCENTAGE, NUMBER)\n);\nvar hex3 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nvar hex4 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nvar hex6 = /^#([0-9a-fA-F]{6})$/;\nvar hex8 = /^#([0-9a-fA-F]{8})$/;\n\n// src/normalizeColor.ts\nfunction normalizeColor(color) {\n  let match;\n  if (typeof color === \"number\") {\n    return color >>> 0 === color && color >= 0 && color <= 4294967295 ? color : null;\n  }\n  if (match = hex6.exec(color))\n    return parseInt(match[1] + \"ff\", 16) >>> 0;\n  if (colors && colors[color] !== void 0) {\n    return colors[color];\n  }\n  if (match = rgb.exec(color)) {\n    return (parse255(match[1]) << 24 | // r\n    parse255(match[2]) << 16 | // g\n    parse255(match[3]) << 8 | // b\n    255) >>> // a\n    0;\n  }\n  if (match = rgba.exec(color)) {\n    return (parse255(match[1]) << 24 | // r\n    parse255(match[2]) << 16 | // g\n    parse255(match[3]) << 8 | // b\n    parse1(match[4])) >>> // a\n    0;\n  }\n  if (match = hex3.exec(color)) {\n    return parseInt(\n      match[1] + match[1] + // r\n      match[2] + match[2] + // g\n      match[3] + match[3] + // b\n      \"ff\",\n      // a\n      16\n    ) >>> 0;\n  }\n  if (match = hex8.exec(color))\n    return parseInt(match[1], 16) >>> 0;\n  if (match = hex4.exec(color)) {\n    return parseInt(\n      match[1] + match[1] + // r\n      match[2] + match[2] + // g\n      match[3] + match[3] + // b\n      match[4] + match[4],\n      // a\n      16\n    ) >>> 0;\n  }\n  if (match = hsl.exec(color)) {\n    return (hslToRgb(\n      parse360(match[1]),\n      // h\n      parsePercentage(match[2]),\n      // s\n      parsePercentage(match[3])\n      // l\n    ) | 255) >>> // a\n    0;\n  }\n  if (match = hsla.exec(color)) {\n    return (hslToRgb(\n      parse360(match[1]),\n      // h\n      parsePercentage(match[2]),\n      // s\n      parsePercentage(match[3])\n      // l\n    ) | parse1(match[4])) >>> // a\n    0;\n  }\n  return null;\n}\nfunction hue2rgb(p, q, t) {\n  if (t < 0)\n    t += 1;\n  if (t > 1)\n    t -= 1;\n  if (t < 1 / 6)\n    return p + (q - p) * 6 * t;\n  if (t < 1 / 2)\n    return q;\n  if (t < 2 / 3)\n    return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\nfunction hslToRgb(h, s, l) {\n  const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n  const p = 2 * l - q;\n  const r = hue2rgb(p, q, h + 1 / 3);\n  const g = hue2rgb(p, q, h);\n  const b = hue2rgb(p, q, h - 1 / 3);\n  return Math.round(r * 255) << 24 | Math.round(g * 255) << 16 | Math.round(b * 255) << 8;\n}\nfunction parse255(str) {\n  const int = parseInt(str, 10);\n  if (int < 0)\n    return 0;\n  if (int > 255)\n    return 255;\n  return int;\n}\nfunction parse360(str) {\n  const int = parseFloat(str);\n  return (int % 360 + 360) % 360 / 360;\n}\nfunction parse1(str) {\n  const num = parseFloat(str);\n  if (num < 0)\n    return 0;\n  if (num > 1)\n    return 255;\n  return Math.round(num * 255);\n}\nfunction parsePercentage(str) {\n  const int = parseFloat(str);\n  if (int < 0)\n    return 0;\n  if (int > 100)\n    return 1;\n  return int / 100;\n}\n\n// src/colorToRgba.ts\nfunction colorToRgba(input) {\n  let int32Color = normalizeColor(input);\n  if (int32Color === null)\n    return input;\n  int32Color = int32Color || 0;\n  const r = (int32Color & 4278190080) >>> 24;\n  const g = (int32Color & 16711680) >>> 16;\n  const b = (int32Color & 65280) >>> 8;\n  const a = (int32Color & 255) / 255;\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n}\n\n// src/createInterpolator.ts\nvar createInterpolator = (range, output, extrapolate) => {\n  if (is.fun(range)) {\n    return range;\n  }\n  if (is.arr(range)) {\n    return createInterpolator({\n      range,\n      output,\n      extrapolate\n    });\n  }\n  if (is.str(range.output[0])) {\n    return createStringInterpolator(range);\n  }\n  const config = range;\n  const outputRange = config.output;\n  const inputRange = config.range || [0, 1];\n  const extrapolateLeft = config.extrapolateLeft || config.extrapolate || \"extend\";\n  const extrapolateRight = config.extrapolateRight || config.extrapolate || \"extend\";\n  const easing = config.easing || ((t) => t);\n  return (input) => {\n    const range2 = findRange(input, inputRange);\n    return interpolate(\n      input,\n      inputRange[range2],\n      inputRange[range2 + 1],\n      outputRange[range2],\n      outputRange[range2 + 1],\n      easing,\n      extrapolateLeft,\n      extrapolateRight,\n      config.map\n    );\n  };\n};\nfunction interpolate(input, inputMin, inputMax, outputMin, outputMax, easing, extrapolateLeft, extrapolateRight, map) {\n  let result = map ? map(input) : input;\n  if (result < inputMin) {\n    if (extrapolateLeft === \"identity\")\n      return result;\n    else if (extrapolateLeft === \"clamp\")\n      result = inputMin;\n  }\n  if (result > inputMax) {\n    if (extrapolateRight === \"identity\")\n      return result;\n    else if (extrapolateRight === \"clamp\")\n      result = inputMax;\n  }\n  if (outputMin === outputMax)\n    return outputMin;\n  if (inputMin === inputMax)\n    return input <= inputMin ? outputMin : outputMax;\n  if (inputMin === -Infinity)\n    result = -result;\n  else if (inputMax === Infinity)\n    result = result - inputMin;\n  else\n    result = (result - inputMin) / (inputMax - inputMin);\n  result = easing(result);\n  if (outputMin === -Infinity)\n    result = -result;\n  else if (outputMax === Infinity)\n    result = result + outputMin;\n  else\n    result = result * (outputMax - outputMin) + outputMin;\n  return result;\n}\nfunction findRange(input, inputRange) {\n  for (var i = 1; i < inputRange.length - 1; ++i)\n    if (inputRange[i] >= input)\n      break;\n  return i - 1;\n}\n\n// src/easings.ts\nvar steps = (steps2, direction = \"end\") => (progress2) => {\n  progress2 = direction === \"end\" ? Math.min(progress2, 0.999) : Math.max(progress2, 1e-3);\n  const expanded = progress2 * steps2;\n  const rounded = direction === \"end\" ? Math.floor(expanded) : Math.ceil(expanded);\n  return clamp(0, 1, rounded / steps2);\n};\nvar c1 = 1.70158;\nvar c2 = c1 * 1.525;\nvar c3 = c1 + 1;\nvar c4 = 2 * Math.PI / 3;\nvar c5 = 2 * Math.PI / 4.5;\nvar bounceOut = (x) => {\n  const n1 = 7.5625;\n  const d1 = 2.75;\n  if (x < 1 / d1) {\n    return n1 * x * x;\n  } else if (x < 2 / d1) {\n    return n1 * (x -= 1.5 / d1) * x + 0.75;\n  } else if (x < 2.5 / d1) {\n    return n1 * (x -= 2.25 / d1) * x + 0.9375;\n  } else {\n    return n1 * (x -= 2.625 / d1) * x + 0.984375;\n  }\n};\nvar easings = {\n  linear: (x) => x,\n  easeInQuad: (x) => x * x,\n  easeOutQuad: (x) => 1 - (1 - x) * (1 - x),\n  easeInOutQuad: (x) => x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2,\n  easeInCubic: (x) => x * x * x,\n  easeOutCubic: (x) => 1 - Math.pow(1 - x, 3),\n  easeInOutCubic: (x) => x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2,\n  easeInQuart: (x) => x * x * x * x,\n  easeOutQuart: (x) => 1 - Math.pow(1 - x, 4),\n  easeInOutQuart: (x) => x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2,\n  easeInQuint: (x) => x * x * x * x * x,\n  easeOutQuint: (x) => 1 - Math.pow(1 - x, 5),\n  easeInOutQuint: (x) => x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2,\n  easeInSine: (x) => 1 - Math.cos(x * Math.PI / 2),\n  easeOutSine: (x) => Math.sin(x * Math.PI / 2),\n  easeInOutSine: (x) => -(Math.cos(Math.PI * x) - 1) / 2,\n  easeInExpo: (x) => x === 0 ? 0 : Math.pow(2, 10 * x - 10),\n  easeOutExpo: (x) => x === 1 ? 1 : 1 - Math.pow(2, -10 * x),\n  easeInOutExpo: (x) => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? Math.pow(2, 20 * x - 10) / 2 : (2 - Math.pow(2, -20 * x + 10)) / 2,\n  easeInCirc: (x) => 1 - Math.sqrt(1 - Math.pow(x, 2)),\n  easeOutCirc: (x) => Math.sqrt(1 - Math.pow(x - 1, 2)),\n  easeInOutCirc: (x) => x < 0.5 ? (1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2 : (Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2,\n  easeInBack: (x) => c3 * x * x * x - c1 * x * x,\n  easeOutBack: (x) => 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2),\n  easeInOutBack: (x) => x < 0.5 ? Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2) / 2 : (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2,\n  easeInElastic: (x) => x === 0 ? 0 : x === 1 ? 1 : -Math.pow(2, 10 * x - 10) * Math.sin((x * 10 - 10.75) * c4),\n  easeOutElastic: (x) => x === 0 ? 0 : x === 1 ? 1 : Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1,\n  easeInOutElastic: (x) => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? -(Math.pow(2, 20 * x - 10) * Math.sin((20 * x - 11.125) * c5)) / 2 : Math.pow(2, -20 * x + 10) * Math.sin((20 * x - 11.125) * c5) / 2 + 1,\n  easeInBounce: (x) => 1 - bounceOut(1 - x),\n  easeOutBounce: bounceOut,\n  easeInOutBounce: (x) => x < 0.5 ? (1 - bounceOut(1 - 2 * x)) / 2 : (1 + bounceOut(2 * x - 1)) / 2,\n  steps\n};\n\n// src/fluids.ts\nvar $get = Symbol.for(\"FluidValue.get\");\nvar $observers = Symbol.for(\"FluidValue.observers\");\nvar hasFluidValue = (arg) => Boolean(arg && arg[$get]);\nvar getFluidValue = (arg) => arg && arg[$get] ? arg[$get]() : arg;\nvar getFluidObservers = (target) => target[$observers] || null;\nfunction callFluidObserver(observer2, event) {\n  if (observer2.eventObserved) {\n    observer2.eventObserved(event);\n  } else {\n    observer2(event);\n  }\n}\nfunction callFluidObservers(target, event) {\n  const observers = target[$observers];\n  if (observers) {\n    observers.forEach((observer2) => {\n      callFluidObserver(observer2, event);\n    });\n  }\n}\nvar FluidValue = class {\n  constructor(get) {\n    if (!get && !(get = this.get)) {\n      throw Error(\"Unknown getter\");\n    }\n    setFluidGetter(this, get);\n  }\n};\n$get, $observers;\nvar setFluidGetter = (target, get) => setHidden(target, $get, get);\nfunction addFluidObserver(target, observer2) {\n  if (target[$get]) {\n    let observers = target[$observers];\n    if (!observers) {\n      setHidden(target, $observers, observers = /* @__PURE__ */ new Set());\n    }\n    if (!observers.has(observer2)) {\n      observers.add(observer2);\n      if (target.observerAdded) {\n        target.observerAdded(observers.size, observer2);\n      }\n    }\n  }\n  return observer2;\n}\nfunction removeFluidObserver(target, observer2) {\n  const observers = target[$observers];\n  if (observers && observers.has(observer2)) {\n    const count = observers.size - 1;\n    if (count) {\n      observers.delete(observer2);\n    } else {\n      target[$observers] = null;\n    }\n    if (target.observerRemoved) {\n      target.observerRemoved(count, observer2);\n    }\n  }\n}\nvar setHidden = (target, key, value) => Object.defineProperty(target, key, {\n  value,\n  writable: true,\n  configurable: true\n});\n\n// src/regexs.ts\nvar numberRegex = /[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar colorRegex = /(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\nvar unitRegex = new RegExp(`(${numberRegex.source})(%|[a-z]+)`, \"i\");\nvar rgbaRegex = /rgba\\(([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+)\\)/gi;\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\n// src/variableToRgba.ts\nvar variableToRgba = (input) => {\n  const [token, fallback] = parseCSSVariable(input);\n  if (!token || isSSR()) {\n    return input;\n  }\n  const value = window.getComputedStyle(document.documentElement).getPropertyValue(token);\n  if (value) {\n    return value.trim();\n  } else if (fallback && fallback.startsWith(\"--\")) {\n    const value2 = window.getComputedStyle(document.documentElement).getPropertyValue(fallback);\n    if (value2) {\n      return value2;\n    } else {\n      return input;\n    }\n  } else if (fallback && cssVariableRegex.test(fallback)) {\n    return variableToRgba(fallback);\n  } else if (fallback) {\n    return fallback;\n  }\n  return input;\n};\nvar parseCSSVariable = (current) => {\n  const match = cssVariableRegex.exec(current);\n  if (!match)\n    return [,];\n  const [, token, fallback] = match;\n  return [token, fallback];\n};\n\n// src/stringInterpolation.ts\nvar namedColorRegex;\nvar rgbaRound = (_, p1, p2, p3, p4) => `rgba(${Math.round(p1)}, ${Math.round(p2)}, ${Math.round(p3)}, ${p4})`;\nvar createStringInterpolator2 = (config) => {\n  if (!namedColorRegex)\n    namedColorRegex = colors ? (\n      // match color names, ignore partial matches\n      new RegExp(`(${Object.keys(colors).join(\"|\")})(?!\\\\w)`, \"g\")\n    ) : (\n      // never match\n      /^\\b$/\n    );\n  const output = config.output.map((value) => {\n    return getFluidValue(value).replace(cssVariableRegex, variableToRgba).replace(colorRegex, colorToRgba).replace(namedColorRegex, colorToRgba);\n  });\n  const keyframes = output.map((value) => value.match(numberRegex).map(Number));\n  const outputRanges = keyframes[0].map(\n    (_, i) => keyframes.map((values) => {\n      if (!(i in values)) {\n        throw Error('The arity of each \"output\" value must be equal');\n      }\n      return values[i];\n    })\n  );\n  const interpolators = outputRanges.map(\n    (output2) => createInterpolator({ ...config, output: output2 })\n  );\n  return (input) => {\n    const missingUnit = !unitRegex.test(output[0]) && output.find((value) => unitRegex.test(value))?.replace(numberRegex, \"\");\n    let i = 0;\n    return output[0].replace(\n      numberRegex,\n      () => `${interpolators[i++](input)}${missingUnit || \"\"}`\n    ).replace(rgbaRegex, rgbaRound);\n  };\n};\n\n// src/deprecations.ts\nvar prefix = \"react-spring: \";\nvar once = (fn) => {\n  const func = fn;\n  let called = false;\n  if (typeof func != \"function\") {\n    throw new TypeError(`${prefix}once requires a function parameter`);\n  }\n  return (...args) => {\n    if (!called) {\n      func(...args);\n      called = true;\n    }\n  };\n};\nvar warnInterpolate = once(console.warn);\nfunction deprecateInterpolate() {\n  warnInterpolate(\n    `${prefix}The \"interpolate\" function is deprecated in v9 (use \"to\" instead)`\n  );\n}\nvar warnDirectCall = once(console.warn);\nfunction deprecateDirectCall() {\n  warnDirectCall(\n    `${prefix}Directly calling start instead of using the api object is deprecated in v9 (use \".start\" instead), this will be removed in later 0.X.0 versions`\n  );\n}\n\n// src/isAnimatedString.ts\nfunction isAnimatedString(value) {\n  return is.str(value) && (value[0] == \"#\" || /\\d/.test(value) || // Do not identify a CSS variable as an AnimatedString if its SSR\n  !isSSR() && cssVariableRegex.test(value) || value in (colors || {}));\n}\n\n// src/dom-events/scroll/index.ts\nimport { raf as raf3 } from \"@react-spring/rafz\";\n\n// src/dom-events/resize/resizeElement.ts\nvar observer;\nvar resizeHandlers = /* @__PURE__ */ new WeakMap();\nvar handleObservation = (entries) => entries.forEach(({ target, contentRect }) => {\n  return resizeHandlers.get(target)?.forEach((handler) => handler(contentRect));\n});\nfunction resizeElement(handler, target) {\n  if (!observer) {\n    if (typeof ResizeObserver !== \"undefined\") {\n      observer = new ResizeObserver(handleObservation);\n    }\n  }\n  let elementHandlers = resizeHandlers.get(target);\n  if (!elementHandlers) {\n    elementHandlers = /* @__PURE__ */ new Set();\n    resizeHandlers.set(target, elementHandlers);\n  }\n  elementHandlers.add(handler);\n  if (observer) {\n    observer.observe(target);\n  }\n  return () => {\n    const elementHandlers2 = resizeHandlers.get(target);\n    if (!elementHandlers2)\n      return;\n    elementHandlers2.delete(handler);\n    if (!elementHandlers2.size && observer) {\n      observer.unobserve(target);\n    }\n  };\n}\n\n// src/dom-events/resize/resizeWindow.ts\nvar listeners = /* @__PURE__ */ new Set();\nvar cleanupWindowResizeHandler;\nvar createResizeHandler = () => {\n  const handleResize = () => {\n    listeners.forEach(\n      (callback) => callback({\n        width: window.innerWidth,\n        height: window.innerHeight\n      })\n    );\n  };\n  window.addEventListener(\"resize\", handleResize);\n  return () => {\n    window.removeEventListener(\"resize\", handleResize);\n  };\n};\nvar resizeWindow = (callback) => {\n  listeners.add(callback);\n  if (!cleanupWindowResizeHandler) {\n    cleanupWindowResizeHandler = createResizeHandler();\n  }\n  return () => {\n    listeners.delete(callback);\n    if (!listeners.size && cleanupWindowResizeHandler) {\n      cleanupWindowResizeHandler();\n      cleanupWindowResizeHandler = void 0;\n    }\n  };\n};\n\n// src/dom-events/resize/index.ts\nvar onResize = (callback, { container = document.documentElement } = {}) => {\n  if (container === document.documentElement) {\n    return resizeWindow(callback);\n  } else {\n    return resizeElement(callback, container);\n  }\n};\n\n// src/progress.ts\nvar progress = (min, max, value) => max - min === 0 ? 1 : (value - min) / (max - min);\n\n// src/dom-events/scroll/ScrollHandler.ts\nvar SCROLL_KEYS = {\n  x: {\n    length: \"Width\",\n    position: \"Left\"\n  },\n  y: {\n    length: \"Height\",\n    position: \"Top\"\n  }\n};\nvar ScrollHandler = class {\n  constructor(callback, container) {\n    this.createAxis = () => ({\n      current: 0,\n      progress: 0,\n      scrollLength: 0\n    });\n    this.updateAxis = (axisName) => {\n      const axis = this.info[axisName];\n      const { length, position } = SCROLL_KEYS[axisName];\n      axis.current = this.container[`scroll${position}`];\n      axis.scrollLength = this.container[`scroll${length}`] - this.container[`client${length}`];\n      axis.progress = progress(0, axis.scrollLength, axis.current);\n    };\n    this.update = () => {\n      this.updateAxis(\"x\");\n      this.updateAxis(\"y\");\n    };\n    this.sendEvent = () => {\n      this.callback(this.info);\n    };\n    this.advance = () => {\n      this.update();\n      this.sendEvent();\n    };\n    this.callback = callback;\n    this.container = container;\n    this.info = {\n      time: 0,\n      x: this.createAxis(),\n      y: this.createAxis()\n    };\n  }\n};\n\n// src/dom-events/scroll/index.ts\nvar scrollListeners = /* @__PURE__ */ new WeakMap();\nvar resizeListeners = /* @__PURE__ */ new WeakMap();\nvar onScrollHandlers = /* @__PURE__ */ new WeakMap();\nvar getTarget = (container) => container === document.documentElement ? window : container;\nvar onScroll = (callback, { container = document.documentElement } = {}) => {\n  let containerHandlers = onScrollHandlers.get(container);\n  if (!containerHandlers) {\n    containerHandlers = /* @__PURE__ */ new Set();\n    onScrollHandlers.set(container, containerHandlers);\n  }\n  const containerHandler = new ScrollHandler(callback, container);\n  containerHandlers.add(containerHandler);\n  if (!scrollListeners.has(container)) {\n    const listener = () => {\n      containerHandlers?.forEach((handler) => handler.advance());\n      return true;\n    };\n    scrollListeners.set(container, listener);\n    const target = getTarget(container);\n    window.addEventListener(\"resize\", listener, { passive: true });\n    if (container !== document.documentElement) {\n      resizeListeners.set(container, onResize(listener, { container }));\n    }\n    target.addEventListener(\"scroll\", listener, { passive: true });\n  }\n  const animateScroll = scrollListeners.get(container);\n  raf3(animateScroll);\n  return () => {\n    raf3.cancel(animateScroll);\n    const containerHandlers2 = onScrollHandlers.get(container);\n    if (!containerHandlers2)\n      return;\n    containerHandlers2.delete(containerHandler);\n    if (containerHandlers2.size)\n      return;\n    const listener = scrollListeners.get(container);\n    scrollListeners.delete(container);\n    if (listener) {\n      getTarget(container).removeEventListener(\"scroll\", listener);\n      window.removeEventListener(\"resize\", listener);\n      resizeListeners.get(container)?.();\n    }\n  };\n};\n\n// src/hooks/useConstant.ts\nimport { useRef } from \"react\";\nfunction useConstant(init) {\n  const ref = useRef(null);\n  if (ref.current === null) {\n    ref.current = init();\n  }\n  return ref.current;\n}\n\n// src/hooks/useForceUpdate.ts\nimport { useState } from \"react\";\n\n// src/hooks/useIsMounted.ts\nimport { useRef as useRef2 } from \"react\";\n\n// src/hooks/useIsomorphicLayoutEffect.ts\nimport { useEffect, useLayoutEffect } from \"react\";\nvar useIsomorphicLayoutEffect = isSSR() ? useEffect : useLayoutEffect;\n\n// src/hooks/useIsMounted.ts\nvar useIsMounted = () => {\n  const isMounted = useRef2(false);\n  useIsomorphicLayoutEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n\n// src/hooks/useForceUpdate.ts\nfunction useForceUpdate() {\n  const update = useState()[1];\n  const isMounted = useIsMounted();\n  return () => {\n    if (isMounted.current) {\n      update(Math.random());\n    }\n  };\n}\n\n// src/hooks/useMemoOne.ts\nimport { useEffect as useEffect2, useRef as useRef3, useState as useState2 } from \"react\";\nfunction useMemoOne(getResult, inputs) {\n  const [initial] = useState2(\n    () => ({\n      inputs,\n      result: getResult()\n    })\n  );\n  const committed = useRef3();\n  const prevCache = committed.current;\n  let cache = prevCache;\n  if (cache) {\n    const useCache = Boolean(\n      inputs && cache.inputs && areInputsEqual(inputs, cache.inputs)\n    );\n    if (!useCache) {\n      cache = {\n        inputs,\n        result: getResult()\n      };\n    }\n  } else {\n    cache = initial;\n  }\n  useEffect2(() => {\n    committed.current = cache;\n    if (prevCache == initial) {\n      initial.inputs = initial.result = void 0;\n    }\n  }, [cache]);\n  return cache.result;\n}\nfunction areInputsEqual(next, prev) {\n  if (next.length !== prev.length) {\n    return false;\n  }\n  for (let i = 0; i < next.length; i++) {\n    if (next[i] !== prev[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// src/hooks/useOnce.ts\nimport { useEffect as useEffect3 } from \"react\";\nvar useOnce = (effect) => useEffect3(effect, emptyDeps);\nvar emptyDeps = [];\n\n// src/hooks/usePrev.ts\nimport { useEffect as useEffect4, useRef as useRef4 } from \"react\";\nfunction usePrev(value) {\n  const prevRef = useRef4();\n  useEffect4(() => {\n    prevRef.current = value;\n  });\n  return prevRef.current;\n}\n\n// src/hooks/useReducedMotion.ts\nimport { useState as useState3 } from \"react\";\nvar useReducedMotion = () => {\n  const [reducedMotion, setReducedMotion] = useState3(null);\n  useIsomorphicLayoutEffect(() => {\n    const mql = window.matchMedia(\"(prefers-reduced-motion)\");\n    const handleMediaChange = (e) => {\n      setReducedMotion(e.matches);\n      assign({\n        skipAnimation: e.matches\n      });\n    };\n    handleMediaChange(mql);\n    if (mql.addEventListener) {\n      mql.addEventListener(\"change\", handleMediaChange);\n    } else {\n      mql.addListener(handleMediaChange);\n    }\n    return () => {\n      if (mql.removeEventListener) {\n        mql.removeEventListener(\"change\", handleMediaChange);\n      } else {\n        mql.removeListener(handleMediaChange);\n      }\n    };\n  }, []);\n  return reducedMotion;\n};\n\n// src/index.ts\nimport { raf as raf4 } from \"@react-spring/rafz\";\nexport {\n  FluidValue,\n  globals_exports as Globals,\n  addFluidObserver,\n  callFluidObserver,\n  callFluidObservers,\n  clamp,\n  colorToRgba,\n  colors2 as colors,\n  createInterpolator,\n  createStringInterpolator2 as createStringInterpolator,\n  defineHidden,\n  deprecateDirectCall,\n  deprecateInterpolate,\n  each,\n  eachProp,\n  easings,\n  flush,\n  flushCalls,\n  frameLoop,\n  getFluidObservers,\n  getFluidValue,\n  hasFluidValue,\n  hex3,\n  hex4,\n  hex6,\n  hex8,\n  hsl,\n  hsla,\n  is,\n  isAnimatedString,\n  isEqual,\n  isSSR,\n  noop,\n  onResize,\n  onScroll,\n  once,\n  prefix,\n  raf4 as raf,\n  removeFluidObserver,\n  rgb,\n  rgba,\n  setFluidGetter,\n  toArray,\n  useConstant,\n  useForceUpdate,\n  useIsomorphicLayoutEffect,\n  useMemoOne,\n  useOnce,\n  usePrev,\n  useReducedMotion\n};\n//# sourceMappingURL=react-spring_shared.modern.mjs.map","// src/Animated.ts\nimport { defineHidden } from \"@react-spring/shared\";\nvar $node = Symbol.for(\"Animated:node\");\nvar isAnimated = (value) => !!value && value[$node] === value;\nvar getAnimated = (owner) => owner && owner[$node];\nvar setAnimated = (owner, node) => defineHidden(owner, $node, node);\nvar getPayload = (owner) => owner && owner[$node] && owner[$node].getPayload();\nvar Animated = class {\n  constructor() {\n    setAnimated(this, this);\n  }\n  /** Get every `AnimatedValue` used by this node. */\n  getPayload() {\n    return this.payload || [];\n  }\n};\n\n// src/AnimatedValue.ts\nimport { is } from \"@react-spring/shared\";\nvar AnimatedValue = class extends Animated {\n  constructor(_value) {\n    super();\n    this._value = _value;\n    this.done = true;\n    this.durationProgress = 0;\n    if (is.num(this._value)) {\n      this.lastPosition = this._value;\n    }\n  }\n  /** @internal */\n  static create(value) {\n    return new AnimatedValue(value);\n  }\n  getPayload() {\n    return [this];\n  }\n  getValue() {\n    return this._value;\n  }\n  setValue(value, step) {\n    if (is.num(value)) {\n      this.lastPosition = value;\n      if (step) {\n        value = Math.round(value / step) * step;\n        if (this.done) {\n          this.lastPosition = value;\n        }\n      }\n    }\n    if (this._value === value) {\n      return false;\n    }\n    this._value = value;\n    return true;\n  }\n  reset() {\n    const { done } = this;\n    this.done = false;\n    if (is.num(this._value)) {\n      this.elapsedTime = 0;\n      this.durationProgress = 0;\n      this.lastPosition = this._value;\n      if (done)\n        this.lastVelocity = null;\n      this.v0 = null;\n    }\n  }\n};\n\n// src/AnimatedString.ts\nimport { is as is2, createInterpolator } from \"@react-spring/shared\";\nvar AnimatedString = class extends AnimatedValue {\n  constructor(value) {\n    super(0);\n    this._string = null;\n    this._toString = createInterpolator({\n      output: [value, value]\n    });\n  }\n  /** @internal */\n  static create(value) {\n    return new AnimatedString(value);\n  }\n  getValue() {\n    const value = this._string;\n    return value == null ? this._string = this._toString(this._value) : value;\n  }\n  setValue(value) {\n    if (is2.str(value)) {\n      if (value == this._string) {\n        return false;\n      }\n      this._string = value;\n      this._value = 1;\n    } else if (super.setValue(value)) {\n      this._string = null;\n    } else {\n      return false;\n    }\n    return true;\n  }\n  reset(goal) {\n    if (goal) {\n      this._toString = createInterpolator({\n        output: [this.getValue(), goal]\n      });\n    }\n    this._value = 0;\n    super.reset();\n  }\n};\n\n// src/AnimatedArray.ts\nimport { isAnimatedString } from \"@react-spring/shared\";\n\n// src/AnimatedObject.ts\nimport {\n  each,\n  eachProp,\n  getFluidValue,\n  hasFluidValue\n} from \"@react-spring/shared\";\n\n// src/context.ts\nvar TreeContext = { dependencies: null };\n\n// src/AnimatedObject.ts\nvar AnimatedObject = class extends Animated {\n  constructor(source) {\n    super();\n    this.source = source;\n    this.setValue(source);\n  }\n  getValue(animated) {\n    const values = {};\n    eachProp(this.source, (source, key) => {\n      if (isAnimated(source)) {\n        values[key] = source.getValue(animated);\n      } else if (hasFluidValue(source)) {\n        values[key] = getFluidValue(source);\n      } else if (!animated) {\n        values[key] = source;\n      }\n    });\n    return values;\n  }\n  /** Replace the raw object data */\n  setValue(source) {\n    this.source = source;\n    this.payload = this._makePayload(source);\n  }\n  reset() {\n    if (this.payload) {\n      each(this.payload, (node) => node.reset());\n    }\n  }\n  /** Create a payload set. */\n  _makePayload(source) {\n    if (source) {\n      const payload = /* @__PURE__ */ new Set();\n      eachProp(source, this._addToPayload, payload);\n      return Array.from(payload);\n    }\n  }\n  /** Add to a payload set. */\n  _addToPayload(source) {\n    if (TreeContext.dependencies && hasFluidValue(source)) {\n      TreeContext.dependencies.add(source);\n    }\n    const payload = getPayload(source);\n    if (payload) {\n      each(payload, (node) => this.add(node));\n    }\n  }\n};\n\n// src/AnimatedArray.ts\nvar AnimatedArray = class extends AnimatedObject {\n  constructor(source) {\n    super(source);\n  }\n  /** @internal */\n  static create(source) {\n    return new AnimatedArray(source);\n  }\n  getValue() {\n    return this.source.map((node) => node.getValue());\n  }\n  setValue(source) {\n    const payload = this.getPayload();\n    if (source.length == payload.length) {\n      return payload.map((node, i) => node.setValue(source[i])).some(Boolean);\n    }\n    super.setValue(source.map(makeAnimated));\n    return true;\n  }\n};\nfunction makeAnimated(value) {\n  const nodeType = isAnimatedString(value) ? AnimatedString : AnimatedValue;\n  return nodeType.create(value);\n}\n\n// src/getAnimatedType.ts\nimport { is as is3, isAnimatedString as isAnimatedString2 } from \"@react-spring/shared\";\nfunction getAnimatedType(value) {\n  const parentNode = getAnimated(value);\n  return parentNode ? parentNode.constructor : is3.arr(value) ? AnimatedArray : isAnimatedString2(value) ? AnimatedString : AnimatedValue;\n}\n\n// src/createHost.ts\nimport { is as is5, eachProp as eachProp2 } from \"@react-spring/shared\";\n\n// src/withAnimated.tsx\nimport * as React from \"react\";\nimport { forwardRef, useRef, useCallback, useEffect } from \"react\";\nimport {\n  is as is4,\n  each as each2,\n  raf,\n  useForceUpdate,\n  useOnce,\n  addFluidObserver,\n  removeFluidObserver,\n  useIsomorphicLayoutEffect\n} from \"@react-spring/shared\";\nvar withAnimated = (Component, host) => {\n  const hasInstance = (\n    // Function components must use \"forwardRef\" to avoid being\n    // re-rendered on every animation frame.\n    !is4.fun(Component) || Component.prototype && Component.prototype.isReactComponent\n  );\n  return forwardRef((givenProps, givenRef) => {\n    const instanceRef = useRef(null);\n    const ref = hasInstance && // eslint-disable-next-line react-hooks/rules-of-hooks\n    useCallback(\n      (value) => {\n        instanceRef.current = updateRef(givenRef, value);\n      },\n      [givenRef]\n    );\n    const [props, deps] = getAnimatedState(givenProps, host);\n    const forceUpdate = useForceUpdate();\n    const callback = () => {\n      const instance = instanceRef.current;\n      if (hasInstance && !instance) {\n        return;\n      }\n      const didUpdate = instance ? host.applyAnimatedValues(instance, props.getValue(true)) : false;\n      if (didUpdate === false) {\n        forceUpdate();\n      }\n    };\n    const observer = new PropsObserver(callback, deps);\n    const observerRef = useRef();\n    useIsomorphicLayoutEffect(() => {\n      observerRef.current = observer;\n      each2(deps, (dep) => addFluidObserver(dep, observer));\n      return () => {\n        if (observerRef.current) {\n          each2(\n            observerRef.current.deps,\n            (dep) => removeFluidObserver(dep, observerRef.current)\n          );\n          raf.cancel(observerRef.current.update);\n        }\n      };\n    });\n    useEffect(callback, []);\n    useOnce(() => () => {\n      const observer2 = observerRef.current;\n      each2(observer2.deps, (dep) => removeFluidObserver(dep, observer2));\n    });\n    const usedProps = host.getComponentProps(props.getValue());\n    return /* @__PURE__ */ React.createElement(Component, { ...usedProps, ref });\n  });\n};\nvar PropsObserver = class {\n  constructor(update, deps) {\n    this.update = update;\n    this.deps = deps;\n  }\n  eventObserved(event) {\n    if (event.type == \"change\") {\n      raf.write(this.update);\n    }\n  }\n};\nfunction getAnimatedState(props, host) {\n  const dependencies = /* @__PURE__ */ new Set();\n  TreeContext.dependencies = dependencies;\n  if (props.style)\n    props = {\n      ...props,\n      style: host.createAnimatedStyle(props.style)\n    };\n  props = new AnimatedObject(props);\n  TreeContext.dependencies = null;\n  return [props, dependencies];\n}\nfunction updateRef(ref, value) {\n  if (ref) {\n    if (is4.fun(ref))\n      ref(value);\n    else\n      ref.current = value;\n  }\n  return value;\n}\n\n// src/createHost.ts\nvar cacheKey = Symbol.for(\"AnimatedComponent\");\nvar createHost = (components, {\n  applyAnimatedValues = () => false,\n  createAnimatedStyle = (style) => new AnimatedObject(style),\n  getComponentProps = (props) => props\n} = {}) => {\n  const hostConfig = {\n    applyAnimatedValues,\n    createAnimatedStyle,\n    getComponentProps\n  };\n  const animated = (Component) => {\n    const displayName = getDisplayName(Component) || \"Anonymous\";\n    if (is5.str(Component)) {\n      Component = animated[Component] || (animated[Component] = withAnimated(Component, hostConfig));\n    } else {\n      Component = Component[cacheKey] || (Component[cacheKey] = withAnimated(Component, hostConfig));\n    }\n    Component.displayName = `Animated(${displayName})`;\n    return Component;\n  };\n  eachProp2(components, (Component, key) => {\n    if (is5.arr(components)) {\n      key = getDisplayName(Component);\n    }\n    animated[key] = animated(Component);\n  });\n  return {\n    animated\n  };\n};\nvar getDisplayName = (arg) => is5.str(arg) ? arg : arg && is5.str(arg.displayName) ? arg.displayName : is5.fun(arg) && arg.name || null;\nexport {\n  Animated,\n  AnimatedArray,\n  AnimatedObject,\n  AnimatedString,\n  AnimatedValue,\n  createHost,\n  getAnimated,\n  getAnimatedType,\n  getPayload,\n  isAnimated,\n  setAnimated\n};\n//# sourceMappingURL=react-spring_animated.modern.mjs.map","// src/hooks/useChain.ts\nimport { each, useIsomorphicLayoutEffect } from \"@react-spring/shared\";\n\n// src/helpers.ts\nimport {\n  is,\n  toArray,\n  eachProp,\n  getFluidValue,\n  isAnimatedString,\n  Globals as G\n} from \"@react-spring/shared\";\nfunction callProp(value, ...args) {\n  return is.fun(value) ? value(...args) : value;\n}\nvar matchProp = (value, key) => value === true || !!(key && value && (is.fun(value) ? value(key) : toArray(value).includes(key)));\nvar resolveProp = (prop, key) => is.obj(prop) ? key && prop[key] : prop;\nvar getDefaultProp = (props, key) => props.default === true ? props[key] : props.default ? props.default[key] : void 0;\nvar noopTransform = (value) => value;\nvar getDefaultProps = (props, transform = noopTransform) => {\n  let keys = DEFAULT_PROPS;\n  if (props.default && props.default !== true) {\n    props = props.default;\n    keys = Object.keys(props);\n  }\n  const defaults2 = {};\n  for (const key of keys) {\n    const value = transform(props[key], key);\n    if (!is.und(value)) {\n      defaults2[key] = value;\n    }\n  }\n  return defaults2;\n};\nvar DEFAULT_PROPS = [\n  \"config\",\n  \"onProps\",\n  \"onStart\",\n  \"onChange\",\n  \"onPause\",\n  \"onResume\",\n  \"onRest\"\n];\nvar RESERVED_PROPS = {\n  config: 1,\n  from: 1,\n  to: 1,\n  ref: 1,\n  loop: 1,\n  reset: 1,\n  pause: 1,\n  cancel: 1,\n  reverse: 1,\n  immediate: 1,\n  default: 1,\n  delay: 1,\n  onProps: 1,\n  onStart: 1,\n  onChange: 1,\n  onPause: 1,\n  onResume: 1,\n  onRest: 1,\n  onResolve: 1,\n  // Transition props\n  items: 1,\n  trail: 1,\n  sort: 1,\n  expires: 1,\n  initial: 1,\n  enter: 1,\n  update: 1,\n  leave: 1,\n  children: 1,\n  onDestroyed: 1,\n  // Internal props\n  keys: 1,\n  callId: 1,\n  parentId: 1\n};\nfunction getForwardProps(props) {\n  const forward = {};\n  let count = 0;\n  eachProp(props, (value, prop) => {\n    if (!RESERVED_PROPS[prop]) {\n      forward[prop] = value;\n      count++;\n    }\n  });\n  if (count) {\n    return forward;\n  }\n}\nfunction inferTo(props) {\n  const to2 = getForwardProps(props);\n  if (to2) {\n    const out = { to: to2 };\n    eachProp(props, (val, key) => key in to2 || (out[key] = val));\n    return out;\n  }\n  return { ...props };\n}\nfunction computeGoal(value) {\n  value = getFluidValue(value);\n  return is.arr(value) ? value.map(computeGoal) : isAnimatedString(value) ? G.createStringInterpolator({\n    range: [0, 1],\n    output: [value, value]\n  })(1) : value;\n}\nfunction hasProps(props) {\n  for (const _ in props)\n    return true;\n  return false;\n}\nfunction isAsyncTo(to2) {\n  return is.fun(to2) || is.arr(to2) && is.obj(to2[0]);\n}\nfunction detachRefs(ctrl, ref) {\n  ctrl.ref?.delete(ctrl);\n  ref?.delete(ctrl);\n}\nfunction replaceRef(ctrl, ref) {\n  if (ref && ctrl.ref !== ref) {\n    ctrl.ref?.delete(ctrl);\n    ref.add(ctrl);\n    ctrl.ref = ref;\n  }\n}\n\n// src/hooks/useChain.ts\nfunction useChain(refs, timeSteps, timeFrame = 1e3) {\n  useIsomorphicLayoutEffect(() => {\n    if (timeSteps) {\n      let prevDelay = 0;\n      each(refs, (ref, i) => {\n        const controllers = ref.current;\n        if (controllers.length) {\n          let delay = timeFrame * timeSteps[i];\n          if (isNaN(delay))\n            delay = prevDelay;\n          else\n            prevDelay = delay;\n          each(controllers, (ctrl) => {\n            each(ctrl.queue, (props) => {\n              const memoizedDelayProp = props.delay;\n              props.delay = (key) => delay + callProp(memoizedDelayProp || 0, key);\n            });\n          });\n          ref.start();\n        }\n      });\n    } else {\n      let p = Promise.resolve();\n      each(refs, (ref) => {\n        const controllers = ref.current;\n        if (controllers.length) {\n          const queues = controllers.map((ctrl) => {\n            const q = ctrl.queue;\n            ctrl.queue = [];\n            return q;\n          });\n          p = p.then(() => {\n            each(\n              controllers,\n              (ctrl, i) => each(queues[i] || [], (update2) => ctrl.queue.push(update2))\n            );\n            return Promise.all(ref.start());\n          });\n        }\n      });\n    }\n  });\n}\n\n// src/hooks/useSpring.ts\nimport { is as is9 } from \"@react-spring/shared\";\n\n// src/hooks/useSprings.ts\nimport { useContext as useContext2, useMemo, useRef } from \"react\";\nimport {\n  is as is8,\n  each as each5,\n  usePrev,\n  useOnce,\n  useForceUpdate,\n  useIsomorphicLayoutEffect as useIsomorphicLayoutEffect2\n} from \"@react-spring/shared\";\n\n// src/SpringValue.ts\nimport {\n  is as is5,\n  raf as raf3,\n  each as each2,\n  isEqual,\n  toArray as toArray2,\n  eachProp as eachProp3,\n  frameLoop as frameLoop2,\n  flushCalls,\n  getFluidValue as getFluidValue2,\n  isAnimatedString as isAnimatedString2,\n  Globals as G5,\n  callFluidObservers as callFluidObservers2,\n  hasFluidValue,\n  addFluidObserver,\n  removeFluidObserver,\n  getFluidObservers\n} from \"@react-spring/shared\";\nimport {\n  AnimatedValue,\n  AnimatedString,\n  getPayload,\n  getAnimated as getAnimated2,\n  setAnimated,\n  getAnimatedType\n} from \"@react-spring/animated\";\n\n// src/AnimationConfig.ts\nimport { is as is2, easings } from \"@react-spring/shared\";\n\n// src/constants.ts\nvar config = {\n  default: { tension: 170, friction: 26 },\n  gentle: { tension: 120, friction: 14 },\n  wobbly: { tension: 180, friction: 12 },\n  stiff: { tension: 210, friction: 20 },\n  slow: { tension: 280, friction: 60 },\n  molasses: { tension: 280, friction: 120 }\n};\n\n// src/AnimationConfig.ts\nvar defaults = {\n  ...config.default,\n  mass: 1,\n  damping: 1,\n  easing: easings.linear,\n  clamp: false\n};\nvar AnimationConfig = class {\n  constructor() {\n    /**\n     * The initial velocity of one or more values.\n     *\n     * @default 0\n     */\n    this.velocity = 0;\n    Object.assign(this, defaults);\n  }\n};\nfunction mergeConfig(config2, newConfig, defaultConfig) {\n  if (defaultConfig) {\n    defaultConfig = { ...defaultConfig };\n    sanitizeConfig(defaultConfig, newConfig);\n    newConfig = { ...defaultConfig, ...newConfig };\n  }\n  sanitizeConfig(config2, newConfig);\n  Object.assign(config2, newConfig);\n  for (const key in defaults) {\n    if (config2[key] == null) {\n      config2[key] = defaults[key];\n    }\n  }\n  let { frequency, damping } = config2;\n  const { mass } = config2;\n  if (!is2.und(frequency)) {\n    if (frequency < 0.01)\n      frequency = 0.01;\n    if (damping < 0)\n      damping = 0;\n    config2.tension = Math.pow(2 * Math.PI / frequency, 2) * mass;\n    config2.friction = 4 * Math.PI * damping * mass / frequency;\n  }\n  return config2;\n}\nfunction sanitizeConfig(config2, props) {\n  if (!is2.und(props.decay)) {\n    config2.duration = void 0;\n  } else {\n    const isTensionConfig = !is2.und(props.tension) || !is2.und(props.friction);\n    if (isTensionConfig || !is2.und(props.frequency) || !is2.und(props.damping) || !is2.und(props.mass)) {\n      config2.duration = void 0;\n      config2.decay = void 0;\n    }\n    if (isTensionConfig) {\n      config2.frequency = void 0;\n    }\n  }\n}\n\n// src/Animation.ts\nvar emptyArray = [];\nvar Animation = class {\n  constructor() {\n    this.changed = false;\n    this.values = emptyArray;\n    this.toValues = null;\n    this.fromValues = emptyArray;\n    this.config = new AnimationConfig();\n    this.immediate = false;\n  }\n};\n\n// src/scheduleProps.ts\nimport { is as is3, raf, Globals as G2 } from \"@react-spring/shared\";\nfunction scheduleProps(callId, { key, props, defaultProps, state, actions }) {\n  return new Promise((resolve, reject) => {\n    let delay;\n    let timeout;\n    let cancel = matchProp(props.cancel ?? defaultProps?.cancel, key);\n    if (cancel) {\n      onStart();\n    } else {\n      if (!is3.und(props.pause)) {\n        state.paused = matchProp(props.pause, key);\n      }\n      let pause = defaultProps?.pause;\n      if (pause !== true) {\n        pause = state.paused || matchProp(pause, key);\n      }\n      delay = callProp(props.delay || 0, key);\n      if (pause) {\n        state.resumeQueue.add(onResume);\n        actions.pause();\n      } else {\n        actions.resume();\n        onResume();\n      }\n    }\n    function onPause() {\n      state.resumeQueue.add(onResume);\n      state.timeouts.delete(timeout);\n      timeout.cancel();\n      delay = timeout.time - raf.now();\n    }\n    function onResume() {\n      if (delay > 0 && !G2.skipAnimation) {\n        state.delayed = true;\n        timeout = raf.setTimeout(onStart, delay);\n        state.pauseQueue.add(onPause);\n        state.timeouts.add(timeout);\n      } else {\n        onStart();\n      }\n    }\n    function onStart() {\n      if (state.delayed) {\n        state.delayed = false;\n      }\n      state.pauseQueue.delete(onPause);\n      state.timeouts.delete(timeout);\n      if (callId <= (state.cancelId || 0)) {\n        cancel = true;\n      }\n      try {\n        actions.start({ ...props, callId, cancel }, resolve);\n      } catch (err) {\n        reject(err);\n      }\n    }\n  });\n}\n\n// src/runAsync.ts\nimport {\n  is as is4,\n  raf as raf2,\n  flush,\n  eachProp as eachProp2,\n  Globals as G3\n} from \"@react-spring/shared\";\n\n// src/AnimationResult.ts\nvar getCombinedResult = (target, results) => results.length == 1 ? results[0] : results.some((result) => result.cancelled) ? getCancelledResult(target.get()) : results.every((result) => result.noop) ? getNoopResult(target.get()) : getFinishedResult(\n  target.get(),\n  results.every((result) => result.finished)\n);\nvar getNoopResult = (value) => ({\n  value,\n  noop: true,\n  finished: true,\n  cancelled: false\n});\nvar getFinishedResult = (value, finished, cancelled = false) => ({\n  value,\n  finished,\n  cancelled\n});\nvar getCancelledResult = (value) => ({\n  value,\n  cancelled: true,\n  finished: false\n});\n\n// src/runAsync.ts\nfunction runAsync(to2, props, state, target) {\n  const { callId, parentId, onRest } = props;\n  const { asyncTo: prevTo, promise: prevPromise } = state;\n  if (!parentId && to2 === prevTo && !props.reset) {\n    return prevPromise;\n  }\n  return state.promise = (async () => {\n    state.asyncId = callId;\n    state.asyncTo = to2;\n    const defaultProps = getDefaultProps(\n      props,\n      (value, key) => (\n        // The `onRest` prop is only called when the `runAsync` promise is resolved.\n        key === \"onRest\" ? void 0 : value\n      )\n    );\n    let preventBail;\n    let bail;\n    const bailPromise = new Promise(\n      (resolve, reject) => (preventBail = resolve, bail = reject)\n    );\n    const bailIfEnded = (bailSignal) => {\n      const bailResult = (\n        // The `cancel` prop or `stop` method was used.\n        callId <= (state.cancelId || 0) && getCancelledResult(target) || // The async `to` prop was replaced.\n        callId !== state.asyncId && getFinishedResult(target, false)\n      );\n      if (bailResult) {\n        bailSignal.result = bailResult;\n        bail(bailSignal);\n        throw bailSignal;\n      }\n    };\n    const animate = (arg1, arg2) => {\n      const bailSignal = new BailSignal();\n      const skipAnimationSignal = new SkipAnimationSignal();\n      return (async () => {\n        if (G3.skipAnimation) {\n          stopAsync(state);\n          skipAnimationSignal.result = getFinishedResult(target, false);\n          bail(skipAnimationSignal);\n          throw skipAnimationSignal;\n        }\n        bailIfEnded(bailSignal);\n        const props2 = is4.obj(arg1) ? { ...arg1 } : { ...arg2, to: arg1 };\n        props2.parentId = callId;\n        eachProp2(defaultProps, (value, key) => {\n          if (is4.und(props2[key])) {\n            props2[key] = value;\n          }\n        });\n        const result2 = await target.start(props2);\n        bailIfEnded(bailSignal);\n        if (state.paused) {\n          await new Promise((resume) => {\n            state.resumeQueue.add(resume);\n          });\n        }\n        return result2;\n      })();\n    };\n    let result;\n    if (G3.skipAnimation) {\n      stopAsync(state);\n      return getFinishedResult(target, false);\n    }\n    try {\n      let animating;\n      if (is4.arr(to2)) {\n        animating = (async (queue) => {\n          for (const props2 of queue) {\n            await animate(props2);\n          }\n        })(to2);\n      } else {\n        animating = Promise.resolve(to2(animate, target.stop.bind(target)));\n      }\n      await Promise.all([animating.then(preventBail), bailPromise]);\n      result = getFinishedResult(target.get(), true, false);\n    } catch (err) {\n      if (err instanceof BailSignal) {\n        result = err.result;\n      } else if (err instanceof SkipAnimationSignal) {\n        result = err.result;\n      } else {\n        throw err;\n      }\n    } finally {\n      if (callId == state.asyncId) {\n        state.asyncId = parentId;\n        state.asyncTo = parentId ? prevTo : void 0;\n        state.promise = parentId ? prevPromise : void 0;\n      }\n    }\n    if (is4.fun(onRest)) {\n      raf2.batchedUpdates(() => {\n        onRest(result, target, target.item);\n      });\n    }\n    return result;\n  })();\n}\nfunction stopAsync(state, cancelId) {\n  flush(state.timeouts, (t) => t.cancel());\n  state.pauseQueue.clear();\n  state.resumeQueue.clear();\n  state.asyncId = state.asyncTo = state.promise = void 0;\n  if (cancelId)\n    state.cancelId = cancelId;\n}\nvar BailSignal = class extends Error {\n  constructor() {\n    super(\n      \"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.\"\n    );\n  }\n};\nvar SkipAnimationSignal = class extends Error {\n  constructor() {\n    super(\"SkipAnimationSignal\");\n  }\n};\n\n// src/FrameValue.ts\nimport {\n  deprecateInterpolate,\n  frameLoop,\n  FluidValue as FluidValue2,\n  Globals as G4,\n  callFluidObservers\n} from \"@react-spring/shared\";\nimport { getAnimated } from \"@react-spring/animated\";\nvar isFrameValue = (value) => value instanceof FrameValue;\nvar nextId = 1;\nvar FrameValue = class extends FluidValue2 {\n  constructor() {\n    super(...arguments);\n    this.id = nextId++;\n    this._priority = 0;\n  }\n  get priority() {\n    return this._priority;\n  }\n  set priority(priority) {\n    if (this._priority != priority) {\n      this._priority = priority;\n      this._onPriorityChange(priority);\n    }\n  }\n  /** Get the current value */\n  get() {\n    const node = getAnimated(this);\n    return node && node.getValue();\n  }\n  /** Create a spring that maps our value to another value */\n  to(...args) {\n    return G4.to(this, args);\n  }\n  /** @deprecated Use the `to` method instead. */\n  interpolate(...args) {\n    deprecateInterpolate();\n    return G4.to(this, args);\n  }\n  toJSON() {\n    return this.get();\n  }\n  observerAdded(count) {\n    if (count == 1)\n      this._attach();\n  }\n  observerRemoved(count) {\n    if (count == 0)\n      this._detach();\n  }\n  /** Called when the first child is added. */\n  _attach() {\n  }\n  /** Called when the last child is removed. */\n  _detach() {\n  }\n  /** Tell our children about our new value */\n  _onChange(value, idle = false) {\n    callFluidObservers(this, {\n      type: \"change\",\n      parent: this,\n      value,\n      idle\n    });\n  }\n  /** Tell our children about our new priority */\n  _onPriorityChange(priority) {\n    if (!this.idle) {\n      frameLoop.sort(this);\n    }\n    callFluidObservers(this, {\n      type: \"priority\",\n      parent: this,\n      priority\n    });\n  }\n};\n\n// src/SpringPhase.ts\nvar $P = Symbol.for(\"SpringPhase\");\nvar HAS_ANIMATED = 1;\nvar IS_ANIMATING = 2;\nvar IS_PAUSED = 4;\nvar hasAnimated = (target) => (target[$P] & HAS_ANIMATED) > 0;\nvar isAnimating = (target) => (target[$P] & IS_ANIMATING) > 0;\nvar isPaused = (target) => (target[$P] & IS_PAUSED) > 0;\nvar setActiveBit = (target, active) => active ? target[$P] |= IS_ANIMATING | HAS_ANIMATED : target[$P] &= ~IS_ANIMATING;\nvar setPausedBit = (target, paused) => paused ? target[$P] |= IS_PAUSED : target[$P] &= ~IS_PAUSED;\n\n// src/SpringValue.ts\nvar SpringValue = class extends FrameValue {\n  constructor(arg1, arg2) {\n    super();\n    /** The animation state */\n    this.animation = new Animation();\n    /** Some props have customizable default values */\n    this.defaultProps = {};\n    /** The state for `runAsync` calls */\n    this._state = {\n      paused: false,\n      delayed: false,\n      pauseQueue: /* @__PURE__ */ new Set(),\n      resumeQueue: /* @__PURE__ */ new Set(),\n      timeouts: /* @__PURE__ */ new Set()\n    };\n    /** The promise resolvers of pending `start` calls */\n    this._pendingCalls = /* @__PURE__ */ new Set();\n    /** The counter for tracking `scheduleProps` calls */\n    this._lastCallId = 0;\n    /** The last `scheduleProps` call that changed the `to` prop */\n    this._lastToId = 0;\n    this._memoizedDuration = 0;\n    if (!is5.und(arg1) || !is5.und(arg2)) {\n      const props = is5.obj(arg1) ? { ...arg1 } : { ...arg2, from: arg1 };\n      if (is5.und(props.default)) {\n        props.default = true;\n      }\n      this.start(props);\n    }\n  }\n  /** Equals true when not advancing on each frame. */\n  get idle() {\n    return !(isAnimating(this) || this._state.asyncTo) || isPaused(this);\n  }\n  get goal() {\n    return getFluidValue2(this.animation.to);\n  }\n  get velocity() {\n    const node = getAnimated2(this);\n    return node instanceof AnimatedValue ? node.lastVelocity || 0 : node.getPayload().map((node2) => node2.lastVelocity || 0);\n  }\n  /**\n   * When true, this value has been animated at least once.\n   */\n  get hasAnimated() {\n    return hasAnimated(this);\n  }\n  /**\n   * When true, this value has an unfinished animation,\n   * which is either active or paused.\n   */\n  get isAnimating() {\n    return isAnimating(this);\n  }\n  /**\n   * When true, all current and future animations are paused.\n   */\n  get isPaused() {\n    return isPaused(this);\n  }\n  /**\n   *\n   *\n   */\n  get isDelayed() {\n    return this._state.delayed;\n  }\n  /** Advance the current animation by a number of milliseconds */\n  advance(dt) {\n    let idle = true;\n    let changed = false;\n    const anim = this.animation;\n    let { toValues } = anim;\n    const { config: config2 } = anim;\n    const payload = getPayload(anim.to);\n    if (!payload && hasFluidValue(anim.to)) {\n      toValues = toArray2(getFluidValue2(anim.to));\n    }\n    anim.values.forEach((node2, i) => {\n      if (node2.done)\n        return;\n      const to2 = (\n        // Animated strings always go from 0 to 1.\n        node2.constructor == AnimatedString ? 1 : payload ? payload[i].lastPosition : toValues[i]\n      );\n      let finished = anim.immediate;\n      let position = to2;\n      if (!finished) {\n        position = node2.lastPosition;\n        if (config2.tension <= 0) {\n          node2.done = true;\n          return;\n        }\n        let elapsed = node2.elapsedTime += dt;\n        const from = anim.fromValues[i];\n        const v0 = node2.v0 != null ? node2.v0 : node2.v0 = is5.arr(config2.velocity) ? config2.velocity[i] : config2.velocity;\n        let velocity;\n        const precision = config2.precision || (from == to2 ? 5e-3 : Math.min(1, Math.abs(to2 - from) * 1e-3));\n        if (!is5.und(config2.duration)) {\n          let p = 1;\n          if (config2.duration > 0) {\n            if (this._memoizedDuration !== config2.duration) {\n              this._memoizedDuration = config2.duration;\n              if (node2.durationProgress > 0) {\n                node2.elapsedTime = config2.duration * node2.durationProgress;\n                elapsed = node2.elapsedTime += dt;\n              }\n            }\n            p = (config2.progress || 0) + elapsed / this._memoizedDuration;\n            p = p > 1 ? 1 : p < 0 ? 0 : p;\n            node2.durationProgress = p;\n          }\n          position = from + config2.easing(p) * (to2 - from);\n          velocity = (position - node2.lastPosition) / dt;\n          finished = p == 1;\n        } else if (config2.decay) {\n          const decay = config2.decay === true ? 0.998 : config2.decay;\n          const e = Math.exp(-(1 - decay) * elapsed);\n          position = from + v0 / (1 - decay) * (1 - e);\n          finished = Math.abs(node2.lastPosition - position) <= precision;\n          velocity = v0 * e;\n        } else {\n          velocity = node2.lastVelocity == null ? v0 : node2.lastVelocity;\n          const restVelocity = config2.restVelocity || precision / 10;\n          const bounceFactor = config2.clamp ? 0 : config2.bounce;\n          const canBounce = !is5.und(bounceFactor);\n          const isGrowing = from == to2 ? node2.v0 > 0 : from < to2;\n          let isMoving;\n          let isBouncing = false;\n          const step = 1;\n          const numSteps = Math.ceil(dt / step);\n          for (let n = 0; n < numSteps; ++n) {\n            isMoving = Math.abs(velocity) > restVelocity;\n            if (!isMoving) {\n              finished = Math.abs(to2 - position) <= precision;\n              if (finished) {\n                break;\n              }\n            }\n            if (canBounce) {\n              isBouncing = position == to2 || position > to2 == isGrowing;\n              if (isBouncing) {\n                velocity = -velocity * bounceFactor;\n                position = to2;\n              }\n            }\n            const springForce = -config2.tension * 1e-6 * (position - to2);\n            const dampingForce = -config2.friction * 1e-3 * velocity;\n            const acceleration = (springForce + dampingForce) / config2.mass;\n            velocity = velocity + acceleration * step;\n            position = position + velocity * step;\n          }\n        }\n        node2.lastVelocity = velocity;\n        if (Number.isNaN(position)) {\n          console.warn(`Got NaN while animating:`, this);\n          finished = true;\n        }\n      }\n      if (payload && !payload[i].done) {\n        finished = false;\n      }\n      if (finished) {\n        node2.done = true;\n      } else {\n        idle = false;\n      }\n      if (node2.setValue(position, config2.round)) {\n        changed = true;\n      }\n    });\n    const node = getAnimated2(this);\n    const currVal = node.getValue();\n    if (idle) {\n      const finalVal = getFluidValue2(anim.to);\n      if ((currVal !== finalVal || changed) && !config2.decay) {\n        node.setValue(finalVal);\n        this._onChange(finalVal);\n      } else if (changed && config2.decay) {\n        this._onChange(currVal);\n      }\n      this._stop();\n    } else if (changed) {\n      this._onChange(currVal);\n    }\n  }\n  /** Set the current value, while stopping the current animation */\n  set(value) {\n    raf3.batchedUpdates(() => {\n      this._stop();\n      this._focus(value);\n      this._set(value);\n    });\n    return this;\n  }\n  /**\n   * Freeze the active animation in time, as well as any updates merged\n   * before `resume` is called.\n   */\n  pause() {\n    this._update({ pause: true });\n  }\n  /** Resume the animation if paused. */\n  resume() {\n    this._update({ pause: false });\n  }\n  /** Skip to the end of the current animation. */\n  finish() {\n    if (isAnimating(this)) {\n      const { to: to2, config: config2 } = this.animation;\n      raf3.batchedUpdates(() => {\n        this._onStart();\n        if (!config2.decay) {\n          this._set(to2, false);\n        }\n        this._stop();\n      });\n    }\n    return this;\n  }\n  /** Push props into the pending queue. */\n  update(props) {\n    const queue = this.queue || (this.queue = []);\n    queue.push(props);\n    return this;\n  }\n  start(to2, arg2) {\n    let queue;\n    if (!is5.und(to2)) {\n      queue = [is5.obj(to2) ? to2 : { ...arg2, to: to2 }];\n    } else {\n      queue = this.queue || [];\n      this.queue = [];\n    }\n    return Promise.all(\n      queue.map((props) => {\n        const up = this._update(props);\n        return up;\n      })\n    ).then((results) => getCombinedResult(this, results));\n  }\n  /**\n   * Stop the current animation, and cancel any delayed updates.\n   *\n   * Pass `true` to call `onRest` with `cancelled: true`.\n   */\n  stop(cancel) {\n    const { to: to2 } = this.animation;\n    this._focus(this.get());\n    stopAsync(this._state, cancel && this._lastCallId);\n    raf3.batchedUpdates(() => this._stop(to2, cancel));\n    return this;\n  }\n  /** Restart the animation. */\n  reset() {\n    this._update({ reset: true });\n  }\n  /** @internal */\n  eventObserved(event) {\n    if (event.type == \"change\") {\n      this._start();\n    } else if (event.type == \"priority\") {\n      this.priority = event.priority + 1;\n    }\n  }\n  /**\n   * Parse the `to` and `from` range from the given `props` object.\n   *\n   * This also ensures the initial value is available to animated components\n   * during the render phase.\n   */\n  _prepareNode(props) {\n    const key = this.key || \"\";\n    let { to: to2, from } = props;\n    to2 = is5.obj(to2) ? to2[key] : to2;\n    if (to2 == null || isAsyncTo(to2)) {\n      to2 = void 0;\n    }\n    from = is5.obj(from) ? from[key] : from;\n    if (from == null) {\n      from = void 0;\n    }\n    const range = { to: to2, from };\n    if (!hasAnimated(this)) {\n      if (props.reverse)\n        [to2, from] = [from, to2];\n      from = getFluidValue2(from);\n      if (!is5.und(from)) {\n        this._set(from);\n      } else if (!getAnimated2(this)) {\n        this._set(to2);\n      }\n    }\n    return range;\n  }\n  /** Every update is processed by this method before merging. */\n  _update({ ...props }, isLoop) {\n    const { key, defaultProps } = this;\n    if (props.default)\n      Object.assign(\n        defaultProps,\n        getDefaultProps(\n          props,\n          (value, prop) => /^on/.test(prop) ? resolveProp(value, key) : value\n        )\n      );\n    mergeActiveFn(this, props, \"onProps\");\n    sendEvent(this, \"onProps\", props, this);\n    const range = this._prepareNode(props);\n    if (Object.isFrozen(this)) {\n      throw Error(\n        \"Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?\"\n      );\n    }\n    const state = this._state;\n    return scheduleProps(++this._lastCallId, {\n      key,\n      props,\n      defaultProps,\n      state,\n      actions: {\n        pause: () => {\n          if (!isPaused(this)) {\n            setPausedBit(this, true);\n            flushCalls(state.pauseQueue);\n            sendEvent(\n              this,\n              \"onPause\",\n              getFinishedResult(this, checkFinished(this, this.animation.to)),\n              this\n            );\n          }\n        },\n        resume: () => {\n          if (isPaused(this)) {\n            setPausedBit(this, false);\n            if (isAnimating(this)) {\n              this._resume();\n            }\n            flushCalls(state.resumeQueue);\n            sendEvent(\n              this,\n              \"onResume\",\n              getFinishedResult(this, checkFinished(this, this.animation.to)),\n              this\n            );\n          }\n        },\n        start: this._merge.bind(this, range)\n      }\n    }).then((result) => {\n      if (props.loop && result.finished && !(isLoop && result.noop)) {\n        const nextProps = createLoopUpdate(props);\n        if (nextProps) {\n          return this._update(nextProps, true);\n        }\n      }\n      return result;\n    });\n  }\n  /** Merge props into the current animation */\n  _merge(range, props, resolve) {\n    if (props.cancel) {\n      this.stop(true);\n      return resolve(getCancelledResult(this));\n    }\n    const hasToProp = !is5.und(range.to);\n    const hasFromProp = !is5.und(range.from);\n    if (hasToProp || hasFromProp) {\n      if (props.callId > this._lastToId) {\n        this._lastToId = props.callId;\n      } else {\n        return resolve(getCancelledResult(this));\n      }\n    }\n    const { key, defaultProps, animation: anim } = this;\n    const { to: prevTo, from: prevFrom } = anim;\n    let { to: to2 = prevTo, from = prevFrom } = range;\n    if (hasFromProp && !hasToProp && (!props.default || is5.und(to2))) {\n      to2 = from;\n    }\n    if (props.reverse)\n      [to2, from] = [from, to2];\n    const hasFromChanged = !isEqual(from, prevFrom);\n    if (hasFromChanged) {\n      anim.from = from;\n    }\n    from = getFluidValue2(from);\n    const hasToChanged = !isEqual(to2, prevTo);\n    if (hasToChanged) {\n      this._focus(to2);\n    }\n    const hasAsyncTo = isAsyncTo(props.to);\n    const { config: config2 } = anim;\n    const { decay, velocity } = config2;\n    if (hasToProp || hasFromProp) {\n      config2.velocity = 0;\n    }\n    if (props.config && !hasAsyncTo) {\n      mergeConfig(\n        config2,\n        callProp(props.config, key),\n        // Avoid calling the same \"config\" prop twice.\n        props.config !== defaultProps.config ? callProp(defaultProps.config, key) : void 0\n      );\n    }\n    let node = getAnimated2(this);\n    if (!node || is5.und(to2)) {\n      return resolve(getFinishedResult(this, true));\n    }\n    const reset = (\n      // When `reset` is undefined, the `from` prop implies `reset: true`,\n      // except for declarative updates. When `reset` is defined, there\n      // must exist a value to animate from.\n      is5.und(props.reset) ? hasFromProp && !props.default : !is5.und(from) && matchProp(props.reset, key)\n    );\n    const value = reset ? from : this.get();\n    const goal = computeGoal(to2);\n    const isAnimatable = is5.num(goal) || is5.arr(goal) || isAnimatedString2(goal);\n    const immediate = !hasAsyncTo && (!isAnimatable || matchProp(defaultProps.immediate || props.immediate, key));\n    if (hasToChanged) {\n      const nodeType = getAnimatedType(to2);\n      if (nodeType !== node.constructor) {\n        if (immediate) {\n          node = this._set(goal);\n        } else\n          throw Error(\n            `Cannot animate between ${node.constructor.name} and ${nodeType.name}, as the \"to\" prop suggests`\n          );\n      }\n    }\n    const goalType = node.constructor;\n    let started = hasFluidValue(to2);\n    let finished = false;\n    if (!started) {\n      const hasValueChanged = reset || !hasAnimated(this) && hasFromChanged;\n      if (hasToChanged || hasValueChanged) {\n        finished = isEqual(computeGoal(value), goal);\n        started = !finished;\n      }\n      if (!isEqual(anim.immediate, immediate) && !immediate || !isEqual(config2.decay, decay) || !isEqual(config2.velocity, velocity)) {\n        started = true;\n      }\n    }\n    if (finished && isAnimating(this)) {\n      if (anim.changed && !reset) {\n        started = true;\n      } else if (!started) {\n        this._stop(prevTo);\n      }\n    }\n    if (!hasAsyncTo) {\n      if (started || hasFluidValue(prevTo)) {\n        anim.values = node.getPayload();\n        anim.toValues = hasFluidValue(to2) ? null : goalType == AnimatedString ? [1] : toArray2(goal);\n      }\n      if (anim.immediate != immediate) {\n        anim.immediate = immediate;\n        if (!immediate && !reset) {\n          this._set(prevTo);\n        }\n      }\n      if (started) {\n        const { onRest } = anim;\n        each2(ACTIVE_EVENTS, (type) => mergeActiveFn(this, props, type));\n        const result = getFinishedResult(this, checkFinished(this, prevTo));\n        flushCalls(this._pendingCalls, result);\n        this._pendingCalls.add(resolve);\n        if (anim.changed)\n          raf3.batchedUpdates(() => {\n            anim.changed = !reset;\n            onRest?.(result, this);\n            if (reset) {\n              callProp(defaultProps.onRest, result);\n            } else {\n              anim.onStart?.(result, this);\n            }\n          });\n      }\n    }\n    if (reset) {\n      this._set(value);\n    }\n    if (hasAsyncTo) {\n      resolve(runAsync(props.to, props, this._state, this));\n    } else if (started) {\n      this._start();\n    } else if (isAnimating(this) && !hasToChanged) {\n      this._pendingCalls.add(resolve);\n    } else {\n      resolve(getNoopResult(value));\n    }\n  }\n  /** Update the `animation.to` value, which might be a `FluidValue` */\n  _focus(value) {\n    const anim = this.animation;\n    if (value !== anim.to) {\n      if (getFluidObservers(this)) {\n        this._detach();\n      }\n      anim.to = value;\n      if (getFluidObservers(this)) {\n        this._attach();\n      }\n    }\n  }\n  _attach() {\n    let priority = 0;\n    const { to: to2 } = this.animation;\n    if (hasFluidValue(to2)) {\n      addFluidObserver(to2, this);\n      if (isFrameValue(to2)) {\n        priority = to2.priority + 1;\n      }\n    }\n    this.priority = priority;\n  }\n  _detach() {\n    const { to: to2 } = this.animation;\n    if (hasFluidValue(to2)) {\n      removeFluidObserver(to2, this);\n    }\n  }\n  /**\n   * Update the current value from outside the frameloop,\n   * and return the `Animated` node.\n   */\n  _set(arg, idle = true) {\n    const value = getFluidValue2(arg);\n    if (!is5.und(value)) {\n      const oldNode = getAnimated2(this);\n      if (!oldNode || !isEqual(value, oldNode.getValue())) {\n        const nodeType = getAnimatedType(value);\n        if (!oldNode || oldNode.constructor != nodeType) {\n          setAnimated(this, nodeType.create(value));\n        } else {\n          oldNode.setValue(value);\n        }\n        if (oldNode) {\n          raf3.batchedUpdates(() => {\n            this._onChange(value, idle);\n          });\n        }\n      }\n    }\n    return getAnimated2(this);\n  }\n  _onStart() {\n    const anim = this.animation;\n    if (!anim.changed) {\n      anim.changed = true;\n      sendEvent(\n        this,\n        \"onStart\",\n        getFinishedResult(this, checkFinished(this, anim.to)),\n        this\n      );\n    }\n  }\n  _onChange(value, idle) {\n    if (!idle) {\n      this._onStart();\n      callProp(this.animation.onChange, value, this);\n    }\n    callProp(this.defaultProps.onChange, value, this);\n    super._onChange(value, idle);\n  }\n  // This method resets the animation state (even if already animating) to\n  // ensure the latest from/to range is used, and it also ensures this spring\n  // is added to the frameloop.\n  _start() {\n    const anim = this.animation;\n    getAnimated2(this).reset(getFluidValue2(anim.to));\n    if (!anim.immediate) {\n      anim.fromValues = anim.values.map((node) => node.lastPosition);\n    }\n    if (!isAnimating(this)) {\n      setActiveBit(this, true);\n      if (!isPaused(this)) {\n        this._resume();\n      }\n    }\n  }\n  _resume() {\n    if (G5.skipAnimation) {\n      this.finish();\n    } else {\n      frameLoop2.start(this);\n    }\n  }\n  /**\n   * Exit the frameloop and notify `onRest` listeners.\n   *\n   * Always wrap `_stop` calls with `batchedUpdates`.\n   */\n  _stop(goal, cancel) {\n    if (isAnimating(this)) {\n      setActiveBit(this, false);\n      const anim = this.animation;\n      each2(anim.values, (node) => {\n        node.done = true;\n      });\n      if (anim.toValues) {\n        anim.onChange = anim.onPause = anim.onResume = void 0;\n      }\n      callFluidObservers2(this, {\n        type: \"idle\",\n        parent: this\n      });\n      const result = cancel ? getCancelledResult(this.get()) : getFinishedResult(this.get(), checkFinished(this, goal ?? anim.to));\n      flushCalls(this._pendingCalls, result);\n      if (anim.changed) {\n        anim.changed = false;\n        sendEvent(this, \"onRest\", result, this);\n      }\n    }\n  }\n};\nfunction checkFinished(target, to2) {\n  const goal = computeGoal(to2);\n  const value = computeGoal(target.get());\n  return isEqual(value, goal);\n}\nfunction createLoopUpdate(props, loop = props.loop, to2 = props.to) {\n  const loopRet = callProp(loop);\n  if (loopRet) {\n    const overrides = loopRet !== true && inferTo(loopRet);\n    const reverse = (overrides || props).reverse;\n    const reset = !overrides || overrides.reset;\n    return createUpdate({\n      ...props,\n      loop,\n      // Avoid updating default props when looping.\n      default: false,\n      // Never loop the `pause` prop.\n      pause: void 0,\n      // For the \"reverse\" prop to loop as expected, the \"to\" prop\n      // must be undefined. The \"reverse\" prop is ignored when the\n      // \"to\" prop is an array or function.\n      to: !reverse || isAsyncTo(to2) ? to2 : void 0,\n      // Ignore the \"from\" prop except on reset.\n      from: reset ? props.from : void 0,\n      reset,\n      // The \"loop\" prop can return a \"useSpring\" props object to\n      // override any of the original props.\n      ...overrides\n    });\n  }\n}\nfunction createUpdate(props) {\n  const { to: to2, from } = props = inferTo(props);\n  const keys = /* @__PURE__ */ new Set();\n  if (is5.obj(to2))\n    findDefined(to2, keys);\n  if (is5.obj(from))\n    findDefined(from, keys);\n  props.keys = keys.size ? Array.from(keys) : null;\n  return props;\n}\nfunction declareUpdate(props) {\n  const update2 = createUpdate(props);\n  if (is5.und(update2.default)) {\n    update2.default = getDefaultProps(update2);\n  }\n  return update2;\n}\nfunction findDefined(values, keys) {\n  eachProp3(values, (value, key) => value != null && keys.add(key));\n}\nvar ACTIVE_EVENTS = [\n  \"onStart\",\n  \"onRest\",\n  \"onChange\",\n  \"onPause\",\n  \"onResume\"\n];\nfunction mergeActiveFn(target, props, type) {\n  target.animation[type] = props[type] !== getDefaultProp(props, type) ? resolveProp(props[type], target.key) : void 0;\n}\nfunction sendEvent(target, type, ...args) {\n  target.animation[type]?.(...args);\n  target.defaultProps[type]?.(...args);\n}\n\n// src/Controller.ts\nimport {\n  is as is6,\n  raf as raf4,\n  each as each3,\n  noop,\n  flush as flush2,\n  toArray as toArray3,\n  eachProp as eachProp4,\n  flushCalls as flushCalls2,\n  addFluidObserver as addFluidObserver2\n} from \"@react-spring/shared\";\nvar BATCHED_EVENTS = [\"onStart\", \"onChange\", \"onRest\"];\nvar nextId2 = 1;\nvar Controller = class {\n  constructor(props, flush3) {\n    this.id = nextId2++;\n    /** The animated values */\n    this.springs = {};\n    /** The queue of props passed to the `update` method. */\n    this.queue = [];\n    /** The counter for tracking `scheduleProps` calls */\n    this._lastAsyncId = 0;\n    /** The values currently being animated */\n    this._active = /* @__PURE__ */ new Set();\n    /** The values that changed recently */\n    this._changed = /* @__PURE__ */ new Set();\n    /** Equals false when `onStart` listeners can be called */\n    this._started = false;\n    /** State used by the `runAsync` function */\n    this._state = {\n      paused: false,\n      pauseQueue: /* @__PURE__ */ new Set(),\n      resumeQueue: /* @__PURE__ */ new Set(),\n      timeouts: /* @__PURE__ */ new Set()\n    };\n    /** The event queues that are flushed once per frame maximum */\n    this._events = {\n      onStart: /* @__PURE__ */ new Map(),\n      onChange: /* @__PURE__ */ new Map(),\n      onRest: /* @__PURE__ */ new Map()\n    };\n    this._onFrame = this._onFrame.bind(this);\n    if (flush3) {\n      this._flush = flush3;\n    }\n    if (props) {\n      this.start({ default: true, ...props });\n    }\n  }\n  /**\n   * Equals `true` when no spring values are in the frameloop, and\n   * no async animation is currently active.\n   */\n  get idle() {\n    return !this._state.asyncTo && Object.values(this.springs).every((spring) => {\n      return spring.idle && !spring.isDelayed && !spring.isPaused;\n    });\n  }\n  get item() {\n    return this._item;\n  }\n  set item(item) {\n    this._item = item;\n  }\n  /** Get the current values of our springs */\n  get() {\n    const values = {};\n    this.each((spring, key) => values[key] = spring.get());\n    return values;\n  }\n  /** Set the current values without animating. */\n  set(values) {\n    for (const key in values) {\n      const value = values[key];\n      if (!is6.und(value)) {\n        this.springs[key].set(value);\n      }\n    }\n  }\n  /** Push an update onto the queue of each value. */\n  update(props) {\n    if (props) {\n      this.queue.push(createUpdate(props));\n    }\n    return this;\n  }\n  /**\n   * Start the queued animations for every spring, and resolve the returned\n   * promise once all queued animations have finished or been cancelled.\n   *\n   * When you pass a queue (instead of nothing), that queue is used instead of\n   * the queued animations added with the `update` method, which are left alone.\n   */\n  start(props) {\n    let { queue } = this;\n    if (props) {\n      queue = toArray3(props).map(createUpdate);\n    } else {\n      this.queue = [];\n    }\n    if (this._flush) {\n      return this._flush(this, queue);\n    }\n    prepareKeys(this, queue);\n    return flushUpdateQueue(this, queue);\n  }\n  /** @internal */\n  stop(arg, keys) {\n    if (arg !== !!arg) {\n      keys = arg;\n    }\n    if (keys) {\n      const springs = this.springs;\n      each3(toArray3(keys), (key) => springs[key].stop(!!arg));\n    } else {\n      stopAsync(this._state, this._lastAsyncId);\n      this.each((spring) => spring.stop(!!arg));\n    }\n    return this;\n  }\n  /** Freeze the active animation in time */\n  pause(keys) {\n    if (is6.und(keys)) {\n      this.start({ pause: true });\n    } else {\n      const springs = this.springs;\n      each3(toArray3(keys), (key) => springs[key].pause());\n    }\n    return this;\n  }\n  /** Resume the animation if paused. */\n  resume(keys) {\n    if (is6.und(keys)) {\n      this.start({ pause: false });\n    } else {\n      const springs = this.springs;\n      each3(toArray3(keys), (key) => springs[key].resume());\n    }\n    return this;\n  }\n  /** Call a function once per spring value */\n  each(iterator) {\n    eachProp4(this.springs, iterator);\n  }\n  /** @internal Called at the end of every animation frame */\n  _onFrame() {\n    const { onStart, onChange, onRest } = this._events;\n    const active = this._active.size > 0;\n    const changed = this._changed.size > 0;\n    if (active && !this._started || changed && !this._started) {\n      this._started = true;\n      flush2(onStart, ([onStart2, result]) => {\n        result.value = this.get();\n        onStart2(result, this, this._item);\n      });\n    }\n    const idle = !active && this._started;\n    const values = changed || idle && onRest.size ? this.get() : null;\n    if (changed && onChange.size) {\n      flush2(onChange, ([onChange2, result]) => {\n        result.value = values;\n        onChange2(result, this, this._item);\n      });\n    }\n    if (idle) {\n      this._started = false;\n      flush2(onRest, ([onRest2, result]) => {\n        result.value = values;\n        onRest2(result, this, this._item);\n      });\n    }\n  }\n  /** @internal */\n  eventObserved(event) {\n    if (event.type == \"change\") {\n      this._changed.add(event.parent);\n      if (!event.idle) {\n        this._active.add(event.parent);\n      }\n    } else if (event.type == \"idle\") {\n      this._active.delete(event.parent);\n    } else\n      return;\n    raf4.onFrame(this._onFrame);\n  }\n};\nfunction flushUpdateQueue(ctrl, queue) {\n  return Promise.all(queue.map((props) => flushUpdate(ctrl, props))).then(\n    (results) => getCombinedResult(ctrl, results)\n  );\n}\nasync function flushUpdate(ctrl, props, isLoop) {\n  const { keys, to: to2, from, loop, onRest, onResolve } = props;\n  const defaults2 = is6.obj(props.default) && props.default;\n  if (loop) {\n    props.loop = false;\n  }\n  if (to2 === false)\n    props.to = null;\n  if (from === false)\n    props.from = null;\n  const asyncTo = is6.arr(to2) || is6.fun(to2) ? to2 : void 0;\n  if (asyncTo) {\n    props.to = void 0;\n    props.onRest = void 0;\n    if (defaults2) {\n      defaults2.onRest = void 0;\n    }\n  } else {\n    each3(BATCHED_EVENTS, (key) => {\n      const handler = props[key];\n      if (is6.fun(handler)) {\n        const queue = ctrl[\"_events\"][key];\n        props[key] = ({ finished, cancelled }) => {\n          const result2 = queue.get(handler);\n          if (result2) {\n            if (!finished)\n              result2.finished = false;\n            if (cancelled)\n              result2.cancelled = true;\n          } else {\n            queue.set(handler, {\n              value: null,\n              finished: finished || false,\n              cancelled: cancelled || false\n            });\n          }\n        };\n        if (defaults2) {\n          defaults2[key] = props[key];\n        }\n      }\n    });\n  }\n  const state = ctrl[\"_state\"];\n  if (props.pause === !state.paused) {\n    state.paused = props.pause;\n    flushCalls2(props.pause ? state.pauseQueue : state.resumeQueue);\n  } else if (state.paused) {\n    props.pause = true;\n  }\n  const promises = (keys || Object.keys(ctrl.springs)).map(\n    (key) => ctrl.springs[key].start(props)\n  );\n  const cancel = props.cancel === true || getDefaultProp(props, \"cancel\") === true;\n  if (asyncTo || cancel && state.asyncId) {\n    promises.push(\n      scheduleProps(++ctrl[\"_lastAsyncId\"], {\n        props,\n        state,\n        actions: {\n          pause: noop,\n          resume: noop,\n          start(props2, resolve) {\n            if (cancel) {\n              stopAsync(state, ctrl[\"_lastAsyncId\"]);\n              resolve(getCancelledResult(ctrl));\n            } else {\n              props2.onRest = onRest;\n              resolve(\n                runAsync(\n                  asyncTo,\n                  props2,\n                  state,\n                  ctrl\n                )\n              );\n            }\n          }\n        }\n      })\n    );\n  }\n  if (state.paused) {\n    await new Promise((resume) => {\n      state.resumeQueue.add(resume);\n    });\n  }\n  const result = getCombinedResult(ctrl, await Promise.all(promises));\n  if (loop && result.finished && !(isLoop && result.noop)) {\n    const nextProps = createLoopUpdate(props, loop, to2);\n    if (nextProps) {\n      prepareKeys(ctrl, [nextProps]);\n      return flushUpdate(ctrl, nextProps, true);\n    }\n  }\n  if (onResolve) {\n    raf4.batchedUpdates(() => onResolve(result, ctrl, ctrl.item));\n  }\n  return result;\n}\nfunction getSprings(ctrl, props) {\n  const springs = { ...ctrl.springs };\n  if (props) {\n    each3(toArray3(props), (props2) => {\n      if (is6.und(props2.keys)) {\n        props2 = createUpdate(props2);\n      }\n      if (!is6.obj(props2.to)) {\n        props2 = { ...props2, to: void 0 };\n      }\n      prepareSprings(springs, props2, (key) => {\n        return createSpring(key);\n      });\n    });\n  }\n  setSprings(ctrl, springs);\n  return springs;\n}\nfunction setSprings(ctrl, springs) {\n  eachProp4(springs, (spring, key) => {\n    if (!ctrl.springs[key]) {\n      ctrl.springs[key] = spring;\n      addFluidObserver2(spring, ctrl);\n    }\n  });\n}\nfunction createSpring(key, observer) {\n  const spring = new SpringValue();\n  spring.key = key;\n  if (observer) {\n    addFluidObserver2(spring, observer);\n  }\n  return spring;\n}\nfunction prepareSprings(springs, props, create) {\n  if (props.keys) {\n    each3(props.keys, (key) => {\n      const spring = springs[key] || (springs[key] = create(key));\n      spring[\"_prepareNode\"](props);\n    });\n  }\n}\nfunction prepareKeys(ctrl, queue) {\n  each3(queue, (props) => {\n    prepareSprings(ctrl.springs, props, (key) => {\n      return createSpring(key, ctrl);\n    });\n  });\n}\n\n// src/SpringContext.tsx\nimport * as React from \"react\";\nimport { useContext } from \"react\";\nimport { useMemoOne } from \"@react-spring/shared\";\nvar SpringContext = ({\n  children,\n  ...props\n}) => {\n  const inherited = useContext(ctx);\n  const pause = props.pause || !!inherited.pause, immediate = props.immediate || !!inherited.immediate;\n  props = useMemoOne(() => ({ pause, immediate }), [pause, immediate]);\n  const { Provider } = ctx;\n  return /* @__PURE__ */ React.createElement(Provider, { value: props }, children);\n};\nvar ctx = makeContext(SpringContext, {});\nSpringContext.Provider = ctx.Provider;\nSpringContext.Consumer = ctx.Consumer;\nfunction makeContext(target, init) {\n  Object.assign(target, React.createContext(init));\n  target.Provider._context = target;\n  target.Consumer._context = target;\n  return target;\n}\n\n// src/SpringRef.ts\nimport { each as each4, is as is7, deprecateDirectCall } from \"@react-spring/shared\";\nvar SpringRef = () => {\n  const current = [];\n  const SpringRef2 = function(props) {\n    deprecateDirectCall();\n    const results = [];\n    each4(current, (ctrl, i) => {\n      if (is7.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update2 = _getProps(props, ctrl, i);\n        if (update2) {\n          results.push(ctrl.start(update2));\n        }\n      }\n    });\n    return results;\n  };\n  SpringRef2.current = current;\n  SpringRef2.add = function(ctrl) {\n    if (!current.includes(ctrl)) {\n      current.push(ctrl);\n    }\n  };\n  SpringRef2.delete = function(ctrl) {\n    const i = current.indexOf(ctrl);\n    if (~i)\n      current.splice(i, 1);\n  };\n  SpringRef2.pause = function() {\n    each4(current, (ctrl) => ctrl.pause(...arguments));\n    return this;\n  };\n  SpringRef2.resume = function() {\n    each4(current, (ctrl) => ctrl.resume(...arguments));\n    return this;\n  };\n  SpringRef2.set = function(values) {\n    each4(current, (ctrl, i) => {\n      const update2 = is7.fun(values) ? values(i, ctrl) : values;\n      if (update2) {\n        ctrl.set(update2);\n      }\n    });\n  };\n  SpringRef2.start = function(props) {\n    const results = [];\n    each4(current, (ctrl, i) => {\n      if (is7.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update2 = this._getProps(props, ctrl, i);\n        if (update2) {\n          results.push(ctrl.start(update2));\n        }\n      }\n    });\n    return results;\n  };\n  SpringRef2.stop = function() {\n    each4(current, (ctrl) => ctrl.stop(...arguments));\n    return this;\n  };\n  SpringRef2.update = function(props) {\n    each4(current, (ctrl, i) => ctrl.update(this._getProps(props, ctrl, i)));\n    return this;\n  };\n  const _getProps = function(arg, ctrl, index) {\n    return is7.fun(arg) ? arg(index, ctrl) : arg;\n  };\n  SpringRef2._getProps = _getProps;\n  return SpringRef2;\n};\n\n// src/hooks/useSprings.ts\nfunction useSprings(length, props, deps) {\n  const propsFn = is8.fun(props) && props;\n  if (propsFn && !deps)\n    deps = [];\n  const ref = useMemo(\n    () => propsFn || arguments.length == 3 ? SpringRef() : void 0,\n    []\n  );\n  const layoutId = useRef(0);\n  const forceUpdate = useForceUpdate();\n  const state = useMemo(\n    () => ({\n      ctrls: [],\n      queue: [],\n      flush(ctrl, updates2) {\n        const springs2 = getSprings(ctrl, updates2);\n        const canFlushSync = layoutId.current > 0 && !state.queue.length && !Object.keys(springs2).some((key) => !ctrl.springs[key]);\n        return canFlushSync ? flushUpdateQueue(ctrl, updates2) : new Promise((resolve) => {\n          setSprings(ctrl, springs2);\n          state.queue.push(() => {\n            resolve(flushUpdateQueue(ctrl, updates2));\n          });\n          forceUpdate();\n        });\n      }\n    }),\n    []\n  );\n  const ctrls = useRef([...state.ctrls]);\n  const updates = [];\n  const prevLength = usePrev(length) || 0;\n  useMemo(() => {\n    each5(ctrls.current.slice(length, prevLength), (ctrl) => {\n      detachRefs(ctrl, ref);\n      ctrl.stop(true);\n    });\n    ctrls.current.length = length;\n    declareUpdates(prevLength, length);\n  }, [length]);\n  useMemo(() => {\n    declareUpdates(0, Math.min(prevLength, length));\n  }, deps);\n  function declareUpdates(startIndex, endIndex) {\n    for (let i = startIndex; i < endIndex; i++) {\n      const ctrl = ctrls.current[i] || (ctrls.current[i] = new Controller(null, state.flush));\n      const update2 = propsFn ? propsFn(i, ctrl) : props[i];\n      if (update2) {\n        updates[i] = declareUpdate(update2);\n      }\n    }\n  }\n  const springs = ctrls.current.map((ctrl, i) => getSprings(ctrl, updates[i]));\n  const context = useContext2(SpringContext);\n  const prevContext = usePrev(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect2(() => {\n    layoutId.current++;\n    state.ctrls = ctrls.current;\n    const { queue } = state;\n    if (queue.length) {\n      state.queue = [];\n      each5(queue, (cb) => cb());\n    }\n    each5(ctrls.current, (ctrl, i) => {\n      ref?.add(ctrl);\n      if (hasContext) {\n        ctrl.start({ default: context });\n      }\n      const update2 = updates[i];\n      if (update2) {\n        replaceRef(ctrl, update2.ref);\n        if (ctrl.ref) {\n          ctrl.queue.push(update2);\n        } else {\n          ctrl.start(update2);\n        }\n      }\n    });\n  });\n  useOnce(() => () => {\n    each5(state.ctrls, (ctrl) => ctrl.stop(true));\n  });\n  const values = springs.map((x) => ({ ...x }));\n  return ref ? [values, ref] : values;\n}\n\n// src/hooks/useSpring.ts\nfunction useSpring(props, deps) {\n  const isFn = is9.fun(props);\n  const [[values], ref] = useSprings(\n    1,\n    isFn ? props : [props],\n    isFn ? deps || [] : deps\n  );\n  return isFn || arguments.length == 2 ? [values, ref] : values;\n}\n\n// src/hooks/useSpringRef.ts\nimport { useState } from \"react\";\nvar initSpringRef = () => SpringRef();\nvar useSpringRef = () => useState(initSpringRef)[0];\n\n// src/hooks/useSpringValue.ts\nimport { useConstant, useOnce as useOnce2 } from \"@react-spring/shared\";\nvar useSpringValue = (initial, props) => {\n  const springValue = useConstant(() => new SpringValue(initial, props));\n  useOnce2(() => () => {\n    springValue.stop();\n  });\n  return springValue;\n};\n\n// src/hooks/useTrail.ts\nimport { each as each6, is as is10, useIsomorphicLayoutEffect as useIsomorphicLayoutEffect3 } from \"@react-spring/shared\";\nfunction useTrail(length, propsArg, deps) {\n  const propsFn = is10.fun(propsArg) && propsArg;\n  if (propsFn && !deps)\n    deps = [];\n  let reverse = true;\n  let passedRef = void 0;\n  const result = useSprings(\n    length,\n    (i, ctrl) => {\n      const props = propsFn ? propsFn(i, ctrl) : propsArg;\n      passedRef = props.ref;\n      reverse = reverse && props.reverse;\n      return props;\n    },\n    // Ensure the props function is called when no deps exist.\n    // This works around the 3 argument rule.\n    deps || [{}]\n  );\n  useIsomorphicLayoutEffect3(() => {\n    each6(result[1].current, (ctrl, i) => {\n      const parent = result[1].current[i + (reverse ? 1 : -1)];\n      replaceRef(ctrl, passedRef);\n      if (ctrl.ref) {\n        if (parent) {\n          ctrl.update({ to: parent.springs });\n        }\n        return;\n      }\n      if (parent) {\n        ctrl.start({ to: parent.springs });\n      } else {\n        ctrl.start();\n      }\n    });\n  }, deps);\n  if (propsFn || arguments.length == 3) {\n    const ref = passedRef ?? result[1];\n    ref[\"_getProps\"] = (propsArg2, ctrl, i) => {\n      const props = is10.fun(propsArg2) ? propsArg2(i, ctrl) : propsArg2;\n      if (props) {\n        const parent = ref.current[i + (props.reverse ? 1 : -1)];\n        if (parent)\n          props.to = parent.springs;\n        return props;\n      }\n    };\n    return result;\n  }\n  return result[0];\n}\n\n// src/hooks/useTransition.tsx\nimport * as React2 from \"react\";\nimport { useContext as useContext3, useRef as useRef2, useMemo as useMemo2 } from \"react\";\nimport {\n  is as is11,\n  toArray as toArray4,\n  useForceUpdate as useForceUpdate2,\n  useOnce as useOnce3,\n  usePrev as usePrev2,\n  each as each7,\n  useIsomorphicLayoutEffect as useIsomorphicLayoutEffect4\n} from \"@react-spring/shared\";\nfunction useTransition(data, props, deps) {\n  const propsFn = is11.fun(props) && props;\n  const {\n    reset,\n    sort,\n    trail = 0,\n    expires = true,\n    exitBeforeEnter = false,\n    onDestroyed,\n    ref: propsRef,\n    config: propsConfig\n  } = propsFn ? propsFn() : props;\n  const ref = useMemo2(\n    () => propsFn || arguments.length == 3 ? SpringRef() : void 0,\n    []\n  );\n  const items = toArray4(data);\n  const transitions = [];\n  const usedTransitions = useRef2(null);\n  const prevTransitions = reset ? null : usedTransitions.current;\n  useIsomorphicLayoutEffect4(() => {\n    usedTransitions.current = transitions;\n  });\n  useOnce3(() => {\n    each7(transitions, (t) => {\n      ref?.add(t.ctrl);\n      t.ctrl.ref = ref;\n    });\n    return () => {\n      each7(usedTransitions.current, (t) => {\n        if (t.expired) {\n          clearTimeout(t.expirationId);\n        }\n        detachRefs(t.ctrl, ref);\n        t.ctrl.stop(true);\n      });\n    };\n  });\n  const keys = getKeys(items, propsFn ? propsFn() : props, prevTransitions);\n  const expired = reset && usedTransitions.current || [];\n  useIsomorphicLayoutEffect4(\n    () => each7(expired, ({ ctrl, item, key }) => {\n      detachRefs(ctrl, ref);\n      callProp(onDestroyed, item, key);\n    })\n  );\n  const reused = [];\n  if (prevTransitions)\n    each7(prevTransitions, (t, i) => {\n      if (t.expired) {\n        clearTimeout(t.expirationId);\n        expired.push(t);\n      } else {\n        i = reused[i] = keys.indexOf(t.key);\n        if (~i)\n          transitions[i] = t;\n      }\n    });\n  each7(items, (item, i) => {\n    if (!transitions[i]) {\n      transitions[i] = {\n        key: keys[i],\n        item,\n        phase: \"mount\" /* MOUNT */,\n        ctrl: new Controller()\n      };\n      transitions[i].ctrl.item = item;\n    }\n  });\n  if (reused.length) {\n    let i = -1;\n    const { leave } = propsFn ? propsFn() : props;\n    each7(reused, (keyIndex, prevIndex) => {\n      const t = prevTransitions[prevIndex];\n      if (~keyIndex) {\n        i = transitions.indexOf(t);\n        transitions[i] = { ...t, item: items[keyIndex] };\n      } else if (leave) {\n        transitions.splice(++i, 0, t);\n      }\n    });\n  }\n  if (is11.fun(sort)) {\n    transitions.sort((a, b) => sort(a.item, b.item));\n  }\n  let delay = -trail;\n  const forceUpdate = useForceUpdate2();\n  const defaultProps = getDefaultProps(props);\n  const changes = /* @__PURE__ */ new Map();\n  const exitingTransitions = useRef2(/* @__PURE__ */ new Map());\n  const forceChange = useRef2(false);\n  each7(transitions, (t, i) => {\n    const key = t.key;\n    const prevPhase = t.phase;\n    const p = propsFn ? propsFn() : props;\n    let to2;\n    let phase;\n    const propsDelay = callProp(p.delay || 0, key);\n    if (prevPhase == \"mount\" /* MOUNT */) {\n      to2 = p.enter;\n      phase = \"enter\" /* ENTER */;\n    } else {\n      const isLeave = keys.indexOf(key) < 0;\n      if (prevPhase != \"leave\" /* LEAVE */) {\n        if (isLeave) {\n          to2 = p.leave;\n          phase = \"leave\" /* LEAVE */;\n        } else if (to2 = p.update) {\n          phase = \"update\" /* UPDATE */;\n        } else\n          return;\n      } else if (!isLeave) {\n        to2 = p.enter;\n        phase = \"enter\" /* ENTER */;\n      } else\n        return;\n    }\n    to2 = callProp(to2, t.item, i);\n    to2 = is11.obj(to2) ? inferTo(to2) : { to: to2 };\n    if (!to2.config) {\n      const config2 = propsConfig || defaultProps.config;\n      to2.config = callProp(config2, t.item, i, phase);\n    }\n    delay += trail;\n    const payload = {\n      ...defaultProps,\n      // we need to add our props.delay value you here.\n      delay: propsDelay + delay,\n      ref: propsRef,\n      immediate: p.immediate,\n      // This prevents implied resets.\n      reset: false,\n      // Merge any phase-specific props.\n      ...to2\n    };\n    if (phase == \"enter\" /* ENTER */ && is11.und(payload.from)) {\n      const p2 = propsFn ? propsFn() : props;\n      const from = is11.und(p2.initial) || prevTransitions ? p2.from : p2.initial;\n      payload.from = callProp(from, t.item, i);\n    }\n    const { onResolve } = payload;\n    payload.onResolve = (result) => {\n      callProp(onResolve, result);\n      const transitions2 = usedTransitions.current;\n      const t2 = transitions2.find((t3) => t3.key === key);\n      if (!t2)\n        return;\n      if (result.cancelled && t2.phase != \"update\" /* UPDATE */) {\n        return;\n      }\n      if (t2.ctrl.idle) {\n        const idle = transitions2.every((t3) => t3.ctrl.idle);\n        if (t2.phase == \"leave\" /* LEAVE */) {\n          const expiry = callProp(expires, t2.item);\n          if (expiry !== false) {\n            const expiryMs = expiry === true ? 0 : expiry;\n            t2.expired = true;\n            if (!idle && expiryMs > 0) {\n              if (expiryMs <= 2147483647)\n                t2.expirationId = setTimeout(forceUpdate, expiryMs);\n              return;\n            }\n          }\n        }\n        if (idle && transitions2.some((t3) => t3.expired)) {\n          exitingTransitions.current.delete(t2);\n          if (exitBeforeEnter) {\n            forceChange.current = true;\n          }\n          forceUpdate();\n        }\n      }\n    };\n    const springs = getSprings(t.ctrl, payload);\n    if (phase === \"leave\" /* LEAVE */ && exitBeforeEnter) {\n      exitingTransitions.current.set(t, { phase, springs, payload });\n    } else {\n      changes.set(t, { phase, springs, payload });\n    }\n  });\n  const context = useContext3(SpringContext);\n  const prevContext = usePrev2(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect4(() => {\n    if (hasContext) {\n      each7(transitions, (t) => {\n        t.ctrl.start({ default: context });\n      });\n    }\n  }, [context]);\n  each7(changes, (_, t) => {\n    if (exitingTransitions.current.size) {\n      const ind = transitions.findIndex((state) => state.key === t.key);\n      transitions.splice(ind, 1);\n    }\n  });\n  useIsomorphicLayoutEffect4(\n    () => {\n      each7(\n        exitingTransitions.current.size ? exitingTransitions.current : changes,\n        ({ phase, payload }, t) => {\n          const { ctrl } = t;\n          t.phase = phase;\n          ref?.add(ctrl);\n          if (hasContext && phase == \"enter\" /* ENTER */) {\n            ctrl.start({ default: context });\n          }\n          if (payload) {\n            replaceRef(ctrl, payload.ref);\n            if ((ctrl.ref || ref) && !forceChange.current) {\n              ctrl.update(payload);\n            } else {\n              ctrl.start(payload);\n              if (forceChange.current) {\n                forceChange.current = false;\n              }\n            }\n          }\n        }\n      );\n    },\n    reset ? void 0 : deps\n  );\n  const renderTransitions = (render) => /* @__PURE__ */ React2.createElement(React2.Fragment, null, transitions.map((t, i) => {\n    const { springs } = changes.get(t) || t.ctrl;\n    const elem = render({ ...springs }, t.item, t, i);\n    return elem && elem.type ? /* @__PURE__ */ React2.createElement(\n      elem.type,\n      {\n        ...elem.props,\n        key: is11.str(t.key) || is11.num(t.key) ? t.key : t.ctrl.id,\n        ref: elem.ref\n      }\n    ) : elem;\n  }));\n  return ref ? [renderTransitions, ref] : renderTransitions;\n}\nvar nextKey = 1;\nfunction getKeys(items, { key, keys = key }, prevTransitions) {\n  if (keys === null) {\n    const reused = /* @__PURE__ */ new Set();\n    return items.map((item) => {\n      const t = prevTransitions && prevTransitions.find(\n        (t2) => t2.item === item && t2.phase !== \"leave\" /* LEAVE */ && !reused.has(t2)\n      );\n      if (t) {\n        reused.add(t);\n        return t.key;\n      }\n      return nextKey++;\n    });\n  }\n  return is11.und(keys) ? items : is11.fun(keys) ? items.map(keys) : toArray4(keys);\n}\n\n// src/hooks/useScroll.ts\nimport { each as each8, onScroll, useIsomorphicLayoutEffect as useIsomorphicLayoutEffect5 } from \"@react-spring/shared\";\nvar useScroll = ({\n  container,\n  ...springOptions\n} = {}) => {\n  const [scrollValues, api] = useSpring(\n    () => ({\n      scrollX: 0,\n      scrollY: 0,\n      scrollXProgress: 0,\n      scrollYProgress: 0,\n      ...springOptions\n    }),\n    []\n  );\n  useIsomorphicLayoutEffect5(() => {\n    const cleanupScroll = onScroll(\n      ({ x, y }) => {\n        api.start({\n          scrollX: x.current,\n          scrollXProgress: x.progress,\n          scrollY: y.current,\n          scrollYProgress: y.progress\n        });\n      },\n      { container: container?.current || void 0 }\n    );\n    return () => {\n      each8(Object.values(scrollValues), (value) => value.stop());\n      cleanupScroll();\n    };\n  }, []);\n  return scrollValues;\n};\n\n// src/hooks/useResize.ts\nimport { onResize, each as each9, useIsomorphicLayoutEffect as useIsomorphicLayoutEffect6 } from \"@react-spring/shared\";\nvar useResize = ({\n  container,\n  ...springOptions\n}) => {\n  const [sizeValues, api] = useSpring(\n    () => ({\n      width: 0,\n      height: 0,\n      ...springOptions\n    }),\n    []\n  );\n  useIsomorphicLayoutEffect6(() => {\n    const cleanupScroll = onResize(\n      ({ width, height }) => {\n        api.start({\n          width,\n          height,\n          immediate: sizeValues.width.get() === 0 || sizeValues.height.get() === 0\n        });\n      },\n      { container: container?.current || void 0 }\n    );\n    return () => {\n      each9(Object.values(sizeValues), (value) => value.stop());\n      cleanupScroll();\n    };\n  }, []);\n  return sizeValues;\n};\n\n// src/hooks/useInView.ts\nimport { useRef as useRef3, useState as useState2 } from \"react\";\nimport { is as is12, useIsomorphicLayoutEffect as useIsomorphicLayoutEffect7 } from \"@react-spring/shared\";\nvar defaultThresholdOptions = {\n  any: 0,\n  all: 1\n};\nfunction useInView(props, args) {\n  const [isInView, setIsInView] = useState2(false);\n  const ref = useRef3();\n  const propsFn = is12.fun(props) && props;\n  const springsProps = propsFn ? propsFn() : {};\n  const { to: to2 = {}, from = {}, ...restSpringProps } = springsProps;\n  const intersectionArguments = propsFn ? args : props;\n  const [springs, api] = useSpring(() => ({ from, ...restSpringProps }), []);\n  useIsomorphicLayoutEffect7(() => {\n    const element = ref.current;\n    const {\n      root,\n      once,\n      amount = \"any\",\n      ...restArgs\n    } = intersectionArguments ?? {};\n    if (!element || once && isInView || typeof IntersectionObserver === \"undefined\")\n      return;\n    const activeIntersections = /* @__PURE__ */ new WeakMap();\n    const onEnter = () => {\n      if (to2) {\n        api.start(to2);\n      }\n      setIsInView(true);\n      const cleanup = () => {\n        if (from) {\n          api.start(from);\n        }\n        setIsInView(false);\n      };\n      return once ? void 0 : cleanup;\n    };\n    const handleIntersection = (entries) => {\n      entries.forEach((entry) => {\n        const onLeave = activeIntersections.get(entry.target);\n        if (entry.isIntersecting === Boolean(onLeave)) {\n          return;\n        }\n        if (entry.isIntersecting) {\n          const newOnLeave = onEnter();\n          if (is12.fun(newOnLeave)) {\n            activeIntersections.set(entry.target, newOnLeave);\n          } else {\n            observer.unobserve(entry.target);\n          }\n        } else if (onLeave) {\n          onLeave();\n          activeIntersections.delete(entry.target);\n        }\n      });\n    };\n    const observer = new IntersectionObserver(handleIntersection, {\n      root: root && root.current || void 0,\n      threshold: typeof amount === \"number\" || Array.isArray(amount) ? amount : defaultThresholdOptions[amount],\n      ...restArgs\n    });\n    observer.observe(element);\n    return () => observer.unobserve(element);\n  }, [intersectionArguments]);\n  if (propsFn) {\n    return [ref, springs];\n  }\n  return [ref, isInView];\n}\n\n// src/components/Spring.tsx\nfunction Spring({ children, ...props }) {\n  return children(useSpring(props));\n}\n\n// src/components/Trail.tsx\nimport { is as is13 } from \"@react-spring/shared\";\nfunction Trail({\n  items,\n  children,\n  ...props\n}) {\n  const trails = useTrail(items.length, props);\n  return items.map((item, index) => {\n    const result = children(item, index);\n    return is13.fun(result) ? result(trails[index]) : result;\n  });\n}\n\n// src/components/Transition.tsx\nfunction Transition({\n  items,\n  children,\n  ...props\n}) {\n  return useTransition(items, props)(children);\n}\n\n// src/interpolate.ts\nimport { deprecateInterpolate as deprecateInterpolate2 } from \"@react-spring/shared\";\n\n// src/Interpolation.ts\nimport {\n  is as is14,\n  raf as raf5,\n  each as each10,\n  isEqual as isEqual2,\n  toArray as toArray5,\n  frameLoop as frameLoop3,\n  getFluidValue as getFluidValue3,\n  createInterpolator,\n  Globals as G6,\n  callFluidObservers as callFluidObservers3,\n  addFluidObserver as addFluidObserver3,\n  removeFluidObserver as removeFluidObserver2,\n  hasFluidValue as hasFluidValue2\n} from \"@react-spring/shared\";\nimport {\n  getAnimated as getAnimated3,\n  setAnimated as setAnimated2,\n  getAnimatedType as getAnimatedType2,\n  getPayload as getPayload2\n} from \"@react-spring/animated\";\nvar Interpolation = class extends FrameValue {\n  constructor(source, args) {\n    super();\n    this.source = source;\n    /** Equals false when in the frameloop */\n    this.idle = true;\n    /** The inputs which are currently animating */\n    this._active = /* @__PURE__ */ new Set();\n    this.calc = createInterpolator(...args);\n    const value = this._get();\n    const nodeType = getAnimatedType2(value);\n    setAnimated2(this, nodeType.create(value));\n  }\n  advance(_dt) {\n    const value = this._get();\n    const oldValue = this.get();\n    if (!isEqual2(value, oldValue)) {\n      getAnimated3(this).setValue(value);\n      this._onChange(value, this.idle);\n    }\n    if (!this.idle && checkIdle(this._active)) {\n      becomeIdle(this);\n    }\n  }\n  _get() {\n    const inputs = is14.arr(this.source) ? this.source.map(getFluidValue3) : toArray5(getFluidValue3(this.source));\n    return this.calc(...inputs);\n  }\n  _start() {\n    if (this.idle && !checkIdle(this._active)) {\n      this.idle = false;\n      each10(getPayload2(this), (node) => {\n        node.done = false;\n      });\n      if (G6.skipAnimation) {\n        raf5.batchedUpdates(() => this.advance());\n        becomeIdle(this);\n      } else {\n        frameLoop3.start(this);\n      }\n    }\n  }\n  // Observe our sources only when we're observed.\n  _attach() {\n    let priority = 1;\n    each10(toArray5(this.source), (source) => {\n      if (hasFluidValue2(source)) {\n        addFluidObserver3(source, this);\n      }\n      if (isFrameValue(source)) {\n        if (!source.idle) {\n          this._active.add(source);\n        }\n        priority = Math.max(priority, source.priority + 1);\n      }\n    });\n    this.priority = priority;\n    this._start();\n  }\n  // Stop observing our sources once we have no observers.\n  _detach() {\n    each10(toArray5(this.source), (source) => {\n      if (hasFluidValue2(source)) {\n        removeFluidObserver2(source, this);\n      }\n    });\n    this._active.clear();\n    becomeIdle(this);\n  }\n  /** @internal */\n  eventObserved(event) {\n    if (event.type == \"change\") {\n      if (event.idle) {\n        this.advance();\n      } else {\n        this._active.add(event.parent);\n        this._start();\n      }\n    } else if (event.type == \"idle\") {\n      this._active.delete(event.parent);\n    } else if (event.type == \"priority\") {\n      this.priority = toArray5(this.source).reduce(\n        (highest, parent) => Math.max(highest, (isFrameValue(parent) ? parent.priority : 0) + 1),\n        0\n      );\n    }\n  }\n};\nfunction isIdle(source) {\n  return source.idle !== false;\n}\nfunction checkIdle(active) {\n  return !active.size || Array.from(active).every(isIdle);\n}\nfunction becomeIdle(self) {\n  if (!self.idle) {\n    self.idle = true;\n    each10(getPayload2(self), (node) => {\n      node.done = true;\n    });\n    callFluidObservers3(self, {\n      type: \"idle\",\n      parent: self\n    });\n  }\n}\n\n// src/interpolate.ts\nvar to = (source, ...args) => new Interpolation(source, args);\nvar interpolate = (source, ...args) => (deprecateInterpolate2(), new Interpolation(source, args));\n\n// src/globals.ts\nimport {\n  Globals,\n  frameLoop as frameLoop4,\n  createStringInterpolator\n} from \"@react-spring/shared\";\nGlobals.assign({\n  createStringInterpolator,\n  to: (source, args) => new Interpolation(source, args)\n});\nvar update = frameLoop4.advance;\n\n// src/index.ts\nimport {\n  createInterpolator as createInterpolator2,\n  useIsomorphicLayoutEffect as useIsomorphicLayoutEffect8,\n  useReducedMotion,\n  easings as easings2\n} from \"@react-spring/shared\";\nexport * from \"@react-spring/types\";\nexport {\n  BailSignal,\n  Controller,\n  FrameValue,\n  Globals,\n  Interpolation,\n  Spring,\n  SpringContext,\n  SpringRef,\n  SpringValue,\n  Trail,\n  Transition,\n  config,\n  createInterpolator2 as createInterpolator,\n  easings2 as easings,\n  inferTo,\n  interpolate,\n  to,\n  update,\n  useChain,\n  useInView,\n  useIsomorphicLayoutEffect8 as useIsomorphicLayoutEffect,\n  useReducedMotion,\n  useResize,\n  useScroll,\n  useSpring,\n  useSpringRef,\n  useSpringValue,\n  useSprings,\n  useTrail,\n  useTransition\n};\n//# sourceMappingURL=react-spring_core.modern.mjs.map","// src/index.ts\nimport { Globals } from \"@react-spring/core\";\nimport { unstable_batchedUpdates } from \"react-dom\";\nimport { createStringInterpolator, colors } from \"@react-spring/shared\";\nimport { createHost } from \"@react-spring/animated\";\n\n// src/applyAnimatedValues.ts\nvar isCustomPropRE = /^--/;\nfunction dangerousStyleValue(name, value) {\n  if (value == null || typeof value === \"boolean\" || value === \"\")\n    return \"\";\n  if (typeof value === \"number\" && value !== 0 && !isCustomPropRE.test(name) && !(isUnitlessNumber.hasOwnProperty(name) && isUnitlessNumber[name]))\n    return value + \"px\";\n  return (\"\" + value).trim();\n}\nvar attributeCache = {};\nfunction applyAnimatedValues(instance, props) {\n  if (!instance.nodeType || !instance.setAttribute) {\n    return false;\n  }\n  const isFilterElement = instance.nodeName === \"filter\" || instance.parentNode && instance.parentNode.nodeName === \"filter\";\n  const {\n    className,\n    style,\n    children,\n    scrollTop,\n    scrollLeft,\n    viewBox,\n    ...attributes\n  } = props;\n  const values = Object.values(attributes);\n  const names = Object.keys(attributes).map(\n    (name) => isFilterElement || instance.hasAttribute(name) ? name : attributeCache[name] || (attributeCache[name] = name.replace(\n      /([A-Z])/g,\n      // Attributes are written in dash case\n      (n) => \"-\" + n.toLowerCase()\n    ))\n  );\n  if (children !== void 0) {\n    instance.textContent = children;\n  }\n  for (const name in style) {\n    if (style.hasOwnProperty(name)) {\n      const value = dangerousStyleValue(name, style[name]);\n      if (isCustomPropRE.test(name)) {\n        instance.style.setProperty(name, value);\n      } else {\n        instance.style[name] = value;\n      }\n    }\n  }\n  names.forEach((name, i) => {\n    instance.setAttribute(name, values[i]);\n  });\n  if (className !== void 0) {\n    instance.className = className;\n  }\n  if (scrollTop !== void 0) {\n    instance.scrollTop = scrollTop;\n  }\n  if (scrollLeft !== void 0) {\n    instance.scrollLeft = scrollLeft;\n  }\n  if (viewBox !== void 0) {\n    instance.setAttribute(\"viewBox\", viewBox);\n  }\n}\nvar isUnitlessNumber = {\n  animationIterationCount: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  columns: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowSpan: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnSpan: true,\n  gridColumnStart: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n  // SVG-related properties\n  fillOpacity: true,\n  floodOpacity: true,\n  stopOpacity: true,\n  strokeDasharray: true,\n  strokeDashoffset: true,\n  strokeMiterlimit: true,\n  strokeOpacity: true,\n  strokeWidth: true\n};\nvar prefixKey = (prefix, key) => prefix + key.charAt(0).toUpperCase() + key.substring(1);\nvar prefixes = [\"Webkit\", \"Ms\", \"Moz\", \"O\"];\nisUnitlessNumber = Object.keys(isUnitlessNumber).reduce((acc, prop) => {\n  prefixes.forEach((prefix) => acc[prefixKey(prefix, prop)] = acc[prop]);\n  return acc;\n}, isUnitlessNumber);\n\n// src/AnimatedStyle.ts\nimport { AnimatedObject } from \"@react-spring/animated\";\nimport {\n  is,\n  each,\n  toArray,\n  eachProp,\n  FluidValue,\n  getFluidValue,\n  callFluidObservers,\n  hasFluidValue,\n  addFluidObserver,\n  removeFluidObserver\n} from \"@react-spring/shared\";\nvar domTransforms = /^(matrix|translate|scale|rotate|skew)/;\nvar pxTransforms = /^(translate)/;\nvar degTransforms = /^(rotate|skew)/;\nvar addUnit = (value, unit) => is.num(value) && value !== 0 ? value + unit : value;\nvar isValueIdentity = (value, id) => is.arr(value) ? value.every((v) => isValueIdentity(v, id)) : is.num(value) ? value === id : parseFloat(value) === id;\nvar AnimatedStyle = class extends AnimatedObject {\n  constructor({ x, y, z, ...style }) {\n    const inputs = [];\n    const transforms = [];\n    if (x || y || z) {\n      inputs.push([x || 0, y || 0, z || 0]);\n      transforms.push((xyz) => [\n        `translate3d(${xyz.map((v) => addUnit(v, \"px\")).join(\",\")})`,\n        // prettier-ignore\n        isValueIdentity(xyz, 0)\n      ]);\n    }\n    eachProp(style, (value, key) => {\n      if (key === \"transform\") {\n        inputs.push([value || \"\"]);\n        transforms.push((transform) => [transform, transform === \"\"]);\n      } else if (domTransforms.test(key)) {\n        delete style[key];\n        if (is.und(value))\n          return;\n        const unit = pxTransforms.test(key) ? \"px\" : degTransforms.test(key) ? \"deg\" : \"\";\n        inputs.push(toArray(value));\n        transforms.push(\n          key === \"rotate3d\" ? ([x2, y2, z2, deg]) => [\n            `rotate3d(${x2},${y2},${z2},${addUnit(deg, unit)})`,\n            isValueIdentity(deg, 0)\n          ] : (input) => [\n            `${key}(${input.map((v) => addUnit(v, unit)).join(\",\")})`,\n            isValueIdentity(input, key.startsWith(\"scale\") ? 1 : 0)\n          ]\n        );\n      }\n    });\n    if (inputs.length) {\n      style.transform = new FluidTransform(inputs, transforms);\n    }\n    super(style);\n  }\n};\nvar FluidTransform = class extends FluidValue {\n  constructor(inputs, transforms) {\n    super();\n    this.inputs = inputs;\n    this.transforms = transforms;\n    this._value = null;\n  }\n  get() {\n    return this._value || (this._value = this._get());\n  }\n  _get() {\n    let transform = \"\";\n    let identity = true;\n    each(this.inputs, (input, i) => {\n      const arg1 = getFluidValue(input[0]);\n      const [t, id] = this.transforms[i](\n        is.arr(arg1) ? arg1 : input.map(getFluidValue)\n      );\n      transform += \" \" + t;\n      identity = identity && id;\n    });\n    return identity ? \"none\" : transform;\n  }\n  // Start observing our inputs once we have an observer.\n  observerAdded(count) {\n    if (count == 1)\n      each(\n        this.inputs,\n        (input) => each(\n          input,\n          (value) => hasFluidValue(value) && addFluidObserver(value, this)\n        )\n      );\n  }\n  // Stop observing our inputs once we have no observers.\n  observerRemoved(count) {\n    if (count == 0)\n      each(\n        this.inputs,\n        (input) => each(\n          input,\n          (value) => hasFluidValue(value) && removeFluidObserver(value, this)\n        )\n      );\n  }\n  eventObserved(event) {\n    if (event.type == \"change\") {\n      this._value = null;\n    }\n    callFluidObservers(this, event);\n  }\n};\n\n// src/primitives.ts\nvar primitives = [\n  \"a\",\n  \"abbr\",\n  \"address\",\n  \"area\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"base\",\n  \"bdi\",\n  \"bdo\",\n  \"big\",\n  \"blockquote\",\n  \"body\",\n  \"br\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"cite\",\n  \"code\",\n  \"col\",\n  \"colgroup\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"dialog\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"embed\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"img\",\n  \"input\",\n  \"ins\",\n  \"kbd\",\n  \"keygen\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"map\",\n  \"mark\",\n  \"menu\",\n  \"menuitem\",\n  \"meta\",\n  \"meter\",\n  \"nav\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"param\",\n  \"picture\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"rp\",\n  \"rt\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"small\",\n  \"source\",\n  \"span\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\",\n  \"wbr\",\n  // SVG\n  \"circle\",\n  \"clipPath\",\n  \"defs\",\n  \"ellipse\",\n  \"foreignObject\",\n  \"g\",\n  \"image\",\n  \"line\",\n  \"linearGradient\",\n  \"mask\",\n  \"path\",\n  \"pattern\",\n  \"polygon\",\n  \"polyline\",\n  \"radialGradient\",\n  \"rect\",\n  \"stop\",\n  \"svg\",\n  \"text\",\n  \"tspan\"\n];\n\n// src/index.ts\nexport * from \"@react-spring/core\";\nGlobals.assign({\n  batchedUpdates: unstable_batchedUpdates,\n  createStringInterpolator,\n  colors\n});\nvar host = createHost(primitives, {\n  applyAnimatedValues,\n  createAnimatedStyle: (style) => new AnimatedStyle(style),\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getComponentProps: ({ scrollTop, scrollLeft, ...props }) => props\n});\nvar animated = host.animated;\nexport {\n  animated as a,\n  animated\n};\n//# sourceMappingURL=react-spring_web.modern.mjs.map","// NB: This function can still return unsafe HTML\nexport const unescapeHTML = (html: string) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = html\n    .replace(/<br\\s*\\/?>/g, '\\n')\n    .replace(/<\\/p><p>/g, '\\n\\n')\n    .replace(/<[^>]*>/g, '');\n  return wrapper.textContent;\n};\n","/**\n * Tries Notification.requestPermission, console warning instead of rejecting on error.\n * @param callback Runs with the permission result on completion.\n */\nexport const requestNotificationPermission = async (\n  callback: NotificationPermissionCallback,\n) => {\n  try {\n    callback(await Notification.requestPermission());\n  } catch (error) {\n    console.warn(error);\n  }\n};\n","// so it doesn't throw if no window or matchMedia\r\nvar w = typeof window !== 'undefined' ? window : { screen: {}, navigator: {} };\r\nvar matchMedia = (w.matchMedia || (function () { return ({ matches: false }); })).bind(w);\r\n// passive events test\r\n// adapted from https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\r\nvar passiveOptionAccessed = false;\r\nvar options = {\r\n    get passive() {\r\n        return (passiveOptionAccessed = true);\r\n    },\r\n};\r\n// have to set and remove a no-op listener instead of null\r\n// (which was used previously), because Edge v15 throws an error\r\n// when providing a null callback.\r\n// https://github.com/rafgraph/detect-passive-events/pull/3\r\n// eslint-disable-next-line @typescript-eslint/no-empty-function\r\nvar noop = function () { };\r\nw.addEventListener && w.addEventListener('p', noop, options);\r\nw.removeEventListener && w.removeEventListener('p', noop, false);\r\nvar supportsPassiveEvents = passiveOptionAccessed;\r\nvar supportsPointerEvents = 'PointerEvent' in w;\r\nvar onTouchStartInWindow = 'ontouchstart' in w;\r\nvar touchEventInWindow = 'TouchEvent' in w;\r\n// onTouchStartInWindow is the old-old-legacy way to determine a touch device\r\n// and many websites interpreted it to mean that the device is a touch only phone,\r\n// so today browsers on a desktop/laptop computer with a touch screen (primary input mouse)\r\n// have onTouchStartInWindow as false (to prevent from being confused with a\r\n// touchOnly phone) even though they support the TouchEvents API, so need to check\r\n// both onTouchStartInWindow and touchEventInWindow for TouchEvent support,\r\n// however, some browsers (chromium) support the TouchEvents API even when running on\r\n// a mouse only device (touchEventInWindow true, but onTouchStartInWindow false)\r\n// so the touchEventInWindow check needs to include an coarse pointer media query\r\nvar supportsTouchEvents = onTouchStartInWindow ||\r\n    (touchEventInWindow && matchMedia('(any-pointer: coarse)').matches);\r\nvar hasTouch = (w.navigator.maxTouchPoints || 0) > 0 || supportsTouchEvents;\r\n// userAgent is used as a backup to correct for known device/browser bugs\r\n// and when the browser doesn't support interaction media queries (pointer and hover)\r\n// see https://caniuse.com/css-media-interaction\r\nvar userAgent = w.navigator.userAgent || '';\r\n// iPads now support a mouse that can hover, however the media query interaction\r\n// feature results always say iPads only have a coarse pointer that can't hover\r\n// even when a mouse is connected (anyFine and anyHover are always false),\r\n// this unfortunately indicates a touch only device but iPads should\r\n// be classified as a hybrid device, so determine if it is an iPad\r\n// to indicate it should be treated as a hybrid device with anyHover true\r\nvar isIPad = matchMedia('(pointer: coarse)').matches &&\r\n    // both iPad and iPhone can \"request desktop site\", which sets the userAgent to Macintosh\r\n    // so need to check both userAgents to determine if it is an iOS device\r\n    // and screen size to separate iPad from iPhone\r\n    /iPad|Macintosh/.test(userAgent) &&\r\n    Math.min(w.screen.width || 0, w.screen.height || 0) >= 768;\r\nvar hasCoarsePrimaryPointer = (matchMedia('(pointer: coarse)').matches ||\r\n    // if the pointer is not coarse and not fine then the browser doesn't support\r\n    // interaction media queries (see https://caniuse.com/css-media-interaction)\r\n    // so if it has onTouchStartInWindow assume it has a coarse primary pointer\r\n    (!matchMedia('(pointer: fine)').matches && onTouchStartInWindow)) &&\r\n    // bug in firefox (as of v81) on hybrid windows devices where the interaction media queries\r\n    // always indicate a touch only device (only has a coarse pointer that can't hover)\r\n    // so assume that the primary pointer is not coarse for firefox windows\r\n    !/Windows.*Firefox/.test(userAgent);\r\nvar hasAnyHoverOrAnyFinePointer = matchMedia('(any-pointer: fine)').matches ||\r\n    matchMedia('(any-hover: hover)').matches ||\r\n    // iPads might have an input device that can hover, so assume it has anyHover\r\n    isIPad ||\r\n    // if no onTouchStartInWindow then the browser is indicating that it is not a touch only device\r\n    // see above note for supportsTouchEvents\r\n    !onTouchStartInWindow;\r\n// a hybrid device is one that both hasTouch and\r\n// any input can hover or has a fine pointer, or the primary pointer is not coarse\r\n// if it's not a hybrid, then if it hasTouch it's touchOnly, otherwise it's mouseOnly\r\nvar deviceType = hasTouch && (hasAnyHoverOrAnyFinePointer || !hasCoarsePrimaryPointer)\r\n    ? 'hybrid'\r\n    : hasTouch\r\n        ? 'touchOnly'\r\n        : 'mouseOnly';\r\nvar primaryInput = deviceType === 'mouseOnly'\r\n    ? 'mouse'\r\n    : deviceType === 'touchOnly'\r\n        ? 'touch'\r\n        : // if the device is a hybrid, then if the primary pointer is coarse\r\n            // assume the primaryInput is touch, otherwise assume it's mouse\r\n            hasCoarsePrimaryPointer\r\n                ? 'touch'\r\n                : 'mouse';\n\nexport { deviceType, primaryInput, supportsPassiveEvents, supportsPointerEvents, supportsTouchEvents };\n//# sourceMappingURL=detect-it.esm.js.map\n","import { supportsPassiveEvents } from 'detect-passive-events';\n\nimport { forceSingleColumn, hasMultiColumnPath } from './initial_state';\n\nconst LAYOUT_BREAKPOINT = 630;\n\nexport const isMobile = (width: number) => width <= LAYOUT_BREAKPOINT;\n\nexport const transientSingleColumn = !forceSingleColumn && !hasMultiColumnPath;\n\nexport type LayoutType = 'mobile' | 'single-column' | 'multi-column';\nexport const layoutFromWindow = (): LayoutType => {\n  if (isMobile(window.innerWidth)) {\n    return 'mobile';\n  } else if (!forceSingleColumn && !transientSingleColumn) {\n    return 'multi-column';\n  } else {\n    return 'single-column';\n  }\n};\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nlet userTouching = false;\n\nconst touchListener = () => {\n  userTouching = true;\n\n  window.removeEventListener('touchstart', touchListener);\n};\n\nwindow.addEventListener('touchstart', touchListener, listenerOptions);\n\nexport const isUserTouching = () => userTouching;\n","import type { PropsWithChildren } from 'react';\nimport type React from 'react';\n\nimport { Router as OriginalRouter, useHistory } from 'react-router';\n\nimport type {\n  LocationDescriptor,\n  LocationDescriptorObject,\n  Path,\n} from 'history';\nimport { createBrowserHistory } from 'history';\n\nimport { layoutFromWindow } from 'mastodon/is_mobile';\nimport { isDevelopment } from 'mastodon/utils/environment';\n\ninterface MastodonLocationState {\n  fromMastodon?: boolean;\n  mastodonModalKey?: string;\n}\n\ntype LocationState = MastodonLocationState | null | undefined;\n\ntype HistoryPath = Path | LocationDescriptor<LocationState>;\n\nexport const browserHistory = createBrowserHistory<LocationState>();\nconst originalPush = browserHistory.push.bind(browserHistory);\nconst originalReplace = browserHistory.replace.bind(browserHistory);\n\nexport function useAppHistory() {\n  return useHistory<LocationState>();\n}\n\nfunction normalizePath(\n  path: HistoryPath,\n  state?: LocationState,\n): LocationDescriptorObject<LocationState> {\n  const location = typeof path === 'string' ? { pathname: path } : { ...path };\n\n  if (location.state === undefined && state !== undefined) {\n    location.state = state;\n  } else if (\n    location.state !== undefined &&\n    state !== undefined &&\n    isDevelopment()\n  ) {\n    // eslint-disable-next-line no-console\n    console.log(\n      'You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored',\n    );\n  }\n\n  if (\n    layoutFromWindow() === 'multi-column' &&\n    location.pathname &&\n    !location.pathname.startsWith('/deck')\n  ) {\n    location.pathname = `/deck${location.pathname}`;\n  }\n\n  return location;\n}\n\nbrowserHistory.push = (path: HistoryPath, state?: MastodonLocationState) => {\n  const location = normalizePath(path, state);\n\n  location.state = location.state ?? {};\n  location.state.fromMastodon = true;\n\n  originalPush(location);\n};\n\nbrowserHistory.replace = (path: HistoryPath, state?: MastodonLocationState) => {\n  const location = normalizePath(path, state);\n\n  if (!location.pathname) return;\n\n  if (browserHistory.location.state?.fromMastodon) {\n    location.state = location.state ?? {};\n    location.state.fromMastodon = true;\n  }\n\n  originalReplace(location);\n};\n\nexport const Router: React.FC<PropsWithChildren> = ({ children }) => {\n  return <OriginalRouter history={browserHistory}>{children}</OriginalRouter>;\n};\n","import { debounce } from 'lodash';\n\nimport type { AppDispatch } from 'mastodon/store';\n\nexport const debounceWithDispatchAndArguments = <T>(\n  fn: (dispatch: AppDispatch, ...args: T[]) => void,\n  { delay = 100 },\n) => {\n  let argumentBuffer: T[] = [];\n  let dispatchBuffer: AppDispatch;\n\n  const wrapped = debounce(() => {\n    const tmpBuffer = argumentBuffer;\n    argumentBuffer = [];\n    fn(dispatchBuffer, ...tmpBuffer);\n  }, delay);\n\n  return (dispatch: AppDispatch, ...args: T[]) => {\n    dispatchBuffer = dispatch;\n    argumentBuffer.push(...args);\n    wrapped();\n  };\n};\n","// src/utils/formatProdErrorMessage.ts\nfunction formatProdErrorMessage(code) {\n  return `Minified Redux error #${code}; visit https://redux.js.org/Errors?code=${code} for the full message or use the non-minified dev environment for full errors. `;\n}\n\n// src/utils/symbol-observable.ts\nvar $$observable = /* @__PURE__ */ (() => typeof Symbol === \"function\" && Symbol.observable || \"@@observable\")();\nvar symbol_observable_default = $$observable;\n\n// src/utils/actionTypes.ts\nvar randomString = () => Math.random().toString(36).substring(7).split(\"\").join(\".\");\nvar ActionTypes = {\n  INIT: `@@redux/INIT${/* @__PURE__ */ randomString()}`,\n  REPLACE: `@@redux/REPLACE${/* @__PURE__ */ randomString()}`,\n  PROBE_UNKNOWN_ACTION: () => `@@redux/PROBE_UNKNOWN_ACTION${randomString()}`\n};\nvar actionTypes_default = ActionTypes;\n\n// src/utils/isPlainObject.ts\nfunction isPlainObject(obj) {\n  if (typeof obj !== \"object\" || obj === null)\n    return false;\n  let proto = obj;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(obj) === proto || Object.getPrototypeOf(obj) === null;\n}\n\n// src/utils/kindOf.ts\nfunction miniKindOf(val) {\n  if (val === void 0)\n    return \"undefined\";\n  if (val === null)\n    return \"null\";\n  const type = typeof val;\n  switch (type) {\n    case \"boolean\":\n    case \"string\":\n    case \"number\":\n    case \"symbol\":\n    case \"function\": {\n      return type;\n    }\n  }\n  if (Array.isArray(val))\n    return \"array\";\n  if (isDate(val))\n    return \"date\";\n  if (isError(val))\n    return \"error\";\n  const constructorName = ctorName(val);\n  switch (constructorName) {\n    case \"Symbol\":\n    case \"Promise\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n    case \"Map\":\n    case \"Set\":\n      return constructorName;\n  }\n  return Object.prototype.toString.call(val).slice(8, -1).toLowerCase().replace(/\\s/g, \"\");\n}\nfunction ctorName(val) {\n  return typeof val.constructor === \"function\" ? val.constructor.name : null;\n}\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === \"string\" && val.constructor && typeof val.constructor.stackTraceLimit === \"number\";\n}\nfunction isDate(val) {\n  if (val instanceof Date)\n    return true;\n  return typeof val.toDateString === \"function\" && typeof val.getDate === \"function\" && typeof val.setDate === \"function\";\n}\nfunction kindOf(val) {\n  let typeOfVal = typeof val;\n  if (process.env.NODE_ENV !== \"production\") {\n    typeOfVal = miniKindOf(val);\n  }\n  return typeOfVal;\n}\n\n// src/createStore.ts\nfunction createStore(reducer, preloadedState, enhancer) {\n  if (typeof reducer !== \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : `Expected the root reducer to be a function. Instead, received: '${kindOf(reducer)}'`);\n  }\n  if (typeof preloadedState === \"function\" && typeof enhancer === \"function\" || typeof enhancer === \"function\" && typeof arguments[3] === \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : \"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.\");\n  }\n  if (typeof preloadedState === \"function\" && typeof enhancer === \"undefined\") {\n    enhancer = preloadedState;\n    preloadedState = void 0;\n  }\n  if (typeof enhancer !== \"undefined\") {\n    if (typeof enhancer !== \"function\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : `Expected the enhancer to be a function. Instead, received: '${kindOf(enhancer)}'`);\n    }\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n  let currentReducer = reducer;\n  let currentState = preloadedState;\n  let currentListeners = /* @__PURE__ */ new Map();\n  let nextListeners = currentListeners;\n  let listenerIdCounter = 0;\n  let isDispatching = false;\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = /* @__PURE__ */ new Map();\n      currentListeners.forEach((listener, key) => {\n        nextListeners.set(key, listener);\n      });\n    }\n  }\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : \"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.\");\n    }\n    return currentState;\n  }\n  function subscribe(listener) {\n    if (typeof listener !== \"function\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : `Expected the listener to be a function. Instead, received: '${kindOf(listener)}'`);\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : \"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.\");\n    }\n    let isSubscribed = true;\n    ensureCanMutateNextListeners();\n    const listenerId = listenerIdCounter++;\n    nextListeners.set(listenerId, listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : \"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.\");\n      }\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      nextListeners.delete(listenerId);\n      currentListeners = null;\n    };\n  }\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : `Actions must be plain objects. Instead, the actual type was: '${kindOf(action)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);\n    }\n    if (typeof action.type === \"undefined\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n    if (typeof action.type !== \"string\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(17) : `Action \"type\" property must be a string. Instead, the actual type was: '${kindOf(action.type)}'. Value was: '${action.type}' (stringified)`);\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : \"Reducers may not dispatch actions.\");\n    }\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n    const listeners = currentListeners = nextListeners;\n    listeners.forEach((listener) => {\n      listener();\n    });\n    return action;\n  }\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== \"function\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : `Expected the nextReducer to be a function. Instead, received: '${kindOf(nextReducer)}`);\n    }\n    currentReducer = nextReducer;\n    dispatch({\n      type: actionTypes_default.REPLACE\n    });\n  }\n  function observable() {\n    const outerSubscribe = subscribe;\n    return {\n      /**\n       * The minimal observable subscription method.\n       * @param observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe(observer) {\n        if (typeof observer !== \"object\" || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : `Expected the observer to be an object. Instead, received: '${kindOf(observer)}'`);\n        }\n        function observeState() {\n          const observerAsObserver = observer;\n          if (observerAsObserver.next) {\n            observerAsObserver.next(getState());\n          }\n        }\n        observeState();\n        const unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe\n        };\n      },\n      [symbol_observable_default]() {\n        return this;\n      }\n    };\n  }\n  dispatch({\n    type: actionTypes_default.INIT\n  });\n  const store = {\n    dispatch,\n    subscribe,\n    getState,\n    replaceReducer,\n    [symbol_observable_default]: observable\n  };\n  return store;\n}\nfunction legacy_createStore(reducer, preloadedState, enhancer) {\n  return createStore(reducer, preloadedState, enhancer);\n}\n\n// src/utils/warning.ts\nfunction warning(message) {\n  if (typeof console !== \"undefined\" && typeof console.error === \"function\") {\n    console.error(message);\n  }\n  try {\n    throw new Error(message);\n  } catch (e) {\n  }\n}\n\n// src/combineReducers.ts\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  const reducerKeys = Object.keys(reducers);\n  const argumentName = action && action.type === actionTypes_default.INIT ? \"preloadedState argument passed to createStore\" : \"previous state received by the reducer\";\n  if (reducerKeys.length === 0) {\n    return \"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.\";\n  }\n  if (!isPlainObject(inputState)) {\n    return `The ${argumentName} has unexpected type of \"${kindOf(inputState)}\". Expected argument to be an object with the following keys: \"${reducerKeys.join('\", \"')}\"`;\n  }\n  const unexpectedKeys = Object.keys(inputState).filter((key) => !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key]);\n  unexpectedKeys.forEach((key) => {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === actionTypes_default.REPLACE)\n    return;\n  if (unexpectedKeys.length > 0) {\n    return `Unexpected ${unexpectedKeys.length > 1 ? \"keys\" : \"key\"} \"${unexpectedKeys.join('\", \"')}\" found in ${argumentName}. Expected to find one of the known reducer keys instead: \"${reducerKeys.join('\", \"')}\". Unexpected keys will be ignored.`;\n  }\n}\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach((key) => {\n    const reducer = reducers[key];\n    const initialState = reducer(void 0, {\n      type: actionTypes_default.INIT\n    });\n    if (typeof initialState === \"undefined\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : `The slice reducer for key \"${key}\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);\n    }\n    if (typeof reducer(void 0, {\n      type: actionTypes_default.PROBE_UNKNOWN_ACTION()\n    }) === \"undefined\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : `The slice reducer for key \"${key}\" returned undefined when probed with a random type. Don't try to handle '${actionTypes_default.INIT}' or other actions in \"redux/*\" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.`);\n    }\n  });\n}\nfunction combineReducers(reducers) {\n  const reducerKeys = Object.keys(reducers);\n  const finalReducers = {};\n  for (let i = 0; i < reducerKeys.length; i++) {\n    const key = reducerKeys[i];\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof reducers[key] === \"undefined\") {\n        warning(`No reducer provided for key \"${key}\"`);\n      }\n    }\n    if (typeof reducers[key] === \"function\") {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  const finalReducerKeys = Object.keys(finalReducers);\n  let unexpectedKeyCache;\n  if (process.env.NODE_ENV !== \"production\") {\n    unexpectedKeyCache = {};\n  }\n  let shapeAssertionError;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n  return function combination(state = {}, action) {\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      const warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n    let hasChanged = false;\n    const nextState = {};\n    for (let i = 0; i < finalReducerKeys.length; i++) {\n      const key = finalReducerKeys[i];\n      const reducer = finalReducers[key];\n      const previousStateForKey = state[key];\n      const nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === \"undefined\") {\n        const actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : `When called with an action of type ${actionType ? `\"${String(actionType)}\"` : \"(unknown type)\"}, the slice reducer for key \"${key}\" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.`);\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\n// src/bindActionCreators.ts\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function(...args) {\n    return dispatch(actionCreator.apply(this, args));\n  };\n}\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === \"function\") {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n  if (typeof actionCreators !== \"object\" || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : `bindActionCreators expected an object or a function, but instead received: '${kindOf(actionCreators)}'. Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`);\n  }\n  const boundActionCreators = {};\n  for (const key in actionCreators) {\n    const actionCreator = actionCreators[key];\n    if (typeof actionCreator === \"function\") {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n\n// src/compose.ts\nfunction compose(...funcs) {\n  if (funcs.length === 0) {\n    return (arg) => arg;\n  }\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n  return funcs.reduce((a, b) => (...args) => a(b(...args)));\n}\n\n// src/applyMiddleware.ts\nfunction applyMiddleware(...middlewares) {\n  return (createStore2) => (reducer, preloadedState) => {\n    const store = createStore2(reducer, preloadedState);\n    let dispatch = () => {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : \"Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.\");\n    };\n    const middlewareAPI = {\n      getState: store.getState,\n      dispatch: (action, ...args) => dispatch(action, ...args)\n    };\n    const chain = middlewares.map((middleware) => middleware(middlewareAPI));\n    dispatch = compose(...chain)(store.dispatch);\n    return {\n      ...store,\n      dispatch\n    };\n  };\n}\n\n// src/utils/isAction.ts\nfunction isAction(action) {\n  return isPlainObject(action) && \"type\" in action && typeof action.type === \"string\";\n}\nexport {\n  actionTypes_default as __DO_NOT_USE__ActionTypes,\n  applyMiddleware,\n  bindActionCreators,\n  combineReducers,\n  compose,\n  createStore,\n  isAction,\n  isPlainObject,\n  legacy_createStore\n};\n//# sourceMappingURL=redux.mjs.map","// src/utils/env.ts\nvar NOTHING = Symbol.for(\"immer-nothing\");\nvar DRAFTABLE = Symbol.for(\"immer-draftable\");\nvar DRAFT_STATE = Symbol.for(\"immer-state\");\n\n// src/utils/errors.ts\nvar errors = process.env.NODE_ENV !== \"production\" ? [\n  // All error codes, starting by 0:\n  function(plugin) {\n    return `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`;\n  },\n  function(thing) {\n    return `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`;\n  },\n  \"This object has been frozen and should not be mutated\",\n  function(data) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + data;\n  },\n  \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  \"Immer forbids circular references\",\n  \"The first or second argument to `produce` must be a function\",\n  \"The third argument to `produce` must be a function or undefined\",\n  \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  function(thing) {\n    return `'current' expects a draft, got: ${thing}`;\n  },\n  \"Object.defineProperty() cannot be used on an Immer draft\",\n  \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  \"Immer only supports deleting array indices\",\n  \"Immer only supports setting array indices and the 'length' property\",\n  function(thing) {\n    return `'original' expects a draft, got: ${thing}`;\n  }\n  // Note: if more errors are added, the errorOffset in Patches.ts should be increased\n  // See Patches.ts for additional errors\n] : [];\nfunction die(error, ...args) {\n  if (process.env.NODE_ENV !== \"production\") {\n    const e = errors[error];\n    const msg = typeof e === \"function\" ? e.apply(null, args) : e;\n    throw new Error(`[Immer] ${msg}`);\n  }\n  throw new Error(\n    `[Immer] minified error nr: ${error}. Full error at: https://bit.ly/3cXEKWf`\n  );\n}\n\n// src/utils/common.ts\nvar getPrototypeOf = Object.getPrototypeOf;\nfunction isDraft(value) {\n  return !!value && !!value[DRAFT_STATE];\n}\nfunction isDraftable(value) {\n  if (!value)\n    return false;\n  return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!value.constructor?.[DRAFTABLE] || isMap(value) || isSet(value);\n}\nvar objectCtorString = Object.prototype.constructor.toString();\nfunction isPlainObject(value) {\n  if (!value || typeof value !== \"object\")\n    return false;\n  const proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  const Ctor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  if (Ctor === Object)\n    return true;\n  return typeof Ctor == \"function\" && Function.toString.call(Ctor) === objectCtorString;\n}\nfunction original(value) {\n  if (!isDraft(value))\n    die(15, value);\n  return value[DRAFT_STATE].base_;\n}\nfunction each(obj, iter) {\n  if (getArchtype(obj) === 0 /* Object */) {\n    Reflect.ownKeys(obj).forEach((key) => {\n      iter(key, obj[key], obj);\n    });\n  } else {\n    obj.forEach((entry, index) => iter(index, entry, obj));\n  }\n}\nfunction getArchtype(thing) {\n  const state = thing[DRAFT_STATE];\n  return state ? state.type_ : Array.isArray(thing) ? 1 /* Array */ : isMap(thing) ? 2 /* Map */ : isSet(thing) ? 3 /* Set */ : 0 /* Object */;\n}\nfunction has(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);\n}\nfunction get(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.get(prop) : thing[prop];\n}\nfunction set(thing, propOrOldValue, value) {\n  const t = getArchtype(thing);\n  if (t === 2 /* Map */)\n    thing.set(propOrOldValue, value);\n  else if (t === 3 /* Set */) {\n    thing.add(value);\n  } else\n    thing[propOrOldValue] = value;\n}\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction isMap(target) {\n  return target instanceof Map;\n}\nfunction isSet(target) {\n  return target instanceof Set;\n}\nfunction latest(state) {\n  return state.copy_ || state.base_;\n}\nfunction shallowCopy(base, strict) {\n  if (isMap(base)) {\n    return new Map(base);\n  }\n  if (isSet(base)) {\n    return new Set(base);\n  }\n  if (Array.isArray(base))\n    return Array.prototype.slice.call(base);\n  const isPlain = isPlainObject(base);\n  if (strict === true || strict === \"class_only\" && !isPlain) {\n    const descriptors = Object.getOwnPropertyDescriptors(base);\n    delete descriptors[DRAFT_STATE];\n    let keys = Reflect.ownKeys(descriptors);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const desc = descriptors[key];\n      if (desc.writable === false) {\n        desc.writable = true;\n        desc.configurable = true;\n      }\n      if (desc.get || desc.set)\n        descriptors[key] = {\n          configurable: true,\n          writable: true,\n          // could live with !!desc.set as well here...\n          enumerable: desc.enumerable,\n          value: base[key]\n        };\n    }\n    return Object.create(getPrototypeOf(base), descriptors);\n  } else {\n    const proto = getPrototypeOf(base);\n    if (proto !== null && isPlain) {\n      return { ...base };\n    }\n    const obj = Object.create(proto);\n    return Object.assign(obj, base);\n  }\n}\nfunction freeze(obj, deep = false) {\n  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))\n    return obj;\n  if (getArchtype(obj) > 1) {\n    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;\n  }\n  Object.freeze(obj);\n  if (deep)\n    Object.entries(obj).forEach(([key, value]) => freeze(value, true));\n  return obj;\n}\nfunction dontMutateFrozenCollections() {\n  die(2);\n}\nfunction isFrozen(obj) {\n  return Object.isFrozen(obj);\n}\n\n// src/utils/plugins.ts\nvar plugins = {};\nfunction getPlugin(pluginKey) {\n  const plugin = plugins[pluginKey];\n  if (!plugin) {\n    die(0, pluginKey);\n  }\n  return plugin;\n}\nfunction loadPlugin(pluginKey, implementation) {\n  if (!plugins[pluginKey])\n    plugins[pluginKey] = implementation;\n}\n\n// src/core/scope.ts\nvar currentScope;\nfunction getCurrentScope() {\n  return currentScope;\n}\nfunction createScope(parent_, immer_) {\n  return {\n    drafts_: [],\n    parent_,\n    immer_,\n    // Whenever the modified draft contains a draft from another scope, we\n    // need to prevent auto-freezing so the unowned draft can be finalized.\n    canAutoFreeze_: true,\n    unfinalizedDrafts_: 0\n  };\n}\nfunction usePatchesInScope(scope, patchListener) {\n  if (patchListener) {\n    getPlugin(\"Patches\");\n    scope.patches_ = [];\n    scope.inversePatches_ = [];\n    scope.patchListener_ = patchListener;\n  }\n}\nfunction revokeScope(scope) {\n  leaveScope(scope);\n  scope.drafts_.forEach(revokeDraft);\n  scope.drafts_ = null;\n}\nfunction leaveScope(scope) {\n  if (scope === currentScope) {\n    currentScope = scope.parent_;\n  }\n}\nfunction enterScope(immer2) {\n  return currentScope = createScope(currentScope, immer2);\n}\nfunction revokeDraft(draft) {\n  const state = draft[DRAFT_STATE];\n  if (state.type_ === 0 /* Object */ || state.type_ === 1 /* Array */)\n    state.revoke_();\n  else\n    state.revoked_ = true;\n}\n\n// src/core/finalize.ts\nfunction processResult(result, scope) {\n  scope.unfinalizedDrafts_ = scope.drafts_.length;\n  const baseDraft = scope.drafts_[0];\n  const isReplaced = result !== void 0 && result !== baseDraft;\n  if (isReplaced) {\n    if (baseDraft[DRAFT_STATE].modified_) {\n      revokeScope(scope);\n      die(4);\n    }\n    if (isDraftable(result)) {\n      result = finalize(scope, result);\n      if (!scope.parent_)\n        maybeFreeze(scope, result);\n    }\n    if (scope.patches_) {\n      getPlugin(\"Patches\").generateReplacementPatches_(\n        baseDraft[DRAFT_STATE].base_,\n        result,\n        scope.patches_,\n        scope.inversePatches_\n      );\n    }\n  } else {\n    result = finalize(scope, baseDraft, []);\n  }\n  revokeScope(scope);\n  if (scope.patches_) {\n    scope.patchListener_(scope.patches_, scope.inversePatches_);\n  }\n  return result !== NOTHING ? result : void 0;\n}\nfunction finalize(rootScope, value, path) {\n  if (isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  if (!state) {\n    each(\n      value,\n      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path)\n    );\n    return value;\n  }\n  if (state.scope_ !== rootScope)\n    return value;\n  if (!state.modified_) {\n    maybeFreeze(rootScope, state.base_, true);\n    return state.base_;\n  }\n  if (!state.finalized_) {\n    state.finalized_ = true;\n    state.scope_.unfinalizedDrafts_--;\n    const result = state.copy_;\n    let resultEach = result;\n    let isSet2 = false;\n    if (state.type_ === 3 /* Set */) {\n      resultEach = new Set(result);\n      result.clear();\n      isSet2 = true;\n    }\n    each(\n      resultEach,\n      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path, isSet2)\n    );\n    maybeFreeze(rootScope, result, false);\n    if (path && rootScope.patches_) {\n      getPlugin(\"Patches\").generatePatches_(\n        state,\n        path,\n        rootScope.patches_,\n        rootScope.inversePatches_\n      );\n    }\n  }\n  return state.copy_;\n}\nfunction finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {\n  if (process.env.NODE_ENV !== \"production\" && childValue === targetObject)\n    die(5);\n  if (isDraft(childValue)) {\n    const path = rootPath && parentState && parentState.type_ !== 3 /* Set */ && // Set objects are atomic since they have no keys.\n    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;\n    const res = finalize(rootScope, childValue, path);\n    set(targetObject, prop, res);\n    if (isDraft(res)) {\n      rootScope.canAutoFreeze_ = false;\n    } else\n      return;\n  } else if (targetIsSet) {\n    targetObject.add(childValue);\n  }\n  if (isDraftable(childValue) && !isFrozen(childValue)) {\n    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n      return;\n    }\n    finalize(rootScope, childValue);\n    if ((!parentState || !parentState.scope_.parent_) && typeof prop !== \"symbol\" && Object.prototype.propertyIsEnumerable.call(targetObject, prop))\n      maybeFreeze(rootScope, childValue);\n  }\n}\nfunction maybeFreeze(scope, value, deep = false) {\n  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n    freeze(value, deep);\n  }\n}\n\n// src/core/proxy.ts\nfunction createProxyProxy(base, parent) {\n  const isArray = Array.isArray(base);\n  const state = {\n    type_: isArray ? 1 /* Array */ : 0 /* Object */,\n    // Track which produce call this is associated with.\n    scope_: parent ? parent.scope_ : getCurrentScope(),\n    // True for both shallow and deep changes.\n    modified_: false,\n    // Used during finalization.\n    finalized_: false,\n    // Track which properties have been assigned (true) or deleted (false).\n    assigned_: {},\n    // The parent draft state.\n    parent_: parent,\n    // The base state.\n    base_: base,\n    // The base proxy.\n    draft_: null,\n    // set below\n    // The base copy with any updated values.\n    copy_: null,\n    // Called by the `produce` function.\n    revoke_: null,\n    isManual_: false\n  };\n  let target = state;\n  let traps = objectTraps;\n  if (isArray) {\n    target = [state];\n    traps = arrayTraps;\n  }\n  const { revoke, proxy } = Proxy.revocable(target, traps);\n  state.draft_ = proxy;\n  state.revoke_ = revoke;\n  return proxy;\n}\nvar objectTraps = {\n  get(state, prop) {\n    if (prop === DRAFT_STATE)\n      return state;\n    const source = latest(state);\n    if (!has(source, prop)) {\n      return readPropFromProto(state, source, prop);\n    }\n    const value = source[prop];\n    if (state.finalized_ || !isDraftable(value)) {\n      return value;\n    }\n    if (value === peek(state.base_, prop)) {\n      prepareCopy(state);\n      return state.copy_[prop] = createProxy(value, state);\n    }\n    return value;\n  },\n  has(state, prop) {\n    return prop in latest(state);\n  },\n  ownKeys(state) {\n    return Reflect.ownKeys(latest(state));\n  },\n  set(state, prop, value) {\n    const desc = getDescriptorFromProto(latest(state), prop);\n    if (desc?.set) {\n      desc.set.call(state.draft_, value);\n      return true;\n    }\n    if (!state.modified_) {\n      const current2 = peek(latest(state), prop);\n      const currentState = current2?.[DRAFT_STATE];\n      if (currentState && currentState.base_ === value) {\n        state.copy_[prop] = value;\n        state.assigned_[prop] = false;\n        return true;\n      }\n      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))\n        return true;\n      prepareCopy(state);\n      markChanged(state);\n    }\n    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'\n    (value !== void 0 || prop in state.copy_) || // special case: NaN\n    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))\n      return true;\n    state.copy_[prop] = value;\n    state.assigned_[prop] = true;\n    return true;\n  },\n  deleteProperty(state, prop) {\n    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {\n      state.assigned_[prop] = false;\n      prepareCopy(state);\n      markChanged(state);\n    } else {\n      delete state.assigned_[prop];\n    }\n    if (state.copy_) {\n      delete state.copy_[prop];\n    }\n    return true;\n  },\n  // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n  // the same guarantee in ES5 mode.\n  getOwnPropertyDescriptor(state, prop) {\n    const owner = latest(state);\n    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (!desc)\n      return desc;\n    return {\n      writable: true,\n      configurable: state.type_ !== 1 /* Array */ || prop !== \"length\",\n      enumerable: desc.enumerable,\n      value: owner[prop]\n    };\n  },\n  defineProperty() {\n    die(11);\n  },\n  getPrototypeOf(state) {\n    return getPrototypeOf(state.base_);\n  },\n  setPrototypeOf() {\n    die(12);\n  }\n};\nvar arrayTraps = {};\neach(objectTraps, (key, fn) => {\n  arrayTraps[key] = function() {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\narrayTraps.deleteProperty = function(state, prop) {\n  if (process.env.NODE_ENV !== \"production\" && isNaN(parseInt(prop)))\n    die(13);\n  return arrayTraps.set.call(this, state, prop, void 0);\n};\narrayTraps.set = function(state, prop, value) {\n  if (process.env.NODE_ENV !== \"production\" && prop !== \"length\" && isNaN(parseInt(prop)))\n    die(14);\n  return objectTraps.set.call(this, state[0], prop, value, state[0]);\n};\nfunction peek(draft, prop) {\n  const state = draft[DRAFT_STATE];\n  const source = state ? latest(state) : draft;\n  return source[prop];\n}\nfunction readPropFromProto(state, source, prop) {\n  const desc = getDescriptorFromProto(source, prop);\n  return desc ? `value` in desc ? desc.value : (\n    // This is a very special case, if the prop is a getter defined by the\n    // prototype, we should invoke it with the draft as context!\n    desc.get?.call(state.draft_)\n  ) : void 0;\n}\nfunction getDescriptorFromProto(source, prop) {\n  if (!(prop in source))\n    return void 0;\n  let proto = getPrototypeOf(source);\n  while (proto) {\n    const desc = Object.getOwnPropertyDescriptor(proto, prop);\n    if (desc)\n      return desc;\n    proto = getPrototypeOf(proto);\n  }\n  return void 0;\n}\nfunction markChanged(state) {\n  if (!state.modified_) {\n    state.modified_ = true;\n    if (state.parent_) {\n      markChanged(state.parent_);\n    }\n  }\n}\nfunction prepareCopy(state) {\n  if (!state.copy_) {\n    state.copy_ = shallowCopy(\n      state.base_,\n      state.scope_.immer_.useStrictShallowCopy_\n    );\n  }\n}\n\n// src/core/immerClass.ts\nvar Immer2 = class {\n  constructor(config) {\n    this.autoFreeze_ = true;\n    this.useStrictShallowCopy_ = false;\n    /**\n     * The `produce` function takes a value and a \"recipe function\" (whose\n     * return value often depends on the base state). The recipe function is\n     * free to mutate its first argument however it wants. All mutations are\n     * only ever applied to a __copy__ of the base state.\n     *\n     * Pass only a function to create a \"curried producer\" which relieves you\n     * from passing the recipe function every time.\n     *\n     * Only plain objects and arrays are made mutable. All other objects are\n     * considered uncopyable.\n     *\n     * Note: This function is __bound__ to its `Immer` instance.\n     *\n     * @param {any} base - the initial state\n     * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n     * @param {Function} patchListener - optional function that will be called with all the patches produced here\n     * @returns {any} a new state, or the initial state if nothing was modified\n     */\n    this.produce = (base, recipe, patchListener) => {\n      if (typeof base === \"function\" && typeof recipe !== \"function\") {\n        const defaultBase = recipe;\n        recipe = base;\n        const self = this;\n        return function curriedProduce(base2 = defaultBase, ...args) {\n          return self.produce(base2, (draft) => recipe.call(this, draft, ...args));\n        };\n      }\n      if (typeof recipe !== \"function\")\n        die(6);\n      if (patchListener !== void 0 && typeof patchListener !== \"function\")\n        die(7);\n      let result;\n      if (isDraftable(base)) {\n        const scope = enterScope(this);\n        const proxy = createProxy(base, void 0);\n        let hasError = true;\n        try {\n          result = recipe(proxy);\n          hasError = false;\n        } finally {\n          if (hasError)\n            revokeScope(scope);\n          else\n            leaveScope(scope);\n        }\n        usePatchesInScope(scope, patchListener);\n        return processResult(result, scope);\n      } else if (!base || typeof base !== \"object\") {\n        result = recipe(base);\n        if (result === void 0)\n          result = base;\n        if (result === NOTHING)\n          result = void 0;\n        if (this.autoFreeze_)\n          freeze(result, true);\n        if (patchListener) {\n          const p = [];\n          const ip = [];\n          getPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip);\n          patchListener(p, ip);\n        }\n        return result;\n      } else\n        die(1, base);\n    };\n    this.produceWithPatches = (base, recipe) => {\n      if (typeof base === \"function\") {\n        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));\n      }\n      let patches, inversePatches;\n      const result = this.produce(base, recipe, (p, ip) => {\n        patches = p;\n        inversePatches = ip;\n      });\n      return [result, patches, inversePatches];\n    };\n    if (typeof config?.autoFreeze === \"boolean\")\n      this.setAutoFreeze(config.autoFreeze);\n    if (typeof config?.useStrictShallowCopy === \"boolean\")\n      this.setUseStrictShallowCopy(config.useStrictShallowCopy);\n  }\n  createDraft(base) {\n    if (!isDraftable(base))\n      die(8);\n    if (isDraft(base))\n      base = current(base);\n    const scope = enterScope(this);\n    const proxy = createProxy(base, void 0);\n    proxy[DRAFT_STATE].isManual_ = true;\n    leaveScope(scope);\n    return proxy;\n  }\n  finishDraft(draft, patchListener) {\n    const state = draft && draft[DRAFT_STATE];\n    if (!state || !state.isManual_)\n      die(9);\n    const { scope_: scope } = state;\n    usePatchesInScope(scope, patchListener);\n    return processResult(void 0, scope);\n  }\n  /**\n   * Pass true to automatically freeze all copies created by Immer.\n   *\n   * By default, auto-freezing is enabled.\n   */\n  setAutoFreeze(value) {\n    this.autoFreeze_ = value;\n  }\n  /**\n   * Pass true to enable strict shallow copy.\n   *\n   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.\n   */\n  setUseStrictShallowCopy(value) {\n    this.useStrictShallowCopy_ = value;\n  }\n  applyPatches(base, patches) {\n    let i;\n    for (i = patches.length - 1; i >= 0; i--) {\n      const patch = patches[i];\n      if (patch.path.length === 0 && patch.op === \"replace\") {\n        base = patch.value;\n        break;\n      }\n    }\n    if (i > -1) {\n      patches = patches.slice(i + 1);\n    }\n    const applyPatchesImpl = getPlugin(\"Patches\").applyPatches_;\n    if (isDraft(base)) {\n      return applyPatchesImpl(base, patches);\n    }\n    return this.produce(\n      base,\n      (draft) => applyPatchesImpl(draft, patches)\n    );\n  }\n};\nfunction createProxy(value, parent) {\n  const draft = isMap(value) ? getPlugin(\"MapSet\").proxyMap_(value, parent) : isSet(value) ? getPlugin(\"MapSet\").proxySet_(value, parent) : createProxyProxy(value, parent);\n  const scope = parent ? parent.scope_ : getCurrentScope();\n  scope.drafts_.push(draft);\n  return draft;\n}\n\n// src/core/current.ts\nfunction current(value) {\n  if (!isDraft(value))\n    die(10, value);\n  return currentImpl(value);\n}\nfunction currentImpl(value) {\n  if (!isDraftable(value) || isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  let copy;\n  if (state) {\n    if (!state.modified_)\n      return state.base_;\n    state.finalized_ = true;\n    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);\n  } else {\n    copy = shallowCopy(value, true);\n  }\n  each(copy, (key, childValue) => {\n    set(copy, key, currentImpl(childValue));\n  });\n  if (state) {\n    state.finalized_ = false;\n  }\n  return copy;\n}\n\n// src/plugins/patches.ts\nfunction enablePatches() {\n  const errorOffset = 16;\n  if (process.env.NODE_ENV !== \"production\") {\n    errors.push(\n      'Sets cannot have \"replace\" patches.',\n      function(op) {\n        return \"Unsupported patch operation: \" + op;\n      },\n      function(path) {\n        return \"Cannot apply patch, path doesn't resolve: \" + path;\n      },\n      \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n    );\n  }\n  const REPLACE = \"replace\";\n  const ADD = \"add\";\n  const REMOVE = \"remove\";\n  function generatePatches_(state, basePath, patches, inversePatches) {\n    switch (state.type_) {\n      case 0 /* Object */:\n      case 2 /* Map */:\n        return generatePatchesFromAssigned(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n      case 1 /* Array */:\n        return generateArrayPatches(state, basePath, patches, inversePatches);\n      case 3 /* Set */:\n        return generateSetPatches(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n    }\n  }\n  function generateArrayPatches(state, basePath, patches, inversePatches) {\n    let { base_, assigned_ } = state;\n    let copy_ = state.copy_;\n    if (copy_.length < base_.length) {\n      ;\n      [base_, copy_] = [copy_, base_];\n      [patches, inversePatches] = [inversePatches, patches];\n    }\n    for (let i = 0; i < base_.length; i++) {\n      if (assigned_[i] && copy_[i] !== base_[i]) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REPLACE,\n          path,\n          // Need to maybe clone it, as it can in fact be the original value\n          // due to the base/copy inversion at the start of this function\n          value: clonePatchValueIfNeeded(copy_[i])\n        });\n        inversePatches.push({\n          op: REPLACE,\n          path,\n          value: clonePatchValueIfNeeded(base_[i])\n        });\n      }\n    }\n    for (let i = base_.length; i < copy_.length; i++) {\n      const path = basePath.concat([i]);\n      patches.push({\n        op: ADD,\n        path,\n        // Need to maybe clone it, as it can in fact be the original value\n        // due to the base/copy inversion at the start of this function\n        value: clonePatchValueIfNeeded(copy_[i])\n      });\n    }\n    for (let i = copy_.length - 1; base_.length <= i; --i) {\n      const path = basePath.concat([i]);\n      inversePatches.push({\n        op: REMOVE,\n        path\n      });\n    }\n  }\n  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {\n    const { base_, copy_ } = state;\n    each(state.assigned_, (key, assignedValue) => {\n      const origValue = get(base_, key);\n      const value = get(copy_, key);\n      const op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD;\n      if (origValue === value && op === REPLACE)\n        return;\n      const path = basePath.concat(key);\n      patches.push(op === REMOVE ? { op, path } : { op, path, value });\n      inversePatches.push(\n        op === ADD ? { op: REMOVE, path } : op === REMOVE ? { op: ADD, path, value: clonePatchValueIfNeeded(origValue) } : { op: REPLACE, path, value: clonePatchValueIfNeeded(origValue) }\n      );\n    });\n  }\n  function generateSetPatches(state, basePath, patches, inversePatches) {\n    let { base_, copy_ } = state;\n    let i = 0;\n    base_.forEach((value) => {\n      if (!copy_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REMOVE,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: ADD,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n    i = 0;\n    copy_.forEach((value) => {\n      if (!base_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: ADD,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: REMOVE,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n  }\n  function generateReplacementPatches_(baseValue, replacement, patches, inversePatches) {\n    patches.push({\n      op: REPLACE,\n      path: [],\n      value: replacement === NOTHING ? void 0 : replacement\n    });\n    inversePatches.push({\n      op: REPLACE,\n      path: [],\n      value: baseValue\n    });\n  }\n  function applyPatches_(draft, patches) {\n    patches.forEach((patch) => {\n      const { path, op } = patch;\n      let base = draft;\n      for (let i = 0; i < path.length - 1; i++) {\n        const parentType = getArchtype(base);\n        let p = path[i];\n        if (typeof p !== \"string\" && typeof p !== \"number\") {\n          p = \"\" + p;\n        }\n        if ((parentType === 0 /* Object */ || parentType === 1 /* Array */) && (p === \"__proto__\" || p === \"constructor\"))\n          die(errorOffset + 3);\n        if (typeof base === \"function\" && p === \"prototype\")\n          die(errorOffset + 3);\n        base = get(base, p);\n        if (typeof base !== \"object\")\n          die(errorOffset + 2, path.join(\"/\"));\n      }\n      const type = getArchtype(base);\n      const value = deepClonePatchValue(patch.value);\n      const key = path[path.length - 1];\n      switch (op) {\n        case REPLACE:\n          switch (type) {\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              die(errorOffset);\n            default:\n              return base[key] = value;\n          }\n        case ADD:\n          switch (type) {\n            case 1 /* Array */:\n              return key === \"-\" ? base.push(value) : base.splice(key, 0, value);\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              return base.add(value);\n            default:\n              return base[key] = value;\n          }\n        case REMOVE:\n          switch (type) {\n            case 1 /* Array */:\n              return base.splice(key, 1);\n            case 2 /* Map */:\n              return base.delete(key);\n            case 3 /* Set */:\n              return base.delete(patch.value);\n            default:\n              return delete base[key];\n          }\n        default:\n          die(errorOffset + 1, op);\n      }\n    });\n    return draft;\n  }\n  function deepClonePatchValue(obj) {\n    if (!isDraftable(obj))\n      return obj;\n    if (Array.isArray(obj))\n      return obj.map(deepClonePatchValue);\n    if (isMap(obj))\n      return new Map(\n        Array.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n      );\n    if (isSet(obj))\n      return new Set(Array.from(obj).map(deepClonePatchValue));\n    const cloned = Object.create(getPrototypeOf(obj));\n    for (const key in obj)\n      cloned[key] = deepClonePatchValue(obj[key]);\n    if (has(obj, DRAFTABLE))\n      cloned[DRAFTABLE] = obj[DRAFTABLE];\n    return cloned;\n  }\n  function clonePatchValueIfNeeded(obj) {\n    if (isDraft(obj)) {\n      return deepClonePatchValue(obj);\n    } else\n      return obj;\n  }\n  loadPlugin(\"Patches\", {\n    applyPatches_,\n    generatePatches_,\n    generateReplacementPatches_\n  });\n}\n\n// src/plugins/mapset.ts\nfunction enableMapSet() {\n  class DraftMap extends Map {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 2 /* Map */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        assigned_: void 0,\n        base_: target,\n        draft_: this,\n        isManual_: false,\n        revoked_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(key) {\n      return latest(this[DRAFT_STATE]).has(key);\n    }\n    set(key, value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!latest(state).has(key) || latest(state).get(key) !== value) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_.set(key, true);\n        state.copy_.set(key, value);\n        state.assigned_.set(key, true);\n      }\n      return this;\n    }\n    delete(key) {\n      if (!this.has(key)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareMapCopy(state);\n      markChanged(state);\n      if (state.base_.has(key)) {\n        state.assigned_.set(key, false);\n      } else {\n        state.assigned_.delete(key);\n      }\n      state.copy_.delete(key);\n      return true;\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_ = /* @__PURE__ */ new Map();\n        each(state.base_, (key) => {\n          state.assigned_.set(key, false);\n        });\n        state.copy_.clear();\n      }\n    }\n    forEach(cb, thisArg) {\n      const state = this[DRAFT_STATE];\n      latest(state).forEach((_value, key, _map) => {\n        cb.call(thisArg, this.get(key), key, this);\n      });\n    }\n    get(key) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      const value = latest(state).get(key);\n      if (state.finalized_ || !isDraftable(value)) {\n        return value;\n      }\n      if (value !== state.base_.get(key)) {\n        return value;\n      }\n      const draft = createProxy(value, state);\n      prepareMapCopy(state);\n      state.copy_.set(key, draft);\n      return draft;\n    }\n    keys() {\n      return latest(this[DRAFT_STATE]).keys();\n    }\n    values() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.values(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value\n          };\n        }\n      };\n    }\n    entries() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.entries(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value: [r.value, value]\n          };\n        }\n      };\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.entries();\n    }\n  }\n  function proxyMap_(target, parent) {\n    return new DraftMap(target, parent);\n  }\n  function prepareMapCopy(state) {\n    if (!state.copy_) {\n      state.assigned_ = /* @__PURE__ */ new Map();\n      state.copy_ = new Map(state.base_);\n    }\n  }\n  class DraftSet extends Set {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 3 /* Set */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        base_: target,\n        draft_: this,\n        drafts_: /* @__PURE__ */ new Map(),\n        revoked_: false,\n        isManual_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!state.copy_) {\n        return state.base_.has(value);\n      }\n      if (state.copy_.has(value))\n        return true;\n      if (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n        return true;\n      return false;\n    }\n    add(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!this.has(value)) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.add(value);\n      }\n      return this;\n    }\n    delete(value) {\n      if (!this.has(value)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      markChanged(state);\n      return state.copy_.delete(value) || (state.drafts_.has(value) ? state.copy_.delete(state.drafts_.get(value)) : (\n        /* istanbul ignore next */\n        false\n      ));\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.clear();\n      }\n    }\n    values() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.values();\n    }\n    entries() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.entries();\n    }\n    keys() {\n      return this.values();\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.values();\n    }\n    forEach(cb, thisArg) {\n      const iterator = this.values();\n      let result = iterator.next();\n      while (!result.done) {\n        cb.call(thisArg, result.value, result.value, this);\n        result = iterator.next();\n      }\n    }\n  }\n  function proxySet_(target, parent) {\n    return new DraftSet(target, parent);\n  }\n  function prepareSetCopy(state) {\n    if (!state.copy_) {\n      state.copy_ = /* @__PURE__ */ new Set();\n      state.base_.forEach((value) => {\n        if (isDraftable(value)) {\n          const draft = createProxy(value, state);\n          state.drafts_.set(value, draft);\n          state.copy_.add(draft);\n        } else {\n          state.copy_.add(value);\n        }\n      });\n    }\n  }\n  function assertUnrevoked(state) {\n    if (state.revoked_)\n      die(3, JSON.stringify(latest(state)));\n  }\n  loadPlugin(\"MapSet\", { proxyMap_, proxySet_ });\n}\n\n// src/immer.ts\nvar immer = new Immer2();\nvar produce = immer.produce;\nvar produceWithPatches = immer.produceWithPatches.bind(\n  immer\n);\nvar setAutoFreeze = immer.setAutoFreeze.bind(immer);\nvar setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);\nvar applyPatches = immer.applyPatches.bind(immer);\nvar createDraft = immer.createDraft.bind(immer);\nvar finishDraft = immer.finishDraft.bind(immer);\nfunction castDraft(value) {\n  return value;\n}\nfunction castImmutable(value) {\n  return value;\n}\nexport {\n  Immer2 as Immer,\n  applyPatches,\n  castDraft,\n  castImmutable,\n  createDraft,\n  current,\n  enableMapSet,\n  enablePatches,\n  finishDraft,\n  freeze,\n  DRAFTABLE as immerable,\n  isDraft,\n  isDraftable,\n  NOTHING as nothing,\n  original,\n  produce,\n  produceWithPatches,\n  setAutoFreeze,\n  setUseStrictShallowCopy\n};\n//# sourceMappingURL=immer.mjs.map","// src/devModeChecks/identityFunctionCheck.ts\nvar runIdentityFunctionCheck = (resultFunc, inputSelectorsResults, outputSelectorResult) => {\n  if (inputSelectorsResults.length === 1 && inputSelectorsResults[0] === outputSelectorResult) {\n    let isInputSameAsOutput = false;\n    try {\n      const emptyObject = {};\n      if (resultFunc(emptyObject) === emptyObject)\n        isInputSameAsOutput = true;\n    } catch {\n    }\n    if (isInputSameAsOutput) {\n      let stack = void 0;\n      try {\n        throw new Error();\n      } catch (e) {\n        ;\n        ({ stack } = e);\n      }\n      console.warn(\n        \"The result function returned its own inputs without modification. e.g\\n`createSelector([state => state.todos], todos => todos)`\\nThis could lead to inefficient memoization and unnecessary re-renders.\\nEnsure transformation logic is in the result function, and extraction logic is in the input selectors.\",\n        { stack }\n      );\n    }\n  }\n};\n\n// src/devModeChecks/inputStabilityCheck.ts\nvar runInputStabilityCheck = (inputSelectorResultsObject, options, inputSelectorArgs) => {\n  const { memoize, memoizeOptions } = options;\n  const { inputSelectorResults, inputSelectorResultsCopy } = inputSelectorResultsObject;\n  const createAnEmptyObject = memoize(() => ({}), ...memoizeOptions);\n  const areInputSelectorResultsEqual = createAnEmptyObject.apply(null, inputSelectorResults) === createAnEmptyObject.apply(null, inputSelectorResultsCopy);\n  if (!areInputSelectorResultsEqual) {\n    let stack = void 0;\n    try {\n      throw new Error();\n    } catch (e) {\n      ;\n      ({ stack } = e);\n    }\n    console.warn(\n      \"An input selector returned a different result when passed same arguments.\\nThis means your output selector will likely run more frequently than intended.\\nAvoid returning a new reference inside your input selector, e.g.\\n`createSelector([state => state.todos.map(todo => todo.id)], todoIds => todoIds.length)`\",\n      {\n        arguments: inputSelectorArgs,\n        firstInputs: inputSelectorResults,\n        secondInputs: inputSelectorResultsCopy,\n        stack\n      }\n    );\n  }\n};\n\n// src/devModeChecks/setGlobalDevModeChecks.ts\nvar globalDevModeChecks = {\n  inputStabilityCheck: \"once\",\n  identityFunctionCheck: \"once\"\n};\nvar setGlobalDevModeChecks = (devModeChecks) => {\n  Object.assign(globalDevModeChecks, devModeChecks);\n};\n\n// src/utils.ts\nvar NOT_FOUND = /* @__PURE__ */ Symbol(\"NOT_FOUND\");\nfunction assertIsFunction(func, errorMessage = `expected a function, instead received ${typeof func}`) {\n  if (typeof func !== \"function\") {\n    throw new TypeError(errorMessage);\n  }\n}\nfunction assertIsObject(object, errorMessage = `expected an object, instead received ${typeof object}`) {\n  if (typeof object !== \"object\") {\n    throw new TypeError(errorMessage);\n  }\n}\nfunction assertIsArrayOfFunctions(array, errorMessage = `expected all items to be functions, instead received the following types: `) {\n  if (!array.every((item) => typeof item === \"function\")) {\n    const itemTypes = array.map(\n      (item) => typeof item === \"function\" ? `function ${item.name || \"unnamed\"}()` : typeof item\n    ).join(\", \");\n    throw new TypeError(`${errorMessage}[${itemTypes}]`);\n  }\n}\nvar ensureIsArray = (item) => {\n  return Array.isArray(item) ? item : [item];\n};\nfunction getDependencies(createSelectorArgs) {\n  const dependencies = Array.isArray(createSelectorArgs[0]) ? createSelectorArgs[0] : createSelectorArgs;\n  assertIsArrayOfFunctions(\n    dependencies,\n    `createSelector expects all input-selectors to be functions, but received the following types: `\n  );\n  return dependencies;\n}\nfunction collectInputSelectorResults(dependencies, inputSelectorArgs) {\n  const inputSelectorResults = [];\n  const { length } = dependencies;\n  for (let i = 0; i < length; i++) {\n    inputSelectorResults.push(dependencies[i].apply(null, inputSelectorArgs));\n  }\n  return inputSelectorResults;\n}\nvar getDevModeChecksExecutionInfo = (firstRun, devModeChecks) => {\n  const { identityFunctionCheck, inputStabilityCheck } = {\n    ...globalDevModeChecks,\n    ...devModeChecks\n  };\n  return {\n    identityFunctionCheck: {\n      shouldRun: identityFunctionCheck === \"always\" || identityFunctionCheck === \"once\" && firstRun,\n      run: runIdentityFunctionCheck\n    },\n    inputStabilityCheck: {\n      shouldRun: inputStabilityCheck === \"always\" || inputStabilityCheck === \"once\" && firstRun,\n      run: runInputStabilityCheck\n    }\n  };\n};\n\n// src/autotrackMemoize/autotracking.ts\nvar $REVISION = 0;\nvar CURRENT_TRACKER = null;\nvar Cell = class {\n  revision = $REVISION;\n  _value;\n  _lastValue;\n  _isEqual = tripleEq;\n  constructor(initialValue, isEqual = tripleEq) {\n    this._value = this._lastValue = initialValue;\n    this._isEqual = isEqual;\n  }\n  // Whenever a storage value is read, it'll add itself to the current tracker if\n  // one exists, entangling its state with that cache.\n  get value() {\n    CURRENT_TRACKER?.add(this);\n    return this._value;\n  }\n  // Whenever a storage value is updated, we bump the global revision clock,\n  // assign the revision for this storage to the new value, _and_ we schedule a\n  // rerender. This is important, and it's what makes autotracking  _pull_\n  // based. We don't actively tell the caches which depend on the storage that\n  // anything has happened. Instead, we recompute the caches when needed.\n  set value(newValue) {\n    if (this.value === newValue)\n      return;\n    this._value = newValue;\n    this.revision = ++$REVISION;\n  }\n};\nfunction tripleEq(a, b) {\n  return a === b;\n}\nvar TrackingCache = class {\n  _cachedValue;\n  _cachedRevision = -1;\n  _deps = [];\n  hits = 0;\n  fn;\n  constructor(fn) {\n    this.fn = fn;\n  }\n  clear() {\n    this._cachedValue = void 0;\n    this._cachedRevision = -1;\n    this._deps = [];\n    this.hits = 0;\n  }\n  get value() {\n    if (this.revision > this._cachedRevision) {\n      const { fn } = this;\n      const currentTracker = /* @__PURE__ */ new Set();\n      const prevTracker = CURRENT_TRACKER;\n      CURRENT_TRACKER = currentTracker;\n      this._cachedValue = fn();\n      CURRENT_TRACKER = prevTracker;\n      this.hits++;\n      this._deps = Array.from(currentTracker);\n      this._cachedRevision = this.revision;\n    }\n    CURRENT_TRACKER?.add(this);\n    return this._cachedValue;\n  }\n  get revision() {\n    return Math.max(...this._deps.map((d) => d.revision), 0);\n  }\n};\nfunction getValue(cell) {\n  if (!(cell instanceof Cell)) {\n    console.warn(\"Not a valid cell! \", cell);\n  }\n  return cell.value;\n}\nfunction setValue(storage, value) {\n  if (!(storage instanceof Cell)) {\n    throw new TypeError(\n      \"setValue must be passed a tracked store created with `createStorage`.\"\n    );\n  }\n  storage.value = storage._lastValue = value;\n}\nfunction createCell(initialValue, isEqual = tripleEq) {\n  return new Cell(initialValue, isEqual);\n}\nfunction createCache(fn) {\n  assertIsFunction(\n    fn,\n    \"the first parameter to `createCache` must be a function\"\n  );\n  return new TrackingCache(fn);\n}\n\n// src/autotrackMemoize/tracking.ts\nvar neverEq = (a, b) => false;\nfunction createTag() {\n  return createCell(null, neverEq);\n}\nfunction dirtyTag(tag, value) {\n  setValue(tag, value);\n}\nvar consumeCollection = (node) => {\n  let tag = node.collectionTag;\n  if (tag === null) {\n    tag = node.collectionTag = createTag();\n  }\n  getValue(tag);\n};\nvar dirtyCollection = (node) => {\n  const tag = node.collectionTag;\n  if (tag !== null) {\n    dirtyTag(tag, null);\n  }\n};\n\n// src/autotrackMemoize/proxy.ts\nvar REDUX_PROXY_LABEL = Symbol();\nvar nextId = 0;\nvar proto = Object.getPrototypeOf({});\nvar ObjectTreeNode = class {\n  constructor(value) {\n    this.value = value;\n    this.value = value;\n    this.tag.value = value;\n  }\n  proxy = new Proxy(this, objectProxyHandler);\n  tag = createTag();\n  tags = {};\n  children = {};\n  collectionTag = null;\n  id = nextId++;\n};\nvar objectProxyHandler = {\n  get(node, key) {\n    function calculateResult() {\n      const { value } = node;\n      const childValue = Reflect.get(value, key);\n      if (typeof key === \"symbol\") {\n        return childValue;\n      }\n      if (key in proto) {\n        return childValue;\n      }\n      if (typeof childValue === \"object\" && childValue !== null) {\n        let childNode = node.children[key];\n        if (childNode === void 0) {\n          childNode = node.children[key] = createNode(childValue);\n        }\n        if (childNode.tag) {\n          getValue(childNode.tag);\n        }\n        return childNode.proxy;\n      } else {\n        let tag = node.tags[key];\n        if (tag === void 0) {\n          tag = node.tags[key] = createTag();\n          tag.value = childValue;\n        }\n        getValue(tag);\n        return childValue;\n      }\n    }\n    const res = calculateResult();\n    return res;\n  },\n  ownKeys(node) {\n    consumeCollection(node);\n    return Reflect.ownKeys(node.value);\n  },\n  getOwnPropertyDescriptor(node, prop) {\n    return Reflect.getOwnPropertyDescriptor(node.value, prop);\n  },\n  has(node, prop) {\n    return Reflect.has(node.value, prop);\n  }\n};\nvar ArrayTreeNode = class {\n  constructor(value) {\n    this.value = value;\n    this.value = value;\n    this.tag.value = value;\n  }\n  proxy = new Proxy([this], arrayProxyHandler);\n  tag = createTag();\n  tags = {};\n  children = {};\n  collectionTag = null;\n  id = nextId++;\n};\nvar arrayProxyHandler = {\n  get([node], key) {\n    if (key === \"length\") {\n      consumeCollection(node);\n    }\n    return objectProxyHandler.get(node, key);\n  },\n  ownKeys([node]) {\n    return objectProxyHandler.ownKeys(node);\n  },\n  getOwnPropertyDescriptor([node], prop) {\n    return objectProxyHandler.getOwnPropertyDescriptor(node, prop);\n  },\n  has([node], prop) {\n    return objectProxyHandler.has(node, prop);\n  }\n};\nfunction createNode(value) {\n  if (Array.isArray(value)) {\n    return new ArrayTreeNode(value);\n  }\n  return new ObjectTreeNode(value);\n}\nfunction updateNode(node, newValue) {\n  const { value, tags, children } = node;\n  node.value = newValue;\n  if (Array.isArray(value) && Array.isArray(newValue) && value.length !== newValue.length) {\n    dirtyCollection(node);\n  } else {\n    if (value !== newValue) {\n      let oldKeysSize = 0;\n      let newKeysSize = 0;\n      let anyKeysAdded = false;\n      for (const _key in value) {\n        oldKeysSize++;\n      }\n      for (const key in newValue) {\n        newKeysSize++;\n        if (!(key in value)) {\n          anyKeysAdded = true;\n          break;\n        }\n      }\n      const isDifferent = anyKeysAdded || oldKeysSize !== newKeysSize;\n      if (isDifferent) {\n        dirtyCollection(node);\n      }\n    }\n  }\n  for (const key in tags) {\n    const childValue = value[key];\n    const newChildValue = newValue[key];\n    if (childValue !== newChildValue) {\n      dirtyCollection(node);\n      dirtyTag(tags[key], newChildValue);\n    }\n    if (typeof newChildValue === \"object\" && newChildValue !== null) {\n      delete tags[key];\n    }\n  }\n  for (const key in children) {\n    const childNode = children[key];\n    const newChildValue = newValue[key];\n    const childValue = childNode.value;\n    if (childValue === newChildValue) {\n      continue;\n    } else if (typeof newChildValue === \"object\" && newChildValue !== null) {\n      updateNode(childNode, newChildValue);\n    } else {\n      deleteNode(childNode);\n      delete children[key];\n    }\n  }\n}\nfunction deleteNode(node) {\n  if (node.tag) {\n    dirtyTag(node.tag, null);\n  }\n  dirtyCollection(node);\n  for (const key in node.tags) {\n    dirtyTag(node.tags[key], null);\n  }\n  for (const key in node.children) {\n    deleteNode(node.children[key]);\n  }\n}\n\n// src/lruMemoize.ts\nfunction createSingletonCache(equals) {\n  let entry;\n  return {\n    get(key) {\n      if (entry && equals(entry.key, key)) {\n        return entry.value;\n      }\n      return NOT_FOUND;\n    },\n    put(key, value) {\n      entry = { key, value };\n    },\n    getEntries() {\n      return entry ? [entry] : [];\n    },\n    clear() {\n      entry = void 0;\n    }\n  };\n}\nfunction createLruCache(maxSize, equals) {\n  let entries = [];\n  function get(key) {\n    const cacheIndex = entries.findIndex((entry) => equals(key, entry.key));\n    if (cacheIndex > -1) {\n      const entry = entries[cacheIndex];\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n      return entry.value;\n    }\n    return NOT_FOUND;\n  }\n  function put(key, value) {\n    if (get(key) === NOT_FOUND) {\n      entries.unshift({ key, value });\n      if (entries.length > maxSize) {\n        entries.pop();\n      }\n    }\n  }\n  function getEntries() {\n    return entries;\n  }\n  function clear() {\n    entries = [];\n  }\n  return { get, put, getEntries, clear };\n}\nvar referenceEqualityCheck = (a, b) => a === b;\nfunction createCacheKeyComparator(equalityCheck) {\n  return function areArgumentsShallowlyEqual(prev, next) {\n    if (prev === null || next === null || prev.length !== next.length) {\n      return false;\n    }\n    const { length } = prev;\n    for (let i = 0; i < length; i++) {\n      if (!equalityCheck(prev[i], next[i])) {\n        return false;\n      }\n    }\n    return true;\n  };\n}\nfunction lruMemoize(func, equalityCheckOrOptions) {\n  const providedOptions = typeof equalityCheckOrOptions === \"object\" ? equalityCheckOrOptions : { equalityCheck: equalityCheckOrOptions };\n  const {\n    equalityCheck = referenceEqualityCheck,\n    maxSize = 1,\n    resultEqualityCheck\n  } = providedOptions;\n  const comparator = createCacheKeyComparator(equalityCheck);\n  let resultsCount = 0;\n  const cache = maxSize <= 1 ? createSingletonCache(comparator) : createLruCache(maxSize, comparator);\n  function memoized() {\n    let value = cache.get(arguments);\n    if (value === NOT_FOUND) {\n      value = func.apply(null, arguments);\n      resultsCount++;\n      if (resultEqualityCheck) {\n        const entries = cache.getEntries();\n        const matchingEntry = entries.find(\n          (entry) => resultEqualityCheck(entry.value, value)\n        );\n        if (matchingEntry) {\n          value = matchingEntry.value;\n          resultsCount !== 0 && resultsCount--;\n        }\n      }\n      cache.put(arguments, value);\n    }\n    return value;\n  }\n  memoized.clearCache = () => {\n    cache.clear();\n    memoized.resetResultsCount();\n  };\n  memoized.resultsCount = () => resultsCount;\n  memoized.resetResultsCount = () => {\n    resultsCount = 0;\n  };\n  return memoized;\n}\n\n// src/autotrackMemoize/autotrackMemoize.ts\nfunction autotrackMemoize(func) {\n  const node = createNode(\n    []\n  );\n  let lastArgs = null;\n  const shallowEqual = createCacheKeyComparator(referenceEqualityCheck);\n  const cache = createCache(() => {\n    const res = func.apply(null, node.proxy);\n    return res;\n  });\n  function memoized() {\n    if (!shallowEqual(lastArgs, arguments)) {\n      updateNode(node, arguments);\n      lastArgs = arguments;\n    }\n    return cache.value;\n  }\n  memoized.clearCache = () => {\n    return cache.clear();\n  };\n  return memoized;\n}\n\n// src/weakMapMemoize.ts\nvar StrongRef = class {\n  constructor(value) {\n    this.value = value;\n  }\n  deref() {\n    return this.value;\n  }\n};\nvar Ref = typeof WeakRef !== \"undefined\" ? WeakRef : StrongRef;\nvar UNTERMINATED = 0;\nvar TERMINATED = 1;\nfunction createCacheNode() {\n  return {\n    s: UNTERMINATED,\n    v: void 0,\n    o: null,\n    p: null\n  };\n}\nfunction weakMapMemoize(func, options = {}) {\n  let fnNode = createCacheNode();\n  const { resultEqualityCheck } = options;\n  let lastResult;\n  let resultsCount = 0;\n  function memoized() {\n    let cacheNode = fnNode;\n    const { length } = arguments;\n    for (let i = 0, l = length; i < l; i++) {\n      const arg = arguments[i];\n      if (typeof arg === \"function\" || typeof arg === \"object\" && arg !== null) {\n        let objectCache = cacheNode.o;\n        if (objectCache === null) {\n          cacheNode.o = objectCache = /* @__PURE__ */ new WeakMap();\n        }\n        const objectNode = objectCache.get(arg);\n        if (objectNode === void 0) {\n          cacheNode = createCacheNode();\n          objectCache.set(arg, cacheNode);\n        } else {\n          cacheNode = objectNode;\n        }\n      } else {\n        let primitiveCache = cacheNode.p;\n        if (primitiveCache === null) {\n          cacheNode.p = primitiveCache = /* @__PURE__ */ new Map();\n        }\n        const primitiveNode = primitiveCache.get(arg);\n        if (primitiveNode === void 0) {\n          cacheNode = createCacheNode();\n          primitiveCache.set(arg, cacheNode);\n        } else {\n          cacheNode = primitiveNode;\n        }\n      }\n    }\n    const terminatedNode = cacheNode;\n    let result;\n    if (cacheNode.s === TERMINATED) {\n      result = cacheNode.v;\n    } else {\n      result = func.apply(null, arguments);\n      resultsCount++;\n      if (resultEqualityCheck) {\n        const lastResultValue = lastResult?.deref?.() ?? lastResult;\n        if (lastResultValue != null && resultEqualityCheck(lastResultValue, result)) {\n          result = lastResultValue;\n          resultsCount !== 0 && resultsCount--;\n        }\n        const needsWeakRef = typeof result === \"object\" && result !== null || typeof result === \"function\";\n        lastResult = needsWeakRef ? new Ref(result) : result;\n      }\n    }\n    terminatedNode.s = TERMINATED;\n    terminatedNode.v = result;\n    return result;\n  }\n  memoized.clearCache = () => {\n    fnNode = createCacheNode();\n    memoized.resetResultsCount();\n  };\n  memoized.resultsCount = () => resultsCount;\n  memoized.resetResultsCount = () => {\n    resultsCount = 0;\n  };\n  return memoized;\n}\n\n// src/createSelectorCreator.ts\nfunction createSelectorCreator(memoizeOrOptions, ...memoizeOptionsFromArgs) {\n  const createSelectorCreatorOptions = typeof memoizeOrOptions === \"function\" ? {\n    memoize: memoizeOrOptions,\n    memoizeOptions: memoizeOptionsFromArgs\n  } : memoizeOrOptions;\n  const createSelector2 = (...createSelectorArgs) => {\n    let recomputations = 0;\n    let dependencyRecomputations = 0;\n    let lastResult;\n    let directlyPassedOptions = {};\n    let resultFunc = createSelectorArgs.pop();\n    if (typeof resultFunc === \"object\") {\n      directlyPassedOptions = resultFunc;\n      resultFunc = createSelectorArgs.pop();\n    }\n    assertIsFunction(\n      resultFunc,\n      `createSelector expects an output function after the inputs, but received: [${typeof resultFunc}]`\n    );\n    const combinedOptions = {\n      ...createSelectorCreatorOptions,\n      ...directlyPassedOptions\n    };\n    const {\n      memoize,\n      memoizeOptions = [],\n      argsMemoize = weakMapMemoize,\n      argsMemoizeOptions = [],\n      devModeChecks = {}\n    } = combinedOptions;\n    const finalMemoizeOptions = ensureIsArray(memoizeOptions);\n    const finalArgsMemoizeOptions = ensureIsArray(argsMemoizeOptions);\n    const dependencies = getDependencies(createSelectorArgs);\n    const memoizedResultFunc = memoize(function recomputationWrapper() {\n      recomputations++;\n      return resultFunc.apply(\n        null,\n        arguments\n      );\n    }, ...finalMemoizeOptions);\n    let firstRun = true;\n    const selector = argsMemoize(function dependenciesChecker() {\n      dependencyRecomputations++;\n      const inputSelectorResults = collectInputSelectorResults(\n        dependencies,\n        arguments\n      );\n      lastResult = memoizedResultFunc.apply(null, inputSelectorResults);\n      if (process.env.NODE_ENV !== \"production\") {\n        const { identityFunctionCheck, inputStabilityCheck } = getDevModeChecksExecutionInfo(firstRun, devModeChecks);\n        if (identityFunctionCheck.shouldRun) {\n          identityFunctionCheck.run(\n            resultFunc,\n            inputSelectorResults,\n            lastResult\n          );\n        }\n        if (inputStabilityCheck.shouldRun) {\n          const inputSelectorResultsCopy = collectInputSelectorResults(\n            dependencies,\n            arguments\n          );\n          inputStabilityCheck.run(\n            { inputSelectorResults, inputSelectorResultsCopy },\n            { memoize, memoizeOptions: finalMemoizeOptions },\n            arguments\n          );\n        }\n        if (firstRun)\n          firstRun = false;\n      }\n      return lastResult;\n    }, ...finalArgsMemoizeOptions);\n    return Object.assign(selector, {\n      resultFunc,\n      memoizedResultFunc,\n      dependencies,\n      dependencyRecomputations: () => dependencyRecomputations,\n      resetDependencyRecomputations: () => {\n        dependencyRecomputations = 0;\n      },\n      lastResult: () => lastResult,\n      recomputations: () => recomputations,\n      resetRecomputations: () => {\n        recomputations = 0;\n      },\n      memoize,\n      argsMemoize\n    });\n  };\n  Object.assign(createSelector2, {\n    withTypes: () => createSelector2\n  });\n  return createSelector2;\n}\nvar createSelector = /* @__PURE__ */ createSelectorCreator(weakMapMemoize);\n\n// src/createStructuredSelector.ts\nvar createStructuredSelector = Object.assign(\n  (inputSelectorsObject, selectorCreator = createSelector) => {\n    assertIsObject(\n      inputSelectorsObject,\n      `createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof inputSelectorsObject}`\n    );\n    const inputSelectorKeys = Object.keys(inputSelectorsObject);\n    const dependencies = inputSelectorKeys.map(\n      (key) => inputSelectorsObject[key]\n    );\n    const structuredSelector = selectorCreator(\n      dependencies,\n      (...inputSelectorResults) => {\n        return inputSelectorResults.reduce((composition, value, index) => {\n          composition[inputSelectorKeys[index]] = value;\n          return composition;\n        }, {});\n      }\n    );\n    return structuredSelector;\n  },\n  { withTypes: () => createStructuredSelector }\n);\nexport {\n  createSelector,\n  createSelectorCreator,\n  createStructuredSelector,\n  lruMemoize,\n  referenceEqualityCheck,\n  setGlobalDevModeChecks,\n  autotrackMemoize as unstable_autotrackMemoize,\n  weakMapMemoize\n};\n//# sourceMappingURL=reselect.mjs.map","// src/index.ts\nfunction createThunkMiddleware(extraArgument) {\n  const middleware = ({ dispatch, getState }) => (next) => (action) => {\n    if (typeof action === \"function\") {\n      return action(dispatch, getState, extraArgument);\n    }\n    return next(action);\n  };\n  return middleware;\n}\nvar thunk = createThunkMiddleware();\nvar withExtraArgument = createThunkMiddleware;\nexport {\n  thunk,\n  withExtraArgument\n};\n","// src/index.ts\nexport * from \"redux\";\nimport { produce, current as current3, freeze, original as original2, isDraft as isDraft5 } from \"immer\";\nimport { createSelector, createSelectorCreator as createSelectorCreator2, lruMemoize, weakMapMemoize as weakMapMemoize2 } from \"reselect\";\n\n// src/createDraftSafeSelector.ts\nimport { current, isDraft } from \"immer\";\nimport { createSelectorCreator, weakMapMemoize } from \"reselect\";\nvar createDraftSafeSelectorCreator = (...args) => {\n  const createSelector2 = createSelectorCreator(...args);\n  const createDraftSafeSelector2 = Object.assign((...args2) => {\n    const selector = createSelector2(...args2);\n    const wrappedSelector = (value, ...rest) => selector(isDraft(value) ? current(value) : value, ...rest);\n    Object.assign(wrappedSelector, selector);\n    return wrappedSelector;\n  }, {\n    withTypes: () => createDraftSafeSelector2\n  });\n  return createDraftSafeSelector2;\n};\nvar createDraftSafeSelector = /* @__PURE__ */ createDraftSafeSelectorCreator(weakMapMemoize);\n\n// src/configureStore.ts\nimport { applyMiddleware, createStore, compose as compose2, combineReducers, isPlainObject as isPlainObject2 } from \"redux\";\n\n// src/devtoolsExtension.ts\nimport { compose } from \"redux\";\nvar composeWithDevTools = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function() {\n  if (arguments.length === 0) return void 0;\n  if (typeof arguments[0] === \"object\") return compose;\n  return compose.apply(null, arguments);\n};\nvar devToolsEnhancer = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__ : function() {\n  return function(noop3) {\n    return noop3;\n  };\n};\n\n// src/getDefaultMiddleware.ts\nimport { thunk as thunkMiddleware, withExtraArgument } from \"redux-thunk\";\n\n// src/createAction.ts\nimport { isAction } from \"redux\";\n\n// src/tsHelpers.ts\nvar hasMatchFunction = (v) => {\n  return v && typeof v.match === \"function\";\n};\n\n// src/createAction.ts\nfunction createAction(type, prepareAction) {\n  function actionCreator(...args) {\n    if (prepareAction) {\n      let prepared = prepareAction(...args);\n      if (!prepared) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : \"prepareAction did not return an object\");\n      }\n      return {\n        type,\n        payload: prepared.payload,\n        ...\"meta\" in prepared && {\n          meta: prepared.meta\n        },\n        ...\"error\" in prepared && {\n          error: prepared.error\n        }\n      };\n    }\n    return {\n      type,\n      payload: args[0]\n    };\n  }\n  actionCreator.toString = () => `${type}`;\n  actionCreator.type = type;\n  actionCreator.match = (action) => isAction(action) && action.type === type;\n  return actionCreator;\n}\nfunction isActionCreator(action) {\n  return typeof action === \"function\" && \"type\" in action && // hasMatchFunction only wants Matchers but I don't see the point in rewriting it\n  hasMatchFunction(action);\n}\nfunction isFSA(action) {\n  return isAction(action) && Object.keys(action).every(isValidKey);\n}\nfunction isValidKey(key) {\n  return [\"type\", \"payload\", \"error\", \"meta\"].indexOf(key) > -1;\n}\n\n// src/actionCreatorInvariantMiddleware.ts\nfunction getMessage(type) {\n  const splitType = type ? `${type}`.split(\"/\") : [];\n  const actionName = splitType[splitType.length - 1] || \"actionCreator\";\n  return `Detected an action creator with type \"${type || \"unknown\"}\" being dispatched. \nMake sure you're calling the action creator before dispatching, i.e. \\`dispatch(${actionName}())\\` instead of \\`dispatch(${actionName})\\`. This is necessary even if the action has no payload.`;\n}\nfunction createActionCreatorInvariantMiddleware(options = {}) {\n  if (process.env.NODE_ENV === \"production\") {\n    return () => (next) => (action) => next(action);\n  }\n  const {\n    isActionCreator: isActionCreator2 = isActionCreator\n  } = options;\n  return () => (next) => (action) => {\n    if (isActionCreator2(action)) {\n      console.warn(getMessage(action.type));\n    }\n    return next(action);\n  };\n}\n\n// src/utils.ts\nimport { produce as createNextState, isDraftable } from \"immer\";\nfunction getTimeMeasureUtils(maxDelay, fnName) {\n  let elapsed = 0;\n  return {\n    measureTime(fn) {\n      const started = Date.now();\n      try {\n        return fn();\n      } finally {\n        const finished = Date.now();\n        elapsed += finished - started;\n      }\n    },\n    warnIfExceeded() {\n      if (elapsed > maxDelay) {\n        console.warn(`${fnName} took ${elapsed}ms, which is more than the warning threshold of ${maxDelay}ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.`);\n      }\n    }\n  };\n}\nvar Tuple = class _Tuple extends Array {\n  constructor(...items) {\n    super(...items);\n    Object.setPrototypeOf(this, _Tuple.prototype);\n  }\n  static get [Symbol.species]() {\n    return _Tuple;\n  }\n  concat(...arr) {\n    return super.concat.apply(this, arr);\n  }\n  prepend(...arr) {\n    if (arr.length === 1 && Array.isArray(arr[0])) {\n      return new _Tuple(...arr[0].concat(this));\n    }\n    return new _Tuple(...arr.concat(this));\n  }\n};\nfunction freezeDraftable(val) {\n  return isDraftable(val) ? createNextState(val, () => {\n  }) : val;\n}\nfunction getOrInsertComputed(map, key, compute) {\n  if (map.has(key)) return map.get(key);\n  return map.set(key, compute(key)).get(key);\n}\n\n// src/immutableStateInvariantMiddleware.ts\nfunction isImmutableDefault(value) {\n  return typeof value !== \"object\" || value == null || Object.isFrozen(value);\n}\nfunction trackForMutations(isImmutable, ignorePaths, obj) {\n  const trackedProperties = trackProperties(isImmutable, ignorePaths, obj);\n  return {\n    detectMutations() {\n      return detectMutations(isImmutable, ignorePaths, trackedProperties, obj);\n    }\n  };\n}\nfunction trackProperties(isImmutable, ignorePaths = [], obj, path = \"\", checkedObjects = /* @__PURE__ */ new Set()) {\n  const tracked = {\n    value: obj\n  };\n  if (!isImmutable(obj) && !checkedObjects.has(obj)) {\n    checkedObjects.add(obj);\n    tracked.children = {};\n    for (const key in obj) {\n      const childPath = path ? path + \".\" + key : key;\n      if (ignorePaths.length && ignorePaths.indexOf(childPath) !== -1) {\n        continue;\n      }\n      tracked.children[key] = trackProperties(isImmutable, ignorePaths, obj[key], childPath);\n    }\n  }\n  return tracked;\n}\nfunction detectMutations(isImmutable, ignoredPaths = [], trackedProperty, obj, sameParentRef = false, path = \"\") {\n  const prevObj = trackedProperty ? trackedProperty.value : void 0;\n  const sameRef = prevObj === obj;\n  if (sameParentRef && !sameRef && !Number.isNaN(obj)) {\n    return {\n      wasMutated: true,\n      path\n    };\n  }\n  if (isImmutable(prevObj) || isImmutable(obj)) {\n    return {\n      wasMutated: false\n    };\n  }\n  const keysToDetect = {};\n  for (let key in trackedProperty.children) {\n    keysToDetect[key] = true;\n  }\n  for (let key in obj) {\n    keysToDetect[key] = true;\n  }\n  const hasIgnoredPaths = ignoredPaths.length > 0;\n  for (let key in keysToDetect) {\n    const nestedPath = path ? path + \".\" + key : key;\n    if (hasIgnoredPaths) {\n      const hasMatches = ignoredPaths.some((ignored) => {\n        if (ignored instanceof RegExp) {\n          return ignored.test(nestedPath);\n        }\n        return nestedPath === ignored;\n      });\n      if (hasMatches) {\n        continue;\n      }\n    }\n    const result = detectMutations(isImmutable, ignoredPaths, trackedProperty.children[key], obj[key], sameRef, nestedPath);\n    if (result.wasMutated) {\n      return result;\n    }\n  }\n  return {\n    wasMutated: false\n  };\n}\nfunction createImmutableStateInvariantMiddleware(options = {}) {\n  if (process.env.NODE_ENV === \"production\") {\n    return () => (next) => (action) => next(action);\n  } else {\n    let stringify2 = function(obj, serializer, indent, decycler) {\n      return JSON.stringify(obj, getSerialize2(serializer, decycler), indent);\n    }, getSerialize2 = function(serializer, decycler) {\n      let stack = [], keys = [];\n      if (!decycler) decycler = function(_, value) {\n        if (stack[0] === value) return \"[Circular ~]\";\n        return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\";\n      };\n      return function(key, value) {\n        if (stack.length > 0) {\n          var thisPos = stack.indexOf(this);\n          ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n          ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n          if (~stack.indexOf(value)) value = decycler.call(this, key, value);\n        } else stack.push(value);\n        return serializer == null ? value : serializer.call(this, key, value);\n      };\n    };\n    var stringify = stringify2, getSerialize = getSerialize2;\n    let {\n      isImmutable = isImmutableDefault,\n      ignoredPaths,\n      warnAfter = 32\n    } = options;\n    const track = trackForMutations.bind(null, isImmutable, ignoredPaths);\n    return ({\n      getState\n    }) => {\n      let state = getState();\n      let tracker = track(state);\n      let result;\n      return (next) => (action) => {\n        const measureUtils = getTimeMeasureUtils(warnAfter, \"ImmutableStateInvariantMiddleware\");\n        measureUtils.measureTime(() => {\n          state = getState();\n          result = tracker.detectMutations();\n          tracker = track(state);\n          if (result.wasMutated) {\n            throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(19) : `A state mutation was detected between dispatches, in the path '${result.path || \"\"}'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`);\n          }\n        });\n        const dispatchedAction = next(action);\n        measureUtils.measureTime(() => {\n          state = getState();\n          result = tracker.detectMutations();\n          tracker = track(state);\n          if (result.wasMutated) {\n            throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(20) : `A state mutation was detected inside a dispatch, in the path: ${result.path || \"\"}. Take a look at the reducer(s) handling the action ${stringify2(action)}. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`);\n          }\n        });\n        measureUtils.warnIfExceeded();\n        return dispatchedAction;\n      };\n    };\n  }\n}\n\n// src/serializableStateInvariantMiddleware.ts\nimport { isAction as isAction2, isPlainObject } from \"redux\";\nfunction isPlain(val) {\n  const type = typeof val;\n  return val == null || type === \"string\" || type === \"boolean\" || type === \"number\" || Array.isArray(val) || isPlainObject(val);\n}\nfunction findNonSerializableValue(value, path = \"\", isSerializable = isPlain, getEntries, ignoredPaths = [], cache) {\n  let foundNestedSerializable;\n  if (!isSerializable(value)) {\n    return {\n      keyPath: path || \"<root>\",\n      value\n    };\n  }\n  if (typeof value !== \"object\" || value === null) {\n    return false;\n  }\n  if (cache?.has(value)) return false;\n  const entries = getEntries != null ? getEntries(value) : Object.entries(value);\n  const hasIgnoredPaths = ignoredPaths.length > 0;\n  for (const [key, nestedValue] of entries) {\n    const nestedPath = path ? path + \".\" + key : key;\n    if (hasIgnoredPaths) {\n      const hasMatches = ignoredPaths.some((ignored) => {\n        if (ignored instanceof RegExp) {\n          return ignored.test(nestedPath);\n        }\n        return nestedPath === ignored;\n      });\n      if (hasMatches) {\n        continue;\n      }\n    }\n    if (!isSerializable(nestedValue)) {\n      return {\n        keyPath: nestedPath,\n        value: nestedValue\n      };\n    }\n    if (typeof nestedValue === \"object\") {\n      foundNestedSerializable = findNonSerializableValue(nestedValue, nestedPath, isSerializable, getEntries, ignoredPaths, cache);\n      if (foundNestedSerializable) {\n        return foundNestedSerializable;\n      }\n    }\n  }\n  if (cache && isNestedFrozen(value)) cache.add(value);\n  return false;\n}\nfunction isNestedFrozen(value) {\n  if (!Object.isFrozen(value)) return false;\n  for (const nestedValue of Object.values(value)) {\n    if (typeof nestedValue !== \"object\" || nestedValue === null) continue;\n    if (!isNestedFrozen(nestedValue)) return false;\n  }\n  return true;\n}\nfunction createSerializableStateInvariantMiddleware(options = {}) {\n  if (process.env.NODE_ENV === \"production\") {\n    return () => (next) => (action) => next(action);\n  } else {\n    const {\n      isSerializable = isPlain,\n      getEntries,\n      ignoredActions = [],\n      ignoredActionPaths = [\"meta.arg\", \"meta.baseQueryMeta\"],\n      ignoredPaths = [],\n      warnAfter = 32,\n      ignoreState = false,\n      ignoreActions = false,\n      disableCache = false\n    } = options;\n    const cache = !disableCache && WeakSet ? /* @__PURE__ */ new WeakSet() : void 0;\n    return (storeAPI) => (next) => (action) => {\n      if (!isAction2(action)) {\n        return next(action);\n      }\n      const result = next(action);\n      const measureUtils = getTimeMeasureUtils(warnAfter, \"SerializableStateInvariantMiddleware\");\n      if (!ignoreActions && !(ignoredActions.length && ignoredActions.indexOf(action.type) !== -1)) {\n        measureUtils.measureTime(() => {\n          const foundActionNonSerializableValue = findNonSerializableValue(action, \"\", isSerializable, getEntries, ignoredActionPaths, cache);\n          if (foundActionNonSerializableValue) {\n            const {\n              keyPath,\n              value\n            } = foundActionNonSerializableValue;\n            console.error(`A non-serializable value was detected in an action, in the path: \\`${keyPath}\\`. Value:`, value, \"\\nTake a look at the logic that dispatched this action: \", action, \"\\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)\", \"\\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)\");\n          }\n        });\n      }\n      if (!ignoreState) {\n        measureUtils.measureTime(() => {\n          const state = storeAPI.getState();\n          const foundStateNonSerializableValue = findNonSerializableValue(state, \"\", isSerializable, getEntries, ignoredPaths, cache);\n          if (foundStateNonSerializableValue) {\n            const {\n              keyPath,\n              value\n            } = foundStateNonSerializableValue;\n            console.error(`A non-serializable value was detected in the state, in the path: \\`${keyPath}\\`. Value:`, value, `\nTake a look at the reducer(s) handling this action type: ${action.type}.\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`);\n          }\n        });\n        measureUtils.warnIfExceeded();\n      }\n      return result;\n    };\n  }\n}\n\n// src/getDefaultMiddleware.ts\nfunction isBoolean(x) {\n  return typeof x === \"boolean\";\n}\nvar buildGetDefaultMiddleware = () => function getDefaultMiddleware(options) {\n  const {\n    thunk = true,\n    immutableCheck = true,\n    serializableCheck = true,\n    actionCreatorCheck = true\n  } = options ?? {};\n  let middlewareArray = new Tuple();\n  if (thunk) {\n    if (isBoolean(thunk)) {\n      middlewareArray.push(thunkMiddleware);\n    } else {\n      middlewareArray.push(withExtraArgument(thunk.extraArgument));\n    }\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    if (immutableCheck) {\n      let immutableOptions = {};\n      if (!isBoolean(immutableCheck)) {\n        immutableOptions = immutableCheck;\n      }\n      middlewareArray.unshift(createImmutableStateInvariantMiddleware(immutableOptions));\n    }\n    if (serializableCheck) {\n      let serializableOptions = {};\n      if (!isBoolean(serializableCheck)) {\n        serializableOptions = serializableCheck;\n      }\n      middlewareArray.push(createSerializableStateInvariantMiddleware(serializableOptions));\n    }\n    if (actionCreatorCheck) {\n      let actionCreatorOptions = {};\n      if (!isBoolean(actionCreatorCheck)) {\n        actionCreatorOptions = actionCreatorCheck;\n      }\n      middlewareArray.unshift(createActionCreatorInvariantMiddleware(actionCreatorOptions));\n    }\n  }\n  return middlewareArray;\n};\n\n// src/autoBatchEnhancer.ts\nvar SHOULD_AUTOBATCH = \"RTK_autoBatch\";\nvar prepareAutoBatched = () => (payload) => ({\n  payload,\n  meta: {\n    [SHOULD_AUTOBATCH]: true\n  }\n});\nvar createQueueWithTimer = (timeout) => {\n  return (notify) => {\n    setTimeout(notify, timeout);\n  };\n};\nvar autoBatchEnhancer = (options = {\n  type: \"raf\"\n}) => (next) => (...args) => {\n  const store = next(...args);\n  let notifying = true;\n  let shouldNotifyAtEndOfTick = false;\n  let notificationQueued = false;\n  const listeners = /* @__PURE__ */ new Set();\n  const queueCallback = options.type === \"tick\" ? queueMicrotask : options.type === \"raf\" ? (\n    // requestAnimationFrame won't exist in SSR environments. Fall back to a vague approximation just to keep from erroring.\n    typeof window !== \"undefined\" && window.requestAnimationFrame ? window.requestAnimationFrame : createQueueWithTimer(10)\n  ) : options.type === \"callback\" ? options.queueNotification : createQueueWithTimer(options.timeout);\n  const notifyListeners = () => {\n    notificationQueued = false;\n    if (shouldNotifyAtEndOfTick) {\n      shouldNotifyAtEndOfTick = false;\n      listeners.forEach((l) => l());\n    }\n  };\n  return Object.assign({}, store, {\n    // Override the base `store.subscribe` method to keep original listeners\n    // from running if we're delaying notifications\n    subscribe(listener2) {\n      const wrappedListener = () => notifying && listener2();\n      const unsubscribe = store.subscribe(wrappedListener);\n      listeners.add(listener2);\n      return () => {\n        unsubscribe();\n        listeners.delete(listener2);\n      };\n    },\n    // Override the base `store.dispatch` method so that we can check actions\n    // for the `shouldAutoBatch` flag and determine if batching is active\n    dispatch(action) {\n      try {\n        notifying = !action?.meta?.[SHOULD_AUTOBATCH];\n        shouldNotifyAtEndOfTick = !notifying;\n        if (shouldNotifyAtEndOfTick) {\n          if (!notificationQueued) {\n            notificationQueued = true;\n            queueCallback(notifyListeners);\n          }\n        }\n        return store.dispatch(action);\n      } finally {\n        notifying = true;\n      }\n    }\n  });\n};\n\n// src/getDefaultEnhancers.ts\nvar buildGetDefaultEnhancers = (middlewareEnhancer) => function getDefaultEnhancers(options) {\n  const {\n    autoBatch = true\n  } = options ?? {};\n  let enhancerArray = new Tuple(middlewareEnhancer);\n  if (autoBatch) {\n    enhancerArray.push(autoBatchEnhancer(typeof autoBatch === \"object\" ? autoBatch : void 0));\n  }\n  return enhancerArray;\n};\n\n// src/configureStore.ts\nfunction configureStore(options) {\n  const getDefaultMiddleware = buildGetDefaultMiddleware();\n  const {\n    reducer = void 0,\n    middleware,\n    devTools = true,\n    duplicateMiddlewareCheck = true,\n    preloadedState = void 0,\n    enhancers = void 0\n  } = options || {};\n  let rootReducer;\n  if (typeof reducer === \"function\") {\n    rootReducer = reducer;\n  } else if (isPlainObject2(reducer)) {\n    rootReducer = combineReducers(reducer);\n  } else {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"`reducer` is a required argument, and must be a function or an object of functions that can be passed to combineReducers\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && middleware && typeof middleware !== \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"`middleware` field must be a callback\");\n  }\n  let finalMiddleware;\n  if (typeof middleware === \"function\") {\n    finalMiddleware = middleware(getDefaultMiddleware);\n    if (process.env.NODE_ENV !== \"production\" && !Array.isArray(finalMiddleware)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : \"when using a middleware builder function, an array of middleware must be returned\");\n    }\n  } else {\n    finalMiddleware = getDefaultMiddleware();\n  }\n  if (process.env.NODE_ENV !== \"production\" && finalMiddleware.some((item) => typeof item !== \"function\")) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"each middleware provided to configureStore must be a function\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && duplicateMiddlewareCheck) {\n    let middlewareReferences = /* @__PURE__ */ new Set();\n    finalMiddleware.forEach((middleware2) => {\n      if (middlewareReferences.has(middleware2)) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(42) : \"Duplicate middleware references found when creating the store. Ensure that each middleware is only included once.\");\n      }\n      middlewareReferences.add(middleware2);\n    });\n  }\n  let finalCompose = compose2;\n  if (devTools) {\n    finalCompose = composeWithDevTools({\n      // Enable capture of stack traces for dispatched Redux actions\n      trace: process.env.NODE_ENV !== \"production\",\n      ...typeof devTools === \"object\" && devTools\n    });\n  }\n  const middlewareEnhancer = applyMiddleware(...finalMiddleware);\n  const getDefaultEnhancers = buildGetDefaultEnhancers(middlewareEnhancer);\n  if (process.env.NODE_ENV !== \"production\" && enhancers && typeof enhancers !== \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : \"`enhancers` field must be a callback\");\n  }\n  let storeEnhancers = typeof enhancers === \"function\" ? enhancers(getDefaultEnhancers) : getDefaultEnhancers();\n  if (process.env.NODE_ENV !== \"production\" && !Array.isArray(storeEnhancers)) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : \"`enhancers` callback must return an array\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && storeEnhancers.some((item) => typeof item !== \"function\")) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"each enhancer provided to configureStore must be a function\");\n  }\n  if (process.env.NODE_ENV !== \"production\" && finalMiddleware.length && !storeEnhancers.includes(middlewareEnhancer)) {\n    console.error(\"middlewares were provided, but middleware enhancer was not included in final enhancers - make sure to call `getDefaultEnhancers`\");\n  }\n  const composedEnhancer = finalCompose(...storeEnhancers);\n  return createStore(rootReducer, preloadedState, composedEnhancer);\n}\n\n// src/createReducer.ts\nimport { produce as createNextState2, isDraft as isDraft2, isDraftable as isDraftable2 } from \"immer\";\n\n// src/mapBuilders.ts\nfunction executeReducerBuilderCallback(builderCallback) {\n  const actionsMap = {};\n  const actionMatchers = [];\n  let defaultCaseReducer;\n  const builder = {\n    addCase(typeOrActionCreator, reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (actionMatchers.length > 0) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(26) : \"`builder.addCase` should only be called before calling `builder.addMatcher`\");\n        }\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(27) : \"`builder.addCase` should only be called before calling `builder.addDefaultCase`\");\n        }\n      }\n      const type = typeof typeOrActionCreator === \"string\" ? typeOrActionCreator : typeOrActionCreator.type;\n      if (!type) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(28) : \"`builder.addCase` cannot be called with an empty action type\");\n      }\n      if (type in actionsMap) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(29) : `\\`builder.addCase\\` cannot be called with two reducers for the same action type '${type}'`);\n      }\n      actionsMap[type] = reducer;\n      return builder;\n    },\n    addMatcher(matcher, reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(30) : \"`builder.addMatcher` should only be called before calling `builder.addDefaultCase`\");\n        }\n      }\n      actionMatchers.push({\n        matcher,\n        reducer\n      });\n      return builder;\n    },\n    addDefaultCase(reducer) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(31) : \"`builder.addDefaultCase` can only be called once\");\n        }\n      }\n      defaultCaseReducer = reducer;\n      return builder;\n    }\n  };\n  builderCallback(builder);\n  return [actionsMap, actionMatchers, defaultCaseReducer];\n}\n\n// src/createReducer.ts\nfunction isStateFunction(x) {\n  return typeof x === \"function\";\n}\nfunction createReducer(initialState, mapOrBuilderCallback) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof mapOrBuilderCallback === \"object\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : \"The object notation for `createReducer` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer\");\n    }\n  }\n  let [actionsMap, finalActionMatchers, finalDefaultCaseReducer] = executeReducerBuilderCallback(mapOrBuilderCallback);\n  let getInitialState;\n  if (isStateFunction(initialState)) {\n    getInitialState = () => freezeDraftable(initialState());\n  } else {\n    const frozenInitialState = freezeDraftable(initialState);\n    getInitialState = () => frozenInitialState;\n  }\n  function reducer(state = getInitialState(), action) {\n    let caseReducers = [actionsMap[action.type], ...finalActionMatchers.filter(({\n      matcher\n    }) => matcher(action)).map(({\n      reducer: reducer2\n    }) => reducer2)];\n    if (caseReducers.filter((cr) => !!cr).length === 0) {\n      caseReducers = [finalDefaultCaseReducer];\n    }\n    return caseReducers.reduce((previousState, caseReducer) => {\n      if (caseReducer) {\n        if (isDraft2(previousState)) {\n          const draft = previousState;\n          const result = caseReducer(draft, action);\n          if (result === void 0) {\n            return previousState;\n          }\n          return result;\n        } else if (!isDraftable2(previousState)) {\n          const result = caseReducer(previousState, action);\n          if (result === void 0) {\n            if (previousState === null) {\n              return previousState;\n            }\n            throw Error(\"A case reducer on a non-draftable value must not return undefined\");\n          }\n          return result;\n        } else {\n          return createNextState2(previousState, (draft) => {\n            return caseReducer(draft, action);\n          });\n        }\n      }\n      return previousState;\n    }, state);\n  }\n  reducer.getInitialState = getInitialState;\n  return reducer;\n}\n\n// src/matchers.ts\nvar matches = (matcher, action) => {\n  if (hasMatchFunction(matcher)) {\n    return matcher.match(action);\n  } else {\n    return matcher(action);\n  }\n};\nfunction isAnyOf(...matchers) {\n  return (action) => {\n    return matchers.some((matcher) => matches(matcher, action));\n  };\n}\nfunction isAllOf(...matchers) {\n  return (action) => {\n    return matchers.every((matcher) => matches(matcher, action));\n  };\n}\nfunction hasExpectedRequestMetadata(action, validStatus) {\n  if (!action || !action.meta) return false;\n  const hasValidRequestId = typeof action.meta.requestId === \"string\";\n  const hasValidRequestStatus = validStatus.indexOf(action.meta.requestStatus) > -1;\n  return hasValidRequestId && hasValidRequestStatus;\n}\nfunction isAsyncThunkArray(a) {\n  return typeof a[0] === \"function\" && \"pending\" in a[0] && \"fulfilled\" in a[0] && \"rejected\" in a[0];\n}\nfunction isPending(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"pending\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isPending()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map((asyncThunk) => asyncThunk.pending));\n}\nfunction isRejected(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"rejected\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejected()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map((asyncThunk) => asyncThunk.rejected));\n}\nfunction isRejectedWithValue(...asyncThunks) {\n  const hasFlag = (action) => {\n    return action && action.meta && action.meta.rejectedWithValue;\n  };\n  if (asyncThunks.length === 0) {\n    return isAllOf(isRejected(...asyncThunks), hasFlag);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejectedWithValue()(asyncThunks[0]);\n  }\n  return isAllOf(isRejected(...asyncThunks), hasFlag);\n}\nfunction isFulfilled(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"fulfilled\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isFulfilled()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map((asyncThunk) => asyncThunk.fulfilled));\n}\nfunction isAsyncThunkAction(...asyncThunks) {\n  if (asyncThunks.length === 0) {\n    return (action) => hasExpectedRequestMetadata(action, [\"pending\", \"fulfilled\", \"rejected\"]);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isAsyncThunkAction()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.flatMap((asyncThunk) => [asyncThunk.pending, asyncThunk.rejected, asyncThunk.fulfilled]));\n}\n\n// src/nanoid.ts\nvar urlAlphabet = \"ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW\";\nvar nanoid = (size = 21) => {\n  let id = \"\";\n  let i = size;\n  while (i--) {\n    id += urlAlphabet[Math.random() * 64 | 0];\n  }\n  return id;\n};\n\n// src/createAsyncThunk.ts\nvar commonProperties = [\"name\", \"message\", \"stack\", \"code\"];\nvar RejectWithValue = class {\n  constructor(payload, meta) {\n    this.payload = payload;\n    this.meta = meta;\n  }\n  /*\n  type-only property to distinguish between RejectWithValue and FulfillWithMeta\n  does not exist at runtime\n  */\n  _type;\n};\nvar FulfillWithMeta = class {\n  constructor(payload, meta) {\n    this.payload = payload;\n    this.meta = meta;\n  }\n  /*\n  type-only property to distinguish between RejectWithValue and FulfillWithMeta\n  does not exist at runtime\n  */\n  _type;\n};\nvar miniSerializeError = (value) => {\n  if (typeof value === \"object\" && value !== null) {\n    const simpleError = {};\n    for (const property of commonProperties) {\n      if (typeof value[property] === \"string\") {\n        simpleError[property] = value[property];\n      }\n    }\n    return simpleError;\n  }\n  return {\n    message: String(value)\n  };\n};\nvar externalAbortMessage = \"External signal was aborted\";\nvar createAsyncThunk = /* @__PURE__ */ (() => {\n  function createAsyncThunk2(typePrefix, payloadCreator, options) {\n    const fulfilled = createAction(typePrefix + \"/fulfilled\", (payload, requestId, arg, meta) => ({\n      payload,\n      meta: {\n        ...meta || {},\n        arg,\n        requestId,\n        requestStatus: \"fulfilled\"\n      }\n    }));\n    const pending = createAction(typePrefix + \"/pending\", (requestId, arg, meta) => ({\n      payload: void 0,\n      meta: {\n        ...meta || {},\n        arg,\n        requestId,\n        requestStatus: \"pending\"\n      }\n    }));\n    const rejected = createAction(typePrefix + \"/rejected\", (error, requestId, arg, payload, meta) => ({\n      payload,\n      error: (options && options.serializeError || miniSerializeError)(error || \"Rejected\"),\n      meta: {\n        ...meta || {},\n        arg,\n        requestId,\n        rejectedWithValue: !!payload,\n        requestStatus: \"rejected\",\n        aborted: error?.name === \"AbortError\",\n        condition: error?.name === \"ConditionError\"\n      }\n    }));\n    function actionCreator(arg, {\n      signal\n    } = {}) {\n      return (dispatch, getState, extra) => {\n        const requestId = options?.idGenerator ? options.idGenerator(arg) : nanoid();\n        const abortController = new AbortController();\n        let abortHandler;\n        let abortReason;\n        function abort(reason) {\n          abortReason = reason;\n          abortController.abort();\n        }\n        if (signal) {\n          if (signal.aborted) {\n            abort(externalAbortMessage);\n          } else {\n            signal.addEventListener(\"abort\", () => abort(externalAbortMessage), {\n              once: true\n            });\n          }\n        }\n        const promise = async function() {\n          let finalAction;\n          try {\n            let conditionResult = options?.condition?.(arg, {\n              getState,\n              extra\n            });\n            if (isThenable(conditionResult)) {\n              conditionResult = await conditionResult;\n            }\n            if (conditionResult === false || abortController.signal.aborted) {\n              throw {\n                name: \"ConditionError\",\n                message: \"Aborted due to condition callback returning false.\"\n              };\n            }\n            const abortedPromise = new Promise((_, reject) => {\n              abortHandler = () => {\n                reject({\n                  name: \"AbortError\",\n                  message: abortReason || \"Aborted\"\n                });\n              };\n              abortController.signal.addEventListener(\"abort\", abortHandler);\n            });\n            dispatch(pending(requestId, arg, options?.getPendingMeta?.({\n              requestId,\n              arg\n            }, {\n              getState,\n              extra\n            })));\n            finalAction = await Promise.race([abortedPromise, Promise.resolve(payloadCreator(arg, {\n              dispatch,\n              getState,\n              extra,\n              requestId,\n              signal: abortController.signal,\n              abort,\n              rejectWithValue: (value, meta) => {\n                return new RejectWithValue(value, meta);\n              },\n              fulfillWithValue: (value, meta) => {\n                return new FulfillWithMeta(value, meta);\n              }\n            })).then((result) => {\n              if (result instanceof RejectWithValue) {\n                throw result;\n              }\n              if (result instanceof FulfillWithMeta) {\n                return fulfilled(result.payload, requestId, arg, result.meta);\n              }\n              return fulfilled(result, requestId, arg);\n            })]);\n          } catch (err) {\n            finalAction = err instanceof RejectWithValue ? rejected(null, requestId, arg, err.payload, err.meta) : rejected(err, requestId, arg);\n          } finally {\n            if (abortHandler) {\n              abortController.signal.removeEventListener(\"abort\", abortHandler);\n            }\n          }\n          const skipDispatch = options && !options.dispatchConditionRejection && rejected.match(finalAction) && finalAction.meta.condition;\n          if (!skipDispatch) {\n            dispatch(finalAction);\n          }\n          return finalAction;\n        }();\n        return Object.assign(promise, {\n          abort,\n          requestId,\n          arg,\n          unwrap() {\n            return promise.then(unwrapResult);\n          }\n        });\n      };\n    }\n    return Object.assign(actionCreator, {\n      pending,\n      rejected,\n      fulfilled,\n      settled: isAnyOf(rejected, fulfilled),\n      typePrefix\n    });\n  }\n  createAsyncThunk2.withTypes = () => createAsyncThunk2;\n  return createAsyncThunk2;\n})();\nfunction unwrapResult(action) {\n  if (action.meta && action.meta.rejectedWithValue) {\n    throw action.payload;\n  }\n  if (action.error) {\n    throw action.error;\n  }\n  return action.payload;\n}\nfunction isThenable(value) {\n  return value !== null && typeof value === \"object\" && typeof value.then === \"function\";\n}\n\n// src/createSlice.ts\nvar asyncThunkSymbol = /* @__PURE__ */ Symbol.for(\"rtk-slice-createasyncthunk\");\nvar asyncThunkCreator = {\n  [asyncThunkSymbol]: createAsyncThunk\n};\nvar ReducerType = /* @__PURE__ */ ((ReducerType2) => {\n  ReducerType2[\"reducer\"] = \"reducer\";\n  ReducerType2[\"reducerWithPrepare\"] = \"reducerWithPrepare\";\n  ReducerType2[\"asyncThunk\"] = \"asyncThunk\";\n  return ReducerType2;\n})(ReducerType || {});\nfunction getType(slice, actionKey) {\n  return `${slice}/${actionKey}`;\n}\nfunction buildCreateSlice({\n  creators\n} = {}) {\n  const cAT = creators?.asyncThunk?.[asyncThunkSymbol];\n  return function createSlice2(options) {\n    const {\n      name,\n      reducerPath = name\n    } = options;\n    if (!name) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"`name` is a required option for createSlice\");\n    }\n    if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\n      if (options.initialState === void 0) {\n        console.error(\"You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`\");\n      }\n    }\n    const reducers = (typeof options.reducers === \"function\" ? options.reducers(buildReducerCreators()) : options.reducers) || {};\n    const reducerNames = Object.keys(reducers);\n    const context = {\n      sliceCaseReducersByName: {},\n      sliceCaseReducersByType: {},\n      actionCreators: {},\n      sliceMatchers: []\n    };\n    const contextMethods = {\n      addCase(typeOrActionCreator, reducer2) {\n        const type = typeof typeOrActionCreator === \"string\" ? typeOrActionCreator : typeOrActionCreator.type;\n        if (!type) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"`context.addCase` cannot be called with an empty action type\");\n        }\n        if (type in context.sliceCaseReducersByType) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"`context.addCase` cannot be called with two reducers for the same action type: \" + type);\n        }\n        context.sliceCaseReducersByType[type] = reducer2;\n        return contextMethods;\n      },\n      addMatcher(matcher, reducer2) {\n        context.sliceMatchers.push({\n          matcher,\n          reducer: reducer2\n        });\n        return contextMethods;\n      },\n      exposeAction(name2, actionCreator) {\n        context.actionCreators[name2] = actionCreator;\n        return contextMethods;\n      },\n      exposeCaseReducer(name2, reducer2) {\n        context.sliceCaseReducersByName[name2] = reducer2;\n        return contextMethods;\n      }\n    };\n    reducerNames.forEach((reducerName) => {\n      const reducerDefinition = reducers[reducerName];\n      const reducerDetails = {\n        reducerName,\n        type: getType(name, reducerName),\n        createNotation: typeof options.reducers === \"function\"\n      };\n      if (isAsyncThunkSliceReducerDefinition(reducerDefinition)) {\n        handleThunkCaseReducerDefinition(reducerDetails, reducerDefinition, contextMethods, cAT);\n      } else {\n        handleNormalReducerDefinition(reducerDetails, reducerDefinition, contextMethods);\n      }\n    });\n    function buildReducer() {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (typeof options.extraReducers === \"object\") {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"The object notation for `createSlice.extraReducers` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice\");\n        }\n      }\n      const [extraReducers = {}, actionMatchers = [], defaultCaseReducer = void 0] = typeof options.extraReducers === \"function\" ? executeReducerBuilderCallback(options.extraReducers) : [options.extraReducers];\n      const finalCaseReducers = {\n        ...extraReducers,\n        ...context.sliceCaseReducersByType\n      };\n      return createReducer(options.initialState, (builder) => {\n        for (let key in finalCaseReducers) {\n          builder.addCase(key, finalCaseReducers[key]);\n        }\n        for (let sM of context.sliceMatchers) {\n          builder.addMatcher(sM.matcher, sM.reducer);\n        }\n        for (let m of actionMatchers) {\n          builder.addMatcher(m.matcher, m.reducer);\n        }\n        if (defaultCaseReducer) {\n          builder.addDefaultCase(defaultCaseReducer);\n        }\n      });\n    }\n    const selectSelf = (state) => state;\n    const injectedSelectorCache = /* @__PURE__ */ new Map();\n    const injectedStateCache = /* @__PURE__ */ new WeakMap();\n    let _reducer;\n    function reducer(state, action) {\n      if (!_reducer) _reducer = buildReducer();\n      return _reducer(state, action);\n    }\n    function getInitialState() {\n      if (!_reducer) _reducer = buildReducer();\n      return _reducer.getInitialState();\n    }\n    function makeSelectorProps(reducerPath2, injected = false) {\n      function selectSlice(state) {\n        let sliceState = state[reducerPath2];\n        if (typeof sliceState === \"undefined\") {\n          if (injected) {\n            sliceState = getOrInsertComputed(injectedStateCache, selectSlice, getInitialState);\n          } else if (process.env.NODE_ENV !== \"production\") {\n            throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : \"selectSlice returned undefined for an uninjected slice reducer\");\n          }\n        }\n        return sliceState;\n      }\n      function getSelectors(selectState = selectSelf) {\n        const selectorCache = getOrInsertComputed(injectedSelectorCache, injected, () => /* @__PURE__ */ new WeakMap());\n        return getOrInsertComputed(selectorCache, selectState, () => {\n          const map = {};\n          for (const [name2, selector] of Object.entries(options.selectors ?? {})) {\n            map[name2] = wrapSelector(selector, selectState, () => getOrInsertComputed(injectedStateCache, selectState, getInitialState), injected);\n          }\n          return map;\n        });\n      }\n      return {\n        reducerPath: reducerPath2,\n        getSelectors,\n        get selectors() {\n          return getSelectors(selectSlice);\n        },\n        selectSlice\n      };\n    }\n    const slice = {\n      name,\n      reducer,\n      actions: context.actionCreators,\n      caseReducers: context.sliceCaseReducersByName,\n      getInitialState,\n      ...makeSelectorProps(reducerPath),\n      injectInto(injectable, {\n        reducerPath: pathOpt,\n        ...config\n      } = {}) {\n        const newReducerPath = pathOpt ?? reducerPath;\n        injectable.inject({\n          reducerPath: newReducerPath,\n          reducer\n        }, config);\n        return {\n          ...slice,\n          ...makeSelectorProps(newReducerPath, true)\n        };\n      }\n    };\n    return slice;\n  };\n}\nfunction wrapSelector(selector, selectState, getInitialState, injected) {\n  function wrapper(rootState, ...args) {\n    let sliceState = selectState(rootState);\n    if (typeof sliceState === \"undefined\") {\n      if (injected) {\n        sliceState = getInitialState();\n      } else if (process.env.NODE_ENV !== \"production\") {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"selectState returned undefined for an uninjected slice reducer\");\n      }\n    }\n    return selector(sliceState, ...args);\n  }\n  wrapper.unwrapped = selector;\n  return wrapper;\n}\nvar createSlice = /* @__PURE__ */ buildCreateSlice();\nfunction buildReducerCreators() {\n  function asyncThunk(payloadCreator, config) {\n    return {\n      _reducerDefinitionType: \"asyncThunk\" /* asyncThunk */,\n      payloadCreator,\n      ...config\n    };\n  }\n  asyncThunk.withTypes = () => asyncThunk;\n  return {\n    reducer(caseReducer) {\n      return Object.assign({\n        // hack so the wrapping function has the same name as the original\n        // we need to create a wrapper so the `reducerDefinitionType` is not assigned to the original\n        [caseReducer.name](...args) {\n          return caseReducer(...args);\n        }\n      }[caseReducer.name], {\n        _reducerDefinitionType: \"reducer\" /* reducer */\n      });\n    },\n    preparedReducer(prepare, reducer) {\n      return {\n        _reducerDefinitionType: \"reducerWithPrepare\" /* reducerWithPrepare */,\n        prepare,\n        reducer\n      };\n    },\n    asyncThunk\n  };\n}\nfunction handleNormalReducerDefinition({\n  type,\n  reducerName,\n  createNotation\n}, maybeReducerWithPrepare, context) {\n  let caseReducer;\n  let prepareCallback;\n  if (\"reducer\" in maybeReducerWithPrepare) {\n    if (createNotation && !isCaseReducerWithPrepareDefinition(maybeReducerWithPrepare)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(17) : \"Please use the `create.preparedReducer` notation for prepared action creators with the `create` notation.\");\n    }\n    caseReducer = maybeReducerWithPrepare.reducer;\n    prepareCallback = maybeReducerWithPrepare.prepare;\n  } else {\n    caseReducer = maybeReducerWithPrepare;\n  }\n  context.addCase(type, caseReducer).exposeCaseReducer(reducerName, caseReducer).exposeAction(reducerName, prepareCallback ? createAction(type, prepareCallback) : createAction(type));\n}\nfunction isAsyncThunkSliceReducerDefinition(reducerDefinition) {\n  return reducerDefinition._reducerDefinitionType === \"asyncThunk\" /* asyncThunk */;\n}\nfunction isCaseReducerWithPrepareDefinition(reducerDefinition) {\n  return reducerDefinition._reducerDefinitionType === \"reducerWithPrepare\" /* reducerWithPrepare */;\n}\nfunction handleThunkCaseReducerDefinition({\n  type,\n  reducerName\n}, reducerDefinition, context, cAT) {\n  if (!cAT) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(18) : \"Cannot use `create.asyncThunk` in the built-in `createSlice`. Use `buildCreateSlice({ creators: { asyncThunk: asyncThunkCreator } })` to create a customised version of `createSlice`.\");\n  }\n  const {\n    payloadCreator,\n    fulfilled,\n    pending,\n    rejected,\n    settled,\n    options\n  } = reducerDefinition;\n  const thunk = cAT(type, payloadCreator, options);\n  context.exposeAction(reducerName, thunk);\n  if (fulfilled) {\n    context.addCase(thunk.fulfilled, fulfilled);\n  }\n  if (pending) {\n    context.addCase(thunk.pending, pending);\n  }\n  if (rejected) {\n    context.addCase(thunk.rejected, rejected);\n  }\n  if (settled) {\n    context.addMatcher(thunk.settled, settled);\n  }\n  context.exposeCaseReducer(reducerName, {\n    fulfilled: fulfilled || noop,\n    pending: pending || noop,\n    rejected: rejected || noop,\n    settled: settled || noop\n  });\n}\nfunction noop() {\n}\n\n// src/entities/entity_state.ts\nfunction getInitialEntityState() {\n  return {\n    ids: [],\n    entities: {}\n  };\n}\nfunction createInitialStateFactory(stateAdapter) {\n  function getInitialState(additionalState = {}, entities) {\n    const state = Object.assign(getInitialEntityState(), additionalState);\n    return entities ? stateAdapter.setAll(state, entities) : state;\n  }\n  return {\n    getInitialState\n  };\n}\n\n// src/entities/state_selectors.ts\nfunction createSelectorsFactory() {\n  function getSelectors(selectState, options = {}) {\n    const {\n      createSelector: createSelector2 = createDraftSafeSelector\n    } = options;\n    const selectIds = (state) => state.ids;\n    const selectEntities = (state) => state.entities;\n    const selectAll = createSelector2(selectIds, selectEntities, (ids, entities) => ids.map((id) => entities[id]));\n    const selectId = (_, id) => id;\n    const selectById = (entities, id) => entities[id];\n    const selectTotal = createSelector2(selectIds, (ids) => ids.length);\n    if (!selectState) {\n      return {\n        selectIds,\n        selectEntities,\n        selectAll,\n        selectTotal,\n        selectById: createSelector2(selectEntities, selectId, selectById)\n      };\n    }\n    const selectGlobalizedEntities = createSelector2(selectState, selectEntities);\n    return {\n      selectIds: createSelector2(selectState, selectIds),\n      selectEntities: selectGlobalizedEntities,\n      selectAll: createSelector2(selectState, selectAll),\n      selectTotal: createSelector2(selectState, selectTotal),\n      selectById: createSelector2(selectGlobalizedEntities, selectId, selectById)\n    };\n  }\n  return {\n    getSelectors\n  };\n}\n\n// src/entities/state_adapter.ts\nimport { produce as createNextState3, isDraft as isDraft3 } from \"immer\";\nvar isDraftTyped = isDraft3;\nfunction createSingleArgumentStateOperator(mutator) {\n  const operator = createStateOperator((_, state) => mutator(state));\n  return function operation(state) {\n    return operator(state, void 0);\n  };\n}\nfunction createStateOperator(mutator) {\n  return function operation(state, arg) {\n    function isPayloadActionArgument(arg2) {\n      return isFSA(arg2);\n    }\n    const runMutator = (draft) => {\n      if (isPayloadActionArgument(arg)) {\n        mutator(arg.payload, draft);\n      } else {\n        mutator(arg, draft);\n      }\n    };\n    if (isDraftTyped(state)) {\n      runMutator(state);\n      return state;\n    }\n    return createNextState3(state, runMutator);\n  };\n}\n\n// src/entities/utils.ts\nimport { current as current2, isDraft as isDraft4 } from \"immer\";\nfunction selectIdValue(entity, selectId) {\n  const key = selectId(entity);\n  if (process.env.NODE_ENV !== \"production\" && key === void 0) {\n    console.warn(\"The entity passed to the `selectId` implementation returned undefined.\", \"You should probably provide your own `selectId` implementation.\", \"The entity that was passed:\", entity, \"The `selectId` implementation:\", selectId.toString());\n  }\n  return key;\n}\nfunction ensureEntitiesArray(entities) {\n  if (!Array.isArray(entities)) {\n    entities = Object.values(entities);\n  }\n  return entities;\n}\nfunction getCurrent(value) {\n  return isDraft4(value) ? current2(value) : value;\n}\nfunction splitAddedUpdatedEntities(newEntities, selectId, state) {\n  newEntities = ensureEntitiesArray(newEntities);\n  const existingIdsArray = getCurrent(state.ids);\n  const existingIds = new Set(existingIdsArray);\n  const added = [];\n  const addedIds = /* @__PURE__ */ new Set([]);\n  const updated = [];\n  for (const entity of newEntities) {\n    const id = selectIdValue(entity, selectId);\n    if (existingIds.has(id) || addedIds.has(id)) {\n      updated.push({\n        id,\n        changes: entity\n      });\n    } else {\n      addedIds.add(id);\n      added.push(entity);\n    }\n  }\n  return [added, updated, existingIdsArray];\n}\n\n// src/entities/unsorted_state_adapter.ts\nfunction createUnsortedStateAdapter(selectId) {\n  function addOneMutably(entity, state) {\n    const key = selectIdValue(entity, selectId);\n    if (key in state.entities) {\n      return;\n    }\n    state.ids.push(key);\n    state.entities[key] = entity;\n  }\n  function addManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    for (const entity of newEntities) {\n      addOneMutably(entity, state);\n    }\n  }\n  function setOneMutably(entity, state) {\n    const key = selectIdValue(entity, selectId);\n    if (!(key in state.entities)) {\n      state.ids.push(key);\n    }\n    ;\n    state.entities[key] = entity;\n  }\n  function setManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    for (const entity of newEntities) {\n      setOneMutably(entity, state);\n    }\n  }\n  function setAllMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    state.ids = [];\n    state.entities = {};\n    addManyMutably(newEntities, state);\n  }\n  function removeOneMutably(key, state) {\n    return removeManyMutably([key], state);\n  }\n  function removeManyMutably(keys, state) {\n    let didMutate = false;\n    keys.forEach((key) => {\n      if (key in state.entities) {\n        delete state.entities[key];\n        didMutate = true;\n      }\n    });\n    if (didMutate) {\n      state.ids = state.ids.filter((id) => id in state.entities);\n    }\n  }\n  function removeAllMutably(state) {\n    Object.assign(state, {\n      ids: [],\n      entities: {}\n    });\n  }\n  function takeNewKey(keys, update, state) {\n    const original3 = state.entities[update.id];\n    if (original3 === void 0) {\n      return false;\n    }\n    const updated = Object.assign({}, original3, update.changes);\n    const newKey = selectIdValue(updated, selectId);\n    const hasNewKey = newKey !== update.id;\n    if (hasNewKey) {\n      keys[update.id] = newKey;\n      delete state.entities[update.id];\n    }\n    ;\n    state.entities[newKey] = updated;\n    return hasNewKey;\n  }\n  function updateOneMutably(update, state) {\n    return updateManyMutably([update], state);\n  }\n  function updateManyMutably(updates, state) {\n    const newKeys = {};\n    const updatesPerEntity = {};\n    updates.forEach((update) => {\n      if (update.id in state.entities) {\n        updatesPerEntity[update.id] = {\n          id: update.id,\n          // Spreads ignore falsy values, so this works even if there isn't\n          // an existing update already at this key\n          changes: {\n            ...updatesPerEntity[update.id]?.changes,\n            ...update.changes\n          }\n        };\n      }\n    });\n    updates = Object.values(updatesPerEntity);\n    const didMutateEntities = updates.length > 0;\n    if (didMutateEntities) {\n      const didMutateIds = updates.filter((update) => takeNewKey(newKeys, update, state)).length > 0;\n      if (didMutateIds) {\n        state.ids = Object.values(state.entities).map((e) => selectIdValue(e, selectId));\n      }\n    }\n  }\n  function upsertOneMutably(entity, state) {\n    return upsertManyMutably([entity], state);\n  }\n  function upsertManyMutably(newEntities, state) {\n    const [added, updated] = splitAddedUpdatedEntities(newEntities, selectId, state);\n    addManyMutably(added, state);\n    updateManyMutably(updated, state);\n  }\n  return {\n    removeAll: createSingleArgumentStateOperator(removeAllMutably),\n    addOne: createStateOperator(addOneMutably),\n    addMany: createStateOperator(addManyMutably),\n    setOne: createStateOperator(setOneMutably),\n    setMany: createStateOperator(setManyMutably),\n    setAll: createStateOperator(setAllMutably),\n    updateOne: createStateOperator(updateOneMutably),\n    updateMany: createStateOperator(updateManyMutably),\n    upsertOne: createStateOperator(upsertOneMutably),\n    upsertMany: createStateOperator(upsertManyMutably),\n    removeOne: createStateOperator(removeOneMutably),\n    removeMany: createStateOperator(removeManyMutably)\n  };\n}\n\n// src/entities/sorted_state_adapter.ts\nfunction findInsertIndex(sortedItems, item, comparisonFunction) {\n  let lowIndex = 0;\n  let highIndex = sortedItems.length;\n  while (lowIndex < highIndex) {\n    let middleIndex = lowIndex + highIndex >>> 1;\n    const currentItem = sortedItems[middleIndex];\n    const res = comparisonFunction(item, currentItem);\n    if (res >= 0) {\n      lowIndex = middleIndex + 1;\n    } else {\n      highIndex = middleIndex;\n    }\n  }\n  return lowIndex;\n}\nfunction insert(sortedItems, item, comparisonFunction) {\n  const insertAtIndex = findInsertIndex(sortedItems, item, comparisonFunction);\n  sortedItems.splice(insertAtIndex, 0, item);\n  return sortedItems;\n}\nfunction createSortedStateAdapter(selectId, comparer) {\n  const {\n    removeOne,\n    removeMany,\n    removeAll\n  } = createUnsortedStateAdapter(selectId);\n  function addOneMutably(entity, state) {\n    return addManyMutably([entity], state);\n  }\n  function addManyMutably(newEntities, state, existingIds) {\n    newEntities = ensureEntitiesArray(newEntities);\n    const existingKeys = new Set(existingIds ?? getCurrent(state.ids));\n    const models = newEntities.filter((model) => !existingKeys.has(selectIdValue(model, selectId)));\n    if (models.length !== 0) {\n      mergeFunction(state, models);\n    }\n  }\n  function setOneMutably(entity, state) {\n    return setManyMutably([entity], state);\n  }\n  function setManyMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    if (newEntities.length !== 0) {\n      for (const item of newEntities) {\n        delete state.entities[selectId(item)];\n      }\n      mergeFunction(state, newEntities);\n    }\n  }\n  function setAllMutably(newEntities, state) {\n    newEntities = ensureEntitiesArray(newEntities);\n    state.entities = {};\n    state.ids = [];\n    addManyMutably(newEntities, state, []);\n  }\n  function updateOneMutably(update, state) {\n    return updateManyMutably([update], state);\n  }\n  function updateManyMutably(updates, state) {\n    let appliedUpdates = false;\n    let replacedIds = false;\n    for (let update of updates) {\n      const entity = state.entities[update.id];\n      if (!entity) {\n        continue;\n      }\n      appliedUpdates = true;\n      Object.assign(entity, update.changes);\n      const newId = selectId(entity);\n      if (update.id !== newId) {\n        replacedIds = true;\n        delete state.entities[update.id];\n        const oldIndex = state.ids.indexOf(update.id);\n        state.ids[oldIndex] = newId;\n        state.entities[newId] = entity;\n      }\n    }\n    if (appliedUpdates) {\n      mergeFunction(state, [], appliedUpdates, replacedIds);\n    }\n  }\n  function upsertOneMutably(entity, state) {\n    return upsertManyMutably([entity], state);\n  }\n  function upsertManyMutably(newEntities, state) {\n    const [added, updated, existingIdsArray] = splitAddedUpdatedEntities(newEntities, selectId, state);\n    if (added.length) {\n      addManyMutably(added, state, existingIdsArray);\n    }\n    if (updated.length) {\n      updateManyMutably(updated, state);\n    }\n  }\n  function areArraysEqual(a, b) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] === b[i]) {\n        continue;\n      }\n      return false;\n    }\n    return true;\n  }\n  const mergeFunction = (state, addedItems, appliedUpdates, replacedIds) => {\n    const currentEntities = getCurrent(state.entities);\n    const currentIds = getCurrent(state.ids);\n    const stateEntities = state.entities;\n    let ids = currentIds;\n    if (replacedIds) {\n      ids = new Set(currentIds);\n    }\n    let sortedEntities = [];\n    for (const id of ids) {\n      const entity = currentEntities[id];\n      if (entity) {\n        sortedEntities.push(entity);\n      }\n    }\n    const wasPreviouslyEmpty = sortedEntities.length === 0;\n    for (const item of addedItems) {\n      stateEntities[selectId(item)] = item;\n      if (!wasPreviouslyEmpty) {\n        insert(sortedEntities, item, comparer);\n      }\n    }\n    if (wasPreviouslyEmpty) {\n      sortedEntities = addedItems.slice().sort(comparer);\n    } else if (appliedUpdates) {\n      sortedEntities.sort(comparer);\n    }\n    const newSortedIds = sortedEntities.map(selectId);\n    if (!areArraysEqual(currentIds, newSortedIds)) {\n      state.ids = newSortedIds;\n    }\n  };\n  return {\n    removeOne,\n    removeMany,\n    removeAll,\n    addOne: createStateOperator(addOneMutably),\n    updateOne: createStateOperator(updateOneMutably),\n    upsertOne: createStateOperator(upsertOneMutably),\n    setOne: createStateOperator(setOneMutably),\n    setMany: createStateOperator(setManyMutably),\n    setAll: createStateOperator(setAllMutably),\n    addMany: createStateOperator(addManyMutably),\n    updateMany: createStateOperator(updateManyMutably),\n    upsertMany: createStateOperator(upsertManyMutably)\n  };\n}\n\n// src/entities/create_adapter.ts\nfunction createEntityAdapter(options = {}) {\n  const {\n    selectId,\n    sortComparer\n  } = {\n    sortComparer: false,\n    selectId: (instance) => instance.id,\n    ...options\n  };\n  const stateAdapter = sortComparer ? createSortedStateAdapter(selectId, sortComparer) : createUnsortedStateAdapter(selectId);\n  const stateFactory = createInitialStateFactory(stateAdapter);\n  const selectorsFactory = createSelectorsFactory();\n  return {\n    selectId,\n    sortComparer,\n    ...stateFactory,\n    ...selectorsFactory,\n    ...stateAdapter\n  };\n}\n\n// src/listenerMiddleware/index.ts\nimport { isAction as isAction3 } from \"redux\";\n\n// src/listenerMiddleware/exceptions.ts\nvar task = \"task\";\nvar listener = \"listener\";\nvar completed = \"completed\";\nvar cancelled = \"cancelled\";\nvar taskCancelled = `task-${cancelled}`;\nvar taskCompleted = `task-${completed}`;\nvar listenerCancelled = `${listener}-${cancelled}`;\nvar listenerCompleted = `${listener}-${completed}`;\nvar TaskAbortError = class {\n  constructor(code) {\n    this.code = code;\n    this.message = `${task} ${cancelled} (reason: ${code})`;\n  }\n  name = \"TaskAbortError\";\n  message;\n};\n\n// src/listenerMiddleware/utils.ts\nvar assertFunction = (func, expected) => {\n  if (typeof func !== \"function\") {\n    throw new TypeError(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(32) : `${expected} is not a function`);\n  }\n};\nvar noop2 = () => {\n};\nvar catchRejection = (promise, onError = noop2) => {\n  promise.catch(onError);\n  return promise;\n};\nvar addAbortSignalListener = (abortSignal, callback) => {\n  abortSignal.addEventListener(\"abort\", callback, {\n    once: true\n  });\n  return () => abortSignal.removeEventListener(\"abort\", callback);\n};\nvar abortControllerWithReason = (abortController, reason) => {\n  const signal = abortController.signal;\n  if (signal.aborted) {\n    return;\n  }\n  if (!(\"reason\" in signal)) {\n    Object.defineProperty(signal, \"reason\", {\n      enumerable: true,\n      value: reason,\n      configurable: true,\n      writable: true\n    });\n  }\n  ;\n  abortController.abort(reason);\n};\n\n// src/listenerMiddleware/task.ts\nvar validateActive = (signal) => {\n  if (signal.aborted) {\n    const {\n      reason\n    } = signal;\n    throw new TaskAbortError(reason);\n  }\n};\nfunction raceWithSignal(signal, promise) {\n  let cleanup = noop2;\n  return new Promise((resolve, reject) => {\n    const notifyRejection = () => reject(new TaskAbortError(signal.reason));\n    if (signal.aborted) {\n      notifyRejection();\n      return;\n    }\n    cleanup = addAbortSignalListener(signal, notifyRejection);\n    promise.finally(() => cleanup()).then(resolve, reject);\n  }).finally(() => {\n    cleanup = noop2;\n  });\n}\nvar runTask = async (task2, cleanUp) => {\n  try {\n    await Promise.resolve();\n    const value = await task2();\n    return {\n      status: \"ok\",\n      value\n    };\n  } catch (error) {\n    return {\n      status: error instanceof TaskAbortError ? \"cancelled\" : \"rejected\",\n      error\n    };\n  } finally {\n    cleanUp?.();\n  }\n};\nvar createPause = (signal) => {\n  return (promise) => {\n    return catchRejection(raceWithSignal(signal, promise).then((output) => {\n      validateActive(signal);\n      return output;\n    }));\n  };\n};\nvar createDelay = (signal) => {\n  const pause = createPause(signal);\n  return (timeoutMs) => {\n    return pause(new Promise((resolve) => setTimeout(resolve, timeoutMs)));\n  };\n};\n\n// src/listenerMiddleware/index.ts\nvar {\n  assign\n} = Object;\nvar INTERNAL_NIL_TOKEN = {};\nvar alm = \"listenerMiddleware\";\nvar createFork = (parentAbortSignal, parentBlockingPromises) => {\n  const linkControllers = (controller) => addAbortSignalListener(parentAbortSignal, () => abortControllerWithReason(controller, parentAbortSignal.reason));\n  return (taskExecutor, opts) => {\n    assertFunction(taskExecutor, \"taskExecutor\");\n    const childAbortController = new AbortController();\n    linkControllers(childAbortController);\n    const result = runTask(async () => {\n      validateActive(parentAbortSignal);\n      validateActive(childAbortController.signal);\n      const result2 = await taskExecutor({\n        pause: createPause(childAbortController.signal),\n        delay: createDelay(childAbortController.signal),\n        signal: childAbortController.signal\n      });\n      validateActive(childAbortController.signal);\n      return result2;\n    }, () => abortControllerWithReason(childAbortController, taskCompleted));\n    if (opts?.autoJoin) {\n      parentBlockingPromises.push(result.catch(noop2));\n    }\n    return {\n      result: createPause(parentAbortSignal)(result),\n      cancel() {\n        abortControllerWithReason(childAbortController, taskCancelled);\n      }\n    };\n  };\n};\nvar createTakePattern = (startListening, signal) => {\n  const take = async (predicate, timeout) => {\n    validateActive(signal);\n    let unsubscribe = () => {\n    };\n    const tuplePromise = new Promise((resolve, reject) => {\n      let stopListening = startListening({\n        predicate,\n        effect: (action, listenerApi) => {\n          listenerApi.unsubscribe();\n          resolve([action, listenerApi.getState(), listenerApi.getOriginalState()]);\n        }\n      });\n      unsubscribe = () => {\n        stopListening();\n        reject();\n      };\n    });\n    const promises = [tuplePromise];\n    if (timeout != null) {\n      promises.push(new Promise((resolve) => setTimeout(resolve, timeout, null)));\n    }\n    try {\n      const output = await raceWithSignal(signal, Promise.race(promises));\n      validateActive(signal);\n      return output;\n    } finally {\n      unsubscribe();\n    }\n  };\n  return (predicate, timeout) => catchRejection(take(predicate, timeout));\n};\nvar getListenerEntryPropsFrom = (options) => {\n  let {\n    type,\n    actionCreator,\n    matcher,\n    predicate,\n    effect\n  } = options;\n  if (type) {\n    predicate = createAction(type).match;\n  } else if (actionCreator) {\n    type = actionCreator.type;\n    predicate = actionCreator.match;\n  } else if (matcher) {\n    predicate = matcher;\n  } else if (predicate) {\n  } else {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(21) : \"Creating or removing a listener requires one of the known fields for matching an action\");\n  }\n  assertFunction(effect, \"options.listener\");\n  return {\n    predicate,\n    type,\n    effect\n  };\n};\nvar createListenerEntry = /* @__PURE__ */ assign((options) => {\n  const {\n    type,\n    predicate,\n    effect\n  } = getListenerEntryPropsFrom(options);\n  const entry = {\n    id: nanoid(),\n    effect,\n    type,\n    predicate,\n    pending: /* @__PURE__ */ new Set(),\n    unsubscribe: () => {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(22) : \"Unsubscribe not initialized\");\n    }\n  };\n  return entry;\n}, {\n  withTypes: () => createListenerEntry\n});\nvar findListenerEntry = (listenerMap, options) => {\n  const {\n    type,\n    effect,\n    predicate\n  } = getListenerEntryPropsFrom(options);\n  return Array.from(listenerMap.values()).find((entry) => {\n    const matchPredicateOrType = typeof type === \"string\" ? entry.type === type : entry.predicate === predicate;\n    return matchPredicateOrType && entry.effect === effect;\n  });\n};\nvar cancelActiveListeners = (entry) => {\n  entry.pending.forEach((controller) => {\n    abortControllerWithReason(controller, listenerCancelled);\n  });\n};\nvar createClearListenerMiddleware = (listenerMap) => {\n  return () => {\n    listenerMap.forEach(cancelActiveListeners);\n    listenerMap.clear();\n  };\n};\nvar safelyNotifyError = (errorHandler, errorToNotify, errorInfo) => {\n  try {\n    errorHandler(errorToNotify, errorInfo);\n  } catch (errorHandlerError) {\n    setTimeout(() => {\n      throw errorHandlerError;\n    }, 0);\n  }\n};\nvar addListener = /* @__PURE__ */ assign(/* @__PURE__ */ createAction(`${alm}/add`), {\n  withTypes: () => addListener\n});\nvar clearAllListeners = /* @__PURE__ */ createAction(`${alm}/removeAll`);\nvar removeListener = /* @__PURE__ */ assign(/* @__PURE__ */ createAction(`${alm}/remove`), {\n  withTypes: () => removeListener\n});\nvar defaultErrorHandler = (...args) => {\n  console.error(`${alm}/error`, ...args);\n};\nvar createListenerMiddleware = (middlewareOptions = {}) => {\n  const listenerMap = /* @__PURE__ */ new Map();\n  const {\n    extra,\n    onError = defaultErrorHandler\n  } = middlewareOptions;\n  assertFunction(onError, \"onError\");\n  const insertEntry = (entry) => {\n    entry.unsubscribe = () => listenerMap.delete(entry.id);\n    listenerMap.set(entry.id, entry);\n    return (cancelOptions) => {\n      entry.unsubscribe();\n      if (cancelOptions?.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    };\n  };\n  const startListening = (options) => {\n    const entry = findListenerEntry(listenerMap, options) ?? createListenerEntry(options);\n    return insertEntry(entry);\n  };\n  assign(startListening, {\n    withTypes: () => startListening\n  });\n  const stopListening = (options) => {\n    const entry = findListenerEntry(listenerMap, options);\n    if (entry) {\n      entry.unsubscribe();\n      if (options.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    }\n    return !!entry;\n  };\n  assign(stopListening, {\n    withTypes: () => stopListening\n  });\n  const notifyListener = async (entry, action, api, getOriginalState) => {\n    const internalTaskController = new AbortController();\n    const take = createTakePattern(startListening, internalTaskController.signal);\n    const autoJoinPromises = [];\n    try {\n      entry.pending.add(internalTaskController);\n      await Promise.resolve(entry.effect(\n        action,\n        // Use assign() rather than ... to avoid extra helper functions added to bundle\n        assign({}, api, {\n          getOriginalState,\n          condition: (predicate, timeout) => take(predicate, timeout).then(Boolean),\n          take,\n          delay: createDelay(internalTaskController.signal),\n          pause: createPause(internalTaskController.signal),\n          extra,\n          signal: internalTaskController.signal,\n          fork: createFork(internalTaskController.signal, autoJoinPromises),\n          unsubscribe: entry.unsubscribe,\n          subscribe: () => {\n            listenerMap.set(entry.id, entry);\n          },\n          cancelActiveListeners: () => {\n            entry.pending.forEach((controller, _, set) => {\n              if (controller !== internalTaskController) {\n                abortControllerWithReason(controller, listenerCancelled);\n                set.delete(controller);\n              }\n            });\n          },\n          cancel: () => {\n            abortControllerWithReason(internalTaskController, listenerCancelled);\n            entry.pending.delete(internalTaskController);\n          },\n          throwIfCancelled: () => {\n            validateActive(internalTaskController.signal);\n          }\n        })\n      ));\n    } catch (listenerError) {\n      if (!(listenerError instanceof TaskAbortError)) {\n        safelyNotifyError(onError, listenerError, {\n          raisedBy: \"effect\"\n        });\n      }\n    } finally {\n      await Promise.all(autoJoinPromises);\n      abortControllerWithReason(internalTaskController, listenerCompleted);\n      entry.pending.delete(internalTaskController);\n    }\n  };\n  const clearListenerMiddleware = createClearListenerMiddleware(listenerMap);\n  const middleware = (api) => (next) => (action) => {\n    if (!isAction3(action)) {\n      return next(action);\n    }\n    if (addListener.match(action)) {\n      return startListening(action.payload);\n    }\n    if (clearAllListeners.match(action)) {\n      clearListenerMiddleware();\n      return;\n    }\n    if (removeListener.match(action)) {\n      return stopListening(action.payload);\n    }\n    let originalState = api.getState();\n    const getOriginalState = () => {\n      if (originalState === INTERNAL_NIL_TOKEN) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(23) : `${alm}: getOriginalState can only be called synchronously`);\n      }\n      return originalState;\n    };\n    let result;\n    try {\n      result = next(action);\n      if (listenerMap.size > 0) {\n        const currentState = api.getState();\n        const listenerEntries = Array.from(listenerMap.values());\n        for (const entry of listenerEntries) {\n          let runListener = false;\n          try {\n            runListener = entry.predicate(action, currentState, originalState);\n          } catch (predicateError) {\n            runListener = false;\n            safelyNotifyError(onError, predicateError, {\n              raisedBy: \"predicate\"\n            });\n          }\n          if (!runListener) {\n            continue;\n          }\n          notifyListener(entry, action, api, getOriginalState);\n        }\n      }\n    } finally {\n      originalState = INTERNAL_NIL_TOKEN;\n    }\n    return result;\n  };\n  return {\n    middleware,\n    startListening,\n    stopListening,\n    clearListeners: clearListenerMiddleware\n  };\n};\n\n// src/dynamicMiddleware/index.ts\nimport { compose as compose3 } from \"redux\";\nvar createMiddlewareEntry = (middleware) => ({\n  middleware,\n  applied: /* @__PURE__ */ new Map()\n});\nvar matchInstance = (instanceId) => (action) => action?.meta?.instanceId === instanceId;\nvar createDynamicMiddleware = () => {\n  const instanceId = nanoid();\n  const middlewareMap = /* @__PURE__ */ new Map();\n  const withMiddleware = Object.assign(createAction(\"dynamicMiddleware/add\", (...middlewares) => ({\n    payload: middlewares,\n    meta: {\n      instanceId\n    }\n  })), {\n    withTypes: () => withMiddleware\n  });\n  const addMiddleware = Object.assign(function addMiddleware2(...middlewares) {\n    middlewares.forEach((middleware2) => {\n      getOrInsertComputed(middlewareMap, middleware2, createMiddlewareEntry);\n    });\n  }, {\n    withTypes: () => addMiddleware\n  });\n  const getFinalMiddleware = (api) => {\n    const appliedMiddleware = Array.from(middlewareMap.values()).map((entry) => getOrInsertComputed(entry.applied, api, entry.middleware));\n    return compose3(...appliedMiddleware);\n  };\n  const isWithMiddleware = isAllOf(withMiddleware, matchInstance(instanceId));\n  const middleware = (api) => (next) => (action) => {\n    if (isWithMiddleware(action)) {\n      addMiddleware(...action.payload);\n      return api.dispatch;\n    }\n    return getFinalMiddleware(api)(next)(action);\n  };\n  return {\n    middleware,\n    addMiddleware,\n    withMiddleware,\n    instanceId\n  };\n};\n\n// src/combineSlices.ts\nimport { combineReducers as combineReducers2 } from \"redux\";\nvar isSliceLike = (maybeSliceLike) => \"reducerPath\" in maybeSliceLike && typeof maybeSliceLike.reducerPath === \"string\";\nvar getReducers = (slices) => slices.flatMap((sliceOrMap) => isSliceLike(sliceOrMap) ? [[sliceOrMap.reducerPath, sliceOrMap.reducer]] : Object.entries(sliceOrMap));\nvar ORIGINAL_STATE = Symbol.for(\"rtk-state-proxy-original\");\nvar isStateProxy = (value) => !!value && !!value[ORIGINAL_STATE];\nvar stateProxyMap = /* @__PURE__ */ new WeakMap();\nvar createStateProxy = (state, reducerMap, initialStateCache) => getOrInsertComputed(stateProxyMap, state, () => new Proxy(state, {\n  get: (target, prop, receiver) => {\n    if (prop === ORIGINAL_STATE) return target;\n    const result = Reflect.get(target, prop, receiver);\n    if (typeof result === \"undefined\") {\n      const cached = initialStateCache[prop];\n      if (typeof cached !== \"undefined\") return cached;\n      const reducer = reducerMap[prop];\n      if (reducer) {\n        const reducerResult = reducer(void 0, {\n          type: nanoid()\n        });\n        if (typeof reducerResult === \"undefined\") {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(24) : `The slice reducer for key \"${prop.toString()}\" returned undefined when called for selector(). If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);\n        }\n        initialStateCache[prop] = reducerResult;\n        return reducerResult;\n      }\n    }\n    return result;\n  }\n}));\nvar original = (state) => {\n  if (!isStateProxy(state)) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(25) : \"original must be used on state Proxy\");\n  }\n  return state[ORIGINAL_STATE];\n};\nvar emptyObject = {};\nvar noopReducer = (state = emptyObject) => state;\nfunction combineSlices(...slices) {\n  const reducerMap = Object.fromEntries(getReducers(slices));\n  const getReducer = () => Object.keys(reducerMap).length ? combineReducers2(reducerMap) : noopReducer;\n  let reducer = getReducer();\n  function combinedReducer(state, action) {\n    return reducer(state, action);\n  }\n  combinedReducer.withLazyLoadedSlices = () => combinedReducer;\n  const initialStateCache = {};\n  const inject = (slice, config = {}) => {\n    const {\n      reducerPath,\n      reducer: reducerToInject\n    } = slice;\n    const currentReducer = reducerMap[reducerPath];\n    if (!config.overrideExisting && currentReducer && currentReducer !== reducerToInject) {\n      if (typeof process !== \"undefined\" && process.env.NODE_ENV === \"development\") {\n        console.error(`called \\`inject\\` to override already-existing reducer ${reducerPath} without specifying \\`overrideExisting: true\\``);\n      }\n      return combinedReducer;\n    }\n    if (config.overrideExisting && currentReducer !== reducerToInject) {\n      delete initialStateCache[reducerPath];\n    }\n    reducerMap[reducerPath] = reducerToInject;\n    reducer = getReducer();\n    return combinedReducer;\n  };\n  const selector = Object.assign(function makeSelector(selectorFn, selectState) {\n    return function selector2(state, ...args) {\n      return selectorFn(createStateProxy(selectState ? selectState(state, ...args) : state, reducerMap, initialStateCache), ...args);\n    };\n  }, {\n    original\n  });\n  return Object.assign(combinedReducer, {\n    inject,\n    selector\n  });\n}\n\n// src/formatProdErrorMessage.ts\nfunction formatProdErrorMessage(code) {\n  return `Minified Redux Toolkit error #${code}; visit https://redux-toolkit.js.org/Errors?code=${code} for the full message or use the non-minified dev environment for full errors. `;\n}\nexport {\n  ReducerType,\n  SHOULD_AUTOBATCH,\n  TaskAbortError,\n  Tuple,\n  addListener,\n  asyncThunkCreator,\n  autoBatchEnhancer,\n  buildCreateSlice,\n  clearAllListeners,\n  combineSlices,\n  configureStore,\n  createAction,\n  createActionCreatorInvariantMiddleware,\n  createAsyncThunk,\n  createDraftSafeSelector,\n  createDraftSafeSelectorCreator,\n  createDynamicMiddleware,\n  createEntityAdapter,\n  createImmutableStateInvariantMiddleware,\n  createListenerMiddleware,\n  produce as createNextState,\n  createReducer,\n  createSelector,\n  createSelectorCreator2 as createSelectorCreator,\n  createSerializableStateInvariantMiddleware,\n  createSlice,\n  current3 as current,\n  findNonSerializableValue,\n  formatProdErrorMessage,\n  freeze,\n  isActionCreator,\n  isAllOf,\n  isAnyOf,\n  isAsyncThunkAction,\n  isDraft5 as isDraft,\n  isFSA as isFluxStandardAction,\n  isFulfilled,\n  isImmutableDefault,\n  isPending,\n  isPlain,\n  isRejected,\n  isRejectedWithValue,\n  lruMemoize,\n  miniSerializeError,\n  nanoid,\n  original2 as original,\n  prepareAutoBatched,\n  removeListener,\n  unwrapResult,\n  weakMapMemoize2 as weakMapMemoize\n};\n//# sourceMappingURL=redux-toolkit.modern.mjs.map","import { apiRequestPost, apiRequestGet } from 'mastodon/api';\nimport type {\n  ApiAccountJSON,\n  ApiFamiliarFollowersJSON,\n} from 'mastodon/api_types/accounts';\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\nimport type { ApiHashtagJSON } from 'mastodon/api_types/tags';\n\nexport const apiSubmitAccountNote = (id: string, value: string) =>\n  apiRequestPost<ApiRelationshipJSON>(`v1/accounts/${id}/note`, {\n    comment: value,\n  });\n\nexport const apiFollowAccount = (\n  id: string,\n  params?: {\n    reblogs: boolean;\n  },\n) =>\n  apiRequestPost<ApiRelationshipJSON>(`v1/accounts/${id}/follow`, {\n    ...params,\n  });\n\nexport const apiUnfollowAccount = (id: string) =>\n  apiRequestPost<ApiRelationshipJSON>(`v1/accounts/${id}/unfollow`);\n\nexport const apiRemoveAccountFromFollowers = (id: string) =>\n  apiRequestPost<ApiRelationshipJSON>(\n    `v1/accounts/${id}/remove_from_followers`,\n  );\n\nexport const apiGetFeaturedTags = (id: string) =>\n  apiRequestGet<ApiHashtagJSON>(`v1/accounts/${id}/featured_tags`);\n\nexport const apiGetEndorsedAccounts = (id: string) =>\n  apiRequestGet<ApiAccountJSON>(`v1/accounts/${id}/endorsements`);\n\nexport const apiGetFamiliarFollowers = (id: string) =>\n  apiRequestGet<ApiFamiliarFollowersJSON>('v1/accounts/familiar_followers', {\n    id,\n  });\n","/**\n * @license React\n * use-sync-external-store-with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = React.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/use-sync-external-store-with-selector.production.js');\n} else {\n  module.exports = require('./cjs/use-sync-external-store-with-selector.development.js');\n}\n","// src/utils/react.ts\nimport * as React from \"react\";\n\n// src/utils/react-is.ts\nvar IS_REACT_19 = /* @__PURE__ */ React.version.startsWith(\"19\");\nvar REACT_ELEMENT_TYPE = /* @__PURE__ */ Symbol.for(\n  IS_REACT_19 ? \"react.transitional.element\" : \"react.element\"\n);\nvar REACT_PORTAL_TYPE = /* @__PURE__ */ Symbol.for(\"react.portal\");\nvar REACT_FRAGMENT_TYPE = /* @__PURE__ */ Symbol.for(\"react.fragment\");\nvar REACT_STRICT_MODE_TYPE = /* @__PURE__ */ Symbol.for(\"react.strict_mode\");\nvar REACT_PROFILER_TYPE = /* @__PURE__ */ Symbol.for(\"react.profiler\");\nvar REACT_CONSUMER_TYPE = /* @__PURE__ */ Symbol.for(\"react.consumer\");\nvar REACT_CONTEXT_TYPE = /* @__PURE__ */ Symbol.for(\"react.context\");\nvar REACT_FORWARD_REF_TYPE = /* @__PURE__ */ Symbol.for(\"react.forward_ref\");\nvar REACT_SUSPENSE_TYPE = /* @__PURE__ */ Symbol.for(\"react.suspense\");\nvar REACT_SUSPENSE_LIST_TYPE = /* @__PURE__ */ Symbol.for(\n  \"react.suspense_list\"\n);\nvar REACT_MEMO_TYPE = /* @__PURE__ */ Symbol.for(\"react.memo\");\nvar REACT_LAZY_TYPE = /* @__PURE__ */ Symbol.for(\"react.lazy\");\nvar REACT_OFFSCREEN_TYPE = /* @__PURE__ */ Symbol.for(\"react.offscreen\");\nvar REACT_CLIENT_REFERENCE = /* @__PURE__ */ Symbol.for(\n  \"react.client.reference\"\n);\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nfunction isValidElementType(type) {\n  return typeof type === \"string\" || typeof type === \"function\" || type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || type === REACT_OFFSCREEN_TYPE || typeof type === \"object\" && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_CONSUMER_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_CLIENT_REFERENCE || type.getModuleId !== void 0) ? true : false;\n}\nfunction typeOf(object) {\n  if (typeof object === \"object\" && object !== null) {\n    const { $$typeof } = object;\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE:\n        switch (object = object.type, object) {\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n          case REACT_SUSPENSE_LIST_TYPE:\n            return object;\n          default:\n            switch (object = object && object.$$typeof, object) {\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n                return object;\n              case REACT_CONSUMER_TYPE:\n                return object;\n              default:\n                return $$typeof;\n            }\n        }\n      case REACT_PORTAL_TYPE:\n        return $$typeof;\n    }\n  }\n}\nfunction isContextConsumer(object) {\n  return IS_REACT_19 ? typeOf(object) === REACT_CONSUMER_TYPE : typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\n\n// src/utils/warning.ts\nfunction warning(message) {\n  if (typeof console !== \"undefined\" && typeof console.error === \"function\") {\n    console.error(message);\n  }\n  try {\n    throw new Error(message);\n  } catch (e) {\n  }\n}\n\n// src/connect/verifySubselectors.ts\nfunction verify(selector, methodName) {\n  if (!selector) {\n    throw new Error(`Unexpected value for ${methodName} in connect.`);\n  } else if (methodName === \"mapStateToProps\" || methodName === \"mapDispatchToProps\") {\n    if (!Object.prototype.hasOwnProperty.call(selector, \"dependsOnOwnProps\")) {\n      warning(\n        `The selector for ${methodName} of connect did not specify a value for dependsOnOwnProps.`\n      );\n    }\n  }\n}\nfunction verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps) {\n  verify(mapStateToProps, \"mapStateToProps\");\n  verify(mapDispatchToProps, \"mapDispatchToProps\");\n  verify(mergeProps, \"mergeProps\");\n}\n\n// src/connect/selectorFactory.ts\nfunction pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, {\n  areStatesEqual,\n  areOwnPropsEqual,\n  areStatePropsEqual\n}) {\n  let hasRunAtLeastOnce = false;\n  let state;\n  let ownProps;\n  let stateProps;\n  let dispatchProps;\n  let mergedProps;\n  function handleFirstCall(firstState, firstOwnProps) {\n    state = firstState;\n    ownProps = firstOwnProps;\n    stateProps = mapStateToProps(state, ownProps);\n    dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    hasRunAtLeastOnce = true;\n    return mergedProps;\n  }\n  function handleNewPropsAndNewState() {\n    stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps)\n      dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleNewProps() {\n    if (mapStateToProps.dependsOnOwnProps)\n      stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps)\n      dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleNewState() {\n    const nextStateProps = mapStateToProps(state, ownProps);\n    const statePropsChanged = !areStatePropsEqual(nextStateProps, stateProps);\n    stateProps = nextStateProps;\n    if (statePropsChanged)\n      mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleSubsequentCalls(nextState, nextOwnProps) {\n    const propsChanged = !areOwnPropsEqual(nextOwnProps, ownProps);\n    const stateChanged = !areStatesEqual(\n      nextState,\n      state,\n      nextOwnProps,\n      ownProps\n    );\n    state = nextState;\n    ownProps = nextOwnProps;\n    if (propsChanged && stateChanged) return handleNewPropsAndNewState();\n    if (propsChanged) return handleNewProps();\n    if (stateChanged) return handleNewState();\n    return mergedProps;\n  }\n  return function pureFinalPropsSelector(nextState, nextOwnProps) {\n    return hasRunAtLeastOnce ? handleSubsequentCalls(nextState, nextOwnProps) : handleFirstCall(nextState, nextOwnProps);\n  };\n}\nfunction finalPropsSelectorFactory(dispatch, {\n  initMapStateToProps,\n  initMapDispatchToProps,\n  initMergeProps,\n  ...options\n}) {\n  const mapStateToProps = initMapStateToProps(dispatch, options);\n  const mapDispatchToProps = initMapDispatchToProps(dispatch, options);\n  const mergeProps = initMergeProps(dispatch, options);\n  if (process.env.NODE_ENV !== \"production\") {\n    verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps);\n  }\n  return pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, options);\n}\n\n// src/utils/bindActionCreators.ts\nfunction bindActionCreators(actionCreators, dispatch) {\n  const boundActionCreators = {};\n  for (const key in actionCreators) {\n    const actionCreator = actionCreators[key];\n    if (typeof actionCreator === \"function\") {\n      boundActionCreators[key] = (...args) => dispatch(actionCreator(...args));\n    }\n  }\n  return boundActionCreators;\n}\n\n// src/utils/isPlainObject.ts\nfunction isPlainObject(obj) {\n  if (typeof obj !== \"object\" || obj === null) return false;\n  const proto = Object.getPrototypeOf(obj);\n  if (proto === null) return true;\n  let baseProto = proto;\n  while (Object.getPrototypeOf(baseProto) !== null) {\n    baseProto = Object.getPrototypeOf(baseProto);\n  }\n  return proto === baseProto;\n}\n\n// src/utils/verifyPlainObject.ts\nfunction verifyPlainObject(value, displayName, methodName) {\n  if (!isPlainObject(value)) {\n    warning(\n      `${methodName}() in ${displayName} must return a plain object. Instead received ${value}.`\n    );\n  }\n}\n\n// src/connect/wrapMapToProps.ts\nfunction wrapMapToPropsConstant(getConstant) {\n  return function initConstantSelector(dispatch) {\n    const constant = getConstant(dispatch);\n    function constantSelector() {\n      return constant;\n    }\n    constantSelector.dependsOnOwnProps = false;\n    return constantSelector;\n  };\n}\nfunction getDependsOnOwnProps(mapToProps) {\n  return mapToProps.dependsOnOwnProps ? Boolean(mapToProps.dependsOnOwnProps) : mapToProps.length !== 1;\n}\nfunction wrapMapToPropsFunc(mapToProps, methodName) {\n  return function initProxySelector(dispatch, { displayName }) {\n    const proxy = function mapToPropsProxy(stateOrDispatch, ownProps) {\n      return proxy.dependsOnOwnProps ? proxy.mapToProps(stateOrDispatch, ownProps) : proxy.mapToProps(stateOrDispatch, void 0);\n    };\n    proxy.dependsOnOwnProps = true;\n    proxy.mapToProps = function detectFactoryAndVerify(stateOrDispatch, ownProps) {\n      proxy.mapToProps = mapToProps;\n      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps);\n      let props = proxy(stateOrDispatch, ownProps);\n      if (typeof props === \"function\") {\n        proxy.mapToProps = props;\n        proxy.dependsOnOwnProps = getDependsOnOwnProps(props);\n        props = proxy(stateOrDispatch, ownProps);\n      }\n      if (process.env.NODE_ENV !== \"production\")\n        verifyPlainObject(props, displayName, methodName);\n      return props;\n    };\n    return proxy;\n  };\n}\n\n// src/connect/invalidArgFactory.ts\nfunction createInvalidArgFactory(arg, name) {\n  return (dispatch, options) => {\n    throw new Error(\n      `Invalid value of type ${typeof arg} for ${name} argument when connecting component ${options.wrappedComponentName}.`\n    );\n  };\n}\n\n// src/connect/mapDispatchToProps.ts\nfunction mapDispatchToPropsFactory(mapDispatchToProps) {\n  return mapDispatchToProps && typeof mapDispatchToProps === \"object\" ? wrapMapToPropsConstant(\n    (dispatch) => (\n      // @ts-ignore\n      bindActionCreators(mapDispatchToProps, dispatch)\n    )\n  ) : !mapDispatchToProps ? wrapMapToPropsConstant((dispatch) => ({\n    dispatch\n  })) : typeof mapDispatchToProps === \"function\" ? (\n    // @ts-ignore\n    wrapMapToPropsFunc(mapDispatchToProps, \"mapDispatchToProps\")\n  ) : createInvalidArgFactory(mapDispatchToProps, \"mapDispatchToProps\");\n}\n\n// src/connect/mapStateToProps.ts\nfunction mapStateToPropsFactory(mapStateToProps) {\n  return !mapStateToProps ? wrapMapToPropsConstant(() => ({})) : typeof mapStateToProps === \"function\" ? (\n    // @ts-ignore\n    wrapMapToPropsFunc(mapStateToProps, \"mapStateToProps\")\n  ) : createInvalidArgFactory(mapStateToProps, \"mapStateToProps\");\n}\n\n// src/connect/mergeProps.ts\nfunction defaultMergeProps(stateProps, dispatchProps, ownProps) {\n  return { ...ownProps, ...stateProps, ...dispatchProps };\n}\nfunction wrapMergePropsFunc(mergeProps) {\n  return function initMergePropsProxy(dispatch, { displayName, areMergedPropsEqual }) {\n    let hasRunOnce = false;\n    let mergedProps;\n    return function mergePropsProxy(stateProps, dispatchProps, ownProps) {\n      const nextMergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n      if (hasRunOnce) {\n        if (!areMergedPropsEqual(nextMergedProps, mergedProps))\n          mergedProps = nextMergedProps;\n      } else {\n        hasRunOnce = true;\n        mergedProps = nextMergedProps;\n        if (process.env.NODE_ENV !== \"production\")\n          verifyPlainObject(mergedProps, displayName, \"mergeProps\");\n      }\n      return mergedProps;\n    };\n  };\n}\nfunction mergePropsFactory(mergeProps) {\n  return !mergeProps ? () => defaultMergeProps : typeof mergeProps === \"function\" ? wrapMergePropsFunc(mergeProps) : createInvalidArgFactory(mergeProps, \"mergeProps\");\n}\n\n// src/utils/batch.ts\nfunction defaultNoopBatch(callback) {\n  callback();\n}\n\n// src/utils/Subscription.ts\nfunction createListenerCollection() {\n  let first = null;\n  let last = null;\n  return {\n    clear() {\n      first = null;\n      last = null;\n    },\n    notify() {\n      defaultNoopBatch(() => {\n        let listener = first;\n        while (listener) {\n          listener.callback();\n          listener = listener.next;\n        }\n      });\n    },\n    get() {\n      const listeners = [];\n      let listener = first;\n      while (listener) {\n        listeners.push(listener);\n        listener = listener.next;\n      }\n      return listeners;\n    },\n    subscribe(callback) {\n      let isSubscribed = true;\n      const listener = last = {\n        callback,\n        next: null,\n        prev: last\n      };\n      if (listener.prev) {\n        listener.prev.next = listener;\n      } else {\n        first = listener;\n      }\n      return function unsubscribe() {\n        if (!isSubscribed || first === null) return;\n        isSubscribed = false;\n        if (listener.next) {\n          listener.next.prev = listener.prev;\n        } else {\n          last = listener.prev;\n        }\n        if (listener.prev) {\n          listener.prev.next = listener.next;\n        } else {\n          first = listener.next;\n        }\n      };\n    }\n  };\n}\nvar nullListeners = {\n  notify() {\n  },\n  get: () => []\n};\nfunction createSubscription(store, parentSub) {\n  let unsubscribe;\n  let listeners = nullListeners;\n  let subscriptionsAmount = 0;\n  let selfSubscribed = false;\n  function addNestedSub(listener) {\n    trySubscribe();\n    const cleanupListener = listeners.subscribe(listener);\n    let removed = false;\n    return () => {\n      if (!removed) {\n        removed = true;\n        cleanupListener();\n        tryUnsubscribe();\n      }\n    };\n  }\n  function notifyNestedSubs() {\n    listeners.notify();\n  }\n  function handleChangeWrapper() {\n    if (subscription.onStateChange) {\n      subscription.onStateChange();\n    }\n  }\n  function isSubscribed() {\n    return selfSubscribed;\n  }\n  function trySubscribe() {\n    subscriptionsAmount++;\n    if (!unsubscribe) {\n      unsubscribe = parentSub ? parentSub.addNestedSub(handleChangeWrapper) : store.subscribe(handleChangeWrapper);\n      listeners = createListenerCollection();\n    }\n  }\n  function tryUnsubscribe() {\n    subscriptionsAmount--;\n    if (unsubscribe && subscriptionsAmount === 0) {\n      unsubscribe();\n      unsubscribe = void 0;\n      listeners.clear();\n      listeners = nullListeners;\n    }\n  }\n  function trySubscribeSelf() {\n    if (!selfSubscribed) {\n      selfSubscribed = true;\n      trySubscribe();\n    }\n  }\n  function tryUnsubscribeSelf() {\n    if (selfSubscribed) {\n      selfSubscribed = false;\n      tryUnsubscribe();\n    }\n  }\n  const subscription = {\n    addNestedSub,\n    notifyNestedSubs,\n    handleChangeWrapper,\n    isSubscribed,\n    trySubscribe: trySubscribeSelf,\n    tryUnsubscribe: tryUnsubscribeSelf,\n    getListeners: () => listeners\n  };\n  return subscription;\n}\n\n// src/utils/useIsomorphicLayoutEffect.ts\nvar canUseDOM = () => !!(typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\");\nvar isDOM = /* @__PURE__ */ canUseDOM();\nvar isRunningInReactNative = () => typeof navigator !== \"undefined\" && navigator.product === \"ReactNative\";\nvar isReactNative = /* @__PURE__ */ isRunningInReactNative();\nvar getUseIsomorphicLayoutEffect = () => isDOM || isReactNative ? React.useLayoutEffect : React.useEffect;\nvar useIsomorphicLayoutEffect = /* @__PURE__ */ getUseIsomorphicLayoutEffect();\n\n// src/utils/shallowEqual.ts\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) return true;\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return false;\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// src/utils/hoistStatics.ts\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  $$typeof: true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  $$typeof: true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {\n  [ForwardRef]: FORWARD_REF_STATICS,\n  [Memo]: MEMO_STATICS\n};\nfunction getStatics(component) {\n  if (isMemo(component)) {\n    return MEMO_STATICS;\n  }\n  return TYPE_STATICS[component[\"$$typeof\"]] || REACT_STATICS;\n}\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent) {\n  if (typeof sourceComponent !== \"string\") {\n    if (objectPrototype) {\n      const inheritedComponent = getPrototypeOf(sourceComponent);\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent);\n      }\n    }\n    let keys = getOwnPropertyNames(sourceComponent);\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n    const targetStatics = getStatics(targetComponent);\n    const sourceStatics = getStatics(sourceComponent);\n    for (let i = 0; i < keys.length; ++i) {\n      const key = keys[i];\n      if (!KNOWN_STATICS[key] && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        const descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n        try {\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {\n        }\n      }\n    }\n  }\n  return targetComponent;\n}\n\n// src/components/Context.ts\nvar ContextKey = /* @__PURE__ */ Symbol.for(`react-redux-context`);\nvar gT = typeof globalThis !== \"undefined\" ? globalThis : (\n  /* fall back to a per-module scope (pre-8.1 behaviour) if `globalThis` is not available */\n  {}\n);\nfunction getContext() {\n  if (!React.createContext) return {};\n  const contextMap = gT[ContextKey] ??= /* @__PURE__ */ new Map();\n  let realContext = contextMap.get(React.createContext);\n  if (!realContext) {\n    realContext = React.createContext(\n      null\n    );\n    if (process.env.NODE_ENV !== \"production\") {\n      realContext.displayName = \"ReactRedux\";\n    }\n    contextMap.set(React.createContext, realContext);\n  }\n  return realContext;\n}\nvar ReactReduxContext = /* @__PURE__ */ getContext();\n\n// src/components/connect.tsx\nvar NO_SUBSCRIPTION_ARRAY = [null, null];\nvar stringifyComponent = (Comp) => {\n  try {\n    return JSON.stringify(Comp);\n  } catch (err) {\n    return String(Comp);\n  }\n};\nfunction useIsomorphicLayoutEffectWithArgs(effectFunc, effectArgs, dependencies) {\n  useIsomorphicLayoutEffect(() => effectFunc(...effectArgs), dependencies);\n}\nfunction captureWrapperProps(lastWrapperProps, lastChildProps, renderIsScheduled, wrapperProps, childPropsFromStoreUpdate, notifyNestedSubs) {\n  lastWrapperProps.current = wrapperProps;\n  renderIsScheduled.current = false;\n  if (childPropsFromStoreUpdate.current) {\n    childPropsFromStoreUpdate.current = null;\n    notifyNestedSubs();\n  }\n}\nfunction subscribeUpdates(shouldHandleStateChanges, store, subscription, childPropsSelector, lastWrapperProps, lastChildProps, renderIsScheduled, isMounted, childPropsFromStoreUpdate, notifyNestedSubs, additionalSubscribeListener) {\n  if (!shouldHandleStateChanges) return () => {\n  };\n  let didUnsubscribe = false;\n  let lastThrownError = null;\n  const checkForUpdates = () => {\n    if (didUnsubscribe || !isMounted.current) {\n      return;\n    }\n    const latestStoreState = store.getState();\n    let newChildProps, error;\n    try {\n      newChildProps = childPropsSelector(\n        latestStoreState,\n        lastWrapperProps.current\n      );\n    } catch (e) {\n      error = e;\n      lastThrownError = e;\n    }\n    if (!error) {\n      lastThrownError = null;\n    }\n    if (newChildProps === lastChildProps.current) {\n      if (!renderIsScheduled.current) {\n        notifyNestedSubs();\n      }\n    } else {\n      lastChildProps.current = newChildProps;\n      childPropsFromStoreUpdate.current = newChildProps;\n      renderIsScheduled.current = true;\n      additionalSubscribeListener();\n    }\n  };\n  subscription.onStateChange = checkForUpdates;\n  subscription.trySubscribe();\n  checkForUpdates();\n  const unsubscribeWrapper = () => {\n    didUnsubscribe = true;\n    subscription.tryUnsubscribe();\n    subscription.onStateChange = null;\n    if (lastThrownError) {\n      throw lastThrownError;\n    }\n  };\n  return unsubscribeWrapper;\n}\nfunction strictEqual(a, b) {\n  return a === b;\n}\nvar hasWarnedAboutDeprecatedPureOption = false;\nfunction connect(mapStateToProps, mapDispatchToProps, mergeProps, {\n  // The `pure` option has been removed, so TS doesn't like us destructuring this to check its existence.\n  // @ts-ignore\n  pure,\n  areStatesEqual = strictEqual,\n  areOwnPropsEqual = shallowEqual,\n  areStatePropsEqual = shallowEqual,\n  areMergedPropsEqual = shallowEqual,\n  // use React's forwardRef to expose a ref of the wrapped component\n  forwardRef = false,\n  // the context consumer to use\n  context = ReactReduxContext\n} = {}) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (pure !== void 0 && !hasWarnedAboutDeprecatedPureOption) {\n      hasWarnedAboutDeprecatedPureOption = true;\n      warning(\n        'The `pure` option has been removed. `connect` is now always a \"pure/memoized\" component'\n      );\n    }\n  }\n  const Context = context;\n  const initMapStateToProps = mapStateToPropsFactory(mapStateToProps);\n  const initMapDispatchToProps = mapDispatchToPropsFactory(mapDispatchToProps);\n  const initMergeProps = mergePropsFactory(mergeProps);\n  const shouldHandleStateChanges = Boolean(mapStateToProps);\n  const wrapWithConnect = (WrappedComponent) => {\n    if (process.env.NODE_ENV !== \"production\") {\n      const isValid = /* @__PURE__ */ isValidElementType(WrappedComponent);\n      if (!isValid)\n        throw new Error(\n          `You must pass a component to the function returned by connect. Instead received ${stringifyComponent(\n            WrappedComponent\n          )}`\n        );\n    }\n    const wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    const displayName = `Connect(${wrappedComponentName})`;\n    const selectorFactoryOptions = {\n      shouldHandleStateChanges,\n      displayName,\n      wrappedComponentName,\n      WrappedComponent,\n      // @ts-ignore\n      initMapStateToProps,\n      initMapDispatchToProps,\n      initMergeProps,\n      areStatesEqual,\n      areStatePropsEqual,\n      areOwnPropsEqual,\n      areMergedPropsEqual\n    };\n    function ConnectFunction(props) {\n      const [propsContext, reactReduxForwardedRef, wrapperProps] = React.useMemo(() => {\n        const { reactReduxForwardedRef: reactReduxForwardedRef2, ...wrapperProps2 } = props;\n        return [props.context, reactReduxForwardedRef2, wrapperProps2];\n      }, [props]);\n      const ContextToUse = React.useMemo(() => {\n        let ResultContext = Context;\n        if (propsContext?.Consumer) {\n          if (process.env.NODE_ENV !== \"production\") {\n            const isValid = /* @__PURE__ */ isContextConsumer(\n              // @ts-ignore\n              /* @__PURE__ */ React.createElement(propsContext.Consumer, null)\n            );\n            if (!isValid) {\n              throw new Error(\n                \"You must pass a valid React context consumer as `props.context`\"\n              );\n            }\n            ResultContext = propsContext;\n          }\n        }\n        return ResultContext;\n      }, [propsContext, Context]);\n      const contextValue = React.useContext(ContextToUse);\n      const didStoreComeFromProps = Boolean(props.store) && Boolean(props.store.getState) && Boolean(props.store.dispatch);\n      const didStoreComeFromContext = Boolean(contextValue) && Boolean(contextValue.store);\n      if (process.env.NODE_ENV !== \"production\" && !didStoreComeFromProps && !didStoreComeFromContext) {\n        throw new Error(\n          `Could not find \"store\" in the context of \"${displayName}\". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to ${displayName} in connect options.`\n        );\n      }\n      const store = didStoreComeFromProps ? props.store : contextValue.store;\n      const getServerState = didStoreComeFromContext ? contextValue.getServerState : store.getState;\n      const childPropsSelector = React.useMemo(() => {\n        return finalPropsSelectorFactory(store.dispatch, selectorFactoryOptions);\n      }, [store]);\n      const [subscription, notifyNestedSubs] = React.useMemo(() => {\n        if (!shouldHandleStateChanges) return NO_SUBSCRIPTION_ARRAY;\n        const subscription2 = createSubscription(\n          store,\n          didStoreComeFromProps ? void 0 : contextValue.subscription\n        );\n        const notifyNestedSubs2 = subscription2.notifyNestedSubs.bind(subscription2);\n        return [subscription2, notifyNestedSubs2];\n      }, [store, didStoreComeFromProps, contextValue]);\n      const overriddenContextValue = React.useMemo(() => {\n        if (didStoreComeFromProps) {\n          return contextValue;\n        }\n        return {\n          ...contextValue,\n          subscription\n        };\n      }, [didStoreComeFromProps, contextValue, subscription]);\n      const lastChildProps = React.useRef(void 0);\n      const lastWrapperProps = React.useRef(wrapperProps);\n      const childPropsFromStoreUpdate = React.useRef(void 0);\n      const renderIsScheduled = React.useRef(false);\n      const isMounted = React.useRef(false);\n      const latestSubscriptionCallbackError = React.useRef(\n        void 0\n      );\n      useIsomorphicLayoutEffect(() => {\n        isMounted.current = true;\n        return () => {\n          isMounted.current = false;\n        };\n      }, []);\n      const actualChildPropsSelector = React.useMemo(() => {\n        const selector = () => {\n          if (childPropsFromStoreUpdate.current && wrapperProps === lastWrapperProps.current) {\n            return childPropsFromStoreUpdate.current;\n          }\n          return childPropsSelector(store.getState(), wrapperProps);\n        };\n        return selector;\n      }, [store, wrapperProps]);\n      const subscribeForReact = React.useMemo(() => {\n        const subscribe = (reactListener) => {\n          if (!subscription) {\n            return () => {\n            };\n          }\n          return subscribeUpdates(\n            shouldHandleStateChanges,\n            store,\n            subscription,\n            // @ts-ignore\n            childPropsSelector,\n            lastWrapperProps,\n            lastChildProps,\n            renderIsScheduled,\n            isMounted,\n            childPropsFromStoreUpdate,\n            notifyNestedSubs,\n            reactListener\n          );\n        };\n        return subscribe;\n      }, [subscription]);\n      useIsomorphicLayoutEffectWithArgs(captureWrapperProps, [\n        lastWrapperProps,\n        lastChildProps,\n        renderIsScheduled,\n        wrapperProps,\n        childPropsFromStoreUpdate,\n        notifyNestedSubs\n      ]);\n      let actualChildProps;\n      try {\n        actualChildProps = React.useSyncExternalStore(\n          // TODO We're passing through a big wrapper that does a bunch of extra side effects besides subscribing\n          subscribeForReact,\n          // TODO This is incredibly hacky. We've already processed the store update and calculated new child props,\n          // TODO and we're just passing that through so it triggers a re-render for us rather than relying on `uSES`.\n          actualChildPropsSelector,\n          getServerState ? () => childPropsSelector(getServerState(), wrapperProps) : actualChildPropsSelector\n        );\n      } catch (err) {\n        if (latestSubscriptionCallbackError.current) {\n          ;\n          err.message += `\nThe error may be correlated with this previous error:\n${latestSubscriptionCallbackError.current.stack}\n\n`;\n        }\n        throw err;\n      }\n      useIsomorphicLayoutEffect(() => {\n        latestSubscriptionCallbackError.current = void 0;\n        childPropsFromStoreUpdate.current = void 0;\n        lastChildProps.current = actualChildProps;\n      });\n      const renderedWrappedComponent = React.useMemo(() => {\n        return (\n          // @ts-ignore\n          /* @__PURE__ */ React.createElement(\n            WrappedComponent,\n            {\n              ...actualChildProps,\n              ref: reactReduxForwardedRef\n            }\n          )\n        );\n      }, [reactReduxForwardedRef, WrappedComponent, actualChildProps]);\n      const renderedChild = React.useMemo(() => {\n        if (shouldHandleStateChanges) {\n          return /* @__PURE__ */ React.createElement(ContextToUse.Provider, { value: overriddenContextValue }, renderedWrappedComponent);\n        }\n        return renderedWrappedComponent;\n      }, [ContextToUse, renderedWrappedComponent, overriddenContextValue]);\n      return renderedChild;\n    }\n    const _Connect = React.memo(ConnectFunction);\n    const Connect = _Connect;\n    Connect.WrappedComponent = WrappedComponent;\n    Connect.displayName = ConnectFunction.displayName = displayName;\n    if (forwardRef) {\n      const _forwarded = React.forwardRef(\n        function forwardConnectRef(props, ref) {\n          return /* @__PURE__ */ React.createElement(Connect, { ...props, reactReduxForwardedRef: ref });\n        }\n      );\n      const forwarded = _forwarded;\n      forwarded.displayName = displayName;\n      forwarded.WrappedComponent = WrappedComponent;\n      return /* @__PURE__ */ hoistNonReactStatics(forwarded, WrappedComponent);\n    }\n    return /* @__PURE__ */ hoistNonReactStatics(Connect, WrappedComponent);\n  };\n  return wrapWithConnect;\n}\nvar connect_default = connect;\n\n// src/components/Provider.tsx\nfunction Provider(providerProps) {\n  const { children, context, serverState, store } = providerProps;\n  const contextValue = React.useMemo(() => {\n    const subscription = createSubscription(store);\n    const baseContextValue = {\n      store,\n      subscription,\n      getServerState: serverState ? () => serverState : void 0\n    };\n    if (process.env.NODE_ENV === \"production\") {\n      return baseContextValue;\n    } else {\n      const { identityFunctionCheck = \"once\", stabilityCheck = \"once\" } = providerProps;\n      return /* @__PURE__ */ Object.assign(baseContextValue, {\n        stabilityCheck,\n        identityFunctionCheck\n      });\n    }\n  }, [store, serverState]);\n  const previousState = React.useMemo(() => store.getState(), [store]);\n  useIsomorphicLayoutEffect(() => {\n    const { subscription } = contextValue;\n    subscription.onStateChange = subscription.notifyNestedSubs;\n    subscription.trySubscribe();\n    if (previousState !== store.getState()) {\n      subscription.notifyNestedSubs();\n    }\n    return () => {\n      subscription.tryUnsubscribe();\n      subscription.onStateChange = void 0;\n    };\n  }, [contextValue, previousState]);\n  const Context = context || ReactReduxContext;\n  return /* @__PURE__ */ React.createElement(Context.Provider, { value: contextValue }, children);\n}\nvar Provider_default = Provider;\n\n// src/hooks/useReduxContext.ts\nfunction createReduxContextHook(context = ReactReduxContext) {\n  return function useReduxContext2() {\n    const contextValue = React.useContext(context);\n    if (process.env.NODE_ENV !== \"production\" && !contextValue) {\n      throw new Error(\n        \"could not find react-redux context value; please ensure the component is wrapped in a <Provider>\"\n      );\n    }\n    return contextValue;\n  };\n}\nvar useReduxContext = /* @__PURE__ */ createReduxContextHook();\n\n// src/hooks/useStore.ts\nfunction createStoreHook(context = ReactReduxContext) {\n  const useReduxContext2 = context === ReactReduxContext ? useReduxContext : (\n    // @ts-ignore\n    createReduxContextHook(context)\n  );\n  const useStore2 = () => {\n    const { store } = useReduxContext2();\n    return store;\n  };\n  Object.assign(useStore2, {\n    withTypes: () => useStore2\n  });\n  return useStore2;\n}\nvar useStore = /* @__PURE__ */ createStoreHook();\n\n// src/hooks/useDispatch.ts\nfunction createDispatchHook(context = ReactReduxContext) {\n  const useStore2 = context === ReactReduxContext ? useStore : createStoreHook(context);\n  const useDispatch2 = () => {\n    const store = useStore2();\n    return store.dispatch;\n  };\n  Object.assign(useDispatch2, {\n    withTypes: () => useDispatch2\n  });\n  return useDispatch2;\n}\nvar useDispatch = /* @__PURE__ */ createDispatchHook();\n\n// src/hooks/useSelector.ts\nimport { useSyncExternalStoreWithSelector } from \"use-sync-external-store/with-selector.js\";\nvar refEquality = (a, b) => a === b;\nfunction createSelectorHook(context = ReactReduxContext) {\n  const useReduxContext2 = context === ReactReduxContext ? useReduxContext : createReduxContextHook(context);\n  const useSelector2 = (selector, equalityFnOrOptions = {}) => {\n    const { equalityFn = refEquality } = typeof equalityFnOrOptions === \"function\" ? { equalityFn: equalityFnOrOptions } : equalityFnOrOptions;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!selector) {\n        throw new Error(`You must pass a selector to useSelector`);\n      }\n      if (typeof selector !== \"function\") {\n        throw new Error(`You must pass a function as a selector to useSelector`);\n      }\n      if (typeof equalityFn !== \"function\") {\n        throw new Error(\n          `You must pass a function as an equality function to useSelector`\n        );\n      }\n    }\n    const reduxContext = useReduxContext2();\n    const { store, subscription, getServerState } = reduxContext;\n    const firstRun = React.useRef(true);\n    const wrappedSelector = React.useCallback(\n      {\n        [selector.name](state) {\n          const selected = selector(state);\n          if (process.env.NODE_ENV !== \"production\") {\n            const { devModeChecks = {} } = typeof equalityFnOrOptions === \"function\" ? {} : equalityFnOrOptions;\n            const { identityFunctionCheck, stabilityCheck } = reduxContext;\n            const {\n              identityFunctionCheck: finalIdentityFunctionCheck,\n              stabilityCheck: finalStabilityCheck\n            } = {\n              stabilityCheck,\n              identityFunctionCheck,\n              ...devModeChecks\n            };\n            if (finalStabilityCheck === \"always\" || finalStabilityCheck === \"once\" && firstRun.current) {\n              const toCompare = selector(state);\n              if (!equalityFn(selected, toCompare)) {\n                let stack = void 0;\n                try {\n                  throw new Error();\n                } catch (e) {\n                  ;\n                  ({ stack } = e);\n                }\n                console.warn(\n                  \"Selector \" + (selector.name || \"unknown\") + \" returned a different result when called with the same parameters. This can lead to unnecessary rerenders.\\nSelectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization\",\n                  {\n                    state,\n                    selected,\n                    selected2: toCompare,\n                    stack\n                  }\n                );\n              }\n            }\n            if (finalIdentityFunctionCheck === \"always\" || finalIdentityFunctionCheck === \"once\" && firstRun.current) {\n              if (selected === state) {\n                let stack = void 0;\n                try {\n                  throw new Error();\n                } catch (e) {\n                  ;\n                  ({ stack } = e);\n                }\n                console.warn(\n                  \"Selector \" + (selector.name || \"unknown\") + \" returned the root state when called. This can lead to unnecessary rerenders.\\nSelectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.\",\n                  { stack }\n                );\n              }\n            }\n            if (firstRun.current) firstRun.current = false;\n          }\n          return selected;\n        }\n      }[selector.name],\n      [selector]\n    );\n    const selectedState = useSyncExternalStoreWithSelector(\n      subscription.addNestedSub,\n      store.getState,\n      getServerState || store.getState,\n      wrappedSelector,\n      equalityFn\n    );\n    React.useDebugValue(selectedState);\n    return selectedState;\n  };\n  Object.assign(useSelector2, {\n    withTypes: () => useSelector2\n  });\n  return useSelector2;\n}\nvar useSelector = /* @__PURE__ */ createSelectorHook();\n\n// src/exports.ts\nvar batch = defaultNoopBatch;\nexport {\n  Provider_default as Provider,\n  ReactReduxContext,\n  batch,\n  connect_default as connect,\n  createDispatchHook,\n  createSelectorHook,\n  createStoreHook,\n  shallowEqual,\n  useDispatch,\n  useSelector,\n  useStore\n};\n//# sourceMappingURL=react-redux.mjs.map","import type { GetThunkAPI } from '@reduxjs/toolkit';\nimport { createAsyncThunk, createSelector } from '@reduxjs/toolkit';\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport type { AppDispatch, RootState } from './store';\n\nexport const useAppDispatch = useDispatch.withTypes<AppDispatch>();\nexport const useAppSelector = useSelector.withTypes<RootState>();\n\nexport interface AsyncThunkRejectValue {\n  skipAlert?: boolean;\n  skipNotFound?: boolean;\n  error?: unknown;\n}\n\ninterface AppMeta {\n  useLoadingBar?: boolean;\n}\n\nexport const createAppAsyncThunk = createAsyncThunk.withTypes<{\n  state: RootState;\n  dispatch: AppDispatch;\n  rejectValue: AsyncThunkRejectValue;\n}>();\n\nexport const createAppSelector = createSelector.withTypes<RootState>();\n\ninterface AppThunkConfig {\n  state: RootState;\n  dispatch: AppDispatch;\n  rejectValue: AsyncThunkRejectValue;\n  fulfilledMeta: AppMeta;\n  rejectedMeta: AppMeta;\n}\ntype AppThunkApi = Pick<GetThunkAPI<AppThunkConfig>, 'getState' | 'dispatch'>;\n\ninterface AppThunkOptions<Arg> {\n  useLoadingBar?: boolean;\n  condition?: (\n    arg: Arg,\n    { getState }: { getState: AppThunkApi['getState'] },\n  ) => boolean;\n}\n\nconst createBaseAsyncThunk = createAsyncThunk.withTypes<AppThunkConfig>();\n\nexport function createThunk<Arg = void, Returned = void>(\n  name: string,\n  creator: (arg: Arg, api: AppThunkApi) => Returned | Promise<Returned>,\n  options: AppThunkOptions<Arg> = {},\n) {\n  return createBaseAsyncThunk(\n    name,\n    async (\n      arg: Arg,\n      { getState, dispatch, fulfillWithValue, rejectWithValue },\n    ) => {\n      try {\n        const result = await creator(arg, { dispatch, getState });\n\n        return fulfillWithValue(result, {\n          useLoadingBar: options.useLoadingBar,\n        });\n      } catch (error) {\n        return rejectWithValue(\n          { error },\n          {\n            useLoadingBar: options.useLoadingBar,\n          },\n        );\n      }\n    },\n    {\n      getPendingMeta() {\n        if (options.useLoadingBar) return { useLoadingBar: true };\n        return {};\n      },\n      condition: options.condition,\n    },\n  );\n}\n\nconst discardLoadDataInPayload = Symbol('discardLoadDataInPayload');\ntype DiscardLoadData = typeof discardLoadDataInPayload;\n\ntype OnData<ActionArg, LoadDataResult, ReturnedData> = (\n  data: LoadDataResult,\n  api: AppThunkApi & {\n    actionArg: ActionArg;\n    discardLoadData: DiscardLoadData;\n  },\n) => ReturnedData | DiscardLoadData | Promise<ReturnedData | DiscardLoadData>;\n\ntype LoadData<Args, LoadDataResult> = (\n  args: Args,\n  api: AppThunkApi,\n) => Promise<LoadDataResult>;\n\ntype ArgsType = Record<string, unknown> | undefined;\n\n// Overload when there is no `onData` method, the payload is the `onData` result\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: (args: Args) => Promise<LoadDataResult>,\n  thunkOptions?: AppThunkOptions<Args>,\n): ReturnType<typeof createThunk<Args, LoadDataResult>>;\n\n// Overload when the `onData` method returns discardLoadDataInPayload, then the payload is empty\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions<Args>\n    | OnData<Args, LoadDataResult, DiscardLoadData>,\n  thunkOptions?: AppThunkOptions<Args>,\n): ReturnType<typeof createThunk<Args, void>>;\n\n// Overload when the `onData` method returns nothing, then the mayload is the `onData` result\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions<Args>\n    | OnData<Args, LoadDataResult, void>,\n  thunkOptions?: AppThunkOptions<Args>,\n): ReturnType<typeof createThunk<Args, LoadDataResult>>;\n\n// Overload when there is an `onData` method returning something\nexport function createDataLoadingThunk<\n  LoadDataResult,\n  Args extends ArgsType,\n  Returned,\n>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions<Args>\n    | OnData<Args, LoadDataResult, Returned>,\n  thunkOptions?: AppThunkOptions<Args>,\n): ReturnType<typeof createThunk<Args, Returned>>;\n\n/**\n * This function creates a Redux Thunk that handles loading data asynchronously (usually from the API), dispatching `pending`, `fullfilled` and `rejected` actions.\n *\n * You can run a callback on the `onData` results to either dispatch side effects or modify the payload.\n *\n * It is a wrapper around RTK's [`createAsyncThunk`](https://redux-toolkit.js.org/api/createAsyncThunk)\n * @param name Prefix for the actions types\n * @param loadData Function that loads the data. It's (object) argument will become the thunk's argument\n * @param onDataOrThunkOptions\n *   Callback called on the results from `loadData`.\n *\n *   First argument will be the return from `loadData`.\n *\n *   Second argument is an object with: `dispatch`, `getState` and `discardLoadData`.\n *   It can return:\n *   - `undefined` (or no explicit return), meaning that the `onData` results will be the payload\n *   - `discardLoadData` to discard the `onData` results and return an empty payload\n *   - anything else, which will be the payload\n *\n *   You can also omit this parameter and pass `thunkOptions` directly\n * @param maybeThunkOptions\n *   Additional Mastodon specific options for the thunk. Currently supports:\n *   - `useLoadingBar` to display a loading bar while this action is pending. Defaults to true.\n *   - `condition` is passed to `createAsyncThunk` (https://redux-toolkit.js.org/api/createAsyncThunk#canceling-before-execution)\n * @returns The created thunk\n */\nexport function createDataLoadingThunk<\n  LoadDataResult,\n  Args extends ArgsType,\n  Returned,\n>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions<Args>\n    | OnData<Args, LoadDataResult, Returned>,\n  maybeThunkOptions?: AppThunkOptions<Args>,\n) {\n  let onData: OnData<Args, LoadDataResult, Returned> | undefined;\n  let thunkOptions: AppThunkOptions<Args> | undefined;\n\n  if (typeof onDataOrThunkOptions === 'function') onData = onDataOrThunkOptions;\n  else if (typeof onDataOrThunkOptions === 'object')\n    thunkOptions = onDataOrThunkOptions;\n\n  if (maybeThunkOptions) {\n    thunkOptions = maybeThunkOptions;\n  }\n\n  return createThunk<Args, Returned>(\n    name,\n    async (arg, { getState, dispatch }) => {\n      const data = await loadData(arg, {\n        dispatch,\n        getState,\n      });\n\n      if (!onData) return data as Returned;\n\n      const result = await onData(data, {\n        dispatch,\n        getState,\n        discardLoadData: discardLoadDataInPayload,\n        actionArg: arg,\n      });\n\n      // if there is no return in `onData`, we return the `onData` result\n      if (typeof result === 'undefined') return data as Returned;\n      // the user explicitely asked to discard the payload\n      else if (result === discardLoadDataInPayload)\n        return undefined as Returned;\n      else return result;\n    },\n    {\n      useLoadingBar: thunkOptions?.useLoadingBar ?? true,\n      condition: thunkOptions?.condition,\n    },\n  );\n}\n","/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","/**\n * MIT License\n * \n * Copyright (c) 2014-present, Lee Byron and other contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar DELETE = 'delete';\n\n// Constants describing the size of trie nodes.\nvar SHIFT = 5; // Resulted in best performance after ______?\nvar SIZE = 1 << SHIFT;\nvar MASK = SIZE - 1;\n\n// A consistent shared value representing \"not set\" which equals nothing other\n// than itself, and nothing that could be provided externally.\nvar NOT_SET = {};\n\n// Boolean references, Rough equivalent of `bool &`.\nfunction MakeRef() {\n  return { value: false };\n}\n\nfunction SetRef(ref) {\n  if (ref) {\n    ref.value = true;\n  }\n}\n\n// A function which returns a value representing an \"owner\" for transient writes\n// to tries. The return value will only ever equal itself, and will not equal\n// the return of any subsequent call of this function.\nfunction OwnerID() {}\n\nfunction ensureSize(iter) {\n  if (iter.size === undefined) {\n    iter.size = iter.__iterate(returnTrue);\n  }\n  return iter.size;\n}\n\nfunction wrapIndex(iter, index) {\n  // This implements \"is array index\" which the ECMAString spec defines as:\n  //\n  //     A String property name P is an array index if and only if\n  //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n  //     to 2^32−1.\n  //\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n  if (typeof index !== 'number') {\n    var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n    if ('' + uint32Index !== index || uint32Index === 4294967295) {\n      return NaN;\n    }\n    index = uint32Index;\n  }\n  return index < 0 ? ensureSize(iter) + index : index;\n}\n\nfunction returnTrue() {\n  return true;\n}\n\nfunction wholeSlice(begin, end, size) {\n  return (\n    ((begin === 0 && !isNeg(begin)) ||\n      (size !== undefined && begin <= -size)) &&\n    (end === undefined || (size !== undefined && end >= size))\n  );\n}\n\nfunction resolveBegin(begin, size) {\n  return resolveIndex(begin, size, 0);\n}\n\nfunction resolveEnd(end, size) {\n  return resolveIndex(end, size, size);\n}\n\nfunction resolveIndex(index, size, defaultIndex) {\n  // Sanitize indices using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  return index === undefined\n    ? defaultIndex\n    : isNeg(index)\n    ? size === Infinity\n      ? size\n      : Math.max(0, size + index) | 0\n    : size === undefined || size === index\n    ? index\n    : Math.min(size, index) | 0;\n}\n\nfunction isNeg(value) {\n  // Account for -0 which is negative, but not less than 0.\n  return value < 0 || (value === 0 && 1 / value === -Infinity);\n}\n\nvar IS_COLLECTION_SYMBOL = '@@__IMMUTABLE_ITERABLE__@@';\n\nfunction isCollection(maybeCollection) {\n  return Boolean(maybeCollection && maybeCollection[IS_COLLECTION_SYMBOL]);\n}\n\nvar IS_KEYED_SYMBOL = '@@__IMMUTABLE_KEYED__@@';\n\nfunction isKeyed(maybeKeyed) {\n  return Boolean(maybeKeyed && maybeKeyed[IS_KEYED_SYMBOL]);\n}\n\nvar IS_INDEXED_SYMBOL = '@@__IMMUTABLE_INDEXED__@@';\n\nfunction isIndexed(maybeIndexed) {\n  return Boolean(maybeIndexed && maybeIndexed[IS_INDEXED_SYMBOL]);\n}\n\nfunction isAssociative(maybeAssociative) {\n  return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n}\n\nvar Collection = function Collection(value) {\n  // eslint-disable-next-line no-constructor-return\n  return isCollection(value) ? value : Seq(value);\n};\n\nvar KeyedCollection = /*@__PURE__*/(function (Collection) {\n  function KeyedCollection(value) {\n    // eslint-disable-next-line no-constructor-return\n    return isKeyed(value) ? value : KeyedSeq(value);\n  }\n\n  if ( Collection ) KeyedCollection.__proto__ = Collection;\n  KeyedCollection.prototype = Object.create( Collection && Collection.prototype );\n  KeyedCollection.prototype.constructor = KeyedCollection;\n\n  return KeyedCollection;\n}(Collection));\n\nvar IndexedCollection = /*@__PURE__*/(function (Collection) {\n  function IndexedCollection(value) {\n    // eslint-disable-next-line no-constructor-return\n    return isIndexed(value) ? value : IndexedSeq(value);\n  }\n\n  if ( Collection ) IndexedCollection.__proto__ = Collection;\n  IndexedCollection.prototype = Object.create( Collection && Collection.prototype );\n  IndexedCollection.prototype.constructor = IndexedCollection;\n\n  return IndexedCollection;\n}(Collection));\n\nvar SetCollection = /*@__PURE__*/(function (Collection) {\n  function SetCollection(value) {\n    // eslint-disable-next-line no-constructor-return\n    return isCollection(value) && !isAssociative(value) ? value : SetSeq(value);\n  }\n\n  if ( Collection ) SetCollection.__proto__ = Collection;\n  SetCollection.prototype = Object.create( Collection && Collection.prototype );\n  SetCollection.prototype.constructor = SetCollection;\n\n  return SetCollection;\n}(Collection));\n\nCollection.Keyed = KeyedCollection;\nCollection.Indexed = IndexedCollection;\nCollection.Set = SetCollection;\n\nvar IS_SEQ_SYMBOL = '@@__IMMUTABLE_SEQ__@@';\n\nfunction isSeq(maybeSeq) {\n  return Boolean(maybeSeq && maybeSeq[IS_SEQ_SYMBOL]);\n}\n\nvar IS_RECORD_SYMBOL = '@@__IMMUTABLE_RECORD__@@';\n\nfunction isRecord(maybeRecord) {\n  return Boolean(maybeRecord && maybeRecord[IS_RECORD_SYMBOL]);\n}\n\nfunction isImmutable(maybeImmutable) {\n  return isCollection(maybeImmutable) || isRecord(maybeImmutable);\n}\n\nvar IS_ORDERED_SYMBOL = '@@__IMMUTABLE_ORDERED__@@';\n\nfunction isOrdered(maybeOrdered) {\n  return Boolean(maybeOrdered && maybeOrdered[IS_ORDERED_SYMBOL]);\n}\n\nvar ITERATE_KEYS = 0;\nvar ITERATE_VALUES = 1;\nvar ITERATE_ENTRIES = 2;\n\nvar REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nvar ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\nvar Iterator = function Iterator(next) {\n  this.next = next;\n};\n\nIterator.prototype.toString = function toString () {\n  return '[Iterator]';\n};\n\nIterator.KEYS = ITERATE_KEYS;\nIterator.VALUES = ITERATE_VALUES;\nIterator.ENTRIES = ITERATE_ENTRIES;\n\nIterator.prototype.inspect = Iterator.prototype.toSource = function () {\n  return this.toString();\n};\nIterator.prototype[ITERATOR_SYMBOL] = function () {\n  return this;\n};\n\nfunction iteratorValue(type, k, v, iteratorResult) {\n  var value = type === 0 ? k : type === 1 ? v : [k, v];\n  iteratorResult\n    ? (iteratorResult.value = value)\n    : (iteratorResult = {\n        value: value,\n        done: false,\n      });\n  return iteratorResult;\n}\n\nfunction iteratorDone() {\n  return { value: undefined, done: true };\n}\n\nfunction hasIterator(maybeIterable) {\n  if (Array.isArray(maybeIterable)) {\n    // IE11 trick as it does not support `Symbol.iterator`\n    return true;\n  }\n\n  return !!getIteratorFn(maybeIterable);\n}\n\nfunction isIterator(maybeIterator) {\n  return maybeIterator && typeof maybeIterator.next === 'function';\n}\n\nfunction getIterator(iterable) {\n  var iteratorFn = getIteratorFn(iterable);\n  return iteratorFn && iteratorFn.call(iterable);\n}\n\nfunction getIteratorFn(iterable) {\n  var iteratorFn =\n    iterable &&\n    ((REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]);\n  if (typeof iteratorFn === 'function') {\n    return iteratorFn;\n  }\n}\n\nfunction isEntriesIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.entries;\n}\n\nfunction isKeysIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.keys;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isArrayLike(value) {\n  if (Array.isArray(value) || typeof value === 'string') {\n    return true;\n  }\n\n  return (\n    value &&\n    typeof value === 'object' &&\n    Number.isInteger(value.length) &&\n    value.length >= 0 &&\n    (value.length === 0\n      ? // Only {length: 0} is considered Array-like.\n        Object.keys(value).length === 1\n      : // An object is only Array-like if it has a property where the last value\n        // in the array-like may be found (which could be undefined).\n        value.hasOwnProperty(value.length - 1))\n  );\n}\n\nvar Seq = /*@__PURE__*/(function (Collection) {\n  function Seq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySequence()\n      : isImmutable(value)\n      ? value.toSeq()\n      : seqFromValue(value);\n  }\n\n  if ( Collection ) Seq.__proto__ = Collection;\n  Seq.prototype = Object.create( Collection && Collection.prototype );\n  Seq.prototype.constructor = Seq;\n\n  Seq.prototype.toSeq = function toSeq () {\n    return this;\n  };\n\n  Seq.prototype.toString = function toString () {\n    return this.__toString('Seq {', '}');\n  };\n\n  Seq.prototype.cacheResult = function cacheResult () {\n    if (!this._cache && this.__iterateUncached) {\n      this._cache = this.entrySeq().toArray();\n      this.size = this._cache.length;\n    }\n    return this;\n  };\n\n  // abstract __iterateUncached(fn, reverse)\n\n  Seq.prototype.__iterate = function __iterate (fn, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      while (i !== size) {\n        var entry = cache[reverse ? size - ++i : i++];\n        if (fn(entry[1], entry[0], this) === false) {\n          break;\n        }\n      }\n      return i;\n    }\n    return this.__iterateUncached(fn, reverse);\n  };\n\n  // abstract __iteratorUncached(type, reverse)\n\n  Seq.prototype.__iterator = function __iterator (type, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      return new Iterator(function () {\n        if (i === size) {\n          return iteratorDone();\n        }\n        var entry = cache[reverse ? size - ++i : i++];\n        return iteratorValue(type, entry[0], entry[1]);\n      });\n    }\n    return this.__iteratorUncached(type, reverse);\n  };\n\n  return Seq;\n}(Collection));\n\nvar KeyedSeq = /*@__PURE__*/(function (Seq) {\n  function KeyedSeq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySequence().toKeyedSeq()\n      : isCollection(value)\n      ? isKeyed(value)\n        ? value.toSeq()\n        : value.fromEntrySeq()\n      : isRecord(value)\n      ? value.toSeq()\n      : keyedSeqFromValue(value);\n  }\n\n  if ( Seq ) KeyedSeq.__proto__ = Seq;\n  KeyedSeq.prototype = Object.create( Seq && Seq.prototype );\n  KeyedSeq.prototype.constructor = KeyedSeq;\n\n  KeyedSeq.prototype.toKeyedSeq = function toKeyedSeq () {\n    return this;\n  };\n\n  return KeyedSeq;\n}(Seq));\n\nvar IndexedSeq = /*@__PURE__*/(function (Seq) {\n  function IndexedSeq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySequence()\n      : isCollection(value)\n      ? isKeyed(value)\n        ? value.entrySeq()\n        : value.toIndexedSeq()\n      : isRecord(value)\n      ? value.toSeq().entrySeq()\n      : indexedSeqFromValue(value);\n  }\n\n  if ( Seq ) IndexedSeq.__proto__ = Seq;\n  IndexedSeq.prototype = Object.create( Seq && Seq.prototype );\n  IndexedSeq.prototype.constructor = IndexedSeq;\n\n  IndexedSeq.of = function of (/*...values*/) {\n    return IndexedSeq(arguments);\n  };\n\n  IndexedSeq.prototype.toIndexedSeq = function toIndexedSeq () {\n    return this;\n  };\n\n  IndexedSeq.prototype.toString = function toString () {\n    return this.__toString('Seq [', ']');\n  };\n\n  return IndexedSeq;\n}(Seq));\n\nvar SetSeq = /*@__PURE__*/(function (Seq) {\n  function SetSeq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return (\n      isCollection(value) && !isAssociative(value) ? value : IndexedSeq(value)\n    ).toSetSeq();\n  }\n\n  if ( Seq ) SetSeq.__proto__ = Seq;\n  SetSeq.prototype = Object.create( Seq && Seq.prototype );\n  SetSeq.prototype.constructor = SetSeq;\n\n  SetSeq.of = function of (/*...values*/) {\n    return SetSeq(arguments);\n  };\n\n  SetSeq.prototype.toSetSeq = function toSetSeq () {\n    return this;\n  };\n\n  return SetSeq;\n}(Seq));\n\nSeq.isSeq = isSeq;\nSeq.Keyed = KeyedSeq;\nSeq.Set = SetSeq;\nSeq.Indexed = IndexedSeq;\n\nSeq.prototype[IS_SEQ_SYMBOL] = true;\n\n// #pragma Root Sequences\n\nvar ArraySeq = /*@__PURE__*/(function (IndexedSeq) {\n  function ArraySeq(array) {\n    this._array = array;\n    this.size = array.length;\n  }\n\n  if ( IndexedSeq ) ArraySeq.__proto__ = IndexedSeq;\n  ArraySeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ArraySeq.prototype.constructor = ArraySeq;\n\n  ArraySeq.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n  };\n\n  ArraySeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    while (i !== size) {\n      var ii = reverse ? size - ++i : i++;\n      if (fn(array[ii], ii, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ArraySeq.prototype.__iterator = function __iterator (type, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var ii = reverse ? size - ++i : i++;\n      return iteratorValue(type, ii, array[ii]);\n    });\n  };\n\n  return ArraySeq;\n}(IndexedSeq));\n\nvar ObjectSeq = /*@__PURE__*/(function (KeyedSeq) {\n  function ObjectSeq(object) {\n    var keys = Object.keys(object).concat(\n      Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(object) : []\n    );\n    this._object = object;\n    this._keys = keys;\n    this.size = keys.length;\n  }\n\n  if ( KeyedSeq ) ObjectSeq.__proto__ = KeyedSeq;\n  ObjectSeq.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ObjectSeq.prototype.constructor = ObjectSeq;\n\n  ObjectSeq.prototype.get = function get (key, notSetValue) {\n    if (notSetValue !== undefined && !this.has(key)) {\n      return notSetValue;\n    }\n    return this._object[key];\n  };\n\n  ObjectSeq.prototype.has = function has (key) {\n    return hasOwnProperty.call(this._object, key);\n  };\n\n  ObjectSeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    while (i !== size) {\n      var key = keys[reverse ? size - ++i : i++];\n      if (fn(object[key], key, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ObjectSeq.prototype.__iterator = function __iterator (type, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var key = keys[reverse ? size - ++i : i++];\n      return iteratorValue(type, key, object[key]);\n    });\n  };\n\n  return ObjectSeq;\n}(KeyedSeq));\nObjectSeq.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar CollectionSeq = /*@__PURE__*/(function (IndexedSeq) {\n  function CollectionSeq(collection) {\n    this._collection = collection;\n    this.size = collection.length || collection.size;\n  }\n\n  if ( IndexedSeq ) CollectionSeq.__proto__ = IndexedSeq;\n  CollectionSeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  CollectionSeq.prototype.constructor = CollectionSeq;\n\n  CollectionSeq.prototype.__iterateUncached = function __iterateUncached (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    var iterations = 0;\n    if (isIterator(iterator)) {\n      var step;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n    }\n    return iterations;\n  };\n\n  CollectionSeq.prototype.__iteratorUncached = function __iteratorUncached (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    if (!isIterator(iterator)) {\n      return new Iterator(iteratorDone);\n    }\n    var iterations = 0;\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, iterations++, step.value);\n    });\n  };\n\n  return CollectionSeq;\n}(IndexedSeq));\n\n// # pragma Helper functions\n\nvar EMPTY_SEQ;\n\nfunction emptySequence() {\n  return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n}\n\nfunction keyedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq.fromEntrySeq();\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of [k, v] entries, or keyed object: ' +\n      value\n  );\n}\n\nfunction indexedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values: ' + value\n  );\n}\n\nfunction seqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return isEntriesIterable(value)\n      ? seq.fromEntrySeq()\n      : isKeysIterable(value)\n      ? seq.toSetSeq()\n      : seq;\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values, or keyed object: ' + value\n  );\n}\n\nfunction maybeIndexedSeqFromValue(value) {\n  return isArrayLike(value)\n    ? new ArraySeq(value)\n    : hasIterator(value)\n    ? new CollectionSeq(value)\n    : undefined;\n}\n\nvar IS_MAP_SYMBOL = '@@__IMMUTABLE_MAP__@@';\n\nfunction isMap(maybeMap) {\n  return Boolean(maybeMap && maybeMap[IS_MAP_SYMBOL]);\n}\n\nfunction isOrderedMap(maybeOrderedMap) {\n  return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n}\n\nfunction isValueObject(maybeValue) {\n  return Boolean(\n    maybeValue &&\n      typeof maybeValue.equals === 'function' &&\n      typeof maybeValue.hashCode === 'function'\n  );\n}\n\n/**\n * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n *\n * NaN is considered the same as NaN, however -0 and 0 are considered the same\n * value, which is different from the algorithm described by\n * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n *\n * This is extended further to allow Objects to describe the values they\n * represent, by way of `valueOf` or `equals` (and `hashCode`).\n *\n * Note: because of this extension, the key equality of Immutable.Map and the\n * value equality of Immutable.Set will differ from ES6 Map and Set.\n *\n * ### Defining custom values\n *\n * The easiest way to describe the value an object represents is by implementing\n * `valueOf`. For example, `Date` represents a value by returning a unix\n * timestamp for `valueOf`:\n *\n *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n *     var date2 = new Date(1234567890000);\n *     date1.valueOf(); // 1234567890000\n *     assert( date1 !== date2 );\n *     assert( Immutable.is( date1, date2 ) );\n *\n * Note: overriding `valueOf` may have other implications if you use this object\n * where JavaScript expects a primitive, such as implicit string coercion.\n *\n * For more complex types, especially collections, implementing `valueOf` may\n * not be performant. An alternative is to implement `equals` and `hashCode`.\n *\n * `equals` takes another object, presumably of similar type, and returns true\n * if it is equal. Equality is symmetrical, so the same result should be\n * returned if this and the argument are flipped.\n *\n *     assert( a.equals(b) === b.equals(a) );\n *\n * `hashCode` returns a 32bit integer number representing the object which will\n * be used to determine how to store the value object in a Map or Set. You must\n * provide both or neither methods, one must not exist without the other.\n *\n * Also, an important relationship between these methods must be upheld: if two\n * values are equal, they *must* return the same hashCode. If the values are not\n * equal, they might have the same hashCode; this is called a hash collision,\n * and while undesirable for performance reasons, it is acceptable.\n *\n *     if (a.equals(b)) {\n *       assert( a.hashCode() === b.hashCode() );\n *     }\n *\n * All Immutable collections are Value Objects: they implement `equals()`\n * and `hashCode()`.\n */\nfunction is(valueA, valueB) {\n  if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n    return true;\n  }\n  if (!valueA || !valueB) {\n    return false;\n  }\n  if (\n    typeof valueA.valueOf === 'function' &&\n    typeof valueB.valueOf === 'function'\n  ) {\n    valueA = valueA.valueOf();\n    valueB = valueB.valueOf();\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n  }\n  return !!(\n    isValueObject(valueA) &&\n    isValueObject(valueB) &&\n    valueA.equals(valueB)\n  );\n}\n\nvar imul =\n  typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2\n    ? Math.imul\n    : function imul(a, b) {\n        a |= 0; // int\n        b |= 0; // int\n        var c = a & 0xffff;\n        var d = b & 0xffff;\n        // Shift by 0 fixes the sign on the high part.\n        return (c * d + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0)) | 0; // int\n      };\n\n// v8 has an optimization for storing 31-bit signed numbers.\n// Values which have either 00 or 11 as the high order bits qualify.\n// This function drops the highest order bit in a signed number, maintaining\n// the sign bit.\nfunction smi(i32) {\n  return ((i32 >>> 1) & 0x40000000) | (i32 & 0xbfffffff);\n}\n\nvar defaultValueOf = Object.prototype.valueOf;\n\nfunction hash(o) {\n  if (o == null) {\n    return hashNullish(o);\n  }\n\n  if (typeof o.hashCode === 'function') {\n    // Drop any high bits from accidentally long hash codes.\n    return smi(o.hashCode(o));\n  }\n\n  var v = valueOf(o);\n\n  if (v == null) {\n    return hashNullish(v);\n  }\n\n  switch (typeof v) {\n    case 'boolean':\n      // The hash values for built-in constants are a 1 value for each 5-byte\n      // shift region expect for the first, which encodes the value. This\n      // reduces the odds of a hash collision for these common values.\n      return v ? 0x42108421 : 0x42108420;\n    case 'number':\n      return hashNumber(v);\n    case 'string':\n      return v.length > STRING_HASH_CACHE_MIN_STRLEN\n        ? cachedHashString(v)\n        : hashString(v);\n    case 'object':\n    case 'function':\n      return hashJSObj(v);\n    case 'symbol':\n      return hashSymbol(v);\n    default:\n      if (typeof v.toString === 'function') {\n        return hashString(v.toString());\n      }\n      throw new Error('Value type ' + typeof v + ' cannot be hashed.');\n  }\n}\n\nfunction hashNullish(nullish) {\n  return nullish === null ? 0x42108422 : /* undefined */ 0x42108423;\n}\n\n// Compress arbitrarily large numbers into smi hashes.\nfunction hashNumber(n) {\n  if (n !== n || n === Infinity) {\n    return 0;\n  }\n  var hash = n | 0;\n  if (hash !== n) {\n    hash ^= n * 0xffffffff;\n  }\n  while (n > 0xffffffff) {\n    n /= 0xffffffff;\n    hash ^= n;\n  }\n  return smi(hash);\n}\n\nfunction cachedHashString(string) {\n  var hashed = stringHashCache[string];\n  if (hashed === undefined) {\n    hashed = hashString(string);\n    if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n      STRING_HASH_CACHE_SIZE = 0;\n      stringHashCache = {};\n    }\n    STRING_HASH_CACHE_SIZE++;\n    stringHashCache[string] = hashed;\n  }\n  return hashed;\n}\n\n// http://jsperf.com/hashing-strings\nfunction hashString(string) {\n  // This is the hash from JVM\n  // The hash code for a string is computed as\n  // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n  // where s[i] is the ith character of the string and n is the length of\n  // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n  // (exclusive) by dropping high bits.\n  var hashed = 0;\n  for (var ii = 0; ii < string.length; ii++) {\n    hashed = (31 * hashed + string.charCodeAt(ii)) | 0;\n  }\n  return smi(hashed);\n}\n\nfunction hashSymbol(sym) {\n  var hashed = symbolMap[sym];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  hashed = nextHash();\n\n  symbolMap[sym] = hashed;\n\n  return hashed;\n}\n\nfunction hashJSObj(obj) {\n  var hashed;\n  if (usingWeakMap) {\n    hashed = weakMap.get(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = obj[UID_HASH_KEY];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  if (!canDefineProperty) {\n    hashed = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n    if (hashed !== undefined) {\n      return hashed;\n    }\n\n    hashed = getIENodeHash(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = nextHash();\n\n  if (usingWeakMap) {\n    weakMap.set(obj, hashed);\n  } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n    throw new Error('Non-extensible objects are not allowed as keys.');\n  } else if (canDefineProperty) {\n    Object.defineProperty(obj, UID_HASH_KEY, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: hashed,\n    });\n  } else if (\n    obj.propertyIsEnumerable !== undefined &&\n    obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable\n  ) {\n    // Since we can't define a non-enumerable property on the object\n    // we'll hijack one of the less-used non-enumerable properties to\n    // save our hash on it. Since this is a function it will not show up in\n    // `JSON.stringify` which is what we want.\n    obj.propertyIsEnumerable = function () {\n      return this.constructor.prototype.propertyIsEnumerable.apply(\n        this,\n        arguments\n      );\n    };\n    obj.propertyIsEnumerable[UID_HASH_KEY] = hashed;\n  } else if (obj.nodeType !== undefined) {\n    // At this point we couldn't get the IE `uniqueID` to use as a hash\n    // and we couldn't use a non-enumerable property to exploit the\n    // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n    // itself.\n    obj[UID_HASH_KEY] = hashed;\n  } else {\n    throw new Error('Unable to set a non-enumerable property on object.');\n  }\n\n  return hashed;\n}\n\n// Get references to ES5 object methods.\nvar isExtensible = Object.isExtensible;\n\n// True if Object.defineProperty works as expected. IE8 fails this test.\nvar canDefineProperty = (function () {\n  try {\n    Object.defineProperty({}, '@', {});\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n// IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n// and avoid memory leaks from the IE cloneNode bug.\nfunction getIENodeHash(node) {\n  if (node && node.nodeType > 0) {\n    switch (node.nodeType) {\n      case 1: // Element\n        return node.uniqueID;\n      case 9: // Document\n        return node.documentElement && node.documentElement.uniqueID;\n    }\n  }\n}\n\nfunction valueOf(obj) {\n  return obj.valueOf !== defaultValueOf && typeof obj.valueOf === 'function'\n    ? obj.valueOf(obj)\n    : obj;\n}\n\nfunction nextHash() {\n  var nextHash = ++_objHashUID;\n  if (_objHashUID & 0x40000000) {\n    _objHashUID = 0;\n  }\n  return nextHash;\n}\n\n// If possible, use a WeakMap.\nvar usingWeakMap = typeof WeakMap === 'function';\nvar weakMap;\nif (usingWeakMap) {\n  weakMap = new WeakMap();\n}\n\nvar symbolMap = Object.create(null);\n\nvar _objHashUID = 0;\n\nvar UID_HASH_KEY = '__immutablehash__';\nif (typeof Symbol === 'function') {\n  UID_HASH_KEY = Symbol(UID_HASH_KEY);\n}\n\nvar STRING_HASH_CACHE_MIN_STRLEN = 16;\nvar STRING_HASH_CACHE_MAX_SIZE = 255;\nvar STRING_HASH_CACHE_SIZE = 0;\nvar stringHashCache = {};\n\nvar ToKeyedSequence = /*@__PURE__*/(function (KeyedSeq) {\n  function ToKeyedSequence(indexed, useKeys) {\n    this._iter = indexed;\n    this._useKeys = useKeys;\n    this.size = indexed.size;\n  }\n\n  if ( KeyedSeq ) ToKeyedSequence.__proto__ = KeyedSeq;\n  ToKeyedSequence.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ToKeyedSequence.prototype.constructor = ToKeyedSequence;\n\n  ToKeyedSequence.prototype.get = function get (key, notSetValue) {\n    return this._iter.get(key, notSetValue);\n  };\n\n  ToKeyedSequence.prototype.has = function has (key) {\n    return this._iter.has(key);\n  };\n\n  ToKeyedSequence.prototype.valueSeq = function valueSeq () {\n    return this._iter.valueSeq();\n  };\n\n  ToKeyedSequence.prototype.reverse = function reverse () {\n    var this$1$1 = this;\n\n    var reversedSequence = reverseFactory(this, true);\n    if (!this._useKeys) {\n      reversedSequence.valueSeq = function () { return this$1$1._iter.toSeq().reverse(); };\n    }\n    return reversedSequence;\n  };\n\n  ToKeyedSequence.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    var mappedSequence = mapFactory(this, mapper, context);\n    if (!this._useKeys) {\n      mappedSequence.valueSeq = function () { return this$1$1._iter.toSeq().map(mapper, context); };\n    }\n    return mappedSequence;\n  };\n\n  ToKeyedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (v, k) { return fn(v, k, this$1$1); }, reverse);\n  };\n\n  ToKeyedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    return this._iter.__iterator(type, reverse);\n  };\n\n  return ToKeyedSequence;\n}(KeyedSeq));\nToKeyedSequence.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar ToIndexedSequence = /*@__PURE__*/(function (IndexedSeq) {\n  function ToIndexedSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( IndexedSeq ) ToIndexedSequence.__proto__ = IndexedSeq;\n  ToIndexedSequence.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ToIndexedSequence.prototype.constructor = ToIndexedSequence;\n\n  ToIndexedSequence.prototype.includes = function includes (value) {\n    return this._iter.includes(value);\n  };\n\n  ToIndexedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(this);\n    return this._iter.__iterate(\n      function (v) { return fn(v, reverse ? this$1$1.size - ++i : i++, this$1$1); },\n      reverse\n    );\n  };\n\n  ToIndexedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1$1 = this;\n\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    var i = 0;\n    reverse && ensureSize(this);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(\n            type,\n            reverse ? this$1$1.size - ++i : i++,\n            step.value,\n            step\n          );\n    });\n  };\n\n  return ToIndexedSequence;\n}(IndexedSeq));\n\nvar ToSetSequence = /*@__PURE__*/(function (SetSeq) {\n  function ToSetSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( SetSeq ) ToSetSequence.__proto__ = SetSeq;\n  ToSetSequence.prototype = Object.create( SetSeq && SetSeq.prototype );\n  ToSetSequence.prototype.constructor = ToSetSequence;\n\n  ToSetSequence.prototype.has = function has (key) {\n    return this._iter.includes(key);\n  };\n\n  ToSetSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (v) { return fn(v, v, this$1$1); }, reverse);\n  };\n\n  ToSetSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(type, step.value, step.value, step);\n    });\n  };\n\n  return ToSetSequence;\n}(SetSeq));\n\nvar FromEntriesSequence = /*@__PURE__*/(function (KeyedSeq) {\n  function FromEntriesSequence(entries) {\n    this._iter = entries;\n    this.size = entries.size;\n  }\n\n  if ( KeyedSeq ) FromEntriesSequence.__proto__ = KeyedSeq;\n  FromEntriesSequence.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  FromEntriesSequence.prototype.constructor = FromEntriesSequence;\n\n  FromEntriesSequence.prototype.entrySeq = function entrySeq () {\n    return this._iter.toSeq();\n  };\n\n  FromEntriesSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (entry) {\n      // Check if entry exists first so array access doesn't throw for holes\n      // in the parent iteration.\n      if (entry) {\n        validateEntry(entry);\n        var indexedCollection = isCollection(entry);\n        return fn(\n          indexedCollection ? entry.get(1) : entry[1],\n          indexedCollection ? entry.get(0) : entry[0],\n          this$1$1\n        );\n      }\n    }, reverse);\n  };\n\n  FromEntriesSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedCollection = isCollection(entry);\n          return iteratorValue(\n            type,\n            indexedCollection ? entry.get(0) : entry[0],\n            indexedCollection ? entry.get(1) : entry[1],\n            step\n          );\n        }\n      }\n    });\n  };\n\n  return FromEntriesSequence;\n}(KeyedSeq));\n\nToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\nfunction flipFactory(collection) {\n  var flipSequence = makeSequence(collection);\n  flipSequence._iter = collection;\n  flipSequence.size = collection.size;\n  flipSequence.flip = function () { return collection; };\n  flipSequence.reverse = function () {\n    var reversedSequence = collection.reverse.apply(this); // super.reverse()\n    reversedSequence.flip = function () { return collection.reverse(); };\n    return reversedSequence;\n  };\n  flipSequence.has = function (key) { return collection.includes(key); };\n  flipSequence.includes = function (key) { return collection.has(key); };\n  flipSequence.cacheResult = cacheResultThrough;\n  flipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    return collection.__iterate(function (v, k) { return fn(k, v, this$1$1) !== false; }, reverse);\n  };\n  flipSequence.__iteratorUncached = function (type, reverse) {\n    if (type === ITERATE_ENTRIES) {\n      var iterator = collection.__iterator(type, reverse);\n      return new Iterator(function () {\n        var step = iterator.next();\n        if (!step.done) {\n          var k = step.value[0];\n          step.value[0] = step.value[1];\n          step.value[1] = k;\n        }\n        return step;\n      });\n    }\n    return collection.__iterator(\n      type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n      reverse\n    );\n  };\n  return flipSequence;\n}\n\nfunction mapFactory(collection, mapper, context) {\n  var mappedSequence = makeSequence(collection);\n  mappedSequence.size = collection.size;\n  mappedSequence.has = function (key) { return collection.has(key); };\n  mappedSequence.get = function (key, notSetValue) {\n    var v = collection.get(key, NOT_SET);\n    return v === NOT_SET\n      ? notSetValue\n      : mapper.call(context, v, key, collection);\n  };\n  mappedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    return collection.__iterate(\n      function (v, k, c) { return fn(mapper.call(context, v, k, c), k, this$1$1) !== false; },\n      reverse\n    );\n  };\n  mappedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var key = entry[0];\n      return iteratorValue(\n        type,\n        key,\n        mapper.call(context, entry[1], key, collection),\n        step\n      );\n    });\n  };\n  return mappedSequence;\n}\n\nfunction reverseFactory(collection, useKeys) {\n  var this$1$1 = this;\n\n  var reversedSequence = makeSequence(collection);\n  reversedSequence._iter = collection;\n  reversedSequence.size = collection.size;\n  reversedSequence.reverse = function () { return collection; };\n  if (collection.flip) {\n    reversedSequence.flip = function () {\n      var flipSequence = flipFactory(collection);\n      flipSequence.reverse = function () { return collection.flip(); };\n      return flipSequence;\n    };\n  }\n  reversedSequence.get = function (key, notSetValue) { return collection.get(useKeys ? key : -1 - key, notSetValue); };\n  reversedSequence.has = function (key) { return collection.has(useKeys ? key : -1 - key); };\n  reversedSequence.includes = function (value) { return collection.includes(value); };\n  reversedSequence.cacheResult = cacheResultThrough;\n  reversedSequence.__iterate = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(collection);\n    return collection.__iterate(\n      function (v, k) { return fn(v, useKeys ? k : reverse ? this$1$1.size - ++i : i++, this$1$1); },\n      !reverse\n    );\n  };\n  reversedSequence.__iterator = function (type, reverse) {\n    var i = 0;\n    reverse && ensureSize(collection);\n    var iterator = collection.__iterator(ITERATE_ENTRIES, !reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      return iteratorValue(\n        type,\n        useKeys ? entry[0] : reverse ? this$1$1.size - ++i : i++,\n        entry[1],\n        step\n      );\n    });\n  };\n  return reversedSequence;\n}\n\nfunction filterFactory(collection, predicate, context, useKeys) {\n  var filterSequence = makeSequence(collection);\n  if (useKeys) {\n    filterSequence.has = function (key) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && !!predicate.call(context, v, key, collection);\n    };\n    filterSequence.get = function (key, notSetValue) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && predicate.call(context, v, key, collection)\n        ? v\n        : notSetValue;\n    };\n  }\n  filterSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    }, reverse);\n    return iterations;\n  };\n  filterSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterations = 0;\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        var value = entry[1];\n        if (predicate.call(context, value, key, collection)) {\n          return iteratorValue(type, useKeys ? key : iterations++, value, step);\n        }\n      }\n    });\n  };\n  return filterSequence;\n}\n\nfunction countByFactory(collection, grouper, context) {\n  var groups = Map().asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(grouper.call(context, v, k, collection), 0, function (a) { return a + 1; });\n  });\n  return groups.asImmutable();\n}\n\nfunction groupByFactory(collection, grouper, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = (isOrdered(collection) ? OrderedMap() : Map()).asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(\n      grouper.call(context, v, k, collection),\n      function (a) { return ((a = a || []), a.push(isKeyedIter ? [k, v] : v), a); }\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); }).asImmutable();\n}\n\nfunction partitionFactory(collection, predicate, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = [[], []];\n  collection.__iterate(function (v, k) {\n    groups[predicate.call(context, v, k, collection) ? 1 : 0].push(\n      isKeyedIter ? [k, v] : v\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); });\n}\n\nfunction sliceFactory(collection, begin, end, useKeys) {\n  var originalSize = collection.size;\n\n  if (wholeSlice(begin, end, originalSize)) {\n    return collection;\n  }\n\n  // begin or end can not be resolved if they were provided as negative numbers and\n  // this collection's size is unknown. In that case, cache first so there is\n  // a known size and these do not resolve to NaN.\n  if (typeof originalSize === 'undefined' && (begin < 0 || end < 0)) {\n    return sliceFactory(collection.toSeq().cacheResult(), begin, end, useKeys);\n  }\n\n  var resolvedBegin = resolveBegin(begin, originalSize);\n  var resolvedEnd = resolveEnd(end, originalSize);\n\n  // Note: resolvedEnd is undefined when the original sequence's length is\n  // unknown and this slice did not supply an end and should contain all\n  // elements after resolvedBegin.\n  // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n  var resolvedSize = resolvedEnd - resolvedBegin;\n  var sliceSize;\n  if (resolvedSize === resolvedSize) {\n    sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n  }\n\n  var sliceSeq = makeSequence(collection);\n\n  // If collection.size is undefined, the size of the realized sliceSeq is\n  // unknown at this point unless the number of items to slice is 0\n  sliceSeq.size =\n    sliceSize === 0 ? sliceSize : (collection.size && sliceSize) || undefined;\n\n  if (!useKeys && isSeq(collection) && sliceSize >= 0) {\n    sliceSeq.get = function (index, notSetValue) {\n      index = wrapIndex(this, index);\n      return index >= 0 && index < sliceSize\n        ? collection.get(index + resolvedBegin, notSetValue)\n        : notSetValue;\n    };\n  }\n\n  sliceSeq.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (sliceSize === 0) {\n      return 0;\n    }\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var skipped = 0;\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k) {\n      if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n        iterations++;\n        return (\n          fn(v, useKeys ? k : iterations - 1, this$1$1) !== false &&\n          iterations !== sliceSize\n        );\n      }\n    });\n    return iterations;\n  };\n\n  sliceSeq.__iteratorUncached = function (type, reverse) {\n    if (sliceSize !== 0 && reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    // Don't bother instantiating parent iterator if taking 0.\n    if (sliceSize === 0) {\n      return new Iterator(iteratorDone);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var skipped = 0;\n    var iterations = 0;\n    return new Iterator(function () {\n      while (skipped++ < resolvedBegin) {\n        iterator.next();\n      }\n      if (++iterations > sliceSize) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (useKeys || type === ITERATE_VALUES || step.done) {\n        return step;\n      }\n      if (type === ITERATE_KEYS) {\n        return iteratorValue(type, iterations - 1, undefined, step);\n      }\n      return iteratorValue(type, iterations - 1, step.value[1], step);\n    });\n  };\n\n  return sliceSeq;\n}\n\nfunction takeWhileFactory(collection, predicate, context) {\n  var takeSequence = makeSequence(collection);\n  takeSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    collection.__iterate(\n      function (v, k, c) { return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$1$1); }\n    );\n    return iterations;\n  };\n  takeSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterating = true;\n    return new Iterator(function () {\n      if (!iterating) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var k = entry[0];\n      var v = entry[1];\n      if (!predicate.call(context, v, k, this$1$1)) {\n        iterating = false;\n        return iteratorDone();\n      }\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return takeSequence;\n}\n\nfunction skipWhileFactory(collection, predicate, context, useKeys) {\n  var skipSequence = makeSequence(collection);\n  skipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    });\n    return iterations;\n  };\n  skipSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var skipping = true;\n    var iterations = 0;\n    return new Iterator(function () {\n      var step;\n      var k;\n      var v;\n      do {\n        step = iterator.next();\n        if (step.done) {\n          if (useKeys || type === ITERATE_VALUES) {\n            return step;\n          }\n          if (type === ITERATE_KEYS) {\n            return iteratorValue(type, iterations++, undefined, step);\n          }\n          return iteratorValue(type, iterations++, step.value[1], step);\n        }\n        var entry = step.value;\n        k = entry[0];\n        v = entry[1];\n        skipping && (skipping = predicate.call(context, v, k, this$1$1));\n      } while (skipping);\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return skipSequence;\n}\n\nfunction concatFactory(collection, values) {\n  var isKeyedCollection = isKeyed(collection);\n  var iters = [collection]\n    .concat(values)\n    .map(function (v) {\n      if (!isCollection(v)) {\n        v = isKeyedCollection\n          ? keyedSeqFromValue(v)\n          : indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedCollection) {\n        v = KeyedCollection(v);\n      }\n      return v;\n    })\n    .filter(function (v) { return v.size !== 0; });\n\n  if (iters.length === 0) {\n    return collection;\n  }\n\n  if (iters.length === 1) {\n    var singleton = iters[0];\n    if (\n      singleton === collection ||\n      (isKeyedCollection && isKeyed(singleton)) ||\n      (isIndexed(collection) && isIndexed(singleton))\n    ) {\n      return singleton;\n    }\n  }\n\n  var concatSeq = new ArraySeq(iters);\n  if (isKeyedCollection) {\n    concatSeq = concatSeq.toKeyedSeq();\n  } else if (!isIndexed(collection)) {\n    concatSeq = concatSeq.toSetSeq();\n  }\n  concatSeq = concatSeq.flatten(true);\n  concatSeq.size = iters.reduce(function (sum, seq) {\n    if (sum !== undefined) {\n      var size = seq.size;\n      if (size !== undefined) {\n        return sum + size;\n      }\n    }\n  }, 0);\n  return concatSeq;\n}\n\nfunction flattenFactory(collection, depth, useKeys) {\n  var flatSequence = makeSequence(collection);\n  flatSequence.__iterateUncached = function (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    var stopped = false;\n    function flatDeep(iter, currentDepth) {\n      iter.__iterate(function (v, k) {\n        if ((!depth || currentDepth < depth) && isCollection(v)) {\n          flatDeep(v, currentDepth + 1);\n        } else {\n          iterations++;\n          if (fn(v, useKeys ? k : iterations - 1, flatSequence) === false) {\n            stopped = true;\n          }\n        }\n        return !stopped;\n      }, reverse);\n    }\n    flatDeep(collection, 0);\n    return iterations;\n  };\n  flatSequence.__iteratorUncached = function (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var stack = [];\n    var iterations = 0;\n    return new Iterator(function () {\n      while (iterator) {\n        var step = iterator.next();\n        if (step.done !== false) {\n          iterator = stack.pop();\n          continue;\n        }\n        var v = step.value;\n        if (type === ITERATE_ENTRIES) {\n          v = v[1];\n        }\n        if ((!depth || stack.length < depth) && isCollection(v)) {\n          stack.push(iterator);\n          iterator = v.__iterator(type, reverse);\n        } else {\n          return useKeys ? step : iteratorValue(type, iterations++, v, step);\n        }\n      }\n      return iteratorDone();\n    });\n  };\n  return flatSequence;\n}\n\nfunction flatMapFactory(collection, mapper, context) {\n  var coerce = collectionClass(collection);\n  return collection\n    .toSeq()\n    .map(function (v, k) { return coerce(mapper.call(context, v, k, collection)); })\n    .flatten(true);\n}\n\nfunction interposeFactory(collection, separator) {\n  var interposedSequence = makeSequence(collection);\n  interposedSequence.size = collection.size && collection.size * 2 - 1;\n  interposedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(\n      function (v) { return (!iterations || fn(separator, iterations++, this$1$1) !== false) &&\n        fn(v, iterations++, this$1$1) !== false; },\n      reverse\n    );\n    return iterations;\n  };\n  interposedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_VALUES, reverse);\n    var iterations = 0;\n    var step;\n    return new Iterator(function () {\n      if (!step || iterations % 2) {\n        step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n      }\n      return iterations % 2\n        ? iteratorValue(type, iterations++, separator)\n        : iteratorValue(type, iterations++, step.value, step);\n    });\n  };\n  return interposedSequence;\n}\n\nfunction sortFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  var isKeyedCollection = isKeyed(collection);\n  var index = 0;\n  var entries = collection\n    .toSeq()\n    .map(function (v, k) { return [k, v, index++, mapper ? mapper(v, k, collection) : v]; })\n    .valueSeq()\n    .toArray();\n  entries\n    .sort(function (a, b) { return comparator(a[3], b[3]) || a[2] - b[2]; })\n    .forEach(\n      isKeyedCollection\n        ? function (v, i) {\n            entries[i].length = 2;\n          }\n        : function (v, i) {\n            entries[i] = v[1];\n          }\n    );\n  return isKeyedCollection\n    ? KeyedSeq(entries)\n    : isIndexed(collection)\n    ? IndexedSeq(entries)\n    : SetSeq(entries);\n}\n\nfunction maxFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  if (mapper) {\n    var entry = collection\n      .toSeq()\n      .map(function (v, k) { return [v, mapper(v, k, collection)]; })\n      .reduce(function (a, b) { return (maxCompare(comparator, a[1], b[1]) ? b : a); });\n    return entry && entry[0];\n  }\n  return collection.reduce(function (a, b) { return (maxCompare(comparator, a, b) ? b : a); });\n}\n\nfunction maxCompare(comparator, a, b) {\n  var comp = comparator(b, a);\n  // b is considered the new max if the comparator declares them equal, but\n  // they are not equal and b is in fact a nullish value.\n  return (\n    (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) ||\n    comp > 0\n  );\n}\n\nfunction zipWithFactory(keyIter, zipper, iters, zipAll) {\n  var zipSequence = makeSequence(keyIter);\n  var sizes = new ArraySeq(iters).map(function (i) { return i.size; });\n  zipSequence.size = zipAll ? sizes.max() : sizes.min();\n  // Note: this a generic base implementation of __iterate in terms of\n  // __iterator which may be more generically useful in the future.\n  zipSequence.__iterate = function (fn, reverse) {\n    /* generic:\n    var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      iterations++;\n      if (fn(step.value[1], step.value[0], this) === false) {\n        break;\n      }\n    }\n    return iterations;\n    */\n    // indexed:\n    var iterator = this.__iterator(ITERATE_VALUES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      if (fn(step.value, iterations++, this) === false) {\n        break;\n      }\n    }\n    return iterations;\n  };\n  zipSequence.__iteratorUncached = function (type, reverse) {\n    var iterators = iters.map(\n      function (i) { return ((i = Collection(i)), getIterator(reverse ? i.reverse() : i)); }\n    );\n    var iterations = 0;\n    var isDone = false;\n    return new Iterator(function () {\n      var steps;\n      if (!isDone) {\n        steps = iterators.map(function (i) { return i.next(); });\n        isDone = zipAll ? steps.every(function (s) { return s.done; }) : steps.some(function (s) { return s.done; });\n      }\n      if (isDone) {\n        return iteratorDone();\n      }\n      return iteratorValue(\n        type,\n        iterations++,\n        zipper.apply(\n          null,\n          steps.map(function (s) { return s.value; })\n        )\n      );\n    });\n  };\n  return zipSequence;\n}\n\n// #pragma Helper Functions\n\nfunction reify(iter, seq) {\n  return iter === seq ? iter : isSeq(iter) ? seq : iter.constructor(seq);\n}\n\nfunction validateEntry(entry) {\n  if (entry !== Object(entry)) {\n    throw new TypeError('Expected [K, V] tuple: ' + entry);\n  }\n}\n\nfunction collectionClass(collection) {\n  return isKeyed(collection)\n    ? KeyedCollection\n    : isIndexed(collection)\n    ? IndexedCollection\n    : SetCollection;\n}\n\nfunction makeSequence(collection) {\n  return Object.create(\n    (isKeyed(collection)\n      ? KeyedSeq\n      : isIndexed(collection)\n      ? IndexedSeq\n      : SetSeq\n    ).prototype\n  );\n}\n\nfunction cacheResultThrough() {\n  if (this._iter.cacheResult) {\n    this._iter.cacheResult();\n    this.size = this._iter.size;\n    return this;\n  }\n  return Seq.prototype.cacheResult.call(this);\n}\n\nfunction defaultComparator(a, b) {\n  if (a === undefined && b === undefined) {\n    return 0;\n  }\n\n  if (a === undefined) {\n    return 1;\n  }\n\n  if (b === undefined) {\n    return -1;\n  }\n\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\nfunction arrCopy(arr, offset) {\n  offset = offset || 0;\n  var len = Math.max(0, arr.length - offset);\n  var newArr = new Array(len);\n  for (var ii = 0; ii < len; ii++) {\n    newArr[ii] = arr[ii + offset];\n  }\n  return newArr;\n}\n\nfunction invariant(condition, error) {\n  if (!condition) { throw new Error(error); }\n}\n\nfunction assertNotInfinite(size) {\n  invariant(\n    size !== Infinity,\n    'Cannot perform this action with an infinite size.'\n  );\n}\n\nfunction coerceKeyPath(keyPath) {\n  if (isArrayLike(keyPath) && typeof keyPath !== 'string') {\n    return keyPath;\n  }\n  if (isOrdered(keyPath)) {\n    return keyPath.toArray();\n  }\n  throw new TypeError(\n    'Invalid keyPath: expected Ordered Collection or Array: ' + keyPath\n  );\n}\n\nvar toString = Object.prototype.toString;\n\nfunction isPlainObject(value) {\n  // The base prototype's toString deals with Argument objects and native namespaces like Math\n  if (\n    !value ||\n    typeof value !== 'object' ||\n    toString.call(value) !== '[object Object]'\n  ) {\n    return false;\n  }\n\n  var proto = Object.getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n\n  // Iteratively going up the prototype chain is needed for cross-realm environments (differing contexts, iframes, etc)\n  var parentProto = proto;\n  var nextProto = Object.getPrototypeOf(proto);\n  while (nextProto !== null) {\n    parentProto = nextProto;\n    nextProto = Object.getPrototypeOf(parentProto);\n  }\n  return parentProto === proto;\n}\n\n/**\n * Returns true if the value is a potentially-persistent data structure, either\n * provided by Immutable.js or a plain Array or Object.\n */\nfunction isDataStructure(value) {\n  return (\n    typeof value === 'object' &&\n    (isImmutable(value) || Array.isArray(value) || isPlainObject(value))\n  );\n}\n\nfunction quoteString(value) {\n  try {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  } catch (_ignoreError) {\n    return JSON.stringify(value);\n  }\n}\n\nfunction has(collection, key) {\n  return isImmutable(collection)\n    ? collection.has(key)\n    : isDataStructure(collection) && hasOwnProperty.call(collection, key);\n}\n\nfunction get(collection, key, notSetValue) {\n  return isImmutable(collection)\n    ? collection.get(key, notSetValue)\n    : !has(collection, key)\n    ? notSetValue\n    : typeof collection.get === 'function'\n    ? collection.get(key)\n    : collection[key];\n}\n\nfunction shallowCopy(from) {\n  if (Array.isArray(from)) {\n    return arrCopy(from);\n  }\n  var to = {};\n  for (var key in from) {\n    if (hasOwnProperty.call(from, key)) {\n      to[key] = from[key];\n    }\n  }\n  return to;\n}\n\nfunction remove(collection, key) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.remove) {\n      throw new TypeError(\n        'Cannot update immutable value without .remove() method: ' + collection\n      );\n    }\n    return collection.remove(key);\n  }\n  if (!hasOwnProperty.call(collection, key)) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  if (Array.isArray(collectionCopy)) {\n    collectionCopy.splice(key, 1);\n  } else {\n    delete collectionCopy[key];\n  }\n  return collectionCopy;\n}\n\nfunction set(collection, key, value) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.set) {\n      throw new TypeError(\n        'Cannot update immutable value without .set() method: ' + collection\n      );\n    }\n    return collection.set(key, value);\n  }\n  if (hasOwnProperty.call(collection, key) && value === collection[key]) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  collectionCopy[key] = value;\n  return collectionCopy;\n}\n\nfunction updateIn$1(collection, keyPath, notSetValue, updater) {\n  if (!updater) {\n    updater = notSetValue;\n    notSetValue = undefined;\n  }\n  var updatedValue = updateInDeeply(\n    isImmutable(collection),\n    collection,\n    coerceKeyPath(keyPath),\n    0,\n    notSetValue,\n    updater\n  );\n  return updatedValue === NOT_SET ? notSetValue : updatedValue;\n}\n\nfunction updateInDeeply(\n  inImmutable,\n  existing,\n  keyPath,\n  i,\n  notSetValue,\n  updater\n) {\n  var wasNotSet = existing === NOT_SET;\n  if (i === keyPath.length) {\n    var existingValue = wasNotSet ? notSetValue : existing;\n    var newValue = updater(existingValue);\n    return newValue === existingValue ? existing : newValue;\n  }\n  if (!wasNotSet && !isDataStructure(existing)) {\n    throw new TypeError(\n      'Cannot update within non-data-structure value in path [' +\n        keyPath.slice(0, i).map(quoteString) +\n        ']: ' +\n        existing\n    );\n  }\n  var key = keyPath[i];\n  var nextExisting = wasNotSet ? NOT_SET : get(existing, key, NOT_SET);\n  var nextUpdated = updateInDeeply(\n    nextExisting === NOT_SET ? inImmutable : isImmutable(nextExisting),\n    nextExisting,\n    keyPath,\n    i + 1,\n    notSetValue,\n    updater\n  );\n  return nextUpdated === nextExisting\n    ? existing\n    : nextUpdated === NOT_SET\n    ? remove(existing, key)\n    : set(\n        wasNotSet ? (inImmutable ? emptyMap() : {}) : existing,\n        key,\n        nextUpdated\n      );\n}\n\nfunction setIn$1(collection, keyPath, value) {\n  return updateIn$1(collection, keyPath, NOT_SET, function () { return value; });\n}\n\nfunction setIn(keyPath, v) {\n  return setIn$1(this, keyPath, v);\n}\n\nfunction removeIn(collection, keyPath) {\n  return updateIn$1(collection, keyPath, function () { return NOT_SET; });\n}\n\nfunction deleteIn(keyPath) {\n  return removeIn(this, keyPath);\n}\n\nfunction update$1(collection, key, notSetValue, updater) {\n  return updateIn$1(collection, [key], notSetValue, updater);\n}\n\nfunction update(key, notSetValue, updater) {\n  return arguments.length === 1\n    ? key(this)\n    : update$1(this, key, notSetValue, updater);\n}\n\nfunction updateIn(keyPath, notSetValue, updater) {\n  return updateIn$1(this, keyPath, notSetValue, updater);\n}\n\nfunction merge$1() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeIntoKeyedWith(this, iters);\n}\n\nfunction mergeWith$1(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  if (typeof merger !== 'function') {\n    throw new TypeError('Invalid merger function: ' + merger);\n  }\n  return mergeIntoKeyedWith(this, iters, merger);\n}\n\nfunction mergeIntoKeyedWith(collection, collections, merger) {\n  var iters = [];\n  for (var ii = 0; ii < collections.length; ii++) {\n    var collection$1 = KeyedCollection(collections[ii]);\n    if (collection$1.size !== 0) {\n      iters.push(collection$1);\n    }\n  }\n  if (iters.length === 0) {\n    return collection;\n  }\n  if (\n    collection.toSeq().size === 0 &&\n    !collection.__ownerID &&\n    iters.length === 1\n  ) {\n    return collection.constructor(iters[0]);\n  }\n  return collection.withMutations(function (collection) {\n    var mergeIntoCollection = merger\n      ? function (value, key) {\n          update$1(collection, key, NOT_SET, function (oldVal) { return oldVal === NOT_SET ? value : merger(oldVal, value, key); }\n          );\n        }\n      : function (value, key) {\n          collection.set(key, value);\n        };\n    for (var ii = 0; ii < iters.length; ii++) {\n      iters[ii].forEach(mergeIntoCollection);\n    }\n  });\n}\n\nfunction merge(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeWithSources(collection, sources);\n}\n\nfunction mergeWith(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeWithSources(collection, sources, merger);\n}\n\nfunction mergeDeep$1(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(collection, sources);\n}\n\nfunction mergeDeepWith$1(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeDeepWithSources(collection, sources, merger);\n}\n\nfunction mergeDeepWithSources(collection, sources, merger) {\n  return mergeWithSources(collection, sources, deepMergerWith(merger));\n}\n\nfunction mergeWithSources(collection, sources, merger) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot merge into non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    return typeof merger === 'function' && collection.mergeWith\n      ? collection.mergeWith.apply(collection, [ merger ].concat( sources ))\n      : collection.merge\n      ? collection.merge.apply(collection, sources)\n      : collection.concat.apply(collection, sources);\n  }\n  var isArray = Array.isArray(collection);\n  var merged = collection;\n  var Collection = isArray ? IndexedCollection : KeyedCollection;\n  var mergeItem = isArray\n    ? function (value) {\n        // Copy on write\n        if (merged === collection) {\n          merged = shallowCopy(merged);\n        }\n        merged.push(value);\n      }\n    : function (value, key) {\n        var hasVal = hasOwnProperty.call(merged, key);\n        var nextVal =\n          hasVal && merger ? merger(merged[key], value, key) : value;\n        if (!hasVal || nextVal !== merged[key]) {\n          // Copy on write\n          if (merged === collection) {\n            merged = shallowCopy(merged);\n          }\n          merged[key] = nextVal;\n        }\n      };\n  for (var i = 0; i < sources.length; i++) {\n    Collection(sources[i]).forEach(mergeItem);\n  }\n  return merged;\n}\n\nfunction deepMergerWith(merger) {\n  function deepMerger(oldValue, newValue, key) {\n    return isDataStructure(oldValue) &&\n      isDataStructure(newValue) &&\n      areMergeable(oldValue, newValue)\n      ? mergeWithSources(oldValue, [newValue], deepMerger)\n      : merger\n      ? merger(oldValue, newValue, key)\n      : newValue;\n  }\n  return deepMerger;\n}\n\n/**\n * It's unclear what the desired behavior is for merging two collections that\n * fall into separate categories between keyed, indexed, or set-like, so we only\n * consider them mergeable if they fall into the same category.\n */\nfunction areMergeable(oldDataStructure, newDataStructure) {\n  var oldSeq = Seq(oldDataStructure);\n  var newSeq = Seq(newDataStructure);\n  // This logic assumes that a sequence can only fall into one of the three\n  // categories mentioned above (since there's no `isSetLike()` method).\n  return (\n    isIndexed(oldSeq) === isIndexed(newSeq) &&\n    isKeyed(oldSeq) === isKeyed(newSeq)\n  );\n}\n\nfunction mergeDeep() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeDeepWithSources(this, iters);\n}\n\nfunction mergeDeepWith(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(this, iters, merger);\n}\n\nfunction mergeIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn$1(this, keyPath, emptyMap(), function (m) { return mergeWithSources(m, iters); });\n}\n\nfunction mergeDeepIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn$1(this, keyPath, emptyMap(), function (m) { return mergeDeepWithSources(m, iters); }\n  );\n}\n\nfunction withMutations(fn) {\n  var mutable = this.asMutable();\n  fn(mutable);\n  return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n}\n\nfunction asMutable() {\n  return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n}\n\nfunction asImmutable() {\n  return this.__ensureOwner();\n}\n\nfunction wasAltered() {\n  return this.__altered;\n}\n\nvar Map = /*@__PURE__*/(function (KeyedCollection) {\n  function Map(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyMap()\n      : isMap(value) && !isOrdered(value)\n      ? value\n      : emptyMap().withMutations(function (map) {\n          var iter = KeyedCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v, k) { return map.set(k, v); });\n        });\n  }\n\n  if ( KeyedCollection ) Map.__proto__ = KeyedCollection;\n  Map.prototype = Object.create( KeyedCollection && KeyedCollection.prototype );\n  Map.prototype.constructor = Map;\n\n  Map.of = function of () {\n    var keyValues = [], len = arguments.length;\n    while ( len-- ) keyValues[ len ] = arguments[ len ];\n\n    return emptyMap().withMutations(function (map) {\n      for (var i = 0; i < keyValues.length; i += 2) {\n        if (i + 1 >= keyValues.length) {\n          throw new Error('Missing value for key: ' + keyValues[i]);\n        }\n        map.set(keyValues[i], keyValues[i + 1]);\n      }\n    });\n  };\n\n  Map.prototype.toString = function toString () {\n    return this.__toString('Map {', '}');\n  };\n\n  // @pragma Access\n\n  Map.prototype.get = function get (k, notSetValue) {\n    return this._root\n      ? this._root.get(0, undefined, k, notSetValue)\n      : notSetValue;\n  };\n\n  // @pragma Modification\n\n  Map.prototype.set = function set (k, v) {\n    return updateMap(this, k, v);\n  };\n\n  Map.prototype.remove = function remove (k) {\n    return updateMap(this, k, NOT_SET);\n  };\n\n  Map.prototype.deleteAll = function deleteAll (keys) {\n    var collection = Collection(keys);\n\n    if (collection.size === 0) {\n      return this;\n    }\n\n    return this.withMutations(function (map) {\n      collection.forEach(function (key) { return map.remove(key); });\n    });\n  };\n\n  Map.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._root = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyMap();\n  };\n\n  // @pragma Composition\n\n  Map.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator));\n  };\n\n  Map.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator, mapper));\n  };\n\n  Map.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    return this.withMutations(function (map) {\n      map.forEach(function (value, key) {\n        map.set(key, mapper.call(context, value, key, this$1$1));\n      });\n    });\n  };\n\n  // @pragma Mutability\n\n  Map.prototype.__iterator = function __iterator (type, reverse) {\n    return new MapIterator(this, type, reverse);\n  };\n\n  Map.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    this._root &&\n      this._root.iterate(function (entry) {\n        iterations++;\n        return fn(entry[1], entry[0], this$1$1);\n      }, reverse);\n    return iterations;\n  };\n\n  Map.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeMap(this.size, this._root, ownerID, this.__hash);\n  };\n\n  return Map;\n}(KeyedCollection));\n\nMap.isMap = isMap;\n\nvar MapPrototype = Map.prototype;\nMapPrototype[IS_MAP_SYMBOL] = true;\nMapPrototype[DELETE] = MapPrototype.remove;\nMapPrototype.removeAll = MapPrototype.deleteAll;\nMapPrototype.setIn = setIn;\nMapPrototype.removeIn = MapPrototype.deleteIn = deleteIn;\nMapPrototype.update = update;\nMapPrototype.updateIn = updateIn;\nMapPrototype.merge = MapPrototype.concat = merge$1;\nMapPrototype.mergeWith = mergeWith$1;\nMapPrototype.mergeDeep = mergeDeep;\nMapPrototype.mergeDeepWith = mergeDeepWith;\nMapPrototype.mergeIn = mergeIn;\nMapPrototype.mergeDeepIn = mergeDeepIn;\nMapPrototype.withMutations = withMutations;\nMapPrototype.wasAltered = wasAltered;\nMapPrototype.asImmutable = asImmutable;\nMapPrototype['@@transducer/init'] = MapPrototype.asMutable = asMutable;\nMapPrototype['@@transducer/step'] = function (result, arr) {\n  return result.set(arr[0], arr[1]);\n};\nMapPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\n// #pragma Trie Nodes\n\nvar ArrayMapNode = function ArrayMapNode(ownerID, entries) {\n  this.ownerID = ownerID;\n  this.entries = entries;\n};\n\nArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && entries.length === 1) {\n    return; // undefined\n  }\n\n  if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n    return createNodes(ownerID, entries, key, value);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new ArrayMapNode(ownerID, newEntries);\n};\n\nvar BitmapIndexedNode = function BitmapIndexedNode(ownerID, bitmap, nodes) {\n  this.ownerID = ownerID;\n  this.bitmap = bitmap;\n  this.nodes = nodes;\n};\n\nBitmapIndexedNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var bit = 1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK);\n  var bitmap = this.bitmap;\n  return (bitmap & bit) === 0\n    ? notSetValue\n    : this.nodes[popCount(bitmap & (bit - 1))].get(\n        shift + SHIFT,\n        keyHash,\n        key,\n        notSetValue\n      );\n};\n\nBitmapIndexedNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var bit = 1 << keyHashFrag;\n  var bitmap = this.bitmap;\n  var exists = (bitmap & bit) !== 0;\n\n  if (!exists && value === NOT_SET) {\n    return this;\n  }\n\n  var idx = popCount(bitmap & (bit - 1));\n  var nodes = this.nodes;\n  var node = exists ? nodes[idx] : undefined;\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n\n  if (newNode === node) {\n    return this;\n  }\n\n  if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n    return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n  }\n\n  if (\n    exists &&\n    !newNode &&\n    nodes.length === 2 &&\n    isLeafNode(nodes[idx ^ 1])\n  ) {\n    return nodes[idx ^ 1];\n  }\n\n  if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n    return newNode;\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newBitmap = exists ? (newNode ? bitmap : bitmap ^ bit) : bitmap | bit;\n  var newNodes = exists\n    ? newNode\n      ? setAt(nodes, idx, newNode, isEditable)\n      : spliceOut(nodes, idx, isEditable)\n    : spliceIn(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.bitmap = newBitmap;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n};\n\nvar HashArrayMapNode = function HashArrayMapNode(ownerID, count, nodes) {\n  this.ownerID = ownerID;\n  this.count = count;\n  this.nodes = nodes;\n};\n\nHashArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var node = this.nodes[idx];\n  return node\n    ? node.get(shift + SHIFT, keyHash, key, notSetValue)\n    : notSetValue;\n};\n\nHashArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var removed = value === NOT_SET;\n  var nodes = this.nodes;\n  var node = nodes[idx];\n\n  if (removed && !node) {\n    return this;\n  }\n\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n  if (newNode === node) {\n    return this;\n  }\n\n  var newCount = this.count;\n  if (!node) {\n    newCount++;\n  } else if (!newNode) {\n    newCount--;\n    if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n      return packNodes(ownerID, nodes, newCount, idx);\n    }\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newNodes = setAt(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.count = newCount;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new HashArrayMapNode(ownerID, newCount, newNodes);\n};\n\nvar HashCollisionNode = function HashCollisionNode(ownerID, keyHash, entries) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entries = entries;\n};\n\nHashCollisionNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nHashCollisionNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n\n  var removed = value === NOT_SET;\n\n  if (keyHash !== this.keyHash) {\n    if (removed) {\n      return this;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n  }\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && len === 2) {\n    return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n};\n\nvar ValueNode = function ValueNode(ownerID, keyHash, entry) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entry = entry;\n};\n\nValueNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n};\n\nValueNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n  var keyMatch = is(key, this.entry[0]);\n  if (keyMatch ? value === this.entry[1] : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n\n  if (removed) {\n    SetRef(didChangeSize);\n    return; // undefined\n  }\n\n  if (keyMatch) {\n    if (ownerID && ownerID === this.ownerID) {\n      this.entry[1] = value;\n      return this;\n    }\n    return new ValueNode(ownerID, this.keyHash, [key, value]);\n  }\n\n  SetRef(didChangeSize);\n  return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n};\n\n// #pragma Iterators\n\nArrayMapNode.prototype.iterate = HashCollisionNode.prototype.iterate =\n  function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  };\n\nBitmapIndexedNode.prototype.iterate = HashArrayMapNode.prototype.iterate =\n  function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  };\n\n// eslint-disable-next-line no-unused-vars\nValueNode.prototype.iterate = function (fn, reverse) {\n  return fn(this.entry);\n};\n\nvar MapIterator = /*@__PURE__*/(function (Iterator) {\n  function MapIterator(map, type, reverse) {\n    this._type = type;\n    this._reverse = reverse;\n    this._stack = map._root && mapIteratorFrame(map._root);\n  }\n\n  if ( Iterator ) MapIterator.__proto__ = Iterator;\n  MapIterator.prototype = Object.create( Iterator && Iterator.prototype );\n  MapIterator.prototype.constructor = MapIterator;\n\n  MapIterator.prototype.next = function next () {\n    var type = this._type;\n    var stack = this._stack;\n    while (stack) {\n      var node = stack.node;\n      var index = stack.index++;\n      var maxIndex = (void 0);\n      if (node.entry) {\n        if (index === 0) {\n          return mapIteratorValue(type, node.entry);\n        }\n      } else if (node.entries) {\n        maxIndex = node.entries.length - 1;\n        if (index <= maxIndex) {\n          return mapIteratorValue(\n            type,\n            node.entries[this._reverse ? maxIndex - index : index]\n          );\n        }\n      } else {\n        maxIndex = node.nodes.length - 1;\n        if (index <= maxIndex) {\n          var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n          if (subNode) {\n            if (subNode.entry) {\n              return mapIteratorValue(type, subNode.entry);\n            }\n            stack = this._stack = mapIteratorFrame(subNode, stack);\n          }\n          continue;\n        }\n      }\n      stack = this._stack = this._stack.__prev;\n    }\n    return iteratorDone();\n  };\n\n  return MapIterator;\n}(Iterator));\n\nfunction mapIteratorValue(type, entry) {\n  return iteratorValue(type, entry[0], entry[1]);\n}\n\nfunction mapIteratorFrame(node, prev) {\n  return {\n    node: node,\n    index: 0,\n    __prev: prev,\n  };\n}\n\nfunction makeMap(size, root, ownerID, hash) {\n  var map = Object.create(MapPrototype);\n  map.size = size;\n  map._root = root;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_MAP;\nfunction emptyMap() {\n  return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n}\n\nfunction updateMap(map, k, v) {\n  var newRoot;\n  var newSize;\n  if (!map._root) {\n    if (v === NOT_SET) {\n      return map;\n    }\n    newSize = 1;\n    newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n  } else {\n    var didChangeSize = MakeRef();\n    var didAlter = MakeRef();\n    newRoot = updateNode(\n      map._root,\n      map.__ownerID,\n      0,\n      undefined,\n      k,\n      v,\n      didChangeSize,\n      didAlter\n    );\n    if (!didAlter.value) {\n      return map;\n    }\n    newSize = map.size + (didChangeSize.value ? (v === NOT_SET ? -1 : 1) : 0);\n  }\n  if (map.__ownerID) {\n    map.size = newSize;\n    map._root = newRoot;\n    map.__hash = undefined;\n    map.__altered = true;\n    return map;\n  }\n  return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n}\n\nfunction updateNode(\n  node,\n  ownerID,\n  shift,\n  keyHash,\n  key,\n  value,\n  didChangeSize,\n  didAlter\n) {\n  if (!node) {\n    if (value === NOT_SET) {\n      return node;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return new ValueNode(ownerID, keyHash, [key, value]);\n  }\n  return node.update(\n    ownerID,\n    shift,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n}\n\nfunction isLeafNode(node) {\n  return (\n    node.constructor === ValueNode || node.constructor === HashCollisionNode\n  );\n}\n\nfunction mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n  if (node.keyHash === keyHash) {\n    return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n  }\n\n  var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n  var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n  var newNode;\n  var nodes =\n    idx1 === idx2\n      ? [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)]\n      : ((newNode = new ValueNode(ownerID, keyHash, entry)),\n        idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n  return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n}\n\nfunction createNodes(ownerID, entries, key, value) {\n  if (!ownerID) {\n    ownerID = new OwnerID();\n  }\n  var node = new ValueNode(ownerID, hash(key), [key, value]);\n  for (var ii = 0; ii < entries.length; ii++) {\n    var entry = entries[ii];\n    node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n  }\n  return node;\n}\n\nfunction packNodes(ownerID, nodes, count, excluding) {\n  var bitmap = 0;\n  var packedII = 0;\n  var packedNodes = new Array(count);\n  for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n    var node = nodes[ii];\n    if (node !== undefined && ii !== excluding) {\n      bitmap |= bit;\n      packedNodes[packedII++] = node;\n    }\n  }\n  return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n}\n\nfunction expandNodes(ownerID, nodes, bitmap, including, node) {\n  var count = 0;\n  var expandedNodes = new Array(SIZE);\n  for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n    expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n  }\n  expandedNodes[including] = node;\n  return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n}\n\nfunction popCount(x) {\n  x -= (x >> 1) & 0x55555555;\n  x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n  x = (x + (x >> 4)) & 0x0f0f0f0f;\n  x += x >> 8;\n  x += x >> 16;\n  return x & 0x7f;\n}\n\nfunction setAt(array, idx, val, canEdit) {\n  var newArray = canEdit ? array : arrCopy(array);\n  newArray[idx] = val;\n  return newArray;\n}\n\nfunction spliceIn(array, idx, val, canEdit) {\n  var newLen = array.length + 1;\n  if (canEdit && idx + 1 === newLen) {\n    array[idx] = val;\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      newArray[ii] = val;\n      after = -1;\n    } else {\n      newArray[ii] = array[ii + after];\n    }\n  }\n  return newArray;\n}\n\nfunction spliceOut(array, idx, canEdit) {\n  var newLen = array.length - 1;\n  if (canEdit && idx === newLen) {\n    array.pop();\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      after = 1;\n    }\n    newArray[ii] = array[ii + after];\n  }\n  return newArray;\n}\n\nvar MAX_ARRAY_MAP_SIZE = SIZE / 4;\nvar MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\nvar MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\nvar IS_LIST_SYMBOL = '@@__IMMUTABLE_LIST__@@';\n\nfunction isList(maybeList) {\n  return Boolean(maybeList && maybeList[IS_LIST_SYMBOL]);\n}\n\nvar List = /*@__PURE__*/(function (IndexedCollection) {\n  function List(value) {\n    var empty = emptyList();\n    if (value === undefined || value === null) {\n      // eslint-disable-next-line no-constructor-return\n      return empty;\n    }\n    if (isList(value)) {\n      // eslint-disable-next-line no-constructor-return\n      return value;\n    }\n    var iter = IndexedCollection(value);\n    var size = iter.size;\n    if (size === 0) {\n      // eslint-disable-next-line no-constructor-return\n      return empty;\n    }\n    assertNotInfinite(size);\n    if (size > 0 && size < SIZE) {\n      // eslint-disable-next-line no-constructor-return\n      return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n    }\n    // eslint-disable-next-line no-constructor-return\n    return empty.withMutations(function (list) {\n      list.setSize(size);\n      iter.forEach(function (v, i) { return list.set(i, v); });\n    });\n  }\n\n  if ( IndexedCollection ) List.__proto__ = IndexedCollection;\n  List.prototype = Object.create( IndexedCollection && IndexedCollection.prototype );\n  List.prototype.constructor = List;\n\n  List.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  List.prototype.toString = function toString () {\n    return this.__toString('List [', ']');\n  };\n\n  // @pragma Access\n\n  List.prototype.get = function get (index, notSetValue) {\n    index = wrapIndex(this, index);\n    if (index >= 0 && index < this.size) {\n      index += this._origin;\n      var node = listNodeFor(this, index);\n      return node && node.array[index & MASK];\n    }\n    return notSetValue;\n  };\n\n  // @pragma Modification\n\n  List.prototype.set = function set (index, value) {\n    return updateList(this, index, value);\n  };\n\n  List.prototype.remove = function remove (index) {\n    return !this.has(index)\n      ? this\n      : index === 0\n      ? this.shift()\n      : index === this.size - 1\n      ? this.pop()\n      : this.splice(index, 1);\n  };\n\n  List.prototype.insert = function insert (index, value) {\n    return this.splice(index, 0, value);\n  };\n\n  List.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = this._origin = this._capacity = 0;\n      this._level = SHIFT;\n      this._root = this._tail = this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyList();\n  };\n\n  List.prototype.push = function push (/*...values*/) {\n    var values = arguments;\n    var oldSize = this.size;\n    return this.withMutations(function (list) {\n      setListBounds(list, 0, oldSize + values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(oldSize + ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.pop = function pop () {\n    return setListBounds(this, 0, -1);\n  };\n\n  List.prototype.unshift = function unshift (/*...values*/) {\n    var values = arguments;\n    return this.withMutations(function (list) {\n      setListBounds(list, -values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.shift = function shift () {\n    return setListBounds(this, 1);\n  };\n\n  // @pragma Composition\n\n  List.prototype.concat = function concat (/*...collections*/) {\n    var arguments$1 = arguments;\n\n    var seqs = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var argument = arguments$1[i];\n      var seq = IndexedCollection(\n        typeof argument !== 'string' && hasIterator(argument)\n          ? argument\n          : [argument]\n      );\n      if (seq.size !== 0) {\n        seqs.push(seq);\n      }\n    }\n    if (seqs.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && seqs.length === 1) {\n      return this.constructor(seqs[0]);\n    }\n    return this.withMutations(function (list) {\n      seqs.forEach(function (seq) { return seq.forEach(function (value) { return list.push(value); }); });\n    });\n  };\n\n  List.prototype.setSize = function setSize (size) {\n    return setListBounds(this, 0, size);\n  };\n\n  List.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    return this.withMutations(function (list) {\n      for (var i = 0; i < this$1$1.size; i++) {\n        list.set(i, mapper.call(context, list.get(i), i, this$1$1));\n      }\n    });\n  };\n\n  // @pragma Iteration\n\n  List.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    if (wholeSlice(begin, end, size)) {\n      return this;\n    }\n    return setListBounds(\n      this,\n      resolveBegin(begin, size),\n      resolveEnd(end, size)\n    );\n  };\n\n  List.prototype.__iterator = function __iterator (type, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    return new Iterator(function () {\n      var value = values();\n      return value === DONE\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? --index : index++, value);\n    });\n  };\n\n  List.prototype.__iterate = function __iterate (fn, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    var value;\n    while ((value = values()) !== DONE) {\n      if (fn(value, reverse ? --index : index++, this) === false) {\n        break;\n      }\n    }\n    return index;\n  };\n\n  List.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyList();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeList(\n      this._origin,\n      this._capacity,\n      this._level,\n      this._root,\n      this._tail,\n      ownerID,\n      this.__hash\n    );\n  };\n\n  return List;\n}(IndexedCollection));\n\nList.isList = isList;\n\nvar ListPrototype = List.prototype;\nListPrototype[IS_LIST_SYMBOL] = true;\nListPrototype[DELETE] = ListPrototype.remove;\nListPrototype.merge = ListPrototype.concat;\nListPrototype.setIn = setIn;\nListPrototype.deleteIn = ListPrototype.removeIn = deleteIn;\nListPrototype.update = update;\nListPrototype.updateIn = updateIn;\nListPrototype.mergeIn = mergeIn;\nListPrototype.mergeDeepIn = mergeDeepIn;\nListPrototype.withMutations = withMutations;\nListPrototype.wasAltered = wasAltered;\nListPrototype.asImmutable = asImmutable;\nListPrototype['@@transducer/init'] = ListPrototype.asMutable = asMutable;\nListPrototype['@@transducer/step'] = function (result, arr) {\n  return result.push(arr);\n};\nListPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nvar VNode = function VNode(array, ownerID) {\n  this.array = array;\n  this.ownerID = ownerID;\n};\n\n// TODO: seems like these methods are very similar\n\nVNode.prototype.removeBefore = function removeBefore (ownerID, level, index) {\n  if (index === level ? 1 << level : this.array.length === 0) {\n    return this;\n  }\n  var originIndex = (index >>> level) & MASK;\n  if (originIndex >= this.array.length) {\n    return new VNode([], ownerID);\n  }\n  var removingFirst = originIndex === 0;\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[originIndex];\n    newChild =\n      oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && removingFirst) {\n      return this;\n    }\n  }\n  if (removingFirst && !newChild) {\n    return this;\n  }\n  var editable = editableVNode(this, ownerID);\n  if (!removingFirst) {\n    for (var ii = 0; ii < originIndex; ii++) {\n      editable.array[ii] = undefined;\n    }\n  }\n  if (newChild) {\n    editable.array[originIndex] = newChild;\n  }\n  return editable;\n};\n\nVNode.prototype.removeAfter = function removeAfter (ownerID, level, index) {\n  if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n    return this;\n  }\n  var sizeIndex = ((index - 1) >>> level) & MASK;\n  if (sizeIndex >= this.array.length) {\n    return this;\n  }\n\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[sizeIndex];\n    newChild =\n      oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n      return this;\n    }\n  }\n\n  var editable = editableVNode(this, ownerID);\n  editable.array.splice(sizeIndex + 1);\n  if (newChild) {\n    editable.array[sizeIndex] = newChild;\n  }\n  return editable;\n};\n\nvar DONE = {};\n\nfunction iterateList(list, reverse) {\n  var left = list._origin;\n  var right = list._capacity;\n  var tailPos = getTailOffset(right);\n  var tail = list._tail;\n\n  return iterateNodeOrLeaf(list._root, list._level, 0);\n\n  function iterateNodeOrLeaf(node, level, offset) {\n    return level === 0\n      ? iterateLeaf(node, offset)\n      : iterateNode(node, level, offset);\n  }\n\n  function iterateLeaf(node, offset) {\n    var array = offset === tailPos ? tail && tail.array : node && node.array;\n    var from = offset > left ? 0 : left - offset;\n    var to = right - offset;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      if (from === to) {\n        return DONE;\n      }\n      var idx = reverse ? --to : from++;\n      return array && array[idx];\n    };\n  }\n\n  function iterateNode(node, level, offset) {\n    var values;\n    var array = node && node.array;\n    var from = offset > left ? 0 : (left - offset) >> level;\n    var to = ((right - offset) >> level) + 1;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      while (true) {\n        if (values) {\n          var value = values();\n          if (value !== DONE) {\n            return value;\n          }\n          values = null;\n        }\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        values = iterateNodeOrLeaf(\n          array && array[idx],\n          level - SHIFT,\n          offset + (idx << level)\n        );\n      }\n    };\n  }\n}\n\nfunction makeList(origin, capacity, level, root, tail, ownerID, hash) {\n  var list = Object.create(ListPrototype);\n  list.size = capacity - origin;\n  list._origin = origin;\n  list._capacity = capacity;\n  list._level = level;\n  list._root = root;\n  list._tail = tail;\n  list.__ownerID = ownerID;\n  list.__hash = hash;\n  list.__altered = false;\n  return list;\n}\n\nvar EMPTY_LIST;\nfunction emptyList() {\n  return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n}\n\nfunction updateList(list, index, value) {\n  index = wrapIndex(list, index);\n\n  if (index !== index) {\n    return list;\n  }\n\n  if (index >= list.size || index < 0) {\n    return list.withMutations(function (list) {\n      index < 0\n        ? setListBounds(list, index).set(0, value)\n        : setListBounds(list, 0, index + 1).set(index, value);\n    });\n  }\n\n  index += list._origin;\n\n  var newTail = list._tail;\n  var newRoot = list._root;\n  var didAlter = MakeRef();\n  if (index >= getTailOffset(list._capacity)) {\n    newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n  } else {\n    newRoot = updateVNode(\n      newRoot,\n      list.__ownerID,\n      list._level,\n      index,\n      value,\n      didAlter\n    );\n  }\n\n  if (!didAlter.value) {\n    return list;\n  }\n\n  if (list.__ownerID) {\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n}\n\nfunction updateVNode(node, ownerID, level, index, value, didAlter) {\n  var idx = (index >>> level) & MASK;\n  var nodeHas = node && idx < node.array.length;\n  if (!nodeHas && value === undefined) {\n    return node;\n  }\n\n  var newNode;\n\n  if (level > 0) {\n    var lowerNode = node && node.array[idx];\n    var newLowerNode = updateVNode(\n      lowerNode,\n      ownerID,\n      level - SHIFT,\n      index,\n      value,\n      didAlter\n    );\n    if (newLowerNode === lowerNode) {\n      return node;\n    }\n    newNode = editableVNode(node, ownerID);\n    newNode.array[idx] = newLowerNode;\n    return newNode;\n  }\n\n  if (nodeHas && node.array[idx] === value) {\n    return node;\n  }\n\n  if (didAlter) {\n    SetRef(didAlter);\n  }\n\n  newNode = editableVNode(node, ownerID);\n  if (value === undefined && idx === newNode.array.length - 1) {\n    newNode.array.pop();\n  } else {\n    newNode.array[idx] = value;\n  }\n  return newNode;\n}\n\nfunction editableVNode(node, ownerID) {\n  if (ownerID && node && ownerID === node.ownerID) {\n    return node;\n  }\n  return new VNode(node ? node.array.slice() : [], ownerID);\n}\n\nfunction listNodeFor(list, rawIndex) {\n  if (rawIndex >= getTailOffset(list._capacity)) {\n    return list._tail;\n  }\n  if (rawIndex < 1 << (list._level + SHIFT)) {\n    var node = list._root;\n    var level = list._level;\n    while (node && level > 0) {\n      node = node.array[(rawIndex >>> level) & MASK];\n      level -= SHIFT;\n    }\n    return node;\n  }\n}\n\nfunction setListBounds(list, begin, end) {\n  // Sanitize begin & end using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  if (begin !== undefined) {\n    begin |= 0;\n  }\n  if (end !== undefined) {\n    end |= 0;\n  }\n  var owner = list.__ownerID || new OwnerID();\n  var oldOrigin = list._origin;\n  var oldCapacity = list._capacity;\n  var newOrigin = oldOrigin + begin;\n  var newCapacity =\n    end === undefined\n      ? oldCapacity\n      : end < 0\n      ? oldCapacity + end\n      : oldOrigin + end;\n  if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n    return list;\n  }\n\n  // If it's going to end after it starts, it's empty.\n  if (newOrigin >= newCapacity) {\n    return list.clear();\n  }\n\n  var newLevel = list._level;\n  var newRoot = list._root;\n\n  // New origin might need creating a higher root.\n  var offsetShift = 0;\n  while (newOrigin + offsetShift < 0) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [undefined, newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n    offsetShift += 1 << newLevel;\n  }\n  if (offsetShift) {\n    newOrigin += offsetShift;\n    oldOrigin += offsetShift;\n    newCapacity += offsetShift;\n    oldCapacity += offsetShift;\n  }\n\n  var oldTailOffset = getTailOffset(oldCapacity);\n  var newTailOffset = getTailOffset(newCapacity);\n\n  // New size might need creating a higher root.\n  while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n  }\n\n  // Locate or create the new tail.\n  var oldTail = list._tail;\n  var newTail =\n    newTailOffset < oldTailOffset\n      ? listNodeFor(list, newCapacity - 1)\n      : newTailOffset > oldTailOffset\n      ? new VNode([], owner)\n      : oldTail;\n\n  // Merge Tail into tree.\n  if (\n    oldTail &&\n    newTailOffset > oldTailOffset &&\n    newOrigin < oldCapacity &&\n    oldTail.array.length\n  ) {\n    newRoot = editableVNode(newRoot, owner);\n    var node = newRoot;\n    for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n      var idx = (oldTailOffset >>> level) & MASK;\n      node = node.array[idx] = editableVNode(node.array[idx], owner);\n    }\n    node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n  }\n\n  // If the size has been reduced, there's a chance the tail needs to be trimmed.\n  if (newCapacity < oldCapacity) {\n    newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n  }\n\n  // If the new origin is within the tail, then we do not need a root.\n  if (newOrigin >= newTailOffset) {\n    newOrigin -= newTailOffset;\n    newCapacity -= newTailOffset;\n    newLevel = SHIFT;\n    newRoot = null;\n    newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n  } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n    offsetShift = 0;\n\n    // Identify the new top root node of the subtree of the old root.\n    while (newRoot) {\n      var beginIndex = (newOrigin >>> newLevel) & MASK;\n      if ((beginIndex !== newTailOffset >>> newLevel) & MASK) {\n        break;\n      }\n      if (beginIndex) {\n        offsetShift += (1 << newLevel) * beginIndex;\n      }\n      newLevel -= SHIFT;\n      newRoot = newRoot.array[beginIndex];\n    }\n\n    // Trim the new sides of the new root.\n    if (newRoot && newOrigin > oldOrigin) {\n      newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n    }\n    if (newRoot && newTailOffset < oldTailOffset) {\n      newRoot = newRoot.removeAfter(\n        owner,\n        newLevel,\n        newTailOffset - offsetShift\n      );\n    }\n    if (offsetShift) {\n      newOrigin -= offsetShift;\n      newCapacity -= offsetShift;\n    }\n  }\n\n  if (list.__ownerID) {\n    list.size = newCapacity - newOrigin;\n    list._origin = newOrigin;\n    list._capacity = newCapacity;\n    list._level = newLevel;\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n}\n\nfunction getTailOffset(size) {\n  return size < SIZE ? 0 : ((size - 1) >>> SHIFT) << SHIFT;\n}\n\nvar OrderedMap = /*@__PURE__*/(function (Map) {\n  function OrderedMap(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyOrderedMap()\n      : isOrderedMap(value)\n      ? value\n      : emptyOrderedMap().withMutations(function (map) {\n          var iter = KeyedCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v, k) { return map.set(k, v); });\n        });\n  }\n\n  if ( Map ) OrderedMap.__proto__ = Map;\n  OrderedMap.prototype = Object.create( Map && Map.prototype );\n  OrderedMap.prototype.constructor = OrderedMap;\n\n  OrderedMap.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedMap.prototype.toString = function toString () {\n    return this.__toString('OrderedMap {', '}');\n  };\n\n  // @pragma Access\n\n  OrderedMap.prototype.get = function get (k, notSetValue) {\n    var index = this._map.get(k);\n    return index !== undefined ? this._list.get(index)[1] : notSetValue;\n  };\n\n  // @pragma Modification\n\n  OrderedMap.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._map.clear();\n      this._list.clear();\n      this.__altered = true;\n      return this;\n    }\n    return emptyOrderedMap();\n  };\n\n  OrderedMap.prototype.set = function set (k, v) {\n    return updateOrderedMap(this, k, v);\n  };\n\n  OrderedMap.prototype.remove = function remove (k) {\n    return updateOrderedMap(this, k, NOT_SET);\n  };\n\n  OrderedMap.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._list.__iterate(\n      function (entry) { return entry && fn(entry[1], entry[0], this$1$1); },\n      reverse\n    );\n  };\n\n  OrderedMap.prototype.__iterator = function __iterator (type, reverse) {\n    return this._list.fromEntrySeq().__iterator(type, reverse);\n  };\n\n  OrderedMap.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    var newList = this._list.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyOrderedMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      this._map = newMap;\n      this._list = newList;\n      return this;\n    }\n    return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n  };\n\n  return OrderedMap;\n}(Map));\n\nOrderedMap.isOrderedMap = isOrderedMap;\n\nOrderedMap.prototype[IS_ORDERED_SYMBOL] = true;\nOrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\nfunction makeOrderedMap(map, list, ownerID, hash) {\n  var omap = Object.create(OrderedMap.prototype);\n  omap.size = map ? map.size : 0;\n  omap._map = map;\n  omap._list = list;\n  omap.__ownerID = ownerID;\n  omap.__hash = hash;\n  omap.__altered = false;\n  return omap;\n}\n\nvar EMPTY_ORDERED_MAP;\nfunction emptyOrderedMap() {\n  return (\n    EMPTY_ORDERED_MAP ||\n    (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()))\n  );\n}\n\nfunction updateOrderedMap(omap, k, v) {\n  var map = omap._map;\n  var list = omap._list;\n  var i = map.get(k);\n  var has = i !== undefined;\n  var newMap;\n  var newList;\n  if (v === NOT_SET) {\n    // removed\n    if (!has) {\n      return omap;\n    }\n    if (list.size >= SIZE && list.size >= map.size * 2) {\n      newList = list.filter(function (entry, idx) { return entry !== undefined && i !== idx; });\n      newMap = newList\n        .toKeyedSeq()\n        .map(function (entry) { return entry[0]; })\n        .flip()\n        .toMap();\n      if (omap.__ownerID) {\n        newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n      }\n    } else {\n      newMap = map.remove(k);\n      newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n    }\n  } else if (has) {\n    if (v === list.get(i)[1]) {\n      return omap;\n    }\n    newMap = map;\n    newList = list.set(i, [k, v]);\n  } else {\n    newMap = map.set(k, list.size);\n    newList = list.set(list.size, [k, v]);\n  }\n  if (omap.__ownerID) {\n    omap.size = newMap.size;\n    omap._map = newMap;\n    omap._list = newList;\n    omap.__hash = undefined;\n    omap.__altered = true;\n    return omap;\n  }\n  return makeOrderedMap(newMap, newList);\n}\n\nvar IS_STACK_SYMBOL = '@@__IMMUTABLE_STACK__@@';\n\nfunction isStack(maybeStack) {\n  return Boolean(maybeStack && maybeStack[IS_STACK_SYMBOL]);\n}\n\nvar Stack = /*@__PURE__*/(function (IndexedCollection) {\n  function Stack(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyStack()\n      : isStack(value)\n      ? value\n      : emptyStack().pushAll(value);\n  }\n\n  if ( IndexedCollection ) Stack.__proto__ = IndexedCollection;\n  Stack.prototype = Object.create( IndexedCollection && IndexedCollection.prototype );\n  Stack.prototype.constructor = Stack;\n\n  Stack.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Stack.prototype.toString = function toString () {\n    return this.__toString('Stack [', ']');\n  };\n\n  // @pragma Access\n\n  Stack.prototype.get = function get (index, notSetValue) {\n    var head = this._head;\n    index = wrapIndex(this, index);\n    while (head && index--) {\n      head = head.next;\n    }\n    return head ? head.value : notSetValue;\n  };\n\n  Stack.prototype.peek = function peek () {\n    return this._head && this._head.value;\n  };\n\n  // @pragma Modification\n\n  Stack.prototype.push = function push (/*...values*/) {\n    var arguments$1 = arguments;\n\n    if (arguments.length === 0) {\n      return this;\n    }\n    var newSize = this.size + arguments.length;\n    var head = this._head;\n    for (var ii = arguments.length - 1; ii >= 0; ii--) {\n      head = {\n        value: arguments$1[ii],\n        next: head,\n      };\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pushAll = function pushAll (iter) {\n    iter = IndexedCollection(iter);\n    if (iter.size === 0) {\n      return this;\n    }\n    if (this.size === 0 && isStack(iter)) {\n      return iter;\n    }\n    assertNotInfinite(iter.size);\n    var newSize = this.size;\n    var head = this._head;\n    iter.__iterate(function (value) {\n      newSize++;\n      head = {\n        value: value,\n        next: head,\n      };\n    }, /* reverse */ true);\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pop = function pop () {\n    return this.slice(1);\n  };\n\n  Stack.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._head = undefined;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyStack();\n  };\n\n  Stack.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    var resolvedBegin = resolveBegin(begin, this.size);\n    var resolvedEnd = resolveEnd(end, this.size);\n    if (resolvedEnd !== this.size) {\n      // super.slice(begin, end);\n      return IndexedCollection.prototype.slice.call(this, begin, end);\n    }\n    var newSize = this.size - resolvedBegin;\n    var head = this._head;\n    while (resolvedBegin--) {\n      head = head.next;\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  // @pragma Mutability\n\n  Stack.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyStack();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeStack(this.size, this._head, ownerID, this.__hash);\n  };\n\n  // @pragma Iteration\n\n  Stack.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterate(\n        function (v, k) { return fn(v, k, this$1$1); },\n        reverse\n      );\n    }\n    var iterations = 0;\n    var node = this._head;\n    while (node) {\n      if (fn(node.value, iterations++, this) === false) {\n        break;\n      }\n      node = node.next;\n    }\n    return iterations;\n  };\n\n  Stack.prototype.__iterator = function __iterator (type, reverse) {\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterator(type, reverse);\n    }\n    var iterations = 0;\n    var node = this._head;\n    return new Iterator(function () {\n      if (node) {\n        var value = node.value;\n        node = node.next;\n        return iteratorValue(type, iterations++, value);\n      }\n      return iteratorDone();\n    });\n  };\n\n  return Stack;\n}(IndexedCollection));\n\nStack.isStack = isStack;\n\nvar StackPrototype = Stack.prototype;\nStackPrototype[IS_STACK_SYMBOL] = true;\nStackPrototype.shift = StackPrototype.pop;\nStackPrototype.unshift = StackPrototype.push;\nStackPrototype.unshiftAll = StackPrototype.pushAll;\nStackPrototype.withMutations = withMutations;\nStackPrototype.wasAltered = wasAltered;\nStackPrototype.asImmutable = asImmutable;\nStackPrototype['@@transducer/init'] = StackPrototype.asMutable = asMutable;\nStackPrototype['@@transducer/step'] = function (result, arr) {\n  return result.unshift(arr);\n};\nStackPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nfunction makeStack(size, head, ownerID, hash) {\n  var map = Object.create(StackPrototype);\n  map.size = size;\n  map._head = head;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_STACK;\nfunction emptyStack() {\n  return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n}\n\nvar IS_SET_SYMBOL = '@@__IMMUTABLE_SET__@@';\n\nfunction isSet(maybeSet) {\n  return Boolean(maybeSet && maybeSet[IS_SET_SYMBOL]);\n}\n\nfunction isOrderedSet(maybeOrderedSet) {\n  return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n}\n\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (\n    !isCollection(b) ||\n    (a.size !== undefined && b.size !== undefined && a.size !== b.size) ||\n    (a.__hash !== undefined &&\n      b.__hash !== undefined &&\n      a.__hash !== b.__hash) ||\n    isKeyed(a) !== isKeyed(b) ||\n    isIndexed(a) !== isIndexed(b) ||\n    isOrdered(a) !== isOrdered(b)\n  ) {\n    return false;\n  }\n\n  if (a.size === 0 && b.size === 0) {\n    return true;\n  }\n\n  var notAssociative = !isAssociative(a);\n\n  if (isOrdered(a)) {\n    var entries = a.entries();\n    return (\n      b.every(function (v, k) {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done\n    );\n  }\n\n  var flipped = false;\n\n  if (a.size === undefined) {\n    if (b.size === undefined) {\n      if (typeof a.cacheResult === 'function') {\n        a.cacheResult();\n      }\n    } else {\n      flipped = true;\n      var _ = a;\n      a = b;\n      b = _;\n    }\n  }\n\n  var allEqual = true;\n  var bSize = b.__iterate(function (v, k) {\n    if (\n      notAssociative\n        ? !a.has(v)\n        : flipped\n        ? !is(v, a.get(k, NOT_SET))\n        : !is(a.get(k, NOT_SET), v)\n    ) {\n      allEqual = false;\n      return false;\n    }\n  });\n\n  return allEqual && a.size === bSize;\n}\n\nfunction mixin(ctor, methods) {\n  var keyCopier = function (key) {\n    ctor.prototype[key] = methods[key];\n  };\n  Object.keys(methods).forEach(keyCopier);\n  Object.getOwnPropertySymbols &&\n    Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n  return ctor;\n}\n\nfunction toJS(value) {\n  if (!value || typeof value !== 'object') {\n    return value;\n  }\n  if (!isCollection(value)) {\n    if (!isDataStructure(value)) {\n      return value;\n    }\n    value = Seq(value);\n  }\n  if (isKeyed(value)) {\n    var result$1 = {};\n    value.__iterate(function (v, k) {\n      result$1[k] = toJS(v);\n    });\n    return result$1;\n  }\n  var result = [];\n  value.__iterate(function (v) {\n    result.push(toJS(v));\n  });\n  return result;\n}\n\nvar Set = /*@__PURE__*/(function (SetCollection) {\n  function Set(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySet()\n      : isSet(value) && !isOrdered(value)\n      ? value\n      : emptySet().withMutations(function (set) {\n          var iter = SetCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v) { return set.add(v); });\n        });\n  }\n\n  if ( SetCollection ) Set.__proto__ = SetCollection;\n  Set.prototype = Object.create( SetCollection && SetCollection.prototype );\n  Set.prototype.constructor = Set;\n\n  Set.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Set.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  Set.intersect = function intersect (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.intersect.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.union = function union (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.union.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.prototype.toString = function toString () {\n    return this.__toString('Set {', '}');\n  };\n\n  // @pragma Access\n\n  Set.prototype.has = function has (value) {\n    return this._map.has(value);\n  };\n\n  // @pragma Modification\n\n  Set.prototype.add = function add (value) {\n    return updateSet(this, this._map.set(value, value));\n  };\n\n  Set.prototype.remove = function remove (value) {\n    return updateSet(this, this._map.remove(value));\n  };\n\n  Set.prototype.clear = function clear () {\n    return updateSet(this, this._map.clear());\n  };\n\n  // @pragma Composition\n\n  Set.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    // keep track if the set is altered by the map function\n    var didChanges = false;\n\n    var newMap = updateSet(\n      this,\n      this._map.mapEntries(function (ref) {\n        var v = ref[1];\n\n        var mapped = mapper.call(context, v, v, this$1$1);\n\n        if (mapped !== v) {\n          didChanges = true;\n        }\n\n        return [mapped, mapped];\n      }, context)\n    );\n\n    return didChanges ? newMap : this;\n  };\n\n  Set.prototype.union = function union () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    iters = iters.filter(function (x) { return x.size !== 0; });\n    if (iters.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n      return this.constructor(iters[0]);\n    }\n    return this.withMutations(function (set) {\n      for (var ii = 0; ii < iters.length; ii++) {\n        if (typeof iters[ii] === 'string') {\n          set.add(iters[ii]);\n        } else {\n          SetCollection(iters[ii]).forEach(function (value) { return set.add(value); });\n        }\n      }\n    });\n  };\n\n  Set.prototype.intersect = function intersect () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (!iters.every(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.subtract = function subtract () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (iters.some(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator));\n  };\n\n  Set.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator, mapper));\n  };\n\n  Set.prototype.wasAltered = function wasAltered () {\n    return this._map.wasAltered();\n  };\n\n  Set.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._map.__iterate(function (k) { return fn(k, k, this$1$1); }, reverse);\n  };\n\n  Set.prototype.__iterator = function __iterator (type, reverse) {\n    return this._map.__iterator(type, reverse);\n  };\n\n  Set.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return this.__empty();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      return this;\n    }\n    return this.__make(newMap, ownerID);\n  };\n\n  return Set;\n}(SetCollection));\n\nSet.isSet = isSet;\n\nvar SetPrototype = Set.prototype;\nSetPrototype[IS_SET_SYMBOL] = true;\nSetPrototype[DELETE] = SetPrototype.remove;\nSetPrototype.merge = SetPrototype.concat = SetPrototype.union;\nSetPrototype.withMutations = withMutations;\nSetPrototype.asImmutable = asImmutable;\nSetPrototype['@@transducer/init'] = SetPrototype.asMutable = asMutable;\nSetPrototype['@@transducer/step'] = function (result, arr) {\n  return result.add(arr);\n};\nSetPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nSetPrototype.__empty = emptySet;\nSetPrototype.__make = makeSet;\n\nfunction updateSet(set, newMap) {\n  if (set.__ownerID) {\n    set.size = newMap.size;\n    set._map = newMap;\n    return set;\n  }\n  return newMap === set._map\n    ? set\n    : newMap.size === 0\n    ? set.__empty()\n    : set.__make(newMap);\n}\n\nfunction makeSet(map, ownerID) {\n  var set = Object.create(SetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_SET;\nfunction emptySet() {\n  return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n}\n\n/**\n * Returns a lazy seq of nums from start (inclusive) to end\n * (exclusive), by step, where start defaults to 0, step to 1, and end to\n * infinity. When start is equal to end, returns empty list.\n */\nvar Range = /*@__PURE__*/(function (IndexedSeq) {\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      // eslint-disable-next-line no-constructor-return\n      return new Range(start, end, step);\n    }\n    invariant(step !== 0, 'Cannot step a Range by 0');\n    start = start || 0;\n    if (end === undefined) {\n      end = Infinity;\n    }\n    step = step === undefined ? 1 : Math.abs(step);\n    if (end < start) {\n      step = -step;\n    }\n    this._start = start;\n    this._end = end;\n    this._step = step;\n    this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n    if (this.size === 0) {\n      if (EMPTY_RANGE) {\n        // eslint-disable-next-line no-constructor-return\n        return EMPTY_RANGE;\n      }\n      EMPTY_RANGE = this;\n    }\n  }\n\n  if ( IndexedSeq ) Range.__proto__ = IndexedSeq;\n  Range.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  Range.prototype.constructor = Range;\n\n  Range.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Range []';\n    }\n    return (\n      'Range [ ' +\n      this._start +\n      '...' +\n      this._end +\n      (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]'\n    );\n  };\n\n  Range.prototype.get = function get (index, notSetValue) {\n    return this.has(index)\n      ? this._start + wrapIndex(this, index) * this._step\n      : notSetValue;\n  };\n\n  Range.prototype.includes = function includes (searchValue) {\n    var possibleIndex = (searchValue - this._start) / this._step;\n    return (\n      possibleIndex >= 0 &&\n      possibleIndex < this.size &&\n      possibleIndex === Math.floor(possibleIndex)\n    );\n  };\n\n  Range.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    begin = resolveBegin(begin, this.size);\n    end = resolveEnd(end, this.size);\n    if (end <= begin) {\n      return new Range(0, 0);\n    }\n    return new Range(\n      this.get(begin, this._end),\n      this.get(end, this._end),\n      this._step\n    );\n  };\n\n  Range.prototype.indexOf = function indexOf (searchValue) {\n    var offsetValue = searchValue - this._start;\n    if (offsetValue % this._step === 0) {\n      var index = offsetValue / this._step;\n      if (index >= 0 && index < this.size) {\n        return index;\n      }\n    }\n    return -1;\n  };\n\n  Range.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    return this.indexOf(searchValue);\n  };\n\n  Range.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    while (i !== size) {\n      if (fn(value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n      value += reverse ? -step : step;\n    }\n    return i;\n  };\n\n  Range.prototype.__iterator = function __iterator (type, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var v = value;\n      value += reverse ? -step : step;\n      return iteratorValue(type, reverse ? size - ++i : i++, v);\n    });\n  };\n\n  Range.prototype.equals = function equals (other) {\n    return other instanceof Range\n      ? this._start === other._start &&\n          this._end === other._end &&\n          this._step === other._step\n      : deepEqual(this, other);\n  };\n\n  return Range;\n}(IndexedSeq));\n\nvar EMPTY_RANGE;\n\nfunction getIn$1(collection, searchKeyPath, notSetValue) {\n  var keyPath = coerceKeyPath(searchKeyPath);\n  var i = 0;\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n  return collection;\n}\n\nfunction getIn(searchKeyPath, notSetValue) {\n  return getIn$1(this, searchKeyPath, notSetValue);\n}\n\nfunction hasIn$1(collection, keyPath) {\n  return getIn$1(collection, keyPath, NOT_SET) !== NOT_SET;\n}\n\nfunction hasIn(searchKeyPath) {\n  return hasIn$1(this, searchKeyPath);\n}\n\nfunction toObject() {\n  assertNotInfinite(this.size);\n  var object = {};\n  this.__iterate(function (v, k) {\n    object[k] = v;\n  });\n  return object;\n}\n\n// Note: all of these methods are deprecated.\nCollection.isIterable = isCollection;\nCollection.isKeyed = isKeyed;\nCollection.isIndexed = isIndexed;\nCollection.isAssociative = isAssociative;\nCollection.isOrdered = isOrdered;\n\nCollection.Iterator = Iterator;\n\nmixin(Collection, {\n  // ### Conversion to other types\n\n  toArray: function toArray() {\n    assertNotInfinite(this.size);\n    var array = new Array(this.size || 0);\n    var useTuples = isKeyed(this);\n    var i = 0;\n    this.__iterate(function (v, k) {\n      // Keyed collections produce an array of tuples.\n      array[i++] = useTuples ? [k, v] : v;\n    });\n    return array;\n  },\n\n  toIndexedSeq: function toIndexedSeq() {\n    return new ToIndexedSequence(this);\n  },\n\n  toJS: function toJS$1() {\n    return toJS(this);\n  },\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, true);\n  },\n\n  toMap: function toMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return Map(this.toKeyedSeq());\n  },\n\n  toObject: toObject,\n\n  toOrderedMap: function toOrderedMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedMap(this.toKeyedSeq());\n  },\n\n  toOrderedSet: function toOrderedSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSet: function toSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return Set(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSetSeq: function toSetSeq() {\n    return new ToSetSequence(this);\n  },\n\n  toSeq: function toSeq() {\n    return isIndexed(this)\n      ? this.toIndexedSeq()\n      : isKeyed(this)\n      ? this.toKeyedSeq()\n      : this.toSetSeq();\n  },\n\n  toStack: function toStack() {\n    // Use Late Binding here to solve the circular dependency.\n    return Stack(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toList: function toList() {\n    // Use Late Binding here to solve the circular dependency.\n    return List(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  // ### Common JavaScript methods and properties\n\n  toString: function toString() {\n    return '[Collection]';\n  },\n\n  __toString: function __toString(head, tail) {\n    if (this.size === 0) {\n      return head + tail;\n    }\n    return (\n      head +\n      ' ' +\n      this.toSeq().map(this.__toStringMapper).join(', ') +\n      ' ' +\n      tail\n    );\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  concat: function concat() {\n    var values = [], len = arguments.length;\n    while ( len-- ) values[ len ] = arguments[ len ];\n\n    return reify(this, concatFactory(this, values));\n  },\n\n  includes: function includes(searchValue) {\n    return this.some(function (value) { return is(value, searchValue); });\n  },\n\n  entries: function entries() {\n    return this.__iterator(ITERATE_ENTRIES);\n  },\n\n  every: function every(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = true;\n    this.__iterate(function (v, k, c) {\n      if (!predicate.call(context, v, k, c)) {\n        returnValue = false;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, true));\n  },\n\n  partition: function partition(predicate, context) {\n    return partitionFactory(this, predicate, context);\n  },\n\n  find: function find(predicate, context, notSetValue) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[1] : notSetValue;\n  },\n\n  forEach: function forEach(sideEffect, context) {\n    assertNotInfinite(this.size);\n    return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n  },\n\n  join: function join(separator) {\n    assertNotInfinite(this.size);\n    separator = separator !== undefined ? '' + separator : ',';\n    var joined = '';\n    var isFirst = true;\n    this.__iterate(function (v) {\n      isFirst ? (isFirst = false) : (joined += separator);\n      joined += v !== null && v !== undefined ? v.toString() : '';\n    });\n    return joined;\n  },\n\n  keys: function keys() {\n    return this.__iterator(ITERATE_KEYS);\n  },\n\n  map: function map(mapper, context) {\n    return reify(this, mapFactory(this, mapper, context));\n  },\n\n  reduce: function reduce$1(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      false\n    );\n  },\n\n  reduceRight: function reduceRight(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      true\n    );\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, true));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, true));\n  },\n\n  some: function some(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = false;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        returnValue = true;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  sort: function sort(comparator) {\n    return reify(this, sortFactory(this, comparator));\n  },\n\n  values: function values() {\n    return this.__iterator(ITERATE_VALUES);\n  },\n\n  // ### More sequential methods\n\n  butLast: function butLast() {\n    return this.slice(0, -1);\n  },\n\n  isEmpty: function isEmpty() {\n    return this.size !== undefined ? this.size === 0 : !this.some(function () { return true; });\n  },\n\n  count: function count(predicate, context) {\n    return ensureSize(\n      predicate ? this.toSeq().filter(predicate, context) : this\n    );\n  },\n\n  countBy: function countBy(grouper, context) {\n    return countByFactory(this, grouper, context);\n  },\n\n  equals: function equals(other) {\n    return deepEqual(this, other);\n  },\n\n  entrySeq: function entrySeq() {\n    var collection = this;\n    if (collection._cache) {\n      // We cache as an entries array, so we can just return the cache!\n      return new ArraySeq(collection._cache);\n    }\n    var entriesSequence = collection.toSeq().map(entryMapper).toIndexedSeq();\n    entriesSequence.fromEntrySeq = function () { return collection.toSeq(); };\n    return entriesSequence;\n  },\n\n  filterNot: function filterNot(predicate, context) {\n    return this.filter(not(predicate), context);\n  },\n\n  findEntry: function findEntry(predicate, context, notSetValue) {\n    var found = notSetValue;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        found = [k, v];\n        return false;\n      }\n    });\n    return found;\n  },\n\n  findKey: function findKey(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry && entry[0];\n  },\n\n  findLast: function findLast(predicate, context, notSetValue) {\n    return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n  },\n\n  findLastEntry: function findLastEntry(predicate, context, notSetValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .findEntry(predicate, context, notSetValue);\n  },\n\n  findLastKey: function findLastKey(predicate, context) {\n    return this.toKeyedSeq().reverse().findKey(predicate, context);\n  },\n\n  first: function first(notSetValue) {\n    return this.find(returnTrue, null, notSetValue);\n  },\n\n  flatMap: function flatMap(mapper, context) {\n    return reify(this, flatMapFactory(this, mapper, context));\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, true));\n  },\n\n  fromEntrySeq: function fromEntrySeq() {\n    return new FromEntriesSequence(this);\n  },\n\n  get: function get(searchKey, notSetValue) {\n    return this.find(function (_, key) { return is(key, searchKey); }, undefined, notSetValue);\n  },\n\n  getIn: getIn,\n\n  groupBy: function groupBy(grouper, context) {\n    return groupByFactory(this, grouper, context);\n  },\n\n  has: function has(searchKey) {\n    return this.get(searchKey, NOT_SET) !== NOT_SET;\n  },\n\n  hasIn: hasIn,\n\n  isSubset: function isSubset(iter) {\n    iter = typeof iter.includes === 'function' ? iter : Collection(iter);\n    return this.every(function (value) { return iter.includes(value); });\n  },\n\n  isSuperset: function isSuperset(iter) {\n    iter = typeof iter.isSubset === 'function' ? iter : Collection(iter);\n    return iter.isSubset(this);\n  },\n\n  keyOf: function keyOf(searchValue) {\n    return this.findKey(function (value) { return is(value, searchValue); });\n  },\n\n  keySeq: function keySeq() {\n    return this.toSeq().map(keyMapper).toIndexedSeq();\n  },\n\n  last: function last(notSetValue) {\n    return this.toSeq().reverse().first(notSetValue);\n  },\n\n  lastKeyOf: function lastKeyOf(searchValue) {\n    return this.toKeyedSeq().reverse().keyOf(searchValue);\n  },\n\n  max: function max(comparator) {\n    return maxFactory(this, comparator);\n  },\n\n  maxBy: function maxBy(mapper, comparator) {\n    return maxFactory(this, comparator, mapper);\n  },\n\n  min: function min(comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator\n    );\n  },\n\n  minBy: function minBy(mapper, comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator,\n      mapper\n    );\n  },\n\n  rest: function rest() {\n    return this.slice(1);\n  },\n\n  skip: function skip(amount) {\n    return amount === 0 ? this : this.slice(Math.max(0, amount));\n  },\n\n  skipLast: function skipLast(amount) {\n    return amount === 0 ? this : this.slice(0, -Math.max(0, amount));\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, true));\n  },\n\n  skipUntil: function skipUntil(predicate, context) {\n    return this.skipWhile(not(predicate), context);\n  },\n\n  sortBy: function sortBy(mapper, comparator) {\n    return reify(this, sortFactory(this, comparator, mapper));\n  },\n\n  take: function take(amount) {\n    return this.slice(0, Math.max(0, amount));\n  },\n\n  takeLast: function takeLast(amount) {\n    return this.slice(-Math.max(0, amount));\n  },\n\n  takeWhile: function takeWhile(predicate, context) {\n    return reify(this, takeWhileFactory(this, predicate, context));\n  },\n\n  takeUntil: function takeUntil(predicate, context) {\n    return this.takeWhile(not(predicate), context);\n  },\n\n  update: function update(fn) {\n    return fn(this);\n  },\n\n  valueSeq: function valueSeq() {\n    return this.toIndexedSeq();\n  },\n\n  // ### Hashable Object\n\n  hashCode: function hashCode() {\n    return this.__hash || (this.__hash = hashCollection(this));\n  },\n\n  // ### Internal\n\n  // abstract __iterate(fn, reverse)\n\n  // abstract __iterator(type, reverse)\n});\n\nvar CollectionPrototype = Collection.prototype;\nCollectionPrototype[IS_COLLECTION_SYMBOL] = true;\nCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.values;\nCollectionPrototype.toJSON = CollectionPrototype.toArray;\nCollectionPrototype.__toStringMapper = quoteString;\nCollectionPrototype.inspect = CollectionPrototype.toSource = function () {\n  return this.toString();\n};\nCollectionPrototype.chain = CollectionPrototype.flatMap;\nCollectionPrototype.contains = CollectionPrototype.includes;\n\nmixin(KeyedCollection, {\n  // ### More sequential methods\n\n  flip: function flip() {\n    return reify(this, flipFactory(this));\n  },\n\n  mapEntries: function mapEntries(mapper, context) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    return reify(\n      this,\n      this.toSeq()\n        .map(function (v, k) { return mapper.call(context, [k, v], iterations++, this$1$1); })\n        .fromEntrySeq()\n    );\n  },\n\n  mapKeys: function mapKeys(mapper, context) {\n    var this$1$1 = this;\n\n    return reify(\n      this,\n      this.toSeq()\n        .flip()\n        .map(function (k, v) { return mapper.call(context, k, v, this$1$1); })\n        .flip()\n    );\n  },\n});\n\nvar KeyedCollectionPrototype = KeyedCollection.prototype;\nKeyedCollectionPrototype[IS_KEYED_SYMBOL] = true;\nKeyedCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.entries;\nKeyedCollectionPrototype.toJSON = toObject;\nKeyedCollectionPrototype.__toStringMapper = function (v, k) { return quoteString(k) + ': ' + quoteString(v); };\n\nmixin(IndexedCollection, {\n  // ### Conversion to other types\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, false);\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, false));\n  },\n\n  findIndex: function findIndex(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  indexOf: function indexOf(searchValue) {\n    var key = this.keyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  lastIndexOf: function lastIndexOf(searchValue) {\n    var key = this.lastKeyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, false));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, false));\n  },\n\n  splice: function splice(index, removeNum /*, ...values*/) {\n    var numArgs = arguments.length;\n    removeNum = Math.max(removeNum || 0, 0);\n    if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n      return this;\n    }\n    // If index is negative, it should resolve relative to the size of the\n    // collection. However size may be expensive to compute if not cached, so\n    // only call count() if the number is in fact negative.\n    index = resolveBegin(index, index < 0 ? this.count() : this.size);\n    var spliced = this.slice(0, index);\n    return reify(\n      this,\n      numArgs === 1\n        ? spliced\n        : spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n    );\n  },\n\n  // ### More collection methods\n\n  findLastIndex: function findLastIndex(predicate, context) {\n    var entry = this.findLastEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  first: function first(notSetValue) {\n    return this.get(0, notSetValue);\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, false));\n  },\n\n  get: function get(index, notSetValue) {\n    index = wrapIndex(this, index);\n    return index < 0 ||\n      this.size === Infinity ||\n      (this.size !== undefined && index > this.size)\n      ? notSetValue\n      : this.find(function (_, key) { return key === index; }, undefined, notSetValue);\n  },\n\n  has: function has(index) {\n    index = wrapIndex(this, index);\n    return (\n      index >= 0 &&\n      (this.size !== undefined\n        ? this.size === Infinity || index < this.size\n        : this.indexOf(index) !== -1)\n    );\n  },\n\n  interpose: function interpose(separator) {\n    return reify(this, interposeFactory(this, separator));\n  },\n\n  interleave: function interleave(/*...collections*/) {\n    var collections = [this].concat(arrCopy(arguments));\n    var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, collections);\n    var interleaved = zipped.flatten(true);\n    if (zipped.size) {\n      interleaved.size = zipped.size * collections.length;\n    }\n    return reify(this, interleaved);\n  },\n\n  keySeq: function keySeq() {\n    return Range(0, this.size);\n  },\n\n  last: function last(notSetValue) {\n    return this.get(-1, notSetValue);\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, false));\n  },\n\n  zip: function zip(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections));\n  },\n\n  zipAll: function zipAll(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections, true));\n  },\n\n  zipWith: function zipWith(zipper /*, ...collections */) {\n    var collections = arrCopy(arguments);\n    collections[0] = this;\n    return reify(this, zipWithFactory(this, zipper, collections));\n  },\n});\n\nvar IndexedCollectionPrototype = IndexedCollection.prototype;\nIndexedCollectionPrototype[IS_INDEXED_SYMBOL] = true;\nIndexedCollectionPrototype[IS_ORDERED_SYMBOL] = true;\n\nmixin(SetCollection, {\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  get: function get(value, notSetValue) {\n    return this.has(value) ? value : notSetValue;\n  },\n\n  includes: function includes(value) {\n    return this.has(value);\n  },\n\n  // ### More sequential methods\n\n  keySeq: function keySeq() {\n    return this.valueSeq();\n  },\n});\n\nvar SetCollectionPrototype = SetCollection.prototype;\nSetCollectionPrototype.has = CollectionPrototype.includes;\nSetCollectionPrototype.contains = SetCollectionPrototype.includes;\nSetCollectionPrototype.keys = SetCollectionPrototype.values;\n\n// Mixin subclasses\n\nmixin(KeyedSeq, KeyedCollectionPrototype);\nmixin(IndexedSeq, IndexedCollectionPrototype);\nmixin(SetSeq, SetCollectionPrototype);\n\n// #pragma Helper functions\n\nfunction reduce(collection, reducer, reduction, context, useFirst, reverse) {\n  assertNotInfinite(collection.size);\n  collection.__iterate(function (v, k, c) {\n    if (useFirst) {\n      useFirst = false;\n      reduction = v;\n    } else {\n      reduction = reducer.call(context, reduction, v, k, c);\n    }\n  }, reverse);\n  return reduction;\n}\n\nfunction keyMapper(v, k) {\n  return k;\n}\n\nfunction entryMapper(v, k) {\n  return [k, v];\n}\n\nfunction not(predicate) {\n  return function () {\n    return !predicate.apply(this, arguments);\n  };\n}\n\nfunction neg(predicate) {\n  return function () {\n    return -predicate.apply(this, arguments);\n  };\n}\n\nfunction defaultZipper() {\n  return arrCopy(arguments);\n}\n\nfunction defaultNegComparator(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\nfunction hashCollection(collection) {\n  if (collection.size === Infinity) {\n    return 0;\n  }\n  var ordered = isOrdered(collection);\n  var keyed = isKeyed(collection);\n  var h = ordered ? 1 : 0;\n  var size = collection.__iterate(\n    keyed\n      ? ordered\n        ? function (v, k) {\n            h = (31 * h + hashMerge(hash(v), hash(k))) | 0;\n          }\n        : function (v, k) {\n            h = (h + hashMerge(hash(v), hash(k))) | 0;\n          }\n      : ordered\n      ? function (v) {\n          h = (31 * h + hash(v)) | 0;\n        }\n      : function (v) {\n          h = (h + hash(v)) | 0;\n        }\n  );\n  return murmurHashOfSize(size, h);\n}\n\nfunction murmurHashOfSize(size, h) {\n  h = imul(h, 0xcc9e2d51);\n  h = imul((h << 15) | (h >>> -15), 0x1b873593);\n  h = imul((h << 13) | (h >>> -13), 5);\n  h = ((h + 0xe6546b64) | 0) ^ size;\n  h = imul(h ^ (h >>> 16), 0x85ebca6b);\n  h = imul(h ^ (h >>> 13), 0xc2b2ae35);\n  h = smi(h ^ (h >>> 16));\n  return h;\n}\n\nfunction hashMerge(a, b) {\n  return (a ^ (b + 0x9e3779b9 + (a << 6) + (a >> 2))) | 0; // int\n}\n\nvar OrderedSet = /*@__PURE__*/(function (Set) {\n  function OrderedSet(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyOrderedSet()\n      : isOrderedSet(value)\n      ? value\n      : emptyOrderedSet().withMutations(function (set) {\n          var iter = SetCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v) { return set.add(v); });\n        });\n  }\n\n  if ( Set ) OrderedSet.__proto__ = Set;\n  OrderedSet.prototype = Object.create( Set && Set.prototype );\n  OrderedSet.prototype.constructor = OrderedSet;\n\n  OrderedSet.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedSet.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  OrderedSet.prototype.toString = function toString () {\n    return this.__toString('OrderedSet {', '}');\n  };\n\n  return OrderedSet;\n}(Set));\n\nOrderedSet.isOrderedSet = isOrderedSet;\n\nvar OrderedSetPrototype = OrderedSet.prototype;\nOrderedSetPrototype[IS_ORDERED_SYMBOL] = true;\nOrderedSetPrototype.zip = IndexedCollectionPrototype.zip;\nOrderedSetPrototype.zipWith = IndexedCollectionPrototype.zipWith;\nOrderedSetPrototype.zipAll = IndexedCollectionPrototype.zipAll;\n\nOrderedSetPrototype.__empty = emptyOrderedSet;\nOrderedSetPrototype.__make = makeOrderedSet;\n\nfunction makeOrderedSet(map, ownerID) {\n  var set = Object.create(OrderedSetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_ORDERED_SET;\nfunction emptyOrderedSet() {\n  return (\n    EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()))\n  );\n}\n\nvar PairSorting = {\n  LeftThenRight: -1,\n  RightThenLeft: +1,\n};\n\nfunction throwOnInvalidDefaultValues(defaultValues) {\n  if (isRecord(defaultValues)) {\n    throw new Error(\n      'Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.'\n    );\n  }\n\n  if (isImmutable(defaultValues)) {\n    throw new Error(\n      'Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.'\n    );\n  }\n\n  if (defaultValues === null || typeof defaultValues !== 'object') {\n    throw new Error(\n      'Can not call `Record` with a non-object as default values. Use a plain javascript object instead.'\n    );\n  }\n}\n\nvar Record = function Record(defaultValues, name) {\n  var hasInitialized;\n\n  throwOnInvalidDefaultValues(defaultValues);\n\n  var RecordType = function Record(values) {\n    var this$1$1 = this;\n\n    if (values instanceof RecordType) {\n      return values;\n    }\n    if (!(this instanceof RecordType)) {\n      return new RecordType(values);\n    }\n    if (!hasInitialized) {\n      hasInitialized = true;\n      var keys = Object.keys(defaultValues);\n      var indices = (RecordTypePrototype._indices = {});\n      // Deprecated: left to attempt not to break any external code which\n      // relies on a ._name property existing on record instances.\n      // Use Record.getDescriptiveName() instead\n      RecordTypePrototype._name = name;\n      RecordTypePrototype._keys = keys;\n      RecordTypePrototype._defaultValues = defaultValues;\n      for (var i = 0; i < keys.length; i++) {\n        var propName = keys[i];\n        indices[propName] = i;\n        if (RecordTypePrototype[propName]) {\n          /* eslint-disable no-console */\n          typeof console === 'object' &&\n            console.warn &&\n            console.warn(\n              'Cannot define ' +\n                recordName(this) +\n                ' with property \"' +\n                propName +\n                '\" since that property name is part of the Record API.'\n            );\n          /* eslint-enable no-console */\n        } else {\n          setProp(RecordTypePrototype, propName);\n        }\n      }\n    }\n    this.__ownerID = undefined;\n    this._values = List().withMutations(function (l) {\n      l.setSize(this$1$1._keys.length);\n      KeyedCollection(values).forEach(function (v, k) {\n        l.set(this$1$1._indices[k], v === this$1$1._defaultValues[k] ? undefined : v);\n      });\n    });\n    return this;\n  };\n\n  var RecordTypePrototype = (RecordType.prototype =\n    Object.create(RecordPrototype));\n  RecordTypePrototype.constructor = RecordType;\n\n  if (name) {\n    RecordType.displayName = name;\n  }\n\n  // eslint-disable-next-line no-constructor-return\n  return RecordType;\n};\n\nRecord.prototype.toString = function toString () {\n  var str = recordName(this) + ' { ';\n  var keys = this._keys;\n  var k;\n  for (var i = 0, l = keys.length; i !== l; i++) {\n    k = keys[i];\n    str += (i ? ', ' : '') + k + ': ' + quoteString(this.get(k));\n  }\n  return str + ' }';\n};\n\nRecord.prototype.equals = function equals (other) {\n  return (\n    this === other ||\n    (isRecord(other) && recordSeq(this).equals(recordSeq(other)))\n  );\n};\n\nRecord.prototype.hashCode = function hashCode () {\n  return recordSeq(this).hashCode();\n};\n\n// @pragma Access\n\nRecord.prototype.has = function has (k) {\n  return this._indices.hasOwnProperty(k);\n};\n\nRecord.prototype.get = function get (k, notSetValue) {\n  if (!this.has(k)) {\n    return notSetValue;\n  }\n  var index = this._indices[k];\n  var value = this._values.get(index);\n  return value === undefined ? this._defaultValues[k] : value;\n};\n\n// @pragma Modification\n\nRecord.prototype.set = function set (k, v) {\n  if (this.has(k)) {\n    var newValues = this._values.set(\n      this._indices[k],\n      v === this._defaultValues[k] ? undefined : v\n    );\n    if (newValues !== this._values && !this.__ownerID) {\n      return makeRecord(this, newValues);\n    }\n  }\n  return this;\n};\n\nRecord.prototype.remove = function remove (k) {\n  return this.set(k);\n};\n\nRecord.prototype.clear = function clear () {\n  var newValues = this._values.clear().setSize(this._keys.length);\n\n  return this.__ownerID ? this : makeRecord(this, newValues);\n};\n\nRecord.prototype.wasAltered = function wasAltered () {\n  return this._values.wasAltered();\n};\n\nRecord.prototype.toSeq = function toSeq () {\n  return recordSeq(this);\n};\n\nRecord.prototype.toJS = function toJS$1 () {\n  return toJS(this);\n};\n\nRecord.prototype.entries = function entries () {\n  return this.__iterator(ITERATE_ENTRIES);\n};\n\nRecord.prototype.__iterator = function __iterator (type, reverse) {\n  return recordSeq(this).__iterator(type, reverse);\n};\n\nRecord.prototype.__iterate = function __iterate (fn, reverse) {\n  return recordSeq(this).__iterate(fn, reverse);\n};\n\nRecord.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n  if (ownerID === this.__ownerID) {\n    return this;\n  }\n  var newValues = this._values.__ensureOwner(ownerID);\n  if (!ownerID) {\n    this.__ownerID = ownerID;\n    this._values = newValues;\n    return this;\n  }\n  return makeRecord(this, newValues, ownerID);\n};\n\nRecord.isRecord = isRecord;\nRecord.getDescriptiveName = recordName;\nvar RecordPrototype = Record.prototype;\nRecordPrototype[IS_RECORD_SYMBOL] = true;\nRecordPrototype[DELETE] = RecordPrototype.remove;\nRecordPrototype.deleteIn = RecordPrototype.removeIn = deleteIn;\nRecordPrototype.getIn = getIn;\nRecordPrototype.hasIn = CollectionPrototype.hasIn;\nRecordPrototype.merge = merge$1;\nRecordPrototype.mergeWith = mergeWith$1;\nRecordPrototype.mergeIn = mergeIn;\nRecordPrototype.mergeDeep = mergeDeep;\nRecordPrototype.mergeDeepWith = mergeDeepWith;\nRecordPrototype.mergeDeepIn = mergeDeepIn;\nRecordPrototype.setIn = setIn;\nRecordPrototype.update = update;\nRecordPrototype.updateIn = updateIn;\nRecordPrototype.withMutations = withMutations;\nRecordPrototype.asMutable = asMutable;\nRecordPrototype.asImmutable = asImmutable;\nRecordPrototype[ITERATOR_SYMBOL] = RecordPrototype.entries;\nRecordPrototype.toJSON = RecordPrototype.toObject =\n  CollectionPrototype.toObject;\nRecordPrototype.inspect = RecordPrototype.toSource = function () {\n  return this.toString();\n};\n\nfunction makeRecord(likeRecord, values, ownerID) {\n  var record = Object.create(Object.getPrototypeOf(likeRecord));\n  record._values = values;\n  record.__ownerID = ownerID;\n  return record;\n}\n\nfunction recordName(record) {\n  return record.constructor.displayName || record.constructor.name || 'Record';\n}\n\nfunction recordSeq(record) {\n  return keyedSeqFromValue(record._keys.map(function (k) { return [k, record.get(k)]; }));\n}\n\nfunction setProp(prototype, name) {\n  try {\n    Object.defineProperty(prototype, name, {\n      get: function () {\n        return this.get(name);\n      },\n      set: function (value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      },\n    });\n  } catch (error) {\n    // Object.defineProperty failed. Probably IE8.\n  }\n}\n\n/**\n * Returns a lazy Seq of `value` repeated `times` times. When `times` is\n * undefined, returns an infinite sequence of `value`.\n */\nvar Repeat = /*@__PURE__*/(function (IndexedSeq) {\n  function Repeat(value, times) {\n    if (!(this instanceof Repeat)) {\n      // eslint-disable-next-line no-constructor-return\n      return new Repeat(value, times);\n    }\n    this._value = value;\n    this.size = times === undefined ? Infinity : Math.max(0, times);\n    if (this.size === 0) {\n      if (EMPTY_REPEAT) {\n        // eslint-disable-next-line no-constructor-return\n        return EMPTY_REPEAT;\n      }\n      EMPTY_REPEAT = this;\n    }\n  }\n\n  if ( IndexedSeq ) Repeat.__proto__ = IndexedSeq;\n  Repeat.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  Repeat.prototype.constructor = Repeat;\n\n  Repeat.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Repeat []';\n    }\n    return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n  };\n\n  Repeat.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._value : notSetValue;\n  };\n\n  Repeat.prototype.includes = function includes (searchValue) {\n    return is(this._value, searchValue);\n  };\n\n  Repeat.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    return wholeSlice(begin, end, size)\n      ? this\n      : new Repeat(\n          this._value,\n          resolveEnd(end, size) - resolveBegin(begin, size)\n        );\n  };\n\n  Repeat.prototype.reverse = function reverse () {\n    return this;\n  };\n\n  Repeat.prototype.indexOf = function indexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return 0;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return this.size;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var i = 0;\n    while (i !== size) {\n      if (fn(this._value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  Repeat.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1$1 = this;\n\n    var size = this.size;\n    var i = 0;\n    return new Iterator(function () { return i === size\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? size - ++i : i++, this$1$1._value); }\n    );\n  };\n\n  Repeat.prototype.equals = function equals (other) {\n    return other instanceof Repeat\n      ? is(this._value, other._value)\n      : deepEqual(this, other);\n  };\n\n  return Repeat;\n}(IndexedSeq));\n\nvar EMPTY_REPEAT;\n\nfunction fromJS(value, converter) {\n  return fromJSWith(\n    [],\n    converter || defaultConverter,\n    value,\n    '',\n    converter && converter.length > 2 ? [] : undefined,\n    { '': value }\n  );\n}\n\nfunction fromJSWith(stack, converter, value, key, keyPath, parentValue) {\n  if (\n    typeof value !== 'string' &&\n    !isImmutable(value) &&\n    (isArrayLike(value) || hasIterator(value) || isPlainObject(value))\n  ) {\n    if (~stack.indexOf(value)) {\n      throw new TypeError('Cannot convert circular structure to Immutable');\n    }\n    stack.push(value);\n    keyPath && key !== '' && keyPath.push(key);\n    var converted = converter.call(\n      parentValue,\n      key,\n      Seq(value).map(function (v, k) { return fromJSWith(stack, converter, v, k, keyPath, value); }\n      ),\n      keyPath && keyPath.slice()\n    );\n    stack.pop();\n    keyPath && keyPath.pop();\n    return converted;\n  }\n  return value;\n}\n\nfunction defaultConverter(k, v) {\n  // Effectively the opposite of \"Collection.toSeq()\"\n  return isIndexed(v) ? v.toList() : isKeyed(v) ? v.toMap() : v.toSet();\n}\n\nvar version = \"4.3.7\";\n\nvar Immutable = {\n  version: version,\n\n  Collection: Collection,\n  // Note: Iterable is deprecated\n  Iterable: Collection,\n\n  Seq: Seq,\n  Map: Map,\n  OrderedMap: OrderedMap,\n  List: List,\n  Stack: Stack,\n  Set: Set,\n  OrderedSet: OrderedSet,\n  PairSorting: PairSorting,\n\n  Record: Record,\n  Range: Range,\n  Repeat: Repeat,\n\n  is: is,\n  fromJS: fromJS,\n  hash: hash,\n\n  isImmutable: isImmutable,\n  isCollection: isCollection,\n  isKeyed: isKeyed,\n  isIndexed: isIndexed,\n  isAssociative: isAssociative,\n  isOrdered: isOrdered,\n  isValueObject: isValueObject,\n  isPlainObject: isPlainObject,\n  isSeq: isSeq,\n  isList: isList,\n  isMap: isMap,\n  isOrderedMap: isOrderedMap,\n  isStack: isStack,\n  isSet: isSet,\n  isOrderedSet: isOrderedSet,\n  isRecord: isRecord,\n\n  get: get,\n  getIn: getIn$1,\n  has: has,\n  hasIn: hasIn$1,\n  merge: merge,\n  mergeDeep: mergeDeep$1,\n  mergeWith: mergeWith,\n  mergeDeepWith: mergeDeepWith$1,\n  remove: remove,\n  removeIn: removeIn,\n  set: set,\n  setIn: setIn$1,\n  update: update$1,\n  updateIn: updateIn$1,\n};\n\n// Note: Iterable is deprecated\nvar Iterable = Collection;\n\nexport default Immutable;\nexport { Collection, Iterable, List, Map, OrderedMap, OrderedSet, PairSorting, Range, Record, Repeat, Seq, Set, Stack, fromJS, get, getIn$1 as getIn, has, hasIn$1 as hasIn, hash, is, isAssociative, isCollection, isImmutable, isIndexed, isKeyed, isList, isMap, isOrdered, isOrderedMap, isOrderedSet, isPlainObject, isRecord, isSeq, isSet, isStack, isValueObject, merge, mergeDeep$1 as mergeDeep, mergeDeepWith$1 as mergeDeepWith, mergeWith, remove, removeIn, set, setIn$1 as setIn, update$1 as update, updateIn$1 as updateIn, version };\n","import type { RecordOf, List as ImmutableList } from 'immutable';\nimport { Record as ImmutableRecord, isList } from 'immutable';\n\nimport type { ApiCustomEmojiJSON } from 'mastodon/api_types/custom_emoji';\n\ntype CustomEmojiShape = Required<ApiCustomEmojiJSON>; // no changes from server shape\nexport type CustomEmoji = RecordOf<CustomEmojiShape>;\n\nexport const CustomEmojiFactory = ImmutableRecord<CustomEmojiShape>({\n  shortcode: '',\n  static_url: '',\n  url: '',\n  category: '',\n  visible_in_picker: false,\n});\n\nexport type EmojiMap = Record<string, ApiCustomEmojiJSON>;\n\nexport function makeEmojiMap(\n  emojis: ApiCustomEmojiJSON[] | ImmutableList<CustomEmoji>,\n) {\n  if (isList(emojis)) {\n    return emojis.reduce<EmojiMap>((obj, emoji) => {\n      obj[`:${emoji.shortcode}:`] = emoji.toJS();\n      return obj;\n    }, {});\n  } else\n    return emojis.reduce<EmojiMap>((obj, emoji) => {\n      obj[`:${emoji.shortcode}:`] = emoji;\n      return obj;\n    }, {});\n}\n","import escapeTextContentForBrowser from 'escape-html';\n\nimport type { ApiPollJSON, ApiPollOptionJSON } from 'mastodon/api_types/polls';\nimport emojify from 'mastodon/features/emoji/emoji';\n\nimport { CustomEmojiFactory, makeEmojiMap } from './custom_emoji';\nimport type { CustomEmoji, EmojiMap } from './custom_emoji';\n\ninterface PollOptionTranslation {\n  title: string;\n  titleHtml: string;\n}\n\nexport interface PollOption extends ApiPollOptionJSON {\n  voted: boolean;\n  titleHtml: string;\n  translation: PollOptionTranslation | null;\n}\n\nexport function createPollOptionTranslationFromServerJSON(\n  translation: { title: string },\n  emojiMap: EmojiMap,\n) {\n  return {\n    ...translation,\n    titleHtml: emojify(\n      escapeTextContentForBrowser(translation.title),\n      emojiMap,\n    ),\n  } as PollOptionTranslation;\n}\n\nexport interface Poll\n  extends Omit<ApiPollJSON, 'emojis' | 'options' | 'own_votes'> {\n  emojis: CustomEmoji[];\n  options: PollOption[];\n  own_votes?: number[];\n}\n\nconst pollDefaultValues = {\n  expired: false,\n  multiple: false,\n  voters_count: 0,\n  votes_count: 0,\n  voted: false,\n  own_votes: [],\n};\n\nexport function createPollFromServerJSON(\n  serverJSON: ApiPollJSON,\n  previousPoll?: Poll,\n) {\n  const emojiMap = makeEmojiMap(serverJSON.emojis);\n\n  return {\n    ...pollDefaultValues,\n    ...serverJSON,\n    emojis: serverJSON.emojis.map((emoji) => CustomEmojiFactory(emoji)),\n    options: serverJSON.options.map((optionJSON, index) => {\n      const option = {\n        ...optionJSON,\n        voted: serverJSON.own_votes?.includes(index) || false,\n        titleHtml: emojify(\n          escapeTextContentForBrowser(optionJSON.title),\n          emojiMap,\n        ),\n      } as PollOption;\n\n      const prevOption = previousPoll?.options[index];\n      if (prevOption?.translation && prevOption.title === option.title) {\n        const { translation } = prevOption;\n\n        option.translation = createPollOptionTranslationFromServerJSON(\n          translation,\n          emojiMap,\n        );\n      }\n\n      return option;\n    }),\n  } as Poll;\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\n\nexport const importAccounts = createAction<{ accounts: ApiAccountJSON[] }>(\n  'accounts/importAccounts',\n);\n","import escapeTextContentForBrowser from 'escape-html';\n\nimport { makeEmojiMap } from 'mastodon/models/custom_emoji';\n\nimport emojify from '../../features/emoji/emoji';\nimport { expandSpoilers } from '../../initial_state';\n\nconst domParser = new DOMParser();\n\nexport function searchTextFromRawStatus (status) {\n  const spoilerText   = status.spoiler_text || '';\n  const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n  return domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n}\n\nexport function normalizeFilterResult(result) {\n  const normalResult = { ...result };\n\n  normalResult.filter = normalResult.filter.id;\n\n  return normalResult;\n}\n\nexport function normalizeStatus(status, normalOldStatus) {\n  const normalStatus   = { ...status };\n\n  normalStatus.account = status.account.id;\n\n  if (status.reblog && status.reblog.id) {\n    normalStatus.reblog = status.reblog.id;\n  }\n\n  if (status.quote?.quoted_status ?? status.quote?.quoted_status_id) {\n    normalStatus.quote = {\n      ...status.quote,\n      quoted_status: status.quote.quoted_status?.id ?? status.quote?.quoted_status_id,\n    };\n  }\n\n  if (status.poll && status.poll.id) {\n    normalStatus.poll = status.poll.id;\n  }\n\n  if (status.card) {\n    normalStatus.card = {\n      ...status.card,\n      authors: status.card.authors.map(author => ({\n        ...author,\n        accountId: author.account?.id,\n        account: undefined,\n      })),\n    };\n  }\n\n  if (status.filtered) {\n    normalStatus.filtered = status.filtered.map(normalizeFilterResult);\n  }\n\n  // Only calculate these values when status first encountered and\n  // when the underlying values change. Otherwise keep the ones\n  // already in the reducer\n  if (normalOldStatus && normalOldStatus.get('content') === normalStatus.content && normalOldStatus.get('spoiler_text') === normalStatus.spoiler_text) {\n    normalStatus.search_index = normalOldStatus.get('search_index');\n    normalStatus.contentHtml = normalOldStatus.get('contentHtml');\n    normalStatus.spoilerHtml = normalOldStatus.get('spoilerHtml');\n    normalStatus.spoiler_text = normalOldStatus.get('spoiler_text');\n    normalStatus.hidden = normalOldStatus.get('hidden');\n\n    if (normalOldStatus.get('translation')) {\n      normalStatus.translation = normalOldStatus.get('translation');\n    }\n  } else {\n    // If the status has a CW but no contents, treat the CW as if it were the\n    // status' contents, to avoid having a CW toggle with seemingly no effect.\n    if (normalStatus.spoiler_text && !normalStatus.content) {\n      normalStatus.content = normalStatus.spoiler_text;\n      normalStatus.spoiler_text = '';\n    }\n\n    const spoilerText   = normalStatus.spoiler_text || '';\n    const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n    const emojiMap      = makeEmojiMap(normalStatus.emojis);\n\n    normalStatus.search_index = domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n    normalStatus.contentHtml  = emojify(normalStatus.content, emojiMap);\n    normalStatus.spoilerHtml  = emojify(escapeTextContentForBrowser(spoilerText), emojiMap);\n    normalStatus.hidden       = expandSpoilers ? false : spoilerText.length > 0 || normalStatus.sensitive;\n\n    if (normalStatus.url && !(normalStatus.url.startsWith('http://') || normalStatus.url.startsWith('https://'))) {\n      normalStatus.url = null;\n    }\n\n    normalStatus.url ||= normalStatus.uri;\n\n    normalStatus.media_attachments.forEach(item => {\n      if (item.remote_url && !(item.remote_url.startsWith('http://') || item.remote_url.startsWith('https://')))\n        item.remote_url = null;\n    });\n  }\n\n  if (normalOldStatus) {\n    const list = normalOldStatus.get('media_attachments');\n    if (normalStatus.media_attachments && list) {\n      normalStatus.media_attachments.forEach(item => {\n        const oldItem = list.find(i => i.get('id') === item.id);\n        if (oldItem && oldItem.get('description') === item.description) {\n          item.translation = oldItem.get('translation');\n        }\n      });\n    }\n  }\n\n  return normalStatus;\n}\n\nexport function normalizeStatusTranslation(translation, status) {\n  const emojiMap = makeEmojiMap(status.get('emojis').toJS());\n\n  const normalTranslation = {\n    detected_source_language: translation.detected_source_language,\n    language: translation.language,\n    provider: translation.provider,\n    contentHtml: emojify(translation.content, emojiMap),\n    spoilerHtml: emojify(escapeTextContentForBrowser(translation.spoiler_text), emojiMap),\n    spoiler_text: translation.spoiler_text,\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizeAnnouncement(announcement) {\n  const normalAnnouncement = { ...announcement };\n  const emojiMap = makeEmojiMap(normalAnnouncement.emojis);\n\n  normalAnnouncement.contentHtml = emojify(normalAnnouncement.content, emojiMap);\n\n  return normalAnnouncement;\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { Poll } from 'mastodon/models/poll';\n\nexport const importPolls = createAction<{ polls: Poll[] }>(\n  'poll/importMultiple',\n);\n","import { createPollFromServerJSON } from 'mastodon/models/poll';\n\nimport { importAccounts } from './accounts';\nimport { normalizeStatus } from './normalizer';\nimport { importPolls } from './polls';\n\nexport const STATUS_IMPORT   = 'STATUS_IMPORT';\nexport const STATUSES_IMPORT = 'STATUSES_IMPORT';\nexport const FILTERS_IMPORT  = 'FILTERS_IMPORT';\n\nfunction pushUnique(array, object) {\n  if (array.every(element => element.id !== object.id)) {\n    array.push(object);\n  }\n}\n\nexport function importStatus(status) {\n  return { type: STATUS_IMPORT, status };\n}\n\nexport function importStatuses(statuses) {\n  return { type: STATUSES_IMPORT, statuses };\n}\n\nexport function importFilters(filters) {\n  return { type: FILTERS_IMPORT, filters };\n}\n\nexport function importFetchedAccount(account) {\n  return importFetchedAccounts([account]);\n}\n\nexport function importFetchedAccounts(accounts) {\n  const normalAccounts = [];\n\n  function processAccount(account) {\n    pushUnique(normalAccounts, account);\n\n    if (account.moved) {\n      processAccount(account.moved);\n    }\n  }\n\n  accounts.forEach(processAccount);\n\n  return importAccounts({ accounts: normalAccounts });\n}\n\nexport function importFetchedStatus(status) {\n  return importFetchedStatuses([status]);\n}\n\nexport function importFetchedStatuses(statuses) {\n  return (dispatch, getState) => {\n    const accounts = [];\n    const normalStatuses = [];\n    const polls = [];\n    const filters = [];\n\n    function processStatus(status) {\n      pushUnique(normalStatuses, normalizeStatus(status, getState().getIn(['statuses', status.id])));\n      pushUnique(accounts, status.account);\n\n      if (status.filtered) {\n        status.filtered.forEach(result => pushUnique(filters, result.filter));\n      }\n\n      if (status.reblog?.id) {\n        processStatus(status.reblog);\n      }\n\n      if (status.quote?.quoted_status) {\n        processStatus(status.quote.quoted_status);\n      }\n\n      if (status.poll?.id) {\n        pushUnique(polls, createPollFromServerJSON(status.poll, getState().polls[status.poll.id]));\n      }\n\n      if (status.card) {\n        status.card.authors.forEach(author => author.account && pushUnique(accounts, author.account));\n      }\n    }\n\n    statuses.forEach(processStatus);\n\n    dispatch(importPolls({ polls }));\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importStatuses(normalStatuses));\n    dispatch(importFilters(filters));\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  apiRemoveAccountFromFollowers,\n  apiGetEndorsedAccounts,\n} from 'mastodon/api/accounts';\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { importFetchedAccounts } from './importer';\n\nexport const revealAccount = createAction<{\n  id: string;\n}>('accounts/revealAccount');\n\nfunction actionWithSkipLoadingTrue<Args extends object>(args: Args) {\n  return {\n    payload: {\n      ...args,\n      skipLoading: true,\n    },\n  };\n}\n\nexport const followAccountSuccess = createAction(\n  'accounts/followAccount/SUCCESS',\n  actionWithSkipLoadingTrue<{\n    relationship: ApiRelationshipJSON;\n    alreadyFollowing: boolean;\n  }>,\n);\n\nexport const unfollowAccountSuccess = createAction(\n  'accounts/unfollowAccount/SUCCESS',\n  actionWithSkipLoadingTrue<{\n    relationship: ApiRelationshipJSON;\n    statuses: unknown;\n    alreadyFollowing?: boolean;\n  }>,\n);\n\nexport const authorizeFollowRequestSuccess = createAction<{ id: string }>(\n  'accounts/followRequestAuthorize/SUCCESS',\n);\n\nexport const rejectFollowRequestSuccess = createAction<{ id: string }>(\n  'accounts/followRequestReject/SUCCESS',\n);\n\nexport const followAccountRequest = createAction(\n  'accounts/follow/REQUEST',\n  actionWithSkipLoadingTrue<{ id: string; locked: boolean }>,\n);\n\nexport const followAccountFail = createAction(\n  'accounts/follow/FAIL',\n  actionWithSkipLoadingTrue<{ id: string; error: string; locked: boolean }>,\n);\n\nexport const unfollowAccountRequest = createAction(\n  'accounts/unfollow/REQUEST',\n  actionWithSkipLoadingTrue<{ id: string }>,\n);\n\nexport const unfollowAccountFail = createAction(\n  'accounts/unfollow/FAIL',\n  actionWithSkipLoadingTrue<{ id: string; error: string }>,\n);\n\nexport const blockAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n  statuses: unknown;\n}>('accounts/block/SUCCESS');\n\nexport const unblockAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unblock/SUCCESS');\n\nexport const muteAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n  statuses: unknown;\n}>('accounts/mute/SUCCESS');\n\nexport const unmuteAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unmute/SUCCESS');\n\nexport const pinAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/pin/SUCCESS');\n\nexport const unpinAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unpin/SUCCESS');\n\nexport const fetchRelationshipsSuccess = createAction(\n  'relationships/fetch/SUCCESS',\n  actionWithSkipLoadingTrue<{ relationships: ApiRelationshipJSON[] }>,\n);\n\nexport const removeAccountFromFollowers = createDataLoadingThunk(\n  'accounts/remove_from_followers',\n  ({ accountId }: { accountId: string }) =>\n    apiRemoveAccountFromFollowers(accountId),\n  (relationship) => ({ relationship }),\n);\n\nexport const fetchEndorsedAccounts = createDataLoadingThunk(\n  'accounts/endorsements',\n  ({ accountId }: { accountId: string }) => apiGetEndorsedAccounts(accountId),\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data));\n    return data;\n  },\n);\n","import { browserHistory } from 'mastodon/components/router';\nimport { debounceWithDispatchAndArguments } from 'mastodon/utils/debounce';\n\nimport api, { getLinks } from '../api';\nimport { me } from '../initial_state';\n\nimport {\n  followAccountSuccess, unfollowAccountSuccess,\n  authorizeFollowRequestSuccess, rejectFollowRequestSuccess,\n  followAccountRequest, followAccountFail,\n  unfollowAccountRequest, unfollowAccountFail,\n  muteAccountSuccess, unmuteAccountSuccess,\n  blockAccountSuccess, unblockAccountSuccess,\n  pinAccountSuccess, unpinAccountSuccess,\n  fetchRelationshipsSuccess,\n  fetchEndorsedAccounts,\n} from './accounts_typed';\nimport { importFetchedAccount, importFetchedAccounts } from './importer';\n\nexport const ACCOUNT_FETCH_REQUEST = 'ACCOUNT_FETCH_REQUEST';\nexport const ACCOUNT_FETCH_SUCCESS = 'ACCOUNT_FETCH_SUCCESS';\nexport const ACCOUNT_FETCH_FAIL    = 'ACCOUNT_FETCH_FAIL';\n\nexport const ACCOUNT_LOOKUP_REQUEST = 'ACCOUNT_LOOKUP_REQUEST';\nexport const ACCOUNT_LOOKUP_SUCCESS = 'ACCOUNT_LOOKUP_SUCCESS';\nexport const ACCOUNT_LOOKUP_FAIL    = 'ACCOUNT_LOOKUP_FAIL';\n\nexport const ACCOUNT_BLOCK_REQUEST = 'ACCOUNT_BLOCK_REQUEST';\nexport const ACCOUNT_BLOCK_FAIL    = 'ACCOUNT_BLOCK_FAIL';\n\nexport const ACCOUNT_UNBLOCK_REQUEST = 'ACCOUNT_UNBLOCK_REQUEST';\nexport const ACCOUNT_UNBLOCK_FAIL    = 'ACCOUNT_UNBLOCK_FAIL';\n\nexport const ACCOUNT_MUTE_REQUEST = 'ACCOUNT_MUTE_REQUEST';\nexport const ACCOUNT_MUTE_FAIL    = 'ACCOUNT_MUTE_FAIL';\n\nexport const ACCOUNT_UNMUTE_REQUEST = 'ACCOUNT_UNMUTE_REQUEST';\nexport const ACCOUNT_UNMUTE_FAIL    = 'ACCOUNT_UNMUTE_FAIL';\n\nexport const ACCOUNT_PIN_REQUEST = 'ACCOUNT_PIN_REQUEST';\nexport const ACCOUNT_PIN_FAIL    = 'ACCOUNT_PIN_FAIL';\n\nexport const ACCOUNT_UNPIN_REQUEST = 'ACCOUNT_UNPIN_REQUEST';\nexport const ACCOUNT_UNPIN_FAIL    = 'ACCOUNT_UNPIN_FAIL';\n\nexport const FOLLOWERS_FETCH_REQUEST = 'FOLLOWERS_FETCH_REQUEST';\nexport const FOLLOWERS_FETCH_SUCCESS = 'FOLLOWERS_FETCH_SUCCESS';\nexport const FOLLOWERS_FETCH_FAIL    = 'FOLLOWERS_FETCH_FAIL';\n\nexport const FOLLOWERS_EXPAND_REQUEST = 'FOLLOWERS_EXPAND_REQUEST';\nexport const FOLLOWERS_EXPAND_SUCCESS = 'FOLLOWERS_EXPAND_SUCCESS';\nexport const FOLLOWERS_EXPAND_FAIL    = 'FOLLOWERS_EXPAND_FAIL';\n\nexport const FOLLOWING_FETCH_REQUEST = 'FOLLOWING_FETCH_REQUEST';\nexport const FOLLOWING_FETCH_SUCCESS = 'FOLLOWING_FETCH_SUCCESS';\nexport const FOLLOWING_FETCH_FAIL    = 'FOLLOWING_FETCH_FAIL';\n\nexport const FOLLOWING_EXPAND_REQUEST = 'FOLLOWING_EXPAND_REQUEST';\nexport const FOLLOWING_EXPAND_SUCCESS = 'FOLLOWING_EXPAND_SUCCESS';\nexport const FOLLOWING_EXPAND_FAIL    = 'FOLLOWING_EXPAND_FAIL';\n\nexport const RELATIONSHIPS_FETCH_REQUEST = 'RELATIONSHIPS_FETCH_REQUEST';\nexport const RELATIONSHIPS_FETCH_FAIL    = 'RELATIONSHIPS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_FETCH_REQUEST = 'FOLLOW_REQUESTS_FETCH_REQUEST';\nexport const FOLLOW_REQUESTS_FETCH_SUCCESS = 'FOLLOW_REQUESTS_FETCH_SUCCESS';\nexport const FOLLOW_REQUESTS_FETCH_FAIL    = 'FOLLOW_REQUESTS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_EXPAND_REQUEST = 'FOLLOW_REQUESTS_EXPAND_REQUEST';\nexport const FOLLOW_REQUESTS_EXPAND_SUCCESS = 'FOLLOW_REQUESTS_EXPAND_SUCCESS';\nexport const FOLLOW_REQUESTS_EXPAND_FAIL    = 'FOLLOW_REQUESTS_EXPAND_FAIL';\n\nexport const FOLLOW_REQUEST_AUTHORIZE_REQUEST = 'FOLLOW_REQUEST_AUTHORIZE_REQUEST';\nexport const FOLLOW_REQUEST_AUTHORIZE_FAIL    = 'FOLLOW_REQUEST_AUTHORIZE_FAIL';\n\nexport const FOLLOW_REQUEST_REJECT_REQUEST = 'FOLLOW_REQUEST_REJECT_REQUEST';\nexport const FOLLOW_REQUEST_REJECT_FAIL    = 'FOLLOW_REQUEST_REJECT_FAIL';\n\nexport const ACCOUNT_REVEAL = 'ACCOUNT_REVEAL';\n\nexport * from './accounts_typed';\n\nexport function fetchAccount(id) {\n  return (dispatch) => {\n    dispatch(fetchRelationships([id]));\n    dispatch(fetchAccountRequest(id));\n\n    api().get(`/api/v1/accounts/${id}`).then(response => {\n      dispatch(importFetchedAccount(response.data));\n      dispatch(fetchAccountSuccess());\n    }).catch(error => {\n      dispatch(fetchAccountFail(id, error));\n    });\n  };\n}\n\nexport const lookupAccount = acct => (dispatch) => {\n  dispatch(lookupAccountRequest(acct));\n\n  api().get('/api/v1/accounts/lookup', { params: { acct } }).then(response => {\n    dispatch(fetchRelationships([response.data.id]));\n    dispatch(importFetchedAccount(response.data));\n    dispatch(lookupAccountSuccess());\n  }).catch(error => {\n    dispatch(lookupAccountFail(acct, error));\n  });\n};\n\nexport const lookupAccountRequest = (acct) => ({\n  type: ACCOUNT_LOOKUP_REQUEST,\n  acct,\n});\n\nexport const lookupAccountSuccess = () => ({\n  type: ACCOUNT_LOOKUP_SUCCESS,\n});\n\nexport const lookupAccountFail = (acct, error) => ({\n  type: ACCOUNT_LOOKUP_FAIL,\n  acct,\n  error,\n  skipAlert: true,\n});\n\nexport function fetchAccountRequest(id) {\n  return {\n    type: ACCOUNT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchAccountSuccess() {\n  return {\n    type: ACCOUNT_FETCH_SUCCESS,\n  };\n}\n\nexport function fetchAccountFail(id, error) {\n  return {\n    type: ACCOUNT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\n/**\n * @param {string} id\n * @param {Object} options\n * @param {boolean} [options.reblogs]\n * @param {boolean} [options.notify]\n * @returns {function(): void}\n */\nexport function followAccount(id, options = { reblogs: true }) {\n  return (dispatch, getState) => {\n    const alreadyFollowing = getState().getIn(['relationships', id, 'following']);\n    const locked = getState().getIn(['accounts', id, 'locked'], false);\n\n    dispatch(followAccountRequest({ id, locked }));\n\n    api().post(`/api/v1/accounts/${id}/follow`, options).then(response => {\n      dispatch(followAccountSuccess({relationship: response.data, alreadyFollowing}));\n    }).catch(error => {\n      dispatch(followAccountFail({ id, error, locked }));\n    });\n  };\n}\n\nexport function unfollowAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unfollowAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unfollow`).then(response => {\n      dispatch(unfollowAccountSuccess({relationship: response.data, statuses: getState().get('statuses')}));\n    }).catch(error => {\n      dispatch(unfollowAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function blockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(blockAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/block`).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(blockAccountSuccess({ relationship: response.data, statuses: getState().get('statuses') }));\n    }).catch(error => {\n      dispatch(blockAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function unblockAccount(id) {\n  return (dispatch) => {\n    dispatch(unblockAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unblock`).then(response => {\n      dispatch(unblockAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unblockAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function blockAccountRequest(id) {\n  return {\n    type: ACCOUNT_BLOCK_REQUEST,\n    id,\n  };\n}\nexport function blockAccountFail(error) {\n  return {\n    type: ACCOUNT_BLOCK_FAIL,\n    error,\n  };\n}\n\nexport function unblockAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNBLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function unblockAccountFail(error) {\n  return {\n    type: ACCOUNT_UNBLOCK_FAIL,\n    error,\n  };\n}\n\n\nexport function muteAccount(id, notifications, duration=0) {\n  return (dispatch, getState) => {\n    dispatch(muteAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/mute`, { notifications, duration }).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(muteAccountSuccess({ relationship: response.data, statuses: getState().get('statuses') }));\n    }).catch(error => {\n      dispatch(muteAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function unmuteAccount(id) {\n  return (dispatch) => {\n    dispatch(unmuteAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unmute`).then(response => {\n      dispatch(unmuteAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unmuteAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function muteAccountRequest(id) {\n  return {\n    type: ACCOUNT_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteAccountFail(error) {\n  return {\n    type: ACCOUNT_MUTE_FAIL,\n    error,\n  };\n}\n\nexport function unmuteAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteAccountFail(error) {\n  return {\n    type: ACCOUNT_UNMUTE_FAIL,\n    error,\n  };\n}\n\n\nexport function fetchFollowers(id) {\n  return (dispatch) => {\n    dispatch(fetchFollowersRequest(id));\n\n    api().get(`/api/v1/accounts/${id}/followers`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowersFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowers(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'followers', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowersRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowersFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFollowing(id) {\n  return (dispatch) => {\n    dispatch(fetchFollowingRequest(id));\n\n    api().get(`/api/v1/accounts/${id}/following`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowingFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowingRequest(id) {\n  return {\n    type: FOLLOWING_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowing(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'following', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowingRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowingFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowingRequest(id) {\n  return {\n    type: FOLLOWING_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nconst debouncedFetchRelationships = debounceWithDispatchAndArguments((dispatch, ...newAccountIds) => {\n  if (newAccountIds.length === 0) {\n    return;\n  }\n\n  dispatch(fetchRelationshipsRequest(newAccountIds));\n\n  api().get(`/api/v1/accounts/relationships?with_suspended=true&${newAccountIds.map(id => `id[]=${id}`).join('&')}`).then(response => {\n    dispatch(fetchRelationshipsSuccess({ relationships: response.data }));\n  }).catch(error => {\n    dispatch(fetchRelationshipsFail(error));\n  });\n}, { delay: 500 });\n\nexport function fetchRelationships(accountIds) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const loadedRelationships = state.get('relationships');\n    const newAccountIds = accountIds.filter(id => loadedRelationships.get(id, null) === null);\n    const signedIn = !!state.getIn(['meta', 'me']);\n\n    if (!signedIn || newAccountIds.length === 0) {\n      return;\n    }\n\n    debouncedFetchRelationships(dispatch, ...newAccountIds);\n  };\n}\n\nexport function fetchRelationshipsRequest(ids) {\n  return {\n    type: RELATIONSHIPS_FETCH_REQUEST,\n    ids,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsFail(error) {\n  return {\n    type: RELATIONSHIPS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipNotFound: true,\n  };\n}\n\nexport function fetchFollowRequests() {\n  return (dispatch) => {\n    dispatch(fetchFollowRequestsRequest());\n\n    api().get('/api/v1/follow_requests').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(fetchFollowRequestsFail(error)));\n  };\n}\n\nexport function fetchFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowRequests() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'follow_requests', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowRequestsRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(expandFollowRequestsFail(error)));\n  };\n}\n\nexport function expandFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function authorizeFollowRequest(id) {\n  return (dispatch) => {\n    dispatch(authorizeFollowRequestRequest(id));\n\n    api()\n      .post(`/api/v1/follow_requests/${id}/authorize`)\n      .then(() => dispatch(authorizeFollowRequestSuccess({ id })))\n      .catch(error => dispatch(authorizeFollowRequestFail(id, error)));\n  };\n}\n\nexport function authorizeFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_REQUEST,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_FAIL,\n    id,\n    error,\n  };\n}\n\n\nexport function rejectFollowRequest(id) {\n  return (dispatch) => {\n    dispatch(rejectFollowRequestRequest(id));\n\n    api()\n      .post(`/api/v1/follow_requests/${id}/reject`)\n      .then(() => dispatch(rejectFollowRequestSuccess({ id })))\n      .catch(error => dispatch(rejectFollowRequestFail(id, error)));\n  };\n}\n\nexport function rejectFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_REQUEST,\n    id,\n  };\n}\n\nexport function rejectFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pinAccount(id) {\n  return (dispatch) => {\n    dispatch(pinAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/pin`).then(response => {\n      dispatch(pinAccountSuccess({ relationship: response.data }));\n      dispatch(fetchEndorsedAccounts({ accountId: me }));\n    }).catch(error => {\n      dispatch(pinAccountFail(error));\n    });\n  };\n}\n\nexport function unpinAccount(id) {\n  return (dispatch) => {\n    dispatch(unpinAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unpin`).then(response => {\n      dispatch(unpinAccountSuccess({ relationship: response.data }));\n      dispatch(fetchEndorsedAccounts({ accountId: me }));\n    }).catch(error => {\n      dispatch(unpinAccountFail(error));\n    });\n  };\n}\n\nexport function pinAccountRequest(id) {\n  return {\n    type: ACCOUNT_PIN_REQUEST,\n    id,\n  };\n}\n\nexport function pinAccountFail(error) {\n  return {\n    type: ACCOUNT_PIN_FAIL,\n    error,\n  };\n}\n\nexport function unpinAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNPIN_REQUEST,\n    id,\n  };\n}\n\nexport function unpinAccountFail(error) {\n  return {\n    type: ACCOUNT_UNPIN_FAIL,\n    error,\n  };\n}\n\nexport const updateAccount = ({ displayName, note, avatar, header, discoverable, indexable }) => (dispatch) => {\n  const data = new FormData();\n\n  data.append('display_name', displayName);\n  data.append('note', note);\n  if (avatar) data.append('avatar', avatar);\n  if (header) data.append('header', header);\n  data.append('discoverable', discoverable);\n  data.append('indexable', indexable);\n\n  return api().patch('/api/v1/accounts/update_credentials', data).then(response => {\n    dispatch(importFetchedAccount(response.data));\n  });\n};\n\nexport const navigateToProfile = (accountId) => {\n  return (_dispatch, getState) => {\n    const acct = getState().accounts.getIn([accountId, 'acct']);\n\n    if (acct) {\n      browserHistory.push(`/@${acct}`);\n    }\n  };\n};\n","export function compareId(id1: string, id2: string) {\n  if (id1 === id2) {\n    return 0;\n  }\n\n  if (id1.length === id2.length) {\n    return id1 > id2 ? 1 : -1;\n  } else {\n    return id1.length > id2.length ? 1 : -1;\n  }\n}\n","import { debounce } from 'lodash';\n\nimport type { MarkerJSON } from 'mastodon/api_types/markers';\nimport { getAccessToken } from 'mastodon/initial_state';\nimport type { AppDispatch, RootState } from 'mastodon/store';\nimport { createAppAsyncThunk } from 'mastodon/store/typed_functions';\n\nimport api from '../api';\nimport { compareId } from '../compare_id';\n\nexport const synchronouslySubmitMarkers = createAppAsyncThunk(\n  'markers/submit',\n  async (_args, { getState }) => {\n    const accessToken = getAccessToken();\n    const params = buildPostMarkersParams(getState());\n\n    if (\n      Object.keys(params).length === 0 ||\n      !accessToken ||\n      accessToken === ''\n    ) {\n      return;\n    }\n\n    // The Fetch API allows us to perform requests that will be carried out\n    // after the page closes. But that only works if the `keepalive` attribute\n    // is supported.\n    if ('fetch' in window && 'keepalive' in new Request('')) {\n      await fetch('/api/v1/markers', {\n        keepalive: true,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${accessToken}`,\n        },\n        body: JSON.stringify(params),\n      });\n\n      return;\n    } else if ('sendBeacon' in navigator) {\n      // Failing that, we can use sendBeacon, but we have to encode the data as\n      // FormData for DoorKeeper to recognize the token.\n      const formData = new FormData();\n\n      formData.append('bearer_token', accessToken);\n\n      for (const [id, value] of Object.entries(params)) {\n        if (value.last_read_id)\n          formData.append(`${id}[last_read_id]`, value.last_read_id);\n      }\n\n      if (navigator.sendBeacon('/api/v1/markers', formData)) {\n        return;\n      }\n    }\n\n    // If neither Fetch nor sendBeacon worked, try to perform a synchronous\n    // request.\n    try {\n      const client = new XMLHttpRequest();\n\n      client.open('POST', '/api/v1/markers', false);\n      client.setRequestHeader('Content-Type', 'application/json');\n      client.setRequestHeader('Authorization', `Bearer ${accessToken}`);\n      client.send(JSON.stringify(params));\n    } catch {\n      // Do not make the BeforeUnload handler error out\n    }\n  },\n);\n\ninterface MarkerParam {\n  last_read_id?: string;\n}\n\nfunction getLastNotificationId(state: RootState): string | undefined {\n  return state.notificationGroups.lastReadId;\n}\n\nconst buildPostMarkersParams = (state: RootState) => {\n  const params = {} as { home?: MarkerParam; notifications?: MarkerParam };\n\n  const lastNotificationId = getLastNotificationId(state);\n\n  if (\n    lastNotificationId &&\n    compareId(lastNotificationId, state.markers.notifications) > 0\n  ) {\n    params.notifications = {\n      last_read_id: lastNotificationId,\n    };\n  }\n\n  return params;\n};\n\nexport const submitMarkersAction = createAppAsyncThunk<{\n  home: string | undefined;\n  notifications: string | undefined;\n}>('markers/submitAction', async (_args, { getState }) => {\n  const accessToken = getAccessToken();\n  const params = buildPostMarkersParams(getState());\n\n  if (Object.keys(params).length === 0 || !accessToken || accessToken === '') {\n    return { home: undefined, notifications: undefined };\n  }\n\n  await api().post<MarkerJSON>('/api/v1/markers', params);\n\n  return {\n    home: params.home?.last_read_id,\n    notifications: params.notifications?.last_read_id,\n  };\n});\n\nconst debouncedSubmitMarkers = debounce(\n  (dispatch: AppDispatch) => {\n    void dispatch(submitMarkersAction());\n  },\n  300000,\n  {\n    leading: true,\n    trailing: true,\n  },\n);\n\nexport const submitMarkers = createAppAsyncThunk(\n  'markers/submit',\n  (params: { immediate?: boolean }, { dispatch }) => {\n    debouncedSubmitMarkers(dispatch);\n\n    if (params.immediate) {\n      debouncedSubmitMarkers.flush();\n    }\n  },\n);\n\nexport const fetchMarkers = createAppAsyncThunk('markers/fetch', async () => {\n  const response = await api().get<Record<string, MarkerJSON>>(\n    `/api/v1/markers`,\n    { params: { timeline: ['notifications'] } },\n  );\n\n  return { markers: response.data };\n});\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ApiNotificationJSON } from 'mastodon/api_types/notifications';\n\nexport const notificationsUpdate = createAction(\n  'notifications/update',\n  ({\n    playSound,\n    ...args\n  }: {\n    notification: ApiNotificationJSON;\n    playSound: boolean;\n  }) => ({\n    payload: args,\n    meta: { sound: playSound ? 'boop' : undefined },\n  }),\n);\n","export default class Settings {\n\n  constructor(keyBase = null) {\n    this.keyBase = keyBase;\n  }\n\n  generateKey(id) {\n    return this.keyBase ? [this.keyBase, `id${id}`].join('.') : id;\n  }\n\n  set(id, data) {\n    const key = this.generateKey(id);\n    try {\n      const encodedData = JSON.stringify(data);\n      localStorage.setItem(key, encodedData);\n      return data;\n    } catch {\n      return null;\n    }\n  }\n\n  get(id) {\n    const key = this.generateKey(id);\n    try {\n      const rawData = localStorage.getItem(key);\n      return JSON.parse(rawData);\n    } catch {\n      return null;\n    }\n  }\n\n  remove(id) {\n    const data = this.get(id);\n    if (data) {\n      const key = this.generateKey(id);\n      try {\n        localStorage.removeItem(key);\n      } catch {\n        // ignore if the key is not found\n      }\n    }\n    return data;\n  }\n\n}\n\nexport const pushNotificationsSetting = new Settings('mastodon_push_notification_data');\nexport const tagHistory = new Settings('mastodon_tag_history');\nexport const bannerSettings = new Settings('mastodon_banner_settings');\nexport const searchHistory = new Settings('mastodon_search_history');\nexport const playerSettings = new Settings('mastodon_player');\n","export const decode = (base64: string): Uint8Array => {\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n\n  return outputArray;\n};\n","export const SET_BROWSER_SUPPORT = 'PUSH_NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const SET_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_SET_SUBSCRIPTION';\nexport const CLEAR_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_CLEAR_SUBSCRIPTION';\nexport const SET_ALERTS = 'PUSH_NOTIFICATIONS_SET_ALERTS';\n\nexport function setBrowserSupport (value) {\n  return {\n    type: SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setSubscription (subscription) {\n  return {\n    type: SET_SUBSCRIPTION,\n    subscription,\n  };\n}\n\nexport function clearSubscription () {\n  return {\n    type: CLEAR_SUBSCRIPTION,\n  };\n}\n\nexport function setAlerts (path, value) {\n  return dispatch => {\n    dispatch({\n      type: SET_ALERTS,\n      path,\n      value,\n    });\n  };\n}\n","import api from '../../api';\nimport { me } from '../../initial_state';\nimport { pushNotificationsSetting } from '../../settings';\nimport { decode as decodeBase64 } from '../../utils/base64';\n\nimport { setBrowserSupport, setSubscription, clearSubscription } from './setter';\n\n// Taken from https://www.npmjs.com/package/web-push\nconst urlBase64ToUint8Array = (base64String) => {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  return decodeBase64(base64);\n};\n\nconst getApplicationServerKey = () => document.querySelector('[name=\"applicationServerKey\"]').getAttribute('content');\n\nconst getRegistration = () => navigator.serviceWorker.ready;\n\nconst getPushSubscription = (registration) =>\n  registration.pushManager.getSubscription()\n    .then(subscription => ({ registration, subscription }));\n\nconst subscribe = (registration) =>\n  registration.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey: urlBase64ToUint8Array(getApplicationServerKey()),\n  });\n\nconst unsubscribe = ({ registration, subscription }) =>\n  subscription ? subscription.unsubscribe().then(() => registration) : registration;\n\nconst sendSubscriptionToBackend = (subscription) => {\n  const params = { subscription: { ...subscription.toJSON(), standard: true } };\n\n  if (me) {\n    const data = pushNotificationsSetting.get(me);\n    if (data) {\n      params.data = data;\n    }\n  }\n\n  return api().post('/api/web/push_subscriptions', params).then(response => response.data);\n};\n\n// Last one checks for payload support: https://web-push-book.gauntface.com/chapter-06/01-non-standards-browsers/#no-payload\nconst supportsPushNotifications = ('serviceWorker' in navigator && 'PushManager' in window && 'getKey' in PushSubscription.prototype);\n\nexport function register () {\n  return (dispatch, getState) => {\n    dispatch(setBrowserSupport(supportsPushNotifications));\n\n    if (supportsPushNotifications) {\n      if (!getApplicationServerKey()) {\n        console.error('The VAPID public key is not set. You will not be able to receive Web Push Notifications.');\n        return;\n      }\n\n      getRegistration()\n        .then(getPushSubscription)\n        .then(({ registration, subscription }) => {\n          if (subscription !== null) {\n            // We have a subscription, check if it is still valid\n            const currentServerKey = (new Uint8Array(subscription.options.applicationServerKey)).toString();\n            const subscriptionServerKey = urlBase64ToUint8Array(getApplicationServerKey()).toString();\n            const serverEndpoint = getState().getIn(['push_notifications', 'subscription', 'endpoint']);\n\n            // If the VAPID public key did not change and the endpoint corresponds\n            // to the endpoint saved in the backend, the subscription is valid\n            if (subscriptionServerKey === currentServerKey && subscription.endpoint === serverEndpoint) {\n              return subscription;\n            } else {\n              // Something went wrong, try to subscribe again\n              return unsubscribe({ registration, subscription }).then(subscribe).then(\n                subscription => sendSubscriptionToBackend(subscription));\n            }\n          }\n\n          // No subscription, try to subscribe\n          return subscribe(registration).then(\n            subscription => sendSubscriptionToBackend(subscription));\n        })\n        .then(subscription => {\n          // If we got a PushSubscription (and not a subscription object from the backend)\n          // it means that the backend subscription is valid (and was set during hydration)\n          if (!(subscription instanceof PushSubscription)) {\n            dispatch(setSubscription(subscription));\n            if (me) {\n              pushNotificationsSetting.set(me, { alerts: subscription.alerts });\n            }\n          }\n        })\n        .catch(error => {\n          if (error.code === 20 && error.name === 'AbortError') {\n            console.warn('Your browser supports Web Push Notifications, but does not seem to implement the VAPID protocol.');\n          } else if (error.code === 5 && error.name === 'InvalidCharacterError') {\n            console.error('The VAPID public key seems to be invalid:', getApplicationServerKey());\n          }\n\n          // Clear alerts and hide UI settings\n          dispatch(clearSubscription());\n          if (me) {\n            pushNotificationsSetting.remove(me);\n          }\n\n          return getRegistration()\n            .then(getPushSubscription)\n            .then(unsubscribe);\n        })\n        .catch(console.warn);\n    } else {\n      console.warn('Your browser does not support Web Push Notifications.');\n    }\n  };\n}\n\nexport function saveSettings() {\n  return (_, getState) => {\n    const state = getState().get('push_notifications');\n    const subscription = state.get('subscription');\n    const alerts = state.get('alerts');\n    const data = { alerts };\n\n    api().put(`/api/web/push_subscriptions/${subscription.get('id')}`, {\n      data,\n    }).then(() => {\n      if (me) {\n        pushNotificationsSetting.set(me, data);\n      }\n    }).catch(console.warn);\n  };\n}\n","import { IntlMessageFormat } from 'intl-messageformat';\nimport { defineMessages } from 'react-intl';\n\nimport { unescapeHTML } from '../utils/html';\nimport { requestNotificationPermission } from '../utils/notifications';\n\nimport { fetchFollowRequests } from './accounts';\nimport {\n  importFetchedAccount,\n} from './importer';\nimport { submitMarkers } from './markers';\nimport { notificationsUpdate } from \"./notifications_typed\";\nimport { register as registerPushNotifications } from './push_notifications';\n\nexport * from \"./notifications_typed\";\n\nexport const NOTIFICATIONS_FILTER_SET = 'NOTIFICATIONS_FILTER_SET';\n\nexport const NOTIFICATIONS_SET_BROWSER_SUPPORT    = 'NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const NOTIFICATIONS_SET_BROWSER_PERMISSION = 'NOTIFICATIONS_SET_BROWSER_PERMISSION';\n\ndefineMessages({\n  mention: { id: 'notification.mention', defaultMessage: '{name} mentioned you' },\n  group: { id: 'notifications.group', defaultMessage: '{count} notifications' },\n});\n\nexport function updateNotifications(notification, intlMessages, intlLocale) {\n  return (dispatch, getState) => {\n    const showAlert    = getState().getIn(['settings', 'notifications', 'alerts', notification.type], true);\n    const playSound    = getState().getIn(['settings', 'notifications', 'sounds', notification.type], true);\n\n    let filtered = false;\n\n    if (['mention', 'status'].includes(notification.type) && notification.status.filtered) {\n      const filters = notification.status.filtered.filter(result => result.filter.context.includes('notifications'));\n\n      if (filters.some(result => result.filter.filter_action === 'hide')) {\n        return;\n      }\n\n      filtered = filters.length > 0;\n    }\n\n    if (['follow_request'].includes(notification.type)) {\n      dispatch(fetchFollowRequests());\n    }\n\n    dispatch(submitMarkers());\n\n    // `notificationsUpdate` is still used in `user_lists` and `relationships` reducers\n    dispatch(importFetchedAccount(notification.account));\n    dispatch(notificationsUpdate({ notification, playSound: playSound && !filtered}));\n\n    // Desktop notifications\n    if (typeof window.Notification !== 'undefined' && showAlert && !filtered) {\n      const title = new IntlMessageFormat(intlMessages[`notification.${notification.type}`], intlLocale).format({ name: notification.account.display_name.length > 0 ? notification.account.display_name : notification.account.username });\n      const body  = (notification.status && notification.status.spoiler_text.length > 0) ? notification.status.spoiler_text : unescapeHTML(notification.status ? notification.status.content : '');\n\n      const notify = new Notification(title, { body, icon: notification.account.avatar, tag: notification.id });\n\n      notify.addEventListener('click', () => {\n        window.focus();\n        notify.close();\n      });\n    }\n  };\n}\n\nconst noOp = () => {};\n\n// Browser support\nexport function setupBrowserNotifications() {\n  return dispatch => {\n    dispatch(setBrowserSupport('Notification' in window));\n    if ('Notification' in window) {\n      dispatch(setBrowserPermission(Notification.permission));\n    }\n\n    if ('Notification' in window && 'permissions' in navigator) {\n      navigator.permissions.query({ name: 'notifications' }).then((status) => {\n        status.onchange = () => dispatch(setBrowserPermission(Notification.permission));\n      }).catch(console.warn);\n    }\n  };\n}\n\nexport function requestBrowserPermission(callback = noOp) {\n  return dispatch => {\n    requestNotificationPermission((permission) => {\n      dispatch(setBrowserPermission(permission));\n      callback(permission);\n\n      if (permission === 'granted') {\n        dispatch(registerPushNotifications());\n      }\n    });\n  };\n}\n\nexport function setBrowserSupport (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setBrowserPermission (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_PERMISSION,\n    value,\n  };\n}\n","import api from '../api';\n\nexport const CUSTOM_EMOJIS_FETCH_REQUEST = 'CUSTOM_EMOJIS_FETCH_REQUEST';\nexport const CUSTOM_EMOJIS_FETCH_SUCCESS = 'CUSTOM_EMOJIS_FETCH_SUCCESS';\nexport const CUSTOM_EMOJIS_FETCH_FAIL = 'CUSTOM_EMOJIS_FETCH_FAIL';\n\nexport function fetchCustomEmojis() {\n  return (dispatch) => {\n    dispatch(fetchCustomEmojisRequest());\n\n    api().get('/api/v1/custom_emojis').then(response => {\n      dispatch(fetchCustomEmojisSuccess(response.data));\n    }).catch(error => {\n      dispatch(fetchCustomEmojisFail(error));\n    });\n  };\n}\n\nexport function fetchCustomEmojisRequest() {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisSuccess(custom_emojis) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_SUCCESS,\n    custom_emojis,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisFail(error) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n","function padLeft(str, num) {\n  while (str.length < num) {\n    str = '0' + str;\n  }\n\n  return str;\n}\n\nexport const unicodeToUnifiedName = (str) => {\n  let output = '';\n\n  for (let i = 0; i < str.length; i += 2) {\n    if (i > 0) {\n      output += '-';\n    }\n\n    output += padLeft(str.codePointAt(i).toString(16).toUpperCase(), 4);\n  }\n\n  return output;\n};\n","// The output of this module is designed to mimic emoji-mart's\n// \"data\" object, such that we can use it for a light version of emoji-mart's\n// emojiIndex.search functionality.\nimport type { BaseEmoji } from 'emoji-mart';\nimport type { Emoji } from 'emoji-mart/dist-es/utils/data';\nimport emojiCompressed from 'virtual:mastodon-emoji-compressed';\nimport type {\n  Search,\n  ShortCodesToEmojiData,\n} from 'virtual:mastodon-emoji-compressed';\n\nimport { unicodeToUnifiedName } from './unicode_to_unified_name';\n\ntype Emojis = Record<\n  NonNullable<keyof ShortCodesToEmojiData>,\n  {\n    native: BaseEmoji['native'];\n    search: Search;\n    short_names: Emoji['short_names'];\n    unified: Emoji['unified'];\n  }\n>;\n\nconst [\n  shortCodesToEmojiData,\n  skins,\n  categories,\n  short_names,\n  _emojisWithoutShortCodes,\n] = emojiCompressed;\n\nconst emojis: Emojis = {};\n\n// decompress\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  const emojiData = shortCodesToEmojiData[shortCode];\n  if (!emojiData) return;\n\n  const [_filenameData, searchData] = emojiData;\n  const [native, short_names, search, unified] = searchData;\n\n  emojis[shortCode] = {\n    native,\n    search,\n    short_names: short_names ? [shortCode].concat(short_names) : undefined,\n    unified: unified ?? unicodeToUnifiedName(native),\n  };\n});\n\nexport { emojis, skins, categories, short_names };\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/index.js\n\nimport * as data from './emoji_mart_data_light';\n\nconst buildSearch = (data) => {\n  const search = [];\n\n  let addToSearch = (strings, split) => {\n    if (!strings) {\n      return;\n    }\n\n    (Array.isArray(strings) ? strings : [strings]).forEach((string) => {\n      (split ? string.split(/[-|_|\\s]+/) : [string]).forEach((s) => {\n        s = s.toLowerCase();\n\n        if (search.indexOf(s) === -1) {\n          search.push(s);\n        }\n      });\n    });\n  };\n\n  addToSearch(data.short_names, true);\n  addToSearch(data.name, true);\n  addToSearch(data.keywords, false);\n  addToSearch(data.emoticons, false);\n\n  return search.join(',');\n};\n\nconst _String = String;\n\nconst stringFromCodePoint = _String.fromCodePoint || function () {\n  let MAX_SIZE = 0x4000;\n  let codeUnits = [];\n  let highSurrogate;\n  let lowSurrogate;\n  let index = -1;\n  let length = arguments.length;\n  if (!length) {\n    return '';\n  }\n  let result = '';\n  while (++index < length) {\n    let codePoint = Number(arguments[index]);\n    if (\n      !isFinite(codePoint) ||       // `NaN`, `+Infinity`, or `-Infinity`\n      codePoint < 0 ||              // not a valid Unicode code point\n      codePoint > 0x10FFFF ||       // not a valid Unicode code point\n      Math.floor(codePoint) !== codePoint // not an integer\n    ) {\n      throw RangeError('Invalid code point: ' + codePoint);\n    }\n    if (codePoint <= 0xFFFF) { // BMP code point\n      codeUnits.push(codePoint);\n    } else { // Astral code point; split in surrogate halves\n      // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      codePoint -= 0x10000;\n      highSurrogate = (codePoint >> 10) + 0xD800;\n      lowSurrogate = (codePoint % 0x400) + 0xDC00;\n      codeUnits.push(highSurrogate, lowSurrogate);\n    }\n    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n      result += String.fromCharCode.apply(null, codeUnits);\n      codeUnits.length = 0;\n    }\n  }\n  return result;\n};\n\n\nconst _JSON = JSON;\n\nconst COLONS_REGEX = /^(?::([^:]+):)(?::skin-tone-(\\d):)?$/;\nconst SKINS = [\n  '1F3FA', '1F3FB', '1F3FC',\n  '1F3FD', '1F3FE', '1F3FF',\n];\n\nfunction unifiedToNative(unified) {\n  let unicodes = unified.split('-'),\n    codePoints = unicodes.map((u) => `0x${u}`);\n\n  return stringFromCodePoint.apply(null, codePoints);\n}\n\nfunction sanitize(emoji) {\n  let { name, short_names, skin_tone, skin_variations, emoticons, unified, custom, imageUrl } = emoji,\n    id = emoji.id || short_names[0],\n    colons = `:${id}:`;\n\n  if (custom) {\n    return {\n      id,\n      name,\n      colons,\n      emoticons,\n      custom,\n      imageUrl,\n    };\n  }\n\n  if (skin_tone) {\n    colons += `:skin-tone-${skin_tone}:`;\n  }\n\n  return {\n    id,\n    name,\n    colons,\n    emoticons,\n    unified: unified.toLowerCase(),\n    skin: skin_tone || (skin_variations ? 1 : null),\n    native: unifiedToNative(unified),\n  };\n}\n\nfunction getSanitizedData() {\n  return sanitize(getData(...arguments));\n}\n\nfunction getData(emoji, skin, set) {\n  let emojiData = {};\n\n  if (typeof emoji === 'string') {\n    let matches = emoji.match(COLONS_REGEX);\n\n    if (matches) {\n      emoji = matches[1];\n\n      if (matches[2]) {\n        skin = parseInt(matches[2]);\n      }\n    }\n\n    if (Object.hasOwn(data.short_names, emoji)) {\n      emoji = data.short_names[emoji];\n    }\n\n    if (Object.hasOwn(data.emojis, emoji)) {\n      emojiData = data.emojis[emoji];\n    }\n  } else if (emoji.id) {\n    if (Object.hasOwn(data.short_names, emoji.id)) {\n      emoji.id = data.short_names[emoji.id];\n    }\n\n    if (Object.hasOwn(data.emojis, emoji.id)) {\n      emojiData = data.emojis[emoji.id];\n      skin = skin || emoji.skin;\n    }\n  }\n\n  if (!Object.keys(emojiData).length) {\n    emojiData = emoji;\n    emojiData.custom = true;\n\n    if (!emojiData.search) {\n      emojiData.search = buildSearch(emoji);\n    }\n  }\n\n  emojiData.emoticons = emojiData.emoticons || [];\n  emojiData.variations = emojiData.variations || [];\n\n  if (emojiData.skin_variations && skin > 1 && set) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n\n    let skinKey = SKINS[skin - 1],\n      variationData = emojiData.skin_variations[skinKey];\n\n    if (!variationData.variations && emojiData.variations) {\n      delete emojiData.variations;\n    }\n\n    if (variationData[`has_img_${set}`]) {\n      emojiData.skin_tone = skin;\n\n      for (let k in variationData) {\n        let v = variationData[k];\n        emojiData[k] = v;\n      }\n    }\n  }\n\n  if (emojiData.variations && emojiData.variations.length) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n    emojiData.unified = emojiData.variations.shift();\n  }\n\n  return emojiData;\n}\n\nfunction uniq(arr) {\n  return arr.reduce((acc, item) => {\n    if (acc.indexOf(item) === -1) {\n      acc.push(item);\n    }\n    return acc;\n  }, []);\n}\n\nfunction intersect(a, b) {\n  const uniqA = uniq(a);\n  const uniqB = uniq(b);\n\n  return uniqA.filter(item => uniqB.indexOf(item) >= 0);\n}\n\nfunction deepMerge(a, b) {\n  let o = {};\n\n  for (let key in a) {\n    let originalValue = a[key],\n      value = originalValue;\n\n    if (Object.hasOwn(b, key)) {\n      value = b[key];\n    }\n\n    if (typeof value === 'object') {\n      value = deepMerge(originalValue, value);\n    }\n\n    o[key] = value;\n  }\n\n  return o;\n}\n\n// https://github.com/sonicdoe/measure-scrollbar\nfunction measureScrollbar() {\n  const div = document.createElement('div');\n\n  div.style.width = '100px';\n  div.style.height = '100px';\n  div.style.overflow = 'scroll';\n  div.style.position = 'absolute';\n  div.style.top = '-9999px';\n\n  document.body.appendChild(div);\n  const scrollbarWidth = div.offsetWidth - div.clientWidth;\n  document.body.removeChild(div);\n\n  return scrollbarWidth;\n}\n\nexport {\n  getData,\n  getSanitizedData,\n  uniq,\n  intersect,\n  deepMerge,\n  unifiedToNative,\n  measureScrollbar,\n};\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/emoji-index.js\n\nimport * as data from './emoji_mart_data_light';\nimport { getData, getSanitizedData, uniq, intersect } from './emoji_utils';\n\nlet originalPool = {};\nlet index = {};\nlet emojisList = {};\nlet emoticonsList = {};\nlet customEmojisList = [];\n\nfor (let emoji in data.emojis) {\n  let emojiData = data.emojis[emoji];\n  let { short_names, emoticons } = emojiData;\n  let id = short_names[0];\n\n  if (emoticons) {\n    emoticons.forEach(emoticon => {\n      if (emoticonsList[emoticon]) {\n        return;\n      }\n\n      emoticonsList[emoticon] = id;\n    });\n  }\n\n  emojisList[id] = getSanitizedData(id);\n  originalPool[id] = emojiData;\n}\n\nfunction clearCustomEmojis(pool) {\n  customEmojisList.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    delete pool[emojiId];\n    delete emojisList[emojiId];\n  });\n}\n\nfunction addCustomToPool(custom, pool) {\n  if (customEmojisList.length) clearCustomEmojis(pool);\n\n  custom.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    if (emojiId && !pool[emojiId]) {\n      pool[emojiId] = getData(emoji);\n      emojisList[emojiId] = getSanitizedData(emoji);\n    }\n  });\n\n  customEmojisList = custom;\n  index = {};\n}\n\nfunction search(value, { emojisToShowFilter, maxResults, include, exclude, custom } = {}) {\n  if (custom !== undefined) {\n    if (customEmojisList !== custom)\n      addCustomToPool(custom, originalPool);\n  } else {\n    custom = [];\n  }\n\n  maxResults = maxResults || 75;\n  include = include || [];\n  exclude = exclude || [];\n\n  let results = null,\n    pool = originalPool;\n\n  if (value.length) {\n    if (value === '-' || value === '-1') {\n      return [emojisList['-1']];\n    }\n\n    let values = value.toLowerCase().split(/[\\s|,\\-_]+/),\n      allResults = [];\n\n    if (values.length > 2) {\n      values = [values[0], values[1]];\n    }\n\n    if (include.length || exclude.length) {\n      pool = {};\n\n      data.categories.forEach(category => {\n        let isIncluded = include && include.length ? include.indexOf(category.name.toLowerCase()) > -1 : true;\n        let isExcluded = exclude && exclude.length ? exclude.indexOf(category.name.toLowerCase()) > -1 : false;\n        if (!isIncluded || isExcluded) {\n          return;\n        }\n\n        category.emojis.forEach(emojiId => pool[emojiId] = data.emojis[emojiId]);\n      });\n\n      if (custom.length) {\n        let customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n        let customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n        if (customIsIncluded && !customIsExcluded) {\n          addCustomToPool(custom, pool);\n        }\n      }\n    }\n\n    const searchValue = (value) => {\n      let aPool = pool,\n        aIndex = index,\n        length = 0;\n\n      for (let charIndex = 0; charIndex < value.length; charIndex++) {\n        const char = value[charIndex];\n        length++;\n\n        aIndex[char] = aIndex[char] || {};\n        aIndex = aIndex[char];\n\n        if (!aIndex.results) {\n          let scores = {};\n\n          aIndex.results = [];\n          aIndex.pool = {};\n\n          for (let id in aPool) {\n            let emoji = aPool[id],\n              { search } = emoji,\n              sub = value.slice(0, length),\n              subIndex = search.indexOf(sub);\n\n            if (subIndex !== -1) {\n              let score = subIndex + 1;\n              if (sub === id) score = 0;\n\n              aIndex.results.push(emojisList[id]);\n              aIndex.pool[id] = emoji;\n\n              scores[id] = score;\n            }\n          }\n\n          aIndex.results.sort((a, b) => {\n            let aScore = scores[a.id],\n              bScore = scores[b.id];\n\n            return aScore - bScore;\n          });\n        }\n\n        aPool = aIndex.pool;\n      }\n\n      return aIndex.results;\n    };\n\n    if (values.length > 1) {\n      results = searchValue(value);\n    } else {\n      results = [];\n    }\n\n    allResults = values.map(searchValue).filter(a => a);\n\n    if (allResults.length > 1) {\n      allResults = intersect.apply(null, allResults);\n    } else if (allResults.length) {\n      allResults = allResults[0];\n    }\n\n    results = uniq(results.concat(allResults));\n  }\n\n  if (results) {\n    if (emojisToShowFilter) {\n      results = results.filter((result) => emojisToShowFilter(data.emojis[result.id]));\n    }\n\n    if (results && results.length > maxResults) {\n      results = results.slice(0, maxResults);\n    }\n  }\n\n  return results;\n}\n\nexport { search };\n","import { defineMessages } from 'react-intl';\n\nimport { createAction } from '@reduxjs/toolkit';\n\nimport { AxiosError } from 'axios';\nimport type { AxiosResponse } from 'axios';\n\nimport type { Alert } from 'mastodon/models/alert';\n\ninterface ApiErrorResponse {\n  error?: string;\n}\n\nconst messages = defineMessages({\n  unexpectedTitle: { id: 'alert.unexpected.title', defaultMessage: 'Oops!' },\n  unexpectedMessage: {\n    id: 'alert.unexpected.message',\n    defaultMessage: 'An unexpected error occurred.',\n  },\n  rateLimitedTitle: {\n    id: 'alert.rate_limited.title',\n    defaultMessage: 'Rate limited',\n  },\n  rateLimitedMessage: {\n    id: 'alert.rate_limited.message',\n    defaultMessage: 'Please retry after {retry_time, time, medium}.',\n  },\n});\n\nexport const dismissAlert = createAction<{ key: number }>('alerts/dismiss');\n\nexport const clearAlerts = createAction('alerts/clear');\n\nexport const showAlert = createAction<Omit<Alert, 'key'>>('alerts/show');\n\nconst ignoreAlert = createAction('alerts/ignore');\n\nexport const showAlertForError = (error: unknown, skipNotFound = false) => {\n  if (error instanceof AxiosError && error.response) {\n    const { status, statusText, headers } = error.response;\n    const { data } = error.response as AxiosResponse<ApiErrorResponse>;\n\n    // Skip these errors as they are reflected in the UI\n    if (skipNotFound && (status === 404 || status === 410)) {\n      return ignoreAlert();\n    }\n\n    // Rate limit errors\n    if (status === 429 && headers['x-ratelimit-reset']) {\n      return showAlert({\n        title: messages.rateLimitedTitle,\n        message: messages.rateLimitedMessage,\n        values: {\n          retry_time: new Date(headers['x-ratelimit-reset'] as string),\n        },\n      });\n    }\n\n    return showAlert({\n      title: `${status}`,\n      message: data.error ?? statusText,\n    });\n  }\n\n  // An aborted request, e.g. due to reloading the browser window, is not really an error\n  if (error instanceof AxiosError && error.code === AxiosError.ECONNABORTED) {\n    return ignoreAlert();\n  }\n\n  console.error(error);\n\n  return showAlert({\n    title: messages.unexpectedTitle,\n    message: messages.unexpectedMessage,\n  });\n};\n","import { debounce } from 'lodash';\n\nimport api from '../api';\n\nimport { showAlertForError } from './alerts';\n\nexport const SETTING_CHANGE = 'SETTING_CHANGE';\nexport const SETTING_SAVE   = 'SETTING_SAVE';\n\nexport function changeSetting(path, value) {\n  return dispatch => {\n    dispatch({\n      type: SETTING_CHANGE,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nconst debouncedSave = debounce((dispatch, getState) => {\n  if (getState().getIn(['settings', 'saved']) || !getState().getIn(['meta', 'me'])) {\n    return;\n  }\n\n  const data = getState().get('settings').filter((_, path) => path !== 'saved').toJS();\n\n  api().put('/api/web/settings', { data })\n    .then(() => dispatch({ type: SETTING_SAVE }))\n    .catch(error => dispatch(showAlertForError(error)));\n}, 2000, { leading: true, trailing: true });\n\nexport function saveSettings() {\n  return (dispatch, getState) => debouncedSave(dispatch, getState);\n}\n","import { saveSettings } from './settings';\n\nexport const EMOJI_USE = 'EMOJI_USE';\n\nexport function useEmoji(emoji) {\n  return dispatch => {\n    dispatch({\n      type: EMOJI_USE,\n      emoji,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ModalProps } from 'mastodon/reducers/modal';\n\nimport type { MODAL_COMPONENTS } from '../features/ui/components/modal_root';\n\nexport type ModalType = keyof typeof MODAL_COMPONENTS;\n\ninterface OpenModalPayload {\n  modalType: ModalType;\n  modalProps: ModalProps;\n  previousModalProps?: ModalProps;\n}\nexport const openModal = createAction<OpenModalPayload>('MODAL_OPEN');\n\ninterface CloseModalPayload {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nexport const closeModal = createAction<CloseModalPayload>('MODAL_CLOSE');\n","import { createAction } from '@reduxjs/toolkit';\n\nimport { usePendingItems as preferPendingItems } from 'mastodon/initial_state';\n\nexport const disconnectTimeline = createAction(\n  'timeline/disconnect',\n  ({ timeline }: { timeline: string }) => ({\n    payload: {\n      timeline,\n      usePendingItems: preferPendingItems,\n    },\n  }),\n);\n\nexport const timelineDelete = createAction<{\n  statusId: string;\n  accountId: string;\n  references: string[];\n  reblogOf: string | null;\n}>('timelines/delete');\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport api, { getLinks } from 'mastodon/api';\nimport { compareId } from 'mastodon/compare_id';\nimport { usePendingItems as preferPendingItems } from 'mastodon/initial_state';\n\nimport { importFetchedStatus, importFetchedStatuses } from './importer';\nimport { submitMarkers } from './markers';\nimport {timelineDelete} from './timelines_typed';\n\nexport { disconnectTimeline } from './timelines_typed';\n\nexport const TIMELINE_UPDATE  = 'TIMELINE_UPDATE';\nexport const TIMELINE_CLEAR   = 'TIMELINE_CLEAR';\n\nexport const TIMELINE_EXPAND_REQUEST = 'TIMELINE_EXPAND_REQUEST';\nexport const TIMELINE_EXPAND_SUCCESS = 'TIMELINE_EXPAND_SUCCESS';\nexport const TIMELINE_EXPAND_FAIL    = 'TIMELINE_EXPAND_FAIL';\n\nexport const TIMELINE_SCROLL_TOP   = 'TIMELINE_SCROLL_TOP';\nexport const TIMELINE_LOAD_PENDING = 'TIMELINE_LOAD_PENDING';\nexport const TIMELINE_CONNECT      = 'TIMELINE_CONNECT';\n\nexport const TIMELINE_MARK_AS_PARTIAL = 'TIMELINE_MARK_AS_PARTIAL';\nexport const TIMELINE_INSERT          = 'TIMELINE_INSERT';\n\nexport const TIMELINE_SUGGESTIONS = 'inline-follow-suggestions';\nexport const TIMELINE_GAP = null;\n\nexport const loadPending = timeline => ({\n  type: TIMELINE_LOAD_PENDING,\n  timeline,\n});\n\nexport function updateTimeline(timeline, status, accept) {\n  return (dispatch, getState) => {\n    if (typeof accept === 'function' && !accept(status)) {\n      return;\n    }\n\n    if (getState().getIn(['timelines', timeline, 'isPartial'])) {\n      // Prevent new items from being added to a partial timeline,\n      // since it will be reloaded anyway\n\n      return;\n    }\n\n    dispatch(importFetchedStatus(status));\n\n    dispatch({\n      type: TIMELINE_UPDATE,\n      timeline,\n      status,\n      usePendingItems: preferPendingItems,\n    });\n\n    if (timeline === 'home') {\n      dispatch(submitMarkers());\n    }\n  };\n}\n\nexport function deleteFromTimelines(id) {\n  return (dispatch, getState) => {\n    const accountId  = getState().getIn(['statuses', id, 'account']);\n    const references = getState().get('statuses').filter(status => status.get('reblog') === id).map(status => status.get('id')).valueSeq().toJSON();\n    const reblogOf   = getState().getIn(['statuses', id, 'reblog'], null);\n\n    dispatch(timelineDelete({ statusId: id, accountId, references, reblogOf }));\n  };\n}\n\nexport function clearTimeline(timeline) {\n  return (dispatch) => {\n    dispatch({ type: TIMELINE_CLEAR, timeline });\n  };\n}\n\nconst parseTags = (tags = {}, mode) => {\n  return (tags[mode] || []).map((tag) => {\n    return tag.value;\n  });\n};\n\nexport function expandTimeline(timelineId, path, params = {}) {\n  return async (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const isLoadingMore = !!params.max_id;\n\n    if (timeline.get('isLoading')) {\n      return;\n    }\n\n    if (!params.max_id && !params.pinned && (timeline.get('items', ImmutableList()).size + timeline.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = timeline.getIn(['pendingItems', 0]);\n      const b = timeline.getIn(['items', 0]);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandTimelineRequest(timelineId, isLoadingMore));\n\n    try {\n      const response = await api().get(path, { params });\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandTimelineSuccess(timelineId, response.data, next ? next.uri : null, response.status === 206, isLoadingRecent, isLoadingMore, isLoadingRecent && preferPendingItems));\n\n      if (timelineId === 'home' && !isLoadingMore && !isLoadingRecent) {\n        const now = new Date();\n        const fittingIndex = response.data.findIndex(status => now - (new Date(status.created_at)) > 4 * 3600 * 1000);\n\n        if (fittingIndex !== -1) {\n          dispatch(insertIntoTimeline(timelineId, TIMELINE_SUGGESTIONS, Math.max(1, fittingIndex)));\n        }\n      }\n\n      if (timelineId === 'home') {\n        dispatch(submitMarkers());\n      }\n    } catch(error) {\n      dispatch(expandTimelineFail(timelineId, error, isLoadingMore));\n    }\n  };\n}\n\nexport function fillTimelineGaps(timelineId, path, params = {}) {\n  return async (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const items = timeline.get('items');\n    const nullIndexes = items.map((statusId, index) => statusId === null ? index : null);\n    const gaps = nullIndexes.map(index => index > 0 ? items.get(index - 1) : null);\n\n    // Only expand at most two gaps to avoid doing too many requests\n    for (const maxId of gaps.take(2)) {\n      await dispatch(expandTimeline(timelineId, path, { ...params, maxId }));\n    }\n  };\n}\n\nexport const expandHomeTimeline            = ({ maxId } = {}) => expandTimeline('home', '/api/v1/timelines/home', { max_id: maxId });\nexport const expandPublicTimeline          = ({ maxId, onlyMedia, onlyRemote } = {}) => expandTimeline(`public${onlyRemote ? ':remote' : ''}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, max_id: maxId, only_media: !!onlyMedia });\nexport const expandCommunityTimeline       = ({ maxId, onlyMedia } = {}) => expandTimeline(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, max_id: maxId, only_media: !!onlyMedia });\nexport const expandAccountTimeline         = (accountId, { maxId, withReplies, tagged } = {}) => expandTimeline(`account:${accountId}${withReplies ? ':with_replies' : ''}${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { exclude_replies: !withReplies, exclude_reblogs: withReplies, tagged, max_id: maxId });\nexport const expandAccountFeaturedTimeline = (accountId, { tagged } = {}) => expandTimeline(`account:${accountId}:pinned${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { pinned: true, tagged });\nexport const expandAccountMediaTimeline    = (accountId, { maxId } = {}) => expandTimeline(`account:${accountId}:media`, `/api/v1/accounts/${accountId}/statuses`, { max_id: maxId, only_media: true, limit: 40 });\nexport const expandListTimeline            = (id, { maxId } = {}) => expandTimeline(`list:${id}`, `/api/v1/timelines/list/${id}`, { max_id: maxId });\nexport const expandLinkTimeline            = (url, { maxId } = {}) => expandTimeline(`link:${url}`, `/api/v1/timelines/link`, { url, max_id: maxId });\nexport const expandHashtagTimeline         = (hashtag, { maxId, tags, local } = {}) => {\n  return expandTimeline(`hashtag:${hashtag}${local ? ':local' : ''}`, `/api/v1/timelines/tag/${hashtag}`, {\n    max_id: maxId,\n    any:    parseTags(tags, 'any'),\n    all:    parseTags(tags, 'all'),\n    none:   parseTags(tags, 'none'),\n    local:  local,\n  });\n};\n\nexport const fillHomeTimelineGaps      = () => fillTimelineGaps('home', '/api/v1/timelines/home', {});\nexport const fillPublicTimelineGaps    = ({ onlyMedia, onlyRemote } = {}) => fillTimelineGaps(`public${onlyRemote ? ':remote' : ''}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, only_media: !!onlyMedia });\nexport const fillCommunityTimelineGaps = ({ onlyMedia } = {}) => fillTimelineGaps(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, only_media: !!onlyMedia });\nexport const fillListTimelineGaps      = (id) => fillTimelineGaps(`list:${id}`, `/api/v1/timelines/list/${id}`, {});\n\nexport function expandTimelineRequest(timeline, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_REQUEST,\n    timeline,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineSuccess(timeline, statuses, next, partial, isLoadingRecent, isLoadingMore, usePendingItems) {\n  return {\n    type: TIMELINE_EXPAND_SUCCESS,\n    timeline,\n    statuses,\n    next,\n    partial,\n    isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineFail(timeline, error, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_FAIL,\n    timeline,\n    error,\n    skipLoading: !isLoadingMore,\n    skipNotFound: timeline.startsWith('account:'),\n  };\n}\n\nexport function scrollTopTimeline(timeline, top) {\n  return {\n    type: TIMELINE_SCROLL_TOP,\n    timeline,\n    top,\n  };\n}\n\nexport function connectTimeline(timeline) {\n  return {\n    type: TIMELINE_CONNECT,\n    timeline,\n    usePendingItems: preferPendingItems,\n  };\n}\n\nexport const markAsPartial = timeline => ({\n  type: TIMELINE_MARK_AS_PARTIAL,\n  timeline,\n});\n\nexport const insertIntoTimeline = (timeline, key, index) => ({\n  type: TIMELINE_INSERT,\n  timeline,\n  index,\n  key,\n});\n","import { defineMessages } from 'react-intl';\n\nimport axios from 'axios';\nimport { throttle } from 'lodash';\n\nimport api from 'mastodon/api';\nimport { browserHistory } from 'mastodon/components/router';\nimport { search as emojiSearch } from 'mastodon/features/emoji/emoji_mart_search_light';\nimport { tagHistory } from 'mastodon/settings';\n\nimport { showAlert, showAlertForError } from './alerts';\nimport { useEmoji } from './emojis';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { openModal } from './modal';\nimport { updateTimeline } from './timelines';\n\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsAccountsController;\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsTagsController;\n\nexport const COMPOSE_CHANGE          = 'COMPOSE_CHANGE';\nexport const COMPOSE_SUBMIT_REQUEST  = 'COMPOSE_SUBMIT_REQUEST';\nexport const COMPOSE_SUBMIT_SUCCESS  = 'COMPOSE_SUBMIT_SUCCESS';\nexport const COMPOSE_SUBMIT_FAIL     = 'COMPOSE_SUBMIT_FAIL';\nexport const COMPOSE_REPLY           = 'COMPOSE_REPLY';\nexport const COMPOSE_REPLY_CANCEL    = 'COMPOSE_REPLY_CANCEL';\nexport const COMPOSE_DIRECT          = 'COMPOSE_DIRECT';\nexport const COMPOSE_MENTION         = 'COMPOSE_MENTION';\nexport const COMPOSE_RESET           = 'COMPOSE_RESET';\n\nexport const COMPOSE_UPLOAD_REQUEST    = 'COMPOSE_UPLOAD_REQUEST';\nexport const COMPOSE_UPLOAD_SUCCESS    = 'COMPOSE_UPLOAD_SUCCESS';\nexport const COMPOSE_UPLOAD_FAIL       = 'COMPOSE_UPLOAD_FAIL';\nexport const COMPOSE_UPLOAD_PROGRESS   = 'COMPOSE_UPLOAD_PROGRESS';\nexport const COMPOSE_UPLOAD_PROCESSING = 'COMPOSE_UPLOAD_PROCESSING';\nexport const COMPOSE_UPLOAD_UNDO       = 'COMPOSE_UPLOAD_UNDO';\n\nexport const THUMBNAIL_UPLOAD_REQUEST  = 'THUMBNAIL_UPLOAD_REQUEST';\nexport const THUMBNAIL_UPLOAD_SUCCESS  = 'THUMBNAIL_UPLOAD_SUCCESS';\nexport const THUMBNAIL_UPLOAD_FAIL     = 'THUMBNAIL_UPLOAD_FAIL';\nexport const THUMBNAIL_UPLOAD_PROGRESS = 'THUMBNAIL_UPLOAD_PROGRESS';\n\nexport const COMPOSE_SUGGESTIONS_CLEAR = 'COMPOSE_SUGGESTIONS_CLEAR';\nexport const COMPOSE_SUGGESTIONS_READY = 'COMPOSE_SUGGESTIONS_READY';\nexport const COMPOSE_SUGGESTION_SELECT = 'COMPOSE_SUGGESTION_SELECT';\nexport const COMPOSE_SUGGESTION_IGNORE = 'COMPOSE_SUGGESTION_IGNORE';\nexport const COMPOSE_SUGGESTION_TAGS_UPDATE = 'COMPOSE_SUGGESTION_TAGS_UPDATE';\n\nexport const COMPOSE_TAG_HISTORY_UPDATE = 'COMPOSE_TAG_HISTORY_UPDATE';\n\nexport const COMPOSE_MOUNT   = 'COMPOSE_MOUNT';\nexport const COMPOSE_UNMOUNT = 'COMPOSE_UNMOUNT';\n\nexport const COMPOSE_SENSITIVITY_CHANGE  = 'COMPOSE_SENSITIVITY_CHANGE';\nexport const COMPOSE_SPOILERNESS_CHANGE  = 'COMPOSE_SPOILERNESS_CHANGE';\nexport const COMPOSE_SPOILER_TEXT_CHANGE = 'COMPOSE_SPOILER_TEXT_CHANGE';\nexport const COMPOSE_VISIBILITY_CHANGE   = 'COMPOSE_VISIBILITY_CHANGE';\nexport const COMPOSE_COMPOSING_CHANGE    = 'COMPOSE_COMPOSING_CHANGE';\nexport const COMPOSE_LANGUAGE_CHANGE     = 'COMPOSE_LANGUAGE_CHANGE';\n\nexport const COMPOSE_EMOJI_INSERT = 'COMPOSE_EMOJI_INSERT';\n\nexport const COMPOSE_UPLOAD_CHANGE_REQUEST     = 'COMPOSE_UPLOAD_UPDATE_REQUEST';\nexport const COMPOSE_UPLOAD_CHANGE_SUCCESS     = 'COMPOSE_UPLOAD_UPDATE_SUCCESS';\nexport const COMPOSE_UPLOAD_CHANGE_FAIL        = 'COMPOSE_UPLOAD_UPDATE_FAIL';\n\nexport const COMPOSE_POLL_ADD             = 'COMPOSE_POLL_ADD';\nexport const COMPOSE_POLL_REMOVE          = 'COMPOSE_POLL_REMOVE';\nexport const COMPOSE_POLL_OPTION_ADD      = 'COMPOSE_POLL_OPTION_ADD';\nexport const COMPOSE_POLL_OPTION_CHANGE   = 'COMPOSE_POLL_OPTION_CHANGE';\nexport const COMPOSE_POLL_OPTION_REMOVE   = 'COMPOSE_POLL_OPTION_REMOVE';\nexport const COMPOSE_POLL_SETTINGS_CHANGE = 'COMPOSE_POLL_SETTINGS_CHANGE';\n\nexport const INIT_MEDIA_EDIT_MODAL = 'INIT_MEDIA_EDIT_MODAL';\n\nexport const COMPOSE_CHANGE_MEDIA_DESCRIPTION = 'COMPOSE_CHANGE_MEDIA_DESCRIPTION';\nexport const COMPOSE_CHANGE_MEDIA_FOCUS       = 'COMPOSE_CHANGE_MEDIA_FOCUS';\nexport const COMPOSE_CHANGE_MEDIA_ORDER       = 'COMPOSE_CHANGE_MEDIA_ORDER';\n\nexport const COMPOSE_SET_STATUS = 'COMPOSE_SET_STATUS';\nexport const COMPOSE_FOCUS = 'COMPOSE_FOCUS';\n\nconst messages = defineMessages({\n  uploadErrorLimit: { id: 'upload_error.limit', defaultMessage: 'File upload limit exceeded.' },\n  uploadErrorPoll:  { id: 'upload_error.poll', defaultMessage: 'File upload not allowed with polls.' },\n  open: { id: 'compose.published.open', defaultMessage: 'Open' },\n  published: { id: 'compose.published.body', defaultMessage: 'Post published.' },\n  saved: { id: 'compose.saved.body', defaultMessage: 'Post saved.' },\n});\n\nexport const ensureComposeIsVisible = (getState) => {\n  if (!getState().getIn(['compose', 'mounted'])) {\n    browserHistory.push('/publish');\n  }\n};\n\nexport function setComposeToStatus(status, text, spoiler_text) {\n  return{\n    type: COMPOSE_SET_STATUS,\n    status,\n    text,\n    spoiler_text,\n  };\n}\n\nexport function changeCompose(text) {\n  return {\n    type: COMPOSE_CHANGE,\n    text: text,\n  };\n}\n\nexport function replyCompose(status) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_REPLY,\n      status: status,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function replyComposeById(statusId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const status = state.statuses.get(statusId);\n\n    if (status) {\n      const account = state.accounts.get(status.get('account'));\n      dispatch(replyCompose(status.set('account', account)));\n    }\n  };\n}\n\nexport function cancelReplyCompose() {\n  return {\n    type: COMPOSE_REPLY_CANCEL,\n  };\n}\n\nexport function resetCompose() {\n  return {\n    type: COMPOSE_RESET,\n  };\n}\n\nexport const focusCompose = (defaultText) => (dispatch, getState) => {\n  dispatch({\n    type: COMPOSE_FOCUS,\n    defaultText,\n  });\n\n  ensureComposeIsVisible(getState);\n};\n\nexport function mentionCompose(account) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_MENTION,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function mentionComposeById(accountId) {\n  return (dispatch, getState) => {\n    dispatch(mentionCompose(getState().accounts.get(accountId)));\n  };\n}\n\nexport function directCompose(account) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_DIRECT,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function submitCompose() {\n  return function (dispatch, getState) {\n    const status   = getState().getIn(['compose', 'text'], '');\n    const media    = getState().getIn(['compose', 'media_attachments']);\n    const statusId = getState().getIn(['compose', 'id'], null);\n\n    if ((!status || !status.length) && media.size === 0) {\n      return;\n    }\n\n    dispatch(submitComposeRequest());\n\n    // If we're editing a post with media attachments, those have not\n    // necessarily been changed on the server. Do it now in the same\n    // API call.\n    let media_attributes;\n    if (statusId !== null) {\n      media_attributes = media.map(item => {\n        let focus;\n\n        if (item.getIn(['meta', 'focus'])) {\n          focus = `${item.getIn(['meta', 'focus', 'x']).toFixed(2)},${item.getIn(['meta', 'focus', 'y']).toFixed(2)}`;\n        }\n\n        return {\n          id: item.get('id'),\n          description: item.get('description'),\n          focus,\n        };\n      });\n    }\n\n    api().request({\n      url: statusId === null ? '/api/v1/statuses' : `/api/v1/statuses/${statusId}`,\n      method: statusId === null ? 'post' : 'put',\n      data: {\n        status,\n        in_reply_to_id: getState().getIn(['compose', 'in_reply_to'], null),\n        media_ids: media.map(item => item.get('id')),\n        media_attributes,\n        sensitive: getState().getIn(['compose', 'sensitive']),\n        spoiler_text: getState().getIn(['compose', 'spoiler']) ? getState().getIn(['compose', 'spoiler_text'], '') : '',\n        visibility: getState().getIn(['compose', 'privacy']),\n        poll: getState().getIn(['compose', 'poll'], null),\n        language: getState().getIn(['compose', 'language']),\n      },\n      headers: {\n        'Idempotency-Key': getState().getIn(['compose', 'idempotencyKey']),\n      },\n    }).then(function (response) {\n      if ((browserHistory.location.pathname === '/publish' || browserHistory.location.pathname === '/statuses/new') && window.history.state) {\n        browserHistory.goBack();\n      }\n\n      dispatch(insertIntoTagHistory(response.data.tags, status));\n      dispatch(submitComposeSuccess({ ...response.data }));\n\n      // To make the app more responsive, immediately push the status\n      // into the columns\n      const insertIfOnline = timelineId => {\n        const timeline = getState().getIn(['timelines', timelineId]);\n\n        if (timeline && timeline.get('items').size > 0 && timeline.getIn(['items', 0]) !== null && timeline.get('online')) {\n          dispatch(updateTimeline(timelineId, { ...response.data }));\n        }\n      };\n\n      if (statusId) {\n        dispatch(importFetchedStatus({ ...response.data }));\n      }\n\n      if (statusId === null && response.data.visibility !== 'direct') {\n        insertIfOnline('home');\n      }\n\n      if (statusId === null && response.data.in_reply_to_id === null && response.data.visibility === 'public') {\n        insertIfOnline('community');\n        insertIfOnline('public');\n        insertIfOnline(`account:${response.data.account.id}`);\n      }\n\n      dispatch(showAlert({\n        message: statusId === null ? messages.published : messages.saved,\n        action: messages.open,\n        dismissAfter: 10000,\n        onClick: () => browserHistory.push(`/@${response.data.account.username}/${response.data.id}`),\n      }));\n    }).catch(function (error) {\n      dispatch(submitComposeFail(error));\n    });\n  };\n}\n\nexport function submitComposeRequest() {\n  return {\n    type: COMPOSE_SUBMIT_REQUEST,\n  };\n}\n\nexport function submitComposeSuccess(status) {\n  return {\n    type: COMPOSE_SUBMIT_SUCCESS,\n    status: status,\n  };\n}\n\nexport function submitComposeFail(error) {\n  return {\n    type: COMPOSE_SUBMIT_FAIL,\n    error: error,\n  };\n}\n\nexport function uploadCompose(files) {\n  return function (dispatch, getState) {\n    const uploadLimit = getState().getIn(['server', 'server', 'configuration', 'statuses', 'max_media_attachments']);\n    const media = getState().getIn(['compose', 'media_attachments']);\n    const pending = getState().getIn(['compose', 'pending_media_attachments']);\n    const progress = new Array(files.length).fill(0);\n\n    let total = Array.from(files).reduce((a, v) => a + v.size, 0);\n\n    if (files.length + media.size + pending > uploadLimit) {\n      dispatch(showAlert({ message: messages.uploadErrorLimit }));\n      return;\n    }\n\n    if (getState().getIn(['compose', 'poll'])) {\n      dispatch(showAlert({ message: messages.uploadErrorPoll }));\n      return;\n    }\n\n    dispatch(uploadComposeRequest());\n\n    for (const [i, file] of Array.from(files).entries()) {\n      if (media.size + i > (uploadLimit - 1)) break;\n\n      const data = new FormData();\n      data.append('file', file);\n\n      api().post('/api/v2/media', data, {\n        onUploadProgress: function({ loaded }){\n          progress[i] = loaded;\n          dispatch(uploadComposeProgress(progress.reduce((a, v) => a + v, 0), total));\n        },\n      }).then(({ status, data }) => {\n        // If server-side processing of the media attachment has not completed yet,\n        // poll the server until it is, before showing the media attachment as uploaded\n\n        if (status === 200) {\n          dispatch(uploadComposeSuccess(data, file));\n        } else if (status === 202) {\n          dispatch(uploadComposeProcessing());\n\n          let tryCount = 1;\n\n          const poll = () => {\n            api().get(`/api/v1/media/${data.id}`).then(response => {\n              if (response.status === 200) {\n                dispatch(uploadComposeSuccess(response.data, file));\n              } else if (response.status === 206) {\n                const retryAfter = (Math.log2(tryCount) || 1) * 1000;\n                tryCount += 1;\n                setTimeout(() => poll(), retryAfter);\n              }\n            }).catch(error => dispatch(uploadComposeFail(error)));\n          };\n\n          poll();\n        }\n      }).catch(error => dispatch(uploadComposeFail(error)));\n    }\n  };\n}\n\nexport const uploadComposeProcessing = () => ({\n  type: COMPOSE_UPLOAD_PROCESSING,\n});\n\nexport const uploadThumbnail = (id, file) => (dispatch) => {\n  dispatch(uploadThumbnailRequest());\n\n  const total = file.size;\n  const data = new FormData();\n\n  data.append('thumbnail', file);\n\n  api().put(`/api/v1/media/${id}`, data, {\n    onUploadProgress: ({ loaded }) => {\n      dispatch(uploadThumbnailProgress(loaded, total));\n    },\n  }).then(({ data }) => {\n    dispatch(uploadThumbnailSuccess(data));\n  }).catch(error => {\n    dispatch(uploadThumbnailFail(id, error));\n  });\n};\n\nexport const uploadThumbnailRequest = () => ({\n  type: THUMBNAIL_UPLOAD_REQUEST,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailProgress = (loaded, total) => ({\n  type: THUMBNAIL_UPLOAD_PROGRESS,\n  loaded,\n  total,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailSuccess = media => ({\n  type: THUMBNAIL_UPLOAD_SUCCESS,\n  media,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailFail = error => ({\n  type: THUMBNAIL_UPLOAD_FAIL,\n  error,\n  skipLoading: true,\n});\n\nexport function initMediaEditModal(id) {\n  return dispatch => {\n    dispatch({\n      type: INIT_MEDIA_EDIT_MODAL,\n      id,\n    });\n\n    dispatch(openModal({\n      modalType: 'FOCAL_POINT',\n      modalProps: { mediaId: id },\n    }));\n  };\n}\n\nexport function onChangeMediaDescription(description) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n    description,\n  };\n}\n\nexport function onChangeMediaFocus(focusX, focusY) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_FOCUS,\n    focusX,\n    focusY,\n  };\n}\n\nexport function changeUploadCompose(id, params) {\n  return (dispatch, getState) => {\n    dispatch(changeUploadComposeRequest());\n\n    let media = getState().getIn(['compose', 'media_attachments']).find((item) => item.get('id') === id);\n\n    // Editing already-attached media is deferred to editing the post itself.\n    // For simplicity's sake, fake an API reply.\n    if (media && !media.get('unattached')) {\n      const { focus, ...other } = params;\n      const data = { ...media.toJS(), ...other };\n\n      if (focus) {\n        const [x, y] = focus.split(',');\n        data.meta = { focus: { x: parseFloat(x), y: parseFloat(y) } };\n      }\n\n      dispatch(changeUploadComposeSuccess(data, true));\n    } else {\n      api().put(`/api/v1/media/${id}`, params).then(response => {\n        dispatch(changeUploadComposeSuccess(response.data, false));\n      }).catch(error => {\n        dispatch(changeUploadComposeFail(id, error));\n      });\n    }\n  };\n}\n\nexport function changeUploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeSuccess(media, attached) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_SUCCESS,\n    media: media,\n    attached: attached,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeProgress(loaded, total) {\n  return {\n    type: COMPOSE_UPLOAD_PROGRESS,\n    loaded: loaded,\n    total: total,\n  };\n}\n\nexport function uploadComposeSuccess(media, file) {\n  return {\n    type: COMPOSE_UPLOAD_SUCCESS,\n    media: media,\n    file: file,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function undoUploadCompose(media_id) {\n  return {\n    type: COMPOSE_UPLOAD_UNDO,\n    media_id: media_id,\n  };\n}\n\nexport function clearComposeSuggestions() {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n  return {\n    type: COMPOSE_SUGGESTIONS_CLEAR,\n  };\n}\n\nconst fetchComposeSuggestionsAccounts = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n\n  fetchComposeSuggestionsAccountsController = new AbortController();\n\n  api().get('/api/v1/accounts/search', {\n    signal: fetchComposeSuggestionsAccountsController.signal,\n\n    params: {\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n    },\n  }).then(response => {\n    dispatch(importFetchedAccounts(response.data));\n    dispatch(readyComposeSuggestionsAccounts(token, response.data));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsAccountsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nconst fetchComposeSuggestionsEmojis = (dispatch, getState, token) => {\n  const results = emojiSearch(token.replace(':', ''), { maxResults: 5 });\n  dispatch(readyComposeSuggestionsEmojis(token, results));\n};\n\nconst fetchComposeSuggestionsTags = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsTagsController) {\n    fetchComposeSuggestionsTagsController.abort();\n  }\n\n  dispatch(updateSuggestionTags(token));\n\n  fetchComposeSuggestionsTagsController = new AbortController();\n\n  api().get('/api/v2/search', {\n    signal: fetchComposeSuggestionsTagsController.signal,\n\n    params: {\n      type: 'hashtags',\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n      exclude_unreviewed: true,\n    },\n  }).then(({ data }) => {\n    dispatch(readyComposeSuggestionsTags(token, data.hashtags));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsTagsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nexport function fetchComposeSuggestions(token) {\n  return (dispatch, getState) => {\n    switch (token[0]) {\n    case ':':\n      fetchComposeSuggestionsEmojis(dispatch, getState, token);\n      break;\n    case '#':\n      fetchComposeSuggestionsTags(dispatch, getState, token);\n      break;\n    default:\n      fetchComposeSuggestionsAccounts(dispatch, getState, token);\n      break;\n    }\n  };\n}\n\nexport function readyComposeSuggestionsEmojis(token, emojis) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    emojis,\n  };\n}\n\nexport function readyComposeSuggestionsAccounts(token, accounts) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    accounts,\n  };\n}\n\nexport const readyComposeSuggestionsTags = (token, tags) => ({\n  type: COMPOSE_SUGGESTIONS_READY,\n  token,\n  tags,\n});\n\nexport function selectComposeSuggestion(position, token, suggestion, path) {\n  return (dispatch, getState) => {\n    let completion, startPosition;\n\n    if (suggestion.type === 'emoji') {\n      completion    = suggestion.native || suggestion.colons;\n      startPosition = position - 1;\n\n      dispatch(useEmoji(suggestion));\n    } else if (suggestion.type === 'hashtag') {\n      completion    = `#${suggestion.name}`;\n      startPosition = position - 1;\n    } else if (suggestion.type === 'account') {\n      completion    = getState().getIn(['accounts', suggestion.id, 'acct']);\n      startPosition = position;\n    }\n\n    // We don't want to replace hashtags that vary only in case due to accessibility, but we need to fire off an event so that\n    // the suggestions are dismissed and the cursor moves forward.\n    if (suggestion.type !== 'hashtag' || token.slice(1).localeCompare(suggestion.name, undefined, { sensitivity: 'accent' }) !== 0) {\n      dispatch({\n        type: COMPOSE_SUGGESTION_SELECT,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    } else {\n      dispatch({\n        type: COMPOSE_SUGGESTION_IGNORE,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    }\n  };\n}\n\nexport function updateSuggestionTags(token) {\n  return {\n    type: COMPOSE_SUGGESTION_TAGS_UPDATE,\n    token,\n  };\n}\n\nexport function updateTagHistory(tags) {\n  return {\n    type: COMPOSE_TAG_HISTORY_UPDATE,\n    tags,\n  };\n}\n\nexport function hydrateCompose() {\n  return (dispatch, getState) => {\n    const me = getState().getIn(['meta', 'me']);\n    const history = tagHistory.get(me);\n\n    if (history !== null) {\n      dispatch(updateTagHistory(history));\n    }\n  };\n}\n\nfunction insertIntoTagHistory(recognizedTags, text) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const oldHistory = state.getIn(['compose', 'tagHistory']);\n    const me = state.getIn(['meta', 'me']);\n\n    // FIXME: Matching input hashtags with recognized hashtags has become more\n    // complicated because of new normalization rules, it's no longer just\n    // a case sensitivity issue\n    const names = recognizedTags.map(tag => {\n      const matches = text.match(new RegExp(`#${tag.name}`, 'i'));\n\n      if (matches && matches.length > 0) {\n        return matches[0].slice(1);\n      } else {\n        return tag.name;\n      }\n    });\n\n    const intersectedOldHistory = oldHistory.filter(name => names.findIndex(newName => newName.toLowerCase() === name.toLowerCase()) === -1);\n\n    names.push(...intersectedOldHistory.toJS());\n\n    const newHistory = names.slice(0, 1000);\n\n    tagHistory.set(me, newHistory);\n    dispatch(updateTagHistory(newHistory));\n  };\n}\n\nexport function mountCompose() {\n  return {\n    type: COMPOSE_MOUNT,\n  };\n}\n\nexport function unmountCompose() {\n  return {\n    type: COMPOSE_UNMOUNT,\n  };\n}\n\nexport function changeComposeSensitivity() {\n  return {\n    type: COMPOSE_SENSITIVITY_CHANGE,\n  };\n}\n\nexport const changeComposeLanguage = language => ({\n  type: COMPOSE_LANGUAGE_CHANGE,\n  language,\n});\n\nexport function changeComposeSpoilerness() {\n  return {\n    type: COMPOSE_SPOILERNESS_CHANGE,\n  };\n}\n\nexport function changeComposeSpoilerText(text) {\n  return {\n    type: COMPOSE_SPOILER_TEXT_CHANGE,\n    text,\n  };\n}\n\nexport function changeComposeVisibility(value) {\n  return {\n    type: COMPOSE_VISIBILITY_CHANGE,\n    value,\n  };\n}\n\nexport function insertEmojiCompose(position, emoji, needsSpace) {\n  return {\n    type: COMPOSE_EMOJI_INSERT,\n    position,\n    emoji,\n    needsSpace,\n  };\n}\n\nexport function changeComposing(value) {\n  return {\n    type: COMPOSE_COMPOSING_CHANGE,\n    value,\n  };\n}\n\nexport function addPoll() {\n  return {\n    type: COMPOSE_POLL_ADD,\n  };\n}\n\nexport function removePoll() {\n  return {\n    type: COMPOSE_POLL_REMOVE,\n  };\n}\n\nexport function addPollOption(title) {\n  return {\n    type: COMPOSE_POLL_OPTION_ADD,\n    title,\n  };\n}\n\nexport function changePollOption(index, title, maxOptions) {\n  return {\n    type: COMPOSE_POLL_OPTION_CHANGE,\n    index,\n    title,\n    maxOptions,\n  };\n}\n\nexport function removePollOption(index) {\n  return {\n    type: COMPOSE_POLL_OPTION_REMOVE,\n    index,\n  };\n}\n\nexport function changePollSettings(expiresIn, isMultiple) {\n  return {\n    type: COMPOSE_POLL_SETTINGS_CHANGE,\n    expiresIn,\n    isMultiple,\n  };\n}\n\nexport const changeMediaOrder = (a, b) => ({\n  type: COMPOSE_CHANGE_MEDIA_ORDER,\n  a,\n  b,\n});\n","import { apiRequestGet } from 'mastodon/api';\nimport type {\n  ApiSearchType,\n  ApiSearchResultsJSON,\n} from 'mastodon/api_types/search';\n\nexport const apiGetSearch = (params: {\n  q: string;\n  resolve?: boolean;\n  type?: ApiSearchType;\n  limit?: number;\n  offset?: number;\n}) =>\n  apiRequestGet<ApiSearchResultsJSON>('v2/search', {\n    ...params,\n  });\n","import { createAction } from '@reduxjs/toolkit';\n\nimport { apiGetSearch } from 'mastodon/api/search';\nimport type { ApiSearchType } from 'mastodon/api_types/search';\nimport type {\n  RecentSearch,\n  SearchType as RecentSearchType,\n} from 'mastodon/models/search';\nimport { searchHistory } from 'mastodon/settings';\nimport {\n  createDataLoadingThunk,\n  createAppAsyncThunk,\n} from 'mastodon/store/typed_functions';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\n\nexport const SEARCH_HISTORY_UPDATE = 'SEARCH_HISTORY_UPDATE';\n\nexport const submitSearch = createDataLoadingThunk(\n  'search/submit',\n  async ({ q, type }: { q: string; type?: ApiSearchType }, { getState }) => {\n    const signedIn = !!getState().meta.get('me');\n\n    return apiGetSearch({\n      q,\n      type,\n      resolve: signedIn,\n      limit: 11,\n    });\n  },\n  (data, { dispatch }) => {\n    if (data.accounts.length > 0) {\n      dispatch(importFetchedAccounts(data.accounts));\n      dispatch(fetchRelationships(data.accounts.map((account) => account.id)));\n    }\n\n    if (data.statuses.length > 0) {\n      dispatch(importFetchedStatuses(data.statuses));\n    }\n\n    return data;\n  },\n  {\n    useLoadingBar: false,\n  },\n);\n\nexport const expandSearch = createDataLoadingThunk(\n  'search/expand',\n  async ({ type }: { type: ApiSearchType }, { getState }) => {\n    const q = getState().search.q;\n    const results = getState().search.results;\n    const offset = results?.[type].length;\n\n    return apiGetSearch({\n      q,\n      type,\n      limit: 10,\n      offset,\n    });\n  },\n  (data, { dispatch }) => {\n    if (data.accounts.length > 0) {\n      dispatch(importFetchedAccounts(data.accounts));\n      dispatch(fetchRelationships(data.accounts.map((account) => account.id)));\n    }\n\n    if (data.statuses.length > 0) {\n      dispatch(importFetchedStatuses(data.statuses));\n    }\n\n    return data;\n  },\n  {\n    useLoadingBar: true,\n  },\n);\n\nexport const openURL = createDataLoadingThunk(\n  'search/openURL',\n  ({ url }: { url: string }) =>\n    apiGetSearch({\n      q: url,\n      resolve: true,\n      limit: 1,\n    }),\n  (data, { dispatch }) => {\n    if (data.accounts.length > 0) {\n      dispatch(importFetchedAccounts(data.accounts));\n    } else if (data.statuses.length > 0) {\n      dispatch(importFetchedStatuses(data.statuses));\n    }\n\n    return data;\n  },\n  {\n    useLoadingBar: true,\n  },\n);\n\nexport const clickSearchResult = createAppAsyncThunk(\n  'search/clickResult',\n  (\n    { q, type }: { q: string; type?: RecentSearchType },\n    { dispatch, getState },\n  ) => {\n    const previous = getState().search.recent;\n\n    if (previous.some((x) => x.q === q && x.type === type)) {\n      return;\n    }\n\n    const me = getState().meta.get('me') as string;\n    const current = [{ type, q }, ...previous].slice(0, 4);\n\n    searchHistory.set(me, current);\n    dispatch(updateSearchHistory(current));\n  },\n);\n\nexport const forgetSearchResult = createAppAsyncThunk(\n  'search/forgetResult',\n  (\n    { q, type }: { q: string; type?: RecentSearchType },\n    { dispatch, getState },\n  ) => {\n    const previous = getState().search.recent;\n    const me = getState().meta.get('me') as string;\n    const current = previous.filter(\n      (result) => result.q !== q || result.type !== type,\n    );\n\n    searchHistory.set(me, current);\n    dispatch(updateSearchHistory(current));\n  },\n);\n\nexport const updateSearchHistory = createAction<RecentSearch[]>(\n  'search/updateHistory',\n);\n\nexport const hydrateSearch = createAppAsyncThunk(\n  'search/hydrate',\n  (_args, { dispatch, getState }) => {\n    const me = getState().meta.get('me') as string;\n    const history = searchHistory.get(me) as RecentSearch[] | null;\n\n    if (history !== null) {\n      dispatch(updateSearchHistory(history));\n    }\n  },\n);\n","import { fromJS, isIndexed } from 'immutable';\n\nimport { hydrateCompose } from './compose';\nimport { importFetchedAccounts } from './importer';\nimport { hydrateSearch } from './search';\n\nexport const STORE_HYDRATE = 'STORE_HYDRATE';\nexport const STORE_HYDRATE_LAZY = 'STORE_HYDRATE_LAZY';\n\nconst convertState = rawState =>\n  fromJS(rawState, (k, v) =>\n    isIndexed(v) ? v.toList() : v.toMap());\n\nexport function hydrateStore(rawState) {\n  return dispatch => {\n    const state = convertState(rawState);\n\n    dispatch({\n      type: STORE_HYDRATE,\n      state,\n    });\n\n    dispatch(hydrateCompose());\n    dispatch(hydrateSearch());\n    dispatch(importFetchedAccounts(Object.values(rawState.accounts)));\n  };\n}\n","import api from '../api';\n\nimport { normalizeAnnouncement } from './importer/normalizer';\n\nexport const ANNOUNCEMENTS_FETCH_REQUEST = 'ANNOUNCEMENTS_FETCH_REQUEST';\nexport const ANNOUNCEMENTS_FETCH_SUCCESS = 'ANNOUNCEMENTS_FETCH_SUCCESS';\nexport const ANNOUNCEMENTS_FETCH_FAIL    = 'ANNOUNCEMENTS_FETCH_FAIL';\nexport const ANNOUNCEMENTS_UPDATE        = 'ANNOUNCEMENTS_UPDATE';\nexport const ANNOUNCEMENTS_DELETE        = 'ANNOUNCEMENTS_DELETE';\n\nexport const ANNOUNCEMENTS_DISMISS_REQUEST = 'ANNOUNCEMENTS_DISMISS_REQUEST';\nexport const ANNOUNCEMENTS_DISMISS_SUCCESS = 'ANNOUNCEMENTS_DISMISS_SUCCESS';\nexport const ANNOUNCEMENTS_DISMISS_FAIL    = 'ANNOUNCEMENTS_DISMISS_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_ADD_REQUEST = 'ANNOUNCEMENTS_REACTION_ADD_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_ADD_SUCCESS = 'ANNOUNCEMENTS_REACTION_ADD_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_ADD_FAIL    = 'ANNOUNCEMENTS_REACTION_ADD_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_REMOVE_REQUEST = 'ANNOUNCEMENTS_REACTION_REMOVE_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS = 'ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_FAIL    = 'ANNOUNCEMENTS_REACTION_REMOVE_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_UPDATE = 'ANNOUNCEMENTS_REACTION_UPDATE';\n\nexport const ANNOUNCEMENTS_TOGGLE_SHOW = 'ANNOUNCEMENTS_TOGGLE_SHOW';\n\nconst noOp = () => {};\n\nexport const fetchAnnouncements = (done = noOp) => (dispatch) => {\n  dispatch(fetchAnnouncementsRequest());\n\n  api().get('/api/v1/announcements').then(response => {\n    dispatch(fetchAnnouncementsSuccess(response.data.map(x => normalizeAnnouncement(x))));\n  }).catch(error => {\n    dispatch(fetchAnnouncementsFail(error));\n  }).finally(() => {\n    done();\n  });\n};\n\nexport const fetchAnnouncementsRequest = () => ({\n  type: ANNOUNCEMENTS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsSuccess = announcements => ({\n  type: ANNOUNCEMENTS_FETCH_SUCCESS,\n  announcements,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsFail= error => ({\n  type: ANNOUNCEMENTS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const updateAnnouncements = announcement => ({\n  type: ANNOUNCEMENTS_UPDATE,\n  announcement: normalizeAnnouncement(announcement),\n});\n\nexport const dismissAnnouncement = announcementId => (dispatch) => {\n  dispatch(dismissAnnouncementRequest(announcementId));\n\n  api().post(`/api/v1/announcements/${announcementId}/dismiss`).then(() => {\n    dispatch(dismissAnnouncementSuccess(announcementId));\n  }).catch(error => {\n    dispatch(dismissAnnouncementFail(announcementId, error));\n  });\n};\n\nexport const dismissAnnouncementRequest = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_REQUEST,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementSuccess = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_SUCCESS,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementFail = (announcementId, error) => ({\n  type: ANNOUNCEMENTS_DISMISS_FAIL,\n  id: announcementId,\n  error,\n});\n\nexport const addReaction = (announcementId, name) => (dispatch, getState) => {\n  const announcement = getState().getIn(['announcements', 'items']).find(x => x.get('id') === announcementId);\n\n  let alreadyAdded = false;\n\n  if (announcement) {\n    const reaction = announcement.get('reactions').find(x => x.get('name') === name);\n    if (reaction && reaction.get('me')) {\n      alreadyAdded = true;\n    }\n  }\n\n  if (!alreadyAdded) {\n    dispatch(addReactionRequest(announcementId, name, alreadyAdded));\n  }\n\n  api().put(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(addReactionSuccess(announcementId, name, alreadyAdded));\n  }).catch(err => {\n    if (!alreadyAdded) {\n      dispatch(addReactionFail(announcementId, name, err));\n    }\n  });\n};\n\nexport const addReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const removeReaction = (announcementId, name) => (dispatch) => {\n  dispatch(removeReactionRequest(announcementId, name));\n\n  api().delete(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(removeReactionSuccess(announcementId, name));\n  }).catch(err => {\n    dispatch(removeReactionFail(announcementId, name, err));\n  });\n};\n\nexport const removeReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const updateReaction = reaction => ({\n  type: ANNOUNCEMENTS_REACTION_UPDATE,\n  reaction,\n});\n\nexport const toggleShowAnnouncements = () => ({\n  type: ANNOUNCEMENTS_TOGGLE_SHOW,\n});\n\nexport const deleteAnnouncement = id => ({\n  type: ANNOUNCEMENTS_DELETE,\n  id,\n});\n","import api, { getLinks } from '../api';\n\nimport {\n  importFetchedAccounts,\n  importFetchedStatuses,\n  importFetchedStatus,\n} from './importer';\n\nexport const CONVERSATIONS_MOUNT   = 'CONVERSATIONS_MOUNT';\nexport const CONVERSATIONS_UNMOUNT = 'CONVERSATIONS_UNMOUNT';\n\nexport const CONVERSATIONS_FETCH_REQUEST = 'CONVERSATIONS_FETCH_REQUEST';\nexport const CONVERSATIONS_FETCH_SUCCESS = 'CONVERSATIONS_FETCH_SUCCESS';\nexport const CONVERSATIONS_FETCH_FAIL    = 'CONVERSATIONS_FETCH_FAIL';\nexport const CONVERSATIONS_UPDATE        = 'CONVERSATIONS_UPDATE';\n\nexport const CONVERSATIONS_READ = 'CONVERSATIONS_READ';\n\nexport const CONVERSATIONS_DELETE_REQUEST = 'CONVERSATIONS_DELETE_REQUEST';\nexport const CONVERSATIONS_DELETE_SUCCESS = 'CONVERSATIONS_DELETE_SUCCESS';\nexport const CONVERSATIONS_DELETE_FAIL    = 'CONVERSATIONS_DELETE_FAIL';\n\nexport const mountConversations = () => ({\n  type: CONVERSATIONS_MOUNT,\n});\n\nexport const unmountConversations = () => ({\n  type: CONVERSATIONS_UNMOUNT,\n});\n\nexport const markConversationRead = conversationId => (dispatch) => {\n  dispatch({\n    type: CONVERSATIONS_READ,\n    id: conversationId,\n  });\n\n  api().post(`/api/v1/conversations/${conversationId}/read`);\n};\n\nexport const expandConversations = ({ maxId } = {}) => (dispatch, getState) => {\n  dispatch(expandConversationsRequest());\n\n  const params = { max_id: maxId };\n\n  if (!maxId) {\n    params.since_id = getState().getIn(['conversations', 'items', 0, 'last_status']);\n  }\n\n  const isLoadingRecent = !!params.since_id;\n\n  api().get('/api/v1/conversations', { params })\n    .then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data.reduce((aggr, item) => aggr.concat(item.accounts), [])));\n      dispatch(importFetchedStatuses(response.data.map(item => item.last_status).filter(x => !!x)));\n      dispatch(expandConversationsSuccess(response.data, next ? next.uri : null, isLoadingRecent));\n    })\n    .catch(err => dispatch(expandConversationsFail(err)));\n};\n\nexport const expandConversationsRequest = () => ({\n  type: CONVERSATIONS_FETCH_REQUEST,\n});\n\nexport const expandConversationsSuccess = (conversations, next, isLoadingRecent) => ({\n  type: CONVERSATIONS_FETCH_SUCCESS,\n  conversations,\n  next,\n  isLoadingRecent,\n});\n\nexport const expandConversationsFail = error => ({\n  type: CONVERSATIONS_FETCH_FAIL,\n  error,\n});\n\nexport const updateConversations = conversation => dispatch => {\n  dispatch(importFetchedAccounts(conversation.accounts));\n\n  if (conversation.last_status) {\n    dispatch(importFetchedStatus(conversation.last_status));\n  }\n\n  dispatch({\n    type: CONVERSATIONS_UPDATE,\n    conversation,\n  });\n};\n\nexport const deleteConversation = conversationId => (dispatch) => {\n  dispatch(deleteConversationRequest(conversationId));\n\n  api().delete(`/api/v1/conversations/${conversationId}`)\n    .then(() => dispatch(deleteConversationSuccess(conversationId)))\n    .catch(error => dispatch(deleteConversationFail(conversationId, error)));\n};\n\nexport const deleteConversationRequest = id => ({\n  type: CONVERSATIONS_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteConversationSuccess = id => ({\n  type: CONVERSATIONS_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteConversationFail = (id, error) => ({\n  type: CONVERSATIONS_DELETE_FAIL,\n  id,\n  error,\n});\n","import api, {\n  apiRequest,\n  getLinks,\n  apiRequestGet,\n  apiRequestPost,\n} from 'mastodon/api';\nimport type {\n  ApiNotificationGroupsResultJSON,\n  ApiNotificationRequestJSON,\n  ApiNotificationJSON,\n} from 'mastodon/api_types/notifications';\n\nexport const apiFetchNotifications = async (\n  params?: {\n    account_id?: string;\n    since_id?: string;\n  },\n  url?: string,\n) => {\n  const response = await api().request<ApiNotificationJSON[]>({\n    method: 'GET',\n    url: url ?? '/api/v1/notifications',\n    params,\n  });\n\n  return {\n    notifications: response.data,\n    links: getLinks(response),\n  };\n};\n\nexport const apiFetchNotificationGroups = async (params?: {\n  url?: string;\n  grouped_types?: string[];\n  exclude_types?: string[];\n  max_id?: string;\n  since_id?: string;\n}) => {\n  const response = await api().request<ApiNotificationGroupsResultJSON>({\n    method: 'GET',\n    url: '/api/v2/notifications',\n    params,\n  });\n\n  const { statuses, accounts, notification_groups } = response.data;\n\n  return {\n    statuses,\n    accounts,\n    notifications: notification_groups,\n    links: getLinks(response),\n  };\n};\n\nexport const apiClearNotifications = () =>\n  apiRequest<undefined>('POST', 'v1/notifications/clear');\n\nexport const apiFetchNotificationRequests = async (\n  params?: {\n    since_id?: string;\n  },\n  url?: string,\n) => {\n  const response = await api().request<ApiNotificationRequestJSON[]>({\n    method: 'GET',\n    url: url ?? '/api/v1/notifications/requests',\n    params,\n  });\n\n  return {\n    requests: response.data,\n    links: getLinks(response),\n  };\n};\n\nexport const apiFetchNotificationRequest = async (id: string) => {\n  return apiRequestGet<ApiNotificationRequestJSON>(\n    `v1/notifications/requests/${id}`,\n  );\n};\n\nexport const apiAcceptNotificationRequest = async (id: string) => {\n  return apiRequestPost(`v1/notifications/requests/${id}/accept`);\n};\n\nexport const apiDismissNotificationRequest = async (id: string) => {\n  return apiRequestPost(`v1/notifications/requests/${id}/dismiss`);\n};\n\nexport const apiAcceptNotificationRequests = async (id: string[]) => {\n  return apiRequestPost('v1/notifications/requests/accept', { id });\n};\n\nexport const apiDismissNotificationRequests = async (id: string[]) => {\n  return apiRequestPost('v1/notifications/requests/dismiss', { id });\n};\n","// See app/serializers/rest/notification_group_serializer.rb\n\nimport type { AccountWarningAction } from 'mastodon/models/notification_group';\n\nimport type { ApiAccountJSON } from './accounts';\nimport type { ApiReportJSON } from './reports';\nimport type { ApiStatusJSON } from './statuses';\n\n// See app/model/notification.rb\nexport const allNotificationTypes = [\n  'follow',\n  'follow_request',\n  'favourite',\n  'reblog',\n  'mention',\n  'poll',\n  'status',\n  'update',\n  'admin.sign_up',\n  'admin.report',\n  'moderation_warning',\n  'severed_relationships',\n  'annual_report',\n];\n\nexport type NotificationWithStatusType =\n  | 'favourite'\n  | 'reblog'\n  | 'status'\n  | 'mention'\n  | 'poll'\n  | 'update';\n\nexport type NotificationType =\n  | NotificationWithStatusType\n  | 'follow'\n  | 'follow_request'\n  | 'moderation_warning'\n  | 'severed_relationships'\n  | 'admin.sign_up'\n  | 'admin.report'\n  | 'annual_report';\n\nexport interface BaseNotificationJSON {\n  id: string;\n  type: NotificationType;\n  created_at: string;\n  group_key: string;\n  account: ApiAccountJSON;\n}\n\nexport interface BaseNotificationGroupJSON {\n  group_key: string;\n  notifications_count: number;\n  type: NotificationType;\n  sample_account_ids: string[];\n  latest_page_notification_at: string; // FIXME: This will only be present if the notification group is returned in a paginated list, not requested directly\n  most_recent_notification_id: string;\n  page_min_id?: string;\n  page_max_id?: string;\n}\n\ninterface NotificationGroupWithStatusJSON extends BaseNotificationGroupJSON {\n  type: NotificationWithStatusType;\n  status_id: string | null;\n}\n\ninterface NotificationWithStatusJSON extends BaseNotificationJSON {\n  type: NotificationWithStatusType;\n  status: ApiStatusJSON | null;\n}\n\ninterface ReportNotificationGroupJSON extends BaseNotificationGroupJSON {\n  type: 'admin.report';\n  report: ApiReportJSON;\n}\n\ninterface ReportNotificationJSON extends BaseNotificationJSON {\n  type: 'admin.report';\n  report: ApiReportJSON;\n}\n\ntype SimpleNotificationTypes = 'follow' | 'follow_request' | 'admin.sign_up';\ninterface SimpleNotificationGroupJSON extends BaseNotificationGroupJSON {\n  type: SimpleNotificationTypes;\n}\n\ninterface SimpleNotificationJSON extends BaseNotificationJSON {\n  type: SimpleNotificationTypes;\n}\n\nexport interface ApiAccountWarningJSON {\n  id: string;\n  action: AccountWarningAction;\n  text: string;\n  status_ids: string[];\n  created_at: string;\n  target_account: ApiAccountJSON;\n  appeal: unknown;\n}\n\ninterface ModerationWarningNotificationGroupJSON\n  extends BaseNotificationGroupJSON {\n  type: 'moderation_warning';\n  moderation_warning: ApiAccountWarningJSON;\n}\n\ninterface ModerationWarningNotificationJSON extends BaseNotificationJSON {\n  type: 'moderation_warning';\n  moderation_warning: ApiAccountWarningJSON;\n}\n\nexport interface ApiAccountRelationshipSeveranceEventJSON {\n  id: string;\n  type: 'account_suspension' | 'domain_block' | 'user_domain_block';\n  purged: boolean;\n  target_name: string;\n  followers_count: number;\n  following_count: number;\n  created_at: string;\n}\n\ninterface AccountRelationshipSeveranceNotificationGroupJSON\n  extends BaseNotificationGroupJSON {\n  type: 'severed_relationships';\n  event: ApiAccountRelationshipSeveranceEventJSON;\n}\n\ninterface AccountRelationshipSeveranceNotificationJSON\n  extends BaseNotificationJSON {\n  type: 'severed_relationships';\n  event: ApiAccountRelationshipSeveranceEventJSON;\n}\n\nexport interface ApiAnnualReportEventJSON {\n  year: string;\n}\n\ninterface AnnualReportNotificationGroupJSON extends BaseNotificationGroupJSON {\n  type: 'annual_report';\n  annual_report: ApiAnnualReportEventJSON;\n}\n\nexport type ApiNotificationJSON =\n  | SimpleNotificationJSON\n  | ReportNotificationJSON\n  | AccountRelationshipSeveranceNotificationJSON\n  | NotificationWithStatusJSON\n  | ModerationWarningNotificationJSON;\n\nexport type ApiNotificationGroupJSON =\n  | SimpleNotificationGroupJSON\n  | ReportNotificationGroupJSON\n  | AccountRelationshipSeveranceNotificationGroupJSON\n  | NotificationGroupWithStatusJSON\n  | ModerationWarningNotificationGroupJSON\n  | AnnualReportNotificationGroupJSON;\n\nexport interface ApiNotificationGroupsResultJSON {\n  accounts: ApiAccountJSON[];\n  statuses: ApiStatusJSON[];\n  notification_groups: ApiNotificationGroupJSON[];\n}\n\nexport interface ApiNotificationRequestJSON {\n  id: string;\n  created_at: string;\n  updated_at: string;\n  notifications_count: string;\n  account: ApiAccountJSON;\n  last_status?: ApiStatusJSON;\n}\n","import { createSelector } from '@reduxjs/toolkit';\n\nimport type { RootState } from 'mastodon/store';\n\n/* eslint-disable @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access */\n// state.settings is not yet typed, so we disable some ESLint checks for those selectors\nexport const selectSettingsNotificationsShows = createSelector(\n  [\n    (state) =>\n      state.settings.getIn(['notifications', 'shows']) as Immutable.Map<\n        string,\n        boolean\n      >,\n  ],\n  (shows) => shows.toJS() as Record<string, boolean>,\n);\n\nexport const selectSettingsNotificationsExcludedTypes = createSelector(\n  [selectSettingsNotificationsShows],\n  (shows) =>\n    Object.entries(shows)\n      .filter(([_type, enabled]) => !enabled)\n      .map(([type, _enabled]) => type),\n);\n\nexport const selectSettingsNotificationsQuickFilterShow = (state: RootState) =>\n  state.settings.getIn(['notifications', 'quickFilter', 'show']) as boolean;\n\nexport const selectSettingsNotificationsQuickFilterActive = (\n  state: RootState,\n) => state.settings.getIn(['notifications', 'quickFilter', 'active']) as string;\n\nexport const selectSettingsNotificationsQuickFilterAdvanced = (\n  state: RootState,\n) =>\n  state.settings.getIn(['notifications', 'quickFilter', 'advanced']) as boolean;\n\nexport const selectSettingsNotificationsShowUnread = (state: RootState) =>\n  state.settings.getIn(['notifications', 'showUnread']) as boolean;\n\nexport const selectNeedsNotificationPermission = (state: RootState) =>\n  (state.settings.getIn(['notifications', 'alerts']).includes(true) &&\n    state.notifications.get('browserSupport') &&\n    state.notifications.get('browserPermission') === 'default' &&\n    !state.settings.getIn([\n      'notifications',\n      'dismissPermissionBanner',\n    ])) as boolean;\n\nexport const selectSettingsNotificationsMinimizeFilteredBanner = (\n  state: RootState,\n) =>\n  state.settings.getIn(['notifications', 'minimizeFilteredBanner']) as boolean;\n\nexport const selectSettingsNotificationsGroupFollows = (state: RootState) =>\n  state.settings.getIn(['notifications', 'group', 'follow']) as boolean;\n\n/* eslint-enable @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access */\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  apiClearNotifications,\n  apiFetchNotificationGroups,\n} from 'mastodon/api/notifications';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\nimport type {\n  ApiNotificationGroupJSON,\n  ApiNotificationJSON,\n  NotificationType,\n} from 'mastodon/api_types/notifications';\nimport { allNotificationTypes } from 'mastodon/api_types/notifications';\nimport type { ApiStatusJSON } from 'mastodon/api_types/statuses';\nimport { usePendingItems } from 'mastodon/initial_state';\nimport type { NotificationGap } from 'mastodon/reducers/notification_groups';\nimport {\n  selectSettingsNotificationsExcludedTypes,\n  selectSettingsNotificationsGroupFollows,\n  selectSettingsNotificationsQuickFilterActive,\n  selectSettingsNotificationsShows,\n} from 'mastodon/selectors/settings';\nimport type { AppDispatch, RootState } from 'mastodon/store';\nimport {\n  createAppAsyncThunk,\n  createDataLoadingThunk,\n} from 'mastodon/store/typed_functions';\n\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\nimport { NOTIFICATIONS_FILTER_SET } from './notifications';\nimport { saveSettings } from './settings';\n\nfunction excludeAllTypesExcept(filter: string) {\n  return allNotificationTypes.filter((item) => item !== filter);\n}\n\nfunction getExcludedTypes(state: RootState) {\n  const activeFilter = selectSettingsNotificationsQuickFilterActive(state);\n\n  return activeFilter === 'all'\n    ? selectSettingsNotificationsExcludedTypes(state)\n    : excludeAllTypesExcept(activeFilter);\n}\n\nfunction dispatchAssociatedRecords(\n  dispatch: AppDispatch,\n  notifications: ApiNotificationGroupJSON[] | ApiNotificationJSON[],\n) {\n  const fetchedAccounts: ApiAccountJSON[] = [];\n  const fetchedStatuses: ApiStatusJSON[] = [];\n\n  notifications.forEach((notification) => {\n    if (notification.type === 'admin.report') {\n      fetchedAccounts.push(notification.report.target_account);\n    }\n\n    if (notification.type === 'moderation_warning') {\n      fetchedAccounts.push(notification.moderation_warning.target_account);\n    }\n\n    if ('status' in notification && notification.status) {\n      fetchedStatuses.push(notification.status);\n    }\n  });\n\n  if (fetchedAccounts.length > 0)\n    dispatch(importFetchedAccounts(fetchedAccounts));\n\n  if (fetchedStatuses.length > 0)\n    dispatch(importFetchedStatuses(fetchedStatuses));\n}\n\nfunction selectNotificationGroupedTypes(state: RootState) {\n  const types: NotificationType[] = ['favourite', 'reblog'];\n\n  if (selectSettingsNotificationsGroupFollows(state)) types.push('follow');\n\n  return types;\n}\n\nexport const fetchNotifications = createDataLoadingThunk(\n  'notificationGroups/fetch',\n  async (_params, { getState }) =>\n    apiFetchNotificationGroups({\n      grouped_types: selectNotificationGroupedTypes(getState()),\n      exclude_types: getExcludedTypes(getState()),\n    }),\n  ({ notifications, accounts, statuses }, { dispatch }) => {\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importFetchedStatuses(statuses));\n    dispatchAssociatedRecords(dispatch, notifications);\n    const payload: (ApiNotificationGroupJSON | NotificationGap)[] =\n      notifications;\n\n    // TODO: might be worth not using gaps for that…\n    // if (nextLink) payload.push({ type: 'gap', loadUrl: nextLink.uri });\n    if (notifications.length > 1)\n      payload.push({ type: 'gap', maxId: notifications.at(-1)?.page_min_id });\n\n    return payload;\n    // dispatch(submitMarkers());\n  },\n);\n\nexport const fetchNotificationsGap = createDataLoadingThunk(\n  'notificationGroups/fetchGap',\n  async (params: { gap: NotificationGap }, { getState }) =>\n    apiFetchNotificationGroups({\n      grouped_types: selectNotificationGroupedTypes(getState()),\n      max_id: params.gap.maxId,\n      exclude_types: getExcludedTypes(getState()),\n    }),\n  ({ notifications, accounts, statuses }, { dispatch }) => {\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importFetchedStatuses(statuses));\n    dispatchAssociatedRecords(dispatch, notifications);\n\n    return { notifications };\n  },\n);\n\nexport const pollRecentNotifications = createDataLoadingThunk(\n  'notificationGroups/pollRecentNotifications',\n  async (_params, { getState }) => {\n    return apiFetchNotificationGroups({\n      grouped_types: selectNotificationGroupedTypes(getState()),\n      max_id: undefined,\n      exclude_types: getExcludedTypes(getState()),\n      // In slow mode, we don't want to include notifications that duplicate the already-displayed ones\n      since_id: usePendingItems\n        ? getState().notificationGroups.groups.find(\n            (group) => group.type !== 'gap',\n          )?.page_max_id\n        : undefined,\n    });\n  },\n  ({ notifications, accounts, statuses }, { dispatch }) => {\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importFetchedStatuses(statuses));\n    dispatchAssociatedRecords(dispatch, notifications);\n\n    return { notifications };\n  },\n  {\n    useLoadingBar: false,\n  },\n);\n\nexport const processNewNotificationForGroups = createAppAsyncThunk(\n  'notificationGroups/processNew',\n  (notification: ApiNotificationJSON, { dispatch, getState }) => {\n    const state = getState();\n    const activeFilter = selectSettingsNotificationsQuickFilterActive(state);\n    const notificationShows = selectSettingsNotificationsShows(state);\n\n    const showInColumn =\n      activeFilter === 'all'\n        ? notificationShows[notification.type] !== false\n        : activeFilter === notification.type;\n\n    if (!showInColumn) return;\n\n    if (\n      (notification.type === 'mention' || notification.type === 'update') &&\n      notification.status?.filtered\n    ) {\n      const filters = notification.status.filtered.filter((result) =>\n        result.filter.context.includes('notifications'),\n      );\n\n      if (filters.some((result) => result.filter.filter_action === 'hide')) {\n        return;\n      }\n    }\n\n    dispatchAssociatedRecords(dispatch, [notification]);\n\n    return {\n      notification,\n      groupedTypes: selectNotificationGroupedTypes(state),\n    };\n  },\n);\n\nexport const loadPending = createAction('notificationGroups/loadPending');\n\nexport const updateScrollPosition = createAppAsyncThunk(\n  'notificationGroups/updateScrollPosition',\n  ({ top }: { top: boolean }, { dispatch, getState }) => {\n    if (\n      top &&\n      getState().notificationGroups.mergedNotifications === 'needs-reload'\n    ) {\n      void dispatch(fetchNotifications());\n    }\n\n    return { top };\n  },\n);\n\nexport const setNotificationsFilter = createAppAsyncThunk(\n  'notifications/filter/set',\n  ({ filterType }: { filterType: string }, { dispatch }) => {\n    dispatch({\n      type: NOTIFICATIONS_FILTER_SET,\n      path: ['notifications', 'quickFilter', 'active'],\n      value: filterType,\n    });\n    void dispatch(fetchNotifications());\n    dispatch(saveSettings());\n  },\n);\n\nexport const clearNotifications = createDataLoadingThunk(\n  'notifications/clear',\n  () => apiClearNotifications(),\n);\n\nexport const markNotificationsAsRead = createAction(\n  'notificationGroups/markAsRead',\n);\n\nexport const mountNotifications = createAppAsyncThunk(\n  'notificationGroups/mount',\n  (_, { dispatch, getState }) => {\n    const state = getState();\n\n    if (\n      state.notificationGroups.mounted === 0 &&\n      state.notificationGroups.mergedNotifications === 'needs-reload'\n    ) {\n      void dispatch(fetchNotifications());\n    }\n  },\n);\n\nexport const unmountNotifications = createAction('notificationGroups/unmount');\n\nexport const refreshStaleNotificationGroups = createAppAsyncThunk<{\n  deferredRefresh: boolean;\n}>('notificationGroups/refreshStale', (_, { dispatch, getState }) => {\n  const state = getState();\n\n  if (\n    state.notificationGroups.scrolledToTop ||\n    !state.notificationGroups.mounted\n  ) {\n    void dispatch(fetchNotifications());\n    return { deferredRefresh: false };\n  }\n\n  return { deferredRefresh: true };\n});\n","import { apiRequestGet } from 'mastodon/api';\nimport type { ApiContextJSON } from 'mastodon/api_types/statuses';\n\nexport const apiGetContext = (statusId: string) =>\n  apiRequestGet<ApiContextJSON>(`v1/statuses/${statusId}/context`);\n","import { apiGetContext } from 'mastodon/api/statuses';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const fetchContext = createDataLoadingThunk(\n  'status/context',\n  ({ statusId }: { statusId: string }) => apiGetContext(statusId),\n  (context, { dispatch }) => {\n    const statuses = context.ancestors.concat(context.descendants);\n\n    dispatch(importFetchedStatuses(statuses));\n\n    return {\n      context,\n    };\n  },\n);\n","import { browserHistory } from 'mastodon/components/router';\n\nimport api from '../api';\n\nimport { ensureComposeIsVisible, setComposeToStatus } from './compose';\nimport { importFetchedStatus, importFetchedStatuses, importFetchedAccount } from './importer';\nimport { fetchContext } from './statuses_typed';\nimport { deleteFromTimelines } from './timelines';\n\nexport * from './statuses_typed';\n\nexport const STATUS_FETCH_REQUEST = 'STATUS_FETCH_REQUEST';\nexport const STATUS_FETCH_SUCCESS = 'STATUS_FETCH_SUCCESS';\nexport const STATUS_FETCH_FAIL    = 'STATUS_FETCH_FAIL';\n\nexport const STATUS_DELETE_REQUEST = 'STATUS_DELETE_REQUEST';\nexport const STATUS_DELETE_SUCCESS = 'STATUS_DELETE_SUCCESS';\nexport const STATUS_DELETE_FAIL    = 'STATUS_DELETE_FAIL';\n\nexport const STATUS_MUTE_REQUEST = 'STATUS_MUTE_REQUEST';\nexport const STATUS_MUTE_SUCCESS = 'STATUS_MUTE_SUCCESS';\nexport const STATUS_MUTE_FAIL    = 'STATUS_MUTE_FAIL';\n\nexport const STATUS_UNMUTE_REQUEST = 'STATUS_UNMUTE_REQUEST';\nexport const STATUS_UNMUTE_SUCCESS = 'STATUS_UNMUTE_SUCCESS';\nexport const STATUS_UNMUTE_FAIL    = 'STATUS_UNMUTE_FAIL';\n\nexport const STATUS_REVEAL   = 'STATUS_REVEAL';\nexport const STATUS_HIDE     = 'STATUS_HIDE';\nexport const STATUS_COLLAPSE = 'STATUS_COLLAPSE';\n\nexport const REDRAFT = 'REDRAFT';\n\nexport const STATUS_FETCH_SOURCE_REQUEST = 'STATUS_FETCH_SOURCE_REQUEST';\nexport const STATUS_FETCH_SOURCE_SUCCESS = 'STATUS_FETCH_SOURCE_SUCCESS';\nexport const STATUS_FETCH_SOURCE_FAIL    = 'STATUS_FETCH_SOURCE_FAIL';\n\nexport const STATUS_TRANSLATE_REQUEST = 'STATUS_TRANSLATE_REQUEST';\nexport const STATUS_TRANSLATE_SUCCESS = 'STATUS_TRANSLATE_SUCCESS';\nexport const STATUS_TRANSLATE_FAIL    = 'STATUS_TRANSLATE_FAIL';\nexport const STATUS_TRANSLATE_UNDO    = 'STATUS_TRANSLATE_UNDO';\n\nexport function fetchStatusRequest(id, skipLoading) {\n  return {\n    type: STATUS_FETCH_REQUEST,\n    id,\n    skipLoading,\n  };\n}\n\nexport function fetchStatus(id, forceFetch = false, alsoFetchContext = true) {\n  return (dispatch, getState) => {\n    const skipLoading = !forceFetch && getState().getIn(['statuses', id], null) !== null;\n\n    if (alsoFetchContext) {\n      dispatch(fetchContext({ statusId: id }));\n    }\n\n    if (skipLoading) {\n      return;\n    }\n\n    dispatch(fetchStatusRequest(id, skipLoading));\n\n    api().get(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(fetchStatusSuccess(skipLoading));\n    }).catch(error => {\n      dispatch(fetchStatusFail(id, error, skipLoading));\n    });\n  };\n}\n\nexport function fetchStatusSuccess(skipLoading) {\n  return {\n    type: STATUS_FETCH_SUCCESS,\n    skipLoading,\n  };\n}\n\nexport function fetchStatusFail(id, error, skipLoading) {\n  return {\n    type: STATUS_FETCH_FAIL,\n    id,\n    error,\n    skipLoading,\n    skipAlert: true,\n  };\n}\n\nexport function redraft(status, raw_text) {\n  return {\n    type: REDRAFT,\n    status,\n    raw_text,\n  };\n}\n\nexport const editStatus = (id) => (dispatch, getState) => {\n  let status = getState().getIn(['statuses', id]);\n\n  if (status.get('poll')) {\n    status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n  }\n\n  dispatch(fetchStatusSourceRequest());\n\n  api().get(`/api/v1/statuses/${id}/source`).then(response => {\n    dispatch(fetchStatusSourceSuccess());\n    ensureComposeIsVisible(getState);\n    dispatch(setComposeToStatus(status, response.data.text, response.data.spoiler_text));\n  }).catch(error => {\n    dispatch(fetchStatusSourceFail(error));\n  });\n};\n\nexport const fetchStatusSourceRequest = () => ({\n  type: STATUS_FETCH_SOURCE_REQUEST,\n});\n\nexport const fetchStatusSourceSuccess = () => ({\n  type: STATUS_FETCH_SOURCE_SUCCESS,\n});\n\nexport const fetchStatusSourceFail = error => ({\n  type: STATUS_FETCH_SOURCE_FAIL,\n  error,\n});\n\nexport function deleteStatus(id, withRedraft = false) {\n  return (dispatch, getState) => {\n    let status = getState().getIn(['statuses', id]);\n\n    if (status.get('poll')) {\n      status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n    }\n\n    dispatch(deleteStatusRequest(id));\n\n    api().delete(`/api/v1/statuses/${id}`, { params: { delete_media: !withRedraft } }).then(response => {\n      dispatch(deleteStatusSuccess(id));\n      dispatch(deleteFromTimelines(id));\n      dispatch(importFetchedAccount(response.data.account));\n\n      if (withRedraft) {\n        dispatch(redraft(status, response.data.text));\n        ensureComposeIsVisible(getState);\n      }\n    }).catch(error => {\n      dispatch(deleteStatusFail(id, error));\n    });\n  };\n}\n\nexport function deleteStatusRequest(id) {\n  return {\n    type: STATUS_DELETE_REQUEST,\n    id: id,\n  };\n}\n\nexport function deleteStatusSuccess(id) {\n  return {\n    type: STATUS_DELETE_SUCCESS,\n    id: id,\n  };\n}\n\nexport function deleteStatusFail(id, error) {\n  return {\n    type: STATUS_DELETE_FAIL,\n    id: id,\n    error: error,\n  };\n}\n\nexport const updateStatus = status => dispatch =>\n  dispatch(importFetchedStatus(status));\n\nexport function muteStatus(id) {\n  return (dispatch) => {\n    dispatch(muteStatusRequest(id));\n\n    api().post(`/api/v1/statuses/${id}/mute`).then(() => {\n      dispatch(muteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(muteStatusFail(id, error));\n    });\n  };\n}\n\nexport function muteStatusRequest(id) {\n  return {\n    type: STATUS_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteStatusSuccess(id) {\n  return {\n    type: STATUS_MUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function muteStatusFail(id, error) {\n  return {\n    type: STATUS_MUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function unmuteStatus(id) {\n  return (dispatch) => {\n    dispatch(unmuteStatusRequest(id));\n\n    api().post(`/api/v1/statuses/${id}/unmute`).then(() => {\n      dispatch(unmuteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(unmuteStatusFail(id, error));\n    });\n  };\n}\n\nexport function unmuteStatusRequest(id) {\n  return {\n    type: STATUS_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteStatusSuccess(id) {\n  return {\n    type: STATUS_UNMUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function unmuteStatusFail(id, error) {\n  return {\n    type: STATUS_UNMUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function hideStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_HIDE,\n    ids,\n  };\n}\n\nexport function revealStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_REVEAL,\n    ids,\n  };\n}\n\nexport function toggleStatusSpoilers(statusId) {\n  return (dispatch, getState) => {\n    const status = getState().statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    if (status.get('hidden')) {\n      dispatch(revealStatus(statusId));\n    } else {\n      dispatch(hideStatus(statusId));\n    }\n  };\n}\n\nexport function toggleStatusCollapse(id, isCollapsed) {\n  return {\n    type: STATUS_COLLAPSE,\n    id,\n    isCollapsed,\n  };\n}\n\nexport const translateStatus = id => (dispatch) => {\n  dispatch(translateStatusRequest(id));\n\n  api().post(`/api/v1/statuses/${id}/translate`).then(response => {\n    dispatch(translateStatusSuccess(id, response.data));\n  }).catch(error => {\n    dispatch(translateStatusFail(id, error));\n  });\n};\n\nexport const translateStatusRequest = id => ({\n  type: STATUS_TRANSLATE_REQUEST,\n  id,\n});\n\nexport const translateStatusSuccess = (id, translation) => ({\n  type: STATUS_TRANSLATE_SUCCESS,\n  id,\n  translation,\n});\n\nexport const translateStatusFail = (id, error) => ({\n  type: STATUS_TRANSLATE_FAIL,\n  id,\n  error,\n});\n\nexport const undoStatusTranslation = (id, pollId) => ({\n  type: STATUS_TRANSLATE_UNDO,\n  id,\n  pollId,\n});\n\nexport const navigateToStatus = (statusId) => {\n  return (_dispatch, getState) => {\n    const state = getState();\n    const accountId = state.statuses.getIn([statusId, 'account']);\n    const acct = state.accounts.getIn([accountId, 'acct']);\n\n    if (acct) {\n      browserHistory.push(`/@${acct}/${statusId}`);\n    }\n  };\n};\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { LayoutType } from '../is_mobile';\n\nexport const focusApp = createAction('APP_FOCUS');\nexport const unfocusApp = createAction('APP_UNFOCUS');\n\ninterface ChangeLayoutPayload {\n  layout: LayoutType;\n}\nexport const changeLayout =\n  createAction<ChangeLayoutPayload>('APP_LAYOUT_CHANGE');\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\nexport { polyfill };\n","\"use strict\";var _e=Object.create;var Y=Object.defineProperty;var Ie=Object.getOwnPropertyDescriptor;var Ve=Object.getOwnPropertyNames;var We=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var qe=(e,t)=>{for(var o in t)Y(e,o,{get:t[o],enumerable:!0})},le=(e,t,o,n)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let r of Ve(t))!Ue.call(e,r)&&r!==o&&Y(e,r,{get:()=>t[r],enumerable:!(n=Ie(t,r))||n.enumerable});return e};var Le=(e,t,o)=>(o=e!=null?_e(We(e)):{},le(t||!e||!e.__esModule?Y(o,\"default\",{value:e,enumerable:!0}):o,e)),je=e=>le(Y({},\"__esModule\",{value:!0}),e);var kt={};qe(kt,{Provider:()=>Ee,ReactReduxContext:()=>f,batch:()=>Et,connect:()=>Re,createDispatchHook:()=>pe,createSelectorHook:()=>ae,createStoreHook:()=>j,shallowEqual:()=>R,useDispatch:()=>ke,useSelector:()=>Ae,useStore:()=>G});module.exports=je(kt);var p=Le(require(\"react\"));var $e=p.version.startsWith(\"19\"),Ye=Symbol.for($e?\"react.transitional.element\":\"react.element\"),He=Symbol.for(\"react.portal\"),Be=Symbol.for(\"react.fragment\"),ze=Symbol.for(\"react.strict_mode\"),Ke=Symbol.for(\"react.profiler\"),Ge=Symbol.for(\"react.consumer\"),Je=Symbol.for(\"react.context\"),Te=Symbol.for(\"react.forward_ref\"),Xe=Symbol.for(\"react.suspense\"),Ze=Symbol.for(\"react.suspense_list\"),re=Symbol.for(\"react.memo\"),Qe=Symbol.for(\"react.lazy\");var fe=Te,Se=re;function et(e){if(typeof e==\"object\"&&e!==null){let{$$typeof:t}=e;switch(t){case Ye:switch(e=e.type,e){case Be:case Ke:case ze:case Xe:case Ze:return e;default:switch(e=e&&e.$$typeof,e){case Je:case Te:case Qe:case re:return e;case Ge:return e;default:return t}}case He:return t}}}function ye(e){return et(e)===re}function tt(e,t,o,n,{areStatesEqual:r,areOwnPropsEqual:s,areStatePropsEqual:i}){let u=!1,a,c,d,P,l;function x(S,m){return a=S,c=m,d=e(a,c),P=t(n,c),l=o(d,P,c),u=!0,l}function y(){return d=e(a,c),t.dependsOnOwnProps&&(P=t(n,c)),l=o(d,P,c),l}function M(){return e.dependsOnOwnProps&&(d=e(a,c)),t.dependsOnOwnProps&&(P=t(n,c)),l=o(d,P,c),l}function T(){let S=e(a,c),m=!i(S,d);return d=S,m&&(l=o(d,P,c)),l}function w(S,m){let C=!s(m,c),v=!r(S,a,m,c);return a=S,c=m,C&&v?y():C?M():v?T():l}return function(m,C){return u?w(m,C):x(m,C)}}function ne(e,{initMapStateToProps:t,initMapDispatchToProps:o,initMergeProps:n,...r}){let s=t(e,r),i=o(e,r),u=n(e,r);return tt(s,i,u,e,r)}function se(e,t){let o={};for(let n in e){let r=e[n];typeof r==\"function\"&&(o[n]=(...s)=>t(r(...s)))}return o}function U(e){return function(o){let n=e(o);function r(){return n}return r.dependsOnOwnProps=!1,r}}function me(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function H(e,t){return function(n,{displayName:r}){let s=function(u,a){return s.dependsOnOwnProps?s.mapToProps(u,a):s.mapToProps(u,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(u,a){s.mapToProps=e,s.dependsOnOwnProps=me(e);let c=s(u,a);return typeof c==\"function\"&&(s.mapToProps=c,s.dependsOnOwnProps=me(c),c=s(u,a)),c},s}}function F(e,t){return(o,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function he(e){return e&&typeof e==\"object\"?U(t=>se(e,t)):e?typeof e==\"function\"?H(e,\"mapDispatchToProps\"):F(e,\"mapDispatchToProps\"):U(t=>({dispatch:t}))}function we(e){return e?typeof e==\"function\"?H(e,\"mapStateToProps\"):F(e,\"mapStateToProps\"):U(()=>({}))}function ot(e,t,o){return{...o,...e,...t}}function rt(e){return function(o,{displayName:n,areMergedPropsEqual:r}){let s=!1,i;return function(a,c,d){let P=e(a,c,d);return s?r(P,i)||(i=P):(s=!0,i=P),i}}}function xe(e){return e?typeof e==\"function\"?rt(e):F(e,\"mergeProps\"):()=>ot}function B(e){e()}function nt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){B(()=>{let o=e;for(;o;)o.callback(),o=o.next})},get(){let o=[],n=e;for(;n;)o.push(n),n=n.next;return o},subscribe(o){let n=!0,r=t={callback:o,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!n||e===null||(n=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var Ce={notify(){},get:()=>[]};function z(e,t){let o,n=Ce,r=0,s=!1;function i(M){d();let T=n.subscribe(M),w=!1;return()=>{w||(w=!0,T(),P())}}function u(){n.notify()}function a(){y.onStateChange&&y.onStateChange()}function c(){return s}function d(){r++,o||(o=t?t.addNestedSub(a):e.subscribe(a),n=nt())}function P(){r--,o&&r===0&&(o(),o=void 0,n.clear(),n=Ce)}function l(){s||(s=!0,d())}function x(){s&&(s=!1,P())}let y={addNestedSub:i,notifyNestedSubs:u,handleChangeWrapper:a,isSubscribed:c,trySubscribe:l,tryUnsubscribe:x,getListeners:()=>n};return y}var st=()=>typeof window<\"u\"&&typeof window.document<\"u\"&&typeof window.document.createElement<\"u\",pt=st(),at=()=>typeof navigator<\"u\"&&navigator.product===\"ReactNative\",ct=at(),it=()=>pt||ct?p.useLayoutEffect:p.useEffect,A=it();function Oe(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function R(e,t){if(Oe(e,t))return!0;if(typeof e!=\"object\"||e===null||typeof t!=\"object\"||t===null)return!1;let o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(let r=0;r<o.length;r++)if(!Object.prototype.hasOwnProperty.call(t,o[r])||!Oe(e[o[r]],t[o[r]]))return!1;return!0}var ut={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Pt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dt={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Me={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lt={[fe]:dt,[Se]:Me};function De(e){return ye(e)?Me:lt[e.$$typeof]||ut}var Tt=Object.defineProperty,ft=Object.getOwnPropertyNames,be=Object.getOwnPropertySymbols,St=Object.getOwnPropertyDescriptor,yt=Object.getPrototypeOf,ge=Object.prototype;function q(e,t){if(typeof t!=\"string\"){if(ge){let s=yt(t);s&&s!==ge&&q(e,s)}let o=ft(t);be&&(o=o.concat(be(t)));let n=De(e),r=De(t);for(let s=0;s<o.length;++s){let i=o[s];if(!Pt[i]&&!(r&&r[i])&&!(n&&n[i])){let u=St(t,i);try{Tt(e,i,u)}catch{}}}}return e}var mt=Symbol.for(\"react-redux-context\"),ht=typeof globalThis<\"u\"?globalThis:{};function wt(){if(!p.createContext)return{};let e=ht[mt]??=new Map,t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var f=wt();var xt=[null,null];function Ct(e,t,o){A(()=>e(...t),o)}function Ot(e,t,o,n,r,s){e.current=n,o.current=!1,r.current&&(r.current=null,s())}function Dt(e,t,o,n,r,s,i,u,a,c,d){if(!e)return()=>{};let P=!1,l=null,x=()=>{if(P||!u.current)return;let M=t.getState(),T,w;try{T=n(M,r.current)}catch(S){w=S,l=S}w||(l=null),T===s.current?i.current||c():(s.current=T,a.current=T,i.current=!0,d())};return o.onStateChange=x,o.trySubscribe(),x(),()=>{if(P=!0,o.tryUnsubscribe(),o.onStateChange=null,l)throw l}}function bt(e,t){return e===t}function gt(e,t,o,{pure:n,areStatesEqual:r=bt,areOwnPropsEqual:s=R,areStatePropsEqual:i=R,areMergedPropsEqual:u=R,forwardRef:a=!1,context:c=f}={}){let d=c,P=we(e),l=he(t),x=xe(o),y=!!e;return T=>{let w=T.displayName||T.name||\"Component\",S=`Connect(${w})`,m={shouldHandleStateChanges:y,displayName:S,wrappedComponentName:w,WrappedComponent:T,initMapStateToProps:P,initMapDispatchToProps:l,initMergeProps:x,areStatesEqual:r,areStatePropsEqual:i,areOwnPropsEqual:s,areMergedPropsEqual:u};function C(O){let[E,J,b]=p.useMemo(()=>{let{reactReduxForwardedRef:h,...k}=O;return[O.context,h,k]},[O]),_=p.useMemo(()=>{let h=d;return E?.Consumer,h},[E,d]),D=p.useContext(_),I=!!O.store&&!!O.store.getState&&!!O.store.dispatch,ve=!!D&&!!D.store,g=I?O.store:D.store,ce=ve?D.getServerState:g.getState,X=p.useMemo(()=>ne(g.dispatch,m),[g]),[V,ie]=p.useMemo(()=>{if(!y)return xt;let h=z(g,I?void 0:D.subscription),k=h.notifyNestedSubs.bind(h);return[h,k]},[g,I,D]),ue=p.useMemo(()=>I?D:{...D,subscription:V},[I,D,V]),Z=p.useRef(void 0),Q=p.useRef(b),W=p.useRef(void 0),Pe=p.useRef(!1),ee=p.useRef(!1),te=p.useRef(void 0);A(()=>(ee.current=!0,()=>{ee.current=!1}),[]);let de=p.useMemo(()=>()=>W.current&&b===Q.current?W.current:X(g.getState(),b),[g,b]),Ne=p.useMemo(()=>k=>V?Dt(y,g,V,X,Q,Z,Pe,ee,W,ie,k):()=>{},[V]);Ct(Ot,[Q,Z,Pe,b,W,ie]);let $;try{$=p.useSyncExternalStore(Ne,de,ce?()=>X(ce(),b):de)}catch(h){throw te.current&&(h.message+=`\nThe error may be correlated with this previous error:\n${te.current.stack}\n\n`),h}A(()=>{te.current=void 0,W.current=void 0,Z.current=$});let oe=p.useMemo(()=>p.createElement(T,{...$,ref:J}),[J,T,$]);return p.useMemo(()=>y?p.createElement(_.Provider,{value:ue},oe):oe,[_,oe,ue])}let N=p.memo(C);if(N.WrappedComponent=T,N.displayName=C.displayName=S,a){let E=p.forwardRef(function(b,_){return p.createElement(N,{...b,reactReduxForwardedRef:_})});return E.displayName=S,E.WrappedComponent=T,q(E,T)}return q(N,T)}}var Re=gt;function Mt(e){let{children:t,context:o,serverState:n,store:r}=e,s=p.useMemo(()=>{let a=z(r);return{store:r,subscription:a,getServerState:n?()=>n:void 0}},[r,n]),i=p.useMemo(()=>r.getState(),[r]);return A(()=>{let{subscription:a}=s;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),i!==r.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[s,i]),p.createElement((o||f).Provider,{value:s},t)}var Ee=Mt;function L(e=f){return function(){return p.useContext(e)}}var K=L();function j(e=f){let t=e===f?K:L(e),o=()=>{let{store:n}=t();return n};return Object.assign(o,{withTypes:()=>o}),o}var G=j();function pe(e=f){let t=e===f?G:j(e),o=()=>t().dispatch;return Object.assign(o,{withTypes:()=>o}),o}var ke=pe();var Fe=require(\"use-sync-external-store/with-selector.js\");var Rt=(e,t)=>e===t;function ae(e=f){let t=e===f?K:L(e),o=(n,r={})=>{let{equalityFn:s=Rt}=typeof r==\"function\"?{equalityFn:r}:r,i=t(),{store:u,subscription:a,getServerState:c}=i,d=p.useRef(!0),P=p.useCallback({[n.name](x){let y=n(x);if(0){if((m===\"always\"||m===\"once\"&&d.current)&&!s(y,C))try{}catch(N){}if((S===\"always\"||S===\"once\"&&d.current)&&y===x)try{}catch(v){}}return y}}[n.name],[n]),l=(0,Fe.useSyncExternalStoreWithSelector)(a.addNestedSub,u.getState,c||u.getState,P,s);return p.useDebugValue(l),l};return Object.assign(o,{withTypes:()=>o}),o}var Ae=ae();var Et=B;0&&(module.exports={Provider,ReactReduxContext,batch,connect,createDispatchHook,createSelectorHook,createStoreHook,shallowEqual,useDispatch,useSelector,useStore});\n//# sourceMappingURL=react-redux.production.min.cjs.map","'use strict'\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./react-redux.production.min.cjs')\n} else {\n  module.exports = require('./react-redux.development.cjs')\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showLoading = showLoading;\nexports.hideLoading = hideLoading;\nexports.resetLoading = resetLoading;\nexports.loadingBarReducer = loadingBarReducer;\nexports.DEFAULT_SCOPE = exports.RESET = exports.HIDE = exports.SHOW = void 0;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar SHOW = 'loading-bar/SHOW';\nexports.SHOW = SHOW;\nvar HIDE = 'loading-bar/HIDE';\nexports.HIDE = HIDE;\nvar RESET = 'loading-bar/RESET';\nexports.RESET = RESET;\nvar DEFAULT_SCOPE = 'default';\nexports.DEFAULT_SCOPE = DEFAULT_SCOPE;\n\nfunction showLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: SHOW,\n    payload: {\n      scope: scope\n    }\n  };\n}\n\nfunction hideLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: HIDE,\n    payload: {\n      scope: scope\n    }\n  };\n}\n\nfunction resetLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: RESET,\n    payload: {\n      scope: scope\n    }\n  };\n}\n\nfunction loadingBarReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = action.payload || {},\n      _ref$scope = _ref.scope,\n      scope = _ref$scope === void 0 ? DEFAULT_SCOPE : _ref$scope;\n\n  switch (action.type) {\n    case SHOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, (state[scope] || 0) + 1));\n\n    case HIDE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, Math.max(0, (state[scope] || 1) - 1)));\n\n    case RESET:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, 0));\n\n    default:\n      return state;\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.LoadingBar = exports.TERMINATING_ANIMATION_DURATION = exports.ANIMATION_DURATION = exports.PROGRESS_INCREASE = exports.MAX_PROGRESS = exports.UPDATE_TIME = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar UPDATE_TIME = 400;\nexports.UPDATE_TIME = UPDATE_TIME;\nvar MAX_PROGRESS = 99;\nexports.MAX_PROGRESS = MAX_PROGRESS;\nvar PROGRESS_INCREASE = 20;\nexports.PROGRESS_INCREASE = PROGRESS_INCREASE;\nvar ANIMATION_DURATION = UPDATE_TIME * 2;\nexports.ANIMATION_DURATION = ANIMATION_DURATION;\nvar TERMINATING_ANIMATION_DURATION = UPDATE_TIME / 2;\nexports.TERMINATING_ANIMATION_DURATION = TERMINATING_ANIMATION_DURATION;\nvar initialState = {\n  percent: 0,\n  status: 'hidden'\n};\n\nvar LoadingBar = /*#__PURE__*/function (_Component) {\n  _inherits(LoadingBar, _Component);\n\n  var _super = _createSuper(LoadingBar);\n\n  _createClass(LoadingBar, null, [{\n    key: \"shouldStart\",\n    value: function shouldStart(props, state) {\n      return props.loading > 0 && ['hidden', 'stopping'].indexOf(state.status) >= 0;\n    }\n  }, {\n    key: \"shouldStop\",\n    value: function shouldStop(props, state) {\n      return props.loading === 0 && ['starting', 'running'].indexOf(state.status) >= 0;\n    }\n  }, {\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (LoadingBar.shouldStart(nextProps, prevState)) {\n        return {\n          status: 'starting'\n        };\n      }\n\n      if (LoadingBar.shouldStop(nextProps, prevState)) {\n        return {\n          status: 'stopping'\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  function LoadingBar(props) {\n    var _this;\n\n    _classCallCheck(this, LoadingBar);\n\n    _this = _super.call(this, props);\n\n    _this.reset = function () {\n      _this.terminatingAnimationTimeoutId = null;\n\n      _this.setState(initialState);\n    };\n\n    _this.newPercent = function (percent, progressIncrease) {\n      // Use cosine as a smoothing function\n      // It could be any function to slow down progress near the ending 100%\n      var smoothedProgressIncrease = progressIncrease * Math.cos(percent * (Math.PI / 2 / 100));\n      return percent + smoothedProgressIncrease;\n    };\n\n    _this.simulateProgress = function () {\n      _this.setState(function (prevState, _ref) {\n        var maxProgress = _ref.maxProgress,\n            progressIncrease = _ref.progressIncrease;\n        var percent = prevState.percent;\n\n        var newPercent = _this.newPercent(percent, progressIncrease);\n\n        if (newPercent <= maxProgress) {\n          percent = newPercent;\n        }\n\n        return {\n          percent: percent\n        };\n      });\n    };\n\n    _this.state = _objectSpread({}, initialState);\n    return _this;\n  }\n\n  _createClass(LoadingBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var status = this.state.status;\n\n      if (status === 'starting') {\n        this.start();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var status = this.state.status;\n\n      if (prevState.status !== status) {\n        if (status === 'starting') {\n          this.start();\n        }\n\n        if (status === 'stopping') {\n          this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.progressIntervalId);\n      clearTimeout(this.terminatingAnimationTimeoutId);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      // There could be previous termination animation going, so we need to\n      // cancel it and forcefully reset the Loading Bar before starting\n      // the progress simulation from 0\n      if (this.terminatingAnimationTimeoutId) {\n        clearTimeout(this.terminatingAnimationTimeoutId);\n        this.reset();\n      }\n\n      var updateTime = this.props.updateTime;\n      this.progressIntervalId = setInterval(this.simulateProgress, updateTime);\n      this.setState({\n        status: 'running'\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var showFastActions = this.props.showFastActions;\n      clearInterval(this.progressIntervalId);\n      this.progressIntervalId = null;\n      var terminatingAnimationDuration = this.isShown() || showFastActions ? TERMINATING_ANIMATION_DURATION : 0;\n      this.terminatingAnimationTimeoutId = setTimeout(this.reset, terminatingAnimationDuration);\n      this.setState({\n        percent: 100\n      });\n    }\n  }, {\n    key: \"isShown\",\n    value: function isShown() {\n      var percent = this.state.percent;\n      return percent > 0 && percent <= 100;\n    }\n  }, {\n    key: \"buildStyle\",\n    value: function buildStyle() {\n      var _this$state = this.state,\n          status = _this$state.status,\n          percent = _this$state.percent;\n      var _this$props = this.props,\n          className = _this$props.className,\n          customStyle = _this$props.style;\n      var animationDuration = status === 'stopping' ? TERMINATING_ANIMATION_DURATION : ANIMATION_DURATION;\n      var style = {\n        width: \"\".concat(percent, \"%\"),\n        transition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        msTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        WebkitTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        MozTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        OTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        willChange: 'width, opacity'\n      }; // Use default styling if there's no CSS class applied\n\n      if (!className) {\n        style.height = '3px';\n        style.backgroundColor = 'red';\n        style.position = 'absolute';\n      }\n\n      if (this.isShown()) {\n        style.opacity = '1';\n      } else {\n        style.opacity = '0';\n      }\n\n      return _objectSpread(_objectSpread({}, style), customStyle);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var status = this.state.status;\n      var _this$props2 = this.props,\n          direction = _this$props2.direction,\n          className = _this$props2.className;\n\n      if (status === 'hidden') {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null);\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          direction: direction\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: this.buildStyle(),\n        className: className\n      }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          display: 'table',\n          clear: 'both'\n        }\n      }));\n    }\n  }]);\n\n  return LoadingBar;\n}(_react.Component);\n\nexports.LoadingBar = LoadingBar;\nLoadingBar.propTypes = {\n  className: _propTypes.string,\n  direction: _propTypes.string,\n  loading: _propTypes.number,\n  maxProgress: _propTypes.number,\n  progressIncrease: _propTypes.number,\n  scope: _propTypes.string,\n  showFastActions: _propTypes.bool,\n  style: _propTypes.object,\n  updateTime: _propTypes.number\n};\nLoadingBar.defaultProps = {\n  className: '',\n  direction: 'ltr',\n  loading: 0,\n  maxProgress: MAX_PROGRESS,\n  progressIncrease: PROGRESS_INCREASE,\n  scope: _loading_bar_ducks.DEFAULT_SCOPE,\n  showFastActions: false,\n  style: {},\n  updateTime: UPDATE_TIME\n};\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    loading: state.loadingBar[ownProps.scope || _loading_bar_ducks.DEFAULT_SCOPE]\n  };\n};\n\n(0, _reactLifecyclesCompat.polyfill)(LoadingBar);\nvar ConnectedLoadingBar = (0, _reactRedux.connect)(mapStateToProps)(LoadingBar);\nexports[\"default\"] = ConnectedLoadingBar;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = loadingBarMiddleware;\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar defaultTypeSuffixes = ['PENDING', 'FULFILLED', 'REJECTED'];\n\nfunction loadingBarMiddleware() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var promiseTypeSuffixes = config.promiseTypeSuffixes || defaultTypeSuffixes;\n  var scope = config.scope || _loading_bar_ducks.DEFAULT_SCOPE;\n  return function (_ref) {\n    var dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (action.type) {\n          var _promiseTypeSuffixes = _slicedToArray(promiseTypeSuffixes, 3),\n              PENDING = _promiseTypeSuffixes[0],\n              FULFILLED = _promiseTypeSuffixes[1],\n              REJECTED = _promiseTypeSuffixes[2];\n\n          var isPending = new RegExp(\"\".concat(PENDING, \"$\"), 'g');\n          var isFulfilled = new RegExp(\"\".concat(FULFILLED, \"$\"), 'g');\n          var isRejected = new RegExp(\"\".concat(REJECTED, \"$\"), 'g');\n          var actionScope = action.meta && action.meta.scope || action.scope || scope;\n\n          if (action.type.match(isPending)) {\n            dispatch((0, _loading_bar_ducks.showLoading)(actionScope));\n          } else if (action.type.match(isFulfilled) || action.type.match(isRejected)) {\n            dispatch((0, _loading_bar_ducks.hideLoading)(actionScope));\n          }\n        }\n\n        return next(action);\n      };\n    };\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _loading_bar = require(\"./loading_bar\");\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nvar mapImmutableStateToProps = function mapImmutableStateToProps(state, ownProps) {\n  return {\n    loading: state.get('loadingBar')[ownProps.scope || _loading_bar_ducks.DEFAULT_SCOPE]\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapImmutableStateToProps)(_loading_bar.LoadingBar);\n\nexports[\"default\"] = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"LoadingBar\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar.LoadingBar;\n  }\n});\nObject.defineProperty(exports, \"loadingBarMiddleware\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_middleware[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"DEFAULT_SCOPE\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.DEFAULT_SCOPE;\n  }\n});\nObject.defineProperty(exports, \"HIDE\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.HIDE;\n  }\n});\nObject.defineProperty(exports, \"hideLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.hideLoading;\n  }\n});\nObject.defineProperty(exports, \"loadingBarReducer\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.loadingBarReducer;\n  }\n});\nObject.defineProperty(exports, \"RESET\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.RESET;\n  }\n});\nObject.defineProperty(exports, \"resetLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.resetLoading;\n  }\n});\nObject.defineProperty(exports, \"SHOW\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.SHOW;\n  }\n});\nObject.defineProperty(exports, \"showLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.showLoading;\n  }\n});\nObject.defineProperty(exports, \"ImmutableLoadingBar\", {\n  enumerable: true,\n  get: function get() {\n    return _immutable[\"default\"];\n  }\n});\nexports[\"default\"] = void 0;\n\nvar _loading_bar = _interopRequireWildcard(require(\"./loading_bar\"));\n\nvar _loading_bar_middleware = _interopRequireDefault(require(\"./loading_bar_middleware\"));\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nvar _immutable = _interopRequireDefault(require(\"./immutable\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar _default = _loading_bar[\"default\"];\nexports[\"default\"] = _default;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (action) {\n  return action && action.type === '@@redux/INIT' ? 'initialState argument passed to createStore' : 'previous state received by the reducer';\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=getStateName.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _getStateName = require('./getStateName');\n\nvar _getStateName2 = _interopRequireDefault(_getStateName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (state, reducers, action) {\n  var reducerNames = Object.keys(reducers);\n\n  if (!reducerNames.length) {\n    return 'Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.';\n  }\n\n  var stateName = (0, _getStateName2.default)(action);\n\n  if (_immutable2.default.isImmutable ? !_immutable2.default.isImmutable(state) : !_immutable2.default.Iterable.isIterable(state)) {\n    return 'The ' + stateName + ' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: \"' + reducerNames.join('\", \"') + '\".';\n  }\n\n  var unexpectedStatePropertyNames = state.toSeq().keySeq().toArray().filter(function (name) {\n    return !reducers.hasOwnProperty(name);\n  });\n\n  if (unexpectedStatePropertyNames.length > 0) {\n    return 'Unexpected ' + (unexpectedStatePropertyNames.length === 1 ? 'property' : 'properties') + ' \"' + unexpectedStatePropertyNames.join('\", \"') + '\" found in ' + stateName + '. Expected to find one of the known reducer property names instead: \"' + reducerNames.join('\", \"') + '\". Unexpected properties will be ignored.';\n  }\n\n  return null;\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=getUnexpectedInvocationParameterMessage.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (nextState, reducerName, action) {\n  // eslint-disable-next-line no-undefined\n  if (nextState === undefined) {\n    throw new Error('Reducer \"' + reducerName + '\" returned undefined when handling \"' + action.type + '\" action. To ignore an action, you must explicitly return the previous state.');\n  }\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=validateNextState.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateNextState = exports.getUnexpectedInvocationParameterMessage = exports.getStateName = undefined;\n\nvar _getStateName2 = require('./getStateName');\n\nvar _getStateName3 = _interopRequireDefault(_getStateName2);\n\nvar _getUnexpectedInvocationParameterMessage2 = require('./getUnexpectedInvocationParameterMessage');\n\nvar _getUnexpectedInvocationParameterMessage3 = _interopRequireDefault(_getUnexpectedInvocationParameterMessage2);\n\nvar _validateNextState2 = require('./validateNextState');\n\nvar _validateNextState3 = _interopRequireDefault(_validateNextState2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.getStateName = _getStateName3.default;\nexports.getUnexpectedInvocationParameterMessage = _getUnexpectedInvocationParameterMessage3.default;\nexports.validateNextState = _validateNextState3.default;\n//# sourceMappingURL=index.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _utilities = require('./utilities');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (reducers) {\n  var getDefaultState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _immutable2.default.Map;\n\n  var reducerKeys = Object.keys(reducers);\n\n  // eslint-disable-next-line space-infix-ops\n  return function () {\n    var inputState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getDefaultState();\n    var action = arguments[1];\n\n    // eslint-disable-next-line no-process-env\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = (0, _utilities.getUnexpectedInvocationParameterMessage)(inputState, reducers, action);\n\n      if (warningMessage) {\n        // eslint-disable-next-line no-console\n        console.error(warningMessage);\n      }\n    }\n\n    return inputState.withMutations(function (temporaryState) {\n      reducerKeys.forEach(function (reducerName) {\n        var reducer = reducers[reducerName];\n        var currentDomainState = temporaryState.get(reducerName);\n        var nextDomainState = reducer(currentDomainState, action);\n\n        (0, _utilities.validateNextState)(nextDomainState, reducerName, action);\n\n        temporaryState.set(reducerName, nextDomainState);\n      });\n    });\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=combineReducers.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.combineReducers = undefined;\n\nvar _combineReducers2 = require('./combineReducers');\n\nvar _combineReducers3 = _interopRequireDefault(_combineReducers2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.combineReducers = _combineReducers3.default;\n//# sourceMappingURL=index.js.map","import type { RecordOf } from 'immutable';\nimport { List as ImmutableList, Record as ImmutableRecord } from 'immutable';\n\nimport escapeTextContentForBrowser from 'escape-html';\n\nimport type {\n  ApiAccountFieldJSON,\n  ApiAccountRoleJSON,\n  ApiAccountJSON,\n} from 'mastodon/api_types/accounts';\nimport emojify from 'mastodon/features/emoji/emoji';\nimport { unescapeHTML } from 'mastodon/utils/html';\n\nimport { CustomEmojiFactory, makeEmojiMap } from './custom_emoji';\nimport type { CustomEmoji, EmojiMap } from './custom_emoji';\n\n// AccountField\ninterface AccountFieldShape extends Required<ApiAccountFieldJSON> {\n  name_emojified: string;\n  value_emojified: string;\n  value_plain: string | null;\n}\n\ntype AccountField = RecordOf<AccountFieldShape>;\n\nconst AccountFieldFactory = ImmutableRecord<AccountFieldShape>({\n  name: '',\n  value: '',\n  verified_at: null,\n  name_emojified: '',\n  value_emojified: '',\n  value_plain: null,\n});\n\n// AccountRole\nexport type AccountRoleShape = ApiAccountRoleJSON;\nexport type AccountRole = RecordOf<AccountRoleShape>;\n\nconst AccountRoleFactory = ImmutableRecord<AccountRoleShape>({\n  color: '',\n  id: '',\n  name: '',\n});\n\n// Account\nexport interface AccountShape\n  extends Required<\n    Omit<ApiAccountJSON, 'emojis' | 'fields' | 'roles' | 'moved'>\n  > {\n  emojis: ImmutableList<CustomEmoji>;\n  fields: ImmutableList<AccountField>;\n  roles: ImmutableList<AccountRole>;\n  display_name_html: string;\n  note_emojified: string;\n  note_plain: string | null;\n  hidden: boolean;\n  moved: string | null;\n}\n\nexport type Account = RecordOf<AccountShape>;\n\nexport const accountDefaultValues: AccountShape = {\n  acct: '',\n  avatar: '',\n  avatar_static: '',\n  bot: false,\n  created_at: '',\n  discoverable: false,\n  indexable: false,\n  display_name: '',\n  display_name_html: '',\n  emojis: ImmutableList<CustomEmoji>(),\n  fields: ImmutableList<AccountField>(),\n  group: false,\n  header: '',\n  header_static: '',\n  id: '',\n  last_status_at: '',\n  locked: false,\n  noindex: false,\n  note: '',\n  note_emojified: '',\n  note_plain: 'string',\n  roles: ImmutableList<AccountRole>(),\n  uri: '',\n  url: '',\n  username: '',\n  followers_count: 0,\n  following_count: 0,\n  statuses_count: 0,\n  hidden: false,\n  suspended: false,\n  memorial: false,\n  limited: false,\n  moved: null,\n  hide_collections: false,\n  // This comes from `ApiMutedAccountJSON`, but we should eventually\n  // store that in a different object.\n  mute_expires_at: null,\n};\n\nconst AccountFactory = ImmutableRecord<AccountShape>(accountDefaultValues);\n\nfunction createAccountField(\n  jsonField: ApiAccountFieldJSON,\n  emojiMap: EmojiMap,\n) {\n  return AccountFieldFactory({\n    ...jsonField,\n    name_emojified: emojify(\n      escapeTextContentForBrowser(jsonField.name),\n      emojiMap,\n    ),\n    value_emojified: emojify(jsonField.value, emojiMap),\n    value_plain: unescapeHTML(jsonField.value),\n  });\n}\n\nexport function createAccountFromServerJSON(serverJSON: ApiAccountJSON) {\n  const { moved, ...accountJSON } = serverJSON;\n\n  const emojiMap = makeEmojiMap(accountJSON.emojis);\n\n  const displayName =\n    accountJSON.display_name.trim().length === 0\n      ? accountJSON.username\n      : accountJSON.display_name;\n\n  return AccountFactory({\n    ...accountJSON,\n    moved: moved?.id,\n    fields: ImmutableList(\n      serverJSON.fields.map((field) => createAccountField(field, emojiMap)),\n    ),\n    emojis: ImmutableList(\n      serverJSON.emojis.map((emoji) => CustomEmojiFactory(emoji)),\n    ),\n    roles: ImmutableList(\n      serverJSON.roles?.map((role) => AccountRoleFactory(role)),\n    ),\n    display_name_html: emojify(\n      escapeTextContentForBrowser(displayName),\n      emojiMap,\n    ),\n    note_emojified: emojify(accountJSON.note, emojiMap),\n    note_plain: unescapeHTML(accountJSON.note),\n    url:\n      accountJSON.url.startsWith('http://') ||\n      accountJSON.url.startsWith('https://')\n        ? accountJSON.url\n        : accountJSON.uri,\n  });\n}\n","import type { Reducer } from '@reduxjs/toolkit';\nimport { Map as ImmutableMap } from 'immutable';\n\nimport {\n  followAccountSuccess,\n  unfollowAccountSuccess,\n  revealAccount,\n} from 'mastodon/actions/accounts_typed';\nimport { importAccounts } from 'mastodon/actions/importer/accounts';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\nimport { me } from 'mastodon/initial_state';\nimport type { Account } from 'mastodon/models/account';\nimport { createAccountFromServerJSON } from 'mastodon/models/account';\n\nconst initialState = ImmutableMap<string, Account>();\n\nconst normalizeAccount = (\n  state: typeof initialState,\n  account: ApiAccountJSON,\n) => {\n  return state.set(\n    account.id,\n    createAccountFromServerJSON(account).set(\n      'hidden',\n      state.get(account.id)?.hidden === false\n        ? false\n        : account.limited || false,\n    ),\n  );\n};\n\nconst normalizeAccounts = (\n  state: typeof initialState,\n  accounts: ApiAccountJSON[],\n) => {\n  accounts.forEach((account) => {\n    state = normalizeAccount(state, account);\n  });\n\n  return state;\n};\n\nfunction getCurrentUser() {\n  if (!me)\n    throw new Error(\n      'No current user (me) defined when calling `accountsReducer`',\n    );\n\n  return me;\n}\n\nexport const accountsReducer: Reducer<typeof initialState> = (\n  state = initialState,\n  action,\n) => {\n  if (revealAccount.match(action))\n    return state.setIn([action.payload.id, 'hidden'], false);\n  else if (importAccounts.match(action))\n    return normalizeAccounts(state, action.payload.accounts);\n  else if (\n    followAccountSuccess.match(action) &&\n    !action.payload.alreadyFollowing\n  ) {\n    return state\n      .update(action.payload.relationship.id, (account) =>\n        account?.update('followers_count', (n) => n + 1),\n      )\n      .update(getCurrentUser(), (account) =>\n        account?.update('following_count', (n) => n + 1),\n      );\n  } else if (unfollowAccountSuccess.match(action))\n    return state\n      .update(action.payload.relationship.id, (account) =>\n        account?.update('followers_count', (n) => Math.max(0, n - 1)),\n      )\n      .update(getCurrentUser(), (account) =>\n        account?.update('following_count', (n) => Math.max(0, n - 1)),\n      );\n  else return state;\n};\n","import { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { apiGetFamiliarFollowers } from '../api/accounts';\n\nimport { importFetchedAccounts } from './importer';\n\nexport const fetchAccountsFamiliarFollowers = createDataLoadingThunk(\n  'accounts_familiar_followers/fetch',\n  ({ id }: { id: string }) => apiGetFamiliarFollowers(id),\n  ([data], { dispatch }) => {\n    if (!data) {\n      return null;\n    }\n\n    dispatch(importFetchedAccounts(data.accounts));\n\n    return {\n      id: data.id,\n      accountIds: data.accounts.map((account) => account.id),\n    };\n  },\n);\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { fetchAccountsFamiliarFollowers } from '../actions/accounts_familiar_followers';\n\nconst initialState: Record<string, string[]> = {};\n\nexport const accountsFamiliarFollowersReducer = createReducer(\n  initialState,\n  (builder) => {\n    builder.addCase(\n      fetchAccountsFamiliarFollowers.fulfilled,\n      (state, { payload }) => {\n        if (payload) {\n          state[payload.id] = payload.accountIds;\n        }\n      },\n    );\n  },\n);\n","import { createReducer } from '@reduxjs/toolkit';\nimport type { UnknownAction } from '@reduxjs/toolkit';\n\nimport type { AxiosError } from 'axios';\n\nimport { ACCOUNT_LOOKUP_FAIL } from 'mastodon/actions/accounts';\nimport { importAccounts } from 'mastodon/actions/importer/accounts';\nimport { domain } from 'mastodon/initial_state';\n\ninterface AccountLookupFailAction extends UnknownAction {\n  acct: string;\n  error?: AxiosError;\n}\n\nconst pattern = new RegExp(`@${domain}$`, 'gi');\n\nexport const normalizeForLookup = (str: string) =>\n  str.toLowerCase().replace(pattern, '');\n\nconst initialState: Record<string, string | null> = {};\n\nexport const accountsMapReducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(importAccounts, (state, action) => {\n      action.payload.accounts.forEach((account) => {\n        state[normalizeForLookup(account.acct)] = account.id;\n      });\n    })\n    .addMatcher(\n      (action: UnknownAction): action is AccountLookupFailAction =>\n        action.type === ACCOUNT_LOOKUP_FAIL,\n      (state, action) => {\n        if (action.error?.response?.status === 404) {\n          state[normalizeForLookup(action.acct)] = null;\n        }\n      },\n    );\n});\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { showAlert, dismissAlert, clearAlerts } from 'mastodon/actions/alerts';\nimport type { Alert } from 'mastodon/models/alert';\n\nconst initialState: Alert[] = [];\n\nlet id = 0;\n\nexport const alertsReducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(showAlert, (state, { payload }) => {\n      state.push({\n        key: id++,\n        ...payload,\n      });\n    })\n    .addCase(dismissAlert, (state, { payload: { key } }) => {\n      return state.filter((item) => item.key !== key);\n    })\n    .addCase(clearAlerts, () => {\n      return [];\n    });\n});\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  ANNOUNCEMENTS_FETCH_REQUEST,\n  ANNOUNCEMENTS_FETCH_SUCCESS,\n  ANNOUNCEMENTS_FETCH_FAIL,\n  ANNOUNCEMENTS_UPDATE,\n  ANNOUNCEMENTS_REACTION_UPDATE,\n  ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  ANNOUNCEMENTS_TOGGLE_SHOW,\n  ANNOUNCEMENTS_DELETE,\n  ANNOUNCEMENTS_DISMISS_SUCCESS,\n} from '../actions/announcements';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  show: false,\n});\n\nconst updateReaction = (state, id, name, updater) => state.update('items', list => list.map(announcement => {\n  if (announcement.get('id') === id) {\n    return announcement.update('reactions', reactions => {\n      const idx = reactions.findIndex(reaction => reaction.get('name') === name);\n\n      if (idx > -1) {\n        return reactions.update(idx, reaction => updater(reaction));\n      }\n\n      return reactions.push(updater(fromJS({ name, count: 0 })));\n    });\n  }\n\n  return announcement;\n}));\n\nconst updateReactionCount = (state, reaction) => updateReaction(state, reaction.announcement_id, reaction.name, x => x.set('count', reaction.count));\n\nconst addReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', true).update('count', y => y + 1));\n\nconst removeReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', false).update('count', y => y - 1));\n\nconst sortAnnouncements = list => list.sortBy(x => x.get('starts_at') || x.get('published_at'));\n\nconst updateAnnouncement = (state, announcement) => {\n  const idx = state.get('items').findIndex(x => x.get('id') === announcement.get('id'));\n\n  if (idx > -1) {\n    // Deep merge is used because announcements from the streaming API do not contain\n    // personalized data about which reactions have been selected by the given user,\n    // and that is information we want to preserve\n    return state.update('items', list => sortAnnouncements(list.update(idx, x => x.mergeDeep(announcement))));\n  }\n\n  return state.update('items', list => sortAnnouncements(list.unshift(announcement)));\n};\n\nexport default function announcementsReducer(state = initialState, action) {\n  switch(action.type) {\n  case ANNOUNCEMENTS_TOGGLE_SHOW:\n    return state.withMutations(map => {\n      map.set('show', !map.get('show'));\n    });\n  case ANNOUNCEMENTS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case ANNOUNCEMENTS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      const items = fromJS(action.announcements);\n\n      map.set('items', items);\n      map.set('isLoading', false);\n    });\n  case ANNOUNCEMENTS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case ANNOUNCEMENTS_UPDATE:\n    return updateAnnouncement(state, fromJS(action.announcement));\n  case ANNOUNCEMENTS_REACTION_UPDATE:\n    return updateReactionCount(state, action.reaction);\n  case ANNOUNCEMENTS_REACTION_ADD_REQUEST:\n  case ANNOUNCEMENTS_REACTION_REMOVE_FAIL:\n    return addReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_REACTION_REMOVE_REQUEST:\n  case ANNOUNCEMENTS_REACTION_ADD_FAIL:\n    return removeReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_DISMISS_SUCCESS:\n    return updateAnnouncement(state, fromJS({ 'id': action.id, 'read': true }));\n  case ANNOUNCEMENTS_DELETE:\n    return state.update('items', list => {\n      const idx = list.findIndex(x => x.get('id') === action.id);\n\n      if (idx > -1) {\n        return list.delete(idx);\n      }\n\n      return list;\n    });\n  default:\n    return state;\n  }\n}\n","import { apiRequestPut } from 'mastodon/api';\nimport type { ApiMediaAttachmentJSON } from 'mastodon/api_types/media_attachments';\n\nexport const apiUpdateMedia = (\n  id: string,\n  params?: { description?: string; focus?: string },\n) => apiRequestPut<ApiMediaAttachmentJSON>(`v1/media/${id}`, params);\n","import type { List as ImmutableList, Map as ImmutableMap } from 'immutable';\n\nimport { apiUpdateMedia } from 'mastodon/api/compose';\nimport type { ApiMediaAttachmentJSON } from 'mastodon/api_types/media_attachments';\nimport type { MediaAttachment } from 'mastodon/models/media_attachment';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\ntype SimulatedMediaAttachmentJSON = ApiMediaAttachmentJSON & {\n  unattached?: boolean;\n};\n\nconst simulateModifiedApiResponse = (\n  media: MediaAttachment,\n  params: { description?: string; focus?: string },\n): SimulatedMediaAttachmentJSON => {\n  const [x, y] = (params.focus ?? '').split(',');\n\n  const data = {\n    ...media.toJS(),\n    ...params,\n    meta: {\n      focus: {\n        x: parseFloat(x ?? '0'),\n        y: parseFloat(y ?? '0'),\n      },\n    },\n  } as unknown as SimulatedMediaAttachmentJSON;\n\n  return data;\n};\n\nexport const changeUploadCompose = createDataLoadingThunk(\n  'compose/changeUpload',\n  async (\n    {\n      id,\n      ...params\n    }: {\n      id: string;\n      description: string;\n      focus: string;\n    },\n    { getState },\n  ) => {\n    const media = (\n      (getState().compose as ImmutableMap<string, unknown>).get(\n        'media_attachments',\n      ) as ImmutableList<MediaAttachment>\n    ).find((item) => item.get('id') === id);\n\n    // Editing already-attached media is deferred to editing the post itself.\n    // For simplicity's sake, fake an API reply.\n    if (media && !media.get('unattached')) {\n      return new Promise<SimulatedMediaAttachmentJSON>((resolve) => {\n        resolve(simulateModifiedApiResponse(media, params));\n      });\n    }\n\n    return apiUpdateMedia(id, params);\n  },\n  (media: SimulatedMediaAttachmentJSON) => {\n    return {\n      media,\n      attached: typeof media.unattached !== 'undefined' && !media.unattached,\n    };\n  },\n  {\n    useLoadingBar: false,\n  },\n);\n","export function uuid(a?: string): string {\n  return a\n    ? (\n        (a as unknown as number) ^\n        ((Math.random() * 16) >> ((a as unknown as number) / 4))\n      ).toString(16)\n    : // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n      ('' + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n","import { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport { changeUploadCompose } from 'mastodon/actions/compose_typed';\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport {\n  COMPOSE_MOUNT,\n  COMPOSE_UNMOUNT,\n  COMPOSE_CHANGE,\n  COMPOSE_REPLY,\n  COMPOSE_REPLY_CANCEL,\n  COMPOSE_DIRECT,\n  COMPOSE_MENTION,\n  COMPOSE_SUBMIT_REQUEST,\n  COMPOSE_SUBMIT_SUCCESS,\n  COMPOSE_SUBMIT_FAIL,\n  COMPOSE_UPLOAD_REQUEST,\n  COMPOSE_UPLOAD_SUCCESS,\n  COMPOSE_UPLOAD_FAIL,\n  COMPOSE_UPLOAD_UNDO,\n  COMPOSE_UPLOAD_PROGRESS,\n  COMPOSE_UPLOAD_PROCESSING,\n  THUMBNAIL_UPLOAD_REQUEST,\n  THUMBNAIL_UPLOAD_SUCCESS,\n  THUMBNAIL_UPLOAD_FAIL,\n  THUMBNAIL_UPLOAD_PROGRESS,\n  COMPOSE_SUGGESTIONS_CLEAR,\n  COMPOSE_SUGGESTIONS_READY,\n  COMPOSE_SUGGESTION_SELECT,\n  COMPOSE_SUGGESTION_IGNORE,\n  COMPOSE_SUGGESTION_TAGS_UPDATE,\n  COMPOSE_TAG_HISTORY_UPDATE,\n  COMPOSE_SENSITIVITY_CHANGE,\n  COMPOSE_SPOILERNESS_CHANGE,\n  COMPOSE_SPOILER_TEXT_CHANGE,\n  COMPOSE_VISIBILITY_CHANGE,\n  COMPOSE_LANGUAGE_CHANGE,\n  COMPOSE_COMPOSING_CHANGE,\n  COMPOSE_EMOJI_INSERT,\n  COMPOSE_RESET,\n  COMPOSE_POLL_ADD,\n  COMPOSE_POLL_REMOVE,\n  COMPOSE_POLL_OPTION_CHANGE,\n  COMPOSE_POLL_SETTINGS_CHANGE,\n  COMPOSE_CHANGE_MEDIA_ORDER,\n  COMPOSE_SET_STATUS,\n  COMPOSE_FOCUS,\n} from '../actions/compose';\nimport { REDRAFT } from '../actions/statuses';\nimport { STORE_HYDRATE } from '../actions/store';\nimport { me } from '../initial_state';\nimport { unescapeHTML } from '../utils/html';\nimport { uuid } from '../uuid';\n\nconst initialState = ImmutableMap({\n  mounted: 0,\n  sensitive: false,\n  spoiler: false,\n  spoiler_text: '',\n  privacy: null,\n  id: null,\n  text: '',\n  focusDate: null,\n  caretPosition: null,\n  preselectDate: null,\n  in_reply_to: null,\n  is_composing: false,\n  is_submitting: false,\n  is_changing_upload: false,\n  is_uploading: false,\n  progress: 0,\n  isUploadingThumbnail: false,\n  thumbnailProgress: 0,\n  media_attachments: ImmutableList(),\n  pending_media_attachments: 0,\n  poll: null,\n  suggestion_token: null,\n  suggestions: ImmutableList(),\n  default_privacy: 'public',\n  default_sensitive: false,\n  default_language: 'en',\n  resetFileKey: Math.floor((Math.random() * 0x10000)),\n  idempotencyKey: null,\n  tagHistory: ImmutableList(),\n});\n\nconst initialPoll = ImmutableMap({\n  options: ImmutableList(['', '']),\n  expires_in: 24 * 3600,\n  multiple: false,\n});\n\nfunction statusToTextMentions(state, status) {\n  let set = ImmutableOrderedSet([]);\n\n  if (status.getIn(['account', 'id']) !== me) {\n    set = set.add(`@${status.getIn(['account', 'acct'])} `);\n  }\n\n  return set.union(status.get('mentions').filterNot(mention => mention.get('id') === me).map(mention => `@${mention.get('acct')} `)).join('');\n}\n\nfunction clearAll(state) {\n  return state.withMutations(map => {\n    map.set('id', null);\n    map.set('text', '');\n    map.set('spoiler', false);\n    map.set('spoiler_text', '');\n    map.set('is_submitting', false);\n    map.set('is_changing_upload', false);\n    map.set('in_reply_to', null);\n    map.set('privacy', state.get('default_privacy'));\n    map.set('sensitive', state.get('default_sensitive'));\n    map.set('language', state.get('default_language'));\n    map.update('media_attachments', list => list.clear());\n    map.set('progress', 0);\n    map.set('poll', null);\n    map.set('idempotencyKey', uuid());\n  });\n}\n\nfunction appendMedia(state, media, file) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    if (media.get('type') === 'image') {\n      media = media.set('file', file);\n    }\n    map.update('media_attachments', list => list.push(media.set('unattached', true)));\n    map.set('is_uploading', false);\n    map.set('is_processing', false);\n    map.set('progress', 0);\n    map.set('resetFileKey', Math.floor((Math.random() * 0x10000)));\n    map.set('idempotencyKey', uuid());\n    map.update('pending_media_attachments', n => n - 1);\n\n    if (prevSize === 0 && (state.get('default_sensitive') || state.get('spoiler'))) {\n      map.set('sensitive', true);\n    }\n  });\n}\n\nfunction removeMedia(state, mediaId) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    map.update('media_attachments', list => list.filterNot(item => item.get('id') === mediaId));\n    map.set('idempotencyKey', uuid());\n\n    if (prevSize === 1) {\n      map.set('sensitive', false);\n    }\n  });\n}\n\nconst insertSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position)}${completion} ${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    if (path.length === 1 && path[0] === 'text') {\n      map.set('focusDate', new Date());\n      map.set('caretPosition', position + completion.length + 1);\n    }\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst ignoreSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position + token.length)} ${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    map.set('focusDate', new Date());\n    map.set('caretPosition', position + token.length + 1);\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst sortHashtagsByUse = (state, tags) => {\n  const personalHistory = state.get('tagHistory').map(tag => tag.toLowerCase());\n\n  const tagsWithLowercase = tags.map(t => ({ ...t, lowerName: t.name.toLowerCase() }));\n  const sorted = tagsWithLowercase.sort((a, b) => {\n    const usedA = personalHistory.includes(a.lowerName);\n    const usedB = personalHistory.includes(b.lowerName);\n\n    if (usedA === usedB) {\n      return 0;\n    } else if (usedA && !usedB) {\n      return -1;\n    } else {\n      return 1;\n    }\n  });\n  sorted.forEach(tag => delete tag.lowerName);\n  return sorted;\n};\n\nconst insertEmoji = (state, position, emojiData, needsSpace) => {\n  const oldText = state.get('text');\n  const emoji = needsSpace ? ' ' + emojiData.native : emojiData.native;\n\n  return state.merge({\n    text: `${oldText.slice(0, position)}${emoji} ${oldText.slice(position)}`,\n    focusDate: new Date(),\n    caretPosition: position + emoji.length + 1,\n    idempotencyKey: uuid(),\n  });\n};\n\nconst privacyPreference = (a, b) => {\n  const order = ['public', 'unlisted', 'private', 'direct'];\n  return order[Math.max(order.indexOf(a), order.indexOf(b), 0)];\n};\n\nconst hydrate = (state, hydratedState) => {\n  state = clearAll(state.merge(hydratedState));\n\n  if (hydratedState.get('text')) {\n    state = state.set('text', hydratedState.get('text')).set('focusDate', new Date());\n  }\n\n  return state;\n};\n\nconst domParser = new DOMParser();\n\nconst expandMentions = status => {\n  const fragment = domParser.parseFromString(status.get('content'), 'text/html').documentElement;\n\n  status.get('mentions').forEach(mention => {\n    fragment.querySelector(`a[href=\"${mention.get('url')}\"]`).textContent = `@${mention.get('acct')}`;\n  });\n\n  return fragment.innerHTML;\n};\n\nconst expiresInFromExpiresAt = expires_at => {\n  if (!expires_at) return 24 * 3600;\n  const delta = (new Date(expires_at).getTime() - Date.now()) / 1000;\n  return [300, 1800, 3600, 21600, 86400, 259200, 604800].find(expires_in => expires_in >= delta) || 24 * 3600;\n};\n\nconst mergeLocalHashtagResults = (suggestions, prefix, tagHistory) => {\n  prefix = prefix.toLowerCase();\n\n  if (suggestions.length < 4) {\n    const localTags = tagHistory.filter(tag => tag.toLowerCase().startsWith(prefix) && !suggestions.some(suggestion => suggestion.type === 'hashtag' && suggestion.name.toLowerCase() === tag.toLowerCase()));\n    suggestions = suggestions.concat(localTags.slice(0, 4 - suggestions.length).toJS().map(tag => ({ type: 'hashtag', name: tag })));\n  }\n\n  // Prefer capitalization from personal history, unless personal history is all lower-case\n  const fixSuggestionCapitalization = (suggestion) => {\n    if (suggestion.type !== 'hashtag')\n      return suggestion;\n\n    const tagFromHistory = tagHistory.find((tag) => tag.localeCompare(suggestion.name, undefined, { sensitivity: 'accent' }) === 0);\n\n    if (!tagFromHistory || tagFromHistory.toLowerCase() === tagFromHistory)\n      return suggestion;\n\n    return { ...suggestion, name: tagFromHistory };\n  };\n\n  return suggestions.map(fixSuggestionCapitalization);\n};\n\nconst normalizeSuggestions = (state, { accounts, emojis, tags, token }) => {\n  if (accounts) {\n    return accounts.map(item => ({ id: item.id, type: 'account' }));\n  } else if (emojis) {\n    return emojis.map(item => ({ ...item, type: 'emoji' }));\n  } else {\n    return mergeLocalHashtagResults(sortHashtagsByUse(state, tags.map(item => ({ ...item, type: 'hashtag' }))), token.slice(1), state.get('tagHistory'));\n  }\n};\n\nconst updateSuggestionTags = (state, token) => {\n  const prefix = token.slice(1);\n\n  const suggestions = state.get('suggestions').toJS();\n  return state.merge({\n    suggestions: ImmutableList(mergeLocalHashtagResults(suggestions, prefix, state.get('tagHistory'))),\n    suggestion_token: token,\n  });\n};\n\nconst updatePoll = (state, index, value, maxOptions) => state.updateIn(['poll', 'options'], options => {\n  const tmp = options.set(index, value).filterNot(x => x.trim().length === 0);\n\n  if (tmp.size === 0) {\n    return tmp.push('').push('');\n  } else if (tmp.size < maxOptions) {\n    return tmp.push('');\n  }\n\n  return tmp;\n});\n\nconst calculateProgress = (loaded, total) => Math.min(Math.round((loaded / total) * 100), 100);\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport const composeReducer = (state = initialState, action) => {\n  if (changeUploadCompose.fulfilled.match(action)) {\n    return state\n      .set('is_changing_upload', false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.payload.media.id) {\n          return fromJS(action.payload.media).set('unattached', !action.payload.attached);\n        }\n\n        return item;\n      }));\n  } else if (changeUploadCompose.pending.match(action)) {\n    return state.set('is_changing_upload', true);\n  } else if (changeUploadCompose.rejected.match(action)) {\n    return state.set('is_changing_upload', false);\n  }\n\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('compose'));\n  case COMPOSE_MOUNT:\n    return state.set('mounted', state.get('mounted') + 1);\n  case COMPOSE_UNMOUNT:\n    return state\n      .set('mounted', Math.max(state.get('mounted') - 1, 0))\n      .set('is_composing', false);\n  case COMPOSE_SENSITIVITY_CHANGE:\n    return state.withMutations(map => {\n      if (!state.get('spoiler')) {\n        map.set('sensitive', !state.get('sensitive'));\n      }\n\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SPOILERNESS_CHANGE:\n    return state.withMutations(map => {\n      map.set('spoiler', !state.get('spoiler'));\n      map.set('idempotencyKey', uuid());\n\n      if (state.get('media_attachments').size >= 1 && !state.get('default_sensitive')) {\n        map.set('sensitive', !state.get('spoiler'));\n      }\n    });\n  case COMPOSE_SPOILER_TEXT_CHANGE:\n    if (!state.get('spoiler')) return state;\n    return state\n      .set('spoiler_text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_VISIBILITY_CHANGE:\n    return state\n      .set('privacy', action.value)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_CHANGE:\n    return state\n      .set('text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_COMPOSING_CHANGE:\n    return state.set('is_composing', action.value);\n  case COMPOSE_REPLY:\n    return state.withMutations(map => {\n      map.set('id', null);\n      map.set('in_reply_to', action.status.get('id'));\n      map.set('text', statusToTextMentions(state, action.status));\n      map.set('privacy', privacyPreference(action.status.get('visibility'), state.get('default_privacy')));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('preselectDate', new Date());\n      map.set('idempotencyKey', uuid());\n\n      map.update('media_attachments', list => list.filter(media => media.get('unattached')));\n\n      if (action.status.get('language') && !action.status.has('translation')) {\n        map.set('language', action.status.get('language'));\n      } else {\n        map.set('language', state.get('default_language'));\n      }\n\n      if (action.status.get('spoiler_text').length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.status.get('spoiler_text'));\n\n        if (map.get('media_attachments').size >= 1) {\n          map.set('sensitive', true);\n        }\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n    });\n  case COMPOSE_SUBMIT_REQUEST:\n    return state.set('is_submitting', true);\n\n  case COMPOSE_REPLY_CANCEL:\n  case COMPOSE_RESET:\n  case COMPOSE_SUBMIT_SUCCESS:\n    return clearAll(state);\n  case COMPOSE_SUBMIT_FAIL:\n    return state.set('is_submitting', false);\n  case COMPOSE_UPLOAD_REQUEST:\n    return state.set('is_uploading', true).update('pending_media_attachments', n => n + 1);\n  case COMPOSE_UPLOAD_PROCESSING:\n    return state.set('is_processing', true);\n  case COMPOSE_UPLOAD_SUCCESS:\n    return appendMedia(state, fromJS(action.media), action.file);\n  case COMPOSE_UPLOAD_FAIL:\n    return state\n      .set('is_uploading', false)\n      .set('is_processing', false)\n      .set('progress', 0)\n      .update('pending_media_attachments', n => n - 1);\n  case COMPOSE_UPLOAD_UNDO:\n    return removeMedia(state, action.media_id);\n  case COMPOSE_UPLOAD_PROGRESS:\n    return state.set('progress', calculateProgress(action.loaded, action.total));\n  case THUMBNAIL_UPLOAD_REQUEST:\n    return state.set('isUploadingThumbnail', true);\n  case THUMBNAIL_UPLOAD_PROGRESS:\n    return state.set('thumbnailProgress', calculateProgress(action.loaded, action.total));\n  case THUMBNAIL_UPLOAD_FAIL:\n    return state.set('isUploadingThumbnail', false);\n  case THUMBNAIL_UPLOAD_SUCCESS:\n    return state\n      .set('isUploadingThumbnail', false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.media.id) {\n          return fromJS(action.media).set('unattached', item.get('unattached'));\n        }\n\n        return item;\n      }));\n  case COMPOSE_MENTION:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_DIRECT:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('privacy', 'direct');\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', ImmutableList(), list => list.clear()).set('suggestion_token', null);\n  case COMPOSE_SUGGESTIONS_READY:\n    return state.set('suggestions', ImmutableList(normalizeSuggestions(state, action))).set('suggestion_token', action.token);\n  case COMPOSE_SUGGESTION_SELECT:\n    return insertSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_IGNORE:\n    return ignoreSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_TAGS_UPDATE:\n    return updateSuggestionTags(state, action.token);\n  case COMPOSE_TAG_HISTORY_UPDATE:\n    return state.set('tagHistory', fromJS(action.tags));\n  case timelineDelete.type:\n    if (action.payload.statusId === state.get('in_reply_to')) {\n      return state.set('in_reply_to', null);\n    } else if (action.payload.statusId === state.get('id')) {\n      return state.set('id', null);\n    } else {\n      return state;\n    }\n  case COMPOSE_EMOJI_INSERT:\n    return insertEmoji(state, action.position, action.emoji, action.needsSpace);\n  case REDRAFT:\n    return state.withMutations(map => {\n      map.set('text', action.raw_text || unescapeHTML(expandMentions(action.status)));\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments').map((media) => media.set('unattached', true)));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n      map.set('id', null);\n\n      if (action.status.get('spoiler_text').length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.status.get('spoiler_text'));\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: ImmutableList(action.status.get('poll').options.map(x => x.title)),\n          multiple: action.status.get('poll').multiple,\n          expires_in: expiresInFromExpiresAt(action.status.get('poll').expires_at),\n        }));\n      }\n    });\n  case COMPOSE_SET_STATUS:\n    return state.withMutations(map => {\n      map.set('id', action.status.get('id'));\n      map.set('text', action.text);\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments'));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n\n      if (action.spoiler_text.length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.spoiler_text);\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: ImmutableList(action.status.get('poll').options.map(x => x.title)),\n          multiple: action.status.get('poll').multiple,\n          expires_in: expiresInFromExpiresAt(action.status.get('poll').expires_at),\n        }));\n      }\n    });\n  case COMPOSE_POLL_ADD:\n    return state.set('poll', initialPoll);\n  case COMPOSE_POLL_REMOVE:\n    return state.set('poll', null);\n  case COMPOSE_POLL_OPTION_CHANGE:\n    return updatePoll(state, action.index, action.title, action.maxOptions);\n  case COMPOSE_POLL_SETTINGS_CHANGE:\n    return state.update('poll', poll => poll.set('expires_in', action.expiresIn).set('multiple', action.isMultiple));\n  case COMPOSE_LANGUAGE_CHANGE:\n    return state.set('language', action.language);\n  case COMPOSE_FOCUS:\n    return state.set('focusDate', new Date()).update('text', text => text.length > 0 ? text : action.defaultText);\n  case COMPOSE_CHANGE_MEDIA_ORDER:\n    return state.update('media_attachments', list => {\n      const indexA = list.findIndex(x => x.get('id') === action.a);\n      const moveItem = list.get(indexA);\n      const indexB = list.findIndex(x => x.get('id') === action.b);\n\n      return list.splice(indexA, 1).splice(indexB, 0, moveItem);\n    });\n  default:\n    return state;\n  }\n};\n","/* eslint-disable @typescript-eslint/no-dynamic-delete */\nimport { createReducer } from '@reduxjs/toolkit';\nimport type { Draft, UnknownAction } from '@reduxjs/toolkit';\nimport type { List as ImmutableList } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\nimport type {\n  ApiStatusJSON,\n  ApiContextJSON,\n} from 'mastodon/api_types/statuses';\nimport type { Status } from 'mastodon/models/status';\n\nimport { blockAccountSuccess, muteAccountSuccess } from '../actions/accounts';\nimport { fetchContext } from '../actions/statuses';\nimport { TIMELINE_UPDATE } from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\ninterface TimelineUpdateAction extends UnknownAction {\n  timeline: string;\n  status: ApiStatusJSON;\n  usePendingItems: boolean;\n}\n\ninterface State {\n  inReplyTos: Record<string, string>;\n  replies: Record<string, string[]>;\n}\n\nconst initialState: State = {\n  inReplyTos: {},\n  replies: {},\n};\n\nconst normalizeContext = (\n  state: Draft<State>,\n  id: string,\n  { ancestors, descendants }: ApiContextJSON,\n): void => {\n  const addReply = ({\n    id,\n    in_reply_to_id,\n  }: {\n    id: string;\n    in_reply_to_id?: string;\n  }) => {\n    if (!in_reply_to_id) {\n      return;\n    }\n\n    if (!state.inReplyTos[id]) {\n      const siblings = (state.replies[in_reply_to_id] ??= []);\n      const index = siblings.findIndex((sibling) => compareId(sibling, id) < 0);\n      siblings.splice(index + 1, 0, id);\n      state.inReplyTos[id] = in_reply_to_id;\n    }\n  };\n\n  // We know in_reply_to_id of statuses but `id` itself.\n  // So we assume that the status of the id replies to last ancestors.\n\n  ancestors.forEach(addReply);\n\n  if (ancestors[0]) {\n    addReply({\n      id,\n      in_reply_to_id: ancestors[ancestors.length - 1]?.id,\n    });\n  }\n\n  descendants.forEach(addReply);\n};\n\nconst deleteFromContexts = (state: Draft<State>, ids: string[]): void => {\n  ids.forEach((id) => {\n    const inReplyToIdOfId = state.inReplyTos[id];\n    const repliesOfId = state.replies[id];\n\n    if (inReplyToIdOfId) {\n      const siblings = state.replies[inReplyToIdOfId];\n\n      if (siblings) {\n        state.replies[inReplyToIdOfId] = siblings.filter(\n          (sibling) => sibling !== id,\n        );\n      }\n    }\n\n    if (repliesOfId) {\n      repliesOfId.forEach((reply) => {\n        delete state.inReplyTos[reply];\n      });\n    }\n\n    delete state.inReplyTos[id];\n    delete state.replies[id];\n  });\n};\n\nconst filterContexts = (\n  state: Draft<State>,\n  relationship: ApiRelationshipJSON,\n  statuses: ImmutableList<Status>,\n): void => {\n  const ownedStatusIds = statuses\n    .filter((status) => (status.get('account') as string) === relationship.id)\n    .map((status) => status.get('id') as string);\n\n  deleteFromContexts(state, ownedStatusIds.toArray());\n};\n\nconst updateContext = (state: Draft<State>, status: ApiStatusJSON): void => {\n  if (!status.in_reply_to_id) {\n    return;\n  }\n\n  const siblings = (state.replies[status.in_reply_to_id] ??= []);\n\n  state.inReplyTos[status.id] = status.in_reply_to_id;\n\n  if (!siblings.includes(status.id)) {\n    siblings.push(status.id);\n  }\n};\n\nexport const contextsReducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(fetchContext.fulfilled, (state, action) => {\n      normalizeContext(state, action.meta.arg.statusId, action.payload.context);\n    })\n    .addCase(blockAccountSuccess, (state, action) => {\n      filterContexts(\n        state,\n        action.payload.relationship,\n        action.payload.statuses as ImmutableList<Status>,\n      );\n    })\n    .addCase(muteAccountSuccess, (state, action) => {\n      filterContexts(\n        state,\n        action.payload.relationship,\n        action.payload.statuses as ImmutableList<Status>,\n      );\n    })\n    .addCase(timelineDelete, (state, action) => {\n      deleteFromContexts(state, [action.payload.statusId]);\n    })\n    .addMatcher(\n      (action: UnknownAction): action is TimelineUpdateAction =>\n        action.type === TIMELINE_UPDATE,\n      (state, action) => {\n        updateContext(state, action.status);\n      },\n    );\n});\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { Account } from 'mastodon/models/account';\n\nexport const blockDomainSuccess = createAction<{\n  domain: string;\n  accounts: Account[];\n}>('domain_blocks/block/SUCCESS');\n\nexport const unblockDomainSuccess = createAction<{\n  domain: string;\n  accounts: Account[];\n}>('domain_blocks/unblock/SUCCESS');\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport { blockAccountSuccess, muteAccountSuccess } from 'mastodon/actions/accounts';\nimport { blockDomainSuccess } from 'mastodon/actions/domain_blocks';\n\nimport {\n  CONVERSATIONS_MOUNT,\n  CONVERSATIONS_UNMOUNT,\n  CONVERSATIONS_FETCH_REQUEST,\n  CONVERSATIONS_FETCH_SUCCESS,\n  CONVERSATIONS_FETCH_FAIL,\n  CONVERSATIONS_UPDATE,\n  CONVERSATIONS_READ,\n  CONVERSATIONS_DELETE_SUCCESS,\n} from '../actions/conversations';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  hasMore: true,\n  mounted: false,\n});\n\nconst conversationToMap = item => ImmutableMap({\n  id: item.id,\n  unread: item.unread,\n  accounts: ImmutableList(item.accounts.map(a => a.id)),\n  last_status: item.last_status ? item.last_status.id : null,\n});\n\nconst updateConversation = (state, item) => state.update('items', list => {\n  const index   = list.findIndex(x => x.get('id') === item.id);\n  const newItem = conversationToMap(item);\n\n  if (index === -1) {\n    return list.unshift(newItem);\n  } else {\n    return list.set(index, newItem);\n  }\n});\n\nconst expandNormalizedConversations = (state, conversations, next, isLoadingRecent) => {\n  let items = ImmutableList(conversations.map(conversationToMap));\n\n  return state.withMutations(mutable => {\n    if (!items.isEmpty()) {\n      mutable.update('items', list => {\n        list = list.map(oldItem => {\n          const newItemIndex = items.findIndex(x => x.get('id') === oldItem.get('id'));\n\n          if (newItemIndex === -1) {\n            return oldItem;\n          }\n\n          const newItem = items.get(newItemIndex);\n          items = items.delete(newItemIndex);\n\n          return newItem;\n        });\n\n        list = list.concat(items);\n\n        return list.sortBy(x => x.get('last_status'), (a, b) => {\n          if(a === null || b === null) {\n            return -1;\n          }\n\n          return compareId(a, b) * -1;\n        });\n      });\n    }\n\n    if (!next && !isLoadingRecent) {\n      mutable.set('hasMore', false);\n    }\n\n    mutable.set('isLoading', false);\n  });\n};\n\nconst filterConversations = (state, accountIds) => {\n  return state.update('items', list => list.filterNot(item => item.get('accounts').some(accountId => accountIds.includes(accountId))));\n};\n\nexport default function conversations(state = initialState, action) {\n  switch (action.type) {\n  case CONVERSATIONS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case CONVERSATIONS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case CONVERSATIONS_FETCH_SUCCESS:\n    return expandNormalizedConversations(state, action.conversations, action.next, action.isLoadingRecent);\n  case CONVERSATIONS_UPDATE:\n    return updateConversation(state, action.conversation);\n  case CONVERSATIONS_MOUNT:\n    return state.update('mounted', count => count + 1);\n  case CONVERSATIONS_UNMOUNT:\n    return state.update('mounted', count => count - 1);\n  case CONVERSATIONS_READ:\n    return state.update('items', list => list.map(item => {\n      if (item.get('id') === action.id) {\n        return item.set('unread', false);\n      }\n\n      return item;\n    }));\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterConversations(state, [action.payload.relationship.id]);\n  case blockDomainSuccess.type:\n    return filterConversations(state, action.payload.accounts);\n  case CONVERSATIONS_DELETE_SUCCESS:\n    return state.update('items', list => list.filterNot(item => item.get('id') === action.id));\n  default:\n    return state;\n  }\n}\n","import { List as ImmutableList, fromJS as ConvertToImmutable } from 'immutable';\n\nimport { CUSTOM_EMOJIS_FETCH_SUCCESS } from '../actions/custom_emojis';\nimport { buildCustomEmojis } from '../features/emoji/emoji';\nimport { search as emojiSearch } from '../features/emoji/emoji_mart_search_light';\n\nconst initialState = ImmutableList([]);\n\nexport default function custom_emojis(state = initialState, action) {\n  if(action.type === CUSTOM_EMOJIS_FETCH_SUCCESS) {\n    state = ConvertToImmutable(action.custom_emojis);\n    emojiSearch('', { custom: buildCustomEmojis(state) });\n  }\n\n  return state;\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const openDropdownMenu = createAction<{\n  id: number;\n  keyboard: boolean;\n  scrollKey?: string;\n}>('dropdownMenu/open');\n\nexport const closeDropdownMenu = createAction<{ id: number }>(\n  'dropdownMenu/close',\n);\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { closeDropdownMenu, openDropdownMenu } from '../actions/dropdown_menu';\n\ninterface DropdownMenuState {\n  openId: number | null;\n  keyboard: boolean;\n  scrollKey: string | undefined;\n}\n\nconst initialState: DropdownMenuState = {\n  openId: null,\n  keyboard: false,\n  scrollKey: undefined,\n};\n\nexport const dropdownMenuReducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(\n      openDropdownMenu,\n      (state, { payload: { id, keyboard, scrollKey } }) => {\n        state.openId = id;\n        state.keyboard = keyboard;\n        state.scrollKey = scrollKey;\n      },\n    )\n    .addCase(closeDropdownMenu, (state, { payload: { id } }) => {\n      if (state.openId === id) {\n        state.openId = null;\n        state.scrollKey = undefined;\n      }\n    });\n});\n","import api from '../api';\n\nimport { openModal } from './modal';\n\nexport const FILTERS_FETCH_REQUEST = 'FILTERS_FETCH_REQUEST';\nexport const FILTERS_FETCH_SUCCESS = 'FILTERS_FETCH_SUCCESS';\nexport const FILTERS_FETCH_FAIL    = 'FILTERS_FETCH_FAIL';\n\nexport const FILTERS_STATUS_CREATE_REQUEST = 'FILTERS_STATUS_CREATE_REQUEST';\nexport const FILTERS_STATUS_CREATE_SUCCESS = 'FILTERS_STATUS_CREATE_SUCCESS';\nexport const FILTERS_STATUS_CREATE_FAIL    = 'FILTERS_STATUS_CREATE_FAIL';\n\nexport const FILTERS_CREATE_REQUEST = 'FILTERS_CREATE_REQUEST';\nexport const FILTERS_CREATE_SUCCESS = 'FILTERS_CREATE_SUCCESS';\nexport const FILTERS_CREATE_FAIL    = 'FILTERS_CREATE_FAIL';\n\nexport const initAddFilter = (status, { contextType }) => dispatch =>\n  dispatch(openModal({\n    modalType: 'FILTER',\n    modalProps: {\n      statusId: status?.get('id'),\n      contextType: contextType,\n    },\n  }));\n\nexport const fetchFilters = () => (dispatch) => {\n  dispatch({\n    type: FILTERS_FETCH_REQUEST,\n    skipLoading: true,\n  });\n\n  api()\n    .get('/api/v2/filters')\n    .then(({ data }) => dispatch({\n      type: FILTERS_FETCH_SUCCESS,\n      filters: data,\n      skipLoading: true,\n    }))\n    .catch(err => dispatch({\n      type: FILTERS_FETCH_FAIL,\n      err,\n      skipLoading: true,\n      skipAlert: true,\n    }));\n};\n\nexport const createFilterStatus = (params, onSuccess, onFail) => (dispatch) => {\n  dispatch(createFilterStatusRequest());\n\n  api().post(`/api/v2/filters/${params.filter_id}/statuses`, params).then(response => {\n    dispatch(createFilterStatusSuccess(response.data));\n    if (onSuccess) onSuccess();\n  }).catch(error => {\n    dispatch(createFilterStatusFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterStatusRequest = () => ({\n  type: FILTERS_STATUS_CREATE_REQUEST,\n});\n\nexport const createFilterStatusSuccess = filter_status => ({\n  type: FILTERS_STATUS_CREATE_SUCCESS,\n  filter_status,\n});\n\nexport const createFilterStatusFail = error => ({\n  type: FILTERS_STATUS_CREATE_FAIL,\n  error,\n});\n\nexport const createFilter = (params, onSuccess, onFail) => (dispatch) => {\n  dispatch(createFilterRequest());\n\n  api().post('/api/v2/filters', params).then(response => {\n    dispatch(createFilterSuccess(response.data));\n    if (onSuccess) onSuccess(response.data);\n  }).catch(error => {\n    dispatch(createFilterFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterRequest = () => ({\n  type: FILTERS_CREATE_REQUEST,\n});\n\nexport const createFilterSuccess = filter => ({\n  type: FILTERS_CREATE_SUCCESS,\n  filter,\n});\n\nexport const createFilterFail = error => ({\n  type: FILTERS_CREATE_FAIL,\n  error,\n});\n","import { Map as ImmutableMap, is, fromJS } from 'immutable';\n\nimport { FILTERS_FETCH_SUCCESS, FILTERS_CREATE_SUCCESS } from '../actions/filters';\nimport { FILTERS_IMPORT } from '../actions/importer';\n\nconst normalizeFilter = (state, filter) => {\n  const normalizedFilter = fromJS({\n    id: filter.id,\n    title: filter.title,\n    context: filter.context,\n    filter_action: filter.filter_action,\n    keywords: filter.keywords,\n    expires_at: filter.expires_at ? Date.parse(filter.expires_at) : null,\n  });\n\n  if (is(state.get(filter.id), normalizedFilter)) {\n    return state;\n  } else {\n    // Do not overwrite keywords when receiving a partial filter\n    return state.update(filter.id, ImmutableMap(), (old) => (\n      old.mergeWith(((old_value, new_value) => (new_value === undefined ? old_value : new_value)), normalizedFilter)\n    ));\n  }\n};\n\nconst normalizeFilters = (state, filters) => {\n  filters.forEach(filter => {\n    state = normalizeFilter(state, filter);\n  });\n\n  return state;\n};\n\nexport default function filters(state = ImmutableMap(), action) {\n  switch(action.type) {\n  case FILTERS_CREATE_SUCCESS:\n    return normalizeFilter(state, action.filter);\n  case FILTERS_FETCH_SUCCESS:\n    return normalizeFilters(ImmutableMap(), action.filters);\n  case FILTERS_IMPORT:\n    return normalizeFilters(state, action.filters);\n  default:\n    return state;\n  }\n}\n","export const HEIGHT_CACHE_SET = 'HEIGHT_CACHE_SET';\nexport const HEIGHT_CACHE_CLEAR = 'HEIGHT_CACHE_CLEAR';\n\nexport function setHeight (key, id, height) {\n  return {\n    type: HEIGHT_CACHE_SET,\n    key,\n    id,\n    height,\n  };\n}\n\nexport function clearHeight () {\n  return {\n    type: HEIGHT_CACHE_CLEAR,\n  };\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { HEIGHT_CACHE_SET, HEIGHT_CACHE_CLEAR } from '../actions/height_cache';\n\nconst initialState = ImmutableMap();\n\nconst setHeight = (state, key, id, height) => {\n  return state.update(key, ImmutableMap(), map => map.set(id, height));\n};\n\nconst clearHeights = () => {\n  return ImmutableMap();\n};\n\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case HEIGHT_CACHE_SET:\n    return setHeight(state, action.key, action.id, action.height);\n  case HEIGHT_CACHE_CLEAR:\n    return clearHeights();\n  default:\n    return state;\n  }\n}\n","import api from '../api';\n\nimport { importFetchedAccounts } from './importer';\n\nexport const HISTORY_FETCH_REQUEST = 'HISTORY_FETCH_REQUEST';\nexport const HISTORY_FETCH_SUCCESS = 'HISTORY_FETCH_SUCCESS';\nexport const HISTORY_FETCH_FAIL    = 'HISTORY_FETCH_FAIL';\n\nexport const fetchHistory = statusId => (dispatch, getState) => {\n  const loading = getState().getIn(['history', statusId, 'loading']);\n\n  if (loading) {\n    return;\n  }\n\n  dispatch(fetchHistoryRequest(statusId));\n\n  api().get(`/api/v1/statuses/${statusId}/history`).then(({ data }) => {\n    dispatch(importFetchedAccounts(data.map(x => x.account)));\n    dispatch(fetchHistorySuccess(statusId, data));\n  }).catch(error => dispatch(fetchHistoryFail(error)));\n};\n\nexport const fetchHistoryRequest = statusId => ({\n  type: HISTORY_FETCH_REQUEST,\n  statusId,\n});\n\nexport const fetchHistorySuccess = (statusId, history) => ({\n  type: HISTORY_FETCH_SUCCESS,\n  statusId,\n  history,\n});\n\nexport const fetchHistoryFail = error => ({\n  type: HISTORY_FETCH_FAIL,\n  error,\n});\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport { HISTORY_FETCH_REQUEST, HISTORY_FETCH_SUCCESS, HISTORY_FETCH_FAIL } from 'mastodon/actions/history';\n\nconst initialHistory = ImmutableMap({\n  loading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap();\n\nexport default function history(state = initialState, action) {\n  switch(action.type) {\n  case HISTORY_FETCH_REQUEST:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', true);\n      map.set('items', ImmutableList());\n    }));\n  case HISTORY_FETCH_SUCCESS:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', false);\n      map.set('items', fromJS(action.history.map((x, i) => ({ ...x, account: x.account.id, original: i === 0 })).reverse()));\n    }));\n  case HISTORY_FETCH_FAIL:\n    return state.update(action.statusId, initialHistory, history => history.set('loading', false));\n  default:\n    return state;\n  }\n}\n","import {\n  apiRequestPost,\n  apiRequestPut,\n  apiRequestGet,\n  apiRequestDelete,\n} from 'mastodon/api';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\nimport type { ApiListJSON } from 'mastodon/api_types/lists';\n\nexport const apiCreate = (list: Partial<ApiListJSON>) =>\n  apiRequestPost<ApiListJSON>('v1/lists', list);\n\nexport const apiUpdate = (list: Partial<ApiListJSON>) =>\n  apiRequestPut<ApiListJSON>(`v1/lists/${list.id}`, list);\n\nexport const apiGetLists = () => apiRequestGet<ApiListJSON[]>('v1/lists');\n\nexport const apiGetAccounts = (listId: string) =>\n  apiRequestGet<ApiAccountJSON[]>(`v1/lists/${listId}/accounts`, {\n    limit: 0,\n  });\n\nexport const apiGetAccountLists = (accountId: string) =>\n  apiRequestGet<ApiListJSON[]>(`v1/accounts/${accountId}/lists`);\n\nexport const apiAddAccountToList = (listId: string, accountId: string) =>\n  apiRequestPost(`v1/lists/${listId}/accounts`, {\n    account_ids: [accountId],\n  });\n\nexport const apiRemoveAccountFromList = (listId: string, accountId: string) =>\n  apiRequestDelete(`v1/lists/${listId}/accounts`, {\n    account_ids: [accountId],\n  });\n","import { apiCreate, apiUpdate, apiGetLists } from 'mastodon/api/lists';\nimport type { List } from 'mastodon/models/list';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nexport const createList = createDataLoadingThunk(\n  'list/create',\n  (list: Partial<List>) => apiCreate(list),\n);\n\nexport const updateList = createDataLoadingThunk(\n  'list/update',\n  (list: Partial<List>) => apiUpdate(list),\n);\n\nexport const fetchLists = createDataLoadingThunk('lists/fetch', () =>\n  apiGetLists(),\n);\n","import type { RecordOf } from 'immutable';\nimport { Record } from 'immutable';\n\nimport type { ApiListJSON } from 'mastodon/api_types/lists';\n\ntype ListShape = Required<ApiListJSON>; // no changes from server shape\nexport type List = RecordOf<ListShape>;\n\nconst ListFactory = Record<ListShape>({\n  id: '',\n  title: '',\n  exclusive: false,\n  replies_policy: 'list',\n});\n\nexport function createList(attributes: Partial<ListShape>) {\n  return ListFactory(attributes);\n}\n","import api from '../api';\n\nexport const LIST_FETCH_REQUEST = 'LIST_FETCH_REQUEST';\nexport const LIST_FETCH_SUCCESS = 'LIST_FETCH_SUCCESS';\nexport const LIST_FETCH_FAIL    = 'LIST_FETCH_FAIL';\n\nexport const LIST_DELETE_REQUEST = 'LIST_DELETE_REQUEST';\nexport const LIST_DELETE_SUCCESS = 'LIST_DELETE_SUCCESS';\nexport const LIST_DELETE_FAIL    = 'LIST_DELETE_FAIL';\n\nexport * from './lists_typed';\n\nexport const fetchList = id => (dispatch, getState) => {\n  if (getState().getIn(['lists', id])) {\n    return;\n  }\n\n  dispatch(fetchListRequest(id));\n\n  api().get(`/api/v1/lists/${id}`)\n    .then(({ data }) => dispatch(fetchListSuccess(data)))\n    .catch(err => dispatch(fetchListFail(id, err)));\n};\n\nexport const fetchListRequest = id => ({\n  type: LIST_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchListSuccess = list => ({\n  type: LIST_FETCH_SUCCESS,\n  list,\n});\n\nexport const fetchListFail = (id, error) => ({\n  type: LIST_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const deleteList = id => (dispatch) => {\n  dispatch(deleteListRequest(id));\n\n  api().delete(`/api/v1/lists/${id}`)\n    .then(() => dispatch(deleteListSuccess(id)))\n    .catch(err => dispatch(deleteListFail(id, err)));\n};\n\nexport const deleteListRequest = id => ({\n  type: LIST_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteListSuccess = id => ({\n  type: LIST_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteListFail = (id, error) => ({\n  type: LIST_DELETE_FAIL,\n  id,\n  error,\n});\n","import type { Reducer } from '@reduxjs/toolkit';\nimport { Map as ImmutableMap } from 'immutable';\n\nimport {\n  createList,\n  updateList,\n  fetchLists,\n} from 'mastodon/actions/lists_typed';\nimport type { ApiListJSON } from 'mastodon/api_types/lists';\nimport { createList as createListFromJSON } from 'mastodon/models/list';\nimport type { List } from 'mastodon/models/list';\n\nimport {\n  LIST_FETCH_SUCCESS,\n  LIST_FETCH_FAIL,\n  LIST_DELETE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap<string, List | null>();\ntype State = typeof initialState;\n\nconst normalizeList = (state: State, list: ApiListJSON) =>\n  state.set(list.id, createListFromJSON(list));\n\nconst normalizeLists = (state: State, lists: ApiListJSON[]) => {\n  lists.forEach((list) => {\n    state = normalizeList(state, list);\n  });\n\n  return state;\n};\n\nexport const listsReducer: Reducer<State> = (state = initialState, action) => {\n  if (\n    createList.fulfilled.match(action) ||\n    updateList.fulfilled.match(action)\n  ) {\n    return normalizeList(state, action.payload);\n  } else if (fetchLists.fulfilled.match(action)) {\n    return normalizeLists(state, action.payload);\n  } else {\n    switch (action.type) {\n      case LIST_FETCH_SUCCESS:\n        return normalizeList(state, action.list as ApiListJSON);\n      case LIST_DELETE_SUCCESS:\n      case LIST_FETCH_FAIL:\n        return state.set(action.id as string, null);\n      default:\n        return state;\n    }\n  }\n};\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { submitMarkersAction, fetchMarkers } from 'mastodon/actions/markers';\nimport { compareId } from 'mastodon/compare_id';\n\nconst initialState = {\n  home: '0',\n  notifications: '0',\n};\n\nexport const markersReducer = createReducer(initialState, (builder) => {\n  builder.addCase(\n    submitMarkersAction.fulfilled,\n    (state, { payload: { home, notifications } }) => {\n      if (home) state.home = home;\n      if (notifications) state.notifications = notifications;\n    },\n  );\n  builder.addCase(\n    fetchMarkers.fulfilled,\n    (\n      state,\n      {\n        payload: {\n          markers: { home, notifications },\n        },\n      },\n    ) => {\n      if (home && compareId(home.last_read_id, state.home) > 0)\n        state.home = home.last_read_id;\n      if (\n        notifications &&\n        compareId(notifications.last_read_id, state.notifications) > 0\n      )\n        state.notifications = notifications.last_read_id;\n    },\n  );\n});\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { STORE_HYDRATE } from '../actions/store';\n\nconst initialState = ImmutableMap({\n  accept_content_types: [],\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return state.merge(action.state.get('media_attachments'));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { changeLayout } from 'mastodon/actions/app';\nimport { STORE_HYDRATE } from 'mastodon/actions/store';\nimport { layoutFromWindow } from 'mastodon/is_mobile';\n\nconst initialState = ImmutableMap({\n  streaming_api_base_url: null,\n  layout: layoutFromWindow(),\n  permissions: '0',\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    // we do not want `access_token` to be stored in the state\n    return state.merge(action.state.get('meta')).delete('access_token').set('permissions', action.state.getIn(['role', 'permissions']));\n  case changeLayout.type:\n    return state.set('layout', action.payload.layout);\n  default:\n    return state;\n  }\n}\n","import type { Reducer } from '@reduxjs/toolkit';\nimport { Record as ImmutableRecord, Stack } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport type { ModalType } from '../actions/modal';\nimport { openModal, closeModal } from '../actions/modal';\n\nexport type ModalProps = Record<string, unknown>;\ninterface Modal {\n  modalType: ModalType;\n  modalProps: ModalProps;\n}\n\nconst Modal = ImmutableRecord<Modal>({\n  modalType: 'ACTIONS',\n  modalProps: ImmutableRecord({})(),\n});\n\ninterface ModalState {\n  ignoreFocus: boolean;\n  stack: Stack<ImmutableRecord<Modal>>;\n}\n\nconst initialState = ImmutableRecord<ModalState>({\n  ignoreFocus: false,\n  stack: Stack(),\n})();\ntype State = typeof initialState;\n\ninterface PopModalOption {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nconst popModal = (\n  state: State,\n  { modalType, ignoreFocus }: PopModalOption,\n): State => {\n  if (\n    modalType === undefined ||\n    modalType === state.get('stack').get(0)?.get('modalType')\n  ) {\n    return state\n      .set('ignoreFocus', !!ignoreFocus)\n      .update('stack', (stack) => stack.shift());\n  } else {\n    return state;\n  }\n};\n\nconst pushModal = (\n  state: State,\n  modalType: ModalType,\n  modalProps: ModalProps,\n  previousModalProps?: ModalProps,\n): State => {\n  return state.withMutations((record) => {\n    record.set('ignoreFocus', false);\n    record.update('stack', (stack) => {\n      let tmp = stack;\n\n      // With this option, we update the previously opened modal, so that when the\n      // current (new) modal is closed, the previous modal is re-opened with different\n      // props. Specifically, this is useful for the confirmation modal.\n      if (previousModalProps) {\n        const previousModal = tmp.first() as Modal | undefined;\n\n        if (previousModal) {\n          tmp = tmp.shift().unshift(\n            Modal({\n              modalType: previousModal.modalType,\n              modalProps: {\n                ...previousModal.modalProps,\n                ...previousModalProps,\n              },\n            }),\n          );\n        }\n      }\n\n      tmp = tmp.unshift(Modal({ modalType, modalProps }));\n\n      return tmp;\n    });\n  });\n};\n\nexport const modalReducer: Reducer<State> = (state = initialState, action) => {\n  if (openModal.match(action))\n    return pushModal(\n      state,\n      action.payload.modalType,\n      action.payload.modalProps,\n      action.payload.previousModalProps,\n    );\n  else if (closeModal.match(action)) return popModal(state, action.payload);\n  // TODO: type those actions\n  else if (timelineDelete.match(action))\n    return state.update('stack', (stack) =>\n      stack.filterNot(\n        (modal) => modal.get('modalProps').statusId === action.payload.statusId,\n      ),\n    );\n  else return state;\n};\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const openNavigation = createAction('navigation/open');\n\nexport const closeNavigation = createAction('navigation/close');\n\nexport const toggleNavigation = createAction('navigation/toggle');\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport {\n  openNavigation,\n  closeNavigation,\n  toggleNavigation,\n} from 'mastodon/actions/navigation';\n\ninterface State {\n  open: boolean;\n}\n\nconst initialState: State = {\n  open: false,\n};\n\nexport const navigationReducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(openNavigation, (state) => {\n      state.open = true;\n    })\n    .addCase(closeNavigation, (state) => {\n      state.open = false;\n    })\n    .addCase(toggleNavigation, (state) => {\n      state.open = !state.open;\n    });\n});\n","import type {\n  ApiAccountRelationshipSeveranceEventJSON,\n  ApiAccountWarningJSON,\n  ApiAnnualReportEventJSON,\n  BaseNotificationGroupJSON,\n  ApiNotificationGroupJSON,\n  ApiNotificationJSON,\n  NotificationType,\n  NotificationWithStatusType,\n} from 'mastodon/api_types/notifications';\nimport type { ApiReportJSON } from 'mastodon/api_types/reports';\n\n// Maximum number of avatars displayed in a notification group\n// This corresponds to the max lenght of `group.sampleAccountIds`\nexport const NOTIFICATIONS_GROUP_MAX_AVATARS = 8;\n\ninterface BaseNotificationGroup\n  extends Omit<BaseNotificationGroupJSON, 'sample_account_ids'> {\n  sampleAccountIds: string[];\n  partial: boolean;\n}\n\ninterface BaseNotificationWithStatus<Type extends NotificationWithStatusType>\n  extends BaseNotificationGroup {\n  type: Type;\n  statusId: string | undefined;\n}\n\ninterface BaseNotification<Type extends NotificationType>\n  extends BaseNotificationGroup {\n  type: Type;\n}\n\nexport type NotificationGroupFavourite =\n  BaseNotificationWithStatus<'favourite'>;\nexport type NotificationGroupReblog = BaseNotificationWithStatus<'reblog'>;\nexport type NotificationGroupStatus = BaseNotificationWithStatus<'status'>;\nexport type NotificationGroupMention = BaseNotificationWithStatus<'mention'>;\nexport type NotificationGroupPoll = BaseNotificationWithStatus<'poll'>;\nexport type NotificationGroupUpdate = BaseNotificationWithStatus<'update'>;\nexport type NotificationGroupFollow = BaseNotification<'follow'>;\nexport type NotificationGroupFollowRequest = BaseNotification<'follow_request'>;\nexport type NotificationGroupAdminSignUp = BaseNotification<'admin.sign_up'>;\n\nexport type AccountWarningAction =\n  | 'none'\n  | 'disable'\n  | 'mark_statuses_as_sensitive'\n  | 'delete_statuses'\n  | 'sensitive'\n  | 'silence'\n  | 'suspend';\nexport interface AccountWarning\n  extends Omit<ApiAccountWarningJSON, 'target_account'> {\n  targetAccountId: string;\n}\n\nexport interface NotificationGroupModerationWarning\n  extends BaseNotification<'moderation_warning'> {\n  moderationWarning: AccountWarning;\n}\n\ntype AccountRelationshipSeveranceEvent =\n  ApiAccountRelationshipSeveranceEventJSON;\nexport interface NotificationGroupSeveredRelationships\n  extends BaseNotification<'severed_relationships'> {\n  event: AccountRelationshipSeveranceEvent;\n}\n\ntype AnnualReportEvent = ApiAnnualReportEventJSON;\nexport interface NotificationGroupAnnualReport\n  extends BaseNotification<'annual_report'> {\n  annualReport: AnnualReportEvent;\n}\n\ninterface Report extends Omit<ApiReportJSON, 'target_account'> {\n  targetAccountId: string;\n}\n\nexport interface NotificationGroupAdminReport\n  extends BaseNotification<'admin.report'> {\n  report: Report;\n}\n\nexport type NotificationGroup =\n  | NotificationGroupFavourite\n  | NotificationGroupReblog\n  | NotificationGroupStatus\n  | NotificationGroupMention\n  | NotificationGroupPoll\n  | NotificationGroupUpdate\n  | NotificationGroupFollow\n  | NotificationGroupFollowRequest\n  | NotificationGroupModerationWarning\n  | NotificationGroupSeveredRelationships\n  | NotificationGroupAdminSignUp\n  | NotificationGroupAdminReport\n  | NotificationGroupAnnualReport;\n\nfunction createReportFromJSON(reportJSON: ApiReportJSON): Report {\n  const { target_account, ...report } = reportJSON;\n  return {\n    targetAccountId: target_account.id,\n    ...report,\n  };\n}\n\nfunction createAccountWarningFromJSON(\n  warningJSON: ApiAccountWarningJSON,\n): AccountWarning {\n  const { target_account, ...warning } = warningJSON;\n  return {\n    targetAccountId: target_account.id,\n    ...warning,\n  };\n}\n\nfunction createAccountRelationshipSeveranceEventFromJSON(\n  eventJson: ApiAccountRelationshipSeveranceEventJSON,\n): AccountRelationshipSeveranceEvent {\n  return eventJson;\n}\n\nfunction createAnnualReportEventFromJSON(\n  eventJson: ApiAnnualReportEventJSON,\n): AnnualReportEvent {\n  return eventJson;\n}\n\nexport function createNotificationGroupFromJSON(\n  groupJson: ApiNotificationGroupJSON,\n): NotificationGroup {\n  const { sample_account_ids: sampleAccountIds, ...group } = groupJson;\n\n  switch (group.type) {\n    case 'favourite':\n    case 'reblog':\n    case 'status':\n    case 'mention':\n    case 'poll':\n    case 'update': {\n      const { status_id: statusId, ...groupWithoutStatus } = group;\n      return {\n        statusId: statusId ?? undefined,\n        sampleAccountIds,\n        partial: false,\n        ...groupWithoutStatus,\n      };\n    }\n    case 'admin.report': {\n      const { report, ...groupWithoutTargetAccount } = group;\n      return {\n        report: createReportFromJSON(report),\n        sampleAccountIds,\n        partial: false,\n        ...groupWithoutTargetAccount,\n      };\n    }\n    case 'severed_relationships':\n      return {\n        ...group,\n        partial: false,\n        event: createAccountRelationshipSeveranceEventFromJSON(group.event),\n        sampleAccountIds,\n      };\n    case 'moderation_warning': {\n      const { moderation_warning, ...groupWithoutModerationWarning } = group;\n      return {\n        ...groupWithoutModerationWarning,\n        partial: false,\n        moderationWarning: createAccountWarningFromJSON(moderation_warning),\n        sampleAccountIds,\n      };\n    }\n    case 'annual_report': {\n      const { annual_report, ...groupWithoutAnnualReport } = group;\n      return {\n        ...groupWithoutAnnualReport,\n        partial: false,\n        annualReport: createAnnualReportEventFromJSON(annual_report),\n        sampleAccountIds,\n      };\n    }\n    default:\n      return {\n        sampleAccountIds,\n        partial: false,\n        ...group,\n      };\n  }\n}\n\nexport function createNotificationGroupFromNotificationJSON(\n  notification: ApiNotificationJSON,\n): NotificationGroup {\n  const group = {\n    sampleAccountIds: [notification.account.id],\n    group_key: notification.group_key,\n    notifications_count: 1,\n    most_recent_notification_id: notification.id,\n    page_min_id: notification.id,\n    page_max_id: notification.id,\n    latest_page_notification_at: notification.created_at,\n    partial: true,\n  };\n\n  switch (notification.type) {\n    case 'favourite':\n    case 'reblog':\n    case 'status':\n    case 'mention':\n    case 'poll':\n    case 'update':\n      return {\n        ...group,\n        type: notification.type,\n        statusId: notification.status?.id,\n      };\n    case 'admin.report':\n      return {\n        ...group,\n        type: notification.type,\n        report: createReportFromJSON(notification.report),\n      };\n    case 'severed_relationships':\n      return {\n        ...group,\n        type: notification.type,\n        event: createAccountRelationshipSeveranceEventFromJSON(\n          notification.event,\n        ),\n      };\n    case 'moderation_warning':\n      return {\n        ...group,\n        type: notification.type,\n        moderationWarning: createAccountWarningFromJSON(\n          notification.moderation_warning,\n        ),\n      };\n    default:\n      return {\n        ...group,\n        type: notification.type,\n      };\n  }\n}\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  authorizeFollowRequestSuccess,\n  blockAccountSuccess,\n  muteAccountSuccess,\n  rejectFollowRequestSuccess,\n} from 'mastodon/actions/accounts_typed';\nimport { focusApp, unfocusApp } from 'mastodon/actions/app';\nimport { blockDomainSuccess } from 'mastodon/actions/domain_blocks_typed';\nimport { fetchMarkers } from 'mastodon/actions/markers';\nimport {\n  clearNotifications,\n  fetchNotifications,\n  fetchNotificationsGap,\n  processNewNotificationForGroups,\n  loadPending,\n  updateScrollPosition,\n  markNotificationsAsRead,\n  mountNotifications,\n  unmountNotifications,\n  refreshStaleNotificationGroups,\n  pollRecentNotifications,\n} from 'mastodon/actions/notification_groups';\nimport {\n  disconnectTimeline,\n  timelineDelete,\n} from 'mastodon/actions/timelines_typed';\nimport type {\n  ApiNotificationJSON,\n  ApiNotificationGroupJSON,\n  NotificationType,\n} from 'mastodon/api_types/notifications';\nimport { compareId } from 'mastodon/compare_id';\nimport { usePendingItems } from 'mastodon/initial_state';\nimport {\n  NOTIFICATIONS_GROUP_MAX_AVATARS,\n  createNotificationGroupFromJSON,\n  createNotificationGroupFromNotificationJSON,\n} from 'mastodon/models/notification_group';\nimport type { NotificationGroup } from 'mastodon/models/notification_group';\n\nconst NOTIFICATIONS_TRIM_LIMIT = 50;\n\nexport interface NotificationGap {\n  type: 'gap';\n  maxId?: string;\n  sinceId?: string;\n}\n\ninterface NotificationGroupsState {\n  groups: (NotificationGroup | NotificationGap)[];\n  pendingGroups: (NotificationGroup | NotificationGap)[];\n  scrolledToTop: boolean;\n  isLoading: boolean;\n  lastReadId: string;\n  readMarkerId: string;\n  mounted: number;\n  isTabVisible: boolean;\n  mergedNotifications: 'ok' | 'pending' | 'needs-reload';\n}\n\nconst initialState: NotificationGroupsState = {\n  groups: [],\n  pendingGroups: [], // holds pending groups in slow mode\n  scrolledToTop: false,\n  isLoading: false,\n  // this is used to track whether we need to refresh notifications after accepting requests\n  mergedNotifications: 'ok',\n  // The following properties are used to track unread notifications\n  lastReadId: '0', // used internally for unread notifications\n  readMarkerId: '0', // user-facing and updated when focus changes\n  mounted: 0, // number of mounted notification list components, usually 0 or 1\n  isTabVisible: true,\n};\n\nfunction filterNotificationsForAccounts(\n  groups: NotificationGroupsState['groups'],\n  accountIds: string[],\n  onlyForType?: string,\n) {\n  groups = groups\n    .map((group) => {\n      if (\n        group.type !== 'gap' &&\n        (!onlyForType || group.type === onlyForType)\n      ) {\n        const previousLength = group.sampleAccountIds.length;\n\n        group.sampleAccountIds = group.sampleAccountIds.filter(\n          (id) => !accountIds.includes(id),\n        );\n\n        const newLength = group.sampleAccountIds.length;\n        const removed = previousLength - newLength;\n\n        group.notifications_count -= removed;\n      }\n\n      return group;\n    })\n    .filter(\n      (group) => group.type === 'gap' || group.sampleAccountIds.length > 0,\n    );\n  mergeGaps(groups);\n  return groups;\n}\n\nfunction filterNotificationsForStatus(\n  groups: NotificationGroupsState['groups'],\n  statusId: string,\n) {\n  groups = groups.filter(\n    (group) =>\n      group.type === 'gap' ||\n      !('statusId' in group) ||\n      group.statusId !== statusId,\n  );\n  mergeGaps(groups);\n  return groups;\n}\n\nfunction removeNotificationsForAccounts(\n  state: NotificationGroupsState,\n  accountIds: string[],\n  onlyForType?: string,\n) {\n  state.groups = filterNotificationsForAccounts(\n    state.groups,\n    accountIds,\n    onlyForType,\n  );\n  state.pendingGroups = filterNotificationsForAccounts(\n    state.pendingGroups,\n    accountIds,\n    onlyForType,\n  );\n}\n\nfunction removeNotificationsForStatus(\n  state: NotificationGroupsState,\n  statusId: string,\n) {\n  state.groups = filterNotificationsForStatus(state.groups, statusId);\n  state.pendingGroups = filterNotificationsForStatus(\n    state.pendingGroups,\n    statusId,\n  );\n}\n\nfunction isNotificationGroup(\n  groupOrGap: NotificationGroup | NotificationGap,\n): groupOrGap is NotificationGroup {\n  return groupOrGap.type !== 'gap';\n}\n\n// Merge adjacent gaps in `groups` in-place\nfunction mergeGaps(groups: NotificationGroupsState['groups']) {\n  for (let i = 0; i < groups.length; i++) {\n    const firstGroupOrGap = groups[i];\n\n    if (firstGroupOrGap?.type === 'gap') {\n      let lastGap = firstGroupOrGap;\n      let j = i + 1;\n\n      for (; j < groups.length; j++) {\n        const groupOrGap = groups[j];\n        if (groupOrGap?.type === 'gap') lastGap = groupOrGap;\n        else break;\n      }\n\n      if (j - i > 1) {\n        groups.splice(i, j - i, {\n          type: 'gap',\n          maxId: firstGroupOrGap.maxId,\n          sinceId: lastGap.sinceId,\n        });\n      }\n    }\n  }\n}\n\n// Checks if `groups[index-1]` and `groups[index]` are gaps, and merge them in-place if they are\nfunction mergeGapsAround(\n  groups: NotificationGroupsState['groups'],\n  index: number,\n) {\n  if (index > 0) {\n    const potentialFirstGap = groups[index - 1];\n    const potentialSecondGap = groups[index];\n\n    if (\n      potentialFirstGap?.type === 'gap' &&\n      potentialSecondGap?.type === 'gap'\n    ) {\n      groups.splice(index - 1, 2, {\n        type: 'gap',\n        maxId: potentialFirstGap.maxId,\n        sinceId: potentialSecondGap.sinceId,\n      });\n    }\n  }\n}\n\nfunction processNewNotification(\n  groups: NotificationGroupsState['groups'],\n  notification: ApiNotificationJSON,\n  groupedTypes: NotificationType[],\n) {\n  if (!groupedTypes.includes(notification.type)) {\n    notification = {\n      ...notification,\n      group_key: `ungrouped-${notification.id}`,\n    };\n  }\n\n  const existingGroupIndex = groups.findIndex(\n    (group) =>\n      group.type !== 'gap' && group.group_key === notification.group_key,\n  );\n\n  // In any case, we are going to add a group at the top\n  // If there is currently a gap at the top, now is the time to update it\n  if (groups.length > 0 && groups[0]?.type === 'gap') {\n    groups[0].maxId = notification.id;\n  }\n\n  if (existingGroupIndex > -1) {\n    const existingGroup = groups[existingGroupIndex];\n\n    if (\n      existingGroup &&\n      existingGroup.type !== 'gap' &&\n      !existingGroup.sampleAccountIds.includes(notification.account.id) // This can happen for example if you like, then unlike, then like again the same post\n    ) {\n      // Update the existing group\n      if (\n        existingGroup.sampleAccountIds.unshift(notification.account.id) >\n        NOTIFICATIONS_GROUP_MAX_AVATARS\n      )\n        existingGroup.sampleAccountIds.pop();\n\n      existingGroup.most_recent_notification_id = notification.id;\n      existingGroup.page_max_id = notification.id;\n      existingGroup.latest_page_notification_at = notification.created_at;\n      existingGroup.notifications_count += 1;\n\n      groups.splice(existingGroupIndex, 1);\n      mergeGapsAround(groups, existingGroupIndex);\n\n      groups.unshift(existingGroup);\n    }\n  } else {\n    // We have not found an existing group, create a new one\n    groups.unshift(createNotificationGroupFromNotificationJSON(notification));\n  }\n}\n\nfunction trimNotifications(state: NotificationGroupsState) {\n  if (state.scrolledToTop && state.groups.length > NOTIFICATIONS_TRIM_LIMIT) {\n    state.groups.splice(NOTIFICATIONS_TRIM_LIMIT);\n    ensureTrailingGap(state.groups);\n  }\n}\n\nfunction shouldMarkNewNotificationsAsRead(\n  {\n    isTabVisible,\n    scrolledToTop,\n    mounted,\n    lastReadId,\n    groups,\n  }: NotificationGroupsState,\n  ignoreScroll = false,\n) {\n  const isMounted = mounted > 0;\n  const oldestGroup = groups.findLast(isNotificationGroup);\n  const hasMore = groups.at(-1)?.type === 'gap';\n  const oldestGroupReached =\n    !hasMore ||\n    lastReadId === '0' ||\n    (oldestGroup?.page_min_id &&\n      compareId(oldestGroup.page_min_id, lastReadId) <= 0);\n\n  return (\n    isTabVisible &&\n    (ignoreScroll || scrolledToTop) &&\n    isMounted &&\n    oldestGroupReached\n  );\n}\n\nfunction updateLastReadId(\n  state: NotificationGroupsState,\n  group: NotificationGroup | undefined = undefined,\n) {\n  if (shouldMarkNewNotificationsAsRead(state)) {\n    group = group ?? state.groups.find(isNotificationGroup);\n    if (\n      group?.page_max_id &&\n      compareId(state.lastReadId, group.page_max_id) < 0\n    )\n      state.lastReadId = group.page_max_id;\n  }\n}\n\nfunction commitLastReadId(state: NotificationGroupsState) {\n  if (shouldMarkNewNotificationsAsRead(state)) {\n    state.readMarkerId = state.lastReadId;\n  }\n}\n\nfunction fillNotificationsGap(\n  groups: NotificationGroupsState['groups'],\n  gap: NotificationGap,\n  notifications: ApiNotificationGroupJSON[],\n): NotificationGroupsState['groups'] {\n  // find the gap in the existing notifications\n  const gapIndex = groups.findIndex(\n    (groupOrGap) =>\n      groupOrGap.type === 'gap' &&\n      groupOrGap.sinceId === gap.sinceId &&\n      groupOrGap.maxId === gap.maxId,\n  );\n\n  if (gapIndex < 0)\n    // We do not know where to insert, let's return\n    return groups;\n\n  // Filling a disconnection gap means we're getting historical data\n  // about groups we may know or may not know about.\n\n  // The notifications timeline is split in two by the gap, with\n  // group information newer than the gap, and group information older\n  // than the gap.\n\n  // Filling a gap should not touch anything before the gap, so any\n  // information on groups already appearing before the gap should be\n  // discarded, while any information on groups appearing after the gap\n  // can be updated and re-ordered.\n\n  const oldestPageNotification = notifications.at(-1)?.page_min_id;\n\n  // replace the gap with the notifications + a new gap\n\n  const newerGroupKeys = groups\n    .slice(0, gapIndex)\n    .filter(isNotificationGroup)\n    .map((group) => group.group_key);\n\n  const toInsert: NotificationGroupsState['groups'] = notifications\n    .map((json) => createNotificationGroupFromJSON(json))\n    .filter((notification) => !newerGroupKeys.includes(notification.group_key));\n\n  const apiGroupKeys = (toInsert as NotificationGroup[]).map(\n    (group) => group.group_key,\n  );\n\n  const sinceId = gap.sinceId;\n  if (\n    notifications.length > 0 &&\n    !(\n      oldestPageNotification &&\n      sinceId &&\n      compareId(oldestPageNotification, sinceId) <= 0\n    )\n  ) {\n    // If we get an empty page, it means we reached the bottom, so we do not need to insert a new gap\n    // Similarly, if we've fetched more than the gap's, this means we have completely filled it\n    toInsert.push({\n      type: 'gap',\n      maxId: notifications.at(-1)?.page_max_id,\n      sinceId,\n    } as NotificationGap);\n  }\n\n  // Remove older groups covered by the API\n  groups = groups.filter(\n    (groupOrGap) =>\n      groupOrGap.type !== 'gap' && !apiGroupKeys.includes(groupOrGap.group_key),\n  );\n\n  // Replace the gap with API results (+ the new gap if needed)\n  groups.splice(gapIndex, 1, ...toInsert);\n\n  // Finally, merge any adjacent gaps that could have been created by filtering\n  // groups earlier\n  mergeGaps(groups);\n\n  return groups;\n}\n\n// Ensure the groups list starts with a gap, mutating it to prepend one if needed\nfunction ensureLeadingGap(\n  groups: NotificationGroupsState['groups'],\n): NotificationGap {\n  if (groups[0]?.type === 'gap') {\n    // We're expecting new notifications, so discard the maxId if there is one\n    groups[0].maxId = undefined;\n\n    return groups[0];\n  } else {\n    const gap: NotificationGap = {\n      type: 'gap',\n      sinceId: groups[0]?.page_min_id,\n    };\n\n    groups.unshift(gap);\n    return gap;\n  }\n}\n\n// Ensure the groups list ends with a gap suitable for loading more, mutating it to append one if needed\nfunction ensureTrailingGap(\n  groups: NotificationGroupsState['groups'],\n): NotificationGap {\n  const groupOrGap = groups.at(-1);\n\n  if (groupOrGap?.type === 'gap') {\n    // We're expecting older notifications, so discard sinceId if it's set\n    groupOrGap.sinceId = undefined;\n\n    return groupOrGap;\n  } else {\n    const gap: NotificationGap = {\n      type: 'gap',\n      maxId: groupOrGap?.page_min_id,\n    };\n\n    groups.push(gap);\n    return gap;\n  }\n}\n\nexport const notificationGroupsReducer = createReducer<NotificationGroupsState>(\n  initialState,\n  (builder) => {\n    builder\n      .addCase(fetchNotifications.fulfilled, (state, action) => {\n        state.groups = action.payload.map((json) =>\n          json.type === 'gap' ? json : createNotificationGroupFromJSON(json),\n        );\n        state.isLoading = false;\n        state.mergedNotifications = 'ok';\n        updateLastReadId(state);\n      })\n      .addCase(fetchNotificationsGap.fulfilled, (state, action) => {\n        state.groups = fillNotificationsGap(\n          state.groups,\n          action.meta.arg.gap,\n          action.payload.notifications,\n        );\n        state.isLoading = false;\n\n        updateLastReadId(state);\n      })\n      .addCase(pollRecentNotifications.fulfilled, (state, action) => {\n        if (usePendingItems) {\n          const gap = ensureLeadingGap(state.pendingGroups);\n          state.pendingGroups = fillNotificationsGap(\n            state.pendingGroups,\n            gap,\n            action.payload.notifications,\n          );\n        } else {\n          const gap = ensureLeadingGap(state.groups);\n          state.groups = fillNotificationsGap(\n            state.groups,\n            gap,\n            action.payload.notifications,\n          );\n        }\n\n        state.isLoading = false;\n\n        updateLastReadId(state);\n        trimNotifications(state);\n      })\n      .addCase(processNewNotificationForGroups.fulfilled, (state, action) => {\n        if (action.payload) {\n          const { notification, groupedTypes } = action.payload;\n\n          processNewNotification(\n            usePendingItems ? state.pendingGroups : state.groups,\n            notification,\n            groupedTypes,\n          );\n          updateLastReadId(state);\n          trimNotifications(state);\n        }\n      })\n      .addCase(disconnectTimeline, (state, action) => {\n        if (action.payload.timeline === 'home') {\n          const groups = usePendingItems ? state.pendingGroups : state.groups;\n          if (groups.length > 0 && groups[0]?.type !== 'gap') {\n            groups.unshift({\n              type: 'gap',\n              sinceId: groups[0]?.page_min_id,\n            });\n          }\n        }\n      })\n      .addCase(timelineDelete, (state, action) => {\n        removeNotificationsForStatus(state, action.payload.statusId);\n      })\n      .addCase(clearNotifications.pending, (state) => {\n        state.groups = [];\n        state.pendingGroups = [];\n      })\n      .addCase(blockAccountSuccess, (state, action) => {\n        removeNotificationsForAccounts(state, [action.payload.relationship.id]);\n      })\n      .addCase(muteAccountSuccess, (state, action) => {\n        if (action.payload.relationship.muting_notifications)\n          removeNotificationsForAccounts(state, [\n            action.payload.relationship.id,\n          ]);\n      })\n      .addCase(blockDomainSuccess, (state, action) => {\n        removeNotificationsForAccounts(\n          state,\n          action.payload.accounts.map((account) => account.id),\n        );\n      })\n      .addCase(loadPending, (state) => {\n        // First, remove any existing group and merge data\n        state.pendingGroups.forEach((group) => {\n          if (group.type !== 'gap') {\n            const existingGroupIndex = state.groups.findIndex(\n              (groupOrGap) =>\n                isNotificationGroup(groupOrGap) &&\n                groupOrGap.group_key === group.group_key,\n            );\n            if (existingGroupIndex > -1) {\n              const existingGroup = state.groups[existingGroupIndex];\n              if (existingGroup && existingGroup.type !== 'gap') {\n                if (group.partial) {\n                  group.notifications_count +=\n                    existingGroup.notifications_count;\n                  group.sampleAccountIds = group.sampleAccountIds\n                    .concat(existingGroup.sampleAccountIds)\n                    .slice(0, NOTIFICATIONS_GROUP_MAX_AVATARS);\n                }\n                state.groups.splice(existingGroupIndex, 1);\n              }\n            }\n          }\n        });\n\n        // Then build the consolidated list and clear pending groups\n        state.groups = state.pendingGroups.concat(state.groups);\n        state.pendingGroups = [];\n        mergeGaps(state.groups);\n        trimNotifications(state);\n      })\n      .addCase(updateScrollPosition.fulfilled, (state, action) => {\n        state.scrolledToTop = action.payload.top;\n        updateLastReadId(state);\n        trimNotifications(state);\n      })\n      .addCase(markNotificationsAsRead, (state) => {\n        const mostRecentGroup = state.groups.find(isNotificationGroup);\n        if (\n          mostRecentGroup?.page_max_id &&\n          compareId(state.lastReadId, mostRecentGroup.page_max_id) < 0\n        )\n          state.lastReadId = mostRecentGroup.page_max_id;\n\n        // We don't call `commitLastReadId`, because that is conditional\n        // and we want to unconditionally update the state instead.\n        state.readMarkerId = state.lastReadId;\n      })\n      .addCase(fetchMarkers.fulfilled, (state, action) => {\n        if (\n          action.payload.markers.notifications &&\n          compareId(\n            state.lastReadId,\n            action.payload.markers.notifications.last_read_id,\n          ) < 0\n        ) {\n          state.lastReadId = action.payload.markers.notifications.last_read_id;\n          state.readMarkerId =\n            action.payload.markers.notifications.last_read_id;\n        }\n      })\n      .addCase(mountNotifications.fulfilled, (state) => {\n        state.mounted += 1;\n        commitLastReadId(state);\n        updateLastReadId(state);\n      })\n      .addCase(unmountNotifications, (state) => {\n        state.mounted -= 1;\n      })\n      .addCase(focusApp, (state) => {\n        state.isTabVisible = true;\n        commitLastReadId(state);\n        updateLastReadId(state);\n      })\n      .addCase(unfocusApp, (state) => {\n        state.isTabVisible = false;\n      })\n      .addCase(refreshStaleNotificationGroups.fulfilled, (state, action) => {\n        if (action.payload.deferredRefresh)\n          state.mergedNotifications = 'needs-reload';\n      })\n      .addMatcher(\n        isAnyOf(authorizeFollowRequestSuccess, rejectFollowRequestSuccess),\n        (state, action) => {\n          removeNotificationsForAccounts(\n            state,\n            [action.payload.id],\n            'follow_request',\n          );\n        },\n      )\n      .addMatcher(\n        isAnyOf(\n          fetchNotifications.pending,\n          fetchNotificationsGap.pending,\n          pollRecentNotifications.pending,\n        ),\n        (state) => {\n          state.isLoading = true;\n        },\n      )\n      .addMatcher(\n        isAnyOf(\n          fetchNotifications.rejected,\n          fetchNotificationsGap.rejected,\n          pollRecentNotifications.rejected,\n        ),\n        (state) => {\n          state.isLoading = false;\n        },\n      );\n  },\n);\n","import { apiRequestGet, apiRequestPut } from 'mastodon/api';\nimport type { NotificationPolicyJSON } from 'mastodon/api_types/notification_policies';\n\nexport const apiGetNotificationPolicy = () =>\n  apiRequestGet<NotificationPolicyJSON>('v2/notifications/policy');\n\nexport const apiUpdateNotificationsPolicy = (\n  policy: Partial<NotificationPolicyJSON>,\n) => apiRequestPut<NotificationPolicyJSON>('v2/notifications/policy', policy);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  apiGetNotificationPolicy,\n  apiUpdateNotificationsPolicy,\n} from 'mastodon/api/notification_policies';\nimport type { NotificationPolicy } from 'mastodon/models/notification_policy';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nexport const fetchNotificationPolicy = createDataLoadingThunk(\n  'notificationPolicy/fetch',\n  () => apiGetNotificationPolicy(),\n);\n\nexport const updateNotificationsPolicy = createDataLoadingThunk(\n  'notificationPolicy/update',\n  (policy: Partial<NotificationPolicy>) => apiUpdateNotificationsPolicy(policy),\n);\n\nexport const decreasePendingRequestsCount = createAction<number>(\n  'notificationPolicy/decreasePendingRequestsCount',\n);\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  fetchNotificationPolicy,\n  decreasePendingRequestsCount,\n  updateNotificationsPolicy,\n} from 'mastodon/actions/notification_policies';\nimport type { NotificationPolicy } from 'mastodon/models/notification_policy';\n\nexport const notificationPolicyReducer =\n  createReducer<NotificationPolicy | null>(null, (builder) => {\n    builder\n      .addCase(decreasePendingRequestsCount, (state, action) => {\n        if (state) {\n          state.summary.pending_requests_count -= action.payload;\n        }\n      })\n      .addMatcher(\n        isAnyOf(\n          fetchNotificationPolicy.fulfilled,\n          updateNotificationsPolicy.fulfilled,\n        ),\n        (_state, action) => action.payload,\n      );\n  });\n","import {\n  apiFetchNotificationRequest,\n  apiFetchNotificationRequests,\n  apiFetchNotifications,\n  apiAcceptNotificationRequest,\n  apiDismissNotificationRequest,\n  apiAcceptNotificationRequests,\n  apiDismissNotificationRequests,\n} from 'mastodon/api/notifications';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\nimport type {\n  ApiNotificationGroupJSON,\n  ApiNotificationJSON,\n} from 'mastodon/api_types/notifications';\nimport type { ApiStatusJSON } from 'mastodon/api_types/statuses';\nimport type { AppDispatch } from 'mastodon/store';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\nimport { decreasePendingRequestsCount } from './notification_policies';\n\n// TODO: refactor with notification_groups\nfunction dispatchAssociatedRecords(\n  dispatch: AppDispatch,\n  notifications: ApiNotificationGroupJSON[] | ApiNotificationJSON[],\n) {\n  const fetchedAccounts: ApiAccountJSON[] = [];\n  const fetchedStatuses: ApiStatusJSON[] = [];\n\n  notifications.forEach((notification) => {\n    if (notification.type === 'admin.report') {\n      fetchedAccounts.push(notification.report.target_account);\n    }\n\n    if (notification.type === 'moderation_warning') {\n      fetchedAccounts.push(notification.moderation_warning.target_account);\n    }\n\n    if ('status' in notification && notification.status) {\n      fetchedStatuses.push(notification.status);\n    }\n  });\n\n  if (fetchedAccounts.length > 0)\n    dispatch(importFetchedAccounts(fetchedAccounts));\n\n  if (fetchedStatuses.length > 0)\n    dispatch(importFetchedStatuses(fetchedStatuses));\n}\n\nexport const fetchNotificationRequests = createDataLoadingThunk(\n  'notificationRequests/fetch',\n  async (_params, { getState }) => {\n    let sinceId = undefined;\n\n    if (getState().notificationRequests.items.length > 0) {\n      sinceId = getState().notificationRequests.items[0]?.id;\n    }\n\n    return apiFetchNotificationRequests({\n      since_id: sinceId,\n    });\n  },\n  ({ requests, links }, { dispatch }) => {\n    const next = links.refs.find((link) => link.rel === 'next');\n\n    dispatch(importFetchedAccounts(requests.map((request) => request.account)));\n\n    return { requests, next: next?.uri };\n  },\n  {\n    condition: (_params, { getState }) =>\n      !getState().notificationRequests.isLoading,\n  },\n);\n\nexport const fetchNotificationRequest = createDataLoadingThunk(\n  'notificationRequest/fetch',\n  async ({ id }: { id: string }) => apiFetchNotificationRequest(id),\n  {\n    condition: ({ id }, { getState }) =>\n      !(\n        getState().notificationRequests.current.item?.id === id ||\n        getState().notificationRequests.current.isLoading\n      ),\n  },\n);\n\nexport const expandNotificationRequests = createDataLoadingThunk(\n  'notificationRequests/expand',\n  async (_, { getState }) => {\n    const nextUrl = getState().notificationRequests.next;\n    if (!nextUrl) throw new Error('missing URL');\n\n    return apiFetchNotificationRequests(undefined, nextUrl);\n  },\n  ({ requests, links }, { dispatch }) => {\n    const next = links.refs.find((link) => link.rel === 'next');\n\n    dispatch(importFetchedAccounts(requests.map((request) => request.account)));\n\n    return { requests, next: next?.uri };\n  },\n  {\n    condition: (_, { getState }) =>\n      !!getState().notificationRequests.next &&\n      !getState().notificationRequests.isLoading,\n  },\n);\n\nexport const fetchNotificationsForRequest = createDataLoadingThunk(\n  'notificationRequest/fetchNotifications',\n  async ({ accountId }: { accountId: string }, { getState }) => {\n    const sinceId =\n      // @ts-expect-error current.notifications.items is not yet typed\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      getState().notificationRequests.current.notifications.items[0]?.get(\n        'id',\n      ) as string | undefined;\n\n    return apiFetchNotifications({\n      since_id: sinceId,\n      account_id: accountId,\n    });\n  },\n  ({ notifications, links }, { dispatch }) => {\n    const next = links.refs.find((link) => link.rel === 'next');\n\n    dispatchAssociatedRecords(dispatch, notifications);\n\n    return { notifications, next: next?.uri };\n  },\n  {\n    condition: ({ accountId }, { getState }) => {\n      const current = getState().notificationRequests.current;\n      return !(\n        current.item?.account_id === accountId &&\n        current.notifications.isLoading\n      );\n    },\n  },\n);\n\nexport const expandNotificationsForRequest = createDataLoadingThunk(\n  'notificationRequest/expandNotifications',\n  async (_, { getState }) => {\n    const nextUrl = getState().notificationRequests.current.notifications.next;\n    if (!nextUrl) throw new Error('missing URL');\n\n    return apiFetchNotifications(undefined, nextUrl);\n  },\n  ({ notifications, links }, { dispatch }) => {\n    const next = links.refs.find((link) => link.rel === 'next');\n\n    dispatchAssociatedRecords(dispatch, notifications);\n\n    return { notifications, next: next?.uri };\n  },\n  {\n    condition: ({ accountId }: { accountId: string }, { getState }) => {\n      const url = getState().notificationRequests.current.notifications.next;\n\n      return (\n        !!url &&\n        !getState().notificationRequests.current.notifications.isLoading &&\n        getState().notificationRequests.current.item?.account_id === accountId\n      );\n    },\n  },\n);\n\nexport const acceptNotificationRequest = createDataLoadingThunk(\n  'notificationRequest/accept',\n  ({ id }: { id: string }) => apiAcceptNotificationRequest(id),\n  (_data, { dispatch, discardLoadData }) => {\n    dispatch(decreasePendingRequestsCount(1));\n\n    // The payload is not used in any functions\n    return discardLoadData;\n  },\n);\n\nexport const dismissNotificationRequest = createDataLoadingThunk(\n  'notificationRequest/dismiss',\n  ({ id }: { id: string }) => apiDismissNotificationRequest(id),\n  (_data, { dispatch, discardLoadData }) => {\n    dispatch(decreasePendingRequestsCount(1));\n\n    // The payload is not used in any functions\n    return discardLoadData;\n  },\n);\n\nexport const acceptNotificationRequests = createDataLoadingThunk(\n  'notificationRequests/acceptBulk',\n  ({ ids }: { ids: string[] }) => apiAcceptNotificationRequests(ids),\n  (_data, { dispatch, discardLoadData, actionArg: { ids } }) => {\n    dispatch(decreasePendingRequestsCount(ids.length));\n\n    // The payload is not used in any functions\n    return discardLoadData;\n  },\n);\n\nexport const dismissNotificationRequests = createDataLoadingThunk(\n  'notificationRequests/dismissBulk',\n  ({ ids }: { ids: string[] }) => apiDismissNotificationRequests(ids),\n  (_data, { dispatch, discardLoadData, actionArg: { ids } }) => {\n    dispatch(decreasePendingRequestsCount(ids.length));\n\n    // The payload is not used in any functions\n    return discardLoadData;\n  },\n);\n","import type { ApiNotificationRequestJSON } from 'mastodon/api_types/notifications';\n\nexport interface NotificationRequest\n  extends Omit<ApiNotificationRequestJSON, 'account' | 'notifications_count'> {\n  account_id: string;\n  notifications_count: number;\n}\n\nexport function createNotificationRequestFromJSON(\n  requestJSON: ApiNotificationRequestJSON,\n): NotificationRequest {\n  const { account, notifications_count, ...request } = requestJSON;\n\n  return {\n    account_id: account.id,\n    notifications_count: +notifications_count,\n    ...request,\n  };\n}\n","import { fromJS, Map as ImmutableMap } from 'immutable';\n\nimport {\n  NOTIFICATIONS_SET_BROWSER_SUPPORT,\n  NOTIFICATIONS_SET_BROWSER_PERMISSION,\n} from '../actions/notifications';\n\nconst initialState = ImmutableMap({\n  browserSupport: false,\n  browserPermission: 'default',\n});\n\nexport const notificationToMap = notification => ImmutableMap({\n  id: notification.id,\n  type: notification.type,\n  account: notification.account.id,\n  created_at: notification.created_at,\n  status: notification.status ? notification.status.id : null,\n  report: notification.report ? fromJS(notification.report) : null,\n  event: notification.event ? fromJS(notification.event) : null,\n  moderation_warning: notification.moderation_warning ? fromJS(notification.moderation_warning) : null,\n});\n\nexport default function notifications(state = initialState, action) {\n  switch(action.type) {\n  case NOTIFICATIONS_SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case NOTIFICATIONS_SET_BROWSER_PERMISSION:\n    return state.set('browserPermission', action.value);\n  default:\n    return state;\n  }\n}\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n} from 'mastodon/actions/accounts';\nimport {\n  fetchNotificationRequests,\n  expandNotificationRequests,\n  fetchNotificationRequest,\n  fetchNotificationsForRequest,\n  expandNotificationsForRequest,\n  acceptNotificationRequest,\n  dismissNotificationRequest,\n  acceptNotificationRequests,\n  dismissNotificationRequests,\n} from 'mastodon/actions/notification_requests';\nimport type { NotificationRequest } from 'mastodon/models/notification_request';\nimport { createNotificationRequestFromJSON } from 'mastodon/models/notification_request';\n\nimport { notificationToMap } from './notifications';\n\ninterface NotificationsListState {\n  items: unknown[]; // TODO\n  isLoading: boolean;\n  next: string | null;\n}\n\ninterface CurrentNotificationRequestState {\n  item: NotificationRequest | null;\n  isLoading: boolean;\n  removed: boolean;\n  notifications: NotificationsListState;\n}\n\ninterface NotificationRequestsState {\n  items: NotificationRequest[];\n  isLoading: boolean;\n  next: string | null;\n  current: CurrentNotificationRequestState;\n}\n\nconst initialState: NotificationRequestsState = {\n  items: [],\n  isLoading: false,\n  next: null,\n  current: {\n    item: null,\n    isLoading: false,\n    removed: false,\n    notifications: {\n      isLoading: false,\n      items: [],\n      next: null,\n    },\n  },\n};\n\nconst removeRequest = (state: NotificationRequestsState, id: string) => {\n  if (state.current.item?.id === id) {\n    state.current.removed = true;\n  }\n\n  state.items = state.items.filter((item) => item.id !== id);\n};\n\nconst removeRequestByAccount = (\n  state: NotificationRequestsState,\n  account_id: string,\n) => {\n  if (state.current.item?.account_id === account_id) {\n    state.current.removed = true;\n  }\n\n  state.items = state.items.filter((item) => item.account_id !== account_id);\n};\n\nexport const notificationRequestsReducer =\n  createReducer<NotificationRequestsState>(initialState, (builder) => {\n    builder\n      .addCase(fetchNotificationRequests.fulfilled, (state, action) => {\n        state.items = action.payload.requests\n          .map(createNotificationRequestFromJSON)\n          .concat(state.items);\n        state.isLoading = false;\n        state.next ??= action.payload.next ?? null;\n      })\n      .addCase(expandNotificationRequests.fulfilled, (state, action) => {\n        state.items = state.items.concat(\n          action.payload.requests.map(createNotificationRequestFromJSON),\n        );\n        state.isLoading = false;\n        state.next = action.payload.next ?? null;\n      })\n      .addCase(blockAccountSuccess, (state, action) => {\n        removeRequestByAccount(state, action.payload.relationship.id);\n      })\n      .addCase(muteAccountSuccess, (state, action) => {\n        if (action.payload.relationship.muting_notifications)\n          removeRequestByAccount(state, action.payload.relationship.id);\n      })\n      .addCase(fetchNotificationRequest.pending, (state) => {\n        state.current = { ...initialState.current, isLoading: true };\n      })\n      .addCase(fetchNotificationRequest.rejected, (state) => {\n        state.current.isLoading = false;\n      })\n      .addCase(fetchNotificationRequest.fulfilled, (state, action) => {\n        state.current.isLoading = false;\n        state.current.item = createNotificationRequestFromJSON(action.payload);\n      })\n      .addCase(fetchNotificationsForRequest.fulfilled, (state, action) => {\n        state.current.notifications.isLoading = false;\n        state.current.notifications.items.unshift(\n          ...action.payload.notifications.map(notificationToMap),\n        );\n        state.current.notifications.next ??= action.payload.next ?? null;\n      })\n      .addCase(expandNotificationsForRequest.fulfilled, (state, action) => {\n        state.current.notifications.isLoading = false;\n        state.current.notifications.items.push(\n          ...action.payload.notifications.map(notificationToMap),\n        );\n        state.current.notifications.next = action.payload.next ?? null;\n      })\n      .addMatcher(\n        isAnyOf(\n          fetchNotificationRequests.pending,\n          expandNotificationRequests.pending,\n        ),\n        (state) => {\n          state.isLoading = true;\n        },\n      )\n      .addMatcher(\n        isAnyOf(\n          fetchNotificationRequests.rejected,\n          expandNotificationRequests.rejected,\n        ),\n        (state) => {\n          state.isLoading = false;\n        },\n      )\n      .addMatcher(\n        isAnyOf(\n          acceptNotificationRequest.pending,\n          dismissNotificationRequest.pending,\n        ),\n        (state, action) => {\n          removeRequest(state, action.meta.arg.id);\n        },\n      )\n      .addMatcher(\n        isAnyOf(\n          acceptNotificationRequests.pending,\n          dismissNotificationRequests.pending,\n        ),\n        (state, action) => {\n          action.meta.arg.ids.forEach((id) => {\n            removeRequest(state, id);\n          });\n        },\n      )\n      .addMatcher(\n        isAnyOf(\n          fetchNotificationsForRequest.pending,\n          expandNotificationsForRequest.pending,\n        ),\n        (state) => {\n          state.current.notifications.isLoading = true;\n        },\n      )\n      .addMatcher(\n        isAnyOf(\n          fetchNotificationsForRequest.rejected,\n          expandNotificationsForRequest.rejected,\n        ),\n        (state) => {\n          state.current.notifications.isLoading = false;\n        },\n      );\n  });\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { PIPMediaProps } from 'mastodon/reducers/picture_in_picture';\nimport { createAppAsyncThunk } from 'mastodon/store/typed_functions';\n\ninterface DeployParams {\n  statusId: string;\n  accountId: string;\n  playerType: 'audio' | 'video';\n  props: PIPMediaProps;\n}\n\nexport const removePictureInPicture = createAction('pip/remove');\n\nexport const deployPictureInPictureAction =\n  createAction<DeployParams>('pip/deploy');\n\nexport const deployPictureInPicture = createAppAsyncThunk(\n  'pip/deploy',\n  (args: DeployParams, { dispatch, getState }) => {\n    const { statusId } = args;\n\n    // Do not open a player for a toot that does not exist\n\n    // @ts-expect-error state.statuses is not yet typed\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    if (getState().hasIn(['statuses', statusId])) {\n      dispatch(deployPictureInPictureAction(args));\n    }\n  },\n);\n","import type { Reducer } from '@reduxjs/toolkit';\n\nimport {\n  deployPictureInPictureAction,\n  removePictureInPicture,\n} from 'mastodon/actions/picture_in_picture';\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nexport interface PIPMediaProps {\n  src: string;\n  muted: boolean;\n  volume: number;\n  currentTime: number;\n  poster: string;\n  backgroundColor: string;\n  foregroundColor: string;\n  accentColor: string;\n}\n\ninterface PIPStateWithValue extends Partial<PIPMediaProps> {\n  statusId: string;\n  accountId: string;\n  type: 'audio' | 'video';\n}\n\ninterface PIPStateEmpty extends Partial<PIPMediaProps> {\n  type: null;\n}\n\ntype PIPState = PIPStateWithValue | PIPStateEmpty;\n\nconst initialState = {\n  type: null,\n  muted: false,\n  volume: 0,\n  currentTime: 0,\n};\n\nexport const pictureInPictureReducer: Reducer<PIPState> = (\n  state = initialState,\n  action,\n) => {\n  if (deployPictureInPictureAction.match(action))\n    return {\n      statusId: action.payload.statusId,\n      accountId: action.payload.accountId,\n      type: action.payload.playerType,\n      ...action.payload.props,\n    };\n  else if (removePictureInPicture.match(action)) return initialState;\n  else if (timelineDelete.match(action))\n    if (state.type && state.statusId === action.payload.statusId)\n      return initialState;\n\n  return state;\n};\n","import type { Reducer } from '@reduxjs/toolkit';\n\nimport { importPolls } from 'mastodon/actions/importer/polls';\nimport { makeEmojiMap } from 'mastodon/models/custom_emoji';\nimport { createPollOptionTranslationFromServerJSON } from 'mastodon/models/poll';\nimport type { Poll } from 'mastodon/models/poll';\n\nimport {\n  STATUS_TRANSLATE_SUCCESS,\n  STATUS_TRANSLATE_UNDO,\n} from '../actions/statuses';\n\nconst initialState: Record<string, Poll> = {};\ntype PollsState = typeof initialState;\n\nconst statusTranslateSuccess = (state: PollsState, pollTranslation?: Poll) => {\n  if (!pollTranslation) return;\n\n  const poll = state[pollTranslation.id];\n\n  if (!poll) return;\n\n  const emojiMap = makeEmojiMap(poll.emojis);\n\n  pollTranslation.options.forEach((item, index) => {\n    const option = poll.options[index];\n    if (!option) return;\n\n    option.translation = createPollOptionTranslationFromServerJSON(\n      item,\n      emojiMap,\n    );\n  });\n};\n\nconst statusTranslateUndo = (state: PollsState, id: string) => {\n  state[id]?.options.forEach((option) => {\n    option.translation = null;\n  });\n};\n\nexport const pollsReducer: Reducer<PollsState> = (\n  draft = initialState,\n  action,\n) => {\n  if (importPolls.match(action)) {\n    action.payload.polls.forEach((poll) => {\n      draft[poll.id] = poll;\n    });\n  } else if (action.type === STATUS_TRANSLATE_SUCCESS)\n    statusTranslateSuccess(draft, (action.translation as { poll?: Poll }).poll);\n  else if (action.type === STATUS_TRANSLATE_UNDO) {\n    statusTranslateUndo(draft, action.pollId as string);\n  }\n\n  return draft;\n};\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { SET_BROWSER_SUPPORT, SET_SUBSCRIPTION, CLEAR_SUBSCRIPTION, SET_ALERTS } from '../actions/push_notifications';\nimport { STORE_HYDRATE } from '../actions/store';\n\nconst initialState = ImmutableMap({\n  subscription: null,\n  alerts: ImmutableMap({\n    follow: false,\n    follow_request: false,\n    favourite: false,\n    reblog: false,\n    mention: false,\n    poll: false,\n  }),\n  isSubscribed: false,\n  browserSupport: false,\n});\n\nexport default function push_subscriptions(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE: {\n    const push_subscription = action.state.get('push_subscription');\n\n    if (push_subscription) {\n      return state\n        .set('subscription', ImmutableMap({\n          id: push_subscription.get('id'),\n          endpoint: push_subscription.get('endpoint'),\n        }))\n        .set('alerts', push_subscription.get('alerts') || initialState.get('alerts'))\n        .set('isSubscribed', true);\n    }\n\n    return state;\n  }\n  case SET_SUBSCRIPTION:\n    return state\n      .set('subscription', ImmutableMap({\n        id: action.subscription.id,\n        endpoint: action.subscription.endpoint,\n      }))\n      .set('alerts', ImmutableMap(action.subscription.alerts))\n      .set('isSubscribed', true);\n  case SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case CLEAR_SUBSCRIPTION:\n    return initialState;\n  case SET_ALERTS:\n    return state.setIn(action.path, action.value);\n  default:\n    return state;\n  }\n}\n","import type { RecordOf } from 'immutable';\nimport { Record } from 'immutable';\n\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\n\ntype RelationshipShape = Required<ApiRelationshipJSON>; // no changes from server shape\nexport type Relationship = RecordOf<RelationshipShape>;\n\nconst RelationshipFactory = Record<RelationshipShape>({\n  blocked_by: false,\n  blocking: false,\n  domain_blocking: false,\n  endorsed: false,\n  followed_by: false,\n  following: false,\n  id: '',\n  languages: null,\n  muting_notifications: false,\n  muting: false,\n  note: '',\n  notifying: false,\n  requested_by: false,\n  requested: false,\n  showing_reblogs: false,\n});\n\nexport function createRelationship(attributes: Partial<RelationshipShape>) {\n  return RelationshipFactory(attributes);\n}\n","import { apiSubmitAccountNote } from 'mastodon/api/accounts';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nexport const submitAccountNote = createDataLoadingThunk(\n  'account_note/submit',\n  ({ accountId, note }: { accountId: string; note: string }) =>\n    apiSubmitAccountNote(accountId, note),\n  (relationship) => ({ relationship }),\n);\n","import { isFulfilled } from '@reduxjs/toolkit';\nimport type { Reducer } from '@reduxjs/toolkit';\nimport { Map as ImmutableMap } from 'immutable';\n\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\nimport type { Account } from 'mastodon/models/account';\nimport { createRelationship } from 'mastodon/models/relationship';\nimport type { Relationship } from 'mastodon/models/relationship';\n\nimport { submitAccountNote } from '../actions/account_notes';\nimport {\n  followAccountSuccess,\n  unfollowAccountSuccess,\n  authorizeFollowRequestSuccess,\n  rejectFollowRequestSuccess,\n  followAccountRequest,\n  followAccountFail,\n  unfollowAccountRequest,\n  unfollowAccountFail,\n  blockAccountSuccess,\n  unblockAccountSuccess,\n  muteAccountSuccess,\n  unmuteAccountSuccess,\n  pinAccountSuccess,\n  unpinAccountSuccess,\n  fetchRelationshipsSuccess,\n  removeAccountFromFollowers,\n} from '../actions/accounts_typed';\nimport {\n  blockDomainSuccess,\n  unblockDomainSuccess,\n} from '../actions/domain_blocks_typed';\nimport { notificationsUpdate } from '../actions/notifications_typed';\n\nconst initialState = ImmutableMap<string, Relationship>();\ntype State = typeof initialState;\n\nconst normalizeRelationship = (\n  state: State,\n  relationship: ApiRelationshipJSON,\n) => state.set(relationship.id, createRelationship(relationship));\n\nconst normalizeRelationships = (\n  state: State,\n  relationships: ApiRelationshipJSON[],\n) => {\n  relationships.forEach((relationship) => {\n    state = normalizeRelationship(state, relationship);\n  });\n\n  return state;\n};\n\nconst setDomainBlocking = (\n  state: State,\n  accounts: Account[],\n  blocking: boolean,\n) => {\n  return state.withMutations((map) => {\n    accounts.forEach((id) => {\n      map.setIn([id, 'domain_blocking'], blocking);\n    });\n  });\n};\n\nexport const relationshipsReducer: Reducer<State> = (\n  state = initialState,\n  action,\n) => {\n  if (authorizeFollowRequestSuccess.match(action))\n    return state\n      .setIn([action.payload.id, 'followed_by'], true)\n      .setIn([action.payload.id, 'requested_by'], false);\n  else if (rejectFollowRequestSuccess.match(action))\n    return state\n      .setIn([action.payload.id, 'followed_by'], false)\n      .setIn([action.payload.id, 'requested_by'], false);\n  else if (notificationsUpdate.match(action))\n    return action.payload.notification.type === 'follow_request'\n      ? state.setIn(\n          [action.payload.notification.account.id, 'requested_by'],\n          true,\n        )\n      : state;\n  else if (followAccountRequest.match(action))\n    return state.getIn([action.payload.id, 'following'])\n      ? state\n      : state.setIn(\n          [\n            action.payload.id,\n            action.payload.locked ? 'requested' : 'following',\n          ],\n          true,\n        );\n  else if (followAccountFail.match(action))\n    return state.setIn(\n      [action.payload.id, action.payload.locked ? 'requested' : 'following'],\n      false,\n    );\n  else if (unfollowAccountRequest.match(action))\n    return state.setIn([action.payload.id, 'following'], false);\n  else if (unfollowAccountFail.match(action))\n    return state.setIn([action.payload.id, 'following'], true);\n  else if (\n    followAccountSuccess.match(action) ||\n    unfollowAccountSuccess.match(action) ||\n    blockAccountSuccess.match(action) ||\n    unblockAccountSuccess.match(action) ||\n    muteAccountSuccess.match(action) ||\n    unmuteAccountSuccess.match(action) ||\n    pinAccountSuccess.match(action) ||\n    unpinAccountSuccess.match(action) ||\n    isFulfilled(submitAccountNote)(action) ||\n    isFulfilled(removeAccountFromFollowers)(action)\n  )\n    return normalizeRelationship(state, action.payload.relationship);\n  else if (fetchRelationshipsSuccess.match(action))\n    return normalizeRelationships(state, action.payload.relationships);\n  else if (blockDomainSuccess.match(action))\n    return setDomainBlocking(state, action.payload.accounts, true);\n  else if (unblockDomainSuccess.match(action))\n    return setDomainBlocking(state, action.payload.accounts, false);\n  else return state;\n};\n","import type { ApiSearchResultsJSON } from 'mastodon/api_types/search';\nimport type { ApiHashtagJSON } from 'mastodon/api_types/tags';\n\nexport type SearchType = 'account' | 'hashtag' | 'accounts' | 'statuses';\n\nexport interface RecentSearch {\n  q: string;\n  type?: SearchType;\n}\n\nexport interface SearchResults {\n  accounts: string[];\n  statuses: string[];\n  hashtags: ApiHashtagJSON[];\n}\n\nexport const createSearchResults = (serverJSON: ApiSearchResultsJSON) => ({\n  accounts: serverJSON.accounts.map((account) => account.id),\n  statuses: serverJSON.statuses.map((status) => status.id),\n  hashtags: serverJSON.hashtags,\n});\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport type { ApiSearchType } from 'mastodon/api_types/search';\nimport type { RecentSearch, SearchResults } from 'mastodon/models/search';\nimport { createSearchResults } from 'mastodon/models/search';\n\nimport {\n  updateSearchHistory,\n  submitSearch,\n  expandSearch,\n} from '../actions/search';\n\ninterface State {\n  recent: RecentSearch[];\n  q: string;\n  type?: ApiSearchType;\n  loading: boolean;\n  results?: SearchResults;\n}\n\nconst initialState: State = {\n  recent: [],\n  q: '',\n  type: undefined,\n  loading: false,\n  results: undefined,\n};\n\nexport const searchReducer = createReducer(initialState, (builder) => {\n  builder.addCase(submitSearch.fulfilled, (state, action) => {\n    state.q = action.meta.arg.q;\n    state.type = action.meta.arg.type;\n    state.results = createSearchResults(action.payload);\n    state.loading = false;\n  });\n\n  builder.addCase(expandSearch.fulfilled, (state, action) => {\n    const type = action.meta.arg.type;\n    const results = createSearchResults(action.payload);\n\n    state.type = type;\n    state.results = {\n      accounts: state.results\n        ? [...state.results.accounts, ...results.accounts]\n        : results.accounts,\n      statuses: state.results\n        ? [...state.results.statuses, ...results.statuses]\n        : results.statuses,\n      hashtags: state.results\n        ? [...state.results.hashtags, ...results.hashtags]\n        : results.hashtags,\n    };\n    state.loading = false;\n  });\n\n  builder.addCase(updateSearchHistory, (state, action) => {\n    state.recent = action.payload;\n  });\n\n  builder.addMatcher(\n    isAnyOf(expandSearch.pending, submitSearch.pending),\n    (state, action) => {\n      state.type = action.meta.arg.type;\n      state.loading = true;\n    },\n  );\n\n  builder.addMatcher(\n    isAnyOf(expandSearch.rejected, submitSearch.rejected),\n    (state) => {\n      state.loading = false;\n    },\n  );\n});\n","import api from '../api';\n\nimport { importFetchedAccount } from './importer';\n\nexport const SERVER_FETCH_REQUEST = 'Server_FETCH_REQUEST';\nexport const SERVER_FETCH_SUCCESS = 'Server_FETCH_SUCCESS';\nexport const SERVER_FETCH_FAIL    = 'Server_FETCH_FAIL';\n\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST = 'SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST';\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS = 'SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS';\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL    = 'SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL';\n\nexport const EXTENDED_DESCRIPTION_REQUEST = 'EXTENDED_DESCRIPTION_REQUEST';\nexport const EXTENDED_DESCRIPTION_SUCCESS = 'EXTENDED_DESCRIPTION_SUCCESS';\nexport const EXTENDED_DESCRIPTION_FAIL    = 'EXTENDED_DESCRIPTION_FAIL';\n\nexport const SERVER_DOMAIN_BLOCKS_FETCH_REQUEST = 'SERVER_DOMAIN_BLOCKS_FETCH_REQUEST';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS = 'SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_FAIL    = 'SERVER_DOMAIN_BLOCKS_FETCH_FAIL';\n\nexport const fetchServer = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'server', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchServerRequest());\n\n  api()\n    .get('/api/v2/instance').then(({ data }) => {\n      if (data.contact.account) dispatch(importFetchedAccount(data.contact.account));\n      dispatch(fetchServerSuccess(data));\n    }).catch(err => dispatch(fetchServerFail(err)));\n};\n\nconst fetchServerRequest = () => ({\n  type: SERVER_FETCH_REQUEST,\n});\n\nconst fetchServerSuccess = server => ({\n  type: SERVER_FETCH_SUCCESS,\n  server,\n});\n\nconst fetchServerFail = error => ({\n  type: SERVER_FETCH_FAIL,\n  error,\n});\n\nexport const fetchServerTranslationLanguages = () => (dispatch) => {\n  dispatch(fetchServerTranslationLanguagesRequest());\n\n  api()\n    .get('/api/v1/instance/translation_languages').then(({ data }) => {\n      dispatch(fetchServerTranslationLanguagesSuccess(data));\n    }).catch(err => dispatch(fetchServerTranslationLanguagesFail(err)));\n};\n\nconst fetchServerTranslationLanguagesRequest = () => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST,\n});\n\nconst fetchServerTranslationLanguagesSuccess = translationLanguages => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS,\n  translationLanguages,\n});\n\nconst fetchServerTranslationLanguagesFail = error => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL,\n  error,\n});\n\nexport const fetchExtendedDescription = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'extendedDescription', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchExtendedDescriptionRequest());\n\n  api()\n    .get('/api/v1/instance/extended_description')\n    .then(({ data }) => dispatch(fetchExtendedDescriptionSuccess(data)))\n    .catch(err => dispatch(fetchExtendedDescriptionFail(err)));\n};\n\nconst fetchExtendedDescriptionRequest = () => ({\n  type: EXTENDED_DESCRIPTION_REQUEST,\n});\n\nconst fetchExtendedDescriptionSuccess = description => ({\n  type: EXTENDED_DESCRIPTION_SUCCESS,\n  description,\n});\n\nconst fetchExtendedDescriptionFail = error => ({\n  type: EXTENDED_DESCRIPTION_FAIL,\n  error,\n});\n\nexport const fetchDomainBlocks = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'domainBlocks', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchDomainBlocksRequest());\n\n  api()\n    .get('/api/v1/instance/domain_blocks')\n    .then(({ data }) => dispatch(fetchDomainBlocksSuccess(true, data)))\n    .catch(err => {\n      if (err.response.status === 404) {\n        dispatch(fetchDomainBlocksSuccess(false, []));\n      } else {\n        dispatch(fetchDomainBlocksFail(err));\n      }\n    });\n};\n\nconst fetchDomainBlocksRequest = () => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n});\n\nconst fetchDomainBlocksSuccess = (isAvailable, blocks) => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  isAvailable,\n  blocks,\n});\n\nconst fetchDomainBlocksFail = error => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n  error,\n});\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  SERVER_FETCH_REQUEST,\n  SERVER_FETCH_SUCCESS,\n  SERVER_FETCH_FAIL,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL,\n  EXTENDED_DESCRIPTION_REQUEST,\n  EXTENDED_DESCRIPTION_SUCCESS,\n  EXTENDED_DESCRIPTION_FAIL,\n  SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n  SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n} from 'mastodon/actions/server';\n\nconst initialState = ImmutableMap({\n  server: ImmutableMap({\n    isLoading: false,\n  }),\n\n  extendedDescription: ImmutableMap({\n    isLoading: false,\n  }),\n\n  domainBlocks: ImmutableMap({\n    isLoading: false,\n    isAvailable: true,\n    items: ImmutableList(),\n  }),\n});\n\nexport default function server(state = initialState, action) {\n  switch (action.type) {\n  case SERVER_FETCH_REQUEST:\n    return state.setIn(['server', 'isLoading'], true);\n  case SERVER_FETCH_SUCCESS:\n    return state.set('server', fromJS(action.server)).setIn(['server', 'isLoading'], false);\n  case SERVER_FETCH_FAIL:\n    return state.setIn(['server', 'isLoading'], false);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST:\n    return state.setIn(['translationLanguages', 'isLoading'], true);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS:\n    return state.setIn(['translationLanguages', 'items'], fromJS(action.translationLanguages)).setIn(['translationLanguages', 'isLoading'], false);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL:\n    return state.setIn(['translationLanguages', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_REQUEST:\n    return state.setIn(['extendedDescription', 'isLoading'], true);\n  case EXTENDED_DESCRIPTION_SUCCESS:\n    return state.set('extendedDescription', fromJS(action.description)).setIn(['extendedDescription', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_FAIL:\n    return state.setIn(['extendedDescription', 'isLoading'], false);\n  case SERVER_DOMAIN_BLOCKS_FETCH_REQUEST:\n    return state.setIn(['domainBlocks', 'isLoading'], true);\n  case SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS:\n    return state.setIn(['domainBlocks', 'items'], fromJS(action.blocks)).setIn(['domainBlocks', 'isLoading'], false).setIn(['domainBlocks', 'isAvailable'], action.isAvailable);\n  case SERVER_DOMAIN_BLOCKS_FETCH_FAIL:\n    return state.setIn(['domainBlocks', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import { saveSettings } from './settings';\n\nexport const COLUMN_ADD           = 'COLUMN_ADD';\nexport const COLUMN_REMOVE        = 'COLUMN_REMOVE';\nexport const COLUMN_MOVE          = 'COLUMN_MOVE';\nexport const COLUMN_PARAMS_CHANGE = 'COLUMN_PARAMS_CHANGE';\n\nexport function addColumn(id, params) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_ADD,\n      id,\n      params,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function removeColumn(uuid) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_REMOVE,\n      uuid,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function moveColumn(uuid, direction) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_MOVE,\n      uuid,\n      direction,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function changeColumnParams(uuid, path, value) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_PARAMS_CHANGE,\n      uuid,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { COLUMN_ADD, COLUMN_REMOVE, COLUMN_MOVE, COLUMN_PARAMS_CHANGE } from '../actions/columns';\nimport { COMPOSE_LANGUAGE_CHANGE } from '../actions/compose';\nimport { EMOJI_USE } from '../actions/emojis';\nimport { LIST_DELETE_SUCCESS, LIST_FETCH_FAIL } from '../actions/lists';\nimport { NOTIFICATIONS_FILTER_SET } from '../actions/notifications';\nimport { SETTING_CHANGE, SETTING_SAVE } from '../actions/settings';\nimport { STORE_HYDRATE } from '../actions/store';\nimport { uuid } from '../uuid';\n\nconst initialState = ImmutableMap({\n  saved: true,\n\n  skinTone: 1,\n\n  trends: ImmutableMap({\n    show: true,\n  }),\n\n  home: ImmutableMap({\n    shows: ImmutableMap({\n      quote: true,\n      reblog: true,\n      reply: true,\n    }),\n\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  notifications: ImmutableMap({\n    alerts: ImmutableMap({\n      follow: false,\n      follow_request: false,\n      favourite: false,\n      reblog: false,\n      mention: false,\n      poll: false,\n      status: false,\n      update: false,\n      'admin.sign_up': false,\n      'admin.report': false,\n    }),\n\n    quickFilter: ImmutableMap({\n      active: 'all',\n      show: true,\n      advanced: false,\n    }),\n\n    dismissPermissionBanner: false,\n    showUnread: true,\n    minimizeFilteredBanner: false,\n\n    shows: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n\n    sounds: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n\n    group: ImmutableMap({\n      follow: true\n    }),\n  }),\n\n  firehose: ImmutableMap({\n    onlyMedia: false,\n  }),\n\n  community: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  public: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  direct: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  dismissed_banners: ImmutableMap({\n    'public_timeline': false,\n    'community_timeline': false,\n    'home/follow-suggestions': false,\n    'explore/links': false,\n    'explore/statuses': false,\n    'explore/tags': false,\n  }),\n});\n\nconst defaultColumns = fromJS([\n  { id: 'COMPOSE', uuid: uuid(), params: {} },\n  { id: 'HOME', uuid: uuid(), params: {} },\n  { id: 'NOTIFICATIONS', uuid: uuid(), params: {} },\n]);\n\nconst hydrate = (state, settings) => state.mergeDeep(settings).update('columns', (val = defaultColumns) => val);\n\nconst moveColumn = (state, uuid, direction) => {\n  const columns  = state.get('columns');\n  const index    = columns.findIndex(item => item.get('uuid') === uuid);\n  const newIndex = index + direction;\n\n  let newColumns;\n\n  newColumns = columns.splice(index, 1);\n  newColumns = newColumns.splice(newIndex, 0, columns.get(index));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst changeColumnParams = (state, uuid, path, value) => {\n  const columns = state.get('columns');\n  const index   = columns.findIndex(item => item.get('uuid') === uuid);\n\n  const newColumns = columns.update(index, column => column.updateIn(['params', ...path], () => value));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst updateFrequentEmojis = (state, emoji) => state.update('frequentlyUsedEmojis', ImmutableMap(), map => map.update(emoji.id, 0, count => count + 1)).set('saved', false);\n\nconst updateFrequentLanguages = (state, language) => state.update('frequentlyUsedLanguages', ImmutableMap(), map => map.update(language, 0, count => count + 1)).set('saved', false);\n\nconst filterDeadListColumns = (state, listId) => state.update('columns', columns => columns.filterNot(column => column.get('id') === 'LIST' && column.get('params').get('id') === listId));\n\nexport default function settings(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('settings'));\n  case NOTIFICATIONS_FILTER_SET:\n  case SETTING_CHANGE:\n    return state\n      .setIn(action.path, action.value)\n      .set('saved', false);\n  case COLUMN_ADD:\n    return state\n      .update('columns', list => list.push(fromJS({ id: action.id, uuid: uuid(), params: action.params })))\n      .set('saved', false);\n  case COLUMN_REMOVE:\n    return state\n      .update('columns', list => list.filterNot(item => item.get('uuid') === action.uuid))\n      .set('saved', false);\n  case COLUMN_MOVE:\n    return moveColumn(state, action.uuid, action.direction);\n  case COLUMN_PARAMS_CHANGE:\n    return changeColumnParams(state, action.uuid, action.path, action.value);\n  case EMOJI_USE:\n    return updateFrequentEmojis(state, action.emoji);\n  case COMPOSE_LANGUAGE_CHANGE:\n    return updateFrequentLanguages(state, action.language);\n  case SETTING_SAVE:\n    return state.set('saved', true);\n  case LIST_FETCH_FAIL:\n    return action.error.response.status === 404 ? filterDeadListColumns(state, action.id) : state;\n  case LIST_DELETE_SUCCESS:\n    return filterDeadListColumns(state, action.id);\n  default:\n    return state;\n  }\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const BOOKMARKED_STATUSES_FETCH_REQUEST = 'BOOKMARKED_STATUSES_FETCH_REQUEST';\nexport const BOOKMARKED_STATUSES_FETCH_SUCCESS = 'BOOKMARKED_STATUSES_FETCH_SUCCESS';\nexport const BOOKMARKED_STATUSES_FETCH_FAIL    = 'BOOKMARKED_STATUSES_FETCH_FAIL';\n\nexport const BOOKMARKED_STATUSES_EXPAND_REQUEST = 'BOOKMARKED_STATUSES_EXPAND_REQUEST';\nexport const BOOKMARKED_STATUSES_EXPAND_SUCCESS = 'BOOKMARKED_STATUSES_EXPAND_SUCCESS';\nexport const BOOKMARKED_STATUSES_EXPAND_FAIL    = 'BOOKMARKED_STATUSES_EXPAND_FAIL';\n\nexport function fetchBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchBookmarkedStatusesRequest());\n\n    api().get('/api/v1/bookmarks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'bookmarks', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandBookmarkedStatusesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const FAVOURITED_STATUSES_FETCH_REQUEST = 'FAVOURITED_STATUSES_FETCH_REQUEST';\nexport const FAVOURITED_STATUSES_FETCH_SUCCESS = 'FAVOURITED_STATUSES_FETCH_SUCCESS';\nexport const FAVOURITED_STATUSES_FETCH_FAIL    = 'FAVOURITED_STATUSES_FETCH_FAIL';\n\nexport const FAVOURITED_STATUSES_EXPAND_REQUEST = 'FAVOURITED_STATUSES_EXPAND_REQUEST';\nexport const FAVOURITED_STATUSES_EXPAND_SUCCESS = 'FAVOURITED_STATUSES_EXPAND_SUCCESS';\nexport const FAVOURITED_STATUSES_EXPAND_FAIL    = 'FAVOURITED_STATUSES_EXPAND_FAIL';\n\nexport function fetchFavouritedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchFavouritedStatusesRequest());\n\n    api().get('/api/v1/favourites').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function expandFavouritedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'favourites', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandFavouritedStatusesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","import { apiRequestPost } from 'mastodon/api';\nimport type { Status, StatusVisibility } from 'mastodon/models/status';\n\nexport const apiReblog = (statusId: string, visibility: StatusVisibility) =>\n  apiRequestPost<{ reblog: Status }>(`v1/statuses/${statusId}/reblog`, {\n    visibility,\n  });\n\nexport const apiUnreblog = (statusId: string) =>\n  apiRequestPost<Status>(`v1/statuses/${statusId}/unreblog`);\n","import { apiReblog, apiUnreblog } from 'mastodon/api/interactions';\nimport type { StatusVisibility } from 'mastodon/models/status';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { importFetchedStatus } from './importer';\n\nexport const reblog = createDataLoadingThunk(\n  'status/reblog',\n  ({\n    statusId,\n    visibility,\n  }: {\n    statusId: string;\n    visibility: StatusVisibility;\n  }) => apiReblog(statusId, visibility),\n  (data, { dispatch, discardLoadData }) => {\n    // The reblog API method returns a new status wrapped around the original. In this case we are only\n    // interested in how the original is modified, hence passing it skipping the wrapper\n    dispatch(importFetchedStatus(data.reblog));\n\n    // The payload is not used in any actions\n    return discardLoadData;\n  },\n);\n\nexport const unreblog = createDataLoadingThunk(\n  'status/unreblog',\n  ({ statusId }: { statusId: string }) => apiUnreblog(statusId),\n  (data, { dispatch, discardLoadData }) => {\n    dispatch(importFetchedStatus(data));\n\n    // The payload is not used in any actions\n    return discardLoadData;\n  },\n);\n","import { boostModal } from 'mastodon/initial_state';\n\nimport api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { unreblog, reblog } from './interactions_typed';\nimport { openModal } from './modal';\n\nexport const REBLOGS_EXPAND_REQUEST = 'REBLOGS_EXPAND_REQUEST';\nexport const REBLOGS_EXPAND_SUCCESS = 'REBLOGS_EXPAND_SUCCESS';\nexport const REBLOGS_EXPAND_FAIL = 'REBLOGS_EXPAND_FAIL';\n\nexport const FAVOURITE_REQUEST = 'FAVOURITE_REQUEST';\nexport const FAVOURITE_SUCCESS = 'FAVOURITE_SUCCESS';\nexport const FAVOURITE_FAIL    = 'FAVOURITE_FAIL';\n\nexport const UNFAVOURITE_REQUEST = 'UNFAVOURITE_REQUEST';\nexport const UNFAVOURITE_SUCCESS = 'UNFAVOURITE_SUCCESS';\nexport const UNFAVOURITE_FAIL    = 'UNFAVOURITE_FAIL';\n\nexport const REBLOGS_FETCH_REQUEST = 'REBLOGS_FETCH_REQUEST';\nexport const REBLOGS_FETCH_SUCCESS = 'REBLOGS_FETCH_SUCCESS';\nexport const REBLOGS_FETCH_FAIL    = 'REBLOGS_FETCH_FAIL';\n\nexport const FAVOURITES_FETCH_REQUEST = 'FAVOURITES_FETCH_REQUEST';\nexport const FAVOURITES_FETCH_SUCCESS = 'FAVOURITES_FETCH_SUCCESS';\nexport const FAVOURITES_FETCH_FAIL    = 'FAVOURITES_FETCH_FAIL';\n\nexport const FAVOURITES_EXPAND_REQUEST = 'FAVOURITES_EXPAND_REQUEST';\nexport const FAVOURITES_EXPAND_SUCCESS = 'FAVOURITES_EXPAND_SUCCESS';\nexport const FAVOURITES_EXPAND_FAIL = 'FAVOURITES_EXPAND_FAIL';\n\nexport const PIN_REQUEST = 'PIN_REQUEST';\nexport const PIN_SUCCESS = 'PIN_SUCCESS';\nexport const PIN_FAIL    = 'PIN_FAIL';\n\nexport const UNPIN_REQUEST = 'UNPIN_REQUEST';\nexport const UNPIN_SUCCESS = 'UNPIN_SUCCESS';\nexport const UNPIN_FAIL    = 'UNPIN_FAIL';\n\nexport const BOOKMARK_REQUEST = 'BOOKMARK_REQUEST';\nexport const BOOKMARK_SUCCESS = 'BOOKMARKED_SUCCESS';\nexport const BOOKMARK_FAIL    = 'BOOKMARKED_FAIL';\n\nexport const UNBOOKMARK_REQUEST = 'UNBOOKMARKED_REQUEST';\nexport const UNBOOKMARK_SUCCESS = 'UNBOOKMARKED_SUCCESS';\nexport const UNBOOKMARK_FAIL    = 'UNBOOKMARKED_FAIL';\n\nexport * from \"./interactions_typed\";\n\nexport function favourite(status) {\n  return function (dispatch) {\n    dispatch(favouriteRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/favourite`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(favouriteSuccess(status));\n    }).catch(function (error) {\n      dispatch(favouriteFail(status, error));\n    });\n  };\n}\n\nexport function unfavourite(status) {\n  return (dispatch) => {\n    dispatch(unfavouriteRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unfavourite`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unfavouriteSuccess(status));\n    }).catch(error => {\n      dispatch(unfavouriteFail(status, error));\n    });\n  };\n}\n\nexport function favouriteRequest(status) {\n  return {\n    type: FAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteSuccess(status) {\n  return {\n    type: FAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteFail(status, error) {\n  return {\n    type: FAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteRequest(status) {\n  return {\n    type: UNFAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteSuccess(status) {\n  return {\n    type: UNFAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteFail(status, error) {\n  return {\n    type: UNFAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function bookmark(status) {\n  return function (dispatch) {\n    dispatch(bookmarkRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/bookmark`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(bookmarkSuccess(status, response.data));\n    }).catch(function (error) {\n      dispatch(bookmarkFail(status, error));\n    });\n  };\n}\n\nexport function unbookmark(status) {\n  return (dispatch) => {\n    dispatch(unbookmarkRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unbookmark`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unbookmarkSuccess(status, response.data));\n    }).catch(error => {\n      dispatch(unbookmarkFail(status, error));\n    });\n  };\n}\n\nexport function bookmarkRequest(status) {\n  return {\n    type: BOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function bookmarkSuccess(status, response) {\n  return {\n    type: BOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function bookmarkFail(status, error) {\n  return {\n    type: BOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function unbookmarkRequest(status) {\n  return {\n    type: UNBOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function unbookmarkSuccess(status, response) {\n  return {\n    type: UNBOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function unbookmarkFail(status, error) {\n  return {\n    type: UNBOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function fetchReblogs(id) {\n  return (dispatch) => {\n    dispatch(fetchReblogsRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/reblogged_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchReblogsFail(id, error));\n    });\n  };\n}\n\nexport function fetchReblogsRequest(id) {\n  return {\n    type: REBLOGS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchReblogsFail(id, error) {\n  return {\n    type: REBLOGS_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandReblogs(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'reblogged_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandReblogsRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandReblogsFail(id, error)));\n  };\n}\n\nexport function expandReblogsRequest(id) {\n  return {\n    type: REBLOGS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandReblogsFail(id, error) {\n  return {\n    type: REBLOGS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFavourites(id) {\n  return (dispatch) => {\n    dispatch(fetchFavouritesRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/favourited_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFavouritesFail(id, error));\n    });\n  };\n}\n\nexport function fetchFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandFavourites(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'favourited_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFavouritesRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandFavouritesFail(id, error)));\n  };\n}\n\nexport function expandFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pin(status) {\n  return (dispatch) => {\n    dispatch(pinRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/pin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(pinSuccess(status));\n    }).catch(error => {\n      dispatch(pinFail(status, error));\n    });\n  };\n}\n\nexport function pinRequest(status) {\n  return {\n    type: PIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinSuccess(status) {\n  return {\n    type: PIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinFail(status, error) {\n  return {\n    type: PIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function unpin (status) {\n  return (dispatch) => {\n    dispatch(unpinRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unpin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unpinSuccess(status));\n    }).catch(error => {\n      dispatch(unpinFail(status, error));\n    });\n  };\n}\n\nexport function unpinRequest(status) {\n  return {\n    type: UNPIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinSuccess(status) {\n  return {\n    type: UNPIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinFail(status, error) {\n  return {\n    type: UNPIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n\nfunction toggleReblogWithoutConfirmation(status, visibility) {\n  return (dispatch) => {\n    if (status.get('reblogged')) {\n      dispatch(unreblog({ statusId: status.get('id') }));\n    } else {\n      dispatch(reblog({ statusId: status.get('id'), visibility }));\n    }\n  };\n}\n\nexport function toggleReblog(statusId, skipModal = false) {\n  return (dispatch, getState) => {\n    const state = getState();\n    let status = state.statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    // The reblog modal expects a pre-filled account in status\n    // TODO: fix this by having the reblog modal get a statusId and do the work itself\n    status = status.set('account', state.accounts.get(status.get('account')));\n\n    if (boostModal && !skipModal) {\n      dispatch(openModal({ modalType: 'BOOST', modalProps: { status, onReblog: (status, privacy) => dispatch(toggleReblogWithoutConfirmation(status, privacy)) } }));\n    } else {\n      dispatch(toggleReblogWithoutConfirmation(status));\n    }\n  };\n}\n\nexport function toggleFavourite(statusId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const status = state.statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    if (status.get('favourited')) {\n      dispatch(unfavourite(status));\n    } else {\n      dispatch(favourite(status));\n    }\n  };\n}\n","import api from '../api';\nimport { me } from '../initial_state';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const PINNED_STATUSES_FETCH_REQUEST = 'PINNED_STATUSES_FETCH_REQUEST';\nexport const PINNED_STATUSES_FETCH_SUCCESS = 'PINNED_STATUSES_FETCH_SUCCESS';\nexport const PINNED_STATUSES_FETCH_FAIL = 'PINNED_STATUSES_FETCH_FAIL';\n\nexport function fetchPinnedStatuses() {\n  return (dispatch) => {\n    dispatch(fetchPinnedStatusesRequest());\n\n    api().get(`/api/v1/accounts/${me}/statuses`, { params: { pinned: true } }).then(response => {\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchPinnedStatusesSuccess(response.data, null));\n    }).catch(error => {\n      dispatch(fetchPinnedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchPinnedStatusesRequest() {\n  return {\n    type: PINNED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedStatusesSuccess(statuses, next) {\n  return {\n    type: PINNED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchPinnedStatusesFail(error) {\n  return {\n    type: PINNED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses, importFetchedAccounts } from './importer';\n\nexport const TRENDS_TAGS_FETCH_REQUEST = 'TRENDS_TAGS_FETCH_REQUEST';\nexport const TRENDS_TAGS_FETCH_SUCCESS = 'TRENDS_TAGS_FETCH_SUCCESS';\nexport const TRENDS_TAGS_FETCH_FAIL    = 'TRENDS_TAGS_FETCH_FAIL';\n\nexport const TRENDS_LINKS_FETCH_REQUEST = 'TRENDS_LINKS_FETCH_REQUEST';\nexport const TRENDS_LINKS_FETCH_SUCCESS = 'TRENDS_LINKS_FETCH_SUCCESS';\nexport const TRENDS_LINKS_FETCH_FAIL    = 'TRENDS_LINKS_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_FETCH_REQUEST = 'TRENDS_STATUSES_FETCH_REQUEST';\nexport const TRENDS_STATUSES_FETCH_SUCCESS = 'TRENDS_STATUSES_FETCH_SUCCESS';\nexport const TRENDS_STATUSES_FETCH_FAIL    = 'TRENDS_STATUSES_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_EXPAND_REQUEST = 'TRENDS_STATUSES_EXPAND_REQUEST';\nexport const TRENDS_STATUSES_EXPAND_SUCCESS = 'TRENDS_STATUSES_EXPAND_SUCCESS';\nexport const TRENDS_STATUSES_EXPAND_FAIL    = 'TRENDS_STATUSES_EXPAND_FAIL';\n\nexport const fetchTrendingHashtags = () => (dispatch) => {\n  dispatch(fetchTrendingHashtagsRequest());\n\n  api()\n    .get('/api/v1/trends/tags')\n    .then(({ data }) => dispatch(fetchTrendingHashtagsSuccess(data)))\n    .catch(err => dispatch(fetchTrendingHashtagsFail(err)));\n};\n\nexport const fetchTrendingHashtagsRequest = () => ({\n  type: TRENDS_TAGS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsSuccess = trends => ({\n  type: TRENDS_TAGS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsFail = error => ({\n  type: TRENDS_TAGS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingLinks = () => (dispatch) => {\n  dispatch(fetchTrendingLinksRequest());\n\n  api()\n    .get('/api/v1/trends/links', { params: { limit: 20 } })\n    .then(({ data }) => {\n      dispatch(importFetchedAccounts(data.flatMap(link => link.authors.map(author => author.account)).filter(account => !!account)));\n      dispatch(fetchTrendingLinksSuccess(data));\n    })\n    .catch(err => dispatch(fetchTrendingLinksFail(err)));\n};\n\nexport const fetchTrendingLinksRequest = () => ({\n  type: TRENDS_LINKS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksSuccess = trends => ({\n  type: TRENDS_LINKS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksFail = error => ({\n  type: TRENDS_LINKS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingStatuses = () => (dispatch, getState) => {\n  if (getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchTrendingStatusesRequest());\n\n  api().get('/api/v1/trends/statuses').then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(fetchTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(err => dispatch(fetchTrendingStatusesFail(err)));\n};\n\nexport const fetchTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_FETCH_SUCCESS,\n  statuses,\n  next,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\n\nexport const expandTrendingStatuses = () => (dispatch, getState) => {\n  const url = getState().getIn(['status_lists', 'trending', 'next'], null);\n\n  if (url === null || getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandTrendingStatusesRequest());\n\n  api().get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(expandTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(error => {\n    dispatch(expandTrendingStatusesFail(error));\n  });\n};\n\nexport const expandTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_EXPAND_REQUEST,\n});\n\nexport const expandTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_EXPAND_SUCCESS,\n  statuses,\n  next,\n});\n\nexport const expandTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_EXPAND_FAIL,\n  error,\n});\n","import { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet } from 'immutable';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n} from '../actions/accounts';\nimport {\n  BOOKMARKED_STATUSES_FETCH_REQUEST,\n  BOOKMARKED_STATUSES_FETCH_SUCCESS,\n  BOOKMARKED_STATUSES_FETCH_FAIL,\n  BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n  BOOKMARKED_STATUSES_EXPAND_FAIL,\n} from '../actions/bookmarks';\nimport {\n  FAVOURITED_STATUSES_FETCH_REQUEST,\n  FAVOURITED_STATUSES_FETCH_SUCCESS,\n  FAVOURITED_STATUSES_FETCH_FAIL,\n  FAVOURITED_STATUSES_EXPAND_REQUEST,\n  FAVOURITED_STATUSES_EXPAND_SUCCESS,\n  FAVOURITED_STATUSES_EXPAND_FAIL,\n} from '../actions/favourites';\nimport {\n  FAVOURITE_SUCCESS,\n  UNFAVOURITE_SUCCESS,\n  BOOKMARK_SUCCESS,\n  UNBOOKMARK_SUCCESS,\n  PIN_SUCCESS,\n  UNPIN_SUCCESS,\n} from '../actions/interactions';\nimport {\n  PINNED_STATUSES_FETCH_SUCCESS,\n} from '../actions/pin_statuses';\nimport {\n  TRENDS_STATUSES_FETCH_REQUEST,\n  TRENDS_STATUSES_FETCH_SUCCESS,\n  TRENDS_STATUSES_FETCH_FAIL,\n  TRENDS_STATUSES_EXPAND_REQUEST,\n  TRENDS_STATUSES_EXPAND_SUCCESS,\n  TRENDS_STATUSES_EXPAND_FAIL,\n} from '../actions/trends';\n\n\n\nconst initialState = ImmutableMap({\n  favourites: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  bookmarks: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  pins: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  trending: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n});\n\nconst normalizeList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('loaded', true);\n    map.set('isLoading', false);\n    map.set('items', ImmutableOrderedSet(statuses.map(item => item.id)));\n  }));\n};\n\nconst appendToList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('isLoading', false);\n    map.set('items', map.get('items').union(statuses.map(item => item.id)));\n  }));\n};\n\nconst prependOneToList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => {\n    if (list.includes(status.get('id'))) {\n      return list;\n    } else {\n      return ImmutableOrderedSet([status.get('id')]).union(list);\n    }\n  });\n};\n\nconst removeOneFromList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => list.delete(status.get('id')));\n};\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport default function statusLists(state = initialState, action) {\n  switch(action.type) {\n  case FAVOURITED_STATUSES_FETCH_REQUEST:\n  case FAVOURITED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['favourites', 'isLoading'], true);\n  case FAVOURITED_STATUSES_FETCH_FAIL:\n  case FAVOURITED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['favourites', 'isLoading'], false);\n  case FAVOURITED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'favourites', action.statuses, action.next);\n  case FAVOURITED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'favourites', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_FETCH_REQUEST:\n  case BOOKMARKED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['bookmarks', 'isLoading'], true);\n  case BOOKMARKED_STATUSES_FETCH_FAIL:\n  case BOOKMARKED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['bookmarks', 'isLoading'], false);\n  case BOOKMARKED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'bookmarks', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'bookmarks', action.statuses, action.next);\n  case TRENDS_STATUSES_FETCH_REQUEST:\n  case TRENDS_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['trending', 'isLoading'], true);\n  case TRENDS_STATUSES_FETCH_FAIL:\n  case TRENDS_STATUSES_EXPAND_FAIL:\n    return state.setIn(['trending', 'isLoading'], false);\n  case TRENDS_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'trending', action.statuses, action.next);\n  case TRENDS_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'trending', action.statuses, action.next);\n  case FAVOURITE_SUCCESS:\n    return prependOneToList(state, 'favourites', action.status);\n  case UNFAVOURITE_SUCCESS:\n    return removeOneFromList(state, 'favourites', action.status);\n  case BOOKMARK_SUCCESS:\n    return prependOneToList(state, 'bookmarks', action.status);\n  case UNBOOKMARK_SUCCESS:\n    return removeOneFromList(state, 'bookmarks', action.status);\n  case PINNED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'pins', action.statuses, action.next);\n  case PIN_SUCCESS:\n    return prependOneToList(state, 'pins', action.status);\n  case UNPIN_SUCCESS:\n    return removeOneFromList(state, 'pins', action.status);\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return state.updateIn(['trending', 'items'], ImmutableOrderedSet(), list => list.filterNot(statusId => action.payload.statuses.getIn([statusId, 'account']) === action.payload.relationship.id));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport { STATUS_IMPORT, STATUSES_IMPORT } from '../actions/importer';\nimport { normalizeStatusTranslation } from '../actions/importer/normalizer';\nimport {\n  FAVOURITE_REQUEST,\n  FAVOURITE_FAIL,\n  UNFAVOURITE_REQUEST,\n  UNFAVOURITE_FAIL,\n  BOOKMARK_REQUEST,\n  BOOKMARK_FAIL,\n  UNBOOKMARK_REQUEST,\n  UNBOOKMARK_FAIL,\n} from '../actions/interactions';\nimport {\n  reblog,\n  unreblog,\n} from '../actions/interactions_typed';\nimport {\n  STATUS_MUTE_SUCCESS,\n  STATUS_UNMUTE_SUCCESS,\n  STATUS_REVEAL,\n  STATUS_HIDE,\n  STATUS_COLLAPSE,\n  STATUS_TRANSLATE_SUCCESS,\n  STATUS_TRANSLATE_UNDO,\n  STATUS_FETCH_REQUEST,\n  STATUS_FETCH_FAIL,\n} from '../actions/statuses';\n\nconst importStatus = (state, status) => state.set(status.id, fromJS(status));\n\nconst importStatuses = (state, statuses) =>\n  state.withMutations(mutable => statuses.forEach(status => importStatus(mutable, status)));\n\nconst deleteStatus = (state, id, references) => {\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, []);\n  });\n\n  return state.delete(id);\n};\n\nconst statusTranslateSuccess = (state, id, translation) => {\n  return state.withMutations(map => {\n    map.setIn([id, 'translation'], fromJS(normalizeStatusTranslation(translation, map.get(id))));\n\n    const list = map.getIn([id, 'media_attachments']);\n    if (translation.media_attachments && list) {\n      translation.media_attachments.forEach(item => {\n        const index = list.findIndex(i => i.get('id') === item.id);\n        map.setIn([id, 'media_attachments', index, 'translation'], fromJS({ description: item.description }));\n      });\n    }\n  });\n};\n\nconst statusTranslateUndo = (state, id) => {\n  return state.withMutations(map => {\n    map.deleteIn([id, 'translation']);\n    map.getIn([id, 'media_attachments']).forEach((item, index) => map.deleteIn([id, 'media_attachments', index, 'translation']));\n  });\n};\n\n\n/** @type {ImmutableMap<string, import('mastodon/models/status').Status>} */\nconst initialState = ImmutableMap();\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case STATUS_FETCH_REQUEST:\n    return state.setIn([action.id, 'isLoading'], true);\n  case STATUS_FETCH_FAIL:\n    return state.delete(action.id);\n  case STATUS_IMPORT:\n    return importStatus(state, action.status);\n  case STATUSES_IMPORT:\n    return importStatuses(state, action.statuses);\n  case FAVOURITE_REQUEST:\n    return state.setIn([action.status.get('id'), 'favourited'], true);\n  case FAVOURITE_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'favourited'], false);\n  case UNFAVOURITE_REQUEST:\n    return state.setIn([action.status.get('id'), 'favourited'], false);\n  case UNFAVOURITE_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'favourited'], true);\n  case BOOKMARK_REQUEST:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], true);\n  case BOOKMARK_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], false);\n  case UNBOOKMARK_REQUEST:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], false);\n  case UNBOOKMARK_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], true);\n  case STATUS_MUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], true);\n  case STATUS_UNMUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], false);\n  case STATUS_REVEAL:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], false);\n        }\n      });\n    });\n  case STATUS_HIDE:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], true);\n        }\n      });\n    });\n  case STATUS_COLLAPSE:\n    return state.setIn([action.id, 'collapsed'], action.isCollapsed);\n  case timelineDelete.type:\n    return deleteStatus(state, action.payload.statusId, action.payload.references);\n  case STATUS_TRANSLATE_SUCCESS:\n    return statusTranslateSuccess(state, action.id, action.translation);\n  case STATUS_TRANSLATE_UNDO:\n    return statusTranslateUndo(state, action.id);\n  default:\n    if(reblog.pending.match(action))\n      return state.setIn([action.meta.arg.statusId, 'reblogged'], true);\n    else if(reblog.rejected.match(action))\n      return state.get(action.meta.arg.statusId) === undefined ? state : state.setIn([action.meta.arg.statusId, 'reblogged'], false);\n    else if(unreblog.pending.match(action))\n      return state.setIn([action.meta.arg.statusId, 'reblogged'], false);\n    else if(unreblog.rejected.match(action))\n      return state.get(action.meta.arg.statusId) === undefined ? state : state.setIn([action.meta.arg.statusId, 'reblogged'], true);\n    else\n      return state;\n  }\n}\n","import { apiRequestGet, apiRequestDelete } from 'mastodon/api';\nimport type { ApiSuggestionJSON } from 'mastodon/api_types/suggestions';\n\nexport const apiGetSuggestions = (limit: number) =>\n  apiRequestGet<ApiSuggestionJSON[]>('v2/suggestions', { limit });\n\nexport const apiDeleteSuggestion = (accountId: string) =>\n  apiRequestDelete(`v1/suggestions/${accountId}`);\n","import {\n  apiGetSuggestions,\n  apiDeleteSuggestion,\n} from 'mastodon/api/suggestions';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\n\nexport const fetchSuggestions = createDataLoadingThunk(\n  'suggestions/fetch',\n  () => apiGetSuggestions(20),\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data.map((x) => x.account)));\n    dispatch(fetchRelationships(data.map((x) => x.account.id)));\n\n    return data;\n  },\n);\n\nexport const dismissSuggestion = createDataLoadingThunk(\n  'suggestions/dismiss',\n  ({ accountId }: { accountId: string }) => apiDeleteSuggestion(accountId),\n);\n","import type { ApiSuggestionJSON } from 'mastodon/api_types/suggestions';\n\nexport interface Suggestion extends Omit<ApiSuggestionJSON, 'account'> {\n  account_id: string;\n}\n\nexport const createSuggestion = (\n  serverJSON: ApiSuggestionJSON,\n): Suggestion => ({\n  sources: serverJSON.sources,\n  account_id: serverJSON.account.id,\n});\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n} from 'mastodon/actions/accounts';\nimport { blockDomainSuccess } from 'mastodon/actions/domain_blocks';\nimport {\n  fetchSuggestions,\n  dismissSuggestion,\n} from 'mastodon/actions/suggestions';\nimport { createSuggestion } from 'mastodon/models/suggestion';\nimport type { Suggestion } from 'mastodon/models/suggestion';\n\ninterface State {\n  items: Suggestion[];\n  isLoading: boolean;\n}\n\nconst initialState: State = {\n  items: [],\n  isLoading: false,\n};\n\nexport const suggestionsReducer = createReducer(initialState, (builder) => {\n  builder.addCase(fetchSuggestions.pending, (state) => {\n    state.isLoading = true;\n  });\n\n  builder.addCase(fetchSuggestions.fulfilled, (state, action) => {\n    state.items = action.payload.map(createSuggestion);\n    state.isLoading = false;\n  });\n\n  builder.addCase(fetchSuggestions.rejected, (state) => {\n    state.isLoading = false;\n  });\n\n  builder.addCase(dismissSuggestion.pending, (state, action) => {\n    state.items = state.items.filter(\n      (x) => x.account_id !== action.meta.arg.accountId,\n    );\n  });\n\n  builder.addCase(blockDomainSuccess, (state, action) => {\n    state.items = state.items.filter(\n      (x) =>\n        !action.payload.accounts.some((account) => account.id === x.account_id),\n    );\n  });\n\n  builder.addMatcher(\n    isAnyOf(blockAccountSuccess, muteAccountSuccess),\n    (state, action) => {\n      state.items = state.items.filter(\n        (x) => x.account_id !== action.payload.relationship.id,\n      );\n    },\n  );\n});\n","import { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n  unfollowAccountSuccess\n} from '../actions/accounts';\nimport {\n  TIMELINE_UPDATE,\n  TIMELINE_CLEAR,\n  TIMELINE_EXPAND_SUCCESS,\n  TIMELINE_EXPAND_REQUEST,\n  TIMELINE_EXPAND_FAIL,\n  TIMELINE_SCROLL_TOP,\n  TIMELINE_CONNECT,\n  TIMELINE_LOAD_PENDING,\n  TIMELINE_MARK_AS_PARTIAL,\n  TIMELINE_INSERT,\n  TIMELINE_GAP,\n  TIMELINE_SUGGESTIONS,\n  disconnectTimeline,\n} from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap();\n\nconst initialTimeline = ImmutableMap({\n  unread: 0,\n  online: false,\n  top: true,\n  isLoading: false,\n  hasMore: true,\n  pendingItems: ImmutableList(),\n  items: ImmutableList(),\n});\n\nconst isPlaceholder = value => value === TIMELINE_GAP || value === TIMELINE_SUGGESTIONS;\n\nconst expandNormalizedTimeline = (state, timeline, statuses, next, isPartial, isLoadingRecent, usePendingItems) => {\n  // This method is pretty tricky because:\n  // - existing items in the timeline might be out of order\n  // - the existing timeline may have gaps, most often explicitly noted with a `null` item\n  // - ideally, we don't want it to reorder existing items of the timeline\n  // - `statuses` may include items that are already included in the timeline\n  // - this function can be called either to fill in a gap, or load newer items\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    mMap.set('isLoading', false);\n    mMap.set('isPartial', isPartial);\n\n    if (!next && !isLoadingRecent) mMap.set('hasMore', false);\n\n    if (timeline.endsWith(':pinned')) {\n      mMap.set('items', statuses.map(status => status.get('id')));\n    } else if (!statuses.isEmpty()) {\n      usePendingItems = isLoadingRecent && (usePendingItems || !mMap.get('pendingItems').isEmpty());\n\n      mMap.update(usePendingItems ? 'pendingItems' : 'items', ImmutableList(), oldIds => {\n        const newIds = statuses.map(status => status.get('id'));\n\n        // Now this gets tricky, as we don't necessarily know for sure where the gap to fill is\n        // and some items in the timeline may not be properly ordered.\n\n        // However, we know that `newIds.last()` is the oldest item that was requested and that\n        // there is no “hole” between `newIds.last()` and `newIds.first()`.\n\n        // First, find the furthest (if properly sorted, oldest) item in the timeline that is\n        // newer than the oldest fetched one, as it's most likely that it delimits the gap.\n        // Start the gap *after* that item.\n        const lastIndex = oldIds.findLastIndex(id => !isPlaceholder(id) && compareId(id, newIds.last()) >= 0) + 1;\n\n        // Then, try to find the furthest (if properly sorted, oldest) item in the timeline that\n        // is newer than the most recent fetched one, as it delimits a section comprised of only\n        // items older or within `newIds` (or that were deleted from the server, so should be removed\n        // anyway).\n        // Stop the gap *after* that item.\n        const firstIndex = oldIds.take(lastIndex).findLastIndex(id => !isPlaceholder(id) && compareId(id, newIds.first()) > 0) + 1;\n\n        let insertedIds = ImmutableOrderedSet(newIds).withMutations(insertedIds => {\n          // It is possible, though unlikely, that the slice we are replacing contains items older\n          // than the elements we got from the API. Get them and add them back at the back of the\n          // slice.\n          const olderIds = oldIds.slice(firstIndex, lastIndex).filter(id => !isPlaceholder(id) && compareId(id, newIds.last()) < 0);\n          insertedIds.union(olderIds);\n\n          // Make sure we aren't inserting duplicates\n          insertedIds.subtract(oldIds.take(firstIndex), oldIds.skip(lastIndex));\n        }).toList();\n\n        // Finally, insert a gap marker if the data is marked as partial by the server\n        if (isPartial && (firstIndex === 0 || oldIds.get(firstIndex - 1) !== TIMELINE_GAP)) {\n          insertedIds = insertedIds.unshift(TIMELINE_GAP);\n        }\n\n        return oldIds.take(firstIndex).concat(\n          insertedIds,\n          oldIds.skip(lastIndex),\n        );\n      });\n    }\n  }));\n};\n\nconst updateTimeline = (state, timeline, status, usePendingItems) => {\n  const top = state.getIn([timeline, 'top']);\n\n  if (usePendingItems || !state.getIn([timeline, 'pendingItems']).isEmpty()) {\n    if (state.getIn([timeline, 'pendingItems'], ImmutableList()).includes(status.get('id')) || state.getIn([timeline, 'items'], ImmutableList()).includes(status.get('id'))) {\n      return state;\n    }\n\n    return state.update(timeline, initialTimeline, map => map.update('pendingItems', list => list.unshift(status.get('id'))).update('unread', unread => unread + 1));\n  }\n\n  const ids        = state.getIn([timeline, 'items'], ImmutableList());\n  const includesId = ids.includes(status.get('id'));\n  const unread     = state.getIn([timeline, 'unread'], 0);\n\n  if (includesId) {\n    return state;\n  }\n\n  let newIds = ids;\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (!top) mMap.set('unread', unread + 1);\n    if (top && ids.size > 40) newIds = newIds.take(20);\n    mMap.set('items', newIds.unshift(status.get('id')));\n  }));\n};\n\nconst deleteStatus = (state, id, references, exclude_account = null) => {\n  state.keySeq().forEach(timeline => {\n    if (exclude_account === null || (timeline !== `account:${exclude_account}` && !timeline.startsWith(`account:${exclude_account}:`))) {\n      const helper = list => list.filterNot(item => item === id);\n      state = state.updateIn([timeline, 'items'], helper).updateIn([timeline, 'pendingItems'], helper);\n    }\n  });\n\n  // Remove reblogs of deleted status\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, [], exclude_account);\n  });\n\n  return state;\n};\n\nconst clearTimeline = (state, timeline) => {\n  return state.set(timeline, initialTimeline);\n};\n\nconst filterTimelines = (state, relationship, statuses) => {\n  let references;\n\n  statuses.forEach(status => {\n    if (status.get('account') !== relationship.id) {\n      return;\n    }\n\n    references = statuses.filter(item => item.get('reblog') === status.get('id')).map(item => item.get('id')).valueSeq().toJSON();\n    state      = deleteStatus(state, status.get('id'), references, relationship.id);\n  });\n\n  return state;\n};\n\nconst filterTimeline = (timeline, state, relationship, statuses) => {\n  const helper = list => list.filterNot(statusId => statuses.getIn([statusId, 'account']) === relationship.id);\n  return state.updateIn([timeline, 'items'], ImmutableList(), helper).updateIn([timeline, 'pendingItems'], ImmutableList(), helper);\n};\n\nconst updateTop = (state, timeline, top) => {\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (top) mMap.set('unread', mMap.get('pendingItems').size);\n    mMap.set('top', top);\n  }));\n};\n\nconst reconnectTimeline = (state, usePendingItems) => {\n  if (state.get('online')) {\n    return state;\n  }\n\n  return state.withMutations(mMap => {\n    mMap.update(usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(TIMELINE_GAP) : items);\n    mMap.set('online', true);\n  });\n};\n\nexport default function timelines(state = initialState, action) {\n  switch(action.type) {\n  case TIMELINE_LOAD_PENDING:\n    return state.update(action.timeline, initialTimeline, map =>\n      map.update('items', list => map.get('pendingItems').concat(list.take(40))).set('pendingItems', ImmutableList()).set('unread', 0));\n  case TIMELINE_EXPAND_REQUEST:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', true));\n  case TIMELINE_EXPAND_FAIL:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', false));\n  case TIMELINE_EXPAND_SUCCESS:\n    return expandNormalizedTimeline(state, action.timeline, fromJS(action.statuses), action.next, action.partial, action.isLoadingRecent, action.usePendingItems);\n  case TIMELINE_UPDATE:\n    return updateTimeline(state, action.timeline, fromJS(action.status), action.usePendingItems);\n  case timelineDelete.type:\n    return deleteStatus(state, action.payload.statusId, action.payload.references, action.payload.reblogOf);\n  case TIMELINE_CLEAR:\n    return clearTimeline(state, action.timeline);\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterTimelines(state, action.payload.relationship, action.payload.statuses);\n  case unfollowAccountSuccess.type:\n    return filterTimeline('home', state, action.payload.relationship, action.payload.statuses);\n  case TIMELINE_SCROLL_TOP:\n    return updateTop(state, action.timeline, action.top);\n  case TIMELINE_CONNECT:\n    return state.update(action.timeline, initialTimeline, map => reconnectTimeline(map, action.usePendingItems));\n  case disconnectTimeline.type:\n    return state.update(\n      action.payload.timeline,\n      initialTimeline,\n      map => map.set('online', false).update(action.payload.usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(TIMELINE_GAP) : items),\n    );\n  case TIMELINE_MARK_AS_PARTIAL:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.set('isPartial', true).set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('unread', 0),\n    );\n  case TIMELINE_INSERT:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.update('items', ImmutableList(), list => {\n        if (!list.includes(action.key)) {\n          return list.insert(action.index, action.key);\n        }\n\n        return list;\n      })\n    );\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  TRENDS_TAGS_FETCH_REQUEST,\n  TRENDS_TAGS_FETCH_SUCCESS,\n  TRENDS_TAGS_FETCH_FAIL,\n  TRENDS_LINKS_FETCH_REQUEST,\n  TRENDS_LINKS_FETCH_SUCCESS,\n  TRENDS_LINKS_FETCH_FAIL,\n} from 'mastodon/actions/trends';\n\nconst initialState = ImmutableMap({\n  tags: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n\n  links: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n});\n\nexport default function trendsReducer(state = initialState, action) {\n  switch(action.type) {\n  case TRENDS_TAGS_FETCH_REQUEST:\n    return state.setIn(['tags', 'isLoading'], true);\n  case TRENDS_TAGS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['tags', 'items'], fromJS(action.trends));\n      map.setIn(['tags', 'isLoading'], false);\n    });\n  case TRENDS_TAGS_FETCH_FAIL:\n    return state.setIn(['tags', 'isLoading'], false);\n  case TRENDS_LINKS_FETCH_REQUEST:\n    return state.setIn(['links', 'isLoading'], true);\n  case TRENDS_LINKS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['links', 'items'], fromJS(action.trends));\n      map.setIn(['links', 'isLoading'], false);\n    });\n  case TRENDS_LINKS_FETCH_FAIL:\n    return state.setIn(['links', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import { apiRequestGet } from 'mastodon/api';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\n\nexport const apiGetDirectory = (\n  params: {\n    order: string;\n    local: boolean;\n    offset?: number;\n  },\n  limit = 20,\n) =>\n  apiRequestGet<ApiAccountJSON[]>('v1/directory', {\n    ...params,\n    limit,\n  });\n","import type { List as ImmutableList } from 'immutable';\n\nimport { apiGetDirectory } from 'mastodon/api/directory';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\n\nexport const fetchDirectory = createDataLoadingThunk(\n  'directory/fetch',\n  async (params: Parameters<typeof apiGetDirectory>[0]) =>\n    apiGetDirectory(params),\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchRelationships(data.map((x) => x.id)));\n\n    return { accounts: data };\n  },\n);\n\nexport const expandDirectory = createDataLoadingThunk(\n  'directory/expand',\n  async (params: Parameters<typeof apiGetDirectory>[0], { getState }) => {\n    const loadedItems = getState().user_lists.getIn([\n      'directory',\n      'items',\n    ]) as ImmutableList<unknown>;\n\n    return apiGetDirectory({ ...params, offset: loadedItems.size }, 20);\n  },\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchRelationships(data.map((x) => x.id)));\n\n    return { accounts: data };\n  },\n);\n","import { apiGetFeaturedTags } from 'mastodon/api/accounts';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nexport const fetchFeaturedTags = createDataLoadingThunk(\n  'accounts/featured_tags',\n  ({ accountId }: { accountId: string }) => apiGetFeaturedTags(accountId),\n);\n","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from './modal';\n\nexport const BLOCKS_FETCH_REQUEST = 'BLOCKS_FETCH_REQUEST';\nexport const BLOCKS_FETCH_SUCCESS = 'BLOCKS_FETCH_SUCCESS';\nexport const BLOCKS_FETCH_FAIL    = 'BLOCKS_FETCH_FAIL';\n\nexport const BLOCKS_EXPAND_REQUEST = 'BLOCKS_EXPAND_REQUEST';\nexport const BLOCKS_EXPAND_SUCCESS = 'BLOCKS_EXPAND_SUCCESS';\nexport const BLOCKS_EXPAND_FAIL    = 'BLOCKS_EXPAND_FAIL';\n\nexport function fetchBlocks() {\n  return (dispatch) => {\n    dispatch(fetchBlocksRequest());\n\n    api().get('/api/v1/blocks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchBlocksFail(error)));\n  };\n}\n\nexport function fetchBlocksRequest() {\n  return {\n    type: BLOCKS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchBlocksFail(error) {\n  return {\n    type: BLOCKS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBlocks() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'blocks', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandBlocksRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandBlocksFail(error)));\n  };\n}\n\nexport function expandBlocksRequest() {\n  return {\n    type: BLOCKS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandBlocksFail(error) {\n  return {\n    type: BLOCKS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initBlockModal(account) {\n  return dispatch => {\n    dispatch(openModal({\n      modalType: 'BLOCK',\n      modalProps: {\n        accountId: account.get('id'),\n        acct: account.get('acct'),\n      },\n    }));\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from './modal';\n\nexport const MUTES_FETCH_REQUEST = 'MUTES_FETCH_REQUEST';\nexport const MUTES_FETCH_SUCCESS = 'MUTES_FETCH_SUCCESS';\nexport const MUTES_FETCH_FAIL    = 'MUTES_FETCH_FAIL';\n\nexport const MUTES_EXPAND_REQUEST = 'MUTES_EXPAND_REQUEST';\nexport const MUTES_EXPAND_SUCCESS = 'MUTES_EXPAND_SUCCESS';\nexport const MUTES_EXPAND_FAIL    = 'MUTES_EXPAND_FAIL';\n\nexport function fetchMutes() {\n  return (dispatch) => {\n    dispatch(fetchMutesRequest());\n\n    api().get('/api/v1/mutes').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchMutesFail(error)));\n  };\n}\n\nexport function fetchMutesRequest() {\n  return {\n    type: MUTES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchMutesFail(error) {\n  return {\n    type: MUTES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandMutes() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'mutes', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandMutesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandMutesFail(error)));\n  };\n}\n\nexport function expandMutesRequest() {\n  return {\n    type: MUTES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandMutesFail(error) {\n  return {\n    type: MUTES_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initMuteModal(account) {\n  return dispatch => {\n    dispatch(openModal({\n      modalType: 'MUTE',\n      modalProps: {\n        accountId: account.get('id'),\n        acct: account.get('acct'),\n      },\n    }));\n  };\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  expandDirectory,\n  fetchDirectory\n} from 'mastodon/actions/directory';\nimport {\n  fetchFeaturedTags\n} from 'mastodon/actions/featured_tags';\n\nimport {\n  FOLLOWERS_FETCH_REQUEST,\n  FOLLOWERS_FETCH_SUCCESS,\n  FOLLOWERS_FETCH_FAIL,\n  FOLLOWERS_EXPAND_REQUEST,\n  FOLLOWERS_EXPAND_SUCCESS,\n  FOLLOWERS_EXPAND_FAIL,\n  FOLLOWING_FETCH_REQUEST,\n  FOLLOWING_FETCH_SUCCESS,\n  FOLLOWING_FETCH_FAIL,\n  FOLLOWING_EXPAND_REQUEST,\n  FOLLOWING_EXPAND_SUCCESS,\n  FOLLOWING_EXPAND_FAIL,\n  FOLLOW_REQUESTS_FETCH_REQUEST,\n  FOLLOW_REQUESTS_FETCH_SUCCESS,\n  FOLLOW_REQUESTS_FETCH_FAIL,\n  FOLLOW_REQUESTS_EXPAND_REQUEST,\n  FOLLOW_REQUESTS_EXPAND_SUCCESS,\n  FOLLOW_REQUESTS_EXPAND_FAIL,\n  authorizeFollowRequestSuccess,\n  rejectFollowRequestSuccess,\n  fetchEndorsedAccounts,\n} from '../actions/accounts';\nimport {\n  BLOCKS_FETCH_REQUEST,\n  BLOCKS_FETCH_SUCCESS,\n  BLOCKS_FETCH_FAIL,\n  BLOCKS_EXPAND_REQUEST,\n  BLOCKS_EXPAND_SUCCESS,\n  BLOCKS_EXPAND_FAIL,\n} from '../actions/blocks';\nimport {\n  REBLOGS_FETCH_REQUEST,\n  REBLOGS_FETCH_SUCCESS,\n  REBLOGS_FETCH_FAIL,\n  REBLOGS_EXPAND_REQUEST,\n  REBLOGS_EXPAND_SUCCESS,\n  REBLOGS_EXPAND_FAIL,\n  FAVOURITES_FETCH_REQUEST,\n  FAVOURITES_FETCH_SUCCESS,\n  FAVOURITES_FETCH_FAIL,\n  FAVOURITES_EXPAND_REQUEST,\n  FAVOURITES_EXPAND_SUCCESS,\n  FAVOURITES_EXPAND_FAIL,\n} from '../actions/interactions';\nimport {\n  MUTES_FETCH_REQUEST,\n  MUTES_FETCH_SUCCESS,\n  MUTES_FETCH_FAIL,\n  MUTES_EXPAND_REQUEST,\n  MUTES_EXPAND_SUCCESS,\n  MUTES_EXPAND_FAIL,\n} from '../actions/mutes';\nimport { notificationsUpdate } from '../actions/notifications';\n\nconst initialListState = ImmutableMap({\n  next: null,\n  isLoading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap({\n  followers: initialListState,\n  following: initialListState,\n  reblogged_by: initialListState,\n  favourited_by: initialListState,\n  follow_requests: initialListState,\n  blocks: initialListState,\n  mutes: initialListState,\n  featured_tags: initialListState,\n});\n\nconst normalizeList = (state, path, accounts, next) => {\n  return state.setIn(path, ImmutableMap({\n    next,\n    items: ImmutableList(accounts.map(item => item.id)),\n    isLoading: false,\n  }));\n};\n\nconst appendToList = (state, path, accounts, next) => {\n  return state.updateIn(path, map => {\n    return map.set('next', next).set('isLoading', false).update('items', list => list.concat(accounts.map(item => item.id)));\n  });\n};\n\nconst normalizeFollowRequest = (state, notification) => {\n  return state.updateIn(['follow_requests', 'items'], list => {\n    return list.filterNot(item => item === notification.account.id).unshift(notification.account.id);\n  });\n};\n\nconst normalizeFeaturedTag = (featuredTags, accountId) => {\n  const normalizeFeaturedTag = { ...featuredTags, accountId: accountId };\n  return fromJS(normalizeFeaturedTag);\n};\n\nconst normalizeFeaturedTags = (state, path, featuredTags, accountId) => {\n  return state.setIn(path, ImmutableMap({\n    items: ImmutableList(featuredTags.map(featuredTag => normalizeFeaturedTag(featuredTag, accountId)).sort((a, b) => b.get('statuses_count') - a.get('statuses_count'))),\n    isLoading: false,\n  }));\n};\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport default function userLists(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOWERS_FETCH_SUCCESS:\n    return normalizeList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_EXPAND_SUCCESS:\n    return appendToList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_FETCH_REQUEST:\n  case FOLLOWERS_EXPAND_REQUEST:\n    return state.setIn(['followers', action.id, 'isLoading'], true);\n  case FOLLOWERS_FETCH_FAIL:\n  case FOLLOWERS_EXPAND_FAIL:\n    return state.setIn(['followers', action.id, 'isLoading'], false);\n  case FOLLOWING_FETCH_SUCCESS:\n    return normalizeList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_EXPAND_SUCCESS:\n    return appendToList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_FETCH_REQUEST:\n  case FOLLOWING_EXPAND_REQUEST:\n    return state.setIn(['following', action.id, 'isLoading'], true);\n  case FOLLOWING_FETCH_FAIL:\n  case FOLLOWING_EXPAND_FAIL:\n    return state.setIn(['following', action.id, 'isLoading'], false);\n  case REBLOGS_FETCH_SUCCESS:\n    return normalizeList(state, ['reblogged_by', action.id], action.accounts, action.next);\n  case REBLOGS_EXPAND_SUCCESS:\n    return appendToList(state, ['reblogged_by', action.id], action.accounts, action.next);\n  case REBLOGS_FETCH_REQUEST:\n  case REBLOGS_EXPAND_REQUEST:\n    return state.setIn(['reblogged_by', action.id, 'isLoading'], true);\n  case REBLOGS_FETCH_FAIL:\n  case REBLOGS_EXPAND_FAIL:\n    return state.setIn(['reblogged_by', action.id, 'isLoading'], false);\n  case FAVOURITES_FETCH_SUCCESS:\n    return normalizeList(state, ['favourited_by', action.id], action.accounts, action.next);\n  case FAVOURITES_EXPAND_SUCCESS:\n    return appendToList(state, ['favourited_by', action.id], action.accounts, action.next);\n  case FAVOURITES_FETCH_REQUEST:\n  case FAVOURITES_EXPAND_REQUEST:\n    return state.setIn(['favourited_by', action.id, 'isLoading'], true);\n  case FAVOURITES_FETCH_FAIL:\n  case FAVOURITES_EXPAND_FAIL:\n    return state.setIn(['favourited_by', action.id, 'isLoading'], false);\n  case notificationsUpdate.type:\n    return action.payload.notification.type === 'follow_request' ? normalizeFollowRequest(state, action.payload.notification) : state;\n  case FOLLOW_REQUESTS_FETCH_SUCCESS:\n    return normalizeList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_EXPAND_SUCCESS:\n    return appendToList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_FETCH_REQUEST:\n  case FOLLOW_REQUESTS_EXPAND_REQUEST:\n    return state.setIn(['follow_requests', 'isLoading'], true);\n  case FOLLOW_REQUESTS_FETCH_FAIL:\n  case FOLLOW_REQUESTS_EXPAND_FAIL:\n    return state.setIn(['follow_requests', 'isLoading'], false);\n  case authorizeFollowRequestSuccess.type:\n  case rejectFollowRequestSuccess.type:\n    return state.updateIn(['follow_requests', 'items'], list => list.filterNot(item => item === action.payload.id));\n  case BLOCKS_FETCH_SUCCESS:\n    return normalizeList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_EXPAND_SUCCESS:\n    return appendToList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_FETCH_REQUEST:\n  case BLOCKS_EXPAND_REQUEST:\n    return state.setIn(['blocks', 'isLoading'], true);\n  case BLOCKS_FETCH_FAIL:\n  case BLOCKS_EXPAND_FAIL:\n    return state.setIn(['blocks', 'isLoading'], false);\n  case MUTES_FETCH_SUCCESS:\n    return normalizeList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_EXPAND_SUCCESS:\n    return appendToList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_FETCH_REQUEST:\n  case MUTES_EXPAND_REQUEST:\n    return state.setIn(['mutes', 'isLoading'], true);\n  case MUTES_FETCH_FAIL:\n  case MUTES_EXPAND_FAIL:\n    return state.setIn(['mutes', 'isLoading'], false);\n  default:\n    if (fetchEndorsedAccounts.fulfilled.match(action))\n      return normalizeList(state, ['featured_accounts', action.meta.arg.accountId], action.payload, undefined);\n    else if (fetchEndorsedAccounts.pending.match(action))\n      return state.setIn(['featured_accounts', action.meta.arg.accountId, 'isLoading'], true);\n    else if (fetchEndorsedAccounts.rejected.match(action))\n      return state.setIn(['featured_accounts', action.meta.arg.accountId, 'isLoading'], false);\n    else if (fetchFeaturedTags.fulfilled.match(action))\n      return normalizeFeaturedTags(state, ['featured_tags', action.meta.arg.accountId], action.payload, action.meta.arg.accountId);\n    else if (fetchFeaturedTags.pending.match(action))\n      return state.setIn(['featured_tags', action.meta.arg.accountId, 'isLoading'], true);\n    else if (fetchFeaturedTags.rejected.match(action))\n      return state.setIn(['featured_tags', action.meta.arg.accountId, 'isLoading'], false);\n    else if (fetchDirectory.fulfilled.match(action))\n      return normalizeList(state, ['directory'], action.payload.accounts, undefined);\n    else if (expandDirectory.fulfilled.match(action))\n      return appendToList(state, ['directory'], action.payload.accounts, undefined);\n    else if (fetchDirectory.pending.match(action) ||\n     expandDirectory.pending.match(action))\n      return state.setIn(['directory', 'isLoading'], true);\n    else if (fetchDirectory.rejected.match(action) ||\n     expandDirectory.rejected.match(action))\n      return state.setIn(['directory', 'isLoading'], false);\n    else\n      return state;\n  }\n}\n","import { Record as ImmutableRecord } from 'immutable';\n\nimport { loadingBarReducer } from 'react-redux-loading-bar';\nimport { combineReducers } from 'redux-immutable';\n\nimport { accountsReducer } from './accounts';\nimport { accountsFamiliarFollowersReducer } from './accounts_familiar_followers';\nimport { accountsMapReducer } from './accounts_map';\nimport { alertsReducer } from './alerts';\nimport announcements from './announcements';\nimport { composeReducer } from './compose';\nimport { contextsReducer } from './contexts';\nimport conversations from './conversations';\nimport custom_emojis from './custom_emojis';\nimport { dropdownMenuReducer } from './dropdown_menu';\nimport filters from './filters';\nimport height_cache from './height_cache';\nimport history from './history';\nimport { listsReducer } from './lists';\nimport { markersReducer } from './markers';\nimport media_attachments from './media_attachments';\nimport meta from './meta';\nimport { modalReducer } from './modal';\nimport { navigationReducer } from './navigation';\nimport { notificationGroupsReducer } from './notification_groups';\nimport { notificationPolicyReducer } from './notification_policy';\nimport { notificationRequestsReducer } from './notification_requests';\nimport notifications from './notifications';\nimport { pictureInPictureReducer } from './picture_in_picture';\nimport { pollsReducer } from './polls';\nimport push_notifications from './push_notifications';\nimport { relationshipsReducer } from './relationships';\nimport { searchReducer } from './search';\nimport server from './server';\nimport settings from './settings';\nimport status_lists from './status_lists';\nimport statuses from './statuses';\nimport { suggestionsReducer } from './suggestions';\nimport timelines from './timelines';\nimport trends from './trends';\nimport user_lists from './user_lists';\n\nconst reducers = {\n  announcements,\n  dropdownMenu: dropdownMenuReducer,\n  timelines,\n  meta,\n  alerts: alertsReducer,\n  loadingBar: loadingBarReducer,\n  modal: modalReducer,\n  user_lists,\n  status_lists,\n  accounts: accountsReducer,\n  accounts_map: accountsMapReducer,\n  accounts_familiar_followers: accountsFamiliarFollowersReducer,\n  statuses,\n  relationships: relationshipsReducer,\n  settings,\n  push_notifications,\n  server,\n  contexts: contextsReducer,\n  compose: composeReducer,\n  search: searchReducer,\n  media_attachments,\n  notifications,\n  notificationGroups: notificationGroupsReducer,\n  height_cache,\n  custom_emojis,\n  lists: listsReducer,\n  filters,\n  conversations,\n  suggestions: suggestionsReducer,\n  polls: pollsReducer,\n  trends,\n  markers: markersReducer,\n  picture_in_picture: pictureInPictureReducer,\n  history,\n  notificationPolicy: notificationPolicyReducer,\n  notificationRequests: notificationRequestsReducer,\n  navigation: navigationReducer,\n};\n\n// We want the root state to be an ImmutableRecord, which is an object with a defined list of keys,\n// so it is properly typed and keys can be accessed using `state.<key>` syntax.\n// This will allow an easy conversion to a plain object once we no longer call `get` or `getIn` on the root state\n\n// By default with `combineReducers` it is a Collection, so we provide our own implementation to get a Record\nconst initialRootState = Object.fromEntries(\n  Object.entries(reducers).map(([name, reducer]) => [\n    name,\n    reducer(undefined, {\n      // empty action\n    }),\n  ]),\n);\n\nconst RootStateRecord = ImmutableRecord(initialRootState, 'RootState');\n\nconst rootReducer = combineReducers(reducers, RootStateRecord);\n\nexport { rootReducer };\n","import {\n  isAction,\n  isAsyncThunkAction,\n  isRejectedWithValue,\n} from '@reduxjs/toolkit';\nimport type { Action, Middleware } from '@reduxjs/toolkit';\n\nimport type { RootState } from '..';\nimport { showAlertForError } from '../../actions/alerts';\nimport type { AsyncThunkRejectValue } from '../typed_functions';\n\nconst defaultFailSuffix = 'FAIL';\nconst isFailedAction = new RegExp(`${defaultFailSuffix}$`, 'g');\n\ninterface RejectedAction extends Action {\n  payload: AsyncThunkRejectValue;\n}\n\ninterface ActionWithMaybeAlertParams extends Action, AsyncThunkRejectValue {\n  payload?: AsyncThunkRejectValue;\n}\n\nfunction isRejectedActionWithPayload(\n  action: unknown,\n): action is RejectedAction {\n  return isAsyncThunkAction(action) && isRejectedWithValue(action);\n}\n\nfunction isActionWithMaybeAlertParams(\n  action: unknown,\n): action is ActionWithMaybeAlertParams {\n  return isAction(action);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type -- we need to use `{}` here to ensure the dispatch types can be merged\nexport const errorsMiddleware: Middleware<{}, RootState> =\n  ({ dispatch }) =>\n  (next) =>\n  (action) => {\n    if (isRejectedActionWithPayload(action) && !action.payload.skipAlert) {\n      dispatch(\n        showAlertForError(action.payload.error, action.payload.skipNotFound),\n      );\n    } else if (\n      isActionWithMaybeAlertParams(action) &&\n      !(action.payload?.skipAlert || action.skipAlert) &&\n      action.type.match(isFailedAction)\n    ) {\n      const { error, skipNotFound } = action.payload ?? action;\n      dispatch(showAlertForError(error, skipNotFound));\n    }\n\n    return next(action);\n  };\n","import {\n  isAsyncThunkAction,\n  isPending as isThunkActionPending,\n  isFulfilled as isThunkActionFulfilled,\n  isRejected as isThunkActionRejected,\n  isAction,\n} from '@reduxjs/toolkit';\nimport type { Middleware, UnknownAction } from '@reduxjs/toolkit';\n\nimport { showLoading, hideLoading } from 'react-redux-loading-bar';\n\nimport type { RootState } from '..';\n\ninterface Config {\n  promiseTypeSuffixes?: string[];\n}\n\nconst defaultTypeSuffixes: Config['promiseTypeSuffixes'] = [\n  'PENDING',\n  'FULFILLED',\n  'REJECTED',\n];\n\ninterface ActionWithSkipLoading extends UnknownAction {\n  skipLoading: boolean;\n}\n\nfunction isActionWithSkipLoading(\n  action: unknown,\n): action is ActionWithSkipLoading {\n  return (\n    isAction(action) &&\n    'skipLoading' in action &&\n    typeof action.skipLoading === 'boolean'\n  );\n}\n\nexport const loadingBarMiddleware = (\n  config: Config = {},\n): Middleware<{ skipLoading?: boolean }, RootState> => {\n  const promiseTypeSuffixes = config.promiseTypeSuffixes ?? defaultTypeSuffixes;\n\n  return ({ dispatch }) =>\n    (next) =>\n    (action) => {\n      let isPending = false;\n      let isFulfilled = false;\n      let isRejected = false;\n\n      if (\n        isAsyncThunkAction(action) &&\n        'useLoadingBar' in action.meta &&\n        action.meta.useLoadingBar\n      ) {\n        if (isThunkActionPending(action)) isPending = true;\n        else if (isThunkActionFulfilled(action)) isFulfilled = true;\n        else if (isThunkActionRejected(action)) isRejected = true;\n      } else if (\n        isActionWithSkipLoading(action) &&\n        !action.skipLoading &&\n        typeof action.type === 'string'\n      ) {\n        const [PENDING, FULFILLED, REJECTED] = promiseTypeSuffixes;\n\n        const isPendingRegexp = new RegExp(`${PENDING}$`, 'g');\n        const isFulfilledRegexp = new RegExp(`${FULFILLED}$`, 'g');\n        const isRejectedRegexp = new RegExp(`${REJECTED}$`, 'g');\n\n        if (action.type.match(isPendingRegexp)) {\n          isPending = true;\n        } else if (action.type.match(isFulfilledRegexp)) {\n          isFulfilled = true;\n        } else if (action.type.match(isRejectedRegexp)) {\n          isRejected = true;\n        }\n      }\n\n      if (isPending) {\n        dispatch(showLoading());\n      } else if (isFulfilled || isRejected) {\n        dispatch(hideLoading());\n      }\n\n      return next(action);\n    };\n};\n","import { isAction } from '@reduxjs/toolkit';\nimport type { Middleware, UnknownAction } from '@reduxjs/toolkit';\n\nimport ready from 'mastodon/ready';\nimport { assetHost } from 'mastodon/utils/config';\n\nimport type { RootState } from '..';\n\ninterface AudioSource {\n  src: string;\n  type: string;\n}\n\ninterface ActionWithMetaSound extends UnknownAction {\n  meta: { sound: string };\n}\n\nfunction isActionWithMetaSound(action: unknown): action is ActionWithMetaSound {\n  return (\n    isAction(action) &&\n    'meta' in action &&\n    typeof action.meta === 'object' &&\n    !!action.meta &&\n    'sound' in action.meta &&\n    typeof action.meta.sound === 'string'\n  );\n}\n\nconst createAudio = (sources: AudioSource[]) => {\n  const audio = new Audio();\n  sources.forEach(({ type, src }) => {\n    const source = document.createElement('source');\n    source.type = type;\n    source.src = src;\n    audio.appendChild(source);\n  });\n  return audio;\n};\n\nconst play = (audio: HTMLAudioElement) => {\n  if (!audio.paused) {\n    audio.pause();\n    if (typeof audio.fastSeek === 'function') {\n      audio.fastSeek(0);\n    } else {\n      audio.currentTime = 0;\n    }\n  }\n\n  void audio.play();\n};\n\nexport const soundsMiddleware = (): Middleware<\n  // eslint-disable-next-line @typescript-eslint/no-empty-object-type -- we need to use `{}` here to ensure the dispatch types can be merged\n  {},\n  RootState\n> => {\n  const soundCache: Record<string, HTMLAudioElement> = {};\n\n  void ready(() => {\n    soundCache.boop = createAudio([\n      {\n        src: `${assetHost}/sounds/boop.ogg`,\n        type: 'audio/ogg',\n      },\n      {\n        src: `${assetHost}/sounds/boop.mp3`,\n        type: 'audio/mpeg',\n      },\n    ]);\n  });\n\n  return () => (next) => (action) => {\n    if (isActionWithMetaSound(action)) {\n      const sound = action.meta.sound;\n\n      if (sound) {\n        const s = soundCache[sound];\n        if (s) play(s);\n      }\n    }\n\n    return next(action);\n  };\n};\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport { rootReducer } from '../reducers';\n\nimport { errorsMiddleware } from './middlewares/errors';\nimport { loadingBarMiddleware } from './middlewares/loading_bar';\nimport { soundsMiddleware } from './middlewares/sounds';\n\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      // In development, Redux Toolkit enables 2 default middlewares to detect\n      // common issues with states. Unfortunately, our use of ImmutableJS for state\n      // triggers both, so lets disable them until our state is fully refactored\n\n      // https://redux-toolkit.js.org/api/serializabilityMiddleware\n      // This checks recursively that every values in the state are serializable in JSON\n      // Which is not the case, as we use ImmutableJS structures, but also File objects\n      serializableCheck: false,\n\n      // https://redux-toolkit.js.org/api/immutabilityMiddleware\n      // This checks recursively if every value in the state is immutable (ie, a JS primitive type)\n      // But this is not the case, as our Root State is an ImmutableJS map, which is an object\n      immutableCheck: false,\n    })\n      .concat(\n        loadingBarMiddleware({\n          promiseTypeSuffixes: ['REQUEST', 'SUCCESS', 'FAIL'],\n        }),\n      )\n      .concat(errorsMiddleware)\n      .concat(soundsMiddleware()),\n});\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof rootReducer>;\nexport type AppDispatch = typeof store.dispatch;\nexport type GetState = typeof store.getState;\n","import { useState } from 'react';\n\n/**\n * A convenience hook around `useState` designed to be paired with\n * the component [callback ref](https://reactjs.org/docs/refs-and-the-dom.html#callback-refs) api.\n * Callback refs are useful over `useRef()` when you need to respond to the ref being set\n * instead of lazily accessing it in an effect.\n *\n * ```ts\n * const [element, attachRef] = useCallbackRef<HTMLDivElement>()\n *\n * useEffect(() => {\n *   if (!element) return\n *\n *   const calendar = new FullCalendar.Calendar(element)\n *\n *   return () => {\n *     calendar.destroy()\n *   }\n * }, [element])\n *\n * return <div ref={attachRef} />\n * ```\n *\n * @category refs\n */\nexport default function useCallbackRef() {\n  return useState(null);\n}","import { useMemo } from 'react';\nconst toFnRef = ref => !ref || typeof ref === 'function' ? ref : value => {\n  ref.current = value;\n};\nexport function mergeRefs(refA, refB) {\n  const a = toFnRef(refA);\n  const b = toFnRef(refB);\n  return value => {\n    if (a) a(value);\n    if (b) b(value);\n  };\n}\n\n/**\n * Create and returns a single callback ref composed from two other Refs.\n *\n * ```tsx\n * const Button = React.forwardRef((props, ref) => {\n *   const [element, attachRef] = useCallbackRef<HTMLButtonElement>();\n *   const mergedRef = useMergedRefs(ref, attachRef);\n *\n *   return <button ref={mergedRef} {...props}/>\n * })\n * ```\n *\n * @param refA A Callback or mutable Ref\n * @param refB A Callback or mutable Ref\n * @category refs\n */\nfunction useMergedRefs(refA, refB) {\n  return useMemo(() => mergeRefs(refA, refB), [refA, refB]);\n}\nexport default useMergedRefs;","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };","export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;","export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}","import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}","import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}","import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}","import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases – research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update – it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update – it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };","import arrow from '@popperjs/core/lib/modifiers/arrow';\nimport computeStyles from '@popperjs/core/lib/modifiers/computeStyles';\nimport eventListeners from '@popperjs/core/lib/modifiers/eventListeners';\nimport flip from '@popperjs/core/lib/modifiers/flip';\nimport hide from '@popperjs/core/lib/modifiers/hide';\nimport offset from '@popperjs/core/lib/modifiers/offset';\nimport popperOffsets from '@popperjs/core/lib/modifiers/popperOffsets';\nimport preventOverflow from '@popperjs/core/lib/modifiers/preventOverflow';\nimport { placements } from '@popperjs/core/lib/enums';\nimport { popperGenerator } from '@popperjs/core/lib/popper-base'; // For the common JS build we will turn this file into a bundle with no imports.\n// This is b/c the Popper lib is all esm files, and would break in a common js only environment\n\nexport var createPopper = popperGenerator({\n  defaultModifiers: [hide, popperOffsets, computeStyles, eventListeners, offset, flip, preventOverflow, arrow]\n});\nexport { placements };","import { useRef, useEffect } from 'react';\n\n/**\n * Track whether a component is current mounted. Generally less preferable than\n * properlly canceling effects so they don't run after a component is unmounted,\n * but helpful in cases where that isn't feasible, such as a `Promise` resolution.\n *\n * @returns a function that returns the current isMounted state of the component\n *\n * ```ts\n * const [data, setData] = useState(null)\n * const isMounted = useMounted()\n *\n * useEffect(() => {\n *   fetchdata().then((newData) => {\n *      if (isMounted()) {\n *        setData(newData);\n *      }\n *   })\n * })\n * ```\n */\nexport default function useMounted() {\n  const mounted = useRef(true);\n  const isMounted = useRef(() => mounted.current);\n  useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, []);\n  return isMounted.current;\n}","import { useCallback } from 'react';\nimport useMounted from './useMounted';\n\n/**\n * `useSafeState` takes the return value of a `useState` hook and wraps the\n * setter to prevent updates onces the component has unmounted. Can used\n * with `useMergeState` and `useStateAsync` as well\n *\n * @param state The return value of a useStateHook\n *\n * ```ts\n * const [show, setShow] = useSafeState(useState(true));\n * ```\n */\n\nfunction useSafeState(state) {\n  const isMounted = useMounted();\n  return [state[0], useCallback(nextState => {\n    if (!isMounted()) return;\n    return state[1](nextState);\n  }, [isMounted, state[1]])];\n}\nexport default useSafeState;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport useSafeState from '@restart/hooks/useSafeState';\nimport { createPopper } from './popper';\n\nvar initialPopperStyles = function initialPopperStyles(position) {\n  return {\n    position: position,\n    top: '0',\n    left: '0',\n    opacity: '0',\n    pointerEvents: 'none'\n  };\n};\n\nvar disabledApplyStylesModifier = {\n  name: 'applyStyles',\n  enabled: false\n}; // In order to satisfy the current usage of options, including undefined\n\nvar ariaDescribedByModifier = {\n  name: 'ariaDescribedBy',\n  enabled: true,\n  phase: 'afterWrite',\n  effect: function effect(_ref) {\n    var state = _ref.state;\n    return function () {\n      var _state$elements = state.elements,\n          reference = _state$elements.reference,\n          popper = _state$elements.popper;\n\n      if ('removeAttribute' in reference) {\n        var ids = (reference.getAttribute('aria-describedby') || '').split(',').filter(function (id) {\n          return id.trim() !== popper.id;\n        });\n        if (!ids.length) reference.removeAttribute('aria-describedby');else reference.setAttribute('aria-describedby', ids.join(','));\n      }\n    };\n  },\n  fn: function fn(_ref2) {\n    var _popper$getAttribute;\n\n    var state = _ref2.state;\n    var _state$elements2 = state.elements,\n        popper = _state$elements2.popper,\n        reference = _state$elements2.reference;\n    var role = (_popper$getAttribute = popper.getAttribute('role')) == null ? void 0 : _popper$getAttribute.toLowerCase();\n\n    if (popper.id && role === 'tooltip' && 'setAttribute' in reference) {\n      var ids = reference.getAttribute('aria-describedby');\n\n      if (ids && ids.split(',').indexOf(popper.id) !== -1) {\n        return;\n      }\n\n      reference.setAttribute('aria-describedby', ids ? ids + \",\" + popper.id : popper.id);\n    }\n  }\n};\nvar EMPTY_MODIFIERS = [];\n/**\n * Position an element relative some reference element using Popper.js\n *\n * @param referenceElement\n * @param popperElement\n * @param {object}      options\n * @param {object=}     options.modifiers Popper.js modifiers\n * @param {boolean=}    options.enabled toggle the popper functionality on/off\n * @param {string=}     options.placement The popper element placement relative to the reference element\n * @param {string=}     options.strategy the positioning strategy\n * @param {boolean=}    options.eventsEnabled have Popper listen on window resize events to reposition the element\n * @param {function=}   options.onCreate called when the popper is created\n * @param {function=}   options.onUpdate called when the popper is updated\n *\n * @returns {UsePopperState} The popper state\n */\n\nfunction usePopper(referenceElement, popperElement, _temp) {\n  var _ref3 = _temp === void 0 ? {} : _temp,\n      _ref3$enabled = _ref3.enabled,\n      enabled = _ref3$enabled === void 0 ? true : _ref3$enabled,\n      _ref3$placement = _ref3.placement,\n      placement = _ref3$placement === void 0 ? 'bottom' : _ref3$placement,\n      _ref3$strategy = _ref3.strategy,\n      strategy = _ref3$strategy === void 0 ? 'absolute' : _ref3$strategy,\n      _ref3$modifiers = _ref3.modifiers,\n      modifiers = _ref3$modifiers === void 0 ? EMPTY_MODIFIERS : _ref3$modifiers,\n      config = _objectWithoutPropertiesLoose(_ref3, [\"enabled\", \"placement\", \"strategy\", \"modifiers\"]);\n\n  var popperInstanceRef = useRef();\n  var update = useCallback(function () {\n    var _popperInstanceRef$cu;\n\n    (_popperInstanceRef$cu = popperInstanceRef.current) == null ? void 0 : _popperInstanceRef$cu.update();\n  }, []);\n  var forceUpdate = useCallback(function () {\n    var _popperInstanceRef$cu2;\n\n    (_popperInstanceRef$cu2 = popperInstanceRef.current) == null ? void 0 : _popperInstanceRef$cu2.forceUpdate();\n  }, []);\n\n  var _useSafeState = useSafeState(useState({\n    placement: placement,\n    update: update,\n    forceUpdate: forceUpdate,\n    attributes: {},\n    styles: {\n      popper: initialPopperStyles(strategy),\n      arrow: {}\n    }\n  })),\n      popperState = _useSafeState[0],\n      setState = _useSafeState[1];\n\n  var updateModifier = useMemo(function () {\n    return {\n      name: 'updateStateModifier',\n      enabled: true,\n      phase: 'write',\n      requires: ['computeStyles'],\n      fn: function fn(_ref4) {\n        var state = _ref4.state;\n        var styles = {};\n        var attributes = {};\n        Object.keys(state.elements).forEach(function (element) {\n          styles[element] = state.styles[element];\n          attributes[element] = state.attributes[element];\n        });\n        setState({\n          state: state,\n          styles: styles,\n          attributes: attributes,\n          update: update,\n          forceUpdate: forceUpdate,\n          placement: state.placement\n        });\n      }\n    };\n  }, [update, forceUpdate, setState]);\n  useEffect(function () {\n    if (!popperInstanceRef.current || !enabled) return;\n    popperInstanceRef.current.setOptions({\n      placement: placement,\n      strategy: strategy,\n      modifiers: [].concat(modifiers, [updateModifier, disabledApplyStylesModifier])\n    }); // intentionally NOT re-running on new modifiers\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [strategy, placement, updateModifier, enabled]);\n  useEffect(function () {\n    if (!enabled || referenceElement == null || popperElement == null) {\n      return undefined;\n    }\n\n    popperInstanceRef.current = createPopper(referenceElement, popperElement, _extends({}, config, {\n      placement: placement,\n      strategy: strategy,\n      modifiers: [].concat(modifiers, [ariaDescribedByModifier, updateModifier])\n    }));\n    return function () {\n      if (popperInstanceRef.current != null) {\n        popperInstanceRef.current.destroy();\n        popperInstanceRef.current = undefined;\n        setState(function (s) {\n          return _extends({}, s, {\n            attributes: {},\n            styles: {\n              popper: initialPopperStyles(strategy)\n            }\n          });\n        });\n      }\n    }; // This is only run once to _create_ the popper\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [enabled, referenceElement, popperElement]);\n  return popperState;\n}\n\nexport default usePopper;","/* eslint-disable no-bitwise, no-cond-assign */\n\n/**\n * Checks if an element contains another given element.\n * \n * @param context the context element\n * @param node the element to check\n */\nexport default function contains(context, node) {\n  // HTML DOM and SVG DOM may have different support levels,\n  // so we need to check on context instead of a document root element.\n  if (context.contains) return context.contains(node);\n  if (context.compareDocumentPosition) return context === node || !!(context.compareDocumentPosition(node) & 16);\n}","export default !!(typeof window !== 'undefined' && window.document && window.document.createElement);","/* eslint-disable no-return-assign */\nimport canUseDOM from './canUseDOM';\nexport var optionsSupported = false;\nexport var onceSupported = false;\n\ntry {\n  var options = {\n    get passive() {\n      return optionsSupported = true;\n    },\n\n    get once() {\n      // eslint-disable-next-line no-multi-assign\n      return onceSupported = optionsSupported = true;\n    }\n\n  };\n\n  if (canUseDOM) {\n    window.addEventListener('test', options, options);\n    window.removeEventListener('test', options, true);\n  }\n} catch (e) {\n  /* */\n}\n\n/**\n * An `addEventListener` ponyfill, supports the `once` option\n * \n * @param node the element\n * @param eventName the event name\n * @param handle the handler\n * @param options event options\n */\nfunction addEventListener(node, eventName, handler, options) {\n  if (options && typeof options !== 'boolean' && !onceSupported) {\n    var once = options.once,\n        capture = options.capture;\n    var wrappedHandler = handler;\n\n    if (!onceSupported && once) {\n      wrappedHandler = handler.__once || function onceHandler(event) {\n        this.removeEventListener(eventName, onceHandler, capture);\n        handler.call(this, event);\n      };\n\n      handler.__once = wrappedHandler;\n    }\n\n    node.addEventListener(eventName, wrappedHandler, optionsSupported ? options : capture);\n  }\n\n  node.addEventListener(eventName, handler, options);\n}\n\nexport default addEventListener;","/**\n * A `removeEventListener` ponyfill\n * \n * @param node the element\n * @param eventName the event name\n * @param handle the handler\n * @param options event options\n */\nfunction removeEventListener(node, eventName, handler, options) {\n  var capture = options && typeof options !== 'boolean' ? options.capture : options;\n  node.removeEventListener(eventName, handler, capture);\n\n  if (handler.__once) {\n    node.removeEventListener(eventName, handler.__once, capture);\n  }\n}\n\nexport default removeEventListener;","import addEventListener from './addEventListener';\nimport removeEventListener from './removeEventListener';\n\nfunction listen(node, eventName, handler, options) {\n  addEventListener(node, eventName, handler, options);\n  return function () {\n    removeEventListener(node, eventName, handler, options);\n  };\n}\n\nexport default listen;","import { useEffect, useRef } from 'react';\n\n/**\n * Creates a `Ref` whose value is updated in an effect, ensuring the most recent\n * value is the one rendered with. Generally only required for Concurrent mode usage\n * where previous work in `render()` may be discarded before being used.\n *\n * This is safe to access in an event handler.\n *\n * @param value The `Ref` value\n */\nfunction useCommittedRef(value) {\n  const ref = useRef(value);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref;\n}\nexport default useCommittedRef;","import { useCallback } from 'react';\nimport useCommittedRef from './useCommittedRef';\nexport default function useEventCallback(fn) {\n  const ref = useCommittedRef(fn);\n  return useCallback(function (...args) {\n    return ref.current && ref.current(...args);\n  }, [ref]);\n}","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","/**\n * Returns the owner document of a given element.\n * \n * @param node the element\n */\nexport default function ownerDocument(node) {\n  return node && node.ownerDocument || document;\n}","import ReactDOM from 'react-dom';\nexport default function safeFindDOMNode(componentOrElement) {\n  if (componentOrElement && 'setState' in componentOrElement) {\n    return ReactDOM.findDOMNode(componentOrElement);\n  }\n\n  return componentOrElement != null ? componentOrElement : null;\n}","import ownerDocument from 'dom-helpers/ownerDocument';\nimport safeFindDOMNode from './safeFindDOMNode';\nexport default (function (componentOrElement) {\n  return ownerDocument(safeFindDOMNode(componentOrElement));\n});","import contains from 'dom-helpers/contains';\nimport listen from 'dom-helpers/listen';\nimport { useCallback, useEffect, useRef } from 'react';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport warning from 'warning';\nimport ownerDocument from './ownerDocument';\nvar escapeKeyCode = 27;\n\nvar noop = function noop() {};\n\nfunction isLeftClickEvent(event) {\n  return event.button === 0;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nvar getRefTarget = function getRefTarget(ref) {\n  return ref && ('current' in ref ? ref.current : ref);\n};\n\n/**\n * The `useRootClose` hook registers your callback on the document\n * when rendered. Powers the `<Overlay/>` component. This is used achieve modal\n * style behavior where your callback is triggered when the user tries to\n * interact with the rest of the document or hits the `esc` key.\n *\n * @param {Ref<HTMLElement>| HTMLElement} ref  The element boundary\n * @param {function} onRootClose\n * @param {object=}  options\n * @param {boolean=} options.disabled\n * @param {string=}  options.clickTrigger The DOM event name (click, mousedown, etc) to attach listeners on\n */\nfunction useRootClose(ref, onRootClose, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      disabled = _ref.disabled,\n      _ref$clickTrigger = _ref.clickTrigger,\n      clickTrigger = _ref$clickTrigger === void 0 ? 'click' : _ref$clickTrigger;\n\n  var preventMouseRootCloseRef = useRef(false);\n  var onClose = onRootClose || noop;\n  var handleMouseCapture = useCallback(function (e) {\n    var _e$composedPath$;\n\n    var currentTarget = getRefTarget(ref);\n    warning(!!currentTarget, 'RootClose captured a close event but does not have a ref to compare it to. ' + 'useRootClose(), should be passed a ref that resolves to a DOM node');\n    preventMouseRootCloseRef.current = !currentTarget || isModifiedEvent(e) || !isLeftClickEvent(e) || !!contains(currentTarget, (_e$composedPath$ = e.composedPath == null ? void 0 : e.composedPath()[0]) != null ? _e$composedPath$ : e.target);\n  }, [ref]);\n  var handleMouse = useEventCallback(function (e) {\n    if (!preventMouseRootCloseRef.current) {\n      onClose(e);\n    }\n  });\n  var handleKeyUp = useEventCallback(function (e) {\n    if (e.keyCode === escapeKeyCode) {\n      onClose(e);\n    }\n  });\n  useEffect(function () {\n    if (disabled || ref == null) return undefined; // Store the current event to avoid triggering handlers immediately\n    // https://github.com/facebook/react/issues/20074\n\n    var currentEvent = window.event;\n    var doc = ownerDocument(getRefTarget(ref)); // Use capture for this listener so it fires before React's listener, to\n    // avoid false positives in the contains() check below if the target DOM\n    // element is removed in the React mouse callback.\n\n    var removeMouseCaptureListener = listen(doc, clickTrigger, handleMouseCapture, true);\n    var removeMouseListener = listen(doc, clickTrigger, function (e) {\n      // skip if this event is the same as the one running when we added the handlers\n      if (e === currentEvent) {\n        currentEvent = undefined;\n        return;\n      }\n\n      handleMouse(e);\n    });\n    var removeKeyupListener = listen(doc, 'keyup', function (e) {\n      // skip if this event is the same as the one running when we added the handlers\n      if (e === currentEvent) {\n        currentEvent = undefined;\n        return;\n      }\n\n      handleKeyUp(e);\n    });\n    var mobileSafariHackListeners = [];\n\n    if ('ontouchstart' in doc.documentElement) {\n      mobileSafariHackListeners = [].slice.call(doc.body.children).map(function (el) {\n        return listen(el, 'mousemove', noop);\n      });\n    }\n\n    return function () {\n      removeMouseCaptureListener();\n      removeMouseListener();\n      removeKeyupListener();\n      mobileSafariHackListeners.forEach(function (remove) {\n        return remove();\n      });\n    };\n  }, [ref, disabled, clickTrigger, handleMouseCapture, handleMouse, handleKeyUp]);\n}\n\nexport default useRootClose;","import ownerDocument from 'dom-helpers/ownerDocument';\nimport { useState, useEffect } from 'react';\nexport var resolveContainerRef = function resolveContainerRef(ref) {\n  var _ref;\n\n  if (typeof document === 'undefined') return null;\n  if (ref == null) return ownerDocument().body;\n  if (typeof ref === 'function') ref = ref();\n  if (ref && 'current' in ref) ref = ref.current;\n  if ((_ref = ref) != null && _ref.nodeType) return ref || null;\n  return null;\n};\nexport default function useWaitForDOMRef(ref, onResolved) {\n  var _useState = useState(function () {\n    return resolveContainerRef(ref);\n  }),\n      resolvedRef = _useState[0],\n      setRef = _useState[1];\n\n  if (!resolvedRef) {\n    var earlyRef = resolveContainerRef(ref);\n    if (earlyRef) setRef(earlyRef);\n  }\n\n  useEffect(function () {\n    if (onResolved && resolvedRef) {\n      onResolved(resolvedRef);\n    }\n  }, [onResolved, resolvedRef]);\n  useEffect(function () {\n    var nextRef = resolveContainerRef(ref);\n\n    if (nextRef !== resolvedRef) {\n      setRef(nextRef);\n    }\n  }, [ref, resolvedRef]);\n  return resolvedRef;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport function toModifierMap(modifiers) {\n  var result = {};\n\n  if (!Array.isArray(modifiers)) {\n    return modifiers || result;\n  } // eslint-disable-next-line no-unused-expressions\n\n\n  modifiers == null ? void 0 : modifiers.forEach(function (m) {\n    result[m.name] = m;\n  });\n  return result;\n}\nexport function toModifierArray(map) {\n  if (map === void 0) {\n    map = {};\n  }\n\n  if (Array.isArray(map)) return map;\n  return Object.keys(map).map(function (k) {\n    map[k].name = k;\n    return map[k];\n  });\n}\nexport default function mergeOptionsWithPopperConfig(_ref) {\n  var _modifiers$preventOve, _modifiers$preventOve2, _modifiers$offset, _modifiers$arrow;\n\n  var enabled = _ref.enabled,\n      enableEvents = _ref.enableEvents,\n      placement = _ref.placement,\n      flip = _ref.flip,\n      offset = _ref.offset,\n      fixed = _ref.fixed,\n      containerPadding = _ref.containerPadding,\n      arrowElement = _ref.arrowElement,\n      _ref$popperConfig = _ref.popperConfig,\n      popperConfig = _ref$popperConfig === void 0 ? {} : _ref$popperConfig;\n  var modifiers = toModifierMap(popperConfig.modifiers);\n  return _extends({}, popperConfig, {\n    placement: placement,\n    enabled: enabled,\n    strategy: fixed ? 'fixed' : popperConfig.strategy,\n    modifiers: toModifierArray(_extends({}, modifiers, {\n      eventListeners: {\n        enabled: enableEvents\n      },\n      preventOverflow: _extends({}, modifiers.preventOverflow, {\n        options: containerPadding ? _extends({\n          padding: containerPadding\n        }, (_modifiers$preventOve = modifiers.preventOverflow) == null ? void 0 : _modifiers$preventOve.options) : (_modifiers$preventOve2 = modifiers.preventOverflow) == null ? void 0 : _modifiers$preventOve2.options\n      }),\n      offset: {\n        options: _extends({\n          offset: offset\n        }, (_modifiers$offset = modifiers.offset) == null ? void 0 : _modifiers$offset.options)\n      },\n      arrow: _extends({}, modifiers.arrow, {\n        enabled: !!arrowElement,\n        options: _extends({}, (_modifiers$arrow = modifiers.arrow) == null ? void 0 : _modifiers$arrow.options, {\n          element: arrowElement\n        })\n      }),\n      flip: _extends({\n        enabled: !!flip\n      }, modifiers.flip)\n    }))\n  });\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport useCallbackRef from '@restart/hooks/useCallbackRef';\nimport useMergedRefs from '@restart/hooks/useMergedRefs';\nimport { placements } from './popper';\nimport usePopper from './usePopper';\nimport useRootClose from './useRootClose';\nimport useWaitForDOMRef from './useWaitForDOMRef';\nimport mergeOptionsWithPopperConfig from './mergeOptionsWithPopperConfig';\n\n/**\n * Built on top of `Popper.js`, the overlay component is\n * great for custom tooltip overlays.\n */\nvar Overlay = /*#__PURE__*/React.forwardRef(function (props, outerRef) {\n  var flip = props.flip,\n      offset = props.offset,\n      placement = props.placement,\n      _props$containerPaddi = props.containerPadding,\n      containerPadding = _props$containerPaddi === void 0 ? 5 : _props$containerPaddi,\n      _props$popperConfig = props.popperConfig,\n      popperConfig = _props$popperConfig === void 0 ? {} : _props$popperConfig,\n      Transition = props.transition;\n\n  var _useCallbackRef = useCallbackRef(),\n      rootElement = _useCallbackRef[0],\n      attachRef = _useCallbackRef[1];\n\n  var _useCallbackRef2 = useCallbackRef(),\n      arrowElement = _useCallbackRef2[0],\n      attachArrowRef = _useCallbackRef2[1];\n\n  var mergedRef = useMergedRefs(attachRef, outerRef);\n  var container = useWaitForDOMRef(props.container);\n  var target = useWaitForDOMRef(props.target);\n\n  var _useState = useState(!props.show),\n      exited = _useState[0],\n      setExited = _useState[1];\n\n  var _usePopper = usePopper(target, rootElement, mergeOptionsWithPopperConfig({\n    placement: placement,\n    enableEvents: !!props.show,\n    containerPadding: containerPadding || 5,\n    flip: flip,\n    offset: offset,\n    arrowElement: arrowElement,\n    popperConfig: popperConfig\n  })),\n      styles = _usePopper.styles,\n      attributes = _usePopper.attributes,\n      popper = _objectWithoutPropertiesLoose(_usePopper, [\"styles\", \"attributes\"]);\n\n  if (props.show) {\n    if (exited) setExited(false);\n  } else if (!props.transition && !exited) {\n    setExited(true);\n  }\n\n  var handleHidden = function handleHidden() {\n    setExited(true);\n\n    if (props.onExited) {\n      props.onExited.apply(props, arguments);\n    }\n  }; // Don't un-render the overlay while it's transitioning out.\n\n\n  var mountOverlay = props.show || Transition && !exited;\n  useRootClose(rootElement, props.onHide, {\n    disabled: !props.rootClose || props.rootCloseDisabled,\n    clickTrigger: props.rootCloseEvent\n  });\n\n  if (!mountOverlay) {\n    // Don't bother showing anything if we don't have to.\n    return null;\n  }\n\n  var child = props.children(_extends({}, popper, {\n    show: !!props.show,\n    props: _extends({}, attributes.popper, {\n      style: styles.popper,\n      ref: mergedRef\n    }),\n    arrowProps: _extends({}, attributes.arrow, {\n      style: styles.arrow,\n      ref: attachArrowRef\n    })\n  }));\n\n  if (Transition) {\n    var onExit = props.onExit,\n        onExiting = props.onExiting,\n        onEnter = props.onEnter,\n        onEntering = props.onEntering,\n        onEntered = props.onEntered;\n    child = /*#__PURE__*/React.createElement(Transition, {\n      \"in\": props.show,\n      appear: true,\n      onExit: onExit,\n      onExiting: onExiting,\n      onExited: handleHidden,\n      onEnter: onEnter,\n      onEntering: onEntering,\n      onEntered: onEntered\n    }, child);\n  }\n\n  return container ? /*#__PURE__*/ReactDOM.createPortal(child, container) : null;\n});\nOverlay.displayName = 'Overlay';\nOverlay.propTypes = {\n  /**\n   * Set the visibility of the Overlay\n   */\n  show: PropTypes.bool,\n\n  /** Specify where the overlay element is positioned in relation to the target element */\n  placement: PropTypes.oneOf(placements),\n\n  /**\n   * A DOM Element, Ref to an element, or function that returns either. The `target` element is where\n   * the overlay is positioned relative to.\n   */\n  target: PropTypes.any,\n\n  /**\n   * A DOM Element, Ref to an element, or function that returns either. The `container` will have the Portal children\n   * appended to it.\n   */\n  container: PropTypes.any,\n\n  /**\n   * Enables the Popper.js `flip` modifier, allowing the Overlay to\n   * automatically adjust it's placement in case of overlap with the viewport or toggle.\n   * Refer to the [flip docs](https://popper.js.org/popper-documentation.html#modifiers..flip.enabled) for more info\n   */\n  flip: PropTypes.bool,\n\n  /**\n   * A render prop that returns an element to overlay and position. See\n   * the [react-popper documentation](https://github.com/FezVrasta/react-popper#children) for more info.\n   *\n   * @type {Function ({\n   *   show: boolean,\n   *   placement: Placement,\n   *   update: () => void,\n   *   forceUpdate: () => void,\n   *   props: {\n   *     ref: (?HTMLElement) => void,\n   *     style: { [string]: string | number },\n   *     aria-labelledby: ?string\n   *     [string]: string | number,\n   *   },\n   *   arrowProps: {\n   *     ref: (?HTMLElement) => void,\n   *     style: { [string]: string | number },\n   *     [string]: string | number,\n   *   },\n   * }) => React.Element}\n   */\n  children: PropTypes.func.isRequired,\n\n  /**\n   * Control how much space there is between the edge of the boundary element and overlay.\n   * A convenience shortcut to setting `popperConfig.modfiers.preventOverflow.padding`\n   */\n  containerPadding: PropTypes.number,\n\n  /**\n   * A set of popper options and props passed directly to react-popper's Popper component.\n   */\n  popperConfig: PropTypes.object,\n\n  /**\n   * Specify whether the overlay should trigger `onHide` when the user clicks outside the overlay\n   */\n  rootClose: PropTypes.bool,\n\n  /**\n   * Specify event for toggling overlay\n   */\n  rootCloseEvent: PropTypes.oneOf(['click', 'mousedown']),\n\n  /**\n   * Specify disabled for disable RootCloseWrapper\n   */\n  rootCloseDisabled: PropTypes.bool,\n\n  /**\n   * A Callback fired by the Overlay when it wishes to be hidden.\n   *\n   * __required__ when `rootClose` is `true`.\n   *\n   * @type func\n   */\n  onHide: function onHide(props) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (props.rootClose) {\n      var _PropTypes$func;\n\n      return (_PropTypes$func = PropTypes.func).isRequired.apply(_PropTypes$func, [props].concat(args));\n    }\n\n    return PropTypes.func.apply(PropTypes, [props].concat(args));\n  },\n\n  /**\n   * A `react-transition-group@2.0.0` `<Transition/>` component\n   * used to animate the overlay as it changes visibility.\n   */\n  // @ts-ignore\n  transition: PropTypes.elementType,\n\n  /**\n   * Callback fired before the Overlay transitions in\n   */\n  onEnter: PropTypes.func,\n\n  /**\n   * Callback fired as the Overlay begins to transition in\n   */\n  onEntering: PropTypes.func,\n\n  /**\n   * Callback fired after the Overlay finishes transitioning in\n   */\n  onEntered: PropTypes.func,\n\n  /**\n   * Callback fired right before the Overlay transitions out\n   */\n  onExit: PropTypes.func,\n\n  /**\n   * Callback fired as the Overlay begins to transition out\n   */\n  onExiting: PropTypes.func,\n\n  /**\n   * Callback fired after the Overlay finishes transitioning out\n   */\n  onExited: PropTypes.func\n};\nexport default Overlay;","import * as React from \"react\";\nconst SvgCheck = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z\" }));\nexport default SvgCheck;\n","import * as React from \"react\";\nconst SvgCheckBoxOutlineBlank = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Z\" }));\nexport default SvgCheckBoxOutlineBlank;\n","import classNames from 'classnames';\n\nimport CheckBoxOutlineBlankIcon from '@/material-icons/400-24px/check_box_outline_blank.svg?react';\nimport { isProduction } from 'mastodon/utils/environment';\n\ninterface SVGPropsWithTitle extends React.SVGProps<SVGSVGElement> {\n  title?: string;\n}\n\nexport type IconProp = React.FC<SVGPropsWithTitle>;\n\ninterface Props extends React.SVGProps<SVGSVGElement> {\n  children?: never;\n  id: string;\n  icon: IconProp;\n  title?: string;\n}\n\nexport const Icon: React.FC<Props> = ({\n  id,\n  icon: IconComponent,\n  className,\n  title: titleProp,\n  ...other\n}) => {\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  if (!IconComponent) {\n    if (!isProduction()) {\n      throw new Error(\n        `<Icon id=\"${id}\" className=\"${className}\"> is missing an \"icon\" prop.`,\n      );\n    }\n\n    IconComponent = CheckBoxOutlineBlankIcon;\n  }\n\n  const ariaHidden = titleProp ? undefined : true;\n  const role = !ariaHidden ? 'img' : undefined;\n\n  // Set the title to an empty string to remove the built-in SVG one if any\n  // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n  const title = titleProp || '';\n\n  return (\n    <IconComponent\n      className={classNames('icon', `icon-${id}`, className)}\n      title={title}\n      aria-hidden={ariaHidden}\n      role={role}\n      {...other}\n    />\n  );\n};\n","import { useCallback, useState } from 'react';\n\nexport const useHovering = (animate?: boolean) => {\n  const [hovering, setHovering] = useState<boolean>(animate ?? false);\n\n  const handleMouseEnter = useCallback(() => {\n    if (animate) return;\n    setHovering(true);\n  }, [animate]);\n\n  const handleMouseLeave = useCallback(() => {\n    if (animate) return;\n    setHovering(false);\n  }, [animate]);\n\n  return { hovering, handleMouseEnter, handleMouseLeave };\n};\n","import { useState, useCallback } from 'react';\n\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\n\nimport { useHovering } from 'mastodon/hooks/useHovering';\nimport { autoPlayGif } from 'mastodon/initial_state';\nimport type { Account } from 'mastodon/models/account';\n\ninterface Props {\n  account:\n    | Pick<Account, 'id' | 'acct' | 'avatar' | 'avatar_static'>\n    | undefined; // FIXME: remove `undefined` once we know for sure its always there\n  size?: number;\n  style?: React.CSSProperties;\n  inline?: boolean;\n  animate?: boolean;\n  withLink?: boolean;\n  counter?: number | string;\n  counterBorderColor?: string;\n  className?: string;\n}\n\nexport const Avatar: React.FC<Props> = ({\n  account,\n  animate = autoPlayGif,\n  size = 20,\n  inline = false,\n  withLink = false,\n  style: styleFromParent,\n  className,\n  counter,\n  counterBorderColor,\n}) => {\n  const { hovering, handleMouseEnter, handleMouseLeave } = useHovering(animate);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n\n  const style = {\n    ...styleFromParent,\n    width: `${size}px`,\n    height: `${size}px`,\n  };\n\n  const src = hovering || animate ? account?.avatar : account?.avatar_static;\n\n  const handleLoad = useCallback(() => {\n    setLoading(false);\n  }, [setLoading]);\n\n  const handleError = useCallback(() => {\n    setError(true);\n  }, [setError]);\n\n  const avatar = (\n    <div\n      className={classNames(className, 'account__avatar', {\n        'account__avatar--inline': inline,\n        'account__avatar--loading': loading,\n      })}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      style={style}\n    >\n      {src && !error && (\n        <img src={src} alt='' onLoad={handleLoad} onError={handleError} />\n      )}\n\n      {counter && (\n        <div\n          className='account__avatar__counter'\n          style={{ borderColor: counterBorderColor }}\n        >\n          {counter}\n        </div>\n      )}\n    </div>\n  );\n\n  if (withLink) {\n    return (\n      <Link\n        to={`/@${account?.acct}`}\n        title={`@${account?.acct}`}\n        data-hover-card-account={account?.id}\n      >\n        {avatar}\n      </Link>\n    );\n  }\n\n  return avatar;\n};\n","import PropTypes from 'prop-types';\nimport { createContext, useContext } from 'react';\n\nimport hoistStatics from 'hoist-non-react-statics';\n\nimport type { InitialState } from 'mastodon/initial_state';\n\nexport interface IdentityContextType {\n  signedIn: boolean;\n  accountId: string | undefined;\n  disabledAccountId: string | undefined;\n  permissions: number;\n}\n\nexport const identityContextPropShape = PropTypes.shape({\n  signedIn: PropTypes.bool.isRequired,\n  accountId: PropTypes.string,\n  disabledAccountId: PropTypes.string,\n}).isRequired;\n\nexport const createIdentityContext = (state: InitialState) => ({\n  signedIn: !!state.meta.me,\n  accountId: state.meta.me,\n  disabledAccountId: state.meta.disabled_account_id,\n  permissions: state.role?.permissions ?? 0,\n});\n\nexport const IdentityContext = createContext<IdentityContextType>({\n  signedIn: false,\n  permissions: 0,\n  accountId: undefined,\n  disabledAccountId: undefined,\n});\n\nexport const useIdentity = () => useContext(IdentityContext);\n\nexport interface IdentityProps {\n  ref?: unknown;\n  wrappedComponentRef?: unknown;\n}\n\n/* Injects an `identity` props into the wrapped component to be able to use the new context in class components */\nexport function withIdentity<\n  ComponentType extends React.ComponentType<IdentityProps>,\n>(Component: ComponentType) {\n  const displayName = `withIdentity(${Component.displayName ?? Component.name})`;\n  const C = (props: React.ComponentProps<ComponentType>) => {\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    return (\n      <IdentityContext.Consumer>\n        {(context) => {\n          return (\n            // @ts-expect-error - Dynamic covariant generic components are tough to type.\n            <Component\n              {...remainingProps}\n              identity={context}\n              ref={wrappedComponentRef}\n            />\n          );\n        }}\n      </IdentityContext.Consumer>\n    );\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  return hoistStatics(C, Component);\n}\n","interface Props {\n  size: number;\n  strokeWidth: number;\n}\n\nexport const CircularProgress: React.FC<Props> = ({ size, strokeWidth }) => {\n  const viewBox = `0 0 ${size} ${size}`;\n  const radius = (size - strokeWidth) / 2;\n\n  return (\n    <svg\n      width={size}\n      height={size}\n      viewBox={viewBox}\n      className='circular-progress'\n      role='progressbar'\n    >\n      <circle\n        fill='none'\n        cx={size / 2}\n        cy={size / 2}\n        r={radius}\n        strokeWidth={`${strokeWidth}px`}\n      />\n    </svg>\n  );\n};\n","import * as React from \"react\";\nconst SvgDownload = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z\" }));\nexport default SvgDownload;\n","import * as React from \"react\";\nconst SvgForward5Fill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M480-80q-75 0-140.5-28.5t-114-77q-48.5-48.5-77-114T120-440q0-75 28.5-140.5t77-114q48.5-48.5 114-77T480-800h6l-62-62 56-58 160 160-160 160-56-58 62-62h-6q-117 0-198.5 81.5T200-440q0 117 81.5 198.5T480-160q117 0 198.5-81.5T760-440h80q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-80ZM380-320v-60h120v-40H380v-140h180v60H440v40h80q17 0 28.5 11.5T560-420v60q0 17-11.5 28.5T520-320H380Z\" }));\nexport default SvgForward5Fill;\n","import * as React from \"react\";\nconst SvgPauseFill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M560-200v-560h160v560H560Zm-320 0v-560h160v560H240Z\" }));\nexport default SvgPauseFill;\n","import * as React from \"react\";\nconst SvgPlayArrowFill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M320-200v-560l440 280-440 280Z\" }));\nexport default SvgPlayArrowFill;\n","import * as React from \"react\";\nconst SvgReplay5Fill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M480-80q-75 0-140.5-28.5t-114-77q-48.5-48.5-77-114T120-440h80q0 117 81.5 198.5T480-160q117 0 198.5-81.5T760-440q0-117-81.5-198.5T480-720h-6l62 62-56 58-160-160 160-160 56 58-62 62h6q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-440q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-80ZM380-320v-60h120v-40H380v-140h180v60H440v40h80q17 0 28.5 11.5T560-420v60q0 17-11.5 28.5T520-320H380Z\" }));\nexport default SvgReplay5Fill;\n","import * as React from \"react\";\nconst SvgVolumeOffFill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M792-56 671-177q-25 16-53 27.5T560-131v-82q14-5 27.5-10t25.5-12L480-368v208L280-360H120v-240h128L56-792l56-56 736 736-56 56Zm-8-232-58-58q17-31 25.5-65t8.5-70q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 53-14.5 102T784-288ZM650-422l-90-90v-130q47 22 73.5 66t26.5 96q0 15-2.5 29.5T650-422ZM480-592 376-696l104-104v208Z\" }));\nexport default SvgVolumeOffFill;\n","import * as React from \"react\";\nconst SvgVolumeUpFill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320Z\" }));\nexport default SvgVolumeUpFill;\n","var q=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"#\",\"$\",\"%\",\"*\",\"+\",\",\",\"-\",\".\",\":\",\";\",\"=\",\"?\",\"@\",\"[\",\"]\",\"^\",\"_\",\"{\",\"|\",\"}\",\"~\"],x=t=>{let e=0;for(let r=0;r<t.length;r++){let n=t[r],l=q.indexOf(n);e=e*83+l}return e},p=(t,e)=>{var r=\"\";for(let n=1;n<=e;n++){let l=Math.floor(t)/Math.pow(83,e-n)%83;r+=q[Math.floor(l)]}return r};var f=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},h=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},F=t=>t<0?-1:1,M=(t,e)=>F(t)*Math.pow(Math.abs(t),e);var d=class extends Error{constructor(e){super(e),this.name=\"ValidationError\",this.message=e}};var C=t=>{if(!t||t.length<6)throw new d(\"The blurhash string must be at least 6 characters\");let e=x(t[0]),r=Math.floor(e/9)+1,n=e%9+1;if(t.length!==4+2*n*r)throw new d(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*n*r}`)},N=t=>{try{C(t)}catch(e){return{result:!1,errorReason:e.message}}return{result:!0}},z=t=>{let e=t>>16,r=t>>8&255,n=t&255;return[f(e),f(r),f(n)]},L=(t,e)=>{let r=Math.floor(t/361),n=Math.floor(t/19)%19,l=t%19;return[M((r-9)/9,2)*e,M((n-9)/9,2)*e,M((l-9)/9,2)*e]},U=(t,e,r,n)=>{C(t),n=n|1;let l=x(t[0]),m=Math.floor(l/9)+1,b=l%9+1,i=(x(t[1])+1)/166,u=new Array(b*m);for(let o=0;o<u.length;o++)if(o===0){let a=x(t.substring(2,6));u[o]=z(a)}else{let a=x(t.substring(4+o*2,6+o*2));u[o]=L(a,i*n)}let c=e*4,s=new Uint8ClampedArray(c*r);for(let o=0;o<r;o++)for(let a=0;a<e;a++){let y=0,B=0,R=0;for(let w=0;w<m;w++)for(let P=0;P<b;P++){let G=Math.cos(Math.PI*a*P/e)*Math.cos(Math.PI*o*w/r),T=u[P+w*b];y+=T[0]*G,B+=T[1]*G,R+=T[2]*G}let V=h(y),I=h(B),E=h(R);s[4*a+0+o*c]=V,s[4*a+1+o*c]=I,s[4*a+2+o*c]=E,s[4*a+3+o*c]=255}return s},j=U;var A=4,D=(t,e,r,n)=>{let l=0,m=0,b=0,g=e*A;for(let u=0;u<e;u++){let c=A*u;for(let s=0;s<r;s++){let o=c+s*g,a=n(u,s);l+=a*f(t[o]),m+=a*f(t[o+1]),b+=a*f(t[o+2])}}let i=1/(e*r);return[l*i,m*i,b*i]},$=t=>{let e=h(t[0]),r=h(t[1]),n=h(t[2]);return(e<<16)+(r<<8)+n},H=(t,e)=>{let r=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[0]/e,.5)*9+9.5)))),n=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[1]/e,.5)*9+9.5)))),l=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[2]/e,.5)*9+9.5))));return r*19*19+n*19+l},O=(t,e,r,n,l)=>{if(n<1||n>9||l<1||l>9)throw new d(\"BlurHash must have between 1 and 9 components\");if(e*r*4!==t.length)throw new d(\"Width and height must match the pixels array\");let m=[];for(let s=0;s<l;s++)for(let o=0;o<n;o++){let a=o==0&&s==0?1:2,y=D(t,e,r,(B,R)=>a*Math.cos(Math.PI*o*B/e)*Math.cos(Math.PI*s*R/r));m.push(y)}let b=m[0],g=m.slice(1),i=\"\",u=n-1+(l-1)*9;i+=p(u,1);let c;if(g.length>0){let s=Math.max(...g.map(a=>Math.max(...a))),o=Math.floor(Math.max(0,Math.min(82,Math.floor(s*166-.5))));c=(o+1)/166,i+=p(o,1)}else c=1,i+=p(0,1);return i+=p($(b),4),g.forEach(s=>{i+=p(H(s,c),2)}),i},S=O;export{d as ValidationError,j as decode,S as encode,N as isBlurhashValid};\n//# sourceMappingURL=index.js.map","import { memo, useRef, useEffect } from 'react';\n\nimport { decode } from 'blurhash';\n\ninterface Props extends React.HTMLAttributes<HTMLCanvasElement> {\n  hash: string;\n  width?: number;\n  height?: number;\n  dummy?: boolean; // Whether dummy mode is enabled. If enabled, nothing is rendered and canvas left untouched\n  children?: never;\n}\nconst Blurhash: React.FC<Props> = ({\n  hash,\n  width = 32,\n  height = width,\n  dummy = false,\n  ...canvasProps\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const canvas = canvasRef.current!;\n\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width; // resets canvas\n\n    if (dummy || !hash) return;\n\n    try {\n      const pixels = decode(hash, width, height);\n      const ctx = canvas.getContext('2d');\n      const imageData = new ImageData(pixels, width, height);\n\n      ctx?.putImageData(imageData, 0, 0);\n    } catch (err) {\n      console.error('Blurhash decoding failure', { err, hash });\n    }\n  }, [dummy, hash, width, height]);\n\n  return (\n    <canvas {...canvasProps} ref={canvasRef} width={width} height={height} />\n  );\n};\n\nconst MemoizedBlurhash = memo(Blurhash);\n\nexport { MemoizedBlurhash as Blurhash };\n","import { FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\ninterface Props {\n  hidden?: boolean;\n  sensitive: boolean;\n  uncached?: boolean;\n  matchedFilters?: string[];\n  onClick: React.MouseEventHandler<HTMLButtonElement>;\n}\n\nexport const SpoilerButton: React.FC<Props> = ({\n  hidden = false,\n  sensitive,\n  uncached = false,\n  matchedFilters,\n  onClick,\n}) => {\n  let warning;\n  let action;\n\n  if (uncached) {\n    warning = (\n      <FormattedMessage\n        id='status.uncached_media_warning'\n        defaultMessage='Preview not available'\n      />\n    );\n    action = (\n      <FormattedMessage id='status.media.open' defaultMessage='Click to open' />\n    );\n  } else if (matchedFilters) {\n    warning = (\n      <FormattedMessage\n        id='filter_warning.matches_filter'\n        defaultMessage='Matches filter “<span>{title}</span>”'\n        values={{\n          title: matchedFilters.join(', '),\n          span: (chunks) => <span className='filter-name'>{chunks}</span>,\n        }}\n      />\n    );\n    action = (\n      <FormattedMessage id='status.media.show' defaultMessage='Click to show' />\n    );\n  } else if (sensitive) {\n    warning = (\n      <FormattedMessage\n        id='status.sensitive_warning'\n        defaultMessage='Sensitive content'\n      />\n    );\n    action = (\n      <FormattedMessage id='status.media.show' defaultMessage='Click to show' />\n    );\n  } else {\n    warning = (\n      <FormattedMessage\n        id='status.media_hidden'\n        defaultMessage='Media hidden'\n      />\n    );\n    action = (\n      <FormattedMessage id='status.media.show' defaultMessage='Click to show' />\n    );\n  }\n\n  return (\n    <div\n      className={classNames('spoiler-button', {\n        'spoiler-button--hidden': hidden,\n        'spoiler-button--click-thru': uncached,\n      })}\n    >\n      <button\n        type='button'\n        className='spoiler-button__overlay'\n        onClick={onClick}\n        disabled={uncached}\n      >\n        <span className='spoiler-button__overlay__label'>\n          {warning}\n          <span className='spoiler-button__overlay__action'>{action}</span>\n        </span>\n      </button>\n    </div>\n  );\n};\n","import * as React from \"react\";\nconst SvgFullscreen = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z\" }));\nexport default SvgFullscreen;\n","import * as React from \"react\";\nconst SvgFullscreenExit = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M240-120v-120H120v-80h200v200h-80Zm400 0v-200h200v80H720v120h-80ZM120-640v-80h120v-120h80v200H120Zm520 0v-200h80v120h120v80H640Z\" }));\nexport default SvgFullscreenExit;\n","import * as React from \"react\";\nconst SvgRectangle = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M80-160v-640h800v640H80Zm80-80h640v-480H160v480Zm0 0v-480 480Z\" }));\nexport default SvgRectangle;\n","import * as React from \"react\";\nconst SvgVolumeDownFill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M200-360v-240h160l200-200v640L360-360H200Zm440 40v-322q45 21 72.5 65t27.5 97q0 53-27.5 96T640-320Z\" }));\nexport default SvgVolumeDownFill;\n","// APIs for normalizing fullscreen operations. Note that Edge uses\n// the WebKit-prefixed APIs currently (as of Edge 16).\n\ninterface DocumentWithFullscreen extends Document {\n  mozFullScreenElement?: Element;\n  webkitFullscreenElement?: Element;\n  mozCancelFullScreen?: () => void;\n  webkitExitFullscreen?: () => void;\n}\n\ninterface HTMLElementWithFullscreen extends HTMLElement {\n  mozRequestFullScreen?: () => void;\n  webkitRequestFullscreen?: () => void;\n}\n\nexport const isFullscreen = () => {\n  const d = document as DocumentWithFullscreen;\n\n  return !!(\n    d.fullscreenElement ??\n    d.webkitFullscreenElement ??\n    d.mozFullScreenElement\n  );\n};\n\nexport const exitFullscreen = () => {\n  const d = document as DocumentWithFullscreen;\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  if (d.exitFullscreen) {\n    void d.exitFullscreen();\n  } else if (d.webkitExitFullscreen) {\n    d.webkitExitFullscreen();\n  } else if (d.mozCancelFullScreen) {\n    d.mozCancelFullScreen();\n  }\n};\n\nexport const requestFullscreen = (el: HTMLElementWithFullscreen | null) => {\n  if (!el) {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  if (el.requestFullscreen) {\n    void el.requestFullscreen();\n  } else if (el.webkitRequestFullscreen) {\n    el.webkitRequestFullscreen();\n  } else if (el.mozRequestFullScreen) {\n    el.mozRequestFullScreen();\n  }\n};\n\nexport const attachFullscreenListener = (listener: () => void) => {\n  const d = document as DocumentWithFullscreen;\n\n  if ('onfullscreenchange' in d) {\n    d.addEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in d) {\n    // @ts-expect-error This is valid on some browsers\n    d.addEventListener('webkitfullscreenchange', listener); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  } else if ('onmozfullscreenchange' in d) {\n    // @ts-expect-error This is valid on some browsers\n    d.addEventListener('mozfullscreenchange', listener); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  }\n};\n\nexport const detachFullscreenListener = (listener: () => void) => {\n  const d = document as DocumentWithFullscreen;\n\n  if ('onfullscreenchange' in d) {\n    d.removeEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in d) {\n    // @ts-expect-error This is valid on some browsers\n    d.removeEventListener('webkitfullscreenchange', listener); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  } else if ('onmozfullscreenchange' in d) {\n    // @ts-expect-error This is valid on some browsers\n    d.removeEventListener('mozfullscreenchange', listener); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  }\n};\n","import { useIntl } from 'react-intl';\nimport type { MessageDescriptor } from 'react-intl';\n\nimport { useTransition, animated } from '@react-spring/web';\n\nimport { Icon } from 'mastodon/components/icon';\nimport type { IconProp } from 'mastodon/components/icon';\n\nexport interface HotkeyEvent {\n  key: number;\n  icon: IconProp;\n  label: MessageDescriptor;\n}\n\nexport const HotkeyIndicator: React.FC<{\n  events: HotkeyEvent[];\n  onDismiss: (e: HotkeyEvent) => void;\n}> = ({ events, onDismiss }) => {\n  const intl = useIntl();\n\n  const transitions = useTransition(events, {\n    from: { opacity: 0 },\n    keys: (item) => item.key,\n    enter: [{ opacity: 1 }],\n    leave: [{ opacity: 0 }],\n    onRest: (_result, _ctrl, item) => {\n      onDismiss(item);\n    },\n  });\n\n  return (\n    <>\n      {transitions((style, item) => (\n        <animated.div className='video-player__hotkey-indicator' style={style}>\n          <Icon id='' icon={item.icon} />\n          <span className='video-player__hotkey-indicator__label'>\n            {intl.formatMessage(item.label)}\n          </span>\n        </animated.div>\n      ))}\n    </>\n  );\n};\n","import { useEffect, useCallback, useRef, useState } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { useSpring, animated, config } from '@react-spring/web';\nimport { throttle } from 'lodash';\n\nimport Forward5Icon from '@/material-icons/400-24px/forward_5-fill.svg?react';\nimport FullscreenIcon from '@/material-icons/400-24px/fullscreen.svg?react';\nimport FullscreenExitIcon from '@/material-icons/400-24px/fullscreen_exit.svg?react';\nimport PauseIcon from '@/material-icons/400-24px/pause-fill.svg?react';\nimport PlayArrowIcon from '@/material-icons/400-24px/play_arrow-fill.svg?react';\nimport RectangleIcon from '@/material-icons/400-24px/rectangle.svg?react';\nimport Replay5Icon from '@/material-icons/400-24px/replay_5-fill.svg?react';\nimport VolumeDownIcon from '@/material-icons/400-24px/volume_down-fill.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off-fill.svg?react';\nimport VolumeUpIcon from '@/material-icons/400-24px/volume_up-fill.svg?react';\nimport { Blurhash } from 'mastodon/components/blurhash';\nimport { Icon } from 'mastodon/components/icon';\nimport { SpoilerButton } from 'mastodon/components/spoiler_button';\nimport {\n  isFullscreen,\n  requestFullscreen,\n  exitFullscreen,\n  attachFullscreenListener,\n  detachFullscreenListener,\n} from 'mastodon/features/ui/util/fullscreen';\nimport { displayMedia, useBlurhash } from 'mastodon/initial_state';\nimport { playerSettings } from 'mastodon/settings';\n\nimport { HotkeyIndicator } from './components/hotkey_indicator';\nimport type { HotkeyEvent } from './components/hotkey_indicator';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute' },\n  hide: { id: 'video.hide', defaultMessage: 'Hide video' },\n  expand: { id: 'video.expand', defaultMessage: 'Expand video' },\n  close: { id: 'video.close', defaultMessage: 'Close video' },\n  fullscreen: { id: 'video.fullscreen', defaultMessage: 'Full screen' },\n  exit_fullscreen: {\n    id: 'video.exit_fullscreen',\n    defaultMessage: 'Exit full screen',\n  },\n  volumeUp: { id: 'video.volume_up', defaultMessage: 'Volume up' },\n  volumeDown: { id: 'video.volume_down', defaultMessage: 'Volume down' },\n  skipForward: { id: 'video.skip_forward', defaultMessage: 'Skip forward' },\n  skipBackward: { id: 'video.skip_backward', defaultMessage: 'Skip backward' },\n});\n\nconst DOUBLE_CLICK_THRESHOLD = 250;\nconst HOVER_FADE_DELAY = 4000;\n\nexport const formatTime = (secondsNum: number) => {\n  const hours = Math.floor(secondsNum / 3600);\n  const minutes = Math.floor((secondsNum - hours * 3600) / 60);\n  const seconds = secondsNum - hours * 3600 - minutes * 60;\n\n  const formattedHours = `${hours < 10 ? '0' : ''}${hours}`;\n  const formattedMinutes = `${minutes < 10 ? '0' : ''}${minutes}`;\n  const formattedSeconds = `${seconds < 10 ? '0' : ''}${seconds}`;\n\n  return (\n    (formattedHours === '00' ? '' : `${formattedHours}:`) +\n    `${formattedMinutes}:${formattedSeconds}`\n  );\n};\n\nexport const findElementPosition = (el: HTMLElement) => {\n  const box = el.getBoundingClientRect();\n  const docEl = document.documentElement;\n  const body = document.body;\n\n  const clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  const scrollLeft = window.scrollX || body.scrollLeft;\n  const left = box.left + scrollLeft - clientLeft;\n\n  const clientTop = docEl.clientTop || body.clientTop || 0;\n  const scrollTop = window.scrollY || body.scrollTop;\n  const top = box.top + scrollTop - clientTop;\n\n  return {\n    left: Math.round(left),\n    top: Math.round(top),\n  };\n};\n\nexport const getPointerPosition = (\n  el: HTMLElement | null,\n  event: MouseEvent,\n) => {\n  if (!el) {\n    return {\n      y: 0,\n      x: 0,\n    };\n  }\n\n  const box = findElementPosition(el);\n  const boxW = el.offsetWidth;\n  const boxH = el.offsetHeight;\n  const boxY = box.top;\n  const boxX = box.left;\n\n  const { pageY, pageX } = event;\n\n  return {\n    y: Math.max(0, Math.min(1, (pageY - boxY) / boxH)),\n    x: Math.max(0, Math.min(1, (pageX - boxX) / boxW)),\n  };\n};\n\nexport const fileNameFromURL = (str: string) => {\n  const url = new URL(str);\n  const pathname = url.pathname;\n  const index = pathname.lastIndexOf('/');\n\n  return pathname.slice(index + 1);\n};\n\nconst frameRateAsNumber = (frameRate: string): number => {\n  if (frameRate.includes('/')) {\n    return frameRate\n      .split('/')\n      .map((c) => parseInt(c))\n      .reduce((p, c) => p / c);\n  }\n\n  return parseInt(frameRate);\n};\n\nconst persistVolume = (volume: number, muted: boolean) => {\n  playerSettings.set('volume', volume);\n  playerSettings.set('muted', muted);\n};\n\nconst restoreVolume = (video: HTMLVideoElement) => {\n  const volume = (playerSettings.get('volume') as number | undefined) ?? 0.5;\n  const muted = (playerSettings.get('muted') as boolean | undefined) ?? false;\n\n  video.volume = volume;\n  video.muted = muted;\n};\n\nlet hotkeyEventId = 0;\n\nconst registerHotkeyEvent = (\n  setHotkeyEvents: React.Dispatch<React.SetStateAction<HotkeyEvent[]>>,\n  event: Omit<HotkeyEvent, 'key'>,\n) => {\n  setHotkeyEvents(() => [{ key: hotkeyEventId++, ...event }]);\n};\n\nexport const Video: React.FC<{\n  preview?: string;\n  frameRate?: string;\n  aspectRatio?: string;\n  src: string;\n  alt?: string;\n  lang?: string;\n  sensitive?: boolean;\n  onOpenVideo?: (options: {\n    startTime: number;\n    autoPlay: boolean;\n    defaultVolume: number;\n  }) => void;\n  onCloseVideo?: () => void;\n  detailed?: boolean;\n  editable?: boolean;\n  alwaysVisible?: boolean;\n  visible?: boolean;\n  onToggleVisibility?: () => void;\n  deployPictureInPicture?: (\n    type: string,\n    mediaProps: {\n      src: string;\n      muted: boolean;\n      volume: number;\n      currentTime: number;\n    },\n  ) => void;\n  blurhash?: string;\n  startPlaying?: boolean;\n  startTime?: number;\n  startVolume?: number;\n  startMuted?: boolean;\n  matchedFilters?: string[];\n}> = ({\n  preview,\n  frameRate = '25',\n  aspectRatio,\n  src,\n  alt = '',\n  lang,\n  sensitive,\n  onOpenVideo,\n  onCloseVideo,\n  detailed,\n  editable,\n  alwaysVisible,\n  visible,\n  onToggleVisibility,\n  deployPictureInPicture,\n  blurhash,\n  startPlaying,\n  startTime,\n  startVolume,\n  startMuted,\n  matchedFilters,\n}) => {\n  const intl = useIntl();\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [volume, setVolume] = useState(0.5);\n  const [paused, setPaused] = useState(true);\n  const [dragging, setDragging] = useState(false);\n  const [fullscreen, setFullscreen] = useState(false);\n  const [hovered, setHovered] = useState(false);\n  const [muted, setMuted] = useState(false);\n  const [revealed, setRevealed] = useState(false);\n  const [hotkeyEvents, setHotkeyEvents] = useState<HotkeyEvent[]>([]);\n\n  const playerRef = useRef<HTMLDivElement>(null);\n  const videoRef = useRef<HTMLVideoElement | null>(null);\n  const seekRef = useRef<HTMLDivElement>(null);\n  const volumeRef = useRef<HTMLDivElement>(null);\n  const doubleClickTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>();\n  const hoverTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>();\n\n  const [style, api] = useSpring(() => ({\n    progress: '0%',\n    buffer: '0%',\n    volume: '0%',\n  }));\n\n  const handleVideoRef = useCallback(\n    (c: HTMLVideoElement | null) => {\n      if (videoRef.current && !videoRef.current.paused && c === null) {\n        deployPictureInPicture?.('video', {\n          src: src,\n          currentTime: videoRef.current.currentTime,\n          muted: videoRef.current.muted,\n          volume: videoRef.current.volume,\n        });\n      }\n\n      videoRef.current = c;\n\n      if (videoRef.current) {\n        restoreVolume(videoRef.current);\n        setVolume(videoRef.current.volume);\n        setMuted(videoRef.current.muted);\n        void api.start({\n          volume: `${videoRef.current.volume * 100}%`,\n        });\n      }\n    },\n    [api, setVolume, setMuted, src, deployPictureInPicture],\n  );\n\n  const togglePlay = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    if (videoRef.current.paused) {\n      void videoRef.current.play();\n    } else {\n      videoRef.current.pause();\n    }\n  }, []);\n\n  const toggleFullscreen = useCallback(() => {\n    if (isFullscreen()) {\n      exitFullscreen();\n    } else {\n      requestFullscreen(playerRef.current);\n    }\n  }, []);\n\n  const toggleMute = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    const effectivelyMuted =\n      videoRef.current.muted || videoRef.current.volume === 0;\n\n    if (effectivelyMuted) {\n      videoRef.current.muted = false;\n\n      if (videoRef.current.volume === 0) {\n        videoRef.current.volume = 0.05;\n      }\n    } else {\n      videoRef.current.muted = true;\n    }\n  }, []);\n\n  const handleClickRoot = useCallback((e: React.MouseEvent) => {\n    // Stop clicks within the video player e.g. closing parent modal\n    e.stopPropagation();\n  }, []);\n\n  const handleClick = useCallback(() => {\n    if (!doubleClickTimeoutRef.current) {\n      doubleClickTimeoutRef.current = setTimeout(() => {\n        registerHotkeyEvent(setHotkeyEvents, {\n          icon: videoRef.current?.paused ? PlayArrowIcon : PauseIcon,\n          label: videoRef.current?.paused ? messages.play : messages.pause,\n        });\n        togglePlay();\n        doubleClickTimeoutRef.current = null;\n      }, DOUBLE_CLICK_THRESHOLD);\n    } else {\n      clearTimeout(doubleClickTimeoutRef.current);\n      doubleClickTimeoutRef.current = null;\n      registerHotkeyEvent(setHotkeyEvents, {\n        icon: isFullscreen() ? FullscreenExitIcon : FullscreenIcon,\n        label: isFullscreen() ? messages.exit_fullscreen : messages.fullscreen,\n      });\n      toggleFullscreen();\n    }\n  }, [setHotkeyEvents, togglePlay, toggleFullscreen]);\n\n  const handlePlay = useCallback(() => {\n    setPaused(false);\n  }, [setPaused]);\n\n  const handlePause = useCallback(() => {\n    setPaused(true);\n  }, [setPaused]);\n\n  useEffect(() => {\n    let nextFrame: ReturnType<typeof requestAnimationFrame>;\n\n    const updateProgress = () => {\n      nextFrame = requestAnimationFrame(() => {\n        if (videoRef.current) {\n          const progress =\n            videoRef.current.currentTime / videoRef.current.duration;\n          void api.start({\n            progress: isNaN(progress) ? '0%' : `${progress * 100}%`,\n            config: config.stiff,\n          });\n        }\n\n        updateProgress();\n      });\n    };\n\n    updateProgress();\n\n    return () => {\n      cancelAnimationFrame(nextFrame);\n    };\n  }, [api]);\n\n  useEffect(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    videoRef.current.volume = volume;\n    videoRef.current.muted = muted;\n  }, [volume, muted]);\n\n  useEffect(() => {\n    if (typeof visible !== 'undefined') {\n      setRevealed(visible);\n    } else {\n      setRevealed(\n        displayMedia === 'show_all' ||\n          (displayMedia !== 'hide_all' && !sensitive),\n      );\n    }\n  }, [visible, sensitive]);\n\n  useEffect(() => {\n    if (!revealed && videoRef.current) {\n      videoRef.current.pause();\n    }\n  }, [revealed]);\n\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setFullscreen(isFullscreen());\n    };\n\n    const handleScroll = throttle(\n      () => {\n        if (!videoRef.current) {\n          return;\n        }\n\n        const { top, height } = videoRef.current.getBoundingClientRect();\n        const inView =\n          top <=\n            (window.innerHeight || document.documentElement.clientHeight) &&\n          top + height >= 0;\n\n        if (!videoRef.current.paused && !inView) {\n          videoRef.current.pause();\n\n          deployPictureInPicture?.('video', {\n            src: src,\n            currentTime: videoRef.current.currentTime,\n            muted: videoRef.current.muted,\n            volume: videoRef.current.volume,\n          });\n        }\n      },\n      150,\n      { trailing: true },\n    );\n\n    attachFullscreenListener(handleFullscreenChange);\n    window.addEventListener('scroll', handleScroll);\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n      detachFullscreenListener(handleFullscreenChange);\n    };\n  }, [setPaused, setFullscreen, src, deployPictureInPicture]);\n\n  const handleTimeUpdate = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    setCurrentTime(videoRef.current.currentTime);\n  }, [setCurrentTime]);\n\n  const handleVolumeMouseDown = useCallback(\n    (e: React.MouseEvent) => {\n      const handleVolumeMouseUp = () => {\n        document.removeEventListener('mousemove', handleVolumeMouseMove, true);\n        document.removeEventListener('mouseup', handleVolumeMouseUp, true);\n      };\n\n      const handleVolumeMouseMove = (e: MouseEvent) => {\n        if (!volumeRef.current || !videoRef.current) {\n          return;\n        }\n\n        const { x } = getPointerPosition(volumeRef.current, e);\n\n        if (!isNaN(x)) {\n          videoRef.current.volume = x;\n          videoRef.current.muted = x > 0 ? false : true;\n          void api.start({ volume: `${x * 100}%`, immediate: true });\n        }\n      };\n\n      document.addEventListener('mousemove', handleVolumeMouseMove, true);\n      document.addEventListener('mouseup', handleVolumeMouseUp, true);\n\n      handleVolumeMouseMove(e.nativeEvent);\n\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    [api],\n  );\n\n  const handleSeekMouseDown = useCallback(\n    (e: React.MouseEvent) => {\n      const handleSeekMouseUp = () => {\n        document.removeEventListener('mousemove', handleSeekMouseMove, true);\n        document.removeEventListener('mouseup', handleSeekMouseUp, true);\n\n        setDragging(false);\n        void videoRef.current?.play();\n      };\n\n      const handleSeekMouseMove = (e: MouseEvent) => {\n        if (!seekRef.current || !videoRef.current) {\n          return;\n        }\n\n        const { x } = getPointerPosition(seekRef.current, e);\n        const newTime = videoRef.current.duration * x;\n\n        if (!isNaN(newTime)) {\n          videoRef.current.currentTime = newTime;\n          void api.start({ progress: `${x * 100}%`, immediate: true });\n        }\n      };\n\n      document.addEventListener('mousemove', handleSeekMouseMove, true);\n      document.addEventListener('mouseup', handleSeekMouseUp, true);\n\n      setDragging(true);\n      videoRef.current?.pause();\n      handleSeekMouseMove(e.nativeEvent);\n\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    [setDragging, api],\n  );\n\n  const seekBy = (time: number) => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    const newTime = videoRef.current.currentTime + time;\n\n    if (!isNaN(newTime)) {\n      videoRef.current.currentTime = newTime;\n    }\n  };\n\n  const updateVolumeBy = (step: number) => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    const newVolume = videoRef.current.volume + step;\n\n    if (!isNaN(newVolume)) {\n      videoRef.current.volume = newVolume;\n      videoRef.current.muted = newVolume > 0 ? false : true;\n    }\n  };\n\n  const handleVideoKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      // On the video element or the seek bar, we can safely use the space bar\n      // for playback control because there are no buttons to press\n\n      if (e.key === ' ') {\n        e.preventDefault();\n        e.stopPropagation();\n        registerHotkeyEvent(setHotkeyEvents, {\n          icon: videoRef.current?.paused ? PlayArrowIcon : PauseIcon,\n          label: videoRef.current?.paused ? messages.play : messages.pause,\n        });\n        togglePlay();\n      }\n    },\n    [setHotkeyEvents, togglePlay],\n  );\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      const frameTime = 1 / frameRateAsNumber(frameRate);\n\n      switch (e.key) {\n        case 'k':\n        case ' ':\n          e.preventDefault();\n          e.stopPropagation();\n          registerHotkeyEvent(setHotkeyEvents, {\n            icon: videoRef.current?.paused ? PlayArrowIcon : PauseIcon,\n            label: videoRef.current?.paused ? messages.play : messages.pause,\n          });\n          togglePlay();\n          break;\n        case 'm':\n          e.preventDefault();\n          e.stopPropagation();\n          registerHotkeyEvent(setHotkeyEvents, {\n            icon: videoRef.current?.muted ? VolumeUpIcon : VolumeOffIcon,\n            label: videoRef.current?.muted ? messages.unmute : messages.mute,\n          });\n          toggleMute();\n          break;\n        case 'f':\n          e.preventDefault();\n          e.stopPropagation();\n          registerHotkeyEvent(setHotkeyEvents, {\n            icon: isFullscreen() ? FullscreenExitIcon : FullscreenIcon,\n            label: isFullscreen()\n              ? messages.exit_fullscreen\n              : messages.fullscreen,\n          });\n          toggleFullscreen();\n          break;\n        case 'j':\n        case 'ArrowLeft':\n          e.preventDefault();\n          e.stopPropagation();\n          registerHotkeyEvent(setHotkeyEvents, {\n            icon: Replay5Icon,\n            label: messages.skipBackward,\n          });\n          seekBy(-5);\n          break;\n        case 'l':\n        case 'ArrowRight':\n          e.preventDefault();\n          e.stopPropagation();\n          registerHotkeyEvent(setHotkeyEvents, {\n            icon: Forward5Icon,\n            label: messages.skipForward,\n          });\n          seekBy(5);\n          break;\n        case ',':\n          e.preventDefault();\n          e.stopPropagation();\n          seekBy(-frameTime);\n          break;\n        case '.':\n          e.preventDefault();\n          e.stopPropagation();\n          seekBy(frameTime);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          e.stopPropagation();\n          registerHotkeyEvent(setHotkeyEvents, {\n            icon: VolumeUpIcon,\n            label: messages.volumeUp,\n          });\n          updateVolumeBy(0.15);\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          e.stopPropagation();\n          registerHotkeyEvent(setHotkeyEvents, {\n            icon: VolumeDownIcon,\n            label: messages.volumeDown,\n          });\n          updateVolumeBy(-0.15);\n          break;\n      }\n\n      // If we are in fullscreen mode, we don't want any hotkeys\n      // interacting with the UI that's not visible\n\n      if (fullscreen) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (e.key === 'Escape') {\n          setHotkeyEvents((events) => [\n            ...events,\n            {\n              key: hotkeyEventId++,\n              icon: FullscreenExitIcon,\n              label: messages.exit_fullscreen,\n            },\n          ]);\n          exitFullscreen();\n        }\n      }\n    },\n    [\n      setHotkeyEvents,\n      togglePlay,\n      toggleFullscreen,\n      toggleMute,\n      fullscreen,\n      frameRate,\n    ],\n  );\n\n  const handleMouseEnter = useCallback(() => {\n    setHovered(true);\n\n    if (hoverTimeoutRef.current) {\n      clearTimeout(hoverTimeoutRef.current);\n    }\n\n    hoverTimeoutRef.current = setTimeout(() => {\n      setHovered(false);\n    }, HOVER_FADE_DELAY);\n  }, [setHovered]);\n\n  const handleMouseMove = useCallback(() => {\n    setHovered(true);\n\n    if (hoverTimeoutRef.current) {\n      clearTimeout(hoverTimeoutRef.current);\n    }\n\n    hoverTimeoutRef.current = setTimeout(() => {\n      setHovered(false);\n    }, HOVER_FADE_DELAY);\n  }, [setHovered]);\n\n  const handleMouseLeave = useCallback(() => {\n    setHovered(false);\n  }, [setHovered]);\n\n  const toggleReveal = useCallback(() => {\n    if (onToggleVisibility) {\n      onToggleVisibility();\n    } else {\n      setRevealed((value) => !value);\n    }\n  }, [setRevealed, onToggleVisibility]);\n\n  const handleLoadedData = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    setDuration(videoRef.current.duration);\n\n    if (typeof startTime !== 'undefined') {\n      videoRef.current.currentTime = startTime;\n    }\n\n    if (typeof startVolume !== 'undefined') {\n      videoRef.current.volume = startVolume;\n    }\n\n    if (typeof startMuted !== 'undefined') {\n      videoRef.current.muted = startMuted;\n    }\n\n    if (startPlaying) {\n      void videoRef.current.play();\n    }\n  }, [setDuration, startTime, startVolume, startMuted, startPlaying]);\n\n  const handleProgress = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    const lastTimeRange = videoRef.current.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      void api.start({\n        buffer: `${Math.ceil(videoRef.current.buffered.end(lastTimeRange) / videoRef.current.duration) * 100}%`,\n      });\n    }\n  }, [api]);\n\n  const handleVolumeChange = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    setVolume(videoRef.current.volume);\n    setMuted(videoRef.current.muted);\n\n    void api.start({\n      volume: `${videoRef.current.muted ? 0 : videoRef.current.volume * 100}%`,\n    });\n\n    persistVolume(videoRef.current.volume, videoRef.current.muted);\n  }, [api, setVolume, setMuted]);\n\n  const handleOpenVideo = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    const wasPaused = videoRef.current.paused;\n\n    videoRef.current.pause();\n\n    onOpenVideo?.({\n      startTime: videoRef.current.currentTime,\n      autoPlay: !wasPaused,\n      defaultVolume: videoRef.current.volume,\n    });\n  }, [onOpenVideo]);\n\n  const handleCloseVideo = useCallback(() => {\n    if (!videoRef.current) {\n      return;\n    }\n\n    videoRef.current.pause();\n\n    onCloseVideo?.();\n  }, [onCloseVideo]);\n\n  const handleHotkeyEventDismiss = useCallback(\n    ({ key }: HotkeyEvent) => {\n      setHotkeyEvents((events) => events.filter((e) => e.key !== key));\n    },\n    [setHotkeyEvents],\n  );\n\n  const progress = Math.min((currentTime / duration) * 100, 100);\n  const effectivelyMuted = muted || volume === 0;\n\n  let preload;\n\n  if (startTime || fullscreen || dragging) {\n    preload = 'auto';\n  } else if (detailed) {\n    preload = 'metadata';\n  } else {\n    preload = 'none';\n  }\n\n  // The outer wrapper is necessary to avoid reflowing the layout when going into full screen\n  return (\n    <div>\n      <div /* eslint-disable-line jsx-a11y/click-events-have-key-events */\n        role='menuitem'\n        className={classNames('video-player', {\n          inactive: !revealed,\n          detailed,\n          fullscreen,\n          editable,\n        })}\n        style={{ aspectRatio }}\n        ref={playerRef}\n        onMouseEnter={handleMouseEnter}\n        onMouseMove={handleMouseMove}\n        onMouseLeave={handleMouseLeave}\n        onClick={handleClickRoot}\n        onKeyDownCapture={handleKeyDown}\n        tabIndex={0}\n      >\n        {blurhash && (\n          <Blurhash\n            hash={blurhash}\n            className={classNames('media-gallery__preview', {\n              'media-gallery__preview--hidden': revealed,\n            })}\n            dummy={!useBlurhash}\n          />\n        )}\n\n        {(revealed || editable) && (\n          <video /* eslint-disable-line jsx-a11y/media-has-caption */\n            ref={handleVideoRef}\n            src={src}\n            poster={preview}\n            preload={preload}\n            role='button'\n            tabIndex={0}\n            aria-label={alt}\n            title={alt}\n            lang={lang}\n            onClick={handleClick}\n            onKeyDownCapture={handleVideoKeyDown}\n            onPlay={handlePlay}\n            onPause={handlePause}\n            onLoadedData={handleLoadedData}\n            onProgress={handleProgress}\n            onTimeUpdate={handleTimeUpdate}\n            onVolumeChange={handleVolumeChange}\n            style={{ width: '100%' }}\n          />\n        )}\n\n        <HotkeyIndicator\n          events={hotkeyEvents}\n          onDismiss={handleHotkeyEventDismiss}\n        />\n\n        <SpoilerButton\n          hidden={revealed || editable}\n          sensitive={sensitive ?? false}\n          onClick={toggleReveal}\n          matchedFilters={matchedFilters}\n        />\n\n        {!onCloseVideo &&\n          !editable &&\n          !fullscreen &&\n          !alwaysVisible &&\n          revealed && (\n            <div\n              className={classNames('media-gallery__actions', {\n                active: paused || hovered,\n              })}\n            >\n              <button\n                className='media-gallery__actions__pill'\n                onClick={toggleReveal}\n              >\n                <FormattedMessage\n                  id='media_gallery.hide'\n                  defaultMessage='Hide'\n                />\n              </button>\n            </div>\n          )}\n\n        <div\n          className={classNames('video-player__controls', {\n            active: paused || hovered,\n          })}\n        >\n          <div\n            className='video-player__seek'\n            role='slider'\n            aria-valuemin={0}\n            aria-valuenow={progress}\n            aria-valuemax={100}\n            onMouseDown={handleSeekMouseDown}\n            onKeyDown={handleVideoKeyDown}\n            tabIndex={0}\n            ref={seekRef}\n          >\n            <animated.div\n              className='video-player__seek__buffer'\n              style={{ width: style.buffer }}\n            />\n            <animated.div\n              className='video-player__seek__progress'\n              style={{ width: style.progress }}\n            />\n\n            <animated.span\n              className={classNames('video-player__seek__handle', {\n                active: dragging,\n              })}\n              style={{ left: style.progress }}\n            />\n          </div>\n\n          <div className='video-player__buttons-bar'>\n            <div className='video-player__buttons left'>\n              <button\n                type='button'\n                title={intl.formatMessage(\n                  paused ? messages.play : messages.pause,\n                )}\n                aria-label={intl.formatMessage(\n                  paused ? messages.play : messages.pause,\n                )}\n                className='player-button'\n                onClick={togglePlay}\n              >\n                <Icon\n                  id={paused ? 'play' : 'pause'}\n                  icon={paused ? PlayArrowIcon : PauseIcon}\n                />\n              </button>\n              <button\n                type='button'\n                title={intl.formatMessage(\n                  effectivelyMuted ? messages.unmute : messages.mute,\n                )}\n                aria-label={intl.formatMessage(\n                  muted ? messages.unmute : messages.mute,\n                )}\n                className='player-button'\n                onClick={toggleMute}\n              >\n                <Icon\n                  id={effectivelyMuted ? 'volume-off' : 'volume-up'}\n                  icon={effectivelyMuted ? VolumeOffIcon : VolumeUpIcon}\n                />\n              </button>\n\n              <div\n                className={classNames('video-player__volume', {\n                  active: hovered,\n                })}\n                role='slider'\n                aria-valuemin={0}\n                aria-valuenow={effectivelyMuted ? 0 : volume * 100}\n                aria-valuemax={100}\n                onMouseDown={handleVolumeMouseDown}\n                ref={volumeRef}\n                tabIndex={0}\n              >\n                <animated.div\n                  className='video-player__volume__current'\n                  style={{ width: style.volume }}\n                />\n\n                <animated.span\n                  className={classNames('video-player__volume__handle')}\n                  style={{ left: style.volume }}\n                />\n              </div>\n\n              {(detailed || fullscreen) && (\n                <span className='video-player__time'>\n                  <span className='video-player__time-current'>\n                    {formatTime(Math.floor(currentTime))}\n                  </span>\n                  <span className='video-player__time-sep'>/</span>\n                  <span className='video-player__time-total'>\n                    {formatTime(Math.floor(duration))}\n                  </span>\n                </span>\n              )}\n            </div>\n\n            <div className='video-player__buttons right'>\n              {!fullscreen && onOpenVideo && (\n                <button\n                  type='button'\n                  title={intl.formatMessage(messages.expand)}\n                  aria-label={intl.formatMessage(messages.expand)}\n                  className='player-button'\n                  onClick={handleOpenVideo}\n                >\n                  <Icon id='expand' icon={RectangleIcon} />\n                </button>\n              )}\n              {onCloseVideo && (\n                <button\n                  type='button'\n                  title={intl.formatMessage(messages.close)}\n                  aria-label={intl.formatMessage(messages.close)}\n                  className='player-button'\n                  onClick={handleCloseVideo}\n                >\n                  <Icon id='compress' icon={FullscreenExitIcon} />\n                </button>\n              )}\n              <button\n                type='button'\n                title={intl.formatMessage(\n                  fullscreen ? messages.exit_fullscreen : messages.fullscreen,\n                )}\n                aria-label={intl.formatMessage(\n                  fullscreen ? messages.exit_fullscreen : messages.fullscreen,\n                )}\n                className='player-button'\n                onClick={toggleFullscreen}\n              >\n                <Icon\n                  id={fullscreen ? 'compress' : 'arrows-alt'}\n                  icon={fullscreen ? FullscreenExitIcon : FullscreenIcon}\n                />\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default Video;\n","import { useCallback, useEffect, useRef } from 'react';\n\ninterface AudioContextOptions {\n  audioElementRef: React.MutableRefObject<HTMLAudioElement | null>;\n}\n\n/**\n * Create and return an audio context instance for a given audio element [0].\n * Also returns an associated audio source, a gain node, and play and pause actions\n * which should be used instead of `audioElementRef.current.play/pause()`.\n *\n * [0] https://developer.mozilla.org/en-US/docs/Web/API/AudioContext\n */\n\nexport const useAudioContext = ({ audioElementRef }: AudioContextOptions) => {\n  const audioContextRef = useRef<AudioContext>();\n  const sourceRef = useRef<MediaElementAudioSourceNode>();\n  const gainNodeRef = useRef<GainNode>();\n\n  useEffect(() => {\n    if (!audioElementRef.current) {\n      return;\n    }\n\n    const context = audioContextRef.current ?? new AudioContext();\n    const source =\n      sourceRef.current ??\n      context.createMediaElementSource(audioElementRef.current);\n\n    const gainNode = context.createGain();\n    gainNode.connect(context.destination);\n    source.connect(gainNode);\n\n    audioContextRef.current = context;\n    gainNodeRef.current = gainNode;\n    sourceRef.current = source;\n\n    return () => {\n      if (context.state !== 'closed') {\n        void context.close();\n      }\n    };\n  }, [audioElementRef]);\n\n  const playAudio = useCallback(() => {\n    void audioElementRef.current?.play();\n    void audioContextRef.current?.resume();\n  }, [audioElementRef]);\n\n  const pauseAudio = useCallback(() => {\n    audioElementRef.current?.pause();\n    void audioContextRef.current?.suspend();\n  }, [audioElementRef]);\n\n  return {\n    audioContextRef,\n    sourceRef,\n    gainNodeRef,\n    playAudio,\n    pauseAudio,\n  };\n};\n","import { useState, useEffect, useRef } from 'react';\n\nconst normalizeFrequencies = (arr: Float32Array): number[] => {\n  return new Array(...arr).map((value: number) => {\n    if (value === -Infinity) {\n      return 0;\n    }\n\n    return Math.sqrt(1 - (Math.max(-100, Math.min(-10, value)) * -1) / 100);\n  });\n};\n\ninterface AudioVisualiserOptions {\n  audioContextRef: React.MutableRefObject<AudioContext | undefined>;\n  sourceRef: React.MutableRefObject<MediaElementAudioSourceNode | undefined>;\n  numBands: number;\n}\n\nexport const useAudioVisualizer = ({\n  audioContextRef,\n  sourceRef,\n  numBands,\n}: AudioVisualiserOptions) => {\n  const analyzerRef = useRef<AnalyserNode>();\n\n  const [frequencyBands, setFrequencyBands] = useState<number[]>(\n    new Array(numBands).fill(0),\n  );\n\n  useEffect(() => {\n    if (audioContextRef.current) {\n      analyzerRef.current = audioContextRef.current.createAnalyser();\n      analyzerRef.current.smoothingTimeConstant = 0.6;\n      analyzerRef.current.fftSize = 2048;\n    }\n  }, [audioContextRef]);\n\n  useEffect(() => {\n    if (analyzerRef.current && sourceRef.current) {\n      sourceRef.current.connect(analyzerRef.current);\n    }\n    const currentSource = sourceRef.current;\n\n    return () => {\n      if (currentSource && analyzerRef.current) {\n        currentSource.disconnect(analyzerRef.current);\n      }\n    };\n  }, [audioContextRef, sourceRef]);\n\n  useEffect(() => {\n    const analyzer = analyzerRef.current;\n    const context = audioContextRef.current;\n\n    if (!analyzer || !context) {\n      return;\n    }\n\n    const bufferLength = analyzer.frequencyBinCount;\n    const frequencyData = new Float32Array(bufferLength);\n\n    const updateProgress = () => {\n      analyzer.getFloatFrequencyData(frequencyData);\n\n      const normalizedFrequencies = normalizeFrequencies(\n        frequencyData.slice(100, 600),\n      );\n      const bands: number[] = [];\n      const chunkSize = Math.ceil(normalizedFrequencies.length / numBands);\n\n      for (let i = 0; i < numBands; i++) {\n        const sum = normalizedFrequencies\n          .slice(i * chunkSize, (i + 1) * chunkSize)\n          .reduce((sum, cur) => sum + cur, 0);\n        bands.push(sum / chunkSize);\n      }\n\n      setFrequencyBands(bands);\n    };\n\n    const updateInterval = setInterval(updateProgress, 15);\n\n    return () => {\n      clearInterval(updateInterval);\n    };\n  }, [numBands, audioContextRef]);\n\n  return frequencyBands;\n};\n","import { useEffect, useRef, useCallback, useState, useId } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { useSpring, animated, config } from '@react-spring/web';\n\nimport DownloadIcon from '@/material-icons/400-24px/download.svg?react';\nimport Forward5Icon from '@/material-icons/400-24px/forward_5-fill.svg?react';\nimport PauseIcon from '@/material-icons/400-24px/pause-fill.svg?react';\nimport PlayArrowIcon from '@/material-icons/400-24px/play_arrow-fill.svg?react';\nimport Replay5Icon from '@/material-icons/400-24px/replay_5-fill.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off-fill.svg?react';\nimport VolumeUpIcon from '@/material-icons/400-24px/volume_up-fill.svg?react';\nimport { Blurhash } from 'mastodon/components/blurhash';\nimport { Icon } from 'mastodon/components/icon';\nimport { SpoilerButton } from 'mastodon/components/spoiler_button';\nimport { formatTime, getPointerPosition } from 'mastodon/features/video';\nimport { useAudioContext } from 'mastodon/hooks/useAudioContext';\nimport { useAudioVisualizer } from 'mastodon/hooks/useAudioVisualizer';\nimport { displayMedia, useBlurhash } from 'mastodon/initial_state';\nimport { playerSettings } from 'mastodon/settings';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute' },\n  download: { id: 'video.download', defaultMessage: 'Download file' },\n  hide: { id: 'audio.hide', defaultMessage: 'Hide audio' },\n  skipForward: { id: 'video.skip_forward', defaultMessage: 'Skip forward' },\n  skipBackward: { id: 'video.skip_backward', defaultMessage: 'Skip backward' },\n});\n\nconst persistVolume = (volume: number, muted: boolean) => {\n  playerSettings.set('volume', volume);\n  playerSettings.set('muted', muted);\n};\n\nconst restoreVolume = (audio: HTMLAudioElement) => {\n  const volume = (playerSettings.get('volume') as number | undefined) ?? 0.5;\n  const muted = (playerSettings.get('muted') as boolean | undefined) ?? false;\n\n  audio.volume = volume;\n  audio.muted = muted;\n};\n\nconst HOVER_FADE_DELAY = 4000;\n\nexport const Audio: React.FC<{\n  src: string;\n  alt?: string;\n  lang?: string;\n  poster?: string;\n  sensitive?: boolean;\n  editable?: boolean;\n  blurhash?: string;\n  visible?: boolean;\n  duration?: number;\n  onToggleVisibility?: () => void;\n  backgroundColor?: string;\n  foregroundColor?: string;\n  accentColor?: string;\n  startTime?: number;\n  startPlaying?: boolean;\n  startVolume?: number;\n  startMuted?: boolean;\n  deployPictureInPicture?: (\n    type: string,\n    mediaProps: {\n      src: string;\n      muted: boolean;\n      volume: number;\n      currentTime: number;\n      poster?: string;\n      backgroundColor: string;\n      foregroundColor: string;\n      accentColor: string;\n    },\n  ) => void;\n  matchedFilters?: string[];\n}> = ({\n  src,\n  alt,\n  lang,\n  poster,\n  duration,\n  sensitive,\n  editable,\n  blurhash,\n  visible,\n  onToggleVisibility,\n  backgroundColor = '#000000',\n  foregroundColor = '#ffffff',\n  accentColor = '#ffffff',\n  startTime,\n  startPlaying,\n  startVolume,\n  startMuted,\n  deployPictureInPicture,\n  matchedFilters,\n}) => {\n  const intl = useIntl();\n  const [currentTime, setCurrentTime] = useState(0);\n  const [loadedDuration, setDuration] = useState(duration ?? 0);\n  const [paused, setPaused] = useState(true);\n  const [muted, setMuted] = useState(false);\n  const [volume, setVolume] = useState(0.5);\n  const [hovered, setHovered] = useState(false);\n  const [dragging, setDragging] = useState(false);\n  const [revealed, setRevealed] = useState(false);\n\n  const playerRef = useRef<HTMLDivElement>(null);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const seekRef = useRef<HTMLDivElement>(null);\n  const volumeRef = useRef<HTMLDivElement>(null);\n  const hoverTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>();\n  const accessibilityId = useId();\n\n  const { audioContextRef, sourceRef, gainNodeRef, playAudio, pauseAudio } =\n    useAudioContext({ audioElementRef: audioRef });\n\n  const frequencyBands = useAudioVisualizer({\n    audioContextRef,\n    sourceRef,\n    numBands: 3,\n  });\n\n  const [style, spring] = useSpring(() => ({\n    progress: '0%',\n    buffer: '0%',\n    volume: '0%',\n  }));\n\n  const handleAudioRef = useCallback(\n    (c: HTMLVideoElement | null) => {\n      if (audioRef.current && !audioRef.current.paused && c === null) {\n        deployPictureInPicture?.('audio', {\n          src,\n          poster,\n          backgroundColor,\n          foregroundColor,\n          accentColor,\n          currentTime: audioRef.current.currentTime,\n          muted: audioRef.current.muted,\n          volume: audioRef.current.volume,\n        });\n      }\n\n      audioRef.current = c;\n\n      if (audioRef.current) {\n        restoreVolume(audioRef.current);\n        setVolume(audioRef.current.volume);\n        setMuted(audioRef.current.muted);\n        if (gainNodeRef.current) {\n          gainNodeRef.current.gain.value = audioRef.current.volume;\n        }\n        void spring.start({\n          volume: `${audioRef.current.volume * 100}%`,\n        });\n      }\n    },\n    [\n      deployPictureInPicture,\n      src,\n      poster,\n      backgroundColor,\n      foregroundColor,\n      accentColor,\n      gainNodeRef,\n      spring,\n    ],\n  );\n\n  useEffect(() => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    audioRef.current.volume = volume;\n    audioRef.current.muted = muted;\n\n    if (gainNodeRef.current) {\n      gainNodeRef.current.gain.value = muted ? 0 : volume;\n    }\n  }, [volume, muted, gainNodeRef]);\n\n  useEffect(() => {\n    if (typeof visible !== 'undefined') {\n      setRevealed(visible);\n    } else {\n      setRevealed(\n        displayMedia === 'show_all' ||\n          (displayMedia !== 'hide_all' && !sensitive),\n      );\n    }\n  }, [visible, sensitive]);\n\n  useEffect(() => {\n    if (!revealed) {\n      pauseAudio();\n    }\n  }, [pauseAudio, revealed]);\n\n  useEffect(() => {\n    let nextFrame: ReturnType<typeof requestAnimationFrame>;\n\n    const updateProgress = () => {\n      nextFrame = requestAnimationFrame(() => {\n        if (audioRef.current && audioRef.current.duration > 0) {\n          void spring.start({\n            progress: `${(audioRef.current.currentTime / audioRef.current.duration) * 100}%`,\n            config: config.stiff,\n          });\n        }\n\n        updateProgress();\n      });\n    };\n\n    updateProgress();\n\n    return () => {\n      cancelAnimationFrame(nextFrame);\n    };\n  }, [spring]);\n\n  const togglePlay = useCallback(() => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    if (audioRef.current.paused) {\n      playAudio();\n    } else {\n      pauseAudio();\n    }\n  }, [playAudio, pauseAudio]);\n\n  const handlePlay = useCallback(() => {\n    setPaused(false);\n  }, []);\n\n  const handlePause = useCallback(() => {\n    setPaused(true);\n  }, []);\n\n  const handleProgress = useCallback(() => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    const lastTimeRange = audioRef.current.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      void spring.start({\n        buffer: `${Math.ceil(audioRef.current.buffered.end(lastTimeRange) / audioRef.current.duration) * 100}%`,\n      });\n    }\n  }, [spring]);\n\n  const handleVolumeChange = useCallback(() => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    setVolume(audioRef.current.volume);\n    setMuted(audioRef.current.muted);\n\n    void spring.start({\n      volume: `${audioRef.current.muted ? 0 : audioRef.current.volume * 100}%`,\n    });\n\n    persistVolume(audioRef.current.volume, audioRef.current.muted);\n  }, [spring, setVolume, setMuted]);\n\n  const handleTimeUpdate = useCallback(() => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    setCurrentTime(audioRef.current.currentTime);\n  }, [setCurrentTime]);\n\n  const toggleMute = useCallback(() => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    const effectivelyMuted =\n      audioRef.current.muted || audioRef.current.volume === 0;\n\n    if (effectivelyMuted) {\n      audioRef.current.muted = false;\n\n      if (audioRef.current.volume === 0) {\n        audioRef.current.volume = 0.05;\n      }\n    } else {\n      audioRef.current.muted = true;\n    }\n  }, []);\n\n  const toggleReveal = useCallback(() => {\n    if (onToggleVisibility) {\n      onToggleVisibility();\n    } else {\n      setRevealed((value) => !value);\n    }\n  }, [onToggleVisibility, setRevealed]);\n\n  const handleVolumeMouseDown = useCallback(\n    (e: React.MouseEvent) => {\n      const handleVolumeMouseUp = () => {\n        document.removeEventListener('mousemove', handleVolumeMouseMove, true);\n        document.removeEventListener('mouseup', handleVolumeMouseUp, true);\n      };\n\n      const handleVolumeMouseMove = (e: MouseEvent) => {\n        if (!volumeRef.current || !audioRef.current) {\n          return;\n        }\n\n        const { x } = getPointerPosition(volumeRef.current, e);\n\n        if (!isNaN(x)) {\n          audioRef.current.volume = x;\n          audioRef.current.muted = x > 0 ? false : true;\n          void spring.start({ volume: `${x * 100}%`, immediate: true });\n        }\n      };\n\n      document.addEventListener('mousemove', handleVolumeMouseMove, true);\n      document.addEventListener('mouseup', handleVolumeMouseUp, true);\n\n      handleVolumeMouseMove(e.nativeEvent);\n\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    [spring],\n  );\n\n  const handleSeekMouseDown = useCallback(\n    (e: React.MouseEvent) => {\n      const handleSeekMouseUp = () => {\n        document.removeEventListener('mousemove', handleSeekMouseMove, true);\n        document.removeEventListener('mouseup', handleSeekMouseUp, true);\n\n        setDragging(false);\n        playAudio();\n      };\n\n      const handleSeekMouseMove = (e: MouseEvent) => {\n        if (!seekRef.current || !audioRef.current) {\n          return;\n        }\n\n        const { x } = getPointerPosition(seekRef.current, e);\n        const newTime = audioRef.current.duration * x;\n\n        if (!isNaN(newTime)) {\n          audioRef.current.currentTime = newTime;\n          void spring.start({ progress: `${x * 100}%`, immediate: true });\n        }\n      };\n\n      document.addEventListener('mousemove', handleSeekMouseMove, true);\n      document.addEventListener('mouseup', handleSeekMouseUp, true);\n\n      setDragging(true);\n      audioRef.current?.pause();\n      handleSeekMouseMove(e.nativeEvent);\n\n      e.preventDefault();\n      e.stopPropagation();\n    },\n    [playAudio, spring],\n  );\n\n  const handleMouseEnter = useCallback(() => {\n    setHovered(true);\n\n    if (hoverTimeoutRef.current) {\n      clearTimeout(hoverTimeoutRef.current);\n    }\n\n    hoverTimeoutRef.current = setTimeout(() => {\n      setHovered(false);\n    }, HOVER_FADE_DELAY);\n  }, [setHovered]);\n\n  const handleMouseMove = useCallback(() => {\n    setHovered(true);\n\n    if (hoverTimeoutRef.current) {\n      clearTimeout(hoverTimeoutRef.current);\n    }\n\n    hoverTimeoutRef.current = setTimeout(() => {\n      setHovered(false);\n    }, HOVER_FADE_DELAY);\n  }, [setHovered]);\n\n  const handleMouseLeave = useCallback(() => {\n    setHovered(false);\n\n    if (hoverTimeoutRef.current) {\n      clearTimeout(hoverTimeoutRef.current);\n    }\n  }, [setHovered]);\n\n  const handleTouchEnd = useCallback(() => {\n    setHovered(true);\n\n    if (hoverTimeoutRef.current) {\n      clearTimeout(hoverTimeoutRef.current);\n    }\n\n    hoverTimeoutRef.current = setTimeout(() => {\n      setHovered(false);\n    }, HOVER_FADE_DELAY);\n  }, [setHovered]);\n\n  const handleLoadedData = useCallback(() => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    setDuration(audioRef.current.duration);\n\n    if (typeof startTime !== 'undefined') {\n      audioRef.current.currentTime = startTime;\n    }\n\n    if (typeof startVolume !== 'undefined') {\n      audioRef.current.volume = startVolume;\n    }\n\n    if (typeof startMuted !== 'undefined') {\n      audioRef.current.muted = startMuted;\n    }\n  }, [setDuration, startTime, startVolume, startMuted]);\n\n  const handleCanPlayThrough = useCallback(() => {\n    if (startPlaying) {\n      playAudio();\n    }\n  }, [startPlaying, playAudio]);\n\n  const seekBy = (time: number) => {\n    if (!audioRef.current) {\n      return;\n    }\n\n    const newTime = audioRef.current.currentTime + time;\n\n    if (!isNaN(newTime)) {\n      audioRef.current.currentTime = newTime;\n    }\n  };\n\n  const handleAudioKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      // On the audio element or the seek bar, we can safely use the space bar\n      // for playback control because there are no buttons to press\n\n      if (e.key === ' ') {\n        e.preventDefault();\n        e.stopPropagation();\n        togglePlay();\n      }\n    },\n    [togglePlay],\n  );\n\n  const handleSkipBackward = useCallback(() => {\n    seekBy(-5);\n  }, []);\n\n  const handleSkipForward = useCallback(() => {\n    seekBy(5);\n  }, []);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      const updateVolumeBy = (step: number) => {\n        if (!audioRef.current) {\n          return;\n        }\n\n        const newVolume = Math.max(0, audioRef.current.volume + step);\n\n        if (!isNaN(newVolume)) {\n          audioRef.current.volume = newVolume;\n          audioRef.current.muted = newVolume > 0 ? false : true;\n        }\n      };\n\n      switch (e.key) {\n        case 'k':\n        case ' ':\n          e.preventDefault();\n          e.stopPropagation();\n          togglePlay();\n          break;\n        case 'm':\n          e.preventDefault();\n          e.stopPropagation();\n          toggleMute();\n          break;\n        case 'j':\n        case 'ArrowLeft':\n          e.preventDefault();\n          e.stopPropagation();\n          seekBy(-5);\n          break;\n        case 'l':\n        case 'ArrowRight':\n          e.preventDefault();\n          e.stopPropagation();\n          seekBy(5);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          e.stopPropagation();\n          updateVolumeBy(0.15);\n          break;\n        case 'ArrowDown':\n          e.preventDefault();\n          e.stopPropagation();\n          updateVolumeBy(-0.15);\n          break;\n      }\n    },\n    [togglePlay, toggleMute],\n  );\n\n  const springForBand0 = useSpring({\n    to: { r: 50 + (frequencyBands[0] ?? 0) * 10 },\n    config: config.wobbly,\n  });\n  const springForBand1 = useSpring({\n    to: { r: 50 + (frequencyBands[1] ?? 0) * 10 },\n    config: config.wobbly,\n  });\n  const springForBand2 = useSpring({\n    to: { r: 50 + (frequencyBands[2] ?? 0) * 10 },\n    config: config.wobbly,\n  });\n\n  const progress = Math.min((currentTime / loadedDuration) * 100, 100);\n  const effectivelyMuted = muted || volume === 0;\n\n  return (\n    <div\n      className={classNames('audio-player', { inactive: !revealed })}\n      ref={playerRef}\n      style={\n        {\n          '--player-background-color': backgroundColor,\n          '--player-foreground-color': foregroundColor,\n          '--player-accent-color': accentColor,\n        } as React.CSSProperties\n      }\n      onMouseEnter={handleMouseEnter}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchEnd={handleTouchEnd}\n      role='button'\n      tabIndex={0}\n      onKeyDownCapture={handleKeyDown}\n      aria-label={alt}\n      lang={lang}\n    >\n      {blurhash && (\n        <Blurhash\n          hash={blurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': revealed,\n          })}\n          dummy={!useBlurhash}\n        />\n      )}\n\n      <audio /* eslint-disable-line jsx-a11y/media-has-caption */\n        src={src}\n        ref={handleAudioRef}\n        preload={startPlaying ? 'auto' : 'none'}\n        onPlay={handlePlay}\n        onPause={handlePause}\n        onProgress={handleProgress}\n        onLoadedData={handleLoadedData}\n        onCanPlayThrough={handleCanPlayThrough}\n        onTimeUpdate={handleTimeUpdate}\n        onVolumeChange={handleVolumeChange}\n        crossOrigin='anonymous'\n      />\n\n      <div\n        className='video-player__seek'\n        aria-valuemin={0}\n        aria-valuenow={progress}\n        aria-valuemax={100}\n        onMouseDown={handleSeekMouseDown}\n        onKeyDownCapture={handleAudioKeyDown}\n        ref={seekRef}\n        role='slider'\n        tabIndex={0}\n      >\n        <animated.div\n          className='video-player__seek__buffer'\n          style={{ width: style.buffer }}\n        />\n        <animated.div\n          className='video-player__seek__progress'\n          style={{ width: style.progress }}\n        />\n\n        <animated.span\n          className={classNames('video-player__seek__handle', {\n            active: dragging,\n          })}\n          style={{ left: style.progress }}\n        />\n      </div>\n\n      <div className='audio-player__controls'>\n        <div className='audio-player__controls__play'>\n          <button\n            type='button'\n            title={intl.formatMessage(messages.skipBackward)}\n            aria-label={intl.formatMessage(messages.skipBackward)}\n            className='player-button'\n            onClick={handleSkipBackward}\n          >\n            <Icon id='' icon={Replay5Icon} />\n          </button>\n        </div>\n\n        <div className='audio-player__controls__play'>\n          <svg\n            className='audio-player__visualizer'\n            viewBox='0 0 124 124'\n            xmlns='http://www.w3.org/2000/svg'\n          >\n            <animated.circle\n              opacity={0.5}\n              cx={57}\n              cy={62.5}\n              r={springForBand0.r}\n              fill='var(--player-accent-color)'\n            />\n            <animated.circle\n              opacity={0.5}\n              cx={65}\n              cy={57.5}\n              r={springForBand1.r}\n              fill='var(--player-accent-color)'\n            />\n            <animated.circle\n              opacity={0.5}\n              cx={63}\n              cy={66.5}\n              r={springForBand2.r}\n              fill='var(--player-accent-color)'\n            />\n\n            <g clipPath={`url(#${accessibilityId}-clip)`}>\n              <rect\n                x={14}\n                y={14}\n                width={96}\n                height={96}\n                fill={`url(#${accessibilityId}-pattern)`}\n              />\n              <rect\n                x={14}\n                y={14}\n                width={96}\n                height={96}\n                fill='var(--player-background-color'\n                opacity={0.45}\n              />\n            </g>\n\n            <defs>\n              <pattern\n                id={`${accessibilityId}-pattern`}\n                patternContentUnits='objectBoundingBox'\n                width='1'\n                height='1'\n              >\n                <use href={`#${accessibilityId}-image`} />\n              </pattern>\n\n              <clipPath id={`${accessibilityId}-clip`}>\n                <rect\n                  x={14}\n                  y={14}\n                  width={96}\n                  height={96}\n                  rx={48}\n                  fill='white'\n                />\n              </clipPath>\n\n              <image\n                id={`${accessibilityId}-image`}\n                href={poster}\n                width={1}\n                height={1}\n                preserveAspectRatio='none'\n              />\n            </defs>\n          </svg>\n\n          <button\n            type='button'\n            title={intl.formatMessage(paused ? messages.play : messages.pause)}\n            aria-label={intl.formatMessage(\n              paused ? messages.play : messages.pause,\n            )}\n            className='player-button'\n            onClick={togglePlay}\n          >\n            <Icon\n              id={paused ? 'play' : 'pause'}\n              icon={paused ? PlayArrowIcon : PauseIcon}\n            />\n          </button>\n        </div>\n\n        <div className='audio-player__controls__play'>\n          <button\n            type='button'\n            title={intl.formatMessage(messages.skipForward)}\n            aria-label={intl.formatMessage(messages.skipForward)}\n            className='player-button'\n            onClick={handleSkipForward}\n          >\n            <Icon id='' icon={Forward5Icon} />\n          </button>\n        </div>\n      </div>\n\n      <SpoilerButton\n        hidden={revealed || editable}\n        sensitive={sensitive ?? false}\n        onClick={toggleReveal}\n        matchedFilters={matchedFilters}\n      />\n\n      <div\n        className={classNames('video-player__controls', { active: hovered })}\n      >\n        <div className='video-player__buttons-bar'>\n          <div className='video-player__buttons left'>\n            <button\n              type='button'\n              title={intl.formatMessage(\n                muted ? messages.unmute : messages.mute,\n              )}\n              aria-label={intl.formatMessage(\n                muted ? messages.unmute : messages.mute,\n              )}\n              className='player-button'\n              onClick={toggleMute}\n            >\n              <Icon\n                id={muted ? 'volume-off' : 'volume-up'}\n                icon={muted ? VolumeOffIcon : VolumeUpIcon}\n              />\n            </button>\n\n            <div\n              className='video-player__volume active'\n              ref={volumeRef}\n              onMouseDown={handleVolumeMouseDown}\n              role='slider'\n              aria-valuemin={0}\n              aria-valuenow={effectivelyMuted ? 0 : volume * 100}\n              aria-valuemax={100}\n              tabIndex={0}\n            >\n              <animated.div\n                className='video-player__volume__current'\n                style={{ width: style.volume }}\n              />\n\n              <animated.span\n                className={classNames('video-player__volume__handle')}\n                style={{ left: style.volume }}\n              />\n            </div>\n\n            <span className='video-player__time'>\n              <span className='video-player__time-current'>\n                {formatTime(Math.floor(currentTime))}\n              </span>\n              <span className='video-player__time-sep'>/</span>\n              <span className='video-player__time-total'>\n                {formatTime(Math.floor(loadedDuration))}\n              </span>\n            </span>\n          </div>\n\n          <div className='video-player__buttons right'>\n            {!editable && (\n              <>\n                <button\n                  type='button'\n                  className='player-button'\n                  onClick={toggleReveal}\n                >\n                  <FormattedMessage\n                    id='media_gallery.hide'\n                    defaultMessage='Hide'\n                  />\n                </button>\n\n                <a\n                  title={intl.formatMessage(messages.download)}\n                  aria-label={intl.formatMessage(messages.download)}\n                  className='video-player__download__icon player-button'\n                  href={src}\n                  download\n                >\n                  <Icon id='download' icon={DownloadIcon} />\n                </a>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default Audio;\n","import * as React from \"react\";\nconst SvgOpenInNew = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z\" }));\nexport default SvgOpenInNew;\n","import * as React from \"react\";\nconst SvgRepeat = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M280-80 120-240l160-160 56 58-62 62h406v-160h80v240H274l62 62-56 58Zm-80-440v-240h486l-62-62 56-58 160 160-160 160-56-58 62-62H280v160h-80Z\" }));\nexport default SvgRepeat;\n","import * as React from \"react\";\nconst SvgReply = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M760-200v-160q0-50-35-85t-85-35H273l144 144-57 56-240-240 240-240 57 56-144 144h367q83 0 141.5 58.5T840-360v160h-80Z\" }));\nexport default SvgReply;\n","import * as React from \"react\";\nconst SvgReplyAll = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M320-280 80-520l240-240 57 56-184 184 184 184-57 56Zm480 80v-160q0-50-35-85t-85-35H433l144 144-57 56-240-240 240-240 57 56-144 144h247q83 0 141.5 58.5T880-360v160h-80Z\" }));\nexport default SvgReplyAll;\n","import * as React from \"react\";\nconst SvgStarFill = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"m233-120 65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Z\" }));\nexport default SvgStarFill;\n","import * as React from \"react\";\nconst SvgStar = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-350Z\" }));\nexport default SvgStar;\n","import * as React from \"react\";\nconst SvgRepeatActive = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M7 22L3 18L7 14L8.4 15.45L6.85 17H17V13H19V19H6.85L8.4 20.55L7 22ZM5 11V5H17.15L15.6 3.45L17 2L21 6L17 10L15.6 8.55L17.15 7H7V11H5Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M9 9H15V15H9V9Z\" }));\nexport default SvgRepeatActive;\n","import * as React from \"react\";\nconst SvgRepeatDisabled = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M19 13V17.8787L17 15.8787V13H19Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M2.41421 2.70711L1 4.12132L5 8.12132V11H7V10.1213L13.8787 17H6.85L8.4 15.45L7 14L3 18L7 22L8.4 20.55L6.85 19H15.8787L19.3848 22.5061L20.799 21.0919L2.41421 2.70711Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M17.15 7H8.12132L6.12132 5H17.15L15.6 3.45L17 2L21 6L17 10L15.6 8.55L17.15 7Z\" }));\nexport default SvgRepeatDisabled;\n","import * as React from \"react\";\nconst SvgRepeatPrivate = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M8.4 15.45L7 14L3 18L7 22L8.4 20.55L6.85 19H13.5V18C13.5 17.6567 13.5638 17.3171 13.6988 17H6.85L8.4 15.45Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M5 5V11H7V7H17.15L15.6 8.55L17 10L21 6L17 2L15.6 3.45L17.15 5H5Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M16 22C15.7167 22 15.475 21.9083 15.275 21.725C15.0917 21.525 15 21.2833 15 21V18C15 17.7167 15.0917 17.4833 15.275 17.3C15.475 17.1 15.7167 17 16 17V16C16 15.45 16.1917 14.9833 16.575 14.6C16.975 14.2 17.45 14 18 14C18.55 14 19.0167 14.2 19.4 14.6C19.8 14.9833 20 15.45 20 16V17C20.2833 17 20.5167 17.1 20.7 17.3C20.9 17.4833 21 17.7167 21 18V21C21 21.2833 20.9 21.525 20.7 21.725C20.5167 21.9083 20.2833 22 20 22H16ZM17 17H19V16C19 15.7167 18.9 15.4833 18.7 15.3C18.5167 15.1 18.2833 15 18 15C17.7167 15 17.475 15.1 17.275 15.3C17.0917 15.4833 17 15.7167 17 16V17Z\" }));\nexport default SvgRepeatPrivate;\n","import * as React from \"react\";\nconst SvgRepeatPrivateActive = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M8.4 15.45L7 14L3 18L7 22L8.4 20.55L6.85 19H13.5V18C13.5 17.6567 13.5638 17.3171 13.6988 17H6.85L8.4 15.45Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M15 14.1883C14.8435 14.443 14.7232 14.7147 14.6398 15H9V9H15V14.1883Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M5 5V11H7V7H17.15L15.6 8.55L17 10L21 6L17 2L15.6 3.45L17.15 5H5Z\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M16 22C15.7167 22 15.475 21.9083 15.275 21.725C15.0917 21.525 15 21.2833 15 21V18C15 17.7167 15.0917 17.4833 15.275 17.3C15.475 17.1 15.7167 17 16 17V16C16 15.45 16.1917 14.9833 16.575 14.6C16.975 14.2 17.45 14 18 14C18.55 14 19.0167 14.2 19.4 14.6C19.8 14.9833 20 15.45 20 16V17C20.2833 17 20.5167 17.1 20.7 17.3C20.9 17.4833 21 17.7167 21 18V21C21 21.2833 20.9 21.525 20.7 21.725C20.5167 21.9083 20.2833 22 20 22H16ZM17 17H19V16C19 15.7167 18.9 15.4833 18.7 15.3C18.5167 15.1 18.2833 15 18 15C17.7167 15 17.475 15.1 17.275 15.3C17.0917 15.4833 17 15.7167 17 16V17Z\" }));\nexport default SvgRepeatPrivateActive;\n","import { useEffect, useState } from 'react';\n\nimport { animated, useSpring, config } from '@react-spring/web';\n\nimport { reduceMotion } from '../initial_state';\n\nimport { ShortNumber } from './short_number';\n\ninterface Props {\n  value: number;\n}\nexport const AnimatedNumber: React.FC<Props> = ({ value }) => {\n  const [previousValue, setPreviousValue] = useState(value);\n  const direction = value > previousValue ? -1 : 1;\n\n  const [styles, api] = useSpring(\n    () => ({\n      from: { transform: `translateY(${100 * direction}%)` },\n      to: { transform: 'translateY(0%)' },\n      onRest() {\n        setPreviousValue(value);\n      },\n      config: { ...config.gentle, duration: 200 },\n      immediate: true, // This ensures that the animation is not played when the component is first rendered\n    }),\n    [value, previousValue],\n  );\n\n  // When the value changes, start the animation\n  useEffect(() => {\n    if (value !== previousValue) {\n      void api.start({ reset: true });\n    }\n  }, [api, previousValue, value]);\n\n  if (reduceMotion) {\n    return <ShortNumber value={value} />;\n  }\n\n  return (\n    <span className='animated-number'>\n      <animated.span style={styles}>\n        <ShortNumber value={value} />\n      </animated.span>\n      {value !== previousValue && (\n        <animated.span\n          style={{\n            ...styles,\n            position: 'absolute',\n            top: `${-100 * direction}%`, // Adds extra space on top of translateY\n          }}\n          role='presentation'\n        >\n          <ShortNumber value={previousValue} />\n        </animated.span>\n      )}\n    </span>\n  );\n};\n","import { useState, useEffect, useCallback, forwardRef } from 'react';\n\nimport classNames from 'classnames';\n\nimport { AnimatedNumber } from './animated_number';\nimport type { IconProp } from './icon';\nimport { Icon } from './icon';\n\ninterface Props {\n  className?: string;\n  title: string;\n  icon: string;\n  iconComponent: IconProp;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  onMouseDown?: React.MouseEventHandler<HTMLButtonElement>;\n  onKeyDown?: React.KeyboardEventHandler<HTMLButtonElement>;\n  onKeyPress?: React.KeyboardEventHandler<HTMLButtonElement>;\n  active?: boolean;\n  expanded?: boolean;\n  style?: React.CSSProperties;\n  activeStyle?: React.CSSProperties;\n  disabled?: boolean;\n  inverted?: boolean;\n  animate?: boolean;\n  overlay?: boolean;\n  tabIndex?: number;\n  counter?: number;\n  href?: string;\n  ariaHidden?: boolean;\n  ariaControls?: string;\n}\n\nexport const IconButton = forwardRef<HTMLButtonElement, Props>(\n  (\n    {\n      className,\n      expanded,\n      icon,\n      iconComponent,\n      inverted,\n      title,\n      counter,\n      href,\n      style,\n      activeStyle,\n      onClick,\n      onKeyDown,\n      onKeyPress,\n      onMouseDown,\n      active = false,\n      disabled = false,\n      animate = false,\n      overlay = false,\n      tabIndex = 0,\n      ariaHidden = false,\n      ariaControls,\n    },\n    buttonRef,\n  ) => {\n    const [activate, setActivate] = useState(false);\n    const [deactivate, setDeactivate] = useState(false);\n\n    useEffect(() => {\n      if (!animate) {\n        return;\n      }\n\n      if (activate && !active) {\n        setActivate(false);\n        setDeactivate(true);\n      } else if (!activate && active) {\n        setActivate(true);\n        setDeactivate(false);\n      }\n    }, [setActivate, setDeactivate, animate, active, activate]);\n\n    const handleClick: React.MouseEventHandler<HTMLButtonElement> = useCallback(\n      (e) => {\n        e.preventDefault();\n\n        if (!disabled) {\n          onClick?.(e);\n        }\n      },\n      [disabled, onClick],\n    );\n\n    const handleKeyPress: React.KeyboardEventHandler<HTMLButtonElement> =\n      useCallback(\n        (e) => {\n          if (!disabled) {\n            onKeyPress?.(e);\n          }\n        },\n        [disabled, onKeyPress],\n      );\n\n    const handleMouseDown: React.MouseEventHandler<HTMLButtonElement> =\n      useCallback(\n        (e) => {\n          if (!disabled) {\n            onMouseDown?.(e);\n          }\n        },\n        [disabled, onMouseDown],\n      );\n\n    const handleKeyDown: React.KeyboardEventHandler<HTMLButtonElement> =\n      useCallback(\n        (e) => {\n          if (!disabled) {\n            onKeyDown?.(e);\n          }\n        },\n        [disabled, onKeyDown],\n      );\n\n    const buttonStyle = {\n      ...style,\n      ...(active ? activeStyle : {}),\n    };\n\n    const classes = classNames(className, 'icon-button', {\n      active,\n      disabled,\n      inverted,\n      activate,\n      deactivate,\n      overlayed: overlay,\n      'icon-button--with-counter': typeof counter !== 'undefined',\n    });\n\n    let contents = (\n      <>\n        <Icon id={icon} icon={iconComponent} aria-hidden='true' />{' '}\n        {typeof counter !== 'undefined' && (\n          <span className='icon-button__counter'>\n            <AnimatedNumber value={counter} />\n          </span>\n        )}\n      </>\n    );\n\n    if (href != null) {\n      contents = (\n        <a href={href} target='_blank' rel='noopener noreferrer'>\n          {contents}\n        </a>\n      );\n    }\n\n    return (\n      <button\n        type='button'\n        aria-label={title}\n        aria-expanded={expanded}\n        aria-hidden={ariaHidden}\n        aria-controls={ariaControls}\n        title={title}\n        className={classes}\n        onClick={handleClick}\n        onMouseDown={handleMouseDown}\n        onKeyDown={handleKeyDown}\n        onKeyPress={handleKeyPress} // eslint-disable-line @typescript-eslint/no-deprecated\n        style={buttonStyle}\n        tabIndex={tabIndex}\n        disabled={disabled}\n        ref={buttonRef}\n      >\n        {contents}\n      </button>\n    );\n  },\n);\n\nIconButton.displayName = 'IconButton';\n","import PropTypes from 'prop-types';\n\nimport { __RouterContext } from 'react-router';\n\nimport hoistStatics from 'hoist-non-react-statics';\n\nexport const WithRouterPropTypes = {\n  match: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n};\n\nexport const WithOptionalRouterPropTypes = {\n  match: PropTypes.object,\n  location: PropTypes.object,\n  history: PropTypes.object,\n};\n\nexport interface OptionalRouterProps {\n  ref: unknown;\n  wrappedComponentRef: unknown;\n}\n\n// This is copied from https://github.com/remix-run/react-router/blob/v5.3.4/packages/react-router/modules/withRouter.js\n// but does not fail if called outside of a React Router context\nexport function withOptionalRouter<\n  ComponentType extends React.ComponentType<OptionalRouterProps>,\n>(Component: ComponentType) {\n  const displayName = `withRouter(${Component.displayName ?? Component.name})`;\n  const C = (props: React.ComponentProps<ComponentType>) => {\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    return (\n      <__RouterContext.Consumer>\n        {(context) => {\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n          if (context) {\n            return (\n              // @ts-expect-error - Dynamic covariant generic components are tough to type.\n              <Component\n                {...remainingProps}\n                {...context}\n                ref={wrappedComponentRef}\n              />\n            );\n          } else {\n            // @ts-expect-error - Dynamic covariant generic components are tough to type.\n            return <Component {...remainingProps} ref={wrappedComponentRef} />;\n          }\n        }}\n      </__RouterContext.Consumer>\n    );\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n  C.propTypes = {\n    ...Component.propTypes,\n    wrappedComponentRef: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.func,\n      PropTypes.object,\n    ]),\n  };\n\n  return hoistStatics(C, Component);\n}\n","/**\n * This is a straight rip-off of the React.js ReactPropTypes.js proptype validators,\n * modified to make it possible to validate Immutable.js data.\n *     ImmutableTypes.listOf is patterned after React.PropTypes.arrayOf, but for Immutable.List\n *     ImmutableTypes.shape  is based on React.PropTypes.shape, but for any Immutable.Iterable\n */\n\"use strict\";\n\nvar Immutable = require(\"immutable\");\n\nvar ANONYMOUS = \"<<anonymous>>\";\n\nvar ImmutablePropTypes;\n\nif (process.env.NODE_ENV !== \"production\") {\n  ImmutablePropTypes = {\n    listOf: createListOfTypeChecker,\n    mapOf: createMapOfTypeChecker,\n    orderedMapOf: createOrderedMapOfTypeChecker,\n    setOf: createSetOfTypeChecker,\n    orderedSetOf: createOrderedSetOfTypeChecker,\n    stackOf: createStackOfTypeChecker,\n    iterableOf: createIterableOfTypeChecker,\n    recordOf: createRecordOfTypeChecker,\n    shape: createShapeChecker,\n    contains: createShapeChecker,\n    mapContains: createMapContainsChecker,\n    orderedMapContains: createOrderedMapContainsChecker,\n    // Primitive Types\n    list: createImmutableTypeChecker(\"List\", Immutable.List.isList),\n    map: createImmutableTypeChecker(\"Map\", Immutable.Map.isMap),\n    orderedMap: createImmutableTypeChecker(\"OrderedMap\", Immutable.OrderedMap.isOrderedMap),\n    set: createImmutableTypeChecker(\"Set\", Immutable.Set.isSet),\n    orderedSet: createImmutableTypeChecker(\"OrderedSet\", Immutable.OrderedSet.isOrderedSet),\n    stack: createImmutableTypeChecker(\"Stack\", Immutable.Stack.isStack),\n    seq: createImmutableTypeChecker(\"Seq\", Immutable.Seq.isSeq),\n    record: createImmutableTypeChecker(\"Record\", function (isRecord) {\n      return isRecord instanceof Immutable.Record;\n    }),\n    iterable: createImmutableTypeChecker(\"Iterable\", Immutable.Iterable.isIterable)\n  };\n} else {\n  var productionTypeChecker = function productionTypeChecker() {\n    invariant(false, \"ImmutablePropTypes type checking code is stripped in production.\");\n  };\n  productionTypeChecker.isRequired = productionTypeChecker;\n  var getProductionTypeChecker = function getProductionTypeChecker() {\n    return productionTypeChecker;\n  };\n\n  ImmutablePropTypes = {\n    listOf: getProductionTypeChecker,\n    mapOf: getProductionTypeChecker,\n    orderedMapOf: getProductionTypeChecker,\n    setOf: getProductionTypeChecker,\n    orderedSetOf: getProductionTypeChecker,\n    stackOf: getProductionTypeChecker,\n    iterableOf: getProductionTypeChecker,\n    recordOf: getProductionTypeChecker,\n    shape: getProductionTypeChecker,\n    contains: getProductionTypeChecker,\n    mapContains: getProductionTypeChecker,\n    orderedMapContains: getProductionTypeChecker,\n    // Primitive Types\n    list: productionTypeChecker,\n    map: productionTypeChecker,\n    orderedMap: productionTypeChecker,\n    set: productionTypeChecker,\n    orderedSet: productionTypeChecker,\n    stack: productionTypeChecker,\n    seq: productionTypeChecker,\n    record: productionTypeChecker,\n    iterable: productionTypeChecker\n  };\n}\n\nImmutablePropTypes.iterable.indexed = createIterableSubclassTypeChecker(\"Indexed\", Immutable.Iterable.isIndexed);\nImmutablePropTypes.iterable.keyed = createIterableSubclassTypeChecker(\"Keyed\", Immutable.Iterable.isKeyed);\n\nfunction getPropType(propValue) {\n  var propType = typeof propValue;\n  if (Array.isArray(propValue)) {\n    return \"array\";\n  }\n  if (propValue instanceof RegExp) {\n    // Old webkits (at least until Android 4.0) return 'function' rather than\n    // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n    // passes PropTypes.object.\n    return \"object\";\n  }\n  if (propValue instanceof Immutable.Iterable) {\n    return \"Immutable.\" + propValue.toSource().split(\" \")[0];\n  }\n  return propType;\n}\n\nfunction createChainableTypeChecker(validate) {\n  function checkType(isRequired, props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 6 ? _len - 6 : 0), _key = 6; _key < _len; _key++) {\n      rest[_key - 6] = arguments[_key];\n    }\n\n    propFullName = propFullName || propName;\n    componentName = componentName || ANONYMOUS;\n    if (props[propName] == null) {\n      var locationName = location;\n      if (isRequired) {\n        return new Error(\"Required \" + locationName + \" `\" + propFullName + \"` was not specified in \" + (\"`\" + componentName + \"`.\"));\n      }\n    } else {\n      return validate.apply(undefined, [props, propName, componentName, location, propFullName].concat(rest));\n    }\n  }\n\n  var chainedCheckType = checkType.bind(null, false);\n  chainedCheckType.isRequired = checkType.bind(null, true);\n\n  return chainedCheckType;\n}\n\nfunction createImmutableTypeChecker(immutableClassName, immutableClassTypeValidator) {\n  function validate(props, propName, componentName, location, propFullName) {\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var propType = getPropType(propValue);\n      return new Error(\"Invalid \" + location + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected `\" + immutableClassName + \"`.\"));\n    }\n    return null;\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createIterableSubclassTypeChecker(subclassName, validator) {\n  return createImmutableTypeChecker(\"Iterable.\" + subclassName, function (propValue) {\n    return Immutable.Iterable.isIterable(propValue) && validator(propValue);\n  });\n}\n\nfunction createIterableTypeChecker(typeChecker, immutableClassName, immutableClassTypeValidator) {\n\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var locationName = location;\n      var propType = getPropType(propValue);\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type \" + (\"`\" + propType + \"` supplied to `\" + componentName + \"`, expected an Immutable.js \" + immutableClassName + \".\"));\n    }\n\n    if (typeof typeChecker !== \"function\") {\n      return new Error(\"Invalid typeChecker supplied to `\" + componentName + \"` \" + (\"for propType `\" + propFullName + \"`, expected a function.\"));\n    }\n\n    var propValues = propValue.valueSeq().toArray();\n    for (var i = 0, len = propValues.length; i < len; i++) {\n      var error = typeChecker.apply(undefined, [propValues, i, componentName, location, \"\" + propFullName + \"[\" + i + \"]\"].concat(rest));\n      if (error instanceof Error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createKeysTypeChecker(typeChecker) {\n\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (typeof typeChecker !== \"function\") {\n      return new Error(\"Invalid keysTypeChecker (optional second argument) supplied to `\" + componentName + \"` \" + (\"for propType `\" + propFullName + \"`, expected a function.\"));\n    }\n\n    var keys = propValue.keySeq().toArray();\n    for (var i = 0, len = keys.length; i < len; i++) {\n      var error = typeChecker.apply(undefined, [keys, i, componentName, location, \"\" + propFullName + \" -> key(\" + keys[i] + \")\"].concat(rest));\n      if (error instanceof Error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createListOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"List\", Immutable.List.isList);\n}\n\nfunction createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, immutableClassName, immutableClassTypeValidator) {\n  function validate() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return createIterableTypeChecker(valuesTypeChecker, immutableClassName, immutableClassTypeValidator).apply(undefined, args) || keysTypeChecker && createKeysTypeChecker(keysTypeChecker).apply(undefined, args);\n  }\n\n  return createChainableTypeChecker(validate);\n}\n\nfunction createMapOfTypeChecker(valuesTypeChecker, keysTypeChecker) {\n  return createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, \"Map\", Immutable.Map.isMap);\n}\n\nfunction createOrderedMapOfTypeChecker(valuesTypeChecker, keysTypeChecker) {\n  return createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, \"OrderedMap\", Immutable.OrderedMap.isOrderedMap);\n}\n\nfunction createSetOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Set\", Immutable.Set.isSet);\n}\n\nfunction createOrderedSetOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"OrderedSet\", Immutable.OrderedSet.isOrderedSet);\n}\n\nfunction createStackOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Stack\", Immutable.Stack.isStack);\n}\n\nfunction createIterableOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Iterable\", Immutable.Iterable.isIterable);\n}\n\nfunction createRecordOfTypeChecker(recordKeys) {\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (!(propValue instanceof Immutable.Record)) {\n      var propType = getPropType(propValue);\n      var locationName = location;\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected an Immutable.js Record.\"));\n    }\n    for (var key in recordKeys) {\n      var checker = recordKeys[key];\n      if (!checker) {\n        continue;\n      }\n      var mutablePropValue = propValue.toObject();\n      var error = checker.apply(undefined, [mutablePropValue, key, componentName, location, \"\" + propFullName + \".\" + key].concat(rest));\n      if (error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\n// there is some irony in the fact that shapeTypes is a standard hash and not an immutable collection\nfunction createShapeTypeChecker(shapeTypes) {\n  var immutableClassName = arguments[1] === undefined ? \"Iterable\" : arguments[1];\n  var immutableClassTypeValidator = arguments[2] === undefined ? Immutable.Iterable.isIterable : arguments[2];\n\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var propType = getPropType(propValue);\n      var locationName = location;\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected an Immutable.js \" + immutableClassName + \".\"));\n    }\n    var mutablePropValue = propValue.toObject();\n    for (var key in shapeTypes) {\n      var checker = shapeTypes[key];\n      if (!checker) {\n        continue;\n      }\n      var error = checker.apply(undefined, [mutablePropValue, key, componentName, location, \"\" + propFullName + \".\" + key].concat(rest));\n      if (error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createShapeChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes);\n}\n\nfunction createMapContainsChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes, \"Map\", Immutable.Map.isMap);\n}\n\nfunction createOrderedMapContainsChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes, \"OrderedMap\", Immutable.OrderedMap.isOrderedMap);\n}\n\nmodule.exports = ImmutablePropTypes;","import React from 'react';\nimport { is } from 'immutable';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nvar NOT_SET = {};\nfunction isMapLike(collection) {\n  return collection !== null && _typeof(collection) === 'object' && typeof collection.get === 'function' && typeof collection.has === 'function';\n}\n\nfunction isInvalid(collection) {\n  return collection === null || collection === undefined;\n}\n\nfunction get(collection, key, notSetValue) {\n  if (isInvalid(collection)) {\n    return notSetValue;\n  }\n\n  if (isMapLike(collection)) {\n    return collection.has(key) ? collection.get(key) : notSetValue;\n  }\n\n  return hasOwnProperty.call(collection, key) ? collection[key] : notSetValue;\n}\nfunction getIn(collection, keyPath, notSetValue) {\n  var i = 0;\n\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n\n  return collection;\n}\n\nfunction check(config) {\n  var prev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var next = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var checkItem = createChecker(prev, next);\n  var checklist = config || Object.keys(_objectSpread2({}, next, {}, prev));\n  return checklist.every(checkItem);\n}\n\nfunction createChecker(prev, next) {\n  return function (name) {\n    if (typeof name === 'string') {\n      return is(next[name], prev[name]);\n    } else if (Array.isArray(name)) {\n      return is(getIn(next, name), getIn(prev, name));\n    }\n\n    throw new TypeError('Invalid key: expected Array or string: ' + name);\n  };\n}\n\nvar ImmutablePureComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ImmutablePureComponent, _React$Component);\n\n  function ImmutablePureComponent() {\n    _classCallCheck(this, ImmutablePureComponent);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ImmutablePureComponent).apply(this, arguments));\n  }\n\n  _createClass(ImmutablePureComponent, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var nextState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return !check(this.updateOnProps, this.props, nextProps, 'updateOnProps') || !check(this.updateOnStates, this.state, nextState, 'updateOnStates');\n    }\n  }]);\n\n  return ImmutablePureComponent;\n}(React.Component);\n\nfunction immutableMemo(Component, updateOnProps) {\n  return React.memo(Component, function (prev, next) {\n    return check(updateOnProps, prev, next, 'immutableMemo');\n  });\n}\n\nexport default ImmutablePureComponent;\nexport { ImmutablePureComponent, immutableMemo };\n","import * as React from \"react\";\nconst SvgChevronRight = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z\" }));\nexport default SvgChevronRight;\n","import { useRef, useCallback } from 'react';\n\ntype Position = [number, number];\n\nexport const useSelectableClick = (\n  onClick: React.MouseEventHandler,\n  maxDelta = 5,\n) => {\n  const clickPositionRef = useRef<Position | null>(null);\n\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    clickPositionRef.current = [e.clientX, e.clientY];\n  }, []);\n\n  const handleMouseUp = useCallback(\n    (e: React.MouseEvent) => {\n      if (!clickPositionRef.current) {\n        return;\n      }\n\n      const [startX, startY] = clickPositionRef.current;\n      const [deltaX, deltaY] = [\n        Math.abs(e.clientX - startX),\n        Math.abs(e.clientY - startY),\n      ];\n\n      let element: EventTarget | null = e.target;\n\n      while (element && element instanceof HTMLElement) {\n        if (\n          element.localName === 'button' ||\n          element.localName === 'a' ||\n          element.localName === 'label'\n        ) {\n          return;\n        }\n\n        element = element.parentNode;\n      }\n\n      if (\n        deltaX + deltaY < maxDelta &&\n        (e.button === 0 || e.button === 1) &&\n        e.detail >= 1\n      ) {\n        onClick(e);\n      }\n\n      clickPositionRef.current = null;\n    },\n    [maxDelta, onClick],\n  );\n\n  return [handleMouseDown, handleMouseUp] as const;\n};\n"],"names":["updateQueue","makeQueue","raf","fn","schedule","writeQueue","onStartQueue","onFrameQueue","onFinishQueue","timeouts","handler","ms","time","cancel","t","pendingCount","timeout","findTimeout","start","sync","lastArgs","queuedFn","throttled","args","nativeRaf","impl","update","ts","queue","loop","stop","prevTs","count","eachSafely","next","current","arg","values","each","value","e","__defProp","__export","target","all","name","globals_exports","assign","colors","createStringInterpolator","skipAnimation","to","willAdvance","noop","defineHidden","obj","key","is","a","isEqual","b","i","eachProp","ctx","toArray","flush","iterator","items","flushCalls","isSSR","globals","startQueue","currentFrame","prevFrame","priority","frameLoop","animation","raf2","flushStartQueue","startSafely","advance","prevIndex","startUnsafely","findIndex","other","dt","nextFrame","arr","test","index","colors2","NUMBER","PERCENTAGE","call","parts","rgb","rgba","hsl","hsla","hex3","hex4","hex6","hex8","normalizeColor","color","match","parse255","parse1","hslToRgb","parse360","parsePercentage","hue2rgb","p","q","h","s","l","r","g","str","int","num","colorToRgba","input","int32Color","createInterpolator","range","output","extrapolate","config","outputRange","inputRange","extrapolateLeft","extrapolateRight","easing","range2","findRange","interpolate","inputMin","inputMax","outputMin","outputMax","map","result","easings","x","$get","$observers","hasFluidValue","getFluidValue","getFluidObservers","callFluidObserver","observer2","event","callFluidObservers","observers","FluidValue","get","setFluidGetter","setHidden","addFluidObserver","removeFluidObserver","numberRegex","colorRegex","unitRegex","rgbaRegex","cssVariableRegex","variableToRgba","token","fallback","parseCSSVariable","value2","namedColorRegex","rgbaRound","_","p1","p2","p3","p4","createStringInterpolator2","keyframes","interpolators","output2","missingUnit","_a","prefix","once","func","called","warnInterpolate","deprecateInterpolate","warnDirectCall","deprecateDirectCall","isAnimatedString","useIsomorphicLayoutEffect","useEffect","useLayoutEffect","useIsMounted","isMounted","useRef2","useForceUpdate","useState","useMemoOne","getResult","inputs","initial","useState2","committed","useRef3","prevCache","cache","areInputsEqual","useEffect2","prev","useOnce","effect","useEffect3","emptyDeps","usePrev","prevRef","useRef4","useEffect4","$node","isAnimated","getAnimated","owner","setAnimated","node","getPayload","Animated","AnimatedValue","_value","step","done","AnimatedString","is2","goal","TreeContext","AnimatedObject","source","animated","payload","AnimatedArray","makeAnimated","getAnimatedType","parentNode","is3","isAnimatedString2","withAnimated","Component","host","hasInstance","is4","forwardRef","givenProps","givenRef","instanceRef","useRef","ref","useCallback","updateRef","props","deps","getAnimatedState","forceUpdate","callback","instance","observer","PropsObserver","observerRef","each2","dep","usedProps","React.createElement","dependencies","cacheKey","createHost","components","applyAnimatedValues","createAnimatedStyle","style","getComponentProps","hostConfig","displayName","getDisplayName","is5","eachProp2","callProp","matchProp","resolveProp","prop","getDefaultProp","noopTransform","getDefaultProps","transform","keys","DEFAULT_PROPS","defaults2","RESERVED_PROPS","getForwardProps","forward","inferTo","to2","out","val","computeGoal","G","hasProps","isAsyncTo","detachRefs","ctrl","replaceRef","defaults","AnimationConfig","mergeConfig","config2","newConfig","defaultConfig","sanitizeConfig","frequency","damping","mass","isTensionConfig","emptyArray","Animation","scheduleProps","callId","defaultProps","state","actions","resolve","reject","delay","onStart","pause","onResume","onPause","G2","err","getCombinedResult","results","getCancelledResult","getNoopResult","getFinishedResult","finished","cancelled","runAsync","parentId","onRest","prevTo","prevPromise","preventBail","bail","bailPromise","bailIfEnded","bailSignal","bailResult","animate","arg1","arg2","BailSignal","skipAnimationSignal","SkipAnimationSignal","G3","stopAsync","props2","result2","resume","animating","cancelId","isFrameValue","FrameValue","nextId","FluidValue2","G4","idle","$P","HAS_ANIMATED","IS_ANIMATING","IS_PAUSED","hasAnimated","isAnimating","isPaused","setActiveBit","active","setPausedBit","paused","SpringValue","getFluidValue2","getAnimated2","node2","changed","anim","toValues","toArray2","position","elapsed","from","v0","velocity","precision","decay","restVelocity","bounceFactor","canBounce","isGrowing","isMoving","isBouncing","numSteps","n","springForce","dampingForce","acceleration","currVal","finalVal","raf3","isLoop","mergeActiveFn","sendEvent","checkFinished","nextProps","createLoopUpdate","hasToProp","hasFromProp","prevFrom","hasFromChanged","hasToChanged","hasAsyncTo","reset","isAnimatable","immediate","nodeType","goalType","started","hasValueChanged","ACTIVE_EVENTS","type","oldNode","G5","frameLoop2","callFluidObservers2","loopRet","overrides","reverse","createUpdate","findDefined","declareUpdate","update2","eachProp3","_b","_d","_c","BATCHED_EVENTS","nextId2","Controller","flush3","spring","item","is6","toArray3","prepareKeys","flushUpdateQueue","springs","each3","eachProp4","onChange","flush2","onStart2","onChange2","onRest2","raf4","flushUpdate","onResolve","asyncTo","flushCalls2","promises","getSprings","prepareSprings","createSpring","setSprings","addFluidObserver2","create","SpringContext","children","inherited","useContext","Provider","makeContext","init","React.createContext","SpringRef","SpringRef2","each4","is7","_getProps","useSprings","length","propsFn","is8","useMemo","layoutId","updates2","springs2","ctrls","updates","prevLength","each5","declareUpdates","startIndex","endIndex","context","useContext2","prevContext","hasContext","useIsomorphicLayoutEffect2","cb","useSpring","isFn","is9","useTransition","data","is11","sort","trail","expires","exitBeforeEnter","onDestroyed","propsRef","propsConfig","useMemo2","toArray4","transitions","usedTransitions","prevTransitions","useIsomorphicLayoutEffect4","useOnce3","each7","getKeys","expired","reused","leave","keyIndex","useForceUpdate2","changes","exitingTransitions","forceChange","prevPhase","phase","propsDelay","isLeave","transitions2","t2","t3","expiry","expiryMs","useContext3","usePrev2","ind","renderTransitions","render","React2.createElement","React2.Fragment","elem","nextKey","Interpolation","getAnimatedType2","setAnimated2","_dt","oldValue","isEqual2","getAnimated3","checkIdle","becomeIdle","is14","getFluidValue3","toArray5","each10","getPayload2","G6","raf5","frameLoop3","hasFluidValue2","addFluidObserver3","removeFluidObserver2","highest","parent","isIdle","self","callFluidObservers3","Globals","isCustomPropRE","dangerousStyleValue","isUnitlessNumber","attributeCache","isFilterElement","className","scrollTop","scrollLeft","viewBox","attributes","names","prefixKey","prefixes","acc","domTransforms","pxTransforms","degTransforms","addUnit","unit","isValueIdentity","id","v","AnimatedStyle","y","z","transforms","xyz","x2","y2","z2","deg","FluidTransform","identity","primitives","unstable_batchedUpdates","unescapeHTML","html","wrapper","document","createElement","innerHTML","replace","textContent","requestNotificationPermission","Notification","requestPermission","error","console","warn","w","matchMedia","passiveOptionAccessed","options","supportsPassiveEvents","onTouchStartInWindow","touchEventInWindow","supportsTouchEvents","userAgent","isIPad","LAYOUT_BREAKPOINT","isMobile","width","transientSingleColumn","forceSingleColumn","hasMultiColumnPath","layoutFromWindow","window","innerWidth","listenerOptions","passive","userTouching","touchListener","removeEventListener","addEventListener","isUserTouching","browserHistory","createBrowserHistory","originalPush","push","bind","originalReplace","useAppHistory","useHistory","normalizePath","path","location","pathname","undefined","isDevelopment","log","startsWith","fromMastodon","Router","jsx","OriginalRouter","debounceWithDispatchAndArguments","argumentBuffer","dispatchBuffer","wrapped","debounce","tmpBuffer","dispatch","formatProdErrorMessage","code","$$observable","symbol_observable_default","randomString","ActionTypes","actionTypes_default","isPlainObject","proto","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","listenerIdCounter","isDispatching","ensureCanMutateNextListeners","listener","getState","subscribe","isSubscribed","listenerId","action","replaceReducer","nextReducer","observable","outerSubscribe","observeState","observerAsObserver","assertReducerShape","reducers","combineReducers","reducerKeys","finalReducers","finalReducerKeys","shapeAssertionError","hasChanged","nextState","previousStateForKey","nextStateForKey","compose","funcs","applyMiddleware","middlewares","createStore2","store","middlewareAPI","chain","middleware","isAction","NOTHING","DRAFTABLE","DRAFT_STATE","die","getPrototypeOf","isDraft","isDraftable","isMap","isSet","objectCtorString","Ctor","iter","getArchtype","entry","thing","has","set","propOrOldValue","latest","shallowCopy","base","strict","isPlain","descriptors","desc","freeze","deep","isFrozen","dontMutateFrozenCollections","plugins","getPlugin","pluginKey","plugin","currentScope","getCurrentScope","createScope","parent_","immer_","usePatchesInScope","scope","patchListener","revokeScope","leaveScope","revokeDraft","enterScope","immer2","draft","processResult","baseDraft","finalize","maybeFreeze","rootScope","childValue","finalizeProperty","resultEach","isSet2","parentState","targetObject","rootPath","targetIsSet","res","createProxyProxy","isArray","traps","objectTraps","arrayTraps","revoke","proxy","readPropFromProto","peek","prepareCopy","createProxy","getDescriptorFromProto","current2","markChanged","Immer2","recipe","defaultBase","base2","hasError","ip","patches","inversePatches","patch","applyPatchesImpl","currentImpl","copy","immer","produce","assertIsFunction","errorMessage","assertIsObject","object","assertIsArrayOfFunctions","array","itemTypes","ensureIsArray","getDependencies","createSelectorArgs","collectInputSelectorResults","inputSelectorArgs","inputSelectorResults","StrongRef","Ref","UNTERMINATED","TERMINATED","createCacheNode","weakMapMemoize","fnNode","resultEqualityCheck","lastResult","resultsCount","memoized","cacheNode","objectCache","objectNode","primitiveCache","primitiveNode","terminatedNode","lastResultValue","createSelectorCreator","memoizeOrOptions","memoizeOptionsFromArgs","createSelectorCreatorOptions","createSelector2","recomputations","dependencyRecomputations","directlyPassedOptions","resultFunc","combinedOptions","memoize","memoizeOptions","argsMemoize","argsMemoizeOptions","finalMemoizeOptions","finalArgsMemoizeOptions","memoizedResultFunc","selector","createSelector","createStructuredSelector","inputSelectorsObject","selectorCreator","inputSelectorKeys","composition","createThunkMiddleware","extraArgument","thunk","withExtraArgument","composeWithDevTools","hasMatchFunction","createAction","prepareAction","actionCreator","prepared","Tuple","_Tuple","freezeDraftable","createNextState","isBoolean","buildGetDefaultMiddleware","immutableCheck","serializableCheck","actionCreatorCheck","middlewareArray","thunkMiddleware","SHOULD_AUTOBATCH","createQueueWithTimer","notify","autoBatchEnhancer","notifying","shouldNotifyAtEndOfTick","notificationQueued","listeners","queueCallback","notifyListeners","listener2","wrappedListener","unsubscribe","buildGetDefaultEnhancers","middlewareEnhancer","autoBatch","enhancerArray","configureStore","getDefaultMiddleware","devTools","enhancers","rootReducer","isPlainObject2","finalMiddleware","finalCompose","compose2","getDefaultEnhancers","storeEnhancers","composedEnhancer","executeReducerBuilderCallback","builderCallback","actionsMap","actionMatchers","defaultCaseReducer","builder","typeOrActionCreator","matcher","isStateFunction","createReducer","initialState","mapOrBuilderCallback","finalActionMatchers","finalDefaultCaseReducer","getInitialState","frozenInitialState","caseReducers","reducer2","cr","previousState","caseReducer","isDraft2","isDraftable2","createNextState2","matches","isAnyOf","matchers","isAllOf","hasExpectedRequestMetadata","validStatus","hasValidRequestId","hasValidRequestStatus","isAsyncThunkArray","isPending","asyncThunks","asyncThunk","isRejected","isRejectedWithValue","hasFlag","isFulfilled","isAsyncThunkAction","urlAlphabet","nanoid","size","commonProperties","RejectWithValue","meta","__publicField","FulfillWithMeta","miniSerializeError","simpleError","property","externalAbortMessage","createAsyncThunk","createAsyncThunk2","typePrefix","payloadCreator","fulfilled","requestId","pending","rejected","signal","extra","abortController","abortHandler","abortReason","abort","reason","promise","finalAction","conditionResult","isThenable","abortedPromise","unwrapResult","apiSubmitAccountNote","apiRequestPost","comment","apiFollowAccount","params","apiRemoveAccountFromFollowers","apiGetFeaturedTags","apiRequestGet","apiGetEndorsedAccounts","apiGetFamiliarFollowers","React","require$$0","objectIs","useSyncExternalStore","useDebugValue","useSyncExternalStoreWithSelector_production","getSnapshot","getServerSnapshot","instRef","inst","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","IS_REACT_19","React.version","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_CONSUMER_TYPE","REACT_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","ForwardRef","Memo","typeOf","$$typeof","isMemo","pureFinalPropsSelectorFactory","mapStateToProps","mapDispatchToProps","mergeProps","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","hasRunAtLeastOnce","ownProps","stateProps","dispatchProps","mergedProps","handleFirstCall","firstState","firstOwnProps","handleNewPropsAndNewState","handleNewProps","handleNewState","nextStateProps","statePropsChanged","handleSubsequentCalls","nextOwnProps","propsChanged","stateChanged","finalPropsSelectorFactory","initMapStateToProps","initMapDispatchToProps","initMergeProps","bindActionCreators","actionCreators","boundActionCreators","wrapMapToPropsConstant","getConstant","constant","constantSelector","getDependsOnOwnProps","mapToProps","wrapMapToPropsFunc","methodName","stateOrDispatch","createInvalidArgFactory","mapDispatchToPropsFactory","mapStateToPropsFactory","defaultMergeProps","wrapMergePropsFunc","areMergedPropsEqual","hasRunOnce","nextMergedProps","mergePropsFactory","defaultNoopBatch","createListenerCollection","first","last","nullListeners","createSubscription","parentSub","subscriptionsAmount","selfSubscribed","addNestedSub","trySubscribe","cleanupListener","removed","tryUnsubscribe","notifyNestedSubs","handleChangeWrapper","subscription","trySubscribeSelf","tryUnsubscribeSelf","canUseDOM","isDOM","isRunningInReactNative","isReactNative","getUseIsomorphicLayoutEffect","React.useLayoutEffect","React.useEffect","shallowEqual","objA","objB","keysA","keysB","REACT_STATICS","KNOWN_STATICS","FORWARD_REF_STATICS","MEMO_STATICS","TYPE_STATICS","getStatics","component","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","inheritedComponent","targetStatics","sourceStatics","descriptor","ContextKey","gT","getContext","contextMap","realContext","ReactReduxContext","NO_SUBSCRIPTION_ARRAY","useIsomorphicLayoutEffectWithArgs","effectFunc","effectArgs","captureWrapperProps","lastWrapperProps","lastChildProps","renderIsScheduled","wrapperProps","childPropsFromStoreUpdate","subscribeUpdates","shouldHandleStateChanges","childPropsSelector","additionalSubscribeListener","didUnsubscribe","lastThrownError","checkForUpdates","latestStoreState","newChildProps","strictEqual","connect","pure","Context","WrappedComponent","wrappedComponentName","selectorFactoryOptions","ConnectFunction","propsContext","reactReduxForwardedRef","React.useMemo","reactReduxForwardedRef2","wrapperProps2","ContextToUse","ResultContext","contextValue","React.useContext","didStoreComeFromProps","didStoreComeFromContext","getServerState","subscription2","notifyNestedSubs2","overriddenContextValue","React.useRef","latestSubscriptionCallbackError","actualChildPropsSelector","subscribeForReact","reactListener","actualChildProps","React.useSyncExternalStore","renderedWrappedComponent","Connect","React.memo","forwarded","React.forwardRef","connect_default","providerProps","serverState","Provider_default","createReduxContextHook","useReduxContext","createStoreHook","useReduxContext2","useStore2","useStore","createDispatchHook","useDispatch2","useDispatch","refEquality","createSelectorHook","useSelector2","equalityFnOrOptions","equalityFn","reduxContext","wrappedSelector","React.useCallback","selectedState","useSyncExternalStoreWithSelector","React.useDebugValue","useSelector","useAppDispatch","withTypes","useAppSelector","createAppAsyncThunk","createAppSelector","createBaseAsyncThunk","createThunk","creator","fulfillWithValue","rejectWithValue","useLoadingBar","getPendingMeta","condition","discardLoadDataInPayload","Symbol","createDataLoadingThunk","loadData","onDataOrThunkOptions","maybeThunkOptions","onData","thunkOptions","discardLoadData","actionArg","matchHtmlRegExp","escapeHtml_1","escapeHtml","string","escape","lastIndex","DELETE","SHIFT","SIZE","MASK","NOT_SET","MakeRef","SetRef","OwnerID","ensureSize","returnTrue","wrapIndex","uint32Index","wholeSlice","begin","end","isNeg","resolveBegin","resolveIndex","resolveEnd","defaultIndex","IS_COLLECTION_SYMBOL","isCollection","maybeCollection","IS_KEYED_SYMBOL","isKeyed","maybeKeyed","IS_INDEXED_SYMBOL","isIndexed","maybeIndexed","isAssociative","maybeAssociative","Collection","Seq","KeyedCollection","KeyedSeq","IndexedCollection","IndexedSeq","SetCollection","SetSeq","IS_SEQ_SYMBOL","isSeq","maybeSeq","IS_RECORD_SYMBOL","isRecord","maybeRecord","isImmutable","maybeImmutable","IS_ORDERED_SYMBOL","isOrdered","maybeOrdered","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","iteratorValue","k","iteratorResult","iteratorDone","hasIterator","maybeIterable","getIteratorFn","isIterator","maybeIterator","getIterator","iterable","iteratorFn","isEntriesIterable","isKeysIterable","hasOwnProperty","isArrayLike","emptySequence","seqFromValue","keyedSeqFromValue","indexedSeqFromValue","ArraySeq","notSetValue","ii","ObjectSeq","CollectionSeq","collection","iterations","EMPTY_SEQ","seq","maybeIndexedSeqFromValue","IS_MAP_SYMBOL","maybeMap","isOrderedMap","maybeOrderedMap","isValueObject","maybeValue","valueA","valueB","imul","c","d","smi","i32","defaultValueOf","hash","o","hashNullish","valueOf","hashNumber","STRING_HASH_CACHE_MIN_STRLEN","cachedHashString","hashString","hashJSObj","hashSymbol","nullish","hashed","stringHashCache","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","sym","symbolMap","nextHash","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","getIENodeHash","isExtensible","_objHashUID","ToKeyedSequence","indexed","useKeys","this$1$1","reversedSequence","reverseFactory","mapper","mappedSequence","mapFactory","ToIndexedSequence","ToSetSequence","FromEntriesSequence","entries","validateEntry","indexedCollection","cacheResultThrough","flipFactory","flipSequence","makeSequence","filterFactory","predicate","filterSequence","countByFactory","grouper","groups","Map","groupByFactory","isKeyedIter","OrderedMap","coerce","collectionClass","reify","partitionFactory","sliceFactory","originalSize","resolvedBegin","resolvedEnd","resolvedSize","sliceSize","sliceSeq","skipped","isSkipping","takeWhileFactory","takeSequence","iterating","skipWhileFactory","skipSequence","skipping","concatFactory","isKeyedCollection","iters","singleton","concatSeq","sum","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","stack","flatMapFactory","interposeFactory","separator","interposedSequence","sortFactory","comparator","defaultComparator","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","zipAll","zipSequence","sizes","iterators","isDone","steps","arrCopy","offset","len","newArr","invariant","assertNotInfinite","coerceKeyPath","keyPath","toString","parentProto","nextProto","isDataStructure","quoteString","remove","collectionCopy","updateIn$1","updater","updatedValue","updateInDeeply","inImmutable","existing","wasNotSet","existingValue","newValue","nextExisting","nextUpdated","emptyMap","setIn$1","setIn","removeIn","deleteIn","update$1","updateIn","merge$1","mergeIntoKeyedWith","mergeWith$1","merger","collections","collection$1","mergeIntoCollection","oldVal","merge","sources","mergeWithSources","mergeWith","mergeDeep$1","mergeDeepWithSources","mergeDeepWith$1","deepMergerWith","merged","mergeItem","hasVal","nextVal","deepMerger","areMergeable","oldDataStructure","newDataStructure","oldSeq","newSeq","mergeDeep","mergeDeepWith","mergeIn","m","mergeDeepIn","withMutations","mutable","asMutable","asImmutable","wasAltered","keyValues","updateMap","MapIterator","ownerID","makeMap","MapPrototype","ArrayMapNode","shift","keyHash","didChangeSize","didAlter","idx","exists","MAX_ARRAY_MAP_SIZE","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","nodes","bit","popCount","keyHashFrag","newNode","updateNode","MAX_BITMAP_INDEXED_SIZE","expandNodes","isLeafNode","newBitmap","newNodes","setAt","spliceOut","spliceIn","HashArrayMapNode","newCount","MIN_HASH_ARRAY_MAP_SIZE","packNodes","HashCollisionNode","mergeIntoNode","ValueNode","keyMatch","maxIndex","mapIteratorFrame","mapIteratorValue","subNode","root","EMPTY_MAP","newRoot","newSize","idx1","idx2","excluding","packedII","packedNodes","including","expandedNodes","canEdit","newArray","newLen","after","IS_LIST_SYMBOL","isList","maybeList","List","empty","emptyList","makeList","VNode","list","listNodeFor","updateList","oldSize","setListBounds","arguments$1","seqs","argument","iterateList","DONE","ListPrototype","level","originIndex","removingFirst","newChild","oldChild","editable","editableVNode","sizeIndex","left","right","tailPos","getTailOffset","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","origin","capacity","EMPTY_LIST","newTail","updateVNode","nodeHas","lowerNode","newLowerNode","rawIndex","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","emptyOrderedMap","updateOrderedMap","newMap","newList","makeOrderedMap","omap","EMPTY_ORDERED_MAP","IS_STACK_SYMBOL","isStack","maybeStack","Stack","emptyStack","head","makeStack","StackPrototype","EMPTY_STACK","IS_SET_SYMBOL","maybeSet","isOrderedSet","maybeOrderedSet","deepEqual","notAssociative","flipped","allEqual","bSize","mixin","ctor","methods","keyCopier","toJS","result$1","Set","emptySet","sets","SetPrototype","updateSet","didChanges","mapped","toRemove","OrderedSet","makeSet","EMPTY_SET","Range","EMPTY_RANGE","searchValue","possibleIndex","offsetValue","getIn$1","searchKeyPath","getIn","hasIn$1","hasIn","toObject","useTuples","returnValue","sideEffect","joined","isFirst","initialReduction","reduce","entriesSequence","entryMapper","not","found","searchKey","keyMapper","neg","defaultNegComparator","amount","hashCollection","CollectionPrototype","KeyedCollectionPrototype","removeNum","numArgs","spliced","zipped","interleaved","defaultZipper","IndexedCollectionPrototype","SetCollectionPrototype","reduction","useFirst","ordered","keyed","hashMerge","murmurHashOfSize","emptyOrderedSet","OrderedSetPrototype","makeOrderedSet","EMPTY_ORDERED_SET","PairSorting","throwOnInvalidDefaultValues","defaultValues","Record","hasInitialized","RecordType","indices","RecordTypePrototype","propName","recordName","setProp","RecordPrototype","recordSeq","newValues","makeRecord","likeRecord","record","prototype","Repeat","times","EMPTY_REPEAT","fromJS","converter","fromJSWith","defaultConverter","parentValue","converted","version","Immutable","Iterable","CustomEmojiFactory","ImmutableRecord","shortcode","static_url","url","category","visible_in_picker","makeEmojiMap","emojis","emoji","createPollOptionTranslationFromServerJSON","translation","emojiMap","titleHtml","emojify","escapeTextContentForBrowser","title","pollDefaultValues","multiple","voters_count","votes_count","voted","own_votes","createPollFromServerJSON","serverJSON","previousPoll","optionJSON","option","includes","prevOption","importAccounts","domParser","DOMParser","normalizeFilterResult","normalResult","filter","normalizeStatus","status","normalOldStatus","normalStatus","account","reblog","quote","quoted_status","quoted_status_id","poll","card","authors","author","accountId","filtered","content","spoiler_text","search_index","contentHtml","spoilerHtml","hidden","spoilerText","searchContent","concat","media_attachments","att","description","join","parseFromString","documentElement","expandSpoilers","sensitive","uri","forEach","remote_url","oldItem","find","normalizeStatusTranslation","detected_source_language","language","provider","normalizeAnnouncement","announcement","normalAnnouncement","importPolls","STATUS_IMPORT","STATUSES_IMPORT","FILTERS_IMPORT","pushUnique","every","element","importStatuses","statuses","importFilters","filters","importFetchedAccount","importFetchedAccounts","accounts","normalAccounts","processAccount","moved","importFetchedStatus","importFetchedStatuses","normalStatuses","polls","processStatus","revealAccount","actionWithSkipLoadingTrue","skipLoading","followAccountSuccess","unfollowAccountSuccess","authorizeFollowRequestSuccess","rejectFollowRequestSuccess","followAccountRequest","followAccountFail","unfollowAccountRequest","unfollowAccountFail","blockAccountSuccess","unblockAccountSuccess","muteAccountSuccess","unmuteAccountSuccess","pinAccountSuccess","unpinAccountSuccess","fetchRelationshipsSuccess","removeAccountFromFollowers","relationship","fetchEndorsedAccounts","ACCOUNT_FETCH_REQUEST","ACCOUNT_FETCH_SUCCESS","ACCOUNT_FETCH_FAIL","ACCOUNT_LOOKUP_REQUEST","ACCOUNT_LOOKUP_SUCCESS","ACCOUNT_LOOKUP_FAIL","ACCOUNT_BLOCK_REQUEST","ACCOUNT_BLOCK_FAIL","ACCOUNT_UNBLOCK_REQUEST","ACCOUNT_UNBLOCK_FAIL","ACCOUNT_MUTE_REQUEST","ACCOUNT_MUTE_FAIL","ACCOUNT_UNMUTE_REQUEST","ACCOUNT_UNMUTE_FAIL","ACCOUNT_PIN_REQUEST","ACCOUNT_PIN_FAIL","ACCOUNT_UNPIN_REQUEST","ACCOUNT_UNPIN_FAIL","FOLLOWERS_FETCH_REQUEST","FOLLOWERS_FETCH_SUCCESS","FOLLOWERS_FETCH_FAIL","FOLLOWERS_EXPAND_REQUEST","FOLLOWERS_EXPAND_SUCCESS","FOLLOWERS_EXPAND_FAIL","FOLLOWING_FETCH_REQUEST","FOLLOWING_FETCH_SUCCESS","FOLLOWING_FETCH_FAIL","FOLLOWING_EXPAND_REQUEST","FOLLOWING_EXPAND_SUCCESS","FOLLOWING_EXPAND_FAIL","RELATIONSHIPS_FETCH_REQUEST","RELATIONSHIPS_FETCH_FAIL","FOLLOW_REQUESTS_FETCH_REQUEST","FOLLOW_REQUESTS_FETCH_SUCCESS","FOLLOW_REQUESTS_FETCH_FAIL","FOLLOW_REQUESTS_EXPAND_REQUEST","FOLLOW_REQUESTS_EXPAND_SUCCESS","FOLLOW_REQUESTS_EXPAND_FAIL","FOLLOW_REQUEST_AUTHORIZE_REQUEST","FOLLOW_REQUEST_AUTHORIZE_FAIL","FOLLOW_REQUEST_REJECT_REQUEST","FOLLOW_REQUEST_REJECT_FAIL","fetchAccount","fetchRelationships","fetchAccountRequest","api","then","response","fetchAccountSuccess","catch","fetchAccountFail","lookupAccount","acct","lookupAccountRequest","lookupAccountSuccess","lookupAccountFail","skipAlert","followAccount","reblogs","alreadyFollowing","locked","post","unfollowAccount","blockAccount","blockAccountRequest","blockAccountFail","unblockAccount","unblockAccountRequest","unblockAccountFail","muteAccount","notifications","duration","muteAccountRequest","muteAccountFail","unmuteAccount","unmuteAccountRequest","unmuteAccountFail","fetchFollowers","fetchFollowersRequest","getLinks","refs","link","rel","fetchFollowersSuccess","fetchFollowersFail","skipNotFound","expandFollowers","expandFollowersRequest","expandFollowersSuccess","expandFollowersFail","fetchFollowing","fetchFollowingRequest","fetchFollowingSuccess","fetchFollowingFail","expandFollowing","expandFollowingRequest","expandFollowingSuccess","expandFollowingFail","debouncedFetchRelationships","newAccountIds","fetchRelationshipsRequest","relationships","fetchRelationshipsFail","accountIds","loadedRelationships","ids","fetchFollowRequests","fetchFollowRequestsRequest","fetchFollowRequestsSuccess","fetchFollowRequestsFail","expandFollowRequests","expandFollowRequestsRequest","expandFollowRequestsSuccess","expandFollowRequestsFail","authorizeFollowRequest","authorizeFollowRequestRequest","authorizeFollowRequestFail","rejectFollowRequest","rejectFollowRequestRequest","rejectFollowRequestFail","pinAccount","pinAccountRequest","me","pinAccountFail","unpinAccount","unpinAccountRequest","unpinAccountFail","updateAccount","note","avatar","header","discoverable","indexable","FormData","append","navigateToProfile","_dispatch","compareId","id1","id2","synchronouslySubmitMarkers","_args","accessToken","getAccessToken","buildPostMarkersParams","Object","Request","fetch","keepalive","method","headers","Authorization","body","JSON","stringify","navigator","formData","last_read_id","sendBeacon","client","XMLHttpRequest","open","setRequestHeader","send","getLastNotificationId","notificationGroups","lastReadId","lastNotificationId","markers","submitMarkersAction","home","debouncedSubmitMarkers","leading","trailing","submitMarkers","fetchMarkers","timeline","notificationsUpdate","playSound","sound","Settings","constructor","keyBase","generateKey","encodedData","localStorage","setItem","rawData","getItem","parse","removeItem","pushNotificationsSetting","tagHistory","bannerSettings","searchHistory","playerSettings","decode","base64","atob","outputArray","Uint8Array","charCodeAt","SET_BROWSER_SUPPORT","SET_SUBSCRIPTION","CLEAR_SUBSCRIPTION","SET_ALERTS","setBrowserSupport","setSubscription","clearSubscription","setAlerts","urlBase64ToUint8Array","base64String","padding","repeat","decodeBase64","getApplicationServerKey","querySelector","getAttribute","getRegistration","serviceWorker","ready","getPushSubscription","registration","pushManager","getSubscription","userVisibleOnly","applicationServerKey","sendSubscriptionToBackend","toJSON","standard","supportsPushNotifications","PushSubscription","register","currentServerKey","subscriptionServerKey","serverEndpoint","endpoint","alerts","saveSettings","put","NOTIFICATIONS_FILTER_SET","NOTIFICATIONS_SET_BROWSER_SUPPORT","NOTIFICATIONS_SET_BROWSER_PERMISSION","updateNotifications","notification","intlMessages","intlLocale","showAlert","some","filter_action","IntlMessageFormat","format","display_name","username","icon","tag","focus","close","noOp","setupBrowserNotifications","setBrowserPermission","permission","permissions","query","onchange","requestBrowserPermission","registerPushNotifications","CUSTOM_EMOJIS_FETCH_REQUEST","CUSTOM_EMOJIS_FETCH_SUCCESS","CUSTOM_EMOJIS_FETCH_FAIL","fetchCustomEmojis","fetchCustomEmojisRequest","fetchCustomEmojisSuccess","fetchCustomEmojisFail","custom_emojis","padLeft","unicodeToUnifiedName","codePointAt","toUpperCase","shortCodesToEmojiData","skins","categories","short_names","_emojisWithoutShortCodes","emojiCompressed","shortCode","emojiData","_filenameData","searchData","native","search","unified","buildSearch","addToSearch","strings","split","Array","toLowerCase","indexOf","keywords","emoticons","_String","String","stringFromCodePoint","fromCodePoint","MAX_SIZE","codeUnits","highSurrogate","lowSurrogate","arguments","codePoint","Number","isFinite","Math","floor","RangeError","fromCharCode","apply","_JSON","COLONS_REGEX","SKINS","unifiedToNative","unicodes","codePoints","u","sanitize","skin_tone","skin_variations","custom","imageUrl","colons","skin","getSanitizedData","getData","parseInt","hasOwn","variations","skinKey","variationData","uniq","intersect","uniqA","uniqB","originalPool","emojisList","emoticonsList","customEmojisList","emoticon","clearCustomEmojis","pool","emojiId","addCustomToPool","emojisToShowFilter","maxResults","include","exclude","allResults","isIncluded","isExcluded","customIsIncluded","customIsExcluded","aPool","aIndex","charIndex","char","scores","sub","slice","subIndex","score","aScore","bScore","messages","defineMessages","unexpectedTitle","defaultMessage","unexpectedMessage","rateLimitedTitle","rateLimitedMessage","dismissAlert","clearAlerts","ignoreAlert","showAlertForError","AxiosError","statusText","message","retry_time","Date","ECONNABORTED","SETTING_CHANGE","SETTING_SAVE","changeSetting","debouncedSave","EMOJI_USE","useEmoji","openModal","closeModal","disconnectTimeline","usePendingItems","preferPendingItems","timelineDelete","TIMELINE_UPDATE","TIMELINE_CLEAR","TIMELINE_EXPAND_REQUEST","TIMELINE_EXPAND_SUCCESS","TIMELINE_EXPAND_FAIL","TIMELINE_SCROLL_TOP","TIMELINE_LOAD_PENDING","TIMELINE_CONNECT","TIMELINE_MARK_AS_PARTIAL","TIMELINE_INSERT","TIMELINE_SUGGESTIONS","TIMELINE_GAP","loadPending","updateTimeline","accept","deleteFromTimelines","references","valueSeq","reblogOf","statusId","clearTimeline","parseTags","tags","mode","expandTimeline","timelineId","ImmutableMap","isLoadingMore","max_id","pinned","ImmutableList","since_id","isLoadingRecent","expandTimelineRequest","expandTimelineSuccess","now","fittingIndex","created_at","insertIntoTimeline","max","expandTimelineFail","fillTimelineGaps","gaps","maxId","take","expandHomeTimeline","expandPublicTimeline","onlyMedia","onlyRemote","remote","only_media","expandCommunityTimeline","local","expandAccountTimeline","withReplies","tagged","exclude_replies","exclude_reblogs","expandAccountFeaturedTimeline","expandAccountMediaTimeline","limit","expandListTimeline","expandLinkTimeline","expandHashtagTimeline","hashtag","any","none","fillHomeTimelineGaps","fillPublicTimelineGaps","fillCommunityTimelineGaps","fillListTimelineGaps","partial","scrollTopTimeline","top","connectTimeline","markAsPartial","fetchComposeSuggestionsAccountsController","fetchComposeSuggestionsTagsController","COMPOSE_CHANGE","COMPOSE_SUBMIT_REQUEST","COMPOSE_SUBMIT_SUCCESS","COMPOSE_SUBMIT_FAIL","COMPOSE_REPLY","COMPOSE_REPLY_CANCEL","COMPOSE_DIRECT","COMPOSE_MENTION","COMPOSE_RESET","COMPOSE_UPLOAD_REQUEST","COMPOSE_UPLOAD_SUCCESS","COMPOSE_UPLOAD_FAIL","COMPOSE_UPLOAD_PROGRESS","COMPOSE_UPLOAD_PROCESSING","COMPOSE_UPLOAD_UNDO","THUMBNAIL_UPLOAD_REQUEST","THUMBNAIL_UPLOAD_SUCCESS","THUMBNAIL_UPLOAD_FAIL","THUMBNAIL_UPLOAD_PROGRESS","COMPOSE_SUGGESTIONS_CLEAR","COMPOSE_SUGGESTIONS_READY","COMPOSE_SUGGESTION_SELECT","COMPOSE_SUGGESTION_IGNORE","COMPOSE_SUGGESTION_TAGS_UPDATE","COMPOSE_TAG_HISTORY_UPDATE","COMPOSE_MOUNT","COMPOSE_UNMOUNT","COMPOSE_SENSITIVITY_CHANGE","COMPOSE_SPOILERNESS_CHANGE","COMPOSE_SPOILER_TEXT_CHANGE","COMPOSE_VISIBILITY_CHANGE","COMPOSE_COMPOSING_CHANGE","COMPOSE_LANGUAGE_CHANGE","COMPOSE_EMOJI_INSERT","COMPOSE_POLL_ADD","COMPOSE_POLL_REMOVE","COMPOSE_POLL_OPTION_CHANGE","COMPOSE_POLL_SETTINGS_CHANGE","COMPOSE_CHANGE_MEDIA_ORDER","COMPOSE_SET_STATUS","COMPOSE_FOCUS","uploadErrorLimit","uploadErrorPoll","published","saved","ensureComposeIsVisible","setComposeToStatus","text","changeCompose","replyCompose","replyComposeById","cancelReplyCompose","resetCompose","mentionCompose","mentionComposeById","directCompose","submitCompose","media","submitComposeRequest","media_attributes","toFixed","request","in_reply_to_id","media_ids","visibility","history","goBack","insertIntoTagHistory","submitComposeSuccess","insertIfOnline","dismissAfter","onClick","submitComposeFail","uploadCompose","files","uploadLimit","progress","fill","total","uploadComposeRequest","file","onUploadProgress","loaded","uploadComposeProgress","uploadComposeSuccess","uploadComposeProcessing","tryCount","retryAfter","log2","setTimeout","uploadComposeFail","uploadThumbnail","uploadThumbnailRequest","uploadThumbnailProgress","uploadThumbnailSuccess","uploadThumbnailFail","undoUploadCompose","media_id","clearComposeSuggestions","fetchComposeSuggestionsAccounts","throttle","AbortController","readyComposeSuggestionsAccounts","axios","isCancel","finally","fetchComposeSuggestionsEmojis","emojiSearch","readyComposeSuggestionsEmojis","fetchComposeSuggestionsTags","updateSuggestionTags","exclude_unreviewed","readyComposeSuggestionsTags","hashtags","fetchComposeSuggestions","selectComposeSuggestion","suggestion","completion","startPosition","localeCompare","sensitivity","updateTagHistory","hydrateCompose","recognizedTags","oldHistory","RegExp","intersectedOldHistory","newName","newHistory","mountCompose","unmountCompose","changeComposeLanguage","changeComposeSpoilerness","changeComposeSpoilerText","changeComposeVisibility","insertEmojiCompose","needsSpace","changeComposing","addPoll","removePoll","changePollOption","maxOptions","changePollSettings","expiresIn","isMultiple","changeMediaOrder","apiGetSearch","submitSearch","signedIn","expandSearch","openURL","clickSearchResult","previous","recent","updateSearchHistory","forgetSearchResult","hydrateSearch","STORE_HYDRATE","convertState","rawState","toList","toMap","hydrateStore","ANNOUNCEMENTS_FETCH_REQUEST","ANNOUNCEMENTS_FETCH_SUCCESS","ANNOUNCEMENTS_FETCH_FAIL","ANNOUNCEMENTS_UPDATE","ANNOUNCEMENTS_DELETE","ANNOUNCEMENTS_DISMISS_REQUEST","ANNOUNCEMENTS_DISMISS_SUCCESS","ANNOUNCEMENTS_DISMISS_FAIL","ANNOUNCEMENTS_REACTION_ADD_REQUEST","ANNOUNCEMENTS_REACTION_ADD_SUCCESS","ANNOUNCEMENTS_REACTION_ADD_FAIL","ANNOUNCEMENTS_REACTION_REMOVE_REQUEST","ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS","ANNOUNCEMENTS_REACTION_REMOVE_FAIL","ANNOUNCEMENTS_REACTION_UPDATE","ANNOUNCEMENTS_TOGGLE_SHOW","fetchAnnouncements","fetchAnnouncementsRequest","fetchAnnouncementsSuccess","fetchAnnouncementsFail","announcements","updateAnnouncements","dismissAnnouncement","announcementId","dismissAnnouncementRequest","dismissAnnouncementSuccess","dismissAnnouncementFail","addReaction","alreadyAdded","reaction","addReactionRequest","encodeURIComponent","addReactionSuccess","addReactionFail","removeReaction","removeReactionRequest","delete","removeReactionSuccess","removeReactionFail","updateReaction","toggleShowAnnouncements","deleteAnnouncement","CONVERSATIONS_MOUNT","CONVERSATIONS_UNMOUNT","CONVERSATIONS_FETCH_REQUEST","CONVERSATIONS_FETCH_SUCCESS","CONVERSATIONS_FETCH_FAIL","CONVERSATIONS_UPDATE","CONVERSATIONS_READ","CONVERSATIONS_DELETE_REQUEST","CONVERSATIONS_DELETE_SUCCESS","CONVERSATIONS_DELETE_FAIL","mountConversations","unmountConversations","markConversationRead","conversationId","expandConversations","expandConversationsRequest","aggr","last_status","expandConversationsSuccess","expandConversationsFail","conversations","updateConversations","conversation","deleteConversation","deleteConversationRequest","deleteConversationSuccess","deleteConversationFail","apiFetchNotifications","links","apiFetchNotificationGroups","notification_groups","apiClearNotifications","apiRequest","apiFetchNotificationRequests","requests","apiFetchNotificationRequest","apiAcceptNotificationRequest","apiDismissNotificationRequest","apiAcceptNotificationRequests","apiDismissNotificationRequests","allNotificationTypes","selectSettingsNotificationsShows","settings","shows","selectSettingsNotificationsExcludedTypes","_type","enabled","_enabled","selectSettingsNotificationsQuickFilterShow","selectSettingsNotificationsQuickFilterActive","selectSettingsNotificationsQuickFilterAdvanced","selectSettingsNotificationsShowUnread","selectNeedsNotificationPermission","selectSettingsNotificationsMinimizeFilteredBanner","selectSettingsNotificationsGroupFollows","excludeAllTypesExcept","getExcludedTypes","activeFilter","dispatchAssociatedRecords","fetchedAccounts","fetchedStatuses","report","target_account","moderation_warning","selectNotificationGroupedTypes","types","fetchNotifications","_params","grouped_types","exclude_types","at","page_min_id","fetchNotificationsGap","gap","pollRecentNotifications","group","page_max_id","processNewNotificationForGroups","notificationShows","groupedTypes","updateScrollPosition","mergedNotifications","setNotificationsFilter","filterType","clearNotifications","markNotificationsAsRead","mountNotifications","mounted","unmountNotifications","refreshStaleNotificationGroups","scrolledToTop","deferredRefresh","apiGetContext","fetchContext","ancestors","descendants","STATUS_FETCH_REQUEST","STATUS_FETCH_SUCCESS","STATUS_FETCH_FAIL","STATUS_DELETE_REQUEST","STATUS_DELETE_SUCCESS","STATUS_DELETE_FAIL","STATUS_MUTE_REQUEST","STATUS_MUTE_SUCCESS","STATUS_MUTE_FAIL","STATUS_UNMUTE_REQUEST","STATUS_UNMUTE_SUCCESS","STATUS_UNMUTE_FAIL","STATUS_REVEAL","STATUS_HIDE","STATUS_COLLAPSE","REDRAFT","STATUS_FETCH_SOURCE_REQUEST","STATUS_FETCH_SOURCE_SUCCESS","STATUS_FETCH_SOURCE_FAIL","STATUS_TRANSLATE_REQUEST","STATUS_TRANSLATE_SUCCESS","STATUS_TRANSLATE_FAIL","STATUS_TRANSLATE_UNDO","fetchStatusRequest","fetchStatus","forceFetch","alsoFetchContext","fetchStatusSuccess","fetchStatusFail","redraft","raw_text","editStatus","fetchStatusSourceRequest","fetchStatusSourceSuccess","fetchStatusSourceFail","deleteStatus","withRedraft","deleteStatusRequest","delete_media","deleteStatusSuccess","deleteStatusFail","updateStatus","muteStatus","muteStatusRequest","muteStatusSuccess","muteStatusFail","unmuteStatus","unmuteStatusRequest","unmuteStatusSuccess","unmuteStatusFail","hideStatus","revealStatus","toggleStatusSpoilers","toggleStatusCollapse","isCollapsed","translateStatus","translateStatusRequest","translateStatusSuccess","translateStatusFail","undoStatusTranslation","pollId","navigateToStatus","focusApp","unfocusApp","changeLayout","componentWillMount","componentWillReceiveProps","prevState","componentWillUpdate","prevProps","polyfill","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","componentName","newApiName","componentDidUpdate","maybeSnapshot","snapshot","_e","Y","Ie","Ve","We","Ue","qe","le","Le","je","kt","Ee","f","Et","Re","pe","ae","j","R","ke","Ae","reactRedux_production_min","$e","Ye","He","Be","ze","Ke","Ge","Je","Te","Xe","Ze","re","Qe","fe","Se","et","ye","tt","P","S","M","T","C","ne","se","U","H","F","he","we","ot","rt","xe","B","nt","Ce","st","pt","ct","it","A","Oe","ut","Pt","Me","lt","De","Tt","ft","be","St","yt","ge","mt","ht","wt","xt","Ct","Ot","Dt","bt","gt","O","E","J","D","I","ve","ce","X","V","ie","ue","Z","Q","W","Pe","ee","te","de","Ne","$","oe","N","Mt","L","K","Fe","require$$1","Rt","cjsModule","loading_bar_ducks","showLoading","hideLoading","resetLoading","loadingBarReducer","ownKeys","enumerableOnly","symbols","_objectSpread","_defineProperty","SHOW","HIDE","RESET","DEFAULT_SCOPE","_ref","_ref$scope","exports","_react","_interopRequireWildcard","_reactLifecyclesCompat","_propTypes","require$$2","_reactRedux","require$$3","_loading_bar_ducks","require$$4","_getRequireWildcardCache","_typeof","newObj","hasPropertyDescriptor","_classCallCheck","Constructor","_defineProperties","_createClass","protoProps","staticProps","_inherits","subClass","superClass","_setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_possibleConstructorReturn","_assertThisInitialized","UPDATE_TIME","MAX_PROGRESS","PROGRESS_INCREASE","ANIMATION_DURATION","TERMINATING_ANIMATION_DURATION","LoadingBar","_Component","_super","_this","percent","progressIncrease","smoothedProgressIncrease","maxProgress","newPercent","updateTime","showFastActions","terminatingAnimationDuration","_this$state","_this$props","customStyle","animationDuration","_this$props2","direction","ConnectedLoadingBar","loadingBarMiddleware","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","arr2","_arr","_n","_i","_s","defaultTypeSuffixes","promiseTypeSuffixes","_promiseTypeSuffixes","PENDING","FULFILLED","REJECTED","actionScope","_loading_bar","mapImmutableStateToProps","_default","_loading_bar_middleware","_immutable","_interopRequireDefault","module","_immutable2","_getStateName","_getStateName2","reducerNames","stateName","unexpectedStatePropertyNames","reducerName","utilities","_getStateName3","_getUnexpectedInvocationParameterMessage2","_getUnexpectedInvocationParameterMessage3","_validateNextState2","_validateNextState3","_utilities","getDefaultState","inputState","temporaryState","currentDomainState","nextDomainState","dist","_combineReducers2","_combineReducers3","AccountFieldFactory","verified_at","name_emojified","value_emojified","value_plain","AccountRoleFactory","accountDefaultValues","avatar_static","bot","display_name_html","fields","header_static","last_status_at","noindex","note_emojified","note_plain","roles","followers_count","following_count","statuses_count","suspended","memorial","limited","hide_collections","mute_expires_at","AccountFactory","createAccountField","jsonField","createAccountFromServerJSON","accountJSON","trim","field","role","normalizeAccount","normalizeAccounts","getCurrentUser","Error","accountsReducer","fetchAccountsFamiliarFollowers","accountsFamiliarFollowersReducer","addCase","pattern","domain","normalizeForLookup","accountsMapReducer","addMatcher","alertsReducer","isLoading","show","reactions","updateReactionCount","announcement_id","sortAnnouncements","sortBy","updateAnnouncement","unshift","announcementsReducer","apiUpdateMedia","apiRequestPut","simulateModifiedApiResponse","parseFloat","changeUploadCompose","Promise","attached","unattached","uuid","random","spoiler","privacy","focusDate","caretPosition","preselectDate","in_reply_to","is_composing","is_submitting","is_changing_upload","is_uploading","isUploadingThumbnail","thumbnailProgress","pending_media_attachments","suggestion_token","suggestions","default_privacy","default_sensitive","default_language","resetFileKey","idempotencyKey","initialPoll","expires_in","statusToTextMentions","ImmutableOrderedSet","add","union","filterNot","mention","clearAll","clear","appendMedia","prevSize","removeMedia","mediaId","insertSuggestion","oldText","ignoreSuggestion","sortHashtagsByUse","personalHistory","sorted","lowerName","usedA","usedB","insertEmoji","privacyPreference","order","hydrate","hydratedState","expandMentions","fragment","expiresInFromExpiresAt","expires_at","delta","getTime","mergeLocalHashtagResults","localTags","fixSuggestionCapitalization","tagFromHistory","normalizeSuggestions","updatePoll","tmp","calculateProgress","min","round","composeReducer","defaultText","indexA","moveItem","indexB","splice","inReplyTos","replies","normalizeContext","addReply","siblings","sibling","deleteFromContexts","inReplyToIdOfId","repliesOfId","reply","filterContexts","ownedStatusIds","updateContext","contextsReducer","blockDomainSuccess","unblockDomainSuccess","hasMore","conversationToMap","unread","updateConversation","newItem","expandNormalizedConversations","isEmpty","newItemIndex","filterConversations","ConvertToImmutable","buildCustomEmojis","openDropdownMenu","closeDropdownMenu","openId","keyboard","scrollKey","dropdownMenuReducer","FILTERS_FETCH_REQUEST","FILTERS_FETCH_SUCCESS","FILTERS_FETCH_FAIL","FILTERS_STATUS_CREATE_REQUEST","FILTERS_STATUS_CREATE_SUCCESS","FILTERS_STATUS_CREATE_FAIL","FILTERS_CREATE_REQUEST","FILTERS_CREATE_SUCCESS","FILTERS_CREATE_FAIL","initAddFilter","contextType","modalType","modalProps","fetchFilters","createFilterStatus","onSuccess","onFail","createFilterStatusRequest","filter_id","createFilterStatusSuccess","createFilterStatusFail","filter_status","createFilter","createFilterRequest","createFilterSuccess","createFilterFail","normalizeFilter","normalizedFilter","old","old_value","new_value","normalizeFilters","HEIGHT_CACHE_SET","HEIGHT_CACHE_CLEAR","setHeight","height","clearHeight","clearHeights","HISTORY_FETCH_REQUEST","HISTORY_FETCH_SUCCESS","HISTORY_FETCH_FAIL","fetchHistory","fetchHistoryRequest","fetchHistorySuccess","fetchHistoryFail","initialHistory","loading","original","apiCreate","apiUpdate","apiGetLists","apiGetAccounts","listId","apiGetAccountLists","apiAddAccountToList","account_ids","apiRemoveAccountFromList","apiRequestDelete","createList","fetchLists","ListFactory","exclusive","replies_policy","LIST_FETCH_REQUEST","LIST_FETCH_SUCCESS","LIST_FETCH_FAIL","LIST_DELETE_REQUEST","LIST_DELETE_SUCCESS","LIST_DELETE_FAIL","fetchList","fetchListRequest","fetchListSuccess","fetchListFail","deleteList","deleteListRequest","deleteListSuccess","deleteListFail","normalizeList","createListFromJSON","normalizeLists","lists","listsReducer","markersReducer","accept_content_types","streaming_api_base_url","layout","Modal","ignoreFocus","popModal","pushModal","previousModalProps","previousModal","modalReducer","modal","openNavigation","closeNavigation","toggleNavigation","navigationReducer","NOTIFICATIONS_GROUP_MAX_AVATARS","createReportFromJSON","reportJSON","targetAccountId","createAccountWarningFromJSON","warningJSON","warning","createNotificationGroupFromJSON","groupJson","sample_account_ids","sampleAccountIds","status_id","groupWithoutStatus","groupWithoutTargetAccount","groupWithoutModerationWarning","moderationWarning","annual_report","groupWithoutAnnualReport","annualReport","createNotificationGroupFromNotificationJSON","group_key","notifications_count","most_recent_notification_id","latest_page_notification_at","NOTIFICATIONS_TRIM_LIMIT","pendingGroups","readMarkerId","isTabVisible","filterNotificationsForAccounts","onlyForType","previousLength","newLength","mergeGaps","filterNotificationsForStatus","removeNotificationsForAccounts","removeNotificationsForStatus","isNotificationGroup","groupOrGap","firstGroupOrGap","lastGap","sinceId","mergeGapsAround","potentialFirstGap","potentialSecondGap","processNewNotification","existingGroupIndex","existingGroup","pop","trimNotifications","ensureTrailingGap","shouldMarkNewNotificationsAsRead","ignoreScroll","oldestGroup","findLast","oldestGroupReached","updateLastReadId","commitLastReadId","fillNotificationsGap","gapIndex","oldestPageNotification","newerGroupKeys","toInsert","json","apiGroupKeys","ensureLeadingGap","notificationGroupsReducer","muting_notifications","mostRecentGroup","apiGetNotificationPolicy","apiUpdateNotificationsPolicy","policy","fetchNotificationPolicy","updateNotificationsPolicy","decreasePendingRequestsCount","notificationPolicyReducer","summary","pending_requests_count","_state","fetchNotificationRequests","notificationRequests","fetchNotificationRequest","expandNotificationRequests","nextUrl","fetchNotificationsForRequest","account_id","expandNotificationsForRequest","acceptNotificationRequest","_data","dismissNotificationRequest","acceptNotificationRequests","dismissNotificationRequests","createNotificationRequestFromJSON","requestJSON","browserSupport","browserPermission","notificationToMap","removeRequest","removeRequestByAccount","notificationRequestsReducer","removePictureInPicture","deployPictureInPictureAction","deployPictureInPicture","muted","volume","currentTime","pictureInPictureReducer","playerType","statusTranslateSuccess","pollTranslation","statusTranslateUndo","pollsReducer","follow","follow_request","favourite","push_subscriptions","push_subscription","RelationshipFactory","blocked_by","blocking","domain_blocking","endorsed","followed_by","following","languages","muting","requested_by","requested","showing_reblogs","createRelationship","submitAccountNote","normalizeRelationship","normalizeRelationships","setDomainBlocking","relationshipsReducer","createSearchResults","searchReducer","SERVER_FETCH_REQUEST","SERVER_FETCH_SUCCESS","SERVER_FETCH_FAIL","SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST","SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS","SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL","EXTENDED_DESCRIPTION_REQUEST","EXTENDED_DESCRIPTION_SUCCESS","EXTENDED_DESCRIPTION_FAIL","SERVER_DOMAIN_BLOCKS_FETCH_REQUEST","SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS","SERVER_DOMAIN_BLOCKS_FETCH_FAIL","fetchServer","fetchServerRequest","contact","fetchServerSuccess","fetchServerFail","server","fetchServerTranslationLanguages","fetchServerTranslationLanguagesRequest","fetchServerTranslationLanguagesSuccess","fetchServerTranslationLanguagesFail","translationLanguages","fetchExtendedDescription","fetchExtendedDescriptionRequest","fetchExtendedDescriptionSuccess","fetchExtendedDescriptionFail","fetchDomainBlocks","fetchDomainBlocksRequest","fetchDomainBlocksSuccess","fetchDomainBlocksFail","isAvailable","blocks","extendedDescription","domainBlocks","COLUMN_ADD","COLUMN_REMOVE","COLUMN_MOVE","COLUMN_PARAMS_CHANGE","addColumn","removeColumn","moveColumn","changeColumnParams","skinTone","trends","regex","quickFilter","advanced","dismissPermissionBanner","showUnread","minimizeFilteredBanner","sounds","firehose","community","public","direct","dismissed_banners","defaultColumns","columns","newIndex","newColumns","column","updateFrequentEmojis","updateFrequentLanguages","filterDeadListColumns","BOOKMARKED_STATUSES_FETCH_REQUEST","BOOKMARKED_STATUSES_FETCH_SUCCESS","BOOKMARKED_STATUSES_FETCH_FAIL","BOOKMARKED_STATUSES_EXPAND_REQUEST","BOOKMARKED_STATUSES_EXPAND_SUCCESS","BOOKMARKED_STATUSES_EXPAND_FAIL","fetchBookmarkedStatuses","fetchBookmarkedStatusesRequest","fetchBookmarkedStatusesSuccess","fetchBookmarkedStatusesFail","expandBookmarkedStatuses","expandBookmarkedStatusesRequest","expandBookmarkedStatusesSuccess","expandBookmarkedStatusesFail","FAVOURITED_STATUSES_FETCH_REQUEST","FAVOURITED_STATUSES_FETCH_SUCCESS","FAVOURITED_STATUSES_FETCH_FAIL","FAVOURITED_STATUSES_EXPAND_REQUEST","FAVOURITED_STATUSES_EXPAND_SUCCESS","FAVOURITED_STATUSES_EXPAND_FAIL","fetchFavouritedStatuses","fetchFavouritedStatusesRequest","fetchFavouritedStatusesSuccess","fetchFavouritedStatusesFail","expandFavouritedStatuses","expandFavouritedStatusesRequest","expandFavouritedStatusesSuccess","expandFavouritedStatusesFail","apiReblog","apiUnreblog","unreblog","REBLOGS_EXPAND_REQUEST","REBLOGS_EXPAND_SUCCESS","REBLOGS_EXPAND_FAIL","FAVOURITE_REQUEST","FAVOURITE_SUCCESS","FAVOURITE_FAIL","UNFAVOURITE_REQUEST","UNFAVOURITE_SUCCESS","UNFAVOURITE_FAIL","REBLOGS_FETCH_REQUEST","REBLOGS_FETCH_SUCCESS","REBLOGS_FETCH_FAIL","FAVOURITES_FETCH_REQUEST","FAVOURITES_FETCH_SUCCESS","FAVOURITES_FETCH_FAIL","FAVOURITES_EXPAND_REQUEST","FAVOURITES_EXPAND_SUCCESS","FAVOURITES_EXPAND_FAIL","PIN_REQUEST","PIN_SUCCESS","PIN_FAIL","UNPIN_REQUEST","UNPIN_SUCCESS","UNPIN_FAIL","BOOKMARK_REQUEST","BOOKMARK_SUCCESS","BOOKMARK_FAIL","UNBOOKMARK_REQUEST","UNBOOKMARK_SUCCESS","UNBOOKMARK_FAIL","favouriteRequest","favouriteSuccess","favouriteFail","unfavourite","unfavouriteRequest","unfavouriteSuccess","unfavouriteFail","bookmark","bookmarkRequest","bookmarkSuccess","bookmarkFail","unbookmark","unbookmarkRequest","unbookmarkSuccess","unbookmarkFail","fetchReblogs","fetchReblogsRequest","fetchReblogsSuccess","fetchReblogsFail","expandReblogs","expandReblogsRequest","expandReblogsSuccess","expandReblogsFail","fetchFavourites","fetchFavouritesRequest","fetchFavouritesSuccess","fetchFavouritesFail","expandFavourites","expandFavouritesRequest","expandFavouritesSuccess","expandFavouritesFail","pin","pinRequest","pinSuccess","pinFail","unpin","unpinRequest","unpinSuccess","unpinFail","toggleReblogWithoutConfirmation","toggleReblog","skipModal","boostModal","onReblog","toggleFavourite","PINNED_STATUSES_FETCH_REQUEST","PINNED_STATUSES_FETCH_SUCCESS","PINNED_STATUSES_FETCH_FAIL","fetchPinnedStatuses","fetchPinnedStatusesRequest","fetchPinnedStatusesSuccess","fetchPinnedStatusesFail","TRENDS_TAGS_FETCH_REQUEST","TRENDS_TAGS_FETCH_SUCCESS","TRENDS_TAGS_FETCH_FAIL","TRENDS_LINKS_FETCH_REQUEST","TRENDS_LINKS_FETCH_SUCCESS","TRENDS_LINKS_FETCH_FAIL","TRENDS_STATUSES_FETCH_REQUEST","TRENDS_STATUSES_FETCH_SUCCESS","TRENDS_STATUSES_FETCH_FAIL","TRENDS_STATUSES_EXPAND_REQUEST","TRENDS_STATUSES_EXPAND_SUCCESS","TRENDS_STATUSES_EXPAND_FAIL","fetchTrendingHashtags","fetchTrendingHashtagsRequest","fetchTrendingHashtagsSuccess","fetchTrendingHashtagsFail","fetchTrendingLinks","fetchTrendingLinksRequest","flatMap","fetchTrendingLinksSuccess","fetchTrendingLinksFail","fetchTrendingStatuses","fetchTrendingStatusesRequest","fetchTrendingStatusesSuccess","fetchTrendingStatusesFail","expandTrendingStatuses","expandTrendingStatusesRequest","expandTrendingStatusesSuccess","expandTrendingStatusesFail","favourites","bookmarks","pins","trending","listType","listMap","appendToList","prependOneToList","removeOneFromList","statusLists","importStatus","apiGetSuggestions","apiDeleteSuggestion","fetchSuggestions","dismissSuggestion","createSuggestion","suggestionsReducer","initialTimeline","online","pendingItems","isPlaceholder","expandNormalizedTimeline","isPartial","mMap","endsWith","oldIds","newIds","findLastIndex","firstIndex","insertedIds","olderIds","subtract","skip","includesId","exclude_account","keySeq","helper","filterTimelines","filterTimeline","updateTop","reconnectTimeline","timelines","insert","trendsReducer","apiGetDirectory","fetchDirectory","expandDirectory","loadedItems","user_lists","fetchFeaturedTags","BLOCKS_FETCH_REQUEST","BLOCKS_FETCH_SUCCESS","BLOCKS_FETCH_FAIL","BLOCKS_EXPAND_REQUEST","BLOCKS_EXPAND_SUCCESS","BLOCKS_EXPAND_FAIL","fetchBlocks","fetchBlocksRequest","fetchBlocksSuccess","fetchBlocksFail","expandBlocks","expandBlocksRequest","expandBlocksSuccess","expandBlocksFail","initBlockModal","MUTES_FETCH_REQUEST","MUTES_FETCH_SUCCESS","MUTES_FETCH_FAIL","MUTES_EXPAND_REQUEST","MUTES_EXPAND_SUCCESS","MUTES_EXPAND_FAIL","fetchMutes","fetchMutesRequest","fetchMutesSuccess","fetchMutesFail","expandMutes","expandMutesRequest","expandMutesSuccess","expandMutesFail","initMuteModal","initialListState","followers","reblogged_by","favourited_by","follow_requests","mutes","featured_tags","normalizeFollowRequest","normalizeFeaturedTag","featuredTags","normalizeFeaturedTags","featuredTag","userLists","dropdownMenu","loadingBar","status_lists","accounts_map","accounts_familiar_followers","push_notifications","contexts","height_cache","picture_in_picture","notificationPolicy","navigation","initialRootState","fromEntries","RootStateRecord","defaultFailSuffix","isFailedAction","isRejectedActionWithPayload","isActionWithMaybeAlertParams","errorsMiddleware","isActionWithSkipLoading","isThunkActionPending","isThunkActionFulfilled","isThunkActionRejected","isPendingRegexp","isFulfilledRegexp","isRejectedRegexp","isActionWithMetaSound","createAudio","audio","Audio","src","appendChild","play","fastSeek","soundsMiddleware","soundCache","boop","assetHost","useCallbackRef","toFnRef","mergeRefs","refA","refB","useMergedRefs","bottom","auto","basePlacements","clippingParents","viewport","popper","reference","variationPlacements","placement","placements","beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite","modifierPhases","getBasePlacement","getWindow","ownerDocument","isElement","OwnElement","isHTMLElement","isShadowRoot","getUAString","uaData","isLayoutViewport","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scaleX","scaleY","visualViewport","addVisualOffsets","getLayoutRect","contains","child","rootNode","getNodeName","getComputedStyle","isTableElement","getDocumentElement","getParentNode","getTrueOffsetParent","getContainingBlock","isFirefox","isIE","elementCss","currentNode","css","getOffsetParent","offsetParent","getMainAxisFromPlacement","within","mathMax","mathMin","withinMaxClamp","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","hashMap","toPaddingObject","arrow","_state$modifiersData$","arrowElement","popperOffsets","basePlacement","axis","isVertical","arrowRect","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","center","axisProp","_ref2","_options$element","arrow$1","getVariation","unsetSides","roundOffsetsByDPR","win","dpr","mapToStyles","_Object$assign2","popperRect","variation","offsets","gpuAcceleration","adaptive","roundOffsets","isFixed","_offsets$x","_offsets$y","_ref3","hasX","hasY","sideX","sideY","heightProp","widthProp","offsetY","offsetX","commonStyles","_ref4","_Object$assign","computeStyles","_ref5","_options$gpuAccelerat","_options$adaptive","_options$roundOffsets","computeStyles$1","_options$scroll","scroll","_options$resize","resize","scrollParents","scrollParent","eventListeners","getOppositePlacement","matched","getOppositeVariationPlacement","getWindowScroll","getWindowScrollBarX","getViewportRect","strategy","layoutViewport","getDocumentRect","_element$ownerDocumen","winScroll","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","getScrollParent","listScrollParents","isBody","updatedList","rectToClientRect","rect","getInnerBoundingClientRect","getClientRectFromMixedType","clippingParent","getClippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","computeOffsets","commonX","commonY","mainAxis","detectOverflow","_options","_options$placement","_options$strategy","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","altContext","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","allPlacements","allowedPlacements","overflows","getExpandedFallbackPlacements","oppositePlacement","flip","_options$mainAxis","checkMainAxis","_options$altAxis","checkAltAxis","specifiedFallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","fallbackPlacements","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","mainVariationSide","altVariationSide","checks","check","numberOfChecks","_loop","fittingPlacement","_ret","flip$1","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","hide","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","hide$1","distanceAndSkiddingToXY","rects","invertDistance","skidding","distance","_options$offset","_data$state$placement","offset$1","popperOffsets$1","getAltAxis","preventOverflow","_options$tether","tether","_options$tetherOffset","tetherOffset","altAxis","tetherOffsetValue","normalizedTetherOffsetValue","offsetModifierState","_offsetModifierState$","mainSide","altSide","additive","maxLen","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_offsetModifierState$2","_mainSide","_altSide","_offset","_len","_min","_max","isOriginSide","_offsetModifierValue","_tetherMin","_tetherMax","_preventedOffset","preventOverflow$1","getHTMLElementScroll","getNodeScroll","isElementScaled","getCompositeRect","elementOrVirtualElement","isOffsetParentAnElement","offsetParentIsScaled","modifiers","visited","modifier","requires","depModifier","orderModifiers","orderedModifiers","mergeByName","DEFAULT_OPTIONS","areValidElements","_key","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","effectCleanupFns","isDestroyed","setOptionsAction","cleanupModifierEffects","runModifierEffects","_state$elements","_state$orderedModifie","_state$orderedModifie2","_ref$options","cleanupFn","noopFn","createPopper","useMounted","useSafeState","initialPopperStyles","disabledApplyStylesModifier","ariaDescribedByModifier","_popper$getAttribute","_state$elements2","EMPTY_MODIFIERS","usePopper","referenceElement","popperElement","_temp","_ref3$enabled","_ref3$placement","_ref3$strategy","_ref3$modifiers","_objectWithoutPropertiesLoose","popperInstanceRef","_popperInstanceRef$cu","_popperInstanceRef$cu2","_useSafeState","popperState","setState","updateModifier","styles","_extends","optionsSupported","onceSupported","eventName","capture","wrappedHandler","onceHandler","listen","useCommittedRef","useEventCallback","warning_1","safeFindDOMNode","componentOrElement","ReactDOM","escapeKeyCode","isLeftClickEvent","isModifiedEvent","getRefTarget","useRootClose","onRootClose","disabled","_ref$clickTrigger","clickTrigger","preventMouseRootCloseRef","onClose","handleMouseCapture","_e$composedPath$","currentTarget","handleMouse","handleKeyUp","currentEvent","doc","removeMouseCaptureListener","removeMouseListener","removeKeyupListener","mobileSafariHackListeners","el","resolveContainerRef","useWaitForDOMRef","onResolved","_useState","resolvedRef","setRef","earlyRef","nextRef","toModifierMap","toModifierArray","mergeOptionsWithPopperConfig","_modifiers$preventOve","_modifiers$preventOve2","_modifiers$offset","_modifiers$arrow","enableEvents","fixed","containerPadding","_ref$popperConfig","popperConfig","Overlay","outerRef","_props$containerPaddi","_props$popperConfig","Transition","_useCallbackRef","rootElement","attachRef","_useCallbackRef2","attachArrowRef","mergedRef","container","exited","setExited","_usePopper","handleHidden","mountOverlay","onExit","onExiting","onEnter","onEntering","onEntered","PropTypes","_PropTypes$func","SvgCheck","SvgCheckBoxOutlineBlank","Icon","IconComponent","titleProp","isProduction","CheckBoxOutlineBlankIcon","ariaHidden","classNames","useHovering","hovering","setHovering","handleMouseEnter","handleMouseLeave","Avatar","autoPlayGif","inline","withLink","styleFromParent","counter","counterBorderColor","setLoading","setError","handleLoad","handleError","jsxs","borderColor","Link","identityContextPropShape","shape","bool","isRequired","disabledAccountId","createIdentityContext","disabled_account_id","IdentityContext","createContext","useIdentity","withIdentity","wrappedComponentRef","remainingProps","hoistStatics","CircularProgress","strokeWidth","radius","SvgDownload","SvgForward5Fill","SvgPauseFill","SvgPlayArrowFill","SvgReplay5Fill","SvgVolumeOffFill","SvgVolumeUpFill","Blurhash","dummy","canvasProps","canvasRef","canvas","pixels","imageData","ImageData","putImageData","MemoizedBlurhash","memo","SpoilerButton","uncached","matchedFilters","FormattedMessage","span","chunks","SvgFullscreen","SvgFullscreenExit","SvgRectangle","SvgVolumeDownFill","isFullscreen","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","attachFullscreenListener","detachFullscreenListener","HotkeyIndicator","events","onDismiss","intl","useIntl","opacity","enter","_result","_ctrl","Fragment","formatMessage","label","mute","unmute","expand","fullscreen","exit_fullscreen","volumeUp","volumeDown","skipForward","skipBackward","DOUBLE_CLICK_THRESHOLD","HOVER_FADE_DELAY","formatTime","secondsNum","hours","minutes","seconds","formattedHours","formattedMinutes","formattedSeconds","findElementPosition","box","docEl","clientLeft","scrollX","clientTop","scrollY","getPointerPosition","boxW","offsetWidth","boxH","offsetHeight","boxY","boxX","pageY","pageX","fileNameFromURL","URL","lastIndexOf","frameRateAsNumber","frameRate","persistVolume","restoreVolume","video","hotkeyEventId","registerHotkeyEvent","setHotkeyEvents","Video","preview","aspectRatio","alt","lang","onOpenVideo","onCloseVideo","detailed","alwaysVisible","visible","onToggleVisibility","blurhash","startPlaying","startTime","startVolume","startMuted","setCurrentTime","setDuration","setVolume","setPaused","dragging","setDragging","setFullscreen","hovered","setHovered","setMuted","revealed","setRevealed","hotkeyEvents","playerRef","videoRef","seekRef","volumeRef","doubleClickTimeoutRef","hoverTimeoutRef","buffer","handleVideoRef","togglePlay","toggleFullscreen","toggleMute","handleClickRoot","stopPropagation","handleClick","clearTimeout","FullscreenExitIcon","FullscreenIcon","PlayArrowIcon","PauseIcon","handlePlay","handlePause","updateProgress","requestAnimationFrame","isNaN","stiff","cancelAnimationFrame","displayMedia","handleFullscreenChange","handleScroll","inView","innerHeight","clientHeight","handleTimeUpdate","handleVolumeMouseDown","handleVolumeMouseUp","handleVolumeMouseMove","nativeEvent","preventDefault","handleSeekMouseDown","handleSeekMouseUp","handleSeekMouseMove","newTime","seekBy","updateVolumeBy","newVolume","handleVideoKeyDown","handleKeyDown","frameTime","VolumeUpIcon","VolumeOffIcon","Replay5Icon","Forward5Icon","VolumeDownIcon","handleMouseMove","toggleReveal","handleLoadedData","handleProgress","lastTimeRange","buffered","ceil","handleVolumeChange","handleOpenVideo","wasPaused","autoPlay","defaultVolume","handleCloseVideo","handleHotkeyEventDismiss","effectivelyMuted","preload","inactive","useBlurhash","RectangleIcon","useAudioContext","audioElementRef","audioContextRef","sourceRef","gainNodeRef","AudioContext","createMediaElementSource","gainNode","createGain","destination","playAudio","pauseAudio","suspend","normalizeFrequencies","sqrt","useAudioVisualizer","numBands","analyzerRef","frequencyBands","setFrequencyBands","createAnalyser","smoothingTimeConstant","fftSize","currentSource","disconnect","analyzer","bufferLength","frequencyBinCount","frequencyData","Float32Array","updateInterval","setInterval","getFloatFrequencyData","normalizedFrequencies","bands","chunkSize","cur","clearInterval","download","poster","backgroundColor","foregroundColor","accentColor","loadedDuration","audioRef","accessibilityId","useId","handleAudioRef","gain","handleTouchEnd","handleCanPlayThrough","handleAudioKeyDown","handleSkipBackward","handleSkipForward","springForBand0","wobbly","springForBand1","springForBand2","DownloadIcon","SvgOpenInNew","SvgRepeat","SvgReply","SvgReplyAll","SvgStarFill","SvgStar","SvgRepeatActive","SvgRepeatDisabled","SvgRepeatPrivate","SvgRepeatPrivateActive","AnimatedNumber","previousValue","setPreviousValue","gentle","reduceMotion","ShortNumber","IconButton","expanded","iconComponent","inverted","href","activeStyle","onKeyDown","onKeyPress","onMouseDown","overlay","tabIndex","ariaControls","buttonRef","activate","setActivate","deactivate","setDeactivate","handleKeyPress","handleMouseDown","buttonStyle","classes","overlayed","contents","WithRouterPropTypes","WithOptionalRouterPropTypes","withOptionalRouter","__RouterContext","ANONYMOUS","ImmutablePropTypes","productionTypeChecker","getProductionTypeChecker","createIterableSubclassTypeChecker","getPropType","propValue","propType","createChainableTypeChecker","validate","checkType","propFullName","rest","locationName","chainedCheckType","createImmutableTypeChecker","immutableClassName","immutableClassTypeValidator","subclassName","validator","ImmutablePropTypes_1","_objectSpread2","isMapLike","isInvalid","checkItem","createChecker","checklist","ImmutablePureComponent","_React$Component","SvgChevronRight","useSelectableClick","maxDelta","clickPositionRef","clientX","clientY","handleMouseUp","startX","startY","deltaX","deltaY","abs","HTMLElement","localName","button","detail"],"mappings":"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AAO3O,EAAM,IAAI0B,EAAa,CACrD,EACMiJ,GAAa,IAAMxR,EACnBgmB,EAAWA,GAAYZ,CAC7B,CAAK,EACMY,EAAW,OAASxU,CAC/B,CAEE,cAActQ,EAAO,CACfA,GAAS,GACXM,GACE,KAAK,OACJqF,GAAUrF,GACTqF,EACCpF,GAAU6G,GAAc7G,CAAK,GAAKyH,GAAiBzH,EAAO,IAAI,CACzE,CACA,CACA,CAEE,gBAAgBP,EAAO,CACjBA,GAAS,GACXM,GACE,KAAK,OACJqF,GAAUrF,GACTqF,EACCpF,GAAU6G,GAAc7G,CAAK,GAAK0H,GAAoB1H,EAAO,IAAI,CAC5E,CACA,CACA,CACE,cAAckH,EAAO,CACfA,EAAM,MAAQ,WAChB,KAAK,OAAS,MAEhBC,GAAmB,KAAMD,CAAK,CAClC,CACA,EAGIsd,GAAa,CACf,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,OACA,OACA,MACA,WACA,OACA,WACA,KACA,MACA,UACA,MACA,SACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,OACA,MACA,OACA,OACA,WACA,OACA,QACA,MACA,WACA,SACA,KACA,WACA,SACA,SACA,IACA,QACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,QACA,SACA,OACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,QACA,KACA,QACA,IACA,KACA,MACA,QACA,MAEA,SACA,WACA,OACA,UACA,gBACA,IACA,QACA,OACA,iBACA,OACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,MACA,OACA,OACF,EAIAlC,GAAQ,OAAO,CACb,eAAgBmC,GAAAA,wBAClB,yBAAE/jB,GACF,OAAE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","x_google_ignoreList":[0,1,2,3,4,7,11,12,13,14,15,17,18,19,21,22,64,65,66,67,68,69,70,71,72,73,74,75,76,77,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,247,273,274]}