import{j as r}from"./client-wT6vtYO_.js";import{r as c}from"./index-BdTwX--g.js";import{c as S}from"./index-DizoKcfL.js";import{S as T}from"./info-HtHaDKcq.js";import{I,bT as $}from"./useSelectableClick-DeaJbL2_.js";const y=$?{passive:!0,capture:!0}:!0,O=({style:A,items:d,value:L,classNamePrefix:s="privacy-dropdown",onClose:a,onChange:v})=>{const t=c.useRef(null),h=c.useRef(null),[p,m]=c.useState(L),o=c.useCallback(e=>{t.current&&e.target instanceof Node&&!t.current.contains(e.target)&&(a(),e.stopPropagation())},[t,a]),f=c.useCallback(e=>{const l=e.currentTarget.getAttribute("data-index");e.preventDefault(),a(),l&&v(l)},[a,v]),R=c.useCallback(e=>{var x,E,b,k,_,g,j,C,w,D;const l=e.currentTarget.getAttribute("data-index"),i=d.findIndex(u=>u.value===l);let n=null;switch(e.key){case"Escape":a();break;case" ":case"Enter":f(e);break;case"ArrowDown":n=((x=t.current)==null?void 0:x.children[i+1])??((E=t.current)==null?void 0:E.firstElementChild);break;case"ArrowUp":n=((b=t.current)==null?void 0:b.children[i-1])??((k=t.current)==null?void 0:k.lastElementChild);break;case"Tab":e.shiftKey?n=((_=t.current)==null?void 0:_.children[i+1])??((g=t.current)==null?void 0:g.firstElementChild):n=((j=t.current)==null?void 0:j.children[i-1])??((C=t.current)==null?void 0:C.lastElementChild);break;case"Home":n=(w=t.current)==null?void 0:w.firstElementChild;break;case"End":n=(D=t.current)==null?void 0:D.lastElementChild;break}if(n&&n instanceof HTMLElement){const u=n.getAttribute("data-index");n.focus(),u&&m(u),e.preventDefault(),e.stopPropagation()}},[t,d,a,f,m]);return c.useEffect(()=>{var e;return document.addEventListener("click",o,{capture:!0}),document.addEventListener("touchend",o,y),(e=h.current)==null||e.focus({preventScroll:!0}),()=>{document.removeEventListener("click",o,{capture:!0}),document.removeEventListener("touchend",o,y)}},[o]),r.jsx("ul",{style:A,role:"listbox",ref:t,children:d.map(e=>r.jsxs("li",{role:"option",tabIndex:0,"data-index":e.value,onKeyDown:R,onClick:f,className:S(`${s}__option`,{active:e.value===p}),"aria-selected":e.value===p,ref:e.value===p?h:null,children:[e.icon&&e.iconComponent&&r.jsx("div",{className:`${s}__option__icon`,children:r.jsx(I,{id:e.icon,icon:e.iconComponent})}),r.jsxs("div",{className:`${s}__option__content`,children:[r.jsx("strong",{children:e.text}),e.meta]}),e.extra&&r.jsx("div",{className:`${s}__option__additional`,title:e.extra,children:r.jsx(I,{id:"info-circle",icon:T})})]},e.value))})};export{O as D};
//# sourceMappingURL=dropdown_selector-TPsaB6cz.js.map
