{"version":3,"file":"follow_requests-index-Dg_LRFtB.js","sources":["../../app/javascript/mastodon/features/follow_requests/components/account_authorize.jsx","../../app/javascript/mastodon/features/follow_requests/containers/account_authorize_container.js","../../app/javascript/mastodon/features/follow_requests/index.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport { Link } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport CheckIcon from '@/material-icons/400-24px/check.svg?react';\nimport CloseIcon from '@/material-icons/400-24px/close.svg?react';\n\nimport { Avatar } from '../../../components/avatar';\nimport { DisplayName } from '../../../components/display_name';\nimport { IconButton } from '../../../components/icon_button';\n\nconst messages = defineMessages({\n  authorize: { id: 'follow_request.authorize', defaultMessage: 'Authorize' },\n  reject: { id: 'follow_request.reject', defaultMessage: 'Reject' },\n});\n\nclass AccountAuthorize extends ImmutablePureComponent {\n\n  static propTypes = {\n    account: ImmutablePropTypes.record.isRequired,\n    onAuthorize: PropTypes.func.isRequired,\n    onReject: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n  };\n\n  render () {\n    const { intl, account, onAuthorize, onReject } = this.props;\n    const content = { __html: account.get('note_emojified') };\n\n    return (\n      <div className='account-authorize__wrapper'>\n        <div className='account-authorize'>\n          <Link to={`/@${account.get('acct')}`} className='detailed-status__display-name'>\n            <div className='account-authorize__avatar'><Avatar account={account} size={48} /></div>\n            <DisplayName account={account} />\n          </Link>\n\n          <div className='account__header__content translate' dangerouslySetInnerHTML={content} />\n        </div>\n\n        <div className='account--panel'>\n          <div className='account--panel__button'><IconButton title={intl.formatMessage(messages.authorize)} icon='check' iconComponent={CheckIcon} onClick={onAuthorize} /></div>\n          <div className='account--panel__button'><IconButton title={intl.formatMessage(messages.reject)} icon='times' iconComponent={CloseIcon} onClick={onReject} /></div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(AccountAuthorize);\n","import { connect } from 'react-redux';\n\nimport { authorizeFollowRequest, rejectFollowRequest } from '../../../actions/accounts';\nimport { makeGetAccount } from '../../../selectors';\nimport AccountAuthorize from '../components/account_authorize';\n\nconst makeMapStateToProps = () => {\n  const getAccount = makeGetAccount();\n\n  const mapStateToProps = (state, props) => ({\n    account: getAccount(state, props.id),\n  });\n\n  return mapStateToProps;\n};\n\nconst mapDispatchToProps = (dispatch, { id }) => ({\n  onAuthorize () {\n    dispatch(authorizeFollowRequest(id));\n  },\n\n  onReject () {\n    dispatch(rejectFollowRequest(id));\n  },\n});\n\nexport default connect(makeMapStateToProps, mapDispatchToProps)(AccountAuthorize);\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport { debounce } from 'lodash';\n\nimport PersonAddIcon from '@/material-icons/400-24px/person_add.svg?react';\n\nimport { fetchFollowRequests, expandFollowRequests } from '../../actions/accounts';\nimport ScrollableList from '../../components/scrollable_list';\nimport { me } from '../../initial_state';\nimport Column from '../ui/components/column';\n\nimport AccountAuthorizeContainer from './containers/account_authorize_container';\n\nconst messages = defineMessages({\n  heading: { id: 'column.follow_requests', defaultMessage: 'Follow requests' },\n});\n\nconst mapStateToProps = state => ({\n  accountIds: state.getIn(['user_lists', 'follow_requests', 'items']),\n  isLoading: state.getIn(['user_lists', 'follow_requests', 'isLoading'], true),\n  hasMore: !!state.getIn(['user_lists', 'follow_requests', 'next']),\n  locked: !!state.getIn(['accounts', me, 'locked']),\n  domain: state.getIn(['meta', 'domain']),\n});\n\nclass FollowRequests extends ImmutablePureComponent {\n\n  static propTypes = {\n    params: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    hasMore: PropTypes.bool,\n    isLoading: PropTypes.bool,\n    accountIds: ImmutablePropTypes.list,\n    locked: PropTypes.bool,\n    domain: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n    multiColumn: PropTypes.bool,\n  };\n\n  UNSAFE_componentWillMount () {\n    this.props.dispatch(fetchFollowRequests());\n  }\n\n  handleLoadMore = debounce(() => {\n    this.props.dispatch(expandFollowRequests());\n  }, 300, { leading: true });\n\n  render () {\n    const { intl, accountIds, hasMore, multiColumn, locked, domain, isLoading } = this.props;\n\n    const emptyMessage = <FormattedMessage id='empty_column.follow_requests' defaultMessage=\"You don't have any follow requests yet. When you receive one, it will show up here.\" />;\n    const unlockedPrependMessage = !locked && accountIds.size > 0 && (\n      <div className='follow_requests-unlocked_explanation'>\n        <FormattedMessage\n          id='follow_requests.unlocked_explanation'\n          defaultMessage='Even though your account is not locked, the {domain} staff thought you might want to review follow requests from these accounts manually.'\n          values={{ domain: domain }}\n        />\n      </div>\n    );\n\n    return (\n      <Column bindToDocument={!multiColumn} icon='user-plus' iconComponent={PersonAddIcon} heading={intl.formatMessage(messages.heading)} alwaysShowBackButton>\n        <ScrollableList\n          scrollKey='follow_requests'\n          onLoadMore={this.handleLoadMore}\n          hasMore={hasMore}\n          isLoading={isLoading}\n          showLoading={isLoading && accountIds.size === 0}\n          emptyMessage={emptyMessage}\n          bindToDocument={!multiColumn}\n          prepend={unlockedPrependMessage}\n        >\n          {accountIds.map(id =>\n            <AccountAuthorizeContainer key={id} id={id} />,\n          )}\n        </ScrollableList>\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(FollowRequests));\n"],"names":["messages","defineMessages","authorize","id","defaultMessage","reject","AccountAuthorize","ImmutablePureComponent","render","intl","account","onAuthorize","onReject","props","content","__html","get","jsxDEV","Link","Avatar","DisplayName","IconButton","formatMessage","CheckIcon","CloseIcon","__publicField","propTypes","ImmutablePropTypes","record","isRequired","PropTypes","func","object","AccountAuthorize$1","injectIntl","makeMapStateToProps","getAccount","makeGetAccount","mapStateToProps","state","mapDispatchToProps","dispatch","authorizeFollowRequest","rejectFollowRequest","AccountAuthorizeContainer","connect","heading","accountIds","getIn","isLoading","hasMore","locked","me","domain","FollowRequests","handleLoadMore","debounce","expandFollowRequests","leading","UNSAFE_componentWillMount","fetchFollowRequests","multiColumn","emptyMessage","FormattedMessage","unlockedPrependMessage","size","Column","PersonAddIcon","ScrollableList","map","Helmet","params","bool","list","string","index"],"mappings":"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"}