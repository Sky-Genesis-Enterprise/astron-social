import{j as o}from"./client-BG6VvM0b.js";import{u as B,r as n,d as D}from"./index-ykyyQSL-.js";import{H as E}from"./Helmet-D0DLVOv1.js";import{u as _,b7 as M}from"./useSelectableClick-DBo53LOf.js";import{S as V}from"./tag-DwJ3VcGu.js";import{u as k}from"./tags_typed-CDkBGaYv.js";import{a as g}from"./tags-BKNU5g8H.js";import{B as C}from"./index-JeRepxZU.js";import{C as y}from"./column-CXD4Tnpb.js";import{C as S}from"./column_header-CtuyYpNB.js";import{H as T}from"./hashtag--bDjNoob.js";import{S as H}from"./scrollable_list-DlG-2WSw.js";import{M as b}from"./message-Bb0z64dP.js";import"./short_number--sxn3OKQ.js";import"./numbers-CGZQWBYL.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./index-guCj-HqV.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./index-D1RqLxe8.js";import"./skeleton-_5CK2hDo.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";import"./loading_indicator-BBuNQ1GS.js";const c=D({heading:{id:"followed_tags",defaultMessage:"Followed hashtags"}}),F=({tag:a,onUnfollow:r})=>{var l;const u=_(),t=a.name,p=n.useCallback(()=>{u(k({tagId:t})).then(m=>(M(m)&&r(t),""))},[u,r,t]),s=parseInt(a.history[0].accounts)+parseInt(((l=a.history[1])==null?void 0:l.accounts)??"");return o.jsxDEV(T,{name:a.name,to:`/tags/${a.name}`,withGraph:!1,people:s,children:o.jsxDEV(C,{onClick:p,children:o.jsxDEV(b,{id:"account.unfollow",defaultMessage:"Unfollow"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:54,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:53,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:47,columnNumber:5},void 0)},ge=({multiColumn:a})=>{const r=B(),[u,t]=n.useState([]),[p,s]=n.useState(!1),[l,m]=n.useState(),x=!!l,h=n.useRef(null);n.useEffect(()=>{s(!0),g().then(({tags:e,links:d})=>{const i=d.refs.find(f=>f.rel==="next");return t(e),s(!1),m(i==null?void 0:i.uri),""}).catch(()=>{s(!1)})},[t,s,m]);const N=n.useCallback(()=>{s(!0),g(l).then(({tags:e,links:d})=>{const i=d.refs.find(f=>f.rel==="next");return s(!1),t(f=>[...f,...e]),m(i==null?void 0:i.uri),""}).catch(()=>{s(!1)})},[t,s,m,l]),w=n.useCallback(e=>{t(d=>d.filter(i=>i.name!==e))},[t]),v=n.useCallback(()=>{var e;(e=h.current)==null||e.scrollTop()},[]),j=o.jsxDEV(b,{id:"empty_column.followed_tags",defaultMessage:"You have not followed any hashtags yet. When you do, they will show up here."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:116,columnNumber:3},void 0);return o.jsxDEV(y,{bindToDocument:!a,ref:h,label:r.formatMessage(c.heading),children:[o.jsxDEV(S,{icon:"hashtag",iconComponent:V,title:r.formatMessage(c.heading),onClick:v,multiColumn:a,showBackButton:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:128,columnNumber:7},void 0),o.jsxDEV(H,{scrollKey:"followed_tags",emptyMessage:j,hasMore:x,isLoading:p,showLoading:p&&u.length===0,onLoadMore:N,trackScroll:!a,bindToDocument:!a,children:u.map(e=>o.jsxDEV(F,{tag:e,onUnfollow:w},e.name,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:148,columnNumber:9},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:137,columnNumber:7},void 0),o.jsxDEV(E,{children:[o.jsxDEV("title",{children:r.formatMessage(c.heading)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:153,columnNumber:9},void 0),o.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:154,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:152,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/followed_tags/index.tsx",lineNumber:123,columnNumber:5},void 0)};export{ge as default};
//# sourceMappingURL=followed_tags-index-CnFiQYE_.js.map
