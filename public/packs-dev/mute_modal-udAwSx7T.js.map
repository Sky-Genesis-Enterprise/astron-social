{"version":3,"file":"mute_modal-udAwSx7T.js","sources":["../../app/javascript/mastodon/features/ui/components/mute_modal.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { useCallback, useState } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { useDispatch } from 'react-redux';\n\n\nimport AlternateEmailIcon from '@/material-icons/400-24px/alternate_email.svg?react';\nimport CampaignIcon from '@/material-icons/400-24px/campaign.svg?react';\nimport ReplyIcon from '@/material-icons/400-24px/reply.svg?react';\nimport VisibilityOffIcon from '@/material-icons/400-24px/visibility_off.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off.svg?react';\nimport { muteAccount } from 'mastodon/actions/accounts';\nimport { closeModal } from 'mastodon/actions/modal';\nimport { Button } from 'mastodon/components/button';\nimport { CheckBox } from 'mastodon/components/check_box';\nimport { Icon } from 'mastodon/components/icon';\nimport { RadioButton } from 'mastodon/components/radio_button';\n\nconst messages = defineMessages({\n  minutes: { id: 'intervals.full.minutes', defaultMessage: '{number, plural, one {# minute} other {# minutes}}' },\n  hours: { id: 'intervals.full.hours', defaultMessage: '{number, plural, one {# hour} other {# hours}}' },\n  days: { id: 'intervals.full.days', defaultMessage: '{number, plural, one {# day} other {# days}}' },\n  indefinite: { id: 'mute_modal.indefinite', defaultMessage: 'Until I unmute them' },\n  hideFromNotifications: { id: 'mute_modal.hide_from_notifications', defaultMessage: 'Hide from notifications' },\n});\n\nconst RadioButtonLabel = ({ name, value, currentValue, onChange, label }) => (\n  <RadioButton\n    name={name}\n    value={value}\n    checked={value === currentValue}\n    onChange={onChange}\n    label={label}\n  />\n);\n\nRadioButtonLabel.propTypes = {\n  name: PropTypes.string,\n  value: PropTypes.oneOf([PropTypes.string, PropTypes.number, PropTypes.bool]),\n  currentValue: PropTypes.oneOf([PropTypes.string, PropTypes.number, PropTypes.bool]),\n  checked: PropTypes.bool,\n  onChange: PropTypes.func,\n  label: PropTypes.node,\n};\n\nexport const MuteModal = ({ accountId, acct }) => {\n  const intl = useIntl();\n  const dispatch = useDispatch();\n  const [notifications, setNotifications] = useState(true);\n  const [muteDuration, setMuteDuration] = useState('0');\n  const [expanded, setExpanded] = useState(false);\n\n  const handleClick = useCallback(() => {\n    dispatch(closeModal({ modalType: undefined, ignoreFocus: false }));\n    dispatch(muteAccount(accountId, notifications, muteDuration));\n  }, [dispatch, accountId, notifications, muteDuration]);\n\n  const handleCancel = useCallback(() => {\n    dispatch(closeModal({ modalType: undefined, ignoreFocus: false }));\n  }, [dispatch]);\n\n  const handleToggleNotifications = useCallback(({ target }) => {\n    setNotifications(target.checked);\n  }, [setNotifications]);\n\n  const handleChangeMuteDuration = useCallback(({ target }) => {\n    setMuteDuration(target.value);\n  }, [setMuteDuration]);\n\n  const handleToggleSettings = useCallback(() => {\n    setExpanded(!expanded);\n  }, [expanded, setExpanded]);\n\n  return (\n    <div className='modal-root__modal safety-action-modal'>\n      <div className='safety-action-modal__top'>\n        <div className='safety-action-modal__header'>\n          <div className='safety-action-modal__header__icon'>\n            <Icon icon={VolumeOffIcon} />\n          </div>\n\n          <div>\n            <h1><FormattedMessage id='mute_modal.title' defaultMessage='Mute user?' /></h1>\n            <div>@{acct}</div>\n          </div>\n        </div>\n\n        <div className='safety-action-modal__bullet-points'>\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={CampaignIcon} /></div>\n            <div><FormattedMessage id='mute_modal.they_wont_know' defaultMessage=\"They won't know they've been muted.\" /></div>\n          </div>\n\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={VisibilityOffIcon} /></div>\n            <div><FormattedMessage id='mute_modal.you_wont_see_posts' defaultMessage=\"They can still see your posts, but you won't see theirs.\" /></div>\n          </div>\n\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={AlternateEmailIcon} /></div>\n            <div><FormattedMessage id='mute_modal.you_wont_see_mentions' defaultMessage=\"You won't see posts that mention them.\" /></div>\n          </div>\n\n          <div>\n            <div className='safety-action-modal__bullet-points__icon'><Icon icon={ReplyIcon} /></div>\n            <div><FormattedMessage id='mute_modal.they_can_mention_and_follow' defaultMessage=\"They can mention and follow you, but you won't see them.\" /></div>\n          </div>\n        </div>\n      </div>\n\n      <div className={classNames('safety-action-modal__bottom', { active: expanded })}>\n        <div className='safety-action-modal__bottom__collapsible'>\n          <div className='safety-action-modal__field-group'>\n            <RadioButtonLabel name='duration' value='0' label={intl.formatMessage(messages.indefinite)} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='21600' label={intl.formatMessage(messages.hours, { number: 6 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='86400' label={intl.formatMessage(messages.hours, { number: 24 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='604800' label={intl.formatMessage(messages.days, { number: 7 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n            <RadioButtonLabel name='duration' value='2592000' label={intl.formatMessage(messages.days, { number: 30 })} currentValue={muteDuration} onChange={handleChangeMuteDuration} />\n          </div>\n\n          <div className='safety-action-modal__field-group'>\n            <CheckBox label={intl.formatMessage(messages.hideFromNotifications)} checked={notifications} onChange={handleToggleNotifications} />\n          </div>\n        </div>\n\n        <div className='safety-action-modal__actions'>\n          <button onClick={handleToggleSettings} className='link-button'>\n            {expanded ? <FormattedMessage id='mute_modal.hide_options' defaultMessage='Hide options' /> : <FormattedMessage id='mute_modal.show_options' defaultMessage='Show options' />}\n          </button>\n\n          <div className='spacer' />\n\n          <button onClick={handleCancel} className='link-button'>\n            <FormattedMessage id='confirmation_modal.cancel' defaultMessage='Cancel' />\n          </button>\n\n          <Button onClick={handleClick} autoFocus>\n            <FormattedMessage id='confirmations.mute.confirm' defaultMessage='Mute' />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nMuteModal.propTypes = {\n  accountId: PropTypes.string.isRequired,\n  acct: PropTypes.string.isRequired,\n};\n\nexport default MuteModal;\n"],"names":["messages","defineMessages","minutes","id","defaultMessage","hours","days","indefinite","hideFromNotifications","RadioButtonLabel","name","value","currentValue","onChange","label","jsxDEV","RadioButton","this","MuteModal","accountId","acct","intl","useIntl","dispatch","useDispatch","notifications","setNotifications","useState","muteDuration","setMuteDuration","expanded","setExpanded","handleClick","useCallback","closeModal","modalType","undefined","ignoreFocus","muteAccount","handleCancel","handleToggleNotifications","target","checked","handleChangeMuteDuration","handleToggleSettings","Icon","VolumeOffIcon","FormattedMessage","CampaignIcon","VisibilityOffIcon","AlternateEmailIcon","ReplyIcon","classNames","active","formatMessage","number","CheckBox","Button"],"mappings":"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"}