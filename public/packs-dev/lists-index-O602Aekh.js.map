{"version":3,"file":"lists-index-O602Aekh.js","sources":["../../app/javascript/mastodon/features/lists/index.tsx"],"sourcesContent":["import { useEffect, useMemo, useCallback } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\nimport { Link } from 'react-router-dom';\n\nimport AddIcon from '@/material-icons/400-24px/add.svg?react';\nimport ListAltIcon from '@/material-icons/400-24px/list_alt.svg?react';\nimport MoreHorizIcon from '@/material-icons/400-24px/more_horiz.svg?react';\nimport SquigglyArrow from '@/svg-icons/squiggly_arrow.svg?react';\nimport { fetchLists } from 'mastodon/actions/lists';\nimport { openModal } from 'mastodon/actions/modal';\nimport { Column } from 'mastodon/components/column';\nimport { ColumnHeader } from 'mastodon/components/column_header';\nimport { Dropdown } from 'mastodon/components/dropdown_menu';\nimport { Icon } from 'mastodon/components/icon';\nimport ScrollableList from 'mastodon/components/scrollable_list';\nimport { getOrderedLists } from 'mastodon/selectors/lists';\nimport { useAppSelector, useAppDispatch } from 'mastodon/store';\n\nconst messages = defineMessages({\n  heading: { id: 'column.lists', defaultMessage: 'Lists' },\n  create: { id: 'lists.create_list', defaultMessage: 'Create list' },\n  edit: { id: 'lists.edit', defaultMessage: 'Edit list' },\n  delete: { id: 'lists.delete', defaultMessage: 'Delete list' },\n  more: { id: 'status.more', defaultMessage: 'More' },\n});\n\nconst ListItem: React.FC<{\n  id: string;\n  title: string;\n}> = ({ id, title }) => {\n  const dispatch = useAppDispatch();\n  const intl = useIntl();\n\n  const handleDeleteClick = useCallback(() => {\n    dispatch(\n      openModal({\n        modalType: 'CONFIRM_DELETE_LIST',\n        modalProps: {\n          listId: id,\n        },\n      }),\n    );\n  }, [dispatch, id]);\n\n  const menu = useMemo(\n    () => [\n      { text: intl.formatMessage(messages.edit), to: `/lists/${id}/edit` },\n      { text: intl.formatMessage(messages.delete), action: handleDeleteClick },\n    ],\n    [intl, id, handleDeleteClick],\n  );\n\n  return (\n    <div className='lists__item'>\n      <Link to={`/lists/${id}`} className='lists__item__title'>\n        <Icon id='list-ul' icon={ListAltIcon} />\n        <span>{title}</span>\n      </Link>\n\n      <Dropdown\n        scrollKey='lists'\n        items={menu}\n        icon='ellipsis-h'\n        iconComponent={MoreHorizIcon}\n        title={intl.formatMessage(messages.more)}\n      />\n    </div>\n  );\n};\n\nconst Lists: React.FC<{\n  multiColumn?: boolean;\n}> = ({ multiColumn }) => {\n  const dispatch = useAppDispatch();\n  const intl = useIntl();\n  const lists = useAppSelector((state) => getOrderedLists(state));\n\n  useEffect(() => {\n    void dispatch(fetchLists());\n  }, [dispatch]);\n\n  const emptyMessage = (\n    <>\n      <span>\n        <FormattedMessage\n          id='lists.no_lists_yet'\n          defaultMessage='No lists yet.'\n        />\n        <br />\n        <FormattedMessage\n          id='lists.create_a_list_to_organize'\n          defaultMessage='Create a new list to organize your Home feed'\n        />\n      </span>\n\n      <SquigglyArrow className='empty-column-indicator__arrow' />\n    </>\n  );\n\n  return (\n    <Column\n      bindToDocument={!multiColumn}\n      label={intl.formatMessage(messages.heading)}\n    >\n      <ColumnHeader\n        title={intl.formatMessage(messages.heading)}\n        icon='list-ul'\n        iconComponent={ListAltIcon}\n        multiColumn={multiColumn}\n        extraButton={\n          <Link\n            to='/lists/new'\n            className='column-header__button'\n            title={intl.formatMessage(messages.create)}\n            aria-label={intl.formatMessage(messages.create)}\n          >\n            <Icon id='plus' icon={AddIcon} />\n          </Link>\n        }\n      />\n\n      <ScrollableList\n        scrollKey='lists'\n        emptyMessage={emptyMessage}\n        bindToDocument={!multiColumn}\n      >\n        {lists.map((list) => (\n          <ListItem key={list.id} id={list.id} title={list.title} />\n        ))}\n      </ScrollableList>\n\n      <Helmet>\n        <title>{intl.formatMessage(messages.heading)}</title>\n        <meta name='robots' content='noindex' />\n      </Helmet>\n    </Column>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default Lists;\n"],"names":["messages","defineMessages","heading","id","defaultMessage","create","edit","delete","more","ListItem","title","dispatch","useAppDispatch","intl","useIntl","handleDeleteClick","useCallback","openModal","modalType","modalProps","listId","menu","useMemo","text","formatMessage","to","action","jsxDEV","Link","Icon","ListAltIcon","this","Dropdown","MoreHorizIcon","Lists","multiColumn","lists","useAppSelector","state","getOrderedLists","useEffect","fetchLists","emptyMessage","Fragment","FormattedMessage","SquigglyArrow","Column","ColumnHeader","AddIcon","ScrollableList","map","list","Helmet"],"mappings":"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"}