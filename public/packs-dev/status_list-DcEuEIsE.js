var C=Object.defineProperty;var L=(a,n,o)=>n in a?C(a,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[n]=o;var g=(a,n,o)=>L(a,typeof n!="symbol"?n+"":n,o);import{j as e}from"./client-BG6VvM0b.js";import{L as x,P as u}from"./short_number--sxn3OKQ.js";import{u as M,a as N,cU as k,aM as T,I as w,aQ as P,cV as F,b as R,A as H,y as z,z as D,H as W,cW as U,cX as O}from"./useSelectableClick-DBo53LOf.js";import{u as j,r as m,d as G}from"./index-ykyyQSL-.js";import{G as A}from"./gif-CQLWVfmH.js";import{M as d}from"./message-Bb0z64dP.js";import{S as $}from"./chevron_left-R_fqLHXp.js";import{S as q}from"./close-DPVxbBbs.js";import{S as K}from"./info-C9UTTy-Y.js";import{D as Q}from"./content_warning-ZcoJE_cd.js";import{F as X}from"./follow_button-DdHXSblv.js";import{V as J}from"./verified_badge-BOKoz3CJ.js";import{d as v}from"./initial_state-BP3UcUr4.js";import{S as E}from"./status_quoted-D9176USW.js";import{L as Y}from"./load_gap-B92Gyxe3.js";import{S as Z}from"./scrollable_list-DlG-2WSw.js";const ee=()=>e.jsxDEV("div",{className:"regeneration-indicator",children:[e.jsxDEV(A,{src:"/loading.gif",staticSrc:"/loading.png",className:"regeneration-indicator__figure"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/regeneration_indicator.tsx",lineNumber:7,columnNumber:5},void 0),e.jsxDEV("div",{className:"regeneration-indicator__label",children:[e.jsxDEV("strong",{children:e.jsxDEV(d,{id:"regeneration_indicator.preparing_your_home_feed",defaultMessage:"Preparing your home feedâ€¦"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/regeneration_indicator.tsx",lineNumber:15,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/regeneration_indicator.tsx",lineNumber:14,columnNumber:7},void 0),e.jsxDEV(d,{id:"regeneration_indicator.please_stand_by",defaultMessage:"Please stand by."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/regeneration_indicator.tsx",lineNumber:20,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/regeneration_indicator.tsx",lineNumber:13,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/regeneration_indicator.tsx",lineNumber:6,columnNumber:1},void 0),h=G({follow:{id:"account.follow",defaultMessage:"Follow"},unfollow:{id:"account.unfollow",defaultMessage:"Unfollow"},previous:{id:"lightbox.previous",defaultMessage:"Previous"},next:{id:"lightbox.next",defaultMessage:"Next"},dismiss:{id:"follow_suggestions.dismiss",defaultMessage:"Don't show again"},friendsOfFriendsHint:{id:"follow_suggestions.hints.friends_of_friends",defaultMessage:"This profile is popular among the people you follow."},similarToRecentlyFollowedHint:{id:"follow_suggestions.hints.similar_to_recently_followed",defaultMessage:"This profile is similar to the profiles you have most recently followed."},featuredHint:{id:"follow_suggestions.hints.featured",defaultMessage:"This profile has been hand-picked by the {domain} team."},mostFollowedHint:{id:"follow_suggestions.hints.most_followed",defaultMessage:"This profile is one of the most followed on {domain}."},mostInteractionsHint:{id:"follow_suggestions.hints.most_interactions",defaultMessage:"This profile has been recently getting a lot of attention on {domain}."}}),se=({id:a})=>{const n=j();let o,s;switch(a){case"friends_of_friends":s=n.formatMessage(h.friendsOfFriendsHint),o=e.jsxDEV(d,{id:"follow_suggestions.personalized_suggestion",defaultMessage:"Personalized suggestion"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:70,columnNumber:7},void 0);break;case"similar_to_recently_followed":s=n.formatMessage(h.similarToRecentlyFollowedHint),o=e.jsxDEV(d,{id:"follow_suggestions.personalized_suggestion",defaultMessage:"Personalized suggestion"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:79,columnNumber:7},void 0);break;case"featured":s=n.formatMessage(h.featuredHint,{domain:v}),o=e.jsxDEV(d,{id:"follow_suggestions.curated_suggestion",defaultMessage:"Staff pick"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:88,columnNumber:7},void 0);break;case"most_followed":s=n.formatMessage(h.mostFollowedHint,{domain:v}),o=e.jsxDEV(d,{id:"follow_suggestions.popular_suggestion",defaultMessage:"Popular suggestion"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:97,columnNumber:7},void 0);break;case"most_interactions":s=n.formatMessage(h.mostInteractionsHint,{domain:v}),o=e.jsxDEV(d,{id:"follow_suggestions.popular_suggestion",defaultMessage:"Popular suggestion"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:106,columnNumber:7},void 0);break}return e.jsxDEV("div",{className:"inline-follow-suggestions__body__scrollable__card__text-stack__source",title:s,children:[e.jsxDEV(w,{id:"",icon:K},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:119,columnNumber:7},void 0),o]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:115,columnNumber:5},void 0)},oe=({id:a,sources:n})=>{const o=j(),s=N(c=>c.accounts.get(a)),t=s==null?void 0:s.fields.find(c=>!!c.verified_at),l=M(),i=m.useCallback(()=>{l(F({accountId:a}))},[a,l]);return e.jsxDEV("div",{className:"inline-follow-suggestions__body__scrollable__card",children:[e.jsxDEV(R,{icon:"",iconComponent:q,onClick:i,title:o.formatMessage(h.dismiss)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:140,columnNumber:7},void 0),e.jsxDEV("div",{className:"inline-follow-suggestions__body__scrollable__card__avatar",children:e.jsxDEV(x,{to:`/@${s==null?void 0:s.acct}`,"data-hover-card-account":s==null?void 0:s.id,children:e.jsxDEV(H,{account:s,size:72},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:149,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:148,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:147,columnNumber:7},void 0),e.jsxDEV("div",{className:"inline-follow-suggestions__body__scrollable__card__text-stack",children:[e.jsxDEV(x,{to:`/@${s==null?void 0:s.acct}`,"data-hover-card-account":s==null?void 0:s.id,children:e.jsxDEV(Q,{account:s},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:155,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:154,columnNumber:9},void 0),t?e.jsxDEV(J,{link:t.value},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:158,columnNumber:9},void 0):e.jsxDEV(se,{id:n[0]},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:160,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:153,columnNumber:7},void 0),e.jsxDEV(X,{accountId:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:164,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:139,columnNumber:5},void 0)},V="home/follow-suggestions",ie=({hidden:a})=>{const n=j(),o=M(),s=N(f=>f.suggestions.items),t=N(f=>f.suggestions.isLoading),l=N(f=>f.settings.getIn(["dismissed_banners",V])),i=m.useRef(null),[c,p]=m.useState(!1),[_,r]=m.useState(!0);m.useEffect(()=>{o(k())},[o]),m.useEffect(()=>{i.current&&(getComputedStyle(i.current).direction==="rtl"?(p(i.current.clientWidth-i.current.scrollLeft<i.current.scrollWidth),r(i.current.scrollLeft<0)):(p(i.current.scrollLeft>0),r(i.current.scrollLeft+i.current.clientWidth<i.current.scrollWidth)))},[r,p,s]);const b=m.useCallback(()=>{i.current&&(i.current.scrollLeft-=200)},[]),S=m.useCallback(()=>{i.current&&(i.current.scrollLeft+=200)},[]),I=m.useCallback(()=>{i.current&&(getComputedStyle(i.current).direction==="rtl"?(p(i.current.clientWidth-i.current.scrollLeft<i.current.scrollWidth),r(i.current.scrollLeft<0)):(p(i.current.scrollLeft>0),r(i.current.scrollLeft+i.current.clientWidth<i.current.scrollWidth)))},[r,p]),y=m.useCallback(()=>{o(T(["dismissed_banners",V],!0))},[o]);return l||!t&&s.length===0?null:a?e.jsxDEV("div",{className:"inline-follow-suggestions"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:256,columnNumber:12},void 0):e.jsxDEV("div",{className:"inline-follow-suggestions",children:[e.jsxDEV("div",{className:"inline-follow-suggestions__header",children:[e.jsxDEV("h3",{children:e.jsxDEV(d,{id:"follow_suggestions.who_to_follow",defaultMessage:"Who to follow"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:263,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:262,columnNumber:9},void 0),e.jsxDEV("div",{className:"inline-follow-suggestions__header__actions",children:[e.jsxDEV("button",{className:"link-button",onClick:y,children:e.jsxDEV(d,{id:"follow_suggestions.dismiss",defaultMessage:"Don't show again"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:271,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:270,columnNumber:11},void 0),e.jsxDEV(x,{to:"/explore/suggestions",className:"link-button",children:e.jsxDEV(d,{id:"follow_suggestions.view_all",defaultMessage:"View all"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:277,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:276,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:269,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:261,columnNumber:7},void 0),e.jsxDEV("div",{className:"inline-follow-suggestions__body",children:[e.jsxDEV("div",{className:"inline-follow-suggestions__body__scrollable",ref:i,onScroll:I,children:s.map(f=>e.jsxDEV(oe,{id:f.account_id,sources:f.sources},f.account_id,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:292,columnNumber:11},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:286,columnNumber:9},void 0),c&&e.jsxDEV("button",{className:"inline-follow-suggestions__body__scroll-button left",onClick:b,"aria-label":n.formatMessage(h.previous),children:e.jsxDEV("div",{className:"inline-follow-suggestions__body__scroll-button__icon",children:e.jsxDEV(w,{id:"",icon:$},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:307,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:306,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:301,columnNumber:9},void 0),_&&e.jsxDEV("button",{className:"inline-follow-suggestions__body__scroll-button right",onClick:S,"aria-label":n.formatMessage(h.next),children:e.jsxDEV("div",{className:"inline-follow-suggestions__body__scroll-button__icon",children:e.jsxDEV(w,{id:"",icon:P},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:319,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:318,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:313,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:285,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/inline_follow_suggestions.tsx",lineNumber:260,columnNumber:5},void 0)};class B extends z{constructor(){super(...arguments);g(this,"getFeaturedStatusCount",()=>this.props.featuredStatusIds?this.props.featuredStatusIds.size:0);g(this,"getCurrentStatusIndex",(o,s)=>s?this.props.featuredStatusIds.indexOf(o):this.props.statusIds.indexOf(o)+this.getFeaturedStatusCount());g(this,"handleMoveUp",(o,s)=>{const t=this.getCurrentStatusIndex(o,s)-1;this._selectChild(t,!0)});g(this,"handleMoveDown",(o,s)=>{const t=this.getCurrentStatusIndex(o,s)+1;this._selectChild(t,!1)});g(this,"handleLoadOlder",W(()=>{const{statusIds:o,lastId:s,onLoadMore:t}=this.props;t(s||(o.size>0?o.last():void 0))},300,{leading:!0}));g(this,"setRef",o=>{this.node=o})}_selectChild(o,s){const t=this.node.node,l=t.querySelector(`article:nth-of-type(${o+1}) .focusable`);l&&(s&&t.scrollTop>l.offsetTop?l.scrollIntoView(!0):!s&&t.scrollTop+t.clientHeight<l.offsetTop+l.offsetHeight&&l.scrollIntoView(!1),l.focus())}render(){const{statusIds:o,featuredStatusIds:s,onLoadMore:t,timelineId:l,...i}=this.props,{isLoading:c,isPartial:p}=i;if(p)return e.jsxDEV(ee,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_list.jsx",lineNumber:93,columnNumber:14},this);let _=c||o.size>0?o.map((r,b)=>{switch(r){case O:return e.jsxDEV(ie,{},"inline-follow-suggestions",!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_list.jsx",lineNumber:101,columnNumber:13},this);case U:return e.jsxDEV(Y,{disabled:c,param:b>0?o.get(b-1):null,onClick:t},"gap:"+o.get(b+1),!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_list.jsx",lineNumber:107,columnNumber:13},this);default:return e.jsxDEV(E,{id:r,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,contextType:l,scrollKey:this.props.scrollKey,showThread:!0,withCounters:this.props.withCounters},r,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_list.jsx",lineNumber:116,columnNumber:13},this)}}):null;return _&&s&&(_=s.map(r=>e.jsxDEV(E,{id:r,featured:!0,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,contextType:l,showThread:!0,withCounters:this.props.withCounters},`f-${r}`,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_list.jsx",lineNumber:133,columnNumber:7},this)).concat(_)),e.jsxDEV(Z,{...i,showLoading:c&&o.size===0,onLoadMore:t&&this.handleLoadOlder,ref:this.setRef,children:_},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_list.jsx",lineNumber:147,columnNumber:7},this)}}g(B,"propTypes",{scrollKey:u.string.isRequired,statusIds:D.list.isRequired,featuredStatusIds:D.list,onLoadMore:u.func,onScrollToTop:u.func,onScroll:u.func,trackScroll:u.bool,isLoading:u.bool,isPartial:u.bool,hasMore:u.bool,prepend:u.node,emptyMessage:u.node,alwaysPrepend:u.bool,withCounters:u.bool,timelineId:u.string,lastId:u.string,bindToDocument:u.bool}),g(B,"defaultProps",{trackScroll:!0});export{B as S};
//# sourceMappingURL=status_list-DcEuEIsE.js.map
