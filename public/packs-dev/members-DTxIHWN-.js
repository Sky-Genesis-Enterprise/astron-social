import{j as e}from"./client-BG6VvM0b.js";import{d as F,u as _,r as m}from"./index-ykyyQSL-.js";import{H as L}from"./Helmet-D0DLVOv1.js";import{k as y,L as M,S as R}from"./short_number--sxn3OKQ.js";import{c as T}from"./index.module-CVExFLDO.js";import{S as q}from"./list_alt-Ctquh2nL.js";import{S as H}from"./squiggly_arrow-DB0402nw.js";import{u as S,d7 as O,eb as P,dP as B,a as E,ap as z,dI as G,dH as V,o as $,bM as K,a9 as W,A as J}from"./useSelectableClick-DBo53LOf.js";import{d as Q}from"./api-uqk9CYtW.js";import{B as U}from"./index-JeRepxZU.js";import{C as X}from"./column-CXD4Tnpb.js";import{C as Y}from"./column_header-CtuyYpNB.js";import{C as Z}from"./column_search_header-BmO1Q-01.js";import{F as I}from"./counters-BuwkZXvq.js";import{D as ee}from"./content_warning-ZcoJE_cd.js";import{S as se}from"./scrollable_list-DlG-2WSw.js";import{V as ae}from"./verified_badge-BOKoz3CJ.js";import{e as te}from"./initial_state-BP3UcUr4.js";import{M as v}from"./message-Bb0z64dP.js";import"./numbers-CGZQWBYL.js";import"./index-DHslUCy5.js";import"./ready-DpOgoWSg.js";import"./load_locale-C-B7BkCQ.js";import"./index-lj9VQs0f.js";import"./index-guCj-HqV.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./skeleton-_5CK2hDo.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";import"./loading_indicator-BBuNQ1GS.js";const f=F({manageMembers:{id:"column.list_members",defaultMessage:"Manage list members"},placeholder:{id:"lists.search",defaultMessage:"Search"},enterSearch:{id:"lists.add_to_list",defaultMessage:"Add to list"},add:{id:"lists.add_member",defaultMessage:"Add"},remove:{id:"lists.remove_member",defaultMessage:"Remove"},back:{id:"column_back_button.label",defaultMessage:"Back"}}),ie=({accountId:s,listId:n,partOfList:o,onToggle:l})=>{const g=_(),u=S(),a=E(t=>t.accounts.get(s)),r=E(t=>s?t.relationships.get(s):void 0),b=s===te||(r==null?void 0:r.following)||(r==null?void 0:r.requested);m.useEffect(()=>{s&&u(z([s]))},[u,s]);const x=m.useCallback(()=>{o?(G(n,s),l(s)):b?(V(n,s),l(s)):u($({modalType:"CONFIRM_FOLLOW_TO_LIST",modalProps:{accountId:s,onConfirm:()=>{K(s).then(()=>V(n,s)).then(()=>(l(s),"")).catch(t=>{u(W(t))})}}}))},[u,s,b,n,o,l]);if(!a)return null;const p=a.fields.find(t=>!!t.verified_at);return e.jsxDEV("div",{className:"account",children:e.jsxDEV("div",{className:"account__wrapper",children:[e.jsxDEV(M,{className:"account__display-name",title:a.acct,to:`/@${a.acct}`,"data-hover-card-account":a.id,children:[e.jsxDEV("div",{className:"account__avatar-wrapper",children:e.jsxDEV(J,{account:a,size:36},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:125,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:124,columnNumber:11},void 0),e.jsxDEV("div",{className:"account__contents",children:[e.jsxDEV(ee,{account:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:129,columnNumber:13},void 0),e.jsxDEV("div",{className:"account__details",children:[e.jsxDEV(R,{value:a.followers_count,renderer:I},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:132,columnNumber:15},void 0)," ",p&&e.jsxDEV(ae,{link:p.value},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:137,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:131,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:128,columnNumber:11},void 0)]},a.id,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:117,columnNumber:9},void 0),e.jsxDEV("div",{className:"account__relationship",children:e.jsxDEV(U,{text:g.formatMessage(o?f.remove:f.add),secondary:o,onClick:x},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:144,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:143,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:116,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:115,columnNumber:5},void 0)},Pe=({multiColumn:s})=>{const n=S(),{id:o}=y(),l=_(),[g,u]=m.useState(!1),[a,r]=m.useState([]),[b,x]=m.useState([]),[p,t]=m.useState(!0),[j,h]=m.useState("remove");m.useEffect(()=>{o&&(t(!0),n(O(o)),P(o).then(i=>(n(B(i)),r(i.map(c=>c.id)),t(!1),"")).catch(()=>{t(!1)}))},[n,o]);const A=m.useCallback(()=>{h("add")},[h]),k=m.useCallback(()=>{h("remove"),u(!1)},[h]),C=m.useCallback(i=>{const c=a.includes(i);r(c?a.filter(D=>D!==i):[i,...a])},[a,r]),N=m.useRef(null),w=T(i=>{if(N.current&&N.current.abort(),i.trim().length===0){u(!1);return}t(!0),N.current=new AbortController,Q("GET","v1/accounts/search",{signal:N.current.signal,params:{q:i,resolve:!0}}).then(c=>(n(B(c)),x(c.map(D=>D.id)),t(!1),u(!0),"")).catch(()=>{u(!0),t(!1)})},500,{leading:!0,trailing:!0});let d;return j==="add"&&g?d=b:d=a,e.jsxDEV(X,{bindToDocument:!s,label:l.formatMessage(f.manageMembers),children:[e.jsxDEV(Y,{title:l.formatMessage(f.manageMembers),icon:"list-ul",iconComponent:q,multiColumn:s,showBackButton:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:263,columnNumber:7},void 0),e.jsxDEV(Z,{placeholder:l.formatMessage(f.placeholder),onBack:k,onSubmit:w,onActivate:A,active:j==="add"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:271,columnNumber:7},void 0),e.jsxDEV(se,{scrollKey:"list_members",trackScroll:!s,bindToDocument:!s,isLoading:p,showLoading:p&&d.length===0,hasMore:!1,footer:e.jsxDEV(e.Fragment,{children:[d.length>0&&e.jsxDEV("div",{className:"spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:288,columnNumber:48},void 0),e.jsxDEV("div",{className:"column-footer",children:e.jsxDEV(M,{to:`/lists/${o}`,className:"button button--block",children:e.jsxDEV(v,{id:"lists.done",defaultMessage:"Done"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:292,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:291,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:290,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:287,columnNumber:9},void 0),emptyMessage:j==="remove"?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{children:[e.jsxDEV(v,{id:"lists.no_members_yet",defaultMessage:"No members yet."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:301,columnNumber:17},void 0),e.jsxDEV("br",{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:305,columnNumber:17},void 0),e.jsxDEV(v,{id:"lists.find_users_to_add",defaultMessage:"Find users to add"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:306,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:300,columnNumber:15},void 0),e.jsxDEV(H,{className:"empty-column-indicator__arrow"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:312,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:299,columnNumber:9},void 0):e.jsxDEV(v,{id:"lists.no_results_found",defaultMessage:"No results found."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:315,columnNumber:9},void 0),children:d.map(i=>e.jsxDEV(ie,{accountId:i,listId:o,partOfList:d===a||a.includes(i),onToggle:C},i,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:323,columnNumber:9},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:279,columnNumber:7},void 0),e.jsxDEV(L,{children:[e.jsxDEV("title",{children:l.formatMessage(f.manageMembers)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:337,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:338,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:336,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/lists/members.tsx",lineNumber:259,columnNumber:5},void 0)};export{Pe as default,f as messages};
//# sourceMappingURL=members-DTxIHWN-.js.map
