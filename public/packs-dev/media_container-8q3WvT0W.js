var v=Object.defineProperty;var j=(a,e,t)=>e in a?v(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>j(a,typeof e!="symbol"?e+"":e,t);import{j as n}from"./client-BG6VvM0b.js";import{r as x}from"./index-ykyyQSL-.js";import{ec as l,bk as M,aO as O,c as E,V}from"./useSelectableClick-DBo53LOf.js";import{I as y}from"./hashtag--bDjNoob.js";import S from"./media_gallery-D8AVjLNK.js";import{a as C,M as k,b as P}from"./media_modal-Cl8wUetC.js";import{P as w}from"./poll-wjP7LpZg.js";import{C as B}from"./card-v59kuVL6.js";import{I as D}from"./intl_provider-D0J2t9XZ.js";import"./short_number--sxn3OKQ.js";import"./numbers-CGZQWBYL.js";import"./message-Bb0z64dP.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./index-guCj-HqV.js";import"./index-D1RqLxe8.js";import"./skeleton-_5CK2hDo.js";import"./alt_text_badge-C63PD6vv.js";import"./index-DTgehdR6.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./use-gesture-react.esm-D-KUJBjj.js";import"./loading_indicator-BBuNQ1GS.js";const I={MediaGallery:S,Video:V,Card:B,Poll:w,Hashtag:y,Audio:E};class lt extends x.PureComponent{constructor(){super(...arguments);s(this,"state",{media:null,index:null,lang:null,time:null,backgroundColor:null,options:null});s(this,"handleOpenMedia",(t,o,i)=>{document.body.classList.add("with-modals--active"),document.documentElement.style.marginRight=`${C()}px`,this.setState({media:t,index:o,lang:i})});s(this,"handleOpenVideo",(t,o)=>{const{components:i}=this.props,{media:r}=JSON.parse(i[o.componentIndex].getAttribute("data-props")),m=l(r);document.body.classList.add("with-modals--active"),document.documentElement.style.marginRight=`${C()}px`,this.setState({media:m,lang:t,options:o})});s(this,"handleCloseMedia",()=>{document.body.classList.remove("with-modals--active"),document.documentElement.style.marginRight="0",this.setState({media:null,index:null,time:null,backgroundColor:null,options:null})});s(this,"setBackgroundColor",t=>{this.setState({backgroundColor:t})})}render(){var i,r,m;const{components:t}=this.props;let o;return window.self===window.top&&(o=this.handleOpenVideo),n.jsxDEV(D,{children:n.jsxDEV(n.Fragment,{children:[Array.from(t).map((d,p)=>{const u=d.getAttribute("data-component"),N=I[u],{media:c,card:h,poll:g,hashtag:b,...f}=JSON.parse(d.getAttribute("data-props"));return Object.assign(f,{...c?{media:l(c)}:{},...h?{card:l(h)}:{},...g?{poll:M(g)}:{},...b?{hashtag:l(b)}:{},...u==="Video"?{componentIndex:p,onOpenVideo:o}:{onOpenMedia:this.handleOpenMedia}}),O.createPortal(x.createElement(N,{...f,key:`media-${p}`}),d)}),n.jsxDEV(k,{backgroundColor:this.state.backgroundColor,onClose:this.handleCloseMedia,children:this.state.media&&n.jsxDEV(P,{media:this.state.media,index:this.state.index||0,lang:this.state.lang,currentTime:(i=this.state.options)==null?void 0:i.startTime,autoPlay:(r=this.state.options)==null?void 0:r.autoPlay,volume:(m=this.state.options)==null?void 0:m.defaultVolume,onClose:this.handleCloseMedia,onChangeBackgroundColor:this.setBackgroundColor},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/containers/media_container.jsx",lineNumber:111,columnNumber:13},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/containers/media_container.jsx",lineNumber:109,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/containers/media_container.jsx",lineNumber:83,columnNumber:9},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/containers/media_container.jsx",lineNumber:82,columnNumber:7},this)}}export{lt as default};
//# sourceMappingURL=media_container-8q3WvT0W.js.map
