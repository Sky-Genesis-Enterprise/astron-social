import{j as e}from"./client-BG6VvM0b.js";import{r as n,u as j,d as D}from"./index-ykyyQSL-.js";import{H as B}from"./Helmet-D0DLVOv1.js";import{S as E}from"./block-fill-CXUWV14T.js";import{a as _,g as M}from"./api-uqk9CYtW.js";import{C as V}from"./column-CXD4Tnpb.js";import{C}from"./column_header-CtuyYpNB.js";import{u as S}from"./domain_blocks-DiDVA5xw.js";import{u as L}from"./useSelectableClick-DBo53LOf.js";import{B as y}from"./index-JeRepxZU.js";import{M as N}from"./message-Bb0z64dP.js";import{S as T}from"./scrollable_list-DlG-2WSw.js";import"./short_number--sxn3OKQ.js";import"./numbers-CGZQWBYL.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./scroll-BygYx8ga.js";import"./index-guCj-HqV.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";import"./loading_indicator-BBuNQ1GS.js";const h=async o=>{const a=await _().request({method:"GET",url:o??"/api/v1/domain_blocks"});return{domains:a.data,links:M(a)}},H=({domain:o})=>{const a=L(),r=n.useCallback(()=>{a(S(o))},[a,o]);return e.jsxDEV("div",{className:"domain",children:[e.jsxDEV("div",{className:"domain__domain-name",children:e.jsxDEV("strong",{children:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/domain.tsx",lineNumber:22,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/domain.tsx",lineNumber:21,columnNumber:7},void 0),e.jsxDEV("div",{className:"domain__buttons",children:e.jsxDEV(y,{onClick:r,children:e.jsxDEV(N,{id:"account.unblock_domain_short",defaultMessage:"Unblock"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/domain.tsx",lineNumber:27,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/domain.tsx",lineNumber:26,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/domain.tsx",lineNumber:25,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/domain.tsx",lineNumber:20,columnNumber:5},void 0)},p=D({heading:{id:"column.domain_blocks",defaultMessage:"Blocked domains"}}),le=({multiColumn:o})=>{const a=j(),[r,d]=n.useState([]),[f,i]=n.useState(!1),[l,u]=n.useState(),x=!!l,b=n.useRef(null);n.useEffect(()=>{i(!0),h().then(({domains:s,links:c})=>{const m=c.refs.find(t=>t.rel==="next");return i(!1),d(s),u(m==null?void 0:m.uri),""}).catch(()=>{i(!1)})},[i,d,u]);const g=n.useCallback(()=>{i(!0),h(l).then(({domains:s,links:c})=>{const m=c.refs.find(t=>t.rel==="next");return i(!1),d(t=>[...t,...s]),u(m==null?void 0:m.uri),""}).catch(()=>{i(!1)})},[i,d,u,l]),v=n.useCallback(()=>{var s;(s=b.current)==null||s.scrollTop()},[]),k=e.jsxDEV(N,{id:"empty_column.domain_blocks",defaultMessage:"There are no blocked domains yet."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:68,columnNumber:3},void 0);return e.jsxDEV(V,{bindToDocument:!o,ref:b,label:a.formatMessage(p.heading),children:[e.jsxDEV(C,{icon:"ban",iconComponent:E,title:a.formatMessage(p.heading),onClick:v,multiColumn:o,showBackButton:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:80,columnNumber:7},void 0),e.jsxDEV(T,{scrollKey:"domain_blocks",onLoadMore:g,hasMore:x,isLoading:f,showLoading:f&&r.length===0,emptyMessage:k,trackScroll:!o,bindToDocument:!o,children:r.map(s=>e.jsxDEV(H,{domain:s},s,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:100,columnNumber:9},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:89,columnNumber:7},void 0),e.jsxDEV(B,{children:[e.jsxDEV("title",{children:a.formatMessage(p.heading)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:105,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:106,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:104,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/domain_blocks/index.tsx",lineNumber:75,columnNumber:5},void 0)};export{le as default};
//# sourceMappingURL=domain_blocks-index--LZiwxjx.js.map
