import{j as e}from"./client-BG6VvM0b.js";import{u as y,r as n,d as k}from"./index-ykyyQSL-.js";import{H as C}from"./Helmet-D0DLVOv1.js";import{N as d}from"./short_number--sxn3OKQ.js";import{u as g,d as _,a as f,cF as c,cZ as l,c$ as b,aM as S}from"./useSelectableClick-DBo53LOf.js";import{c as R}from"./content_warning-ZcoJE_cd.js";import{a as x,b as w}from"./streaming-DlYu2k3L.js";import{D as N}from"./dismissable_banner-gWE579A1.js";import{d as j}from"./initial_state-BP3UcUr4.js";import{C as I}from"./column-CXD4Tnpb.js";import{C as P}from"./column_header-CtuyYpNB.js";import{S as L}from"./setting_toggle-j35gvWMe.js";import{S as $}from"./status_list_container-BG44PHcd.js";import{M as t}from"./message-Bb0z64dP.js";import"./numbers-CGZQWBYL.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./index-guCj-HqV.js";import"./skeleton-_5CK2hDo.js";import"./close-DPVxbBbs.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./index-Bvr20mGV.js";import"./status_list-DcEuEIsE.js";import"./gif-CQLWVfmH.js";import"./info-C9UTTy-Y.js";import"./follow_button-DdHXSblv.js";import"./index-JeRepxZU.js";import"./loading_indicator-BBuNQ1GS.js";import"./verified_badge-BOKoz3CJ.js";import"./status_quoted-D9176USW.js";import"./domain_blocks-DiDVA5xw.js";import"./reports-BY0N2xif.js";import"./status-D92xLx8p.js";import"./index.es-D--CQIAj.js";import"./card-v59kuVL6.js";import"./avatar_overlay-XCWEKsBg.js";import"./toString-CBWlLvSL.js";import"./status_content-BS1khha6.js";import"./poll-wjP7LpZg.js";import"./permissions-Djze7cmB.js";import"./visibility_icon-B5XmIQZP.js";import"./index-Ds3K_5LX.js";import"./load_gap-B92Gyxe3.js";import"./scrollable_list-DlG-2WSw.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";const p=k({title:{id:"column.firehose",defaultMessage:"Live feeds"}}),H=()=>{const s=g(),u=f(m=>m.getIn(["settings","firehose"])),i=n.useCallback((m,r)=>s(S(["firehose",...m],r)),[s]);return e.jsxDEV("div",{className:"column-settings",children:e.jsxDEV("section",{children:e.jsxDEV("div",{className:"column-settings__row",children:e.jsxDEV(L,{settings:u,settingPath:["onlyMedia"],onChange:i,label:e.jsxDEV(t,{id:"community.column_settings.media_only",defaultMessage:"Media only"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:44,columnNumber:20},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:40,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:39,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:38,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:37,columnNumber:5},void 0)},Te=({feedType:s,multiColumn:u})=>{const i=g(),m=y(),{signedIn:r}=_(),h=n.useRef(null),a=f(o=>o.getIn(["settings","firehose","onlyMedia"],!1)),v=f(o=>o.getIn(["timelines",`${s}${a?":media":""}`,"unread"],0)>0),D=n.useCallback(()=>{switch(s){case"community":i(c("COMMUNITY",{other:{onlyMedia:a}}));break;case"public":i(c("PUBLIC",{other:{onlyMedia:a}}));break;case"public:remote":i(c("REMOTE",{other:{onlyMedia:a,onlyRemote:!0}}));break}},[i,a,s]),E=n.useCallback(o=>{switch(s){case"community":i(b({maxId:o,onlyMedia:a}));break;case"public":i(l({maxId:o,onlyMedia:a}));break;case"public:remote":i(l({maxId:o,onlyMedia:a,onlyRemote:!0}));break}},[i,a,s]),B=n.useCallback(()=>{var o;return(o=h.current)==null?void 0:o.scrollTop()},[]);n.useEffect(()=>{let o;switch(s){case"community":i(b({onlyMedia:a})),r&&(o=i(w({onlyMedia:a})));break;case"public":i(l({onlyMedia:a})),r&&(o=i(x({onlyMedia:a})));break;case"public:remote":i(l({onlyMedia:a,onlyRemote:!0})),r&&(o=i(x({onlyMedia:a,onlyRemote:!0})));break}return()=>o==null?void 0:o()},[i,r,s,a]);const M=s==="community"?e.jsxDEV(N,{id:"community_timeline",children:e.jsxDEV(t,{id:"dismissable_banner.community_timeline",defaultMessage:"These are the most recent public posts from people whose accounts are hosted by {domain}.",values:{domain:j}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:126,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:125,columnNumber:3},void 0):e.jsxDEV(N,{id:"public_timeline",children:e.jsxDEV(t,{id:"dismissable_banner.public_timeline",defaultMessage:"These are the most recent public posts from people on the fediverse that people on {domain} follow.",values:{domain:j}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:134,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:133,columnNumber:3},void 0),V=s==="community"?e.jsxDEV(t,{id:"empty_column.community",defaultMessage:"The local timeline is empty. Write something publicly to get the ball rolling!"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:143,columnNumber:3},void 0):e.jsxDEV(t,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:148,columnNumber:3},void 0);return e.jsxDEV(I,{bindToDocument:!u,ref:h,label:m.formatMessage(p.title),children:[e.jsxDEV(P,{icon:"globe",iconComponent:R,active:v,title:m.formatMessage(p.title),onPin:D,onClick:B,multiColumn:u,children:e.jsxDEV(H,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:165,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:156,columnNumber:7},void 0),e.jsxDEV("div",{className:"account__section-headline",children:[e.jsxDEV(d,{exact:!0,to:"/public/local",children:e.jsxDEV(t,{tagName:"div",id:"firehose.local",defaultMessage:"This server"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:170,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:169,columnNumber:9},void 0),e.jsxDEV(d,{exact:!0,to:"/public/remote",children:e.jsxDEV(t,{tagName:"div",id:"firehose.remote",defaultMessage:"Other servers"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:174,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:173,columnNumber:9},void 0),e.jsxDEV(d,{exact:!0,to:"/public",children:e.jsxDEV(t,{tagName:"div",id:"firehose.all",defaultMessage:"All"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:178,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:177,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:168,columnNumber:7},void 0),e.jsxDEV($,{prepend:M,timelineId:`${s}${a?":media":""}`,onLoadMore:E,trackScroll:!0,scrollKey:"firehose",emptyMessage:V,bindToDocument:!u},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:182,columnNumber:7},void 0),e.jsxDEV(C,{children:[e.jsxDEV("title",{children:m.formatMessage(p.title)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:193,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:194,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:192,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/firehose/index.jsx",lineNumber:155,columnNumber:5},void 0)};export{Te as default};
//# sourceMappingURL=firehose-index-D_JnbExa.js.map
