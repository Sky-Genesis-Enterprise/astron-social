{"version":3,"file":"privacy_policy-index-BRbmCJ4g.js","sources":["../../app/javascript/mastodon/features/privacy_policy/index.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nimport { FormattedMessage, useIntl, defineMessages } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport { apiGetPrivacyPolicy } from 'mastodon/api/instance';\nimport type { ApiPrivacyPolicyJSON } from 'mastodon/api_types/instance';\nimport { Column } from 'mastodon/components/column';\nimport { FormattedDateWrapper } from 'mastodon/components/formatted_date';\nimport { Skeleton } from 'mastodon/components/skeleton';\n\nconst messages = defineMessages({\n  title: { id: 'privacy_policy.title', defaultMessage: 'Privacy Policy' },\n});\n\nconst PrivacyPolicy: React.FC<{\n  multiColumn: boolean;\n}> = ({ multiColumn }) => {\n  const intl = useIntl();\n  const [response, setResponse] = useState<ApiPrivacyPolicyJSON>();\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    apiGetPrivacyPolicy()\n      .then((data) => {\n        setResponse(data);\n        setLoading(false);\n        return '';\n      })\n      .catch(() => {\n        setLoading(false);\n      });\n  }, []);\n\n  return (\n    <Column\n      bindToDocument={!multiColumn}\n      label={intl.formatMessage(messages.title)}\n    >\n      <div className='scrollable privacy-policy'>\n        <div className='column-title'>\n          <h3>\n            <FormattedMessage\n              id='privacy_policy.title'\n              defaultMessage='Privacy Policy'\n            />\n          </h3>\n          <p>\n            <FormattedMessage\n              id='privacy_policy.last_updated'\n              defaultMessage='Last updated {date}'\n              values={{\n                date: loading ? (\n                  <Skeleton width='10ch' />\n                ) : (\n                  <FormattedDateWrapper\n                    value={response?.updated_at}\n                    year='numeric'\n                    month='short'\n                    day='2-digit'\n                  />\n                ),\n              }}\n            />\n          </p>\n        </div>\n\n        {response && (\n          <div\n            className='privacy-policy__body prose'\n            dangerouslySetInnerHTML={{ __html: response.content }}\n          />\n        )}\n      </div>\n\n      <Helmet>\n        <title>{intl.formatMessage(messages.title)}</title>\n        <meta name='robots' content='all' />\n      </Helmet>\n    </Column>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default PrivacyPolicy;\n"],"names":["messages","defineMessages","title","id","defaultMessage","PrivacyPolicy","multiColumn","intl","useIntl","response","setResponse","useState","loading","setLoading","useEffect","apiGetPrivacyPolicy","then","data","catch","jsxDEV","Column","formatMessage","FormattedMessage","this","date","Skeleton","FormattedDateWrapper","updated_at","__html","content","Helmet"],"mappings":"sjBAYA,MAAMA,EAAWC,EAAe,CAC9BC,MAAO,CAAEC,0BAA4BC,gCACvC,CAAC,EAEKC,EAEDA,CAAC,CAAEC,YAAAA,KAAkB,CACxB,MAAMC,EAAOC,EAAAA,EACP,CAACC,EAAUC,CAAW,EAAIC,WAAAA,EAC1B,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAE3CG,OAAAA,EAAAA,UAAU,IAAM,CACdC,EAAAA,EACGC,KAAMC,IACLP,EAAYO,CAAI,EAChBJ,EAAW,EAAK,EACT,GACR,EACAK,MAAM,IAAM,CACXL,EAAW,EAAK,CAAA,CACjB,CAAA,EACF,EAAE,EAGHM,EAAAA,OAACC,EAAA,CACC,eAAgB,CAACd,EACjB,MAAOC,EAAKc,cAAcrB,EAASE,KAAK,EAExC,SAAA,CAAAiB,EAAAA,OAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,EAAAA,OAAC,MAAA,CAAI,UAAU,eACb,SAAA,CAAAA,SAAC,KAAA,CACC,SAAAA,EAAAA,OAACG,EAAA,CACC,GAAE,uBACF,eAAe,gBAAA,EAFjB,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,EAAA,EAAAC,MAAA,CAEiC,EAHnC,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,EAAA,EAAAA,MAKA,WACC,IAAA,CACC,SAAAJ,EAAAA,OAACG,EAAA,CACC,GAAE,8BACF,eAAe,sBACf,OAAQ,CACNE,KAAMZ,EACJO,EAAAA,OAACM,EAAA,CAAS,MAAM,MAAA,EAAhB,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,EAAA,EAAAF,MAAsB,EAEtBJ,EAAAA,OAACO,EAAA,CACC,MAAOjB,GAAAA,YAAAA,EAAUkB,WACjB,KAAK,UACL,MAAM,QACN,IAAI,SAAA,EAJN,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,EAAA,EAAAJ,MAAA,CAIe,CAGnB,EAdF,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,EAAA,EAAAA,MAAA,CAcI,EAfN,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,EAAA,EAAAA,MAiBA,CAAA,CAAA,EAxBF,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,CAAA,EAAAA,MAyBA,EAECd,GACCU,EAAAA,OAAC,MAAA,CACC,UAAU,6BACV,wBAAyB,CAAES,OAAQnB,EAASoB,OAAAA,CAAQ,EAFtD,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,CAAA,EAAAN,MAAA,CAEwD,CAAA,EA/B5D,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,CAAA,EAAAA,MAkCA,WAECO,EAAA,CACC,SAAA,CAAAX,EAAAA,OAAC,QAAA,CAAOZ,SAAAA,EAAKc,cAAcrB,EAASE,KAAK,CAAA,EAAzC,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,CAAA,EAAAqB,MAA2C,EAC3CJ,SAAC,OAAA,CAAK,KAAK,SAAS,QAAQ,KAAA,EAA5B,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,CAAA,EAAAI,MAAiC,CAAA,CAAA,EAFnC,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,CAAA,EAAAA,MAGA,CAAA,CAAA,EA3CF,OAAA,GAAA,CAAA,SAAA,mGAAA,WAAA,GAAA,aAAA,CAAA,EAAAA,MAAA,CA8CJ"}