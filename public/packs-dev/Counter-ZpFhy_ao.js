var b=Object.defineProperty;var v=(o,s,a)=>s in o?b(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a;var d=(o,s,a)=>v(o,typeof s!="symbol"?s+"":s,a);import{j as e}from"./client-BG6VvM0b.js";import{r as j,F as c}from"./index-ykyyQSL-.js";import{c as f}from"./index-guCj-HqV.js";import{b as h}from"./index-D1RqLxe8.js";import{a as x}from"./api-uqk9CYtW.js";import{S as N}from"./skeleton-_5CK2hDo.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";const g=(o,s)=>{let a;return s!==0?o!==0?a=(s-o)/o:a=1:s===0&&o===0?a=0:a=-1,a};class y extends j.PureComponent{constructor(){super(...arguments);d(this,"state",{loading:!0,data:null})}componentDidMount(){const{measure:a,start_at:m,end_at:l,params:n}=this.props;x(!1).post("/api/v1/admin/measures",{keys:[a],start_at:m,end_at:l,[a]:n}).then(t=>{this.setState({loading:!1,data:t.data})}).catch(t=>{console.error(t)})}render(){const{label:a,href:m,target:l}=this.props,{loading:n,data:t}=this.state;let u;if(n)u=e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"sparkline__value__total",children:e.jsxDEV(N,{width:43},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:70,columnNumber:53},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:70,columnNumber:11},this),e.jsxDEV("span",{className:"sparkline__value__change",children:e.jsxDEV(N,{width:43},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:71,columnNumber:54},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:69,columnNumber:7},this);else{const i=t[0],r=i.previous_total&&g(i.previous_total*1,i.total*1);u=e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"sparkline__value__total",children:i.human_value||e.jsxDEV(c,{value:i.total},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:80,columnNumber:77},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:80,columnNumber:11},this),i.previous_total&&e.jsxDEV("span",{className:f("sparkline__value__change",{positive:r>0,negative:r<0}),children:[r>0&&"+",e.jsxDEV(c,{value:r,style:"percent"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:81,columnNumber:183},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:81,columnNumber:38},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:79,columnNumber:7},this)}const p=e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"sparkline__value",children:u},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:88,columnNumber:9},this),e.jsxDEV("div",{className:"sparkline__label",children:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:92,columnNumber:9},this),e.jsxDEV("div",{className:"sparkline__graph",children:!n&&e.jsxDEV(h.Sparklines,{width:259,height:55,data:t[0].data.map(i=>i.value*1),children:e.jsxDEV(h.SparklinesCurve,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:99,columnNumber:15},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:98,columnNumber:9},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:96,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:87,columnNumber:5},this);return m?e.jsxDEV("a",{href:m,className:"sparkline",target:l,children:p},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:108,columnNumber:9},this):e.jsxDEV("div",{className:"sparkline",children:p},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/admin/Counter.jsx",lineNumber:114,columnNumber:9},this)}}export{y as default};
//# sourceMappingURL=Counter-ZpFhy_ao.js.map
