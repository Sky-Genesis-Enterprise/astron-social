var De=Object.defineProperty;var Be=(a,o,t)=>o in a?De(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t;var B=(a,o,t)=>Be(a,typeof o!="symbol"?o+"":o,t);import{j as e,_ as z}from"./client-BG6VvM0b.js";import{u as g,r as m,d as N}from"./index-ykyyQSL-.js";import{c as V}from"./index-guCj-HqV.js";import{a as x,u as D,a4 as Me,j as P,a5 as Ce,a6 as Ve,I as K,O as ye,a7 as we,a8 as Te,a9 as ke,g as Ie,aa as X,i as Q,V as le,c as re,ab as J,ac as Ae,ad as Re,ae as Se,af as Le,ag as Pe,ah as Fe,ai as Oe,o as ue,aj as Ue,b as $e,y as He,z as ee,ak as ae}from"./useSelectableClick-DBo53LOf.js";import{H as qe}from"./Helmet-D0DLVOv1.js";import{G as Ge,g as de,F as ce,Z as Ye,a as We,M as Ke,b as Ze}from"./media_modal-Cl8wUetC.js";import{i as ze}from"./react-textarea-autosize.browser.development.esm-B_jXmAxZ.js";import{d as Xe,a as Qe,P as Je}from"./compose_form_container-RDgwB_YD.js";import{B as y}from"./index-JeRepxZU.js";import{L as fe}from"./loading_indicator-BBuNQ1GS.js";import{S as U}from"./skeleton-_5CK2hDo.js";import{W as ea,X as aa,Y as oa,Z as ta,_ as sa,$ as ia,a0 as na,a1 as ma,a2 as la,a3 as ra,a4 as ua,a5 as da,a6 as ca,a7 as fa,a8 as pa,a9 as ba,aa as ga}from"./content_warning-ZcoJE_cd.js";import{e as oe}from"./initial_state-BP3UcUr4.js";import{b as ha}from"./index-DHslUCy5.js";import{M as b}from"./message-Bb0z64dP.js";import{L as Na,d as _a,P as C}from"./short_number--sxn3OKQ.js";import{E as va}from"./embedded_status-CK9swRZV.js";import{a as xa}from"./api-uqk9CYtW.js";import{S as ja}from"./close-DPVxbBbs.js";import{G as Ea}from"./gif-CQLWVfmH.js";const $=(a,o,t)=>typeof o=="object"?a.formatMessage(o,t):o,Da=({alert:{key:a,title:o,message:t,values:s,action:i,onClick:n},dismissAfter:l})=>{const r=D(),u=g(),[d,f]=m.useState(!1);return m.useEffect(()=>{const c=setTimeout(()=>{f(!0)},1);return()=>{clearTimeout(c)}},[]),m.useEffect(()=>{const c=setTimeout(()=>{f(!1),setTimeout(()=>{r(Me({key:a}))},500)},l);return()=>{clearTimeout(c)}},[r,f,a,l]),e.jsxDEV("div",{className:V("notification-bar",{"notification-bar-active":d}),children:e.jsxDEV("div",{className:"notification-bar-wrapper",children:[o&&e.jsxDEV("span",{className:"notification-bar-title",children:$(u,o,s)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/alerts_controller.tsx",lineNumber:72,columnNumber:9},void 0),e.jsxDEV("span",{className:"notification-bar-message",children:$(u,t,s)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/alerts_controller.tsx",lineNumber:77,columnNumber:9},void 0),i&&e.jsxDEV("button",{className:"notification-bar-action",onClick:n,children:$(u,i,s)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/alerts_controller.tsx",lineNumber:82,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/alerts_controller.tsx",lineNumber:70,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/alerts_controller.tsx",lineNumber:65,columnNumber:5},void 0)},yo=()=>{const a=x(o=>o.alerts);return a.length===0?null:e.jsxDEV("div",{className:"notification-list",children:a.map((o,t)=>e.jsxDEV(Da,{alert:o,dismissAfter:5e3+t*1e3},o.key,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/alerts_controller.tsx",lineNumber:101,columnNumber:7},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/alerts_controller.tsx",lineNumber:99,columnNumber:5},void 0)},Ba="BUNDLE_FETCH_REQUEST",Ma="BUNDLE_FETCH_SUCCESS",Ca="BUNDLE_FETCH_FAIL";function Va(a){return{type:Ba,skipLoading:a}}function ya(a){return{type:Ma,skipLoading:a}}function wa(a,o){return{type:Ca,error:a,skipLoading:o}}const Ta=a=>({onFetch(){a(Va())},onFetchSuccess(){a(ya())},onFetchFail(o){a(wa(o))}}),ka=P(null,Ta)(ea),Ia=(a,o)=>({loading:a.get("loadingBar")[o.scope||"default"]}),wo=P(Ia)(Ce.WrappedComponent),Aa=a=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...a},m.createElement("path",{d:"M424-320q0-81 14.5-116.5T500-514q41-36 62.5-62.5T584-637q0-41-27.5-68T480-732q-51 0-77.5 31T365-638l-103-44q21-64 77-111t141-47q105 0 161.5 58.5T698-641q0 50-21.5 85.5T609-475q-49 47-59.5 71.5T539-320H424Zm56 240q-33 0-56.5-23.5T400-160q0-33 23.5-56.5T480-240q33 0 56.5 23.5T560-160q0 33-23.5 56.5T480-80Z"})),Ra=N({help:{id:"info_button.label",defaultMessage:"Help"}}),Sa=()=>{const a=g(),[o,t]=m.useState(!1),s=m.useRef(null),i=m.useId(),n=m.useCallback(()=>{t(!o)},[o,t]),[l,r]=Ve(n);return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{type:"button",className:V("help-button",{active:o}),ref:s,onClick:n,"aria-expanded":o,"aria-controls":i,"aria-label":a.formatMessage(Ra.help),children:e.jsxDEV(K,{id:"",icon:Aa},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:40,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:31,columnNumber:7},void 0),e.jsxDEV(ye,{show:o,rootClose:!0,placement:"top",onHide:n,offset:[5,5],target:s,children:({props:u})=>e.jsxDEV("div",{...u,className:"dialog-modal__popout prose dropdown-animation",role:"region",id:i,onMouseDown:l,onMouseUp:r,children:e.jsxDEV(b,{id:"info_button.what_is_alt_text",defaultMessage:`<h1>What is alt text?</h1>

            <p>Alt text provides image descriptions for people with vision impairments, low-bandwidth connections, or those seeking extra context.</p>

            <p>You can improve accessibility and understanding for everyone by writing clear, concise, and objective alt text.</p>

            <ul>
              <li>Capture important elements</li>
              <li>Summarize text in images</li>
              <li>Use regular sentence structure</li>
              <li>Avoid redundant information</li>
              <li>Focus on trends and key findings in complex visuals (like diagrams or maps)</li>
            </ul>`,values:{h1:d=>e.jsxDEV("h1",{children:d},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:76,columnNumber:29},void 0),p:d=>e.jsxDEV("p",{children:d},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:77,columnNumber:28},void 0),ul:d=>e.jsxDEV("ul",{children:d},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:78,columnNumber:29},void 0),li:d=>e.jsxDEV("li",{children:d},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:79,columnNumber:29},void 0)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:60,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:52,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:43,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/components/info_button.tsx",lineNumber:30,columnNumber:5},void 0)},S=N({placeholderVisual:{id:"alt_text_modal.describe_for_people_with_visual_impairments",defaultMessage:"Describe this for people with visual impairments…"},placeholderHearing:{id:"alt_text_modal.describe_for_people_with_hearing_impairments",defaultMessage:"Describe this for people with hearing impairments…"},discardMessage:{id:"confirmations.discard_edit_media.message",defaultMessage:"You have unsaved changes to the media description or preview, discard them anyway?"},discardConfirm:{id:"confirmations.discard_edit_media.confirm",defaultMessage:"Discard"}}),te=1500,La=({children:a,onSelectFile:o,mimeTypes:t})=>{const s=m.useRef(null),i=m.useCallback(()=>{var l;(l=s.current)==null||l.click()},[]),n=m.useCallback(l=>{var u;const r=(u=l.target.files)==null?void 0:u[0];r&&o(r)},[o]);return e.jsxDEV("label",{children:[e.jsxDEV(y,{onClick:i,children:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:85,columnNumber:7},void 0),e.jsxDEV("input",{id:"upload-modal__thumbnail",ref:s,type:"file",accept:t,onChange:n,style:{display:"none"}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:87,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:84,columnNumber:5},void 0)},Pa=({mediaId:a,position:o,onPositionChange:t})=>{const s=m.useRef(!1),i=m.useRef(null),[n,l]=o,r=Ie({to:{left:`${n*100}%`,top:`${l*100}%`},immediate:s.current}),u=x(_=>_.compose.get("media_attachments").find(v=>v.get("id")===a)),d=x(_=>oe?_.accounts.get(oe):void 0),[f,c]=m.useState(!1),E=m.useCallback(_=>{i.current=_},[]),h=m.useCallback(_=>{if(_.button!==0)return;const v=T=>{const{x:k,y:A}=X(i.current,T);s.current=!0,t([k,A])},M=()=>{c(!1),s.current=!1,document.removeEventListener("mouseup",M),document.removeEventListener("mousemove",v)},{x:F,y:w}=X(i.current,_.nativeEvent);c(!0),t([F,w]),document.addEventListener("mouseup",M),document.addEventListener("mousemove",v)},[c,t]);return u?u.get("type")==="image"?e.jsxDEV("div",{className:V("focal-point",{dragging:f}),children:[e.jsxDEV("img",{ref:E,draggable:!1,src:u.get("url"),alt:"",role:"presentation",onMouseDown:h},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:172,columnNumber:9},void 0),e.jsxDEV(Q.div,{className:"focal-point__reticle",style:r},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:180,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:171,columnNumber:7},void 0):u.get("type")==="gifv"?e.jsxDEV("div",{className:V("focal-point",{dragging:f}),children:[e.jsxDEV(Ge,{ref:E,src:u.get("url"),alt:"",onMouseDown:h},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:186,columnNumber:9},void 0),e.jsxDEV(Q.div,{className:"focal-point__reticle",style:r},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:192,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:185,columnNumber:7},void 0):u.get("type")==="video"?e.jsxDEV(le,{preview:u.get("preview_url"),frameRate:u.getIn(["meta","original","frame_rate"]),aspectRatio:`${u.getIn(["meta","original","width"])} / ${u.getIn(["meta","original","height"])}`,blurhash:u.get("blurhash"),src:u.get("url"),detailed:!0,editable:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:197,columnNumber:7},void 0):u.get("type")==="audio"?e.jsxDEV(re,{src:u.get("url"),poster:u.get("preview_url")??(d==null?void 0:d.avatar_static),duration:u.getIn(["meta","original","duration"],0),backgroundColor:u.getIn(["meta","colors","background"]),foregroundColor:u.getIn(["meta","colors","foreground"]),accentColor:u.getIn(["meta","colors","accent"]),editable:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:209,columnNumber:7},void 0):null:null},pe=m.forwardRef(({mediaId:a,previousDescription:o,previousPosition:t,onClose:s},i)=>{const n=g(),l=D(),r=x(p=>p.compose.get("media_attachments").find(O=>O.get("id")===a)),u=x(p=>p.compose.get("lang")),d=(r==null?void 0:r.getIn(["meta","focus","x"],0))??0,f=(r==null?void 0:r.getIn(["meta","focus","y"],0))??0,[c,E]=m.useState(o??(r==null?void 0:r.get("description"))??""),[h,_]=m.useState(t??[d/2+.5,f/-2+.5]),[v,M]=m.useState(!1),[F,w]=m.useState(!1),T=m.useRef(!!(o||t)),k=r==null?void 0:r.get("type"),A=Xe.length(c)<=te,ge=m.useCallback(p=>{E(p.target.value),T.current=!0},[E]),he=m.useCallback(p=>{l(we(a,p))},[l,a]),Ne=m.useCallback(p=>{_(p),T.current=!0},[_]),R=m.useCallback(()=>{w(!0),l(Te({id:a,description:c,focus:`${((h[0]-.5)*2).toFixed(2)},${((h[1]-.5)*-2).toFixed(2)}`})).then(()=>(w(!1),T.current=!1,s(),"")).catch(p=>{w(!1),l(ke(p))})},[l,w,a,s,h,c]),_e=m.useCallback(p=>{(p.ctrlKey||p.metaKey)&&p.key==="Enter"&&(p.preventDefault(),A&&R())},[R,A]),ve=m.useCallback(()=>{M(!0),aa().then(async({createWorker:p})=>{const[O,xe]=await Promise.all([z(()=>import("./worker.min-BiHNoQtr.js"),[]),z(()=>import("./tesseract-core.wasm-BtDHHsl_.js"),[])]),Z=await p("eng",1,{workerPath:O.default,corePath:xe.default,langPath:`${ha}/ocr/lang-data`,cacheMethod:"write"}),je=URL.createObjectURL(r==null?void 0:r.get("file")),Ee=await Z.recognize(je);return E(Ee.data.text),M(!1),await Z.terminate(),""}).catch(()=>{M(!1)})},[E,M,r]);return m.useImperativeHandle(i,()=>({getCloseConfirmationMessage:()=>T.current?{message:n.formatMessage(S.discardMessage),confirm:n.formatMessage(S.discardConfirm),props:{previousDescription:c,previousPosition:h}}:null}),[n,c,h]),e.jsxDEV("div",{className:"modal-root__modal dialog-modal",children:[e.jsxDEV("div",{className:"dialog-modal__header",children:[e.jsxDEV(y,{onClick:R,disabled:!A,children:F?e.jsxDEV(fe,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:403,columnNumber:13},void 0):e.jsxDEV(b,{id:"alt_text_modal.done",defaultMessage:"Done"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:405,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:401,columnNumber:11},void 0),e.jsxDEV("span",{className:"dialog-modal__header__title",children:e.jsxDEV(b,{id:"alt_text_modal.add_alt_text",defaultMessage:"Add alt text"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:413,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:412,columnNumber:11},void 0),e.jsxDEV(y,{secondary:!0,onClick:s,children:e.jsxDEV(b,{id:"alt_text_modal.cancel",defaultMessage:"Cancel"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:420,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:419,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:400,columnNumber:9},void 0),e.jsxDEV("div",{className:"dialog-modal__content",children:[e.jsxDEV("div",{className:"dialog-modal__content__preview",children:[e.jsxDEV(Pa,{mediaId:a,position:h,onPositionChange:Ne},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:429,columnNumber:13},void 0),(k==="audio"||k==="video")&&e.jsxDEV(La,{onSelectFile:he,mimeTypes:"image/jpeg,image/png,image/gif,image/heic,image/heif,image/webp,image/avif",children:e.jsxDEV(b,{id:"alt_text_modal.change_thumbnail",defaultMessage:"Change thumbnail"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:440,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:436,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:428,columnNumber:11},void 0),e.jsxDEV("form",{className:"dialog-modal__content__form simple_form",onSubmit:R,children:e.jsxDEV("div",{className:"input",children:[e.jsxDEV("div",{className:"label_input",children:[e.jsxDEV(ze,{id:"description",value:v?" ":c,onChange:ge,onKeyUp:_e,lang:u,placeholder:n.formatMessage(k==="audio"?S.placeholderHearing:S.placeholderVisual),minRows:3,disabled:v},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:454,columnNumber:17},void 0),v&&e.jsxDEV("div",{className:"label_input__loading-indicator",children:[e.jsxDEV(U,{width:"100%"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:471,columnNumber:21},void 0),e.jsxDEV(U,{width:"100%"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:472,columnNumber:21},void 0),e.jsxDEV(U,{width:"61%"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:473,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:470,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:453,columnNumber:15},void 0),e.jsxDEV("div",{className:"input__toolbar",children:[e.jsxDEV(Qe,{max:te,text:v?"":c},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:479,columnNumber:17},void 0),e.jsxDEV("div",{className:"spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:484,columnNumber:17},void 0),e.jsxDEV("button",{className:"link-button",onClick:ve,disabled:k!=="image"||v,children:e.jsxDEV(b,{id:"alt_text_modal.add_text_from_image",defaultMessage:"Add text from image"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:491,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:486,columnNumber:17},void 0),e.jsxDEV(Sa,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:497,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:478,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:452,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:448,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:427,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/alt_text_modal/index.tsx",lineNumber:399,columnNumber:7},void 0)});pe.displayName="AltTextModal";const Fa=({actions:a,onClick:o})=>e.jsxDEV("div",{className:"modal-root__modal actions-modal",children:e.jsxDEV("ul",{children:a.map((t,s)=>{if(t===null)return e.jsxDEV("li",{className:"dropdown-menu__separator"},`sep-${s}`,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/actions_modal.tsx",lineNumber:18,columnNumber:16},void 0);const{text:i,dangerous:n}=t;let l;return oa(t)?l=e.jsxDEV("button",{onClick:o,"data-index":s,children:i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/actions_modal.tsx",lineNumber:27,columnNumber:9},void 0):ta(t)?l=e.jsxDEV("a",{href:t.href,target:t.target??"_target","data-method":t.method,rel:"noopener",onClick:o,"data-index":s,children:i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/actions_modal.tsx",lineNumber:33,columnNumber:9},void 0):l=e.jsxDEV(Na,{to:t.to,onClick:o,"data-index":s,children:i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/actions_modal.tsx",lineNumber:46,columnNumber:9},void 0),e.jsxDEV("li",{className:V({"dropdown-menu__item--dangerous":n}),children:l},`${i}-${s}`,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/actions_modal.tsx",lineNumber:53,columnNumber:9},void 0)})},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/actions_modal.tsx",lineNumber:15,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/actions_modal.tsx",lineNumber:14,columnNumber:1},void 0),Oa=({media:a,statusId:o,options:t,onClose:s,onChangeBackgroundColor:i})=>{const n=x(f=>f.statuses.get(o)),l=n==null?void 0:n.get("account"),r=x(f=>{var c;return l?(c=f.accounts.get(l))==null?void 0:c.avatar_static:void 0});m.useEffect(()=>{const f=de(a.get("blurhash"));return i(f??{r:255,g:255,b:255}),()=>{i(null)}},[a,i]);const u=(n==null?void 0:n.getIn(["translation","language"]))??(n==null?void 0:n.get("language")),d=a.getIn(["translation","description"])??a.get("description");return e.jsxDEV("div",{className:"modal-root__modal audio-modal",children:[e.jsxDEV("div",{className:"audio-modal__container",children:e.jsxDEV(re,{src:a.get("url"),alt:d,lang:u,poster:a.get("preview_url")??r,duration:a.getIn(["meta","original","duration"],0),backgroundColor:a.getIn(["meta","colors","background"]),foregroundColor:a.getIn(["meta","colors","foreground"]),accentColor:a.getIn(["meta","colors","accent"]),startPlaying:t.autoPlay},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/audio_modal.tsx",lineNumber:45,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/audio_modal.tsx",lineNumber:44,columnNumber:7},void 0),e.jsxDEV("div",{className:"media-modal__overlay",children:n&&e.jsxDEV(ce,{statusId:n.get("id"),withOpenButton:!0,onClose:s},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/audio_modal.tsx",lineNumber:66,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/audio_modal.tsx",lineNumber:64,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/audio_modal.tsx",lineNumber:43,columnNumber:5},void 0)},se=N({cancel_reblog:{id:"status.cancel_reblog_private",defaultMessage:"Unboost"},reblog:{id:"status.reblog",defaultMessage:"Boost"}}),Ua=({status:a,onReblog:o,onClose:t})=>{const s=g(),i=x(h=>h.compose.get("default_privacy")),n=a.get("id"),l=a.get("visibility"),[r,u]=m.useState(l==="private"?"private":i),d=m.useCallback(h=>{u(h)},[]),f=m.useCallback(()=>{o(a,r),t()},[t,o,a,r]),c=m.useCallback(()=>{t()},[t]),E=m.useCallback(()=>document.getElementsByClassName("modal-root__container")[0],[]);return e.jsxDEV("div",{className:"modal-root__modal safety-action-modal",children:[e.jsxDEV("div",{className:"safety-action-modal__top",children:[e.jsxDEV("div",{className:"safety-action-modal__header",children:[e.jsxDEV("div",{className:"safety-action-modal__header__icon",children:e.jsxDEV(K,{icon:J,id:"retweet"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:64,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:63,columnNumber:11},void 0),e.jsxDEV("div",{children:[e.jsxDEV("h1",{children:a.get("reblogged")?e.jsxDEV(b,{id:"boost_modal.undo_reblog",defaultMessage:"Unboost post?"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:70,columnNumber:15},void 0):e.jsxDEV(b,{id:"boost_modal.reblog",defaultMessage:"Boost post?"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:75,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:68,columnNumber:13},void 0),e.jsxDEV("div",{children:e.jsxDEV(b,{id:"boost_modal.combo",defaultMessage:"You can press {combo} to skip this next time",values:{combo:e.jsxDEV("span",{className:"hotkey-combination",children:[e.jsxDEV("kbd",{children:"Shift"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:88,columnNumber:23},void 0),"+",e.jsxDEV(K,{id:"retweet",icon:J},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:88,columnNumber:40},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:87,columnNumber:19},void 0)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:82,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:81,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:67,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:62,columnNumber:9},void 0),e.jsxDEV("div",{className:"safety-action-modal__status",children:e.jsxDEV(va,{statusId:n},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:98,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:97,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:61,columnNumber:7},void 0),e.jsxDEV("div",{className:V("safety-action-modal__bottom"),children:e.jsxDEV("div",{className:"safety-action-modal__actions",children:[!a.get("reblogged")&&e.jsxDEV(Je,{noDirect:!0,value:r,container:E,onChange:d,disabled:l==="private"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:105,columnNumber:11},void 0),e.jsxDEV("div",{className:"spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:114,columnNumber:11},void 0),e.jsxDEV("button",{onClick:c,className:"link-button",children:e.jsxDEV(b,{id:"confirmation_modal.cancel",defaultMessage:"Cancel"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:117,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:116,columnNumber:11},void 0),e.jsxDEV(y,{onClick:f,text:s.formatMessage(a.get("reblogged")?se.cancel_reblog:se.reblog),autoFocus:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:123,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:103,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:102,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/boost_modal.tsx",lineNumber:60,columnNumber:5},void 0)},j=({title:a,message:o,confirm:t,onClose:s,onConfirm:i,secondary:n,onSecondary:l,closeWhenConfirm:r=!0})=>{const u=m.useCallback(()=>{r&&s(),i()},[s,i,r]),d=m.useCallback(()=>{s(),l==null||l()},[s,l]),f=m.useCallback(()=>{s()},[s]);return e.jsxDEV("div",{className:"modal-root__modal safety-action-modal",children:[e.jsxDEV("div",{className:"safety-action-modal__top",children:e.jsxDEV("div",{className:"safety-action-modal__confirmation",children:[e.jsxDEV("h1",{children:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:52,columnNumber:11},void 0),e.jsxDEV("p",{children:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:53,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:51,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:50,columnNumber:7},void 0),e.jsxDEV("div",{className:"safety-action-modal__bottom",children:e.jsxDEV("div",{className:"safety-action-modal__actions",children:[e.jsxDEV("button",{onClick:f,className:"link-button",children:e.jsxDEV(b,{id:"confirmation_modal.cancel",defaultMessage:"Cancel"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:60,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:59,columnNumber:11},void 0),n&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:68,columnNumber:15},void 0),e.jsxDEV("button",{onClick:d,className:"link-button",children:n},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:69,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:67,columnNumber:11},void 0),e.jsxDEV(y,{onClick:u,autoFocus:!0,children:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:76,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:58,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:57,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/confirmation_modal.tsx",lineNumber:49,columnNumber:5},void 0)},I=N({deleteAndRedraftTitle:{id:"confirmations.redraft.title",defaultMessage:"Delete & redraft post?"},deleteAndRedraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this status and re-draft it? Favorites and boosts will be lost, and replies to the original post will be orphaned."},deleteAndRedraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},deleteTitle:{id:"confirmations.delete.title",defaultMessage:"Delete post?"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this status?"},deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"}}),$a=({statusId:a,withRedraft:o,onClose:t})=>{const s=g(),i=D(),n=m.useCallback(()=>{i(Ae(a,o))},[i,a,o]);return e.jsxDEV(j,{title:s.formatMessage(o?I.deleteAndRedraftTitle:I.deleteTitle),message:s.formatMessage(o?I.deleteAndRedraftMessage:I.deleteMessage),confirm:s.formatMessage(o?I.deleteAndRedraftConfirm:I.deleteConfirm),onConfirm:n,onClose:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/delete_status.tsx",lineNumber:53,columnNumber:5},void 0)},H=N({deleteListTitle:{id:"confirmations.delete_list.title",defaultMessage:"Delete list?"},deleteListMessage:{id:"confirmations.delete_list.message",defaultMessage:"Are you sure you want to permanently delete this list?"},deleteListConfirm:{id:"confirmations.delete_list.confirm",defaultMessage:"Delete"}}),Ha=({listId:a,columnId:o,onClose:t})=>{const s=g(),i=D(),n=_a(),l=m.useCallback(()=>{i(Re(a)),o?i(Se(o)):n.push("/lists")},[i,n,o,a]);return e.jsxDEV(j,{title:s.formatMessage(H.deleteListTitle),message:s.formatMessage(H.deleteListMessage),confirm:s.formatMessage(H.deleteListConfirm),onConfirm:l,onClose:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/delete_list.tsx",lineNumber:50,columnNumber:5},void 0)},q=N({replyTitle:{id:"confirmations.reply.title",defaultMessage:"Overwrite post?"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"}}),qa=({status:a,onClose:o})=>{const t=g(),s=D(),i=m.useCallback(()=>{s(Le(a))},[s,a]);return e.jsxDEV(j,{title:t.formatMessage(q.replyTitle),message:t.formatMessage(q.replyMessage),confirm:t.formatMessage(q.replyConfirm),onConfirm:i,onClose:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/reply.tsx",lineNumber:38,columnNumber:5},void 0)},G=N({editTitle:{id:"confirmations.edit.title",defaultMessage:"Overwrite post?"},editConfirm:{id:"confirmations.edit.confirm",defaultMessage:"Edit"},editMessage:{id:"confirmations.edit.message",defaultMessage:"Editing now will overwrite the message you are currently composing. Are you sure you want to proceed?"}}),Ga=({statusId:a,onClose:o})=>{const t=g(),s=D(),i=m.useCallback(()=>{s(Pe(a))},[s,a]);return e.jsxDEV(j,{title:t.formatMessage(G.editTitle),message:t.formatMessage(G.editMessage),confirm:t.formatMessage(G.editConfirm),onConfirm:i,onClose:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/edit_status.tsx",lineNumber:37,columnNumber:5},void 0)},ie=N({unfollowTitle:{id:"confirmations.unfollow.title",defaultMessage:"Unfollow user?"},unfollowConfirm:{id:"confirmations.unfollow.confirm",defaultMessage:"Unfollow"}}),Ya=({account:a,onClose:o})=>{const t=g(),s=D(),i=m.useCallback(()=>{s(Fe(a.id))},[s,a.id]);return e.jsxDEV(j,{title:t.formatMessage(ie.unfollowTitle),message:e.jsxDEV(b,{id:"confirmations.unfollow.message",defaultMessage:"Are you sure you want to unfollow {name}?",values:{name:e.jsxDEV("strong",{children:["@",a.acct]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/unfollow.tsx",lineNumber:42,columnNumber:25},void 0)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/unfollow.tsx",lineNumber:39,columnNumber:7},void 0),confirm:t.formatMessage(ie.unfollowConfirm),onConfirm:i,onClose:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/unfollow.tsx",lineNumber:36,columnNumber:5},void 0)},Y=N({clearTitle:{id:"notifications.clear_title",defaultMessage:"Clear notifications?"},clearMessage:{id:"notifications.clear_confirmation",defaultMessage:"Are you sure you want to permanently clear all your notifications?"},clearConfirm:{id:"notifications.clear",defaultMessage:"Clear notifications"}}),Wa=({onClose:a})=>{const o=g(),t=D(),s=m.useCallback(()=>{t(Oe())},[t]);return e.jsxDEV(j,{title:o.formatMessage(Y.clearTitle),message:o.formatMessage(Y.clearMessage),confirm:o.formatMessage(Y.clearConfirm),onConfirm:s,onClose:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/clear_notifications.tsx",lineNumber:38,columnNumber:5},void 0)};async function Ka(){try{const a=await xa(!1).delete("/auth/sign_out",{headers:{Accept:"application/json"},withCredentials:!0});a.status===200&&a.data.redirect_to?window.location.href=a.data.redirect_to:console.error("Failed to log out, got an unexpected non-redirect response from the server",a)}catch(a){console.error("Failed to log out, response was an error",a)}}const W=N({logoutTitle:{id:"confirmations.logout.title",defaultMessage:"Log out?"},logoutMessage:{id:"confirmations.logout.message",defaultMessage:"Are you sure you want to log out?"},logoutConfirm:{id:"confirmations.logout.confirm",defaultMessage:"Log out"}}),Za=({onClose:a})=>{const o=g(),t=m.useCallback(()=>{Ka()},[]);return e.jsxDEV(j,{title:o.formatMessage(W.logoutTitle),message:o.formatMessage(W.logoutMessage),confirm:o.formatMessage(W.logoutConfirm),onConfirm:t,onClose:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/log_out.tsx",lineNumber:32,columnNumber:5},void 0)},ne=N({title:{id:"confirmations.follow_to_list.title",defaultMessage:"Follow user?"},confirm:{id:"confirmations.follow_to_list.confirm",defaultMessage:"Follow and add to list"}}),za=({accountId:a,onConfirm:o,onClose:t})=>{const s=g(),i=x(n=>n.accounts.get(a));return e.jsxDEV(j,{title:s.formatMessage(ne.title),message:e.jsxDEV(b,{id:"confirmations.follow_to_list.message",defaultMessage:"You need to be following {name} to add them to a list.",values:{name:e.jsxDEV("strong",{children:["@",i==null?void 0:i.acct]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/follow_to_list.tsx",lineNumber:35,columnNumber:25},void 0)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/follow_to_list.tsx",lineNumber:32,columnNumber:7},void 0),confirm:s.formatMessage(ne.confirm),onConfirm:o,onClose:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/follow_to_list.tsx",lineNumber:29,columnNumber:5},void 0)},L=N({title:{id:"confirmations.missing_alt_text.title",defaultMessage:"Add alt text?"},confirm:{id:"confirmations.missing_alt_text.confirm",defaultMessage:"Add alt text"},message:{id:"confirmations.missing_alt_text.message",defaultMessage:"Your post contains media without alt text. Adding descriptions helps make your content accessible to more people."},secondary:{id:"confirmations.missing_alt_text.secondary",defaultMessage:"Post anyway"}}),Xa=({onClose:a})=>{const o=g(),t=D(),s=x(l=>{var r;return(r=l.compose.get("media_attachments").find(u=>["image","gifv"].includes(u.get("type"))&&(u.get("description")??"").length===0))==null?void 0:r.get("id")}),i=m.useCallback(()=>{t(ue({modalType:"FOCAL_POINT",modalProps:{mediaId:s}}))},[t,s]),n=m.useCallback(()=>{t(Ue())},[t]);return e.jsxDEV(j,{title:o.formatMessage(L.title),message:o.formatMessage(L.message),confirm:o.formatMessage(L.confirm),secondary:o.formatMessage(L.secondary),onConfirm:i,onSecondary:n,onClose:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/confirmation_modals/missing_alt_text.tsx",lineNumber:71,columnNumber:5},void 0)},Qa=N({close:{id:"lightbox.close",defaultMessage:"Close"}}),Ja=({src:a,alt:o,onClose:t})=>{const s=g(),[i,n]=m.useState(!1),l=m.useCallback(()=>{n(u=>!u)},[n]),r=V("media-modal__navigation",{"media-modal__navigation--hidden":i});return e.jsxDEV("div",{className:"modal-root__modal media-modal",children:[e.jsxDEV("div",{className:"media-modal__closer",role:"presentation",onClick:t,children:e.jsxDEV(Ye,{src:a,width:400,height:400,alt:o,onClick:l},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/image_modal.tsx",lineNumber:39,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/image_modal.tsx",lineNumber:34,columnNumber:7},void 0),e.jsxDEV("div",{className:r,children:e.jsxDEV("div",{className:"media-modal__buttons",children:e.jsxDEV($e,{className:"media-modal__close",title:s.formatMessage(Qa.close),icon:"times",iconComponent:ja,onClick:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/image_modal.tsx",lineNumber:50,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/image_modal.tsx",lineNumber:49,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/image_modal.tsx",lineNumber:48,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/image_modal.tsx",lineNumber:33,columnNumber:5},void 0)},me=({loading:a,onClose:o,onRetry:t})=>{const s=m.useCallback(()=>{o(void 0,!1)},[o]),i=m.useCallback(()=>{t&&t()},[t]);return e.jsxDEV("div",{className:"modal-root__modal modal-placeholder","aria-busy":a,children:a?e.jsxDEV(fe,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:25,columnNumber:7},void 0):e.jsxDEV("div",{className:"modal-placeholder__error",children:[e.jsxDEV(Ea,{src:"/oops.gif",staticSrc:"/oops.png",className:"modal-placeholder__error__image"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:28,columnNumber:11},void 0),e.jsxDEV("div",{className:"modal-placeholder__error__message",children:[e.jsxDEV("p",{children:e.jsxDEV(b,{id:"bundle_modal_error.message",defaultMessage:"Something went wrong while loading this screen."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:36,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:35,columnNumber:13},void 0),e.jsxDEV("div",{className:"modal-placeholder__error__message__actions",children:[e.jsxDEV(y,{onClick:i,children:e.jsxDEV(b,{id:"bundle_modal_error.retry",defaultMessage:"Try again"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:44,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:43,columnNumber:15},void 0),e.jsxDEV(y,{onClick:s,className:"button button-tertiary",children:e.jsxDEV(b,{id:"bundle_modal_error.close",defaultMessage:"Close"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:50,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:49,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:42,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:34,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:27,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_placeholder.tsx",lineNumber:23,columnNumber:5},void 0)},eo=(a,{statusId:o})=>({status:a.getIn(["statuses",o])});class be extends He{componentDidMount(){const{media:o,onChangeBackgroundColor:t}=this.props,s=de(o.get("blurhash"));s&&t(s)}componentWillUnmount(){this.props.onChangeBackgroundColor(null)}render(){const{media:o,status:t,onClose:s}=this.props,i=this.props.options||{},n=t.getIn(["translation","language"])||t.get("language"),l=o.getIn(["translation","description"])||o.get("description");return e.jsxDEV("div",{className:"modal-root__modal video-modal",children:[e.jsxDEV("div",{className:"video-modal__container",children:e.jsxDEV(le,{preview:o.get("preview_url"),frameRate:o.getIn(["meta","original","frame_rate"]),aspectRatio:`${o.getIn(["meta","original","width"])} / ${o.getIn(["meta","original","height"])}`,blurhash:o.get("blurhash"),src:o.get("url"),startTime:i.startTime,startPlaying:i.autoPlay,startVolume:i.defaultVolume,onCloseVideo:s,autoFocus:!0,detailed:!0,alt:l,lang:n},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/video_modal.jsx",lineNumber:53,columnNumber:11},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/video_modal.jsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("div",{className:"media-modal__overlay",children:t&&e.jsxDEV(ce,{statusId:t.get("id"),withOpenButton:!0,onClose:s},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/video_modal.jsx",lineNumber:71,columnNumber:22},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/video_modal.jsx",lineNumber:70,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/video_modal.jsx",lineNumber:51,columnNumber:7},this)}}B(be,"propTypes",{media:ee.map.isRequired,statusId:C.string,status:ee.map,options:C.shape({startTime:C.number,autoPlay:C.bool,defaultVolume:C.number}),onClose:C.func.isRequired,onChangeBackgroundColor:C.func.isRequired});const ao=P(eo,null,null,{forwardRef:!0})(be),oo={MEDIA:()=>Promise.resolve({default:Ze}),VIDEO:()=>Promise.resolve({default:ao}),AUDIO:()=>Promise.resolve({default:Oa}),IMAGE:()=>Promise.resolve({default:Ja}),BOOST:()=>Promise.resolve({default:Ua}),CONFIRM:()=>Promise.resolve({default:j}),CONFIRM_DELETE_STATUS:()=>Promise.resolve({default:$a}),CONFIRM_DELETE_LIST:()=>Promise.resolve({default:Ha}),CONFIRM_REPLY:()=>Promise.resolve({default:qa}),CONFIRM_EDIT_STATUS:()=>Promise.resolve({default:Ga}),CONFIRM_UNFOLLOW:()=>Promise.resolve({default:Ya}),CONFIRM_CLEAR_NOTIFICATIONS:()=>Promise.resolve({default:Wa}),CONFIRM_LOG_OUT:()=>Promise.resolve({default:Za}),CONFIRM_FOLLOW_TO_LIST:()=>Promise.resolve({default:za}),CONFIRM_MISSING_ALT_TEXT:()=>Promise.resolve({default:Xa}),MUTE:ga,BLOCK:ba,DOMAIN_BLOCK:pa,REPORT:fa,ACTIONS:()=>Promise.resolve({default:Fa}),EMBED:ca,FOCAL_POINT:()=>Promise.resolve({default:pe}),LIST_ADDER:da,COMPARE_HISTORY:ua,FILTER:ra,SUBSCRIBED_LANGUAGES:la,INTERACTION:ma,CLOSED_REGISTRATIONS:na,IGNORE_NOTIFICATIONS:ia,ANNUAL_REPORT:sa};class to extends m.PureComponent{constructor(){super(...arguments);B(this,"state",{backgroundColor:null});B(this,"setBackgroundColor",t=>{this.setState({backgroundColor:t})});B(this,"renderLoading",()=>{const{onClose:t}=this.props;return e.jsxDEV(me,{loading:!0,onClose:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:114,columnNumber:12},this)});B(this,"renderError",t=>{const{onClose:s}=this.props;return e.jsxDEV(me,{...t,onClose:s},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:120,columnNumber:12},this)});B(this,"handleClose",(t=!1)=>{var n,l;const{onClose:s}=this.props,i=(l=(n=this._modal)==null?void 0:n.getCloseConfirmationMessage)==null?void 0:l.call(n);s(i,t)});B(this,"setModalRef",t=>{this._modal=t})}getSnapshotBeforeUpdate(){return{visible:!!this.props.type}}componentDidUpdate(t,s,{visible:i}){i?(document.body.classList.add("with-modals--active"),document.documentElement.style.marginRight=`${We()}px`):(document.body.classList.remove("with-modals--active"),document.documentElement.style.marginRight="0")}render(){const{type:t,props:s,ignoreFocus:i}=this.props,{backgroundColor:n}=this.state,l=!!t;return e.jsxDEV(Ke,{backgroundColor:n,onClose:this.handleClose,ignoreFocus:i,children:l&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(ka,{fetchComponent:oo[t],loading:this.renderLoading,error:this.renderError,renderDelay:200,children:r=>e.jsxDEV(r,{...s,onChangeBackgroundColor:this.setBackgroundColor,onClose:this.handleClose,ref:this.setModalRef},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:144,columnNumber:22},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:142,columnNumber:13},this),e.jsxDEV(qe,{children:e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:149,columnNumber:15},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:148,columnNumber:13},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:141,columnNumber:9},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/modal_root.jsx",lineNumber:139,columnNumber:7},this)}}const so={},io=a=>({ignoreFocus:a.getIn(["modal","ignoreFocus"]),type:a.getIn(["modal","stack",0,"modalType"],null),props:a.getIn(["modal","stack",0,"modalProps"],so)}),no=a=>({onClose(o,t=!1){a(o?ue({previousModalProps:o.props,modalType:"CONFIRM",modalProps:{message:o.message,confirm:o.confirm,onConfirm:()=>a(ae({modalType:void 0,ignoreFocus:{ignoreFocus:t}}))}}):ae({modalType:void 0,ignoreFocus:{ignoreFocus:t}}))}}),To=P(io,no)(to);export{yo as A,ka as B,wo as L,To as M};
//# sourceMappingURL=modal_container-CXWBdVnC.js.map
