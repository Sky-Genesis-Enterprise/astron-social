const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["media_container-8q3WvT0W.js","client-BG6VvM0b.js","index-ykyyQSL-.js","useSelectableClick-DBo53LOf.js","short_number--sxn3OKQ.js","numbers-CGZQWBYL.js","message-Bb0z64dP.js","api-uqk9CYtW.js","index-lj9VQs0f.js","initial_state-BP3UcUr4.js","ready-DpOgoWSg.js","index-DHslUCy5.js","load_locale-C-B7BkCQ.js","index-guCj-HqV.js","hashtag--bDjNoob.js","index-D1RqLxe8.js","skeleton-_5CK2hDo.js","media_gallery-D8AVjLNK.js","alt_text_badge-C63PD6vv.js","media_modal-Cl8wUetC.js","index-DTgehdR6.js","chevron_left-R_fqLHXp.js","close-DPVxbBbs.js","use-gesture-react.esm-D-KUJBjj.js","loading_indicator-BBuNQ1GS.js","poll-wjP7LpZg.js","card-v59kuVL6.js","intl_provider-D0J2t9XZ.js"])))=>i.map(i=>d[i]);
import{_ as R,c as N,j as V}from"../client-BG6VvM0b.js";import{I as F,d as B}from"../index-ykyyQSL-.js";import{R as u}from"../rails-ujs.esm-DLwK8N9E.js";import{a as O}from"../index-lj9VQs0f.js";import{l as U,e as $,t as G,a as K}from"../index-DHslUCy5.js";import{l as Y,g as z}from"../load_locale-C-B7BkCQ.js";import{r as J}from"../ready-DpOgoWSg.js";import"../initial_state-BP3UcUr4.js";function Q(){return R(()=>import("../dist-web-index-CJC0I6Gz.js"),[])}function W(){return/KAIOS/.test(navigator.userAgent)?Q().then(t=>{t.register()}):Promise.resolve()}document.addEventListener("DOMContentLoaded",function(){var t=0,r=function(){return new Date().getTime()+t++},i=function(e){return"["+e+"]$1"},s=function(e){return"_"+e+"_$1"},L=function(e,a,o){if(!e)return o.parentNode;if(typeof e=="function")return a&&console.warn("association-insertion-traversal is ignored, because association-insertion-node is given as a function."),e(o);if(typeof e=="string")return a?o[a](e):e==="this"?o:document.querySelector(e)},_=function(e){return e.parentElement.removeChild(e)},A=function(e,a){for(var o=e.previousElementSibling;o;){var c=o.matches(a);if(c)return o;o=o.previousElementSibling}},D=function(e,a){e.preventDefault(),e.stopPropagation();var o=a,c=o.getAttribute("data-association"),l=o.getAttribute("data-associations"),f=o.getAttribute("data-association-insertion-template"),T=o.getAttribute("data-association-insertion-method")||o.getAttribute("data-association-insertion-position")||"before",x=o.getAttribute("data-association-insertion-node"),S=o.getAttribute("data-association-insertion-traversal"),p=parseInt(o.getAttribute("data-count"),10),g=new RegExp("\\[new_"+c+"\\](.*?\\s)","g"),b=new RegExp("_new_"+c+"_(\\w*)","g"),v=r(),d=f.replace(g,i(v)),C=[],k=e;for(d===f&&(g=new RegExp("\\[new_"+l+"\\](.*?\\s)","g"),b=new RegExp("_new_"+l+"_(\\w*)","g"),d=f.replace(g,i(v))),d=d.replace(b,s(v)),C=[d],p=isNaN(p)?1:Math.max(p,1),p-=1;p;)v=r(),d=f.replace(g,i(v)),d=d.replace(b,s(v)),C.push(d),p-=1;var m=L(x,S,o);(!m||m.length===0)&&console.warn("Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct."),C.forEach(function(H,te){var I=H,M=new CustomEvent("cocoon:before-insert",{bubbles:!0,cancelable:!0,detail:[I,k]});if(m.dispatchEvent(M),!M.defaultPrevented){var w={before:"beforebegin",prepend:"afterbegin",append:"beforeend",after:"afterend"},y=w[T],E=m.insertAdjacentHTML(y,I);y===w.before?E=m.previousElementSibling:y===w.prepend?E=m.firstElementChild:y===w.append?E=m.lastElementChild:y===w.after&&(E=m.nextElementSibling);var j=new CustomEvent("cocoon:after-insert",{bubbles:!0,detail:[I,k,E]});m.dispatchEvent(j)}})},h=function(e,a){var o=a,c=o.getAttribute("data-wrapper-class")||"nested-fields",l=o.closest("."+c),f=l.parentNode,T=e;e.preventDefault(),e.stopPropagation();var x=new CustomEvent("cocoon:before-remove",{bubbles:!0,cancelable:!0,detail:[l,T]});if(f.dispatchEvent(x),!x.defaultPrevented){var S=f.getAttribute("data-remove-timeout")||0;setTimeout(function(){if(o.classList.contains("dynamic"))_(l);else{var p=A(o,"input[type=hidden]");p.value="1",l.style.display="none";for(var g=l.querySelectorAll("input[required]"),b=0;b<g.length;b++)g[b].removeAttribute("required")}var v=new CustomEvent("cocoon:after-remove",{bubbles:!0,detail:[l,T]});f.dispatchEvent(v)},S)}};document.addEventListener("click",function(e){for(var a=e.target;a&&a!==this;a=a.parentNode){if(a.matches(".add_fields")){D(e,a);return}if(a.matches(".remove_fields")){h(e,a);return}}},!1);var n=function(){for(var e=document.querySelectorAll(".remove_fields.existing.destroyed"),a=0;a<e.length;a++){var o=e[a],c=o.getAttribute("data-wrapper-class")||"nested-fields",l=o.closest("."+c);l.style.display="none"}};document.addEventListener("page:load",n),document.addEventListener("turbolinks:load",n),document.addEventListener("turbo:load",n),n()});const q=B({usernameTaken:{id:"username.taken",defaultMessage:"That username is taken. Try another"},passwordExceedsLength:{id:"password_confirmation.exceeds_maxlength",defaultMessage:"Password confirmation exceeds the maximum password length"},passwordDoesNotMatch:{id:"password_confirmation.mismatching",defaultMessage:"Password confirmation does not match"}});function X(){const{messages:t}=z(),r=document.documentElement.lang,i=new Intl.DateTimeFormat(r,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),s=new Intl.DateTimeFormat(r,{year:"numeric",month:"short",day:"numeric"}),L=new Intl.DateTimeFormat(r,{timeStyle:"short"}),_=({id:n,defaultMessage:e},a)=>{let o;return n&&(o=t[n]),o??(o=e),new F(o,r).format(a)};document.querySelectorAll(".emojify").forEach(n=>{n.innerHTML=$(n.innerHTML)}),document.querySelectorAll("time.formatted").forEach(n=>{const e=new Date(n.dateTime),a=i.format(e);n.title=a,n.textContent=a});const A=n=>{const e=new Date;return n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()},D=new F(t["relative_format.today"]??"Today at {time}",r);document.querySelectorAll("time.relative-formatted").forEach(n=>{const e=new Date(n.dateTime);let a;if(A(e)){const c=L.format(e);a=D.format({time:c})}else a=s.format(e);const o=n.dateTime.includes("T");n.title=o?i.format(e):s.format(e),n.textContent=a}),document.querySelectorAll("time.time-ago").forEach(n=>{const e=new Date(n.dateTime),a=new Date,o=n.dateTime.includes("T");n.title=o?i.format(e):s.format(e),n.textContent=G({formatMessage:_,formatDate:(c,l)=>new Intl.DateTimeFormat(r,l).format(c)},e,a.getTime(),a.getFullYear(),o)});const h=document.querySelectorAll("[data-component]");h.length>0&&R(async()=>{const{default:n}=await import("../media_container-8q3WvT0W.js");return{default:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27])).then(({default:n})=>{h.forEach(o=>{Array.from(o.children).forEach(c=>{o.removeChild(c)})});const e=document.createElement("div");return N.createRoot(e).render(V.jsxDEV(n,{locale:r,components:h},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/entrypoints/public.tsx",lineNumber:163,columnNumber:9},this)),document.body.appendChild(e),!0}).catch(n=>{console.error(n)}),u.delegate(document,"input#user_account_attributes_username","input",K(({target:n})=>{n instanceof HTMLInputElement&&(n.value&&n.value.length>0?O.get("/api/v1/accounts/lookup",{params:{acct:n.value}}).then(()=>(n.setCustomValidity(_(q.usernameTaken)),!0)).catch(()=>{n.setCustomValidity("")}):n.setCustomValidity(""))},500,{leading:!1,trailing:!0})),u.delegate(document,"#user_password,#user_password_confirmation","input",()=>{const n=document.querySelector("input#user_password"),e=document.querySelector("input#user_password_confirmation");!e||!n||(e.value&&e.value.length>n.maxLength?e.setCustomValidity(_(q.passwordExceedsLength)):n.value&&n.value!==e.value?e.setCustomValidity(_(q.passwordDoesNotMatch)):e.setCustomValidity(""))})}u.delegate(document,"#edit_profile input[type=file]","change",({target:t})=>{if(!(t instanceof HTMLInputElement))return;const r=document.querySelector(`img#${t.id}-preview`);if(!r)return;let i;t.files&&(i=t.files[0]);const s=i?URL.createObjectURL(i):r.dataset.originalSrc;s&&(r.src=s)});u.delegate(document,".input-copy input","click",({target:t})=>{t instanceof HTMLInputElement&&(t.focus(),t.select(),t.setSelectionRange(0,t.value.length))});u.delegate(document,".input-copy button","click",({target:t})=>{var i;if(!(t instanceof HTMLButtonElement))return;const r=(i=t.parentNode)==null?void 0:i.querySelector(".input-copy__wrapper input");r&&navigator.clipboard.writeText(r.value).then(()=>{const s=t.parentElement;return s&&(s.classList.add("copied"),setTimeout(()=>{s.classList.remove("copied")},700)),!0}).catch(s=>{console.error(s)})});const P=()=>{const t=document.querySelector(".sidebar ul"),r=document.querySelector("a.sidebar__toggle__icon");!t||!r||(t.classList.contains("visible")?(document.body.style.overflow="",r.setAttribute("aria-expanded","false")):(document.body.style.overflow="hidden",r.setAttribute("aria-expanded","true")),r.classList.toggle("active"),t.classList.toggle("visible"))};u.delegate(document,".sidebar__toggle__icon","click",()=>{P()});u.delegate(document,".sidebar__toggle__icon","keydown",t=>{(t.key===" "||t.key==="Enter")&&(t.preventDefault(),P())});u.delegate(document,"img.custom-emoji","mouseover",({target:t})=>{t instanceof HTMLImageElement&&t.dataset.original&&(t.src=t.dataset.original)});u.delegate(document,"img.custom-emoji","mouseout",({target:t})=>{t instanceof HTMLImageElement&&t.dataset.static&&(t.src=t.dataset.static)});const Z=(t,r)=>{t.disabled=r;const i=t.closest(".with_label");if(i){i.classList.toggle("disabled",t.disabled);const s=t.type==="checkbox"&&i.querySelector('input[type=hidden][value="0"]');s&&(s.disabled=t.disabled)}};u.delegate(document,"#account_statuses_cleanup_policy_enabled","change",({target:t})=>{!(t instanceof HTMLInputElement)||!t.form||t.form.querySelectorAll("input:not([type=hidden], #account_statuses_cleanup_policy_enabled), select").forEach(r=>{Z(r,!t.checked)})});u.delegate(document,"#registration_new_user,#new_user","submit",()=>{["user_website","user_confirm_password","registration_user_website","registration_user_confirm_password"].forEach(t=>{const r=document.querySelector(`input#${t}`);r&&(r.value="")})});u.delegate(document,".rules-list button","click",({target:t})=>{if(!(t instanceof HTMLElement))return;const r=t.closest("button");r&&(r.ariaExpanded==="true"?r.ariaExpanded="false":r.ariaExpanded="true")});function ee(){J(X).catch(t=>{console.error(t)})}U().then(Y).then(ee).then(W).catch(t=>{console.error(t)});
//# sourceMappingURL=public-DI4OPVZl.js.map
