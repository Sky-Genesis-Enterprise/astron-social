{"version":3,"file":"sign_up-DFEfB28I.js","sources":["../../../app/javascript/entrypoints/sign_up.ts"],"sourcesContent":["import axios from 'axios';\n\nimport ready from '../mastodon/ready';\n\nasync function checkConfirmation() {\n  const response = await axios.get('/api/v1/emails/check_confirmation', {\n    headers: { Accept: 'application/json' },\n    withCredentials: true,\n  });\n\n  if (response.status === 200 && response.data === true) {\n    window.location.href = '/start';\n  }\n}\n\nready(() => {\n  setInterval(() => {\n    void checkConfirmation();\n  }, 5000);\n\n  document\n    .querySelectorAll<HTMLButtonElement>('button.timer-button')\n    .forEach((button) => {\n      let counter = 30;\n\n      const container = document.createElement('span');\n\n      const updateCounter = () => {\n        container.innerText = ` (${counter})`;\n      };\n\n      updateCounter();\n\n      const countdown = setInterval(() => {\n        counter--;\n\n        if (counter === 0) {\n          button.disabled = false;\n          button.removeChild(container);\n          clearInterval(countdown);\n        } else {\n          updateCounter();\n        }\n      }, 1000);\n\n      button.appendChild(container);\n    });\n}).catch((e: unknown) => {\n  throw e;\n});\n"],"names":["checkConfirmation","response","axios","get","headers","Accept","withCredentials","status","data","window","location","href","ready","setInterval","document","querySelectorAll","forEach","button","counter","container","createElement","updateCounter","innerText","countdown","disabled","removeChild","clearInterval","appendChild","catch","e"],"mappings":"kFAIA,eAAeA,GAAoB,CACjC,MAAMC,EAAW,MAAMC,EAAMC,IAAI,oCAAqC,CACpEC,QAAS,CAAEC,OAAQ,kBAAA,EACnBC,gBAAiB,EAAA,CAClB,EAEGL,EAASM,SAAW,KAAON,EAASO,OAAS,KAC/CC,OAAOC,SAASC,KAAO,SAE3B,CAEAC,EAAM,IAAM,CACVC,YAAY,IAAM,CACXb,EAAAA,CAAkB,EACtB,GAAI,EAEPc,SACGC,iBAAoC,qBAAqB,EACzDC,QAASC,GAAW,CACnB,IAAIC,EAAU,GAEd,MAAMC,EAAYL,SAASM,cAAc,MAAM,EAEzCC,EAAgBA,IAAM,CAC1BF,EAAUG,UAAY,KAAKJ,CAAO,GAAA,EAGpCG,EAAAA,EAEA,MAAME,EAAYV,YAAY,IAAM,CAClCK,IAEIA,IAAY,GACdD,EAAOO,SAAW,GAClBP,EAAOQ,YAAYN,CAAS,EAC5BO,cAAcH,CAAS,GAEvBF,EAAAA,CACF,EACC,GAAI,EAEPJ,EAAOU,YAAYR,CAAS,CAAA,CAC7B,CACL,CAAC,EAAES,MAAOC,GAAe,CACvB,MAAMA,CACR,CAAC"}