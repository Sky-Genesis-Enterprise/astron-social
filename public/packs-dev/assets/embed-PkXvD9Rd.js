import{j as a,c as g}from"../client-BG6VvM0b.js";import{r as n}from"../index-ykyyQSL-.js";import{U as l,W as b,_ as N,$ as x,a as r,u as v,a2 as j,a3 as E}from"../useSelectableClick-DBo53LOf.js";import{D as S}from"../detailed_status-CwyM3hb_.js";import{i as p}from"../initial_state-BP3UcUr4.js";import{I as y}from"../intl_provider-D0J2t9XZ.js";import{m as D,a as w}from"../index-Ds3K_5LX.js";import{l as B}from"../index-DHslUCy5.js";import{r as I}from"../ready-DpOgoWSg.js";import"../short_number--sxn3OKQ.js";import"../numbers-CGZQWBYL.js";import"../message-Bb0z64dP.js";import"../api-uqk9CYtW.js";import"../index-lj9VQs0f.js";import"../load_locale-C-B7BkCQ.js";import"../index-guCj-HqV.js";import"../content_warning-ZcoJE_cd.js";import"../skeleton-_5CK2hDo.js";import"../formatted_date-kPcGS90C.js";import"../inline_account-CGFjWL6Y.js";import"../status-D92xLx8p.js";import"../index.es-D--CQIAj.js";import"../card-v59kuVL6.js";import"../avatar_overlay-XCWEKsBg.js";import"../toString-CBWlLvSL.js";import"../status_content-BS1khha6.js";import"../poll-wjP7LpZg.js";import"../permissions-Djze7cmB.js";import"../visibility_icon-B5XmIQZP.js";import"../media_gallery-D8AVjLNK.js";import"../alt_text_badge-C63PD6vv.js";import"../status_quoted-D9176USW.js";import"../domain_blocks-DiDVA5xw.js";import"../reports-BY0N2xif.js";import"../schedule_idle_task-CTsEu-tt.js";let m=!1,u;const P=e=>{m?e():u=e},R=()=>()=>{m||(m=!0,typeof u<"u"&&window.requestAnimationFrame(()=>{u()}))},V=D(),H=w(),_=({id:e})=>{const t=r(i=>V(i,{id:e})),o=r(i=>H(i,{id:e})),d=r(i=>i.meta.get("domain")),s=v(),c=R();n.useEffect(()=>{s(j(e,!1,!1))},[s,e]);const f=n.useCallback(()=>{s(E(e))},[s,e]);t&&c();const h=t==null?void 0:t.get("url");return a.jsxDEV("div",{className:"embed",children:[a.jsxDEV(S,{status:t,domain:d,pictureInPicture:o,onToggleHidden:f,withLogo:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/standalone/status/index.tsx",lineNumber:52,columnNumber:7},void 0),a.jsxDEV("a",{className:"embed__overlay",href:h,target:"_blank",rel:"noopener","aria-label":""},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/standalone/status/index.tsx",lineNumber:60,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/standalone/status/index.tsx",lineNumber:51,columnNumber:5},void 0)},k=({id:e})=>(n.useEffect(()=>{p&&l.dispatch(b(p))},[]),a.jsxDEV(y,{children:a.jsxDEV(N,{store:l,children:a.jsxDEV(x,{children:a.jsxDEV(_,{id:e},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/standalone/status/index.tsx",lineNumber:82,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/standalone/status/index.tsx",lineNumber:81,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/standalone/status/index.tsx",lineNumber:80,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/standalone/status/index.tsx",lineNumber:79,columnNumber:5},void 0));function A(){const e=document.getElementById("mastodon-status");if(e){const t=e.getAttribute("data-props");if(!t)return;const o=JSON.parse(t);g.createRoot(e).render(a.jsxDEV(k,{...o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/entrypoints/embed.tsx",lineNumber:20,columnNumber:17},this))}}function T(){I(A).catch(e=>{console.error(e)})}B().then(T).catch(e=>{console.error(e)});function G(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="setHeight")}window.addEventListener("message",e=>{if(!e.data||!G(e.data)||!window.parent)return;const t=e.data;document.body.style.overflow="hidden",P(()=>{var o;window.parent.postMessage({type:"setHeight",id:t.id,height:(o=document.getElementsByTagName("html")[0])==null?void 0:o.scrollHeight},"*")})});
//# sourceMappingURL=embed-PkXvD9Rd.js.map
