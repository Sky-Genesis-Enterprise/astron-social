import{a as s}from"./api-uqk9CYtW.js";import{cc as i,o as u,cd as l}from"./useSelectableClick-DBo53LOf.js";const r="DOMAIN_BLOCK_REQUEST",_="DOMAIN_BLOCK_FAIL",D="DOMAIN_UNBLOCK_REQUEST",O="DOMAIN_UNBLOCK_FAIL";function b(t){return(c,e)=>{c(m(t)),s().post("/api/v1/domain_blocks",{domain:t}).then(()=>{const o="@"+t,a=e().get("accounts").filter(n=>n.get("acct").endsWith(o)).valueSeq().map(n=>n.get("id"));c(i({domain:t,accounts:a}))}).catch(o=>{c(p(t,o))})}}function m(t){return{type:r,domain:t}}function p(t,c){return{type:_,domain:t,error:c}}function k(t){return(c,e)=>{c(I(t)),s().delete("/api/v1/domain_blocks",{params:{domain:t}}).then(()=>{const o="@"+t,a=e().get("accounts").filter(n=>n.get("acct").endsWith(o)).valueSeq().map(n=>n.get("id"));c(l({domain:t,accounts:a}))}).catch(o=>{c(A(t,o))})}}function I(t){return{type:D,domain:t}}function A(t,c){return{type:O,domain:t,error:c}}const M=t=>c=>c(u({modalType:"DOMAIN_BLOCK",modalProps:{domain:t.get("acct").split("@")[1],acct:t.get("acct"),accountId:t.get("id")}}));export{b,M as i,k as u};
//# sourceMappingURL=domain_blocks-DiDVA5xw.js.map
