import{j as e}from"./client-BG6VvM0b.js";import{r as a,u as F,d as Z}from"./index-ykyyQSL-.js";import{c}from"./index-guCj-HqV.js";import{H as q}from"./Helmet-D0DLVOv1.js";import{T as O}from"./index-Bvr20mGV.js";import{S as M}from"./edit-BBCPRxUI.js";import{S as W}from"./person-BiDPmDpQ.js";import{a as Y,dM as z,u as G,dN as J,I as y}from"./useSelectableClick-DBo53LOf.js";import{c as K}from"./onboarding-CE4RDXP9.js";import{B as Q}from"./index-JeRepxZU.js";import{C as X}from"./column-CXD4Tnpb.js";import{C as $}from"./column_header-CtuyYpNB.js";import{L as ee}from"./loading_indicator-BBuNQ1GS.js";import{e as C}from"./initial_state-BP3UcUr4.js";import{d as ae}from"./short_number--sxn3OKQ.js";import{M as n}from"./message-Bb0z64dP.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./numbers-CGZQWBYL.js";const S=t=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},a.createElement("path",{d:"M480-480ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h320v80H200v560h560v-320h80v320q0 33-23.5 56.5T760-120H200Zm40-160h480L570-480 450-320l-90-120-120 160Zm440-320v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80Z"})),d=Z({title:{id:"onboarding.profile.title",defaultMessage:"Profile setup"},uploadHeader:{id:"onboarding.profile.upload_header",defaultMessage:"Upload profile header"},uploadAvatar:{id:"onboarding.profile.upload_avatar",defaultMessage:"Upload profile picture"}}),w=t=>t.endsWith("missing.png")?null:t,ye=({multiColumn:t})=>{const i=Y(o=>C?o.accounts.get(C):void 0),[h,v]=a.useState((i==null?void 0:i.display_name)??""),[g,x]=a.useState(i?z(i.note)??"":""),[m,j]=a.useState(),[l,D]=a.useState(),[p,E]=a.useState((i==null?void 0:i.discoverable)??!0),[B,V]=a.useState(!1),[s,k]=a.useState(),H=a.createRef(),L=a.createRef(),N=G(),u=F(),_=ae(),R=a.useCallback(o=>{v(o.target.value)},[v]),A=a.useCallback(o=>{x(o.target.value)},[x]),T=a.useCallback(o=>{E(o.target.checked)},[E]),I=a.useCallback(o=>{var r;j((r=o.target.files)==null?void 0:r[0])},[j]),P=a.useCallback(o=>{var r;D((r=o.target.files)==null?void 0:r[0])},[D]),f=a.useMemo(()=>m?URL.createObjectURL(m):w((i==null?void 0:i.avatar)??"missing.png"),[m,i]),b=a.useMemo(()=>l?URL.createObjectURL(l):w((i==null?void 0:i.header)??"missing.png"),[l,i]),U=a.useCallback(()=>{V(!0),N(J({displayName:h,note:g,avatar:m,header:l,discoverable:p,indexable:p})).then(()=>(_.push("/start/follows"),N(K()),"")).catch(o=>{if(o.response){const{details:r}=o.response.data;k(r)}V(!1)})},[N,h,g,m,l,p,_]);return e.jsxDEV(X,{bindToDocument:!t,label:u.formatMessage(d.title),children:[e.jsxDEV($,{title:u.formatMessage(d.title),icon:"person",iconComponent:W,multiColumn:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:159,columnNumber:7},void 0),e.jsxDEV("div",{className:"scrollable scrollable--flex",children:[e.jsxDEV("div",{className:"simple_form app-form",children:[e.jsxDEV("div",{className:"onboarding__profile",children:[e.jsxDEV("label",{className:c("app-form__header-input",{selected:!!b,invalid:!!(s!=null&&s.header)}),title:u.formatMessage(d.uploadHeader),children:[e.jsxDEV("input",{type:"file",hidden:!0,ref:L,accept:"image/*",onChange:P},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:176,columnNumber:15},void 0),b&&e.jsxDEV("img",{src:b,alt:""},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:184,columnNumber:33},void 0),e.jsxDEV(y,{id:"",icon:b?M:S},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:186,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:169,columnNumber:13},void 0),e.jsxDEV("label",{className:c("app-form__avatar-input",{selected:!!f,invalid:!!(s!=null&&s.avatar)}),title:u.formatMessage(d.uploadAvatar),children:[e.jsxDEV("input",{type:"file",hidden:!0,ref:H,accept:"image/*",onChange:I},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:199,columnNumber:15},void 0),f&&e.jsxDEV("img",{src:f,alt:""},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:207,columnNumber:33},void 0),e.jsxDEV(y,{id:"",icon:f?M:S},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:209,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:192,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:168,columnNumber:11},void 0),e.jsxDEV("div",{className:"fields-group",children:e.jsxDEV("div",{className:c("input with_block_label",{field_with_errors:!!(s!=null&&s.display_name)}),children:[e.jsxDEV("label",{htmlFor:"display_name",children:e.jsxDEV(n,{id:"onboarding.profile.display_name",defaultMessage:"Display name"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:223,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:222,columnNumber:15},void 0),e.jsxDEV("span",{className:"hint",children:e.jsxDEV(n,{id:"onboarding.profile.display_name_hint",defaultMessage:"Your full name or your fun name…"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:229,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:228,columnNumber:15},void 0),e.jsxDEV("div",{className:"label_input",children:e.jsxDEV("input",{id:"display_name",type:"text",value:h,onChange:R,maxLength:30},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:235,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:234,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:217,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:216,columnNumber:11},void 0),e.jsxDEV("div",{className:"fields-group",children:e.jsxDEV("div",{className:c("input with_block_label",{field_with_errors:!!(s!=null&&s.note)}),children:[e.jsxDEV("label",{htmlFor:"note",children:e.jsxDEV(n,{id:"onboarding.profile.note",defaultMessage:"Bio"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:253,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:252,columnNumber:15},void 0),e.jsxDEV("span",{className:"hint",children:e.jsxDEV(n,{id:"onboarding.profile.note_hint",defaultMessage:"You can @mention other people or #hashtags…"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:259,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:258,columnNumber:15},void 0),e.jsxDEV("div",{className:"label_input",children:e.jsxDEV("textarea",{id:"note",value:g,onChange:A,maxLength:500},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:265,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:264,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:247,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:246,columnNumber:11},void 0),e.jsxDEV("label",{className:"app-form__toggle",children:[e.jsxDEV("div",{className:"app-form__toggle__label",children:[e.jsxDEV("strong",{children:e.jsxDEV(n,{id:"onboarding.profile.discoverable",defaultMessage:"Make my profile discoverable"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:278,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:277,columnNumber:15},void 0)," ",e.jsxDEV("span",{className:"recommended",children:e.jsxDEV(n,{id:"recommended",defaultMessage:"Recommended"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:284,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:283,columnNumber:15},void 0),e.jsxDEV("span",{className:"hint",children:e.jsxDEV(n,{id:"onboarding.profile.discoverable_hint",defaultMessage:"When you opt in to discoverability on Mastodon, your posts may appear in search results and trending, and your profile may be suggested to people with similar interests to you."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:290,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:289,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:276,columnNumber:13},void 0),e.jsxDEV("div",{className:"app-form__toggle__toggle",children:e.jsxDEV("div",{children:e.jsxDEV(O,{checked:p,onChange:T},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:299,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:298,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:297,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:275,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:167,columnNumber:9},void 0),e.jsxDEV("div",{className:"spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:308,columnNumber:9},void 0),e.jsxDEV("div",{className:"column-footer",children:e.jsxDEV(Q,{block:!0,onClick:U,disabled:B,children:B?e.jsxDEV(ee,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:313,columnNumber:13},void 0):e.jsxDEV(n,{id:"onboarding.profile.save_and_continue",defaultMessage:"Save and continue"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:315,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:311,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:310,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:166,columnNumber:7},void 0),e.jsxDEV(q,{children:[e.jsxDEV("title",{children:u.formatMessage(d.title)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:325,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:326,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:324,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/profile.tsx",lineNumber:155,columnNumber:5},void 0)};export{ye as Profile,ye as default};
//# sourceMappingURL=profile-DnmwYBHz.js.map
