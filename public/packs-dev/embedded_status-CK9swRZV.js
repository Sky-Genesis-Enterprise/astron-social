import{j as e}from"./client-BG6VvM0b.js";import{r as m}from"./index-ykyyQSL-.js";import{E as H,a as F,b as L}from"./embedded_status_content-Chida_hr.js";import{u as R,a as g,a3 as W,A as q,I as j}from"./useSelectableClick-DBo53LOf.js";import{D as P,ag as U}from"./content_warning-ZcoJE_cd.js";import{d as X}from"./short_number--sxn3OKQ.js";import{M as x}from"./message-Bb0z64dP.js";const Z=({statusId:u})=>{const f=X(),r=m.useRef(),b=R(),t=g(a=>a.statuses.get(u)),d=g(a=>a.accounts.get(t==null?void 0:t.get("account"))),E=m.useCallback(({clientX:a,clientY:s})=>{r.current=[a,s]},[r]),D=m.useCallback(({clientX:a,clientY:s,target:n,button:o,ctrlKey:v,metaKey:N})=>{const[y,A]=r.current??[0,0],[w,z]=[Math.abs(a-y),Math.abs(s-A)];let i=n;for(;i;){if(i.localName==="button"||i.localName==="a"||i.localName==="label")return;i=i.parentNode}if(w+z<5&&d){const _=`/@${d.acct}/${u}`;o===0&&!(v||N)?f.push(_):(o===1||o===0&&(v||N))&&window.open(_,"_blank","noopener")}r.current=null},[r,u,d,f]),B=m.useCallback(({currentTarget:a})=>{const s=a.querySelectorAll(".custom-emoji");for(const n of s){const o=n.getAttribute("data-original");o&&(n.src=o)}},[]),M=m.useCallback(({currentTarget:a})=>{const s=a.querySelectorAll(".custom-emoji");for(const n of s){const o=n.getAttribute("data-static");o&&(n.src=o)}},[]),V=m.useCallback(()=>{b(W(u))},[b,u]);if(!t)return null;const C=t.get("contentHtml"),c=t.get("spoilerHtml"),h=t.get("poll"),S=t.get("language"),k=t.get("mentions"),l=!t.get("hidden")||!c,p=t.get("media_attachments").size;return e.jsxDEV("div",{className:"notification-group__embedded-status",role:"button",tabIndex:-1,onMouseDown:E,onMouseUp:D,onMouseEnter:B,onMouseLeave:M,children:[e.jsxDEV("div",{className:"notification-group__embedded-status__account",children:[e.jsxDEV(q,{account:d,size:16},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:135,columnNumber:9},void 0),e.jsxDEV(P,{account:d},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:136,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:134,columnNumber:7},void 0),c&&e.jsxDEV(U,{text:c,onClick:V,expanded:l},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:140,columnNumber:7},void 0),(!c||l)&&e.jsxDEV(H,{className:"notification-group__embedded-status__content reply-indicator__content translate",content:C,language:S,mentions:k},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:148,columnNumber:7},void 0),l&&(h||p>0)&&e.jsxDEV("div",{className:"notification-group__embedded-status__attachments reply-indicator__attachments",children:[!!h&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(j,{icon:F,id:"bar-chart-4-bars"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:160,columnNumber:15},void 0),e.jsxDEV(x,{id:"reply_indicator.poll",defaultMessage:"Poll"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:161,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:159,columnNumber:9},void 0),p>0&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(j,{icon:L,id:"photo-library"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:169,columnNumber:15},void 0),e.jsxDEV(x,{id:"reply_indicator.attachments",defaultMessage:"{count, plural, one {# attachment} other {# attachments}}",values:{count:p}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:170,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:168,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:157,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications_v2/components/embedded_status.tsx",lineNumber:125,columnNumber:5},void 0)};export{Z as E};
//# sourceMappingURL=embedded_status-CK9swRZV.js.map
