import{j as a}from"./client-BG6VvM0b.js";import{u as N,r as d,d as B}from"./index-ykyyQSL-.js";import{u as x,a as h,n as E,dG as D,dH as b,dI as V,b as C,dJ as L,b7 as M,I as v}from"./useSelectableClick-DBo53LOf.js";import{S as k}from"./close-DPVxbBbs.js";import{S as g}from"./list_alt-Ctquh2nL.js";import"./api-uqk9CYtW.js";import{B as A}from"./index-JeRepxZU.js";import{C as S}from"./check_box-DKwkM5Q-.js";import{g as w}from"./lists-Cl-WnnjU.js";import{M as y}from"./message-Bb0z64dP.js";import"./short_number--sxn3OKQ.js";import"./numbers-CGZQWBYL.js";import"./index-DHslUCy5.js";import"./ready-DpOgoWSg.js";import"./initial_state-BP3UcUr4.js";import"./load_locale-C-B7BkCQ.js";import"./index-lj9VQs0f.js";import"./index-guCj-HqV.js";import"./done-stYzd4iP.js";const f=B({newList:{id:"lists.new_list_name",defaultMessage:"New list name"},createList:{id:"lists.create",defaultMessage:"Create"},close:{id:"lightbox.close",defaultMessage:"Close"}}),F=({id:s,title:l,checked:r,onChange:t})=>{const o=d.useCallback(u=>{t(s,u.target.checked)},[s,t]);return a.jsxDEV("label",{className:"lists__item",children:[a.jsxDEV("div",{className:"lists__item__title",children:[a.jsxDEV(v,{id:"list-ul",icon:g},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:56,columnNumber:9},void 0),a.jsxDEV("span",{children:l},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:57,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:55,columnNumber:7},void 0),a.jsxDEV(S,{value:s,checked:r,onChange:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:60,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:54,columnNumber:5},void 0)},T=({onCreate:s})=>{const l=N(),r=x(),[t,o]=d.useState(""),u=d.useCallback(({target:{value:i}})=>{o(i)},[o]),c=d.useCallback(()=>{t.trim().length!==0&&r(L({title:t})).then(i=>(M(i)&&(s(i.payload),o("")),""))},[o,r,s,t]);return a.jsxDEV("form",{className:"lists__item",onSubmit:c,children:[a.jsxDEV("label",{className:"lists__item__title",children:[a.jsxDEV(v,{id:"list-ul",icon:g},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:97,columnNumber:9},void 0),a.jsxDEV("input",{type:"text",value:t,onChange:u,maxLength:30,required:!0,placeholder:l.formatMessage(f.newList)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:99,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:96,columnNumber:7},void 0),a.jsxDEV(A,{text:l.formatMessage(f.createList),type:"submit"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:109,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:95,columnNumber:5},void 0)},se=({accountId:s,onClose:l})=>{const r=N(),t=x(),o=h(e=>e.accounts.get(s)),u=h(e=>w(e)),[c,i]=d.useState([]);d.useEffect(()=>{t(E()),D(s).then(e=>(i(e.map(n=>n.id)),"")).catch(()=>{})},[t,i,s]);const _=d.useCallback((e,n)=>{n?(i(m=>[e,...m]),b(e,s).catch(()=>{i(m=>m.filter(p=>p!==e))})):(i(m=>m.filter(p=>p!==e)),V(e,s).catch(()=>{i(m=>[e,...m])}))},[i,s]),j=d.useCallback(e=>{i(n=>[e.id,...n]),b(e.id,s).catch(()=>{i(n=>n.filter(m=>m!==e.id))})},[i,s]);return a.jsxDEV("div",{className:"modal-root__modal dialog-modal",children:[a.jsxDEV("div",{className:"dialog-modal__header",children:[a.jsxDEV(C,{className:"dialog-modal__header__close",title:r.formatMessage(f.close),icon:"times",iconComponent:k,onClick:l},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:176,columnNumber:9},void 0),a.jsxDEV("span",{className:"dialog-modal__header__title",children:a.jsxDEV(y,{id:"lists.add_to_lists",defaultMessage:"Add {name} to lists",values:{name:a.jsxDEV("strong",{children:["@",o==null?void 0:o.acct]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:188,columnNumber:29},void 0)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:185,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:184,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:175,columnNumber:7},void 0),a.jsxDEV("div",{className:"dialog-modal__content",children:a.jsxDEV("div",{className:"lists-scrollable",children:[a.jsxDEV(T,{onCreate:j},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:195,columnNumber:11},void 0),u.map(e=>a.jsxDEV(F,{id:e.id,title:e.title,checked:c.includes(e.id),onChange:_},e.id,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:198,columnNumber:11},void 0))]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:194,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:193,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/list_adder/index.tsx",lineNumber:174,columnNumber:5},void 0)};export{se as default};
//# sourceMappingURL=list_adder-index-BBnvNtRx.js.map
