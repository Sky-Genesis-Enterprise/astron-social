import{j as e}from"./client-BG6VvM0b.js";import{u as E,r as o,d as k}from"./index-ykyyQSL-.js";import{H as w}from"./Helmet-D0DLVOv1.js";import{bs as M,bt as v,d$ as S,e0 as y,bK as T,c3 as z,A as L,b as H,e1 as P,e2 as F,aM as I,o as C,e3 as $,e4 as O,I as Y}from"./useSelectableClick-DBo53LOf.js";import{P as K,S as G}from"./policy_controls-WEgV6-Gl.js";import{S as W}from"./inventory_2-CJnm9fSs.js";import{ak as J,b as V,S as A}from"./content_warning-ZcoJE_cd.js";import{C as R}from"./check_box-DKwkM5Q-.js";import{C as Q}from"./column-CXD4Tnpb.js";import{C as U}from"./column_header-CtuyYpNB.js";import{S as X}from"./scrollable_list-DlG-2WSw.js";import{c as Z}from"./index-guCj-HqV.js";import{d as ee,L as ie}from"./short_number--sxn3OKQ.js";import{S as te}from"./delete-D4JNeg_F.js";import{i as se}from"./reports-BY0N2xif.js";import"./initial_state-BP3UcUr4.js";import{a as ae}from"./numbers-CGZQWBYL.js";import{S as oe}from"./setting_toggle-j35gvWMe.js";import{M as q}from"./message-Bb0z64dP.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./dropdown_selector-BZah7_41.js";import"./info-C9UTTy-Y.js";import"./skeleton-_5CK2hDo.js";import"./done-stYzd4iP.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";import"./loading_indicator-BBuNQ1GS.js";import"./index-Bvr20mGV.js";const ne=J(),N=k({accept:{id:"notification_requests.accept",defaultMessage:"Accept"},dismiss:{id:"notification_requests.dismiss",defaultMessage:"Dismiss"},view:{id:"notification_requests.view",defaultMessage:"View notifications"},mute:{id:"account.mute",defaultMessage:"Mute @{name}"},block:{id:"account.block",defaultMessage:"Block @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},more:{id:"status.more",defaultMessage:"More"}}),ue=({id:s,accountId:d,notificationsCount:u,checked:r,showCheckbox:m,toggleCheck:t})=>{const n=M(),i=v(b=>ne(b,d)),l=E(),{push:h}=ee(),p=o.useCallback(()=>{n(S({id:s}))},[n,s]),j=o.useCallback(()=>{n(y({id:s}))},[n,s]),g=o.useCallback(()=>{n(T(i))},[n,i]),x=o.useCallback(()=>{n(z(i))},[n,i]),_=o.useCallback(()=>{n(se(i))},[n,i]),D=o.useCallback(()=>{h(`/notifications/requests/${s}`)},[h,s]),B=[{text:l.formatMessage(N.view),action:D},null,{text:l.formatMessage(N.accept),action:j},null,{text:l.formatMessage(N.mute,{name:i.username}),action:g,dangerous:!0},{text:l.formatMessage(N.block,{name:i.username}),action:x,dangerous:!0},{text:l.formatMessage(N.report,{name:i.username}),action:_,dangerous:!0}],a=o.useCallback(()=>{t(s)},[t,s]),f=o.useCallback(b=>{m&&(t(s),b.preventDefault(),b.stopPropagation())},[t,s,m]);return e.jsxDEV("div",{className:Z("notification-request",m&&"notification-request--forced-checkbox"),onClick:f,children:[e.jsxDEV("div",{className:"notification-request__checkbox","aria-hidden":!m,children:e.jsxDEV(R,{checked:r,onChange:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:92,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:91,columnNumber:7},void 0),e.jsxDEV(ie,{to:`/notifications/requests/${s}`,className:"notification-request__link",onClick:f,title:i==null?void 0:i.acct,children:[e.jsxDEV(L,{account:i,size:40,counter:ae(u)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:95,columnNumber:9},void 0),e.jsxDEV("div",{className:"notification-request__name",children:[e.jsxDEV("div",{className:"notification-request__name__display-name",children:e.jsxDEV("bdi",{children:e.jsxDEV("strong",{dangerouslySetInnerHTML:{__html:i==null?void 0:i.get("display_name_html")}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:99,columnNumber:18},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:99,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:98,columnNumber:11},void 0),e.jsxDEV("span",{children:["@",i==null?void 0:i.get("acct")]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:102,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:97,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:94,columnNumber:7},void 0),e.jsxDEV("div",{className:"notification-request__actions",children:[e.jsxDEV(H,{iconComponent:te,onClick:p,title:l.formatMessage(N.dismiss)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:107,columnNumber:9},void 0),e.jsxDEV(V,{items:B,icon:"ellipsis-h",iconComponent:A,title:l.formatMessage(N.more)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:108,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:106,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/components/notification_request.jsx",lineNumber:90,columnNumber:5},void 0)},c=k({title:{id:"notification_requests.title",defaultMessage:"Filtered notifications"},maximize:{id:"notification_requests.maximize",defaultMessage:"Maximize"},more:{id:"status.more",defaultMessage:"More"},acceptMultiple:{id:"notification_requests.accept_multiple",defaultMessage:"{count, plural, one {Accept # request…} other {Accept # requests…}}"},dismissMultiple:{id:"notification_requests.dismiss_multiple",defaultMessage:"{count, plural, one {Dismiss # request…} other {Dismiss # requests…}}"},confirmAcceptMultipleTitle:{id:"notification_requests.confirm_accept_multiple.title",defaultMessage:"Accept notification requests?"},confirmAcceptMultipleMessage:{id:"notification_requests.confirm_accept_multiple.message",defaultMessage:"You are about to accept {count, plural, one {one notification request} other {# notification requests}}. Are you sure you want to proceed?"},confirmAcceptMultipleButton:{id:"notification_requests.confirm_accept_multiple.button",defaultMessage:"{count, plural, one {Accept request} other {Accept requests}}"},confirmDismissMultipleTitle:{id:"notification_requests.confirm_dismiss_multiple.title",defaultMessage:"Dismiss notification requests?"},confirmDismissMultipleMessage:{id:"notification_requests.confirm_dismiss_multiple.message",defaultMessage:"You are about to dismiss {count, plural, one {one notification request} other {# notification requests}}. You won't be able to easily access {count, plural, one {it} other {them}} again. Are you sure you want to proceed?"},confirmDismissMultipleButton:{id:"notification_requests.confirm_dismiss_multiple.button",defaultMessage:"{count, plural, one {Dismiss request} other {Dismiss requests}}"}}),me=()=>{const s=M(),d=v(r=>r.settings.get("notifications")),u=o.useCallback((r,m)=>{s(I(["notifications",...r],m))},[s]);return e.jsxDEV("div",{className:"column-settings",children:[e.jsxDEV("section",{children:e.jsxDEV("div",{className:"column-settings__row",children:e.jsxDEV(oe,{prefix:"notifications",settings:d,settingPath:["minimizeFilteredBanner"],onChange:u,label:e.jsxDEV(q,{id:"notification_requests.minimize_banner",defaultMessage:"Minimize filtered notifications banner"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:67,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:61,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:60,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:59,columnNumber:7},void 0),e.jsxDEV(K,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:73,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:58,columnNumber:5},void 0)},re=({selectAllChecked:s,toggleSelectAll:d,selectedItems:u,selectionMode:r,setSelectionMode:m})=>{const t=E(),n=M(),i=u.length,l=o.useCallback(()=>{n(C({modalType:"CONFIRM",modalProps:{title:t.formatMessage(c.confirmAcceptMultipleTitle),message:t.formatMessage(c.confirmAcceptMultipleMessage,{count:u.length}),confirm:t.formatMessage(c.confirmAcceptMultipleButton,{count:u.length}),onConfirm:()=>n($({ids:u}))}}))},[n,t,u]),h=o.useCallback(()=>{n(C({modalType:"CONFIRM",modalProps:{title:t.formatMessage(c.confirmDismissMultipleTitle),message:t.formatMessage(c.confirmDismissMultipleMessage,{count:u.length}),confirm:t.formatMessage(c.confirmDismissMultipleButton,{count:u.length}),onConfirm:()=>n(O({ids:u}))}}))},[n,t,u]),p=o.useCallback(()=>{m(x=>!x)},[m]),j=[{text:t.formatMessage(c.acceptMultiple,{count:i}),action:l},{text:t.formatMessage(c.dismissMultiple,{count:i}),action:h}],g=o.useCallback(()=>{m(!0),d()},[m,d]);return e.jsxDEV("div",{className:"column-header__select-row",children:[e.jsxDEV("div",{className:"column-header__select-row__checkbox",children:e.jsxDEV(R,{checked:s,indeterminate:i>0&&!s,onChange:g},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:127,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:126,columnNumber:7},void 0),e.jsxDEV(V,{items:j,icons:"ellipsis-h",iconComponent:A,direction:"right",title:t.formatMessage(c.more),children:e.jsxDEV("button",{className:"dropdown-button column-header__select-row__select-menu",disabled:u.length===0,children:[e.jsxDEV("span",{className:"dropdown-button__label",children:[i," selected"]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:137,columnNumber:11},void 0),e.jsxDEV(Y,{id:"down",icon:G},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:140,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:136,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:129,columnNumber:7},void 0),e.jsxDEV("div",{className:"column-header__select-row__mode-button",children:e.jsxDEV("button",{className:"text-btn",tabIndex:0,onClick:p,children:r?e.jsxDEV(q,{id:"notification_requests.exit_selection",defaultMessage:"Done"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:146,columnNumber:11},void 0):e.jsxDEV(q,{id:"notification_requests.edit_selection",defaultMessage:"Edit"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:149,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:144,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:143,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:125,columnNumber:5},void 0)},Je=({multiColumn:s})=>{const d=o.useRef(),u=E(),r=M(),m=v(a=>a.notificationRequests.isLoading),t=v(a=>a.notificationRequests.items),n=v(a=>!!a.notificationRequests.next),[i,l]=o.useState(!1),[h,p]=o.useState([]),[j,g]=o.useState(!1),x=o.useCallback(()=>{var a;(a=d.current)==null||a.scrollTop()},[d]),_=o.useCallback(a=>{p(f=>{const b=f.indexOf(a);return b>-1?f.splice(b,1):f.push(a),g(f.length===t.length),[...f]})},[p,t]),D=o.useCallback(()=>{g(a=>(p(a?[]:t.map(f=>f.id)),!a))},[t]),B=o.useCallback(()=>{r(P())},[r]);return o.useEffect(()=>{r(F())},[r]),e.jsxDEV(Q,{bindToDocument:!s,ref:d,label:u.formatMessage(c.title),children:[e.jsxDEV(U,{icon:"archive",iconComponent:W,title:u.formatMessage(c.title),onClick:x,multiColumn:s,showBackButton:!0,appendContent:t.length>0&&e.jsxDEV(re,{selectionMode:i,setSelectionMode:l,selectAllChecked:j,toggleSelectAll:D,selectedItems:h},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:226,columnNumber:9},void 0),children:e.jsxDEV(me,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:229,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:217,columnNumber:7},void 0),e.jsxDEV(X,{scrollKey:"notification_requests",trackScroll:!s,bindToDocument:!s,isLoading:m,showLoading:m&&t.size===0,hasMore:n,onLoadMore:B,emptyMessage:e.jsxDEV(q,{id:"empty_column.notification_requests",defaultMessage:"All clear! There is nothing here. When you receive new notifications, they will appear here according to your settings."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:240,columnNumber:23},void 0),children:t.map(a=>e.jsxDEV(ue,{id:a.id,accountId:a.account_id,notificationsCount:a.notifications_count,showCheckbox:i,checked:h.includes(a.id),toggleCheck:_},a.id,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:243,columnNumber:9},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:232,columnNumber:7},void 0),e.jsxDEV(w,{children:[e.jsxDEV("title",{children:u.formatMessage(c.title)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:256,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:257,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:255,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/notifications/requests.jsx",lineNumber:216,columnNumber:5},void 0)};export{Je as NotificationRequests,Je as default};
//# sourceMappingURL=requests-B4nxp2dR.js.map
