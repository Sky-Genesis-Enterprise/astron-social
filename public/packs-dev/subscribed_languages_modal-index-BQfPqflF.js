var h=Object.defineProperty;var f=(a,s,e)=>s in a?h(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var n=(a,s,e)=>f(a,typeof s!="symbol"?s+"":s,e);import{j as t}from"./client-BG6VvM0b.js";import{P as i}from"./short_number--sxn3OKQ.js";import{i as x,d as N}from"./index-ykyyQSL-.js";import{j,dY as g,an as _,bX as c,y as v,z as d,b as B,be as L,bg as D}from"./useSelectableClick-DBo53LOf.js";import{S as E}from"./close-DPVxbBbs.js";import{B as V}from"./index-JeRepxZU.js";import{O as S}from"./option-d983-o0i.js";import{B as C}from"./initial_state-BP3UcUr4.js";import{M as u}from"./message-Bb0z64dP.js";import"./numbers-CGZQWBYL.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./index-guCj-HqV.js";import"./done-stYzd4iP.js";const y=N({close:{id:"lightbox.close",defaultMessage:"Close"}}),I=_([(a,s)=>a.getIn(["timelines",`account:${s}`,"items"],c()),a=>a.get("statuses")],(a,s)=>g(a.map(e=>s.get(e)).filter(e=>!e.get("reblog")).map(e=>e.get("language")))),M=(a,{accountId:s})=>({acct:a.getIn(["accounts",s,"acct"]),availableLanguages:I(a,s),selectedLanguages:g(a.getIn(["relationships",s,"languages"])||c())}),T=(a,{accountId:s})=>({onSubmit(e){a(D(s,{languages:e}))}});class m extends v{constructor(){super(...arguments);n(this,"state",{selectedLanguages:this.props.selectedLanguages});n(this,"handleLanguageToggle",(e,o)=>{const{selectedLanguages:l}=this.state;o?this.setState({selectedLanguages:l.add(e)}):this.setState({selectedLanguages:l.delete(e)})});n(this,"handleSubmit",()=>{this.props.onSubmit(this.state.selectedLanguages.toArray()),this.props.onClose()})}renderItem(e){const o=this.props.languages.find(r=>r[0]===e),l=this.state.selectedLanguages.includes(e);return o?t.jsxDEV(S,{name:"languages",value:e,label:o[1],checked:l,onToggle:this.handleLanguageToggle,multiple:!0},e,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:87,columnNumber:7},this):null}render(){const{acct:e,availableLanguages:o,selectedLanguages:l,intl:r,onClose:p}=this.props;return t.jsxDEV("div",{className:"modal-root__modal report-dialog-modal",children:[t.jsxDEV("div",{className:"report-modal__target",children:[t.jsxDEV(B,{className:"report-modal__close",title:r.formatMessage(y.close),icon:"times",iconComponent:E,onClick:p,size:20},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:105,columnNumber:11},this),t.jsxDEV(u,{id:"subscribed_languages.target",defaultMessage:"Change subscribed languages for {target}",values:{target:t.jsxDEV("strong",{children:e},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:106,columnNumber:138},this)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:106,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:104,columnNumber:9},this),t.jsxDEV("div",{className:"report-dialog-modal__container",children:[t.jsxDEV("p",{className:"report-dialog-modal__lead",children:t.jsxDEV(u,{id:"subscribed_languages.lead",defaultMessage:"Only posts in selected languages will appear on your home and list timelines after the change. Select none to receive posts in all languages."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:110,columnNumber:52},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:110,columnNumber:11},this),t.jsxDEV("div",{children:o.union(l).delete(null).map(b=>this.renderItem(b))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:112,columnNumber:11},this),t.jsxDEV("div",{className:"flex-spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:116,columnNumber:11},this),t.jsxDEV("div",{className:"report-dialog-modal__actions",children:t.jsxDEV(V,{disabled:L(this.state.selectedLanguages,this.props.selectedLanguages),onClick:this.handleSubmit,children:t.jsxDEV(u,{id:"subscribed_languages.save",defaultMessage:"Save changes"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:119,columnNumber:123},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:119,columnNumber:13},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:118,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:109,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/subscribed_languages_modal/index.jsx",lineNumber:103,columnNumber:7},this)}}n(m,"propTypes",{accountId:i.string.isRequired,acct:i.string.isRequired,availableLanguages:d.setOf(i.string),selectedLanguages:d.setOf(i.string),onClose:i.func.isRequired,languages:i.arrayOf(i.arrayOf(i.string)),intl:i.object.isRequired,submit:i.func.isRequired}),n(m,"defaultProps",{languages:C});const W=j(M,T)(x(m));export{W as default};
//# sourceMappingURL=subscribed_languages_modal-index-BQfPqflF.js.map
