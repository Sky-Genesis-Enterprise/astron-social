import{j as a}from"./client-BG6VvM0b.js";import{u as y,r as N,d as C}from"./index-ykyyQSL-.js";import{c as B}from"./index-guCj-HqV.js";import{L as O,S as R}from"./short_number--sxn3OKQ.js";import{b as U,S as q,D as P}from"./content_warning-ZcoJE_cd.js";import{d as H,a as E,u as W,bH as J,bI as K,bJ as $,bK as z,A as G,bL as V,o as w,bM as Q,bN as X,a9 as Y,bO as Z,bP as ee}from"./useSelectableClick-DBo53LOf.js";import{B as k}from"./index-JeRepxZU.js";import{F as oe}from"./counters-BuwkZXvq.js";import{F as ae}from"./follow_button-DdHXSblv.js";import{R as te}from"./index-DHslUCy5.js";import{S as A}from"./skeleton-_5CK2hDo.js";import{V as ne}from"./verified_badge-BOKoz3CJ.js";import{e as F}from"./initial_state-BP3UcUr4.js";import{M as se}from"./message-Bb0z64dP.js";const i=C({follow:{id:"account.follow",defaultMessage:"Follow"},unfollow:{id:"account.unfollow",defaultMessage:"Unfollow"},cancel_follow_request:{id:"account.cancel_follow_request",defaultMessage:"Withdraw follow request"},unblock:{id:"account.unblock_short",defaultMessage:"Unblock"},unmute:{id:"account.unmute_short",defaultMessage:"Unmute"},mute_notifications:{id:"account.mute_notifications_short",defaultMessage:"Mute notifications"},unmute_notifications:{id:"account.unmute_notifications_short",defaultMessage:"Unmute notifications"},mute:{id:"account.mute_short",defaultMessage:"Mute"},block:{id:"account.block_short",defaultMessage:"Block"},more:{id:"status.more",defaultMessage:"More"},addToLists:{id:"account.add_or_remove_from_list",defaultMessage:"Add or Remove from lists"},openOriginalPage:{id:"account.open_original_page",defaultMessage:"Open original page"}}),xe=({id:t,size:r=46,hidden:T,minimal:d,defaultAction:c,withBio:g,withMenu:I=!0})=>{const m=y(),{signedIn:h}=H(),e=E(s=>s.accounts.get(t)),o=E(s=>s.relationships.get(t)),n=W(),f=e==null?void 0:e.url,v=(e==null?void 0:e.acct)!==(e==null?void 0:e.username),L=N.useCallback(()=>{o!=null&&o.blocking?n(J(t)):n(K(t))},[n,t,o]),S=N.useCallback(()=>{o!=null&&o.muting?n($(t)):n(z(e))},[n,t,e,o]),x=N.useMemo(()=>{let s=[];if(c==="mute"){const p=()=>{n(V(t,!0))},u=()=>{n(V(t,!1))};s=[{text:m.formatMessage(o!=null&&o.muting_notifications?i.unmute_notifications:i.mute_notifications),action:o!=null&&o.muting_notifications?u:p}]}else if(c!=="block"&&(v&&f&&s.push({text:m.formatMessage(i.openOriginalPage),href:f}),h)){const p=()=>{const u=()=>{n(w({modalType:"LIST_ADDER",modalProps:{accountId:t}}))};o!=null&&o.following||o!=null&&o.requested||t===F?u():n(w({modalType:"CONFIRM_FOLLOW_TO_LIST",modalProps:{accountId:t,onConfirm:()=>{Q(t).then(b=>{n(X({relationship:b,alreadyFollowing:!1})),u()}).catch(b=>{n(Y(b))})}}}))};if(s.push({text:m.formatMessage(i.addToLists),action:p}),t!==F&&(o!=null&&o.following||o!=null&&o.requested)){const u=()=>{o.endorsed?n(Z(t)):n(ee(t))};s.push({text:m.formatMessage(o.endorsed?{id:"account.unendorse"}:{id:"account.endorse"}),action:u})}}return s},[n,m,t,f,o,c,v,h]);if(T)return a.jsxDEV(a.Fragment,{children:[e==null?void 0:e.display_name,e==null?void 0:e.username]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:223,columnNumber:7},void 0);let l,_;x.length>0&&I&&(_=a.jsxDEV(U,{items:x,icon:"ellipsis-h",iconComponent:q,title:m.formatMessage(i.more)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:235,columnNumber:5},void 0)),c==="block"?l=a.jsxDEV(k,{text:m.formatMessage(o!=null&&o.blocking?i.unblock:i.block),onClick:L},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:246,columnNumber:5},void 0):c==="mute"?l=a.jsxDEV(k,{text:m.formatMessage(o!=null&&o.muting?i.unmute:i.mute),onClick:S},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:255,columnNumber:5},void 0):l=a.jsxDEV(ae,{accountId:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:263,columnNumber:14},void 0);let j;e!=null&&e.mute_expires_at&&(j=a.jsxDEV(a.Fragment,{children:["Â· ",a.jsxDEV(te,{timestamp:e.mute_expires_at,futureDate:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:271,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:270,columnNumber:5},void 0));let M;const D=e==null?void 0:e.fields.find(s=>!!s.verified_at);return D&&(M=a.jsxDEV(ne,{link:D.value},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:281,columnNumber:20},void 0)),a.jsxDEV("div",{className:B("account",{"account--minimal":d}),children:a.jsxDEV("div",{className:B("account__wrapper",{"account__wrapper--with-bio":e&&g}),children:[a.jsxDEV("div",{className:"account__info-wrapper",children:[a.jsxDEV(O,{className:"account__display-name",title:e==null?void 0:e.acct,to:`/@${e==null?void 0:e.acct}`,"data-hover-card-account":t,children:[a.jsxDEV("div",{className:"account__avatar-wrapper",children:e?a.jsxDEV(G,{account:e,size:r},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:304,columnNumber:15},void 0):a.jsxDEV(A,{width:r,height:r},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:306,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:302,columnNumber:13},void 0),a.jsxDEV("div",{className:"account__contents",children:[a.jsxDEV(P,{account:e},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:311,columnNumber:15},void 0),!d&&a.jsxDEV("div",{className:"account__details",children:e?a.jsxDEV(a.Fragment,{children:[a.jsxDEV(R,{value:e.followers_count,renderer:oe},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:317,columnNumber:23},void 0)," ",M," ",j]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:316,columnNumber:17},void 0):a.jsxDEV(A,{width:"7ch"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:324,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:314,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:310,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:296,columnNumber:11},void 0),e&&g&&(e.note.length>0?a.jsxDEV("div",{className:"account__note translate",dangerouslySetInnerHTML:{__html:e.note_emojified}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:334,columnNumber:11},void 0):a.jsxDEV("div",{className:"account__note account__note--missing",children:a.jsxDEV(se,{id:"account.no_bio",defaultMessage:"No description provided."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:340,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:339,columnNumber:11},void 0))]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:295,columnNumber:9},void 0),!d&&a.jsxDEV("div",{className:"account__relationship",children:[_,l]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:349,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:290,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/account.tsx",lineNumber:285,columnNumber:5},void 0)};export{xe as A};
//# sourceMappingURL=account-1vhP702Z.js.map
