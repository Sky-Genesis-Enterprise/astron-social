import{j as e}from"./client-BG6VvM0b.js";import{r as n,u as y,d as A}from"./index-ykyyQSL-.js";import{H}from"./Helmet-D0DLVOv1.js";import{S as L}from"./group-D_XsjWSa.js";import{S as P}from"./hashtags-DNhYE1a4.js";import{S as w}from"./tag-DwJ3VcGu.js";import{a as V,u as F,dT as R,dU as Z,I as f}from"./useSelectableClick-DBo53LOf.js";import{A as _}from"./account-1vhP702Z.js";import{C as G}from"./column-CXD4Tnpb.js";import{C as z}from"./column_header-CtuyYpNB.js";import{C as S}from"./hashtag--bDjNoob.js";import{S as K}from"./scrollable_list-DlG-2WSw.js";import{S as M}from"./status_quoted-D9176USW.js";import{S as Q}from"./search-D6XPU9bJ.js";import{u as B}from"./useSearchParam-BFvbS2Uy.js";import{M as r}from"./message-Bb0z64dP.js";import"./short_number--sxn3OKQ.js";import"./numbers-CGZQWBYL.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./initial_state-BP3UcUr4.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./index-guCj-HqV.js";import"./content_warning-ZcoJE_cd.js";import"./skeleton-_5CK2hDo.js";import"./index-JeRepxZU.js";import"./counters-BuwkZXvq.js";import"./follow_button-DdHXSblv.js";import"./loading_indicator-BBuNQ1GS.js";import"./verified_badge-BOKoz3CJ.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./index-D1RqLxe8.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";import"./domain_blocks-DiDVA5xw.js";import"./reports-BY0N2xif.js";import"./status-D92xLx8p.js";import"./index.es-D--CQIAj.js";import"./card-v59kuVL6.js";import"./avatar_overlay-XCWEKsBg.js";import"./toString-CBWlLvSL.js";import"./status_content-BS1khha6.js";import"./poll-wjP7LpZg.js";import"./permissions-Djze7cmB.js";import"./visibility_icon-B5XmIQZP.js";import"./index-Ds3K_5LX.js";const U=a=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...a},n.createElement("path",{d:"m590-160 80 80H240q-33 0-56.5-23.5T160-160v-640q0-33 23.5-56.5T240-880h360l200 240v480q0 20-8.5 36.5T768-96L560-302q-17 11-37 16.5t-43 5.5q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 23-5.5 43T618-360l102 104v-356L562-800H240v640h350ZM480-360q33 0 56.5-23.5T560-440q0-33-23.5-56.5T480-520q-33 0-56.5 23.5T400-440q0 33 23.5 56.5T480-360Zm0-80Zm0 0Z"})),b=({title:a,onClickMore:i,children:l})=>e.jsxDEV("div",{className:"search-results__section",children:[e.jsxDEV("div",{className:"search-results__section__header",children:[e.jsxDEV("h3",{children:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/components/search_section.tsx",lineNumber:10,columnNumber:7},void 0),i&&e.jsxDEV("button",{onClick:i,children:e.jsxDEV(r,{id:"search_results.see_all",defaultMessage:"See all"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/components/search_section.tsx",lineNumber:13,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/components/search_section.tsx",lineNumber:12,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/components/search_section.tsx",lineNumber:9,columnNumber:5},void 0),l]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/components/search_section.tsx",lineNumber:8,columnNumber:1},void 0),N=A({title:{id:"search_results.title",defaultMessage:'Search for "{q}"'}}),p=10,x=4,g=a=>a.length>p&&a.length%p===1?a.slice(0,-2):a,Y=a=>g(a).map(i=>e.jsxDEV(_,{id:i},i,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:47,columnNumber:42},void 0)),J=a=>g(a).map(i=>e.jsxDEV(S,{hashtag:i},i.name,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:51,columnNumber:1},void 0)),O=a=>g(a).map(i=>e.jsxDEV(M,{id:i},i,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:56,columnNumber:1},void 0)),W=a=>a&&["all","accounts","statuses","hashtags"].includes(a)?a:"all",Xe=({multiColumn:a})=>{const i=n.useRef(null),l=y(),[u]=B("q"),[C,m]=B("type"),v=V(t=>t.search.loading),s=V(t=>t.search.results),h=F(),o=W(C),d=(u==null?void 0:u.trim())??"";n.useEffect(()=>{d.length>0&&h(R({q:d,type:o==="all"?void 0:o}))},[h,d,o]);const k=n.useCallback(()=>{var t;(t=i.current)==null||t.scrollTop()},[]),T=n.useCallback(()=>{m(null)},[m]),j=n.useCallback(()=>{m("accounts")},[m]),E=n.useCallback(()=>{m("hashtags")},[m]),D=n.useCallback(()=>{m("statuses")},[m]),q=n.useCallback(()=>{o!=="all"&&h(Z({type:o}))},[h,o]),I=o!=="all"&&s?s[o].length>p&&s[o].length%p===1:!1;let c;if(s)switch(o){case"all":c=s.accounts.length+s.hashtags.length+s.statuses.length>0?e.jsxDEV(e.Fragment,{children:[s.accounts.length>0&&e.jsxDEV(b,{title:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(f,{id:"users",icon:L},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:142,columnNumber:23},void 0),e.jsxDEV(r,{id:"search_results.accounts",defaultMessage:"Profiles"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:143,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:141,columnNumber:13},void 0),onClickMore:j,children:s.accounts.slice(0,x).map(t=>e.jsxDEV(_,{id:t},t,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:152,columnNumber:13},void 0))},"accounts",!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:138,columnNumber:11},void 0),s.hashtags.length>0&&e.jsxDEV(b,{title:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(f,{id:"hashtag",icon:w},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:162,columnNumber:23},void 0),e.jsxDEV(r,{id:"search_results.hashtags",defaultMessage:"Hashtags"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:163,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:161,columnNumber:13},void 0),onClickMore:E,children:s.hashtags.slice(0,x).map(t=>e.jsxDEV(S,{hashtag:t},t.name,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:172,columnNumber:13},void 0))},"hashtags",!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:158,columnNumber:11},void 0),s.statuses.length>0&&e.jsxDEV(b,{title:e.jsxDEV(e.Fragment,{children:[e.jsxDEV(f,{id:"quote-right",icon:U},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:182,columnNumber:23},void 0),e.jsxDEV(r,{id:"search_results.statuses",defaultMessage:"Posts"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:183,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:181,columnNumber:13},void 0),onClickMore:D,children:s.statuses.slice(0,x).map(t=>e.jsxDEV(M,{id:t},t,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:192,columnNumber:13},void 0))},"statuses",!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:178,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:136,columnNumber:9},void 0):[];break;case"accounts":c=Y(s.accounts);break;case"hashtags":c=J(s.hashtags);break;case"statuses":c=O(s.statuses);break}return e.jsxDEV(G,{bindToDocument:!a,ref:i,label:l.formatMessage(N.title,{q:u}),children:[e.jsxDEV(z,{icon:"search",iconComponent:P,title:l.formatMessage(N.title,{q:u}),onClick:k,multiColumn:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:219,columnNumber:7},void 0),e.jsxDEV("div",{className:"explore__search-header",children:e.jsxDEV(Q,{singleColumn:!0,initialValue:d},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:228,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:227,columnNumber:7},void 0),e.jsxDEV("div",{className:"account__section-headline",children:[e.jsxDEV("button",{onClick:T,className:o==="all"?"active":void 0,children:e.jsxDEV(r,{id:"search_results.all",defaultMessage:"All"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:236,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:232,columnNumber:9},void 0),e.jsxDEV("button",{onClick:j,className:o==="accounts"?"active":void 0,children:e.jsxDEV(r,{id:"search_results.accounts",defaultMessage:"Profiles"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:242,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:238,columnNumber:9},void 0),e.jsxDEV("button",{onClick:E,className:o==="hashtags"?"active":void 0,children:e.jsxDEV(r,{id:"search_results.hashtags",defaultMessage:"Hashtags"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:251,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:247,columnNumber:9},void 0),e.jsxDEV("button",{onClick:D,className:o==="statuses"?"active":void 0,children:e.jsxDEV(r,{id:"search_results.statuses",defaultMessage:"Posts"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:260,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:256,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:231,columnNumber:7},void 0),e.jsxDEV("div",{className:"explore__search-results","data-nosnippet":!0,children:e.jsxDEV(K,{scrollKey:"search-results",isLoading:v,showLoading:v&&!s,onLoadMore:q,hasMore:I,emptyMessage:d.length>0?e.jsxDEV(r,{id:"search_results.no_results",defaultMessage:"No results."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:276,columnNumber:11},void 0):e.jsxDEV(r,{id:"search_results.no_search_yet",defaultMessage:"Try searching for posts, profiles or hashtags."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:281,columnNumber:11},void 0),bindToDocument:!0,children:c},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:268,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:267,columnNumber:7},void 0),e.jsxDEV(H,{children:[e.jsxDEV("title",{children:l.formatMessage(N.title,{q:u})},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:294,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:295,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:293,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/search/index.tsx",lineNumber:214,columnNumber:5},void 0)};export{Xe as SearchResults,Xe as default};
//# sourceMappingURL=search-index-fS8XVPf_.js.map
