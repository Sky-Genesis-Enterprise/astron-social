{"version":3,"file":"compose-index-DH9I5IwT.js","sources":["../../app/javascript/material-icons/400-24px/edit_square.svg?react","../../app/javascript/material-icons/400-24px/logout.svg?react","../../app/javascript/mastodon/features/compose/index.tsx"],"sourcesContent":["import * as React from \"react\";\nconst SvgEditSquare = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z\" }));\nexport default SvgEditSquare;\n","import * as React from \"react\";\nconst SvgLogout = (props) => /* @__PURE__ */ React.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: 24, viewBox: \"0 -960 960 960\", width: 24, ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z\" }));\nexport default SvgLogout;\n","import { useEffect, useCallback } from 'react';\n\nimport { useIntl, defineMessages } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\nimport { Link } from 'react-router-dom';\n\nimport type { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport elephantUIPlane from '@/images/elephant_ui_plane.svg';\nimport EditIcon from '@/material-icons/400-24px/edit_square.svg?react';\nimport PeopleIcon from '@/material-icons/400-24px/group.svg?react';\nimport HomeIcon from '@/material-icons/400-24px/home-fill.svg?react';\nimport LogoutIcon from '@/material-icons/400-24px/logout.svg?react';\nimport MenuIcon from '@/material-icons/400-24px/menu.svg?react';\nimport NotificationsIcon from '@/material-icons/400-24px/notifications-fill.svg?react';\nimport PublicIcon from '@/material-icons/400-24px/public.svg?react';\nimport SettingsIcon from '@/material-icons/400-24px/settings-fill.svg?react';\nimport { mountCompose, unmountCompose } from 'mastodon/actions/compose';\nimport { openModal } from 'mastodon/actions/modal';\nimport { Column } from 'mastodon/components/column';\nimport { ColumnHeader } from 'mastodon/components/column_header';\nimport { Icon } from 'mastodon/components/icon';\nimport { mascot } from 'mastodon/initial_state';\nimport { useAppDispatch, useAppSelector } from 'mastodon/store';\n\nimport { Search } from './components/search';\nimport ComposeFormContainer from './containers/compose_form_container';\n\nconst messages = defineMessages({\n  start: { id: 'getting_started.heading', defaultMessage: 'Getting started' },\n  home_timeline: { id: 'tabs_bar.home', defaultMessage: 'Home' },\n  notifications: {\n    id: 'tabs_bar.notifications',\n    defaultMessage: 'Notifications',\n  },\n  public: {\n    id: 'navigation_bar.public_timeline',\n    defaultMessage: 'Federated timeline',\n  },\n  community: {\n    id: 'navigation_bar.community_timeline',\n    defaultMessage: 'Local timeline',\n  },\n  preferences: {\n    id: 'navigation_bar.preferences',\n    defaultMessage: 'Preferences',\n  },\n  logout: { id: 'navigation_bar.logout', defaultMessage: 'Logout' },\n  compose: { id: 'navigation_bar.compose', defaultMessage: 'Compose new post' },\n});\n\ntype ColumnMap = ImmutableMap<'id' | 'uuid' | 'params', string>;\n\nconst Compose: React.FC<{ multiColumn: boolean }> = ({ multiColumn }) => {\n  const intl = useIntl();\n  const dispatch = useAppDispatch();\n  const columns = useAppSelector(\n    (state) =>\n      (state.settings as ImmutableMap<string, unknown>).get(\n        'columns',\n      ) as ImmutableList<ColumnMap>,\n  );\n\n  useEffect(() => {\n    dispatch(mountCompose());\n\n    return () => {\n      dispatch(unmountCompose());\n    };\n  }, [dispatch]);\n\n  const handleLogoutClick = useCallback(\n    (e: React.MouseEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n\n      dispatch(openModal({ modalType: 'CONFIRM_LOG_OUT', modalProps: {} }));\n\n      return false;\n    },\n    [dispatch],\n  );\n\n  if (multiColumn) {\n    return (\n      <div\n        className='drawer'\n        role='region'\n        aria-label={intl.formatMessage(messages.compose)}\n      >\n        <nav className='drawer__header'>\n          <Link\n            to='/getting-started'\n            className='drawer__tab'\n            title={intl.formatMessage(messages.start)}\n            aria-label={intl.formatMessage(messages.start)}\n          >\n            <Icon id='bars' icon={MenuIcon} />\n          </Link>\n          {!columns.some((column) => column.get('id') === 'HOME') && (\n            <Link\n              to='/home'\n              className='drawer__tab'\n              title={intl.formatMessage(messages.home_timeline)}\n              aria-label={intl.formatMessage(messages.home_timeline)}\n            >\n              <Icon id='home' icon={HomeIcon} />\n            </Link>\n          )}\n          {!columns.some((column) => column.get('id') === 'NOTIFICATIONS') && (\n            <Link\n              to='/notifications'\n              className='drawer__tab'\n              title={intl.formatMessage(messages.notifications)}\n              aria-label={intl.formatMessage(messages.notifications)}\n            >\n              <Icon id='bell' icon={NotificationsIcon} />\n            </Link>\n          )}\n          {!columns.some((column) => column.get('id') === 'COMMUNITY') && (\n            <Link\n              to='/public/local'\n              className='drawer__tab'\n              title={intl.formatMessage(messages.community)}\n              aria-label={intl.formatMessage(messages.community)}\n            >\n              <Icon id='users' icon={PeopleIcon} />\n            </Link>\n          )}\n          {!columns.some((column) => column.get('id') === 'PUBLIC') && (\n            <Link\n              to='/public'\n              className='drawer__tab'\n              title={intl.formatMessage(messages.public)}\n              aria-label={intl.formatMessage(messages.public)}\n            >\n              <Icon id='globe' icon={PublicIcon} />\n            </Link>\n          )}\n          <a\n            href='/settings/preferences'\n            className='drawer__tab'\n            title={intl.formatMessage(messages.preferences)}\n            aria-label={intl.formatMessage(messages.preferences)}\n          >\n            <Icon id='cog' icon={SettingsIcon} />\n          </a>\n          <a\n            href='/auth/sign_out'\n            className='drawer__tab'\n            title={intl.formatMessage(messages.logout)}\n            aria-label={intl.formatMessage(messages.logout)}\n            onClick={handleLogoutClick}\n          >\n            <Icon id='sign-out' icon={LogoutIcon} />\n          </a>\n        </nav>\n\n        <Search singleColumn={false} />\n\n        <div className='drawer__pager'>\n          <div className='drawer__inner'>\n            <ComposeFormContainer />\n\n            <div className='drawer__inner__mastodon'>\n              <img alt='' draggable='false' src={mascot ?? elephantUIPlane} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Column\n      bindToDocument={!multiColumn}\n      label={intl.formatMessage(messages.compose)}\n    >\n      <ColumnHeader\n        icon='pencil'\n        iconComponent={EditIcon}\n        title={intl.formatMessage(messages.compose)}\n        multiColumn={multiColumn}\n        showBackButton\n      />\n\n      <div className='scrollable'>\n        <ComposeFormContainer />\n      </div>\n\n      <Helmet>\n        <meta name='robots' content='noindex' />\n      </Helmet>\n    </Column>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default Compose;\n"],"names":["SvgEditSquare","props","React.createElement","SvgLogout","messages","defineMessages","start","id","defaultMessage","home_timeline","notifications","public","community","preferences","logout","compose","Compose","multiColumn","intl","useIntl","dispatch","useAppDispatch","columns","useAppSelector","state","settings","get","useEffect","mountCompose","unmountCompose","handleLogoutClick","useCallback","e","preventDefault","stopPropagation","openModal","modalType","modalProps","jsxDEV","formatMessage","Link","Icon","MenuIcon","this","some","column","HomeIcon","NotificationsIcon","PeopleIcon","PublicIcon","SettingsIcon","LogoutIcon","Search","ComposeFormContainer","mascot","elephantUIPlane","Column","ColumnHeader","EditIcon","Helmet"],"mappings":"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"}