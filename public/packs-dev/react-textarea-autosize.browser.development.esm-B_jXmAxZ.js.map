{"version":3,"file":"react-textarea-autosize.browser.development.esm-B_jXmAxZ.js","sources":["../../node_modules/use-latest/dist/use-latest.esm.js","../../node_modules/use-composed-ref/dist/use-composed-ref.esm.js","../../node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.development.esm.js"],"sourcesContent":["import React from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = React.useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport { useLatest as default };\n","import React from 'react';\n\n// basically Exclude<React.ClassAttributes<T>[\"ref\"], string>\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n  ref.current = value;\n};\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = React.useRef();\n  return React.useCallback(function (instance) {\n    libRef.current = instance;\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n    prevUserRef.current = userRef;\n    if (!userRef) {\n      return;\n    }\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport { useComposedRef as default };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport * as React from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0',\n  display: 'block'\n};\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\nvar forceHiddenStyles$1 = forceHiddenStyles;\n\nvar hiddenTextarea = null;\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  }\n\n  // remove padding, since height = content\n  return height - sizingData.paddingSize;\n};\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tabindex', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles$1(hiddenTextarea);\n  }\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n  var paddingSize = sizingData.paddingSize,\n    borderSize = sizingData.borderSize,\n    sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles$1(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData);\n  // Double set and calc due to Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1795904\n  hiddenTextarea.value = value;\n  height = getHeight(hiddenTextarea, sizingData);\n\n  // measure height of a textarea with a single row\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop',\n// non-standard\n'tabSize', 'textIndent',\n// non-standard\n'textRendering', 'textTransform', 'width', 'wordBreak', 'wordSpacing', 'scrollbarGutter'];\nvar isIE = !!document.documentElement.currentStyle ;\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n  if (style === null) {\n    return null;\n  }\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing;\n\n  // probably node is detached from DOM, can't read computed dimensions\n  if (boxSizing === '') {\n    return null;\n  }\n\n  // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\nvar getSizingData$1 = getSizingData;\n\nfunction useListener(target, type, listener) {\n  var latestListener = useLatest(listener);\n  React.useLayoutEffect(function () {\n    var handler = function handler(ev) {\n      return latestListener.current(ev);\n    };\n    // might happen if document.fonts is not defined, for instance\n    if (!target) {\n      return;\n    }\n    target.addEventListener(type, handler);\n    return function () {\n      return target.removeEventListener(type, handler);\n    };\n  }, []);\n}\nvar useFormResetListener = function useFormResetListener(libRef, listener) {\n  useListener(document.body, 'reset', function (ev) {\n    if (libRef.current.form === ev.target) {\n      listener(ev);\n    }\n  });\n};\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  useListener(window, 'resize', listener);\n};\nvar useFontsLoadedListener = function useFontsLoadedListener(listener) {\n  useListener(document.fonts, 'loadingdone', listener);\n};\n\nvar _excluded = [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"];\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n    maxRows = _ref.maxRows,\n    minRows = _ref.minRows,\n    _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n    _ref$onHeightChange = _ref.onHeightChange,\n    onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  if (props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n  var isControlled = props.value !== undefined;\n  var libRef = React.useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = React.useRef(0);\n  var measurementsCacheRef = React.useRef();\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData$1(node);\n    if (!nodeSizingData) {\n      return;\n    }\n    measurementsCacheRef.current = nodeSizingData;\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n      height = _calculateNodeHeight[0],\n      rowHeight = _calculateNodeHeight[1];\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n    onChange(event);\n  };\n  {\n    React.useLayoutEffect(resizeTextarea);\n    useFormResetListener(libRef, function () {\n      if (!isControlled) {\n        var currentValue = libRef.current.value;\n        requestAnimationFrame(function () {\n          var node = libRef.current;\n          if (node && currentValue !== node.value) {\n            resizeTextarea();\n          }\n        });\n      }\n    });\n    useWindowResizeListener(resizeTextarea);\n    useFontsLoadedListener(resizeTextarea);\n    return /*#__PURE__*/React.createElement(\"textarea\", _extends({}, props, {\n      onChange: handleChange,\n      ref: ref\n    }));\n  }\n};\nvar index = /* #__PURE__ */React.forwardRef(TextareaAutosize);\n\nexport { index as default };\n"],"names":["useLatest","value","ref","React","useIsomorphicLayoutEffect","updateRef","useComposedRef","libRef","userRef","prevUserRef","instance","HIDDEN_TEXTAREA_STYLE","forceHiddenStyles","node","key","forceHiddenStyles$1","hiddenTextarea","getHeight","sizingData","height","calculateNodeHeight","minRows","maxRows","paddingSize","borderSize","sizingStyle","boxSizing","_key","rowHeight","minHeight","maxHeight","noop","pick","props","obj","acc","prop","SIZING_STYLE","isIE","getSizingData","style","getSizingData$1","useListener","target","type","listener","latestListener","React.useLayoutEffect","handler","ev","useFormResetListener","useWindowResizeListener","useFontsLoadedListener","_excluded","TextareaAutosize","_ref","cacheMeasurements","_ref$onChange","onChange","_ref$onHeightChange","onHeightChange","_objectWithoutPropertiesLoose","isControlled","React.useRef","heightRef","measurementsCacheRef","resizeTextarea","nodeSizingData","_calculateNodeHeight","handleChange","event","currentValue","React.createElement","_extends","index","React.forwardRef"],"mappings":"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","x_google_ignoreList":[0,1,2]}