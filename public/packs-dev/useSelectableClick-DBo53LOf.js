var zE=Object.defineProperty;var WE=(e,t,n)=>t in e?zE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ka=(e,t,n)=>WE(e,typeof t!="symbol"?t+"":t,n);import{r as m,g as oi,I as GE,d as Ho,a as vh,R as Qu,h as yh,u as $c}from"./index-ykyyQSL-.js";import{b as KE,j as O,r as qc}from"./client-BG6VvM0b.js";import{e as QE,d as YE,f as XE,r as ZE,_ as Sh,g as Ct,P as ge,L as JE,S as Da,h as e0}from"./short_number--sxn3OKQ.js";import{b as Gt,c as an,a as H,g as Me,d as t0,e as Bc,f as Eh}from"./api-uqk9CYtW.js";import{r as n0,e as nn,c as r0,a as Hc,d as i0,b as Lf}from"./index-DHslUCy5.js";import{n as bh,p as s0,q as o0,e as at,u as wh,w as Yn,d as a0,x as u0,l as c0,y as To,z as Th,k as l0}from"./initial_state-BP3UcUr4.js";import{a as f0,i as d0}from"./load_locale-C-B7BkCQ.js";import{A as ja,a as Oh}from"./index-lj9VQs0f.js";import{r as p0}from"./ready-DpOgoWSg.js";import{c as Je}from"./index-guCj-HqV.js";import{M as pn}from"./message-Bb0z64dP.js";var Vc=Os(),re=e=>Ts(e,Vc),zc=Os();re.write=e=>Ts(e,zc);var Vo=Os();re.onStart=e=>Ts(e,Vo);var Wc=Os();re.onFrame=e=>Ts(e,Wc);var Gc=Os();re.onFinish=e=>Ts(e,Gc);var Vr=[];re.setTimeout=(e,t)=>{const n=re.now()+t,r=()=>{const s=Vr.findIndex(o=>o.cancel==r);~s&&Vr.splice(s,1),Qn-=~s?1:0},i={time:n,handler:e,cancel:r};return Vr.splice(Ch(n),0,i),Qn+=1,Nh(),i};var Ch=e=>~(~Vr.findIndex(t=>t.time>e)||~Vr.length);re.cancel=e=>{Vo.delete(e),Wc.delete(e),Gc.delete(e),Vc.delete(e),zc.delete(e)};re.sync=e=>{Yu=!0,re.batchedUpdates(e),Yu=!1};re.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...i){t=i,re.onStart(n)}return r.handler=e,r.cancel=()=>{Vo.delete(n),t=null},r};var Kc=typeof window<"u"?window.requestAnimationFrame:()=>{};re.use=e=>Kc=e;re.now=typeof performance<"u"?()=>performance.now():Date.now;re.batchedUpdates=e=>e();re.catch=console.error;re.frameLoop="always";re.advance=()=>{re.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ih()};var Kn=-1,Qn=0,Yu=!1;function Ts(e,t){Yu?(t.delete(e),e(0)):(t.add(e),Nh())}function Nh(){Kn<0&&(Kn=0,re.frameLoop!=="demand"&&Kc(Ah))}function h0(){Kn=-1}function Ah(){~Kn&&(Kc(Ah),re.batchedUpdates(Ih))}function Ih(){const e=Kn;Kn=re.now();const t=Ch(Kn);if(t&&(Rh(Vr.splice(0,t),n=>n.handler()),Qn-=t),!Qn){h0();return}Vo.flush(),Vc.flush(e?Math.min(64,Kn-e):16.667),Wc.flush(),zc.flush(),Gc.flush()}function Os(){let e=new Set,t=e;return{add(n){Qn+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Qn-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Qn-=t.size,Rh(t,r=>r(n)&&e.add(r)),Qn+=e.size,t=e)}}}function Rh(e,t){e.forEach(n=>{try{t(n)}catch(r){re.catch(r)}})}var m0=Object.defineProperty,_0=(e,t)=>{for(var n in t)m0(e,n,{get:t[n],enumerable:!0})},rn={};_0(rn,{assign:()=>v0,colors:()=>Xn,createStringInterpolator:()=>Yc,skipAnimation:()=>Lh,to:()=>xh,willAdvance:()=>Xc});function Xu(){}var g0=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),F={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function In(e,t){if(F.arr(e)){if(!F.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var ne=(e,t)=>e.forEach(t);function vn(e,t,n){if(F.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ut=e=>F.und(e)?[]:F.arr(e)?e:[e];function Vi(e,t){if(e.size){const n=Array.from(e);e.clear(),ne(n,t)}}var Ui=(e,...t)=>Vi(e,n=>n(...t)),Qc=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Yc,xh,Xn=null,Lh=!1,Xc=Xu,v0=e=>{e.to&&(xh=e.to),e.now&&(re.now=e.now),e.colors!==void 0&&(Xn=e.colors),e.skipAnimation!=null&&(Lh=e.skipAnimation),e.createStringInterpolator&&(Yc=e.createStringInterpolator),e.requestAnimationFrame&&re.use(e.requestAnimationFrame),e.batchedUpdates&&(re.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Xc=e.willAdvance),e.frameLoop&&(re.frameLoop=e.frameLoop)},zi=new Set,jt=[],$a=[],Oo=0,zo={get idle(){return!zi.size&&!jt.length},start(e){Oo>e.priority?(zi.add(e),re.onStart(y0)):(Mh(e),re(Zu))},advance:Zu,sort(e){if(Oo)re.onFrame(()=>zo.sort(e));else{const t=jt.indexOf(e);~t&&(jt.splice(t,1),Ph(e))}},clear(){jt=[],zi.clear()}};function y0(){zi.forEach(Mh),zi.clear(),re(Zu)}function Mh(e){jt.includes(e)||Ph(e)}function Ph(e){jt.splice(S0(jt,t=>t.priority>e.priority),0,e)}function Zu(e){const t=$a;for(let n=0;n<jt.length;n++){const r=jt[n];Oo=r.priority,r.idle||(Xc(r),r.advance(e),r.idle||t.push(r))}return Oo=0,$a=jt,$a.length=0,jt=t,jt.length>0}function S0(e,t){const n=e.findIndex(t);return n<0?e.length:n}var E0={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},tn="[-+]?\\d*\\.?\\d+",Co=tn+"%";function Wo(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var b0=new RegExp("rgb"+Wo(tn,tn,tn)),w0=new RegExp("rgba"+Wo(tn,tn,tn,tn)),T0=new RegExp("hsl"+Wo(tn,Co,Co)),O0=new RegExp("hsla"+Wo(tn,Co,Co,tn)),C0=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,N0=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,A0=/^#([0-9a-fA-F]{6})$/,I0=/^#([0-9a-fA-F]{8})$/;function R0(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=A0.exec(e))?parseInt(t[1]+"ff",16)>>>0:Xn&&Xn[e]!==void 0?Xn[e]:(t=b0.exec(e))?($r(t[1])<<24|$r(t[2])<<16|$r(t[3])<<8|255)>>>0:(t=w0.exec(e))?($r(t[1])<<24|$r(t[2])<<16|$r(t[3])<<8|Ff(t[4]))>>>0:(t=C0.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=I0.exec(e))?parseInt(t[1],16)>>>0:(t=N0.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=T0.exec(e))?(Mf(Pf(t[1]),Zs(t[2]),Zs(t[3]))|255)>>>0:(t=O0.exec(e))?(Mf(Pf(t[1]),Zs(t[2]),Zs(t[3]))|Ff(t[4]))>>>0:null}function qa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Mf(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,s=qa(i,r,e+1/3),o=qa(i,r,e),a=qa(i,r,e-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function $r(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Pf(e){return(parseFloat(e)%360+360)%360/360}function Ff(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Zs(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Uf(e){let t=R0(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,i=(t&65280)>>>8,s=(t&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var Ji=(e,t,n)=>{if(F.fun(e))return e;if(F.arr(e))return Ji({range:e,output:t,extrapolate:n});if(F.str(e.output[0]))return Yc(e);const r=e,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||(l=>l);return l=>{const c=L0(l,s);return x0(l,s[c],s[c+1],i[c],i[c+1],u,o,a,r.map)}};function x0(e,t,n,r,i,s,o,a,u){let l=u?u(e):e;if(l<t){if(o==="identity")return l;o==="clamp"&&(l=t)}if(l>n){if(a==="identity")return l;a==="clamp"&&(l=n)}return r===i?r:t===n?e<=t?r:i:(t===-1/0?l=-l:n===1/0?l=l-t:l=(l-t)/(n-t),l=s(l),r===-1/0?l=-l:i===1/0?l=l+r:l=l*(i-r)+r,l)}function L0(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var M0={linear:e=>e},es=Symbol.for("FluidValue.get"),Wr=Symbol.for("FluidValue.observers"),Dt=e=>!!(e&&e[es]),_t=e=>e&&e[es]?e[es]():e,kf=e=>e[Wr]||null;function P0(e,t){e.eventObserved?e.eventObserved(t):e(t)}function ts(e,t){const n=e[Wr];n&&n.forEach(r=>{P0(r,t)})}var Fh=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");F0(this,e)}},F0=(e,t)=>Uh(e,es,t);function ai(e,t){if(e[es]){let n=e[Wr];n||Uh(e,Wr,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function ns(e,t){const n=e[Wr];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Wr]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Uh=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),go=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,U0=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Df=new RegExp(`(${go.source})(%|[a-z]+)`,"i"),k0=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Go=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,kh=e=>{const[t,n]=D0(e);if(!t||Qc())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||e}else{if(n&&Go.test(n))return kh(n);if(n)return n}return e},D0=e=>{const t=Go.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},Ba,j0=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Dh=e=>{Ba||(Ba=Xn?new RegExp(`(${Object.keys(Xn).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(s=>_t(s).replace(Go,kh).replace(U0,Uf).replace(Ba,Uf)),n=t.map(s=>s.match(go).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Ji({...e,output:s}));return s=>{var u;const o=!Df.test(t[0])&&((u=t.find(l=>Df.test(l)))==null?void 0:u.replace(go,""));let a=0;return t[0].replace(go,()=>`${i[a++](s)}${o||""}`).replace(k0,j0)}},Zc="react-spring: ",jh=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Zc}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},$0=jh(console.warn);function q0(){$0(`${Zc}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var B0=jh(console.warn);function H0(){B0(`${Zc}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Ko(e){return F.str(e)&&(e[0]=="#"||/\d/.test(e)||!Qc()&&Go.test(e)||e in(Xn||{}))}var _r=Qc()?m.useEffect:m.useLayoutEffect,V0=()=>{const e=m.useRef(!1);return _r(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Jc(){const e=m.useState()[1],t=V0();return()=>{t.current&&e(Math.random())}}function z0(e,t){const[n]=m.useState(()=>({inputs:t,result:e()})),r=m.useRef(),i=r.current;let s=i;return s?t&&s.inputs&&W0(t,s.inputs)||(s={inputs:t,result:e()}):s=n,m.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function W0(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var el=e=>m.useEffect(e,G0),G0=[];function Ju(e){const t=m.useRef();return m.useEffect(()=>{t.current=e}),t.current}var rs=Symbol.for("Animated:node"),K0=e=>!!e&&e[rs]===e,hn=e=>e&&e[rs],tl=(e,t)=>g0(e,rs,t),Qo=e=>e&&e[rs]&&e[rs].getPayload(),$h=class{constructor(){tl(this,this)}getPayload(){return this.payload||[]}},Cs=class extends $h{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,F.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Cs(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return F.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,F.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},is=class extends Cs{constructor(e){super(0),this._string=null,this._toString=Ji({output:[e,e]})}static create(e){return new is(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(F.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Ji({output:[this.getValue(),e]})),this._value=0,super.reset()}},No={dependencies:null},Yo=class extends $h{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return vn(this.source,(n,r)=>{K0(n)?t[r]=n.getValue(e):Dt(n)?t[r]=_t(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&ne(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return vn(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){No.dependencies&&Dt(e)&&No.dependencies.add(e);const t=Qo(e);t&&ne(t,n=>this.add(n))}},qh=class extends Yo{constructor(e){super(e)}static create(e){return new qh(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Q0)),!0)}};function Q0(e){return(Ko(e)?is:Cs).create(e)}function ec(e){const t=hn(e);return t?t.constructor:F.arr(e)?qh:Ko(e)?is:Cs}var jf=(e,t)=>{const n=!F.fun(e)||e.prototype&&e.prototype.isReactComponent;return m.forwardRef((r,i)=>{const s=m.useRef(null),o=n&&m.useCallback(h=>{s.current=Z0(i,h)},[i]),[a,u]=X0(r,t),l=Jc(),c=()=>{const h=s.current;if(n&&!h)return;(h?t.applyAnimatedValues(h,a.getValue(!0)):!1)===!1&&l()},f=new Y0(c,u),d=m.useRef();_r(()=>(d.current=f,ne(u,h=>ai(h,f)),()=>{d.current&&(ne(d.current.deps,h=>ns(h,d.current)),re.cancel(d.current.update))})),m.useEffect(c,[]),el(()=>()=>{const h=d.current;ne(h.deps,_=>ns(_,h))});const p=t.getComponentProps(a.getValue());return m.createElement(e,{...p,ref:o})})},Y0=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&re.write(this.update)}};function X0(e,t){const n=new Set;return No.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Yo(e),No.dependencies=null,[e,n]}function Z0(e,t){return e&&(F.fun(e)?e(t):e.current=t),t}var $f=Symbol.for("AnimatedComponent"),J0=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=i=>new Yo(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=qf(o)||"Anonymous";return F.str(o)?o=s[o]||(s[o]=jf(o,i)):o=o[$f]||(o[$f]=jf(o,i)),o.displayName=`Animated(${a})`,o};return vn(e,(o,a)=>{F.arr(e)&&(a=qf(o)),s[a]=s(o)}),{animated:s}},qf=e=>F.str(e)?e:e&&F.str(e.displayName)?e.displayName:F.fun(e)&&e.name||null;function gt(e,...t){return F.fun(e)?e(...t):e}var Wi=(e,t)=>e===!0||!!(t&&e&&(F.fun(e)?e(t):ut(e).includes(t))),Bh=(e,t)=>F.obj(e)?t&&e[t]:e,Hh=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,eb=e=>e,Xo=(e,t=eb)=>{let n=tb;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const s=t(e[i],i);F.und(s)||(r[i]=s)}return r},tb=["config","onProps","onStart","onChange","onPause","onResume","onRest"],nb={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function rb(e){const t={};let n=0;if(vn(e,(r,i)=>{nb[i]||(t[i]=r,n++)}),n)return t}function nl(e){const t=rb(e);if(t){const n={to:t};return vn(e,(r,i)=>i in t||(n[i]=r)),n}return{...e}}function ss(e){return e=_t(e),F.arr(e)?e.map(ss):Ko(e)?rn.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Vh(e){for(const t in e)return!0;return!1}function tc(e){return F.fun(e)||F.arr(e)&&F.obj(e[0])}function nc(e,t){var n;(n=e.ref)==null||n.delete(e),t==null||t.delete(e)}function zh(e,t){var n;t&&e.ref!==t&&((n=e.ref)==null||n.delete(e),t.add(e),e.ref=t)}var gr={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20}},rc={...gr.default,mass:1,damping:1,easing:M0.linear,clamp:!1},ib=class{constructor(){this.velocity=0,Object.assign(this,rc)}};function sb(e,t,n){n&&(n={...n},Bf(n,t),t={...n,...t}),Bf(e,t),Object.assign(e,t);for(const o in rc)e[o]==null&&(e[o]=rc[o]);let{frequency:r,damping:i}=e;const{mass:s}=e;return F.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*s,e.friction=4*Math.PI*i*s/r),e}function Bf(e,t){if(!F.und(t.decay))e.duration=void 0;else{const n=!F.und(t.tension)||!F.und(t.friction);(n||!F.und(t.frequency)||!F.und(t.damping)||!F.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var Hf=[],ob=class{constructor(){this.changed=!1,this.values=Hf,this.toValues=null,this.fromValues=Hf,this.config=new ib,this.immediate=!1}};function Wh(e,{key:t,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let u,l,c=Wi(n.cancel??(r==null?void 0:r.cancel),t);if(c)p();else{F.und(n.pause)||(i.paused=Wi(n.pause,t));let h=r==null?void 0:r.pause;h!==!0&&(h=i.paused||Wi(h,t)),u=gt(n.delay||0,t),h?(i.resumeQueue.add(d),s.pause()):(s.resume(),d())}function f(){i.resumeQueue.add(d),i.timeouts.delete(l),l.cancel(),u=l.time-re.now()}function d(){u>0&&!rn.skipAnimation?(i.delayed=!0,l=re.setTimeout(p,u),i.pauseQueue.add(f),i.timeouts.add(l)):p()}function p(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(l),e<=(i.cancelId||0)&&(c=!0);try{s.start({...n,callId:e,cancel:c},o)}catch(h){a(h)}}})}var rl=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?zr(e.get()):t.every(n=>n.noop)?Gh(e.get()):Jt(e.get(),t.every(n=>n.finished)),Gh=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Jt=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),zr=e=>({value:e,cancelled:!0,finished:!1});function Kh(e,t,n,r){const{callId:i,parentId:s,onRest:o}=t,{asyncTo:a,promise:u}=n;return!s&&e===a&&!t.reset?u:n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const l=Xo(t,(g,y)=>y==="onRest"?void 0:g);let c,f;const d=new Promise((g,y)=>(c=g,f=y)),p=g=>{const y=i<=(n.cancelId||0)&&zr(r)||i!==n.asyncId&&Jt(r,!1);if(y)throw g.result=y,f(g),g},h=(g,y)=>{const S=new Vf,b=new zf;return(async()=>{if(rn.skipAnimation)throw os(n),b.result=Jt(r,!1),f(b),b;p(S);const T=F.obj(g)?{...g}:{...y,to:g};T.parentId=i,vn(l,(w,N)=>{F.und(T[N])&&(T[N]=w)});const I=await r.start(T);return p(S),n.paused&&await new Promise(w=>{n.resumeQueue.add(w)}),I})()};let _;if(rn.skipAnimation)return os(n),Jt(r,!1);try{let g;F.arr(e)?g=(async y=>{for(const S of y)await h(S)})(e):g=Promise.resolve(e(h,r.stop.bind(r))),await Promise.all([g.then(c),d]),_=Jt(r.get(),!0,!1)}catch(g){if(g instanceof Vf)_=g.result;else if(g instanceof zf)_=g.result;else throw g}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?u:void 0)}return F.fun(o)&&re.batchedUpdates(()=>{o(_,r,r.item)}),_})()}function os(e,t){Vi(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Vf=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},zf=class extends Error{constructor(){super("SkipAnimationSignal")}},ic=e=>e instanceof il,ab=1,il=class extends Fh{constructor(){super(...arguments),this.id=ab++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=hn(this);return e&&e.getValue()}to(...e){return rn.to(this,e)}interpolate(...e){return q0(),rn.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){ts(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||zo.sort(this),ts(this,{type:"priority",parent:this,priority:e})}},br=Symbol.for("SpringPhase"),Qh=1,sc=2,oc=4,Ha=e=>(e[br]&Qh)>0,Hn=e=>(e[br]&sc)>0,Ai=e=>(e[br]&oc)>0,Wf=(e,t)=>t?e[br]|=sc|Qh:e[br]&=~sc,Gf=(e,t)=>t?e[br]|=oc:e[br]&=~oc,ub=class extends il{constructor(e,t){if(super(),this.animation=new ob,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!F.und(e)||!F.und(t)){const n=F.obj(e)?{...e}:{...t,from:e};F.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Hn(this)||this._state.asyncTo)||Ai(this)}get goal(){return _t(this.animation.to)}get velocity(){const e=hn(this);return e instanceof Cs?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Ha(this)}get isAnimating(){return Hn(this)}get isPaused(){return Ai(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=Qo(r.to);!o&&Dt(r.to)&&(i=ut(_t(r.to))),r.values.forEach((l,c)=>{if(l.done)return;const f=l.constructor==is?1:o?o[c].lastPosition:i[c];let d=r.immediate,p=f;if(!d){if(p=l.lastPosition,s.tension<=0){l.done=!0;return}let h=l.elapsedTime+=e;const _=r.fromValues[c],g=l.v0!=null?l.v0:l.v0=F.arr(s.velocity)?s.velocity[c]:s.velocity;let y;const S=s.precision||(_==f?.005:Math.min(1,Math.abs(f-_)*.001));if(F.und(s.duration))if(s.decay){const b=s.decay===!0?.998:s.decay,T=Math.exp(-(1-b)*h);p=_+g/(1-b)*(1-T),d=Math.abs(l.lastPosition-p)<=S,y=g*T}else{y=l.lastVelocity==null?g:l.lastVelocity;const b=s.restVelocity||S/10,T=s.clamp?0:s.bounce,I=!F.und(T),w=_==f?l.v0>0:_<f;let N,q=!1;const U=1,k=Math.ceil(e/U);for(let W=0;W<k&&(N=Math.abs(y)>b,!(!N&&(d=Math.abs(f-p)<=S,d)));++W){I&&(q=p==f||p>f==w,q&&(y=-y*T,p=f));const B=-s.tension*1e-6*(p-f),z=-s.friction*.001*y,D=(B+z)/s.mass;y=y+D*U,p=p+y*U}}else{let b=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,l.durationProgress>0&&(l.elapsedTime=s.duration*l.durationProgress,h=l.elapsedTime+=e)),b=(s.progress||0)+h/this._memoizedDuration,b=b>1?1:b<0?0:b,l.durationProgress=b),p=_+s.easing(b)*(f-_),y=(p-l.lastPosition)/e,d=b==1}l.lastVelocity=y,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[c].done&&(d=!1),d?l.done=!0:t=!1,l.setValue(p,s.round)&&(n=!0)});const a=hn(this),u=a.getValue();if(t){const l=_t(r.to);(u!==l||n)&&!s.decay?(a.setValue(l),this._onChange(l)):n&&s.decay&&this._onChange(u),this._stop()}else n&&this._onChange(u)}set(e){return re.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Hn(this)){const{to:e,config:t}=this.animation;re.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return F.und(e)?(n=this.queue||[],this.queue=[]):n=[F.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>rl(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),os(this._state,e&&this._lastCallId),re.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=F.obj(n)?n[t]:n,(n==null||tc(n))&&(n=void 0),r=F.obj(r)?r[t]:r,r==null&&(r=void 0);const i={to:n,from:r};return Ha(this)||(e.reverse&&([n,r]=[r,n]),r=_t(r),F.und(r)?hn(this)||this._set(n):this._set(r)),i}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Xo(e,(o,a)=>/^on/.test(a)?Bh(o,n):o)),Qf(this,e,"onProps"),Ri(this,"onProps",e,this);const i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return Wh(++this._lastCallId,{key:n,props:e,defaultProps:r,state:s,actions:{pause:()=>{Ai(this)||(Gf(this,!0),Ui(s.pauseQueue),Ri(this,"onPause",Jt(this,Ii(this,this.animation.to)),this))},resume:()=>{Ai(this)&&(Gf(this,!1),Hn(this)&&this._resume(),Ui(s.resumeQueue),Ri(this,"onResume",Jt(this,Ii(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const a=Yh(e);if(a)return this._update(a,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(zr(this));const r=!F.und(e.to),i=!F.und(e.from);if(r||i)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(zr(this));const{key:s,defaultProps:o,animation:a}=this,{to:u,from:l}=a;let{to:c=u,from:f=l}=e;i&&!r&&(!t.default||F.und(c))&&(c=f),t.reverse&&([c,f]=[f,c]);const d=!In(f,l);d&&(a.from=f),f=_t(f);const p=!In(c,u);p&&this._focus(c);const h=tc(t.to),{config:_}=a,{decay:g,velocity:y}=_;(r||i)&&(_.velocity=0),t.config&&!h&&sb(_,gt(t.config,s),t.config!==o.config?gt(o.config,s):void 0);let S=hn(this);if(!S||F.und(c))return n(Jt(this,!0));const b=F.und(t.reset)?i&&!t.default:!F.und(f)&&Wi(t.reset,s),T=b?f:this.get(),I=ss(c),w=F.num(I)||F.arr(I)||Ko(I),N=!h&&(!w||Wi(o.immediate||t.immediate,s));if(p){const W=ec(c);if(W!==S.constructor)if(N)S=this._set(I);else throw Error(`Cannot animate between ${S.constructor.name} and ${W.name}, as the "to" prop suggests`)}const q=S.constructor;let U=Dt(c),k=!1;if(!U){const W=b||!Ha(this)&&d;(p||W)&&(k=In(ss(T),I),U=!k),(!In(a.immediate,N)&&!N||!In(_.decay,g)||!In(_.velocity,y))&&(U=!0)}if(k&&Hn(this)&&(a.changed&&!b?U=!0:U||this._stop(u)),!h&&((U||Dt(u))&&(a.values=S.getPayload(),a.toValues=Dt(c)?null:q==is?[1]:ut(I)),a.immediate!=N&&(a.immediate=N,!N&&!b&&this._set(u)),U)){const{onRest:W}=a;ne(lb,z=>Qf(this,t,z));const B=Jt(this,Ii(this,u));Ui(this._pendingCalls,B),this._pendingCalls.add(n),a.changed&&re.batchedUpdates(()=>{var z;a.changed=!b,W==null||W(B,this),b?gt(o.onRest,B):(z=a.onStart)==null||z.call(a,B,this)})}b&&this._set(T),h?n(Kh(t.to,t,this._state,this)):U?this._start():Hn(this)&&!p?this._pendingCalls.add(n):n(Gh(T))}_focus(e){const t=this.animation;e!==t.to&&(kf(this)&&this._detach(),t.to=e,kf(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Dt(t)&&(ai(t,this),ic(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Dt(e)&&ns(e,this)}_set(e,t=!0){const n=_t(e);if(!F.und(n)){const r=hn(this);if(!r||!In(n,r.getValue())){const i=ec(n);!r||r.constructor!=i?tl(this,i.create(n)):r.setValue(n),r&&re.batchedUpdates(()=>{this._onChange(n,t)})}}return hn(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Ri(this,"onStart",Jt(this,Ii(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),gt(this.animation.onChange,e,this)),gt(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;hn(this).reset(_t(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Hn(this)||(Wf(this,!0),Ai(this)||this._resume())}_resume(){rn.skipAnimation?this.finish():zo.start(this)}_stop(e,t){if(Hn(this)){Wf(this,!1);const n=this.animation;ne(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),ts(this,{type:"idle",parent:this});const r=t?zr(this.get()):Jt(this.get(),Ii(this,e??n.to));Ui(this._pendingCalls,r),n.changed&&(n.changed=!1,Ri(this,"onRest",r,this))}}};function Ii(e,t){const n=ss(t),r=ss(e.get());return In(r,n)}function Yh(e,t=e.loop,n=e.to){const r=gt(t);if(r){const i=r!==!0&&nl(r),s=(i||e).reverse,o=!i||i.reset;return as({...e,loop:t,default:!1,pause:void 0,to:!s||tc(n)?n:void 0,from:o?e.from:void 0,reset:o,...i})}}function as(e){const{to:t,from:n}=e=nl(e),r=new Set;return F.obj(t)&&Kf(t,r),F.obj(n)&&Kf(n,r),e.keys=r.size?Array.from(r):null,e}function cb(e){const t=as(e);return F.und(t.default)&&(t.default=Xo(t)),t}function Kf(e,t){vn(e,(n,r)=>n!=null&&t.add(r))}var lb=["onStart","onRest","onChange","onPause","onResume"];function Qf(e,t,n){e.animation[n]=t[n]!==Hh(t,n)?Bh(t[n],e.key):void 0}function Ri(e,t,...n){var r,i,s,o;(i=(r=e.animation)[t])==null||i.call(r,...n),(o=(s=e.defaultProps)[t])==null||o.call(s,...n)}var fb=["onStart","onChange","onRest"],db=1,Xh=class{constructor(e,t){this.id=db++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];F.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(as(e)),this}start(e){let{queue:t}=this;return e?t=ut(e).map(as):this.queue=[],this._flush?this._flush(this,t):(nm(this,t),ac(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;ne(ut(t),r=>n[r].stop(!!e))}else os(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(F.und(e))this.start({pause:!0});else{const t=this.springs;ne(ut(e),n=>t[n].pause())}return this}resume(e){if(F.und(e))this.start({pause:!1});else{const t=this.springs;ne(ut(e),n=>t[n].resume())}return this}each(e){vn(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Vi(e,([a,u])=>{u.value=this.get(),a(u,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&t.size&&Vi(t,([a,u])=>{u.value=o,a(u,this,this._item)}),s&&(this._started=!1,Vi(n,([a,u])=>{u.value=o,a(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;re.onFrame(this._onFrame)}};function ac(e,t){return Promise.all(t.map(n=>Zh(e,n))).then(n=>rl(e,n))}async function Zh(e,t,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:u}=t,l=F.obj(t.default)&&t.default;o&&(t.loop=!1),i===!1&&(t.to=null),s===!1&&(t.from=null);const c=F.arr(i)||F.fun(i)?i:void 0;c?(t.to=void 0,t.onRest=void 0,l&&(l.onRest=void 0)):ne(fb,_=>{const g=t[_];if(F.fun(g)){const y=e._events[_];t[_]=({finished:S,cancelled:b})=>{const T=y.get(g);T?(S||(T.finished=!1),b&&(T.cancelled=!0)):y.set(g,{value:null,finished:S||!1,cancelled:b||!1})},l&&(l[_]=t[_])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,Ui(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map(_=>e.springs[_].start(t)),p=t.cancel===!0||Hh(t,"cancel")===!0;(c||p&&f.asyncId)&&d.push(Wh(++e._lastAsyncId,{props:t,state:f,actions:{pause:Xu,resume:Xu,start(_,g){p?(os(f,e._lastAsyncId),g(zr(e))):(_.onRest=a,g(Kh(c,_,f,e)))}}})),f.paused&&await new Promise(_=>{f.resumeQueue.add(_)});const h=rl(e,await Promise.all(d));if(o&&h.finished&&!(n&&h.noop)){const _=Yh(t,o,i);if(_)return nm(e,[_]),Zh(e,_,!0)}return u&&re.batchedUpdates(()=>u(h,e,e.item)),h}function uc(e,t){const n={...e.springs};return t&&ne(ut(t),r=>{F.und(r.keys)&&(r=as(r)),F.obj(r.to)||(r={...r,to:void 0}),tm(n,r,i=>em(i))}),Jh(e,n),n}function Jh(e,t){vn(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,ai(n,e))})}function em(e,t){const n=new ub;return n.key=e,t&&ai(n,t),n}function tm(e,t,n){t.keys&&ne(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function nm(e,t){ne(t,n=>{tm(e.springs,n,r=>em(r,e))})}var Ns=({children:e,...t})=>{const n=m.useContext(Ao),r=t.pause||!!n.pause,i=t.immediate||!!n.immediate;t=z0(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=Ao;return m.createElement(s,{value:t},e)},Ao=pb(Ns,{});Ns.Provider=Ao.Provider;Ns.Consumer=Ao.Consumer;function pb(e,t){return Object.assign(e,m.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var rm=()=>{const e=[],t=function(r){H0();const i=[];return ne(e,(s,o)=>{if(F.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const i=e.indexOf(r);~i&&e.splice(i,1)},t.pause=function(){return ne(e,r=>r.pause(...arguments)),this},t.resume=function(){return ne(e,r=>r.resume(...arguments)),this},t.set=function(r){ne(e,(i,s)=>{const o=F.fun(r)?r(s,i):r;o&&i.set(o)})},t.start=function(r){const i=[];return ne(e,(s,o)=>{if(F.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},t.stop=function(){return ne(e,r=>r.stop(...arguments)),this},t.update=function(r){return ne(e,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return F.fun(r)?r(s,i):r};return t._getProps=n,t};function hb(e,t,n){const r=F.fun(t)&&t;r&&!n&&(n=[]);const i=m.useMemo(()=>r||arguments.length==3?rm():void 0,[]),s=m.useRef(0),o=Jc(),a=m.useMemo(()=>({ctrls:[],queue:[],flush(y,S){const b=uc(y,S);return s.current>0&&!a.queue.length&&!Object.keys(b).some(I=>!y.springs[I])?ac(y,S):new Promise(I=>{Jh(y,b),a.queue.push(()=>{I(ac(y,S))}),o()})}}),[]),u=m.useRef([...a.ctrls]),l=[],c=Ju(e)||0;m.useMemo(()=>{ne(u.current.slice(e,c),y=>{nc(y,i),y.stop(!0)}),u.current.length=e,f(c,e)},[e]),m.useMemo(()=>{f(0,Math.min(c,e))},n);function f(y,S){for(let b=y;b<S;b++){const T=u.current[b]||(u.current[b]=new Xh(null,a.flush)),I=r?r(b,T):t[b];I&&(l[b]=cb(I))}}const d=u.current.map((y,S)=>uc(y,l[S])),p=m.useContext(Ns),h=Ju(p),_=p!==h&&Vh(p);_r(()=>{s.current++,a.ctrls=u.current;const{queue:y}=a;y.length&&(a.queue=[],ne(y,S=>S())),ne(u.current,(S,b)=>{i==null||i.add(S),_&&S.start({default:p});const T=l[b];T&&(zh(S,T.ref),S.ref?S.queue.push(T):S.start(T))})}),el(()=>()=>{ne(a.ctrls,y=>y.stop(!0))});const g=d.map(y=>({...y}));return i?[g,i]:g}function Hr(e,t){const n=F.fun(e),[[r],i]=hb(1,n?e:[e],n?t||[]:t);return n||arguments.length==2?[r,i]:r}function mb(e,t,n){const r=F.fun(t)&&t,{reset:i,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:u=!1,onDestroyed:l,ref:c,config:f}=r?r():t,d=m.useMemo(()=>r||arguments.length==3?rm():void 0,[]),p=ut(e),h=[],_=m.useRef(null),g=i?null:_.current;_r(()=>{_.current=h}),el(()=>(ne(h,D=>{d==null||d.add(D.ctrl),D.ctrl.ref=d}),()=>{ne(_.current,D=>{D.expired&&clearTimeout(D.expirationId),nc(D.ctrl,d),D.ctrl.stop(!0)})}));const y=gb(p,r?r():t,g),S=i&&_.current||[];_r(()=>ne(S,({ctrl:D,item:E,key:A})=>{nc(D,d),gt(l,E,A)}));const b=[];if(g&&ne(g,(D,E)=>{D.expired?(clearTimeout(D.expirationId),S.push(D)):(E=b[E]=y.indexOf(D.key),~E&&(h[E]=D))}),ne(p,(D,E)=>{h[E]||(h[E]={key:y[E],item:D,phase:"mount",ctrl:new Xh},h[E].ctrl.item=D)}),b.length){let D=-1;const{leave:E}=r?r():t;ne(b,(A,C)=>{const L=g[C];~A?(D=h.indexOf(L),h[D]={...L,item:p[A]}):E&&h.splice(++D,0,L)})}F.fun(s)&&h.sort((D,E)=>s(D.item,E.item));let T=-o;const I=Jc(),w=Xo(t),N=new Map,q=m.useRef(new Map),U=m.useRef(!1);ne(h,(D,E)=>{const A=D.key,C=D.phase,L=r?r():t;let P,K;const M=gt(L.delay||0,A);if(C=="mount")P=L.enter,K="enter";else{const Q=y.indexOf(A)<0;if(C!="leave")if(Q)P=L.leave,K="leave";else if(P=L.update)K="update";else return;else if(!Q)P=L.enter,K="enter";else return}if(P=gt(P,D.item,E),P=F.obj(P)?nl(P):{to:P},!P.config){const Q=f||w.config;P.config=gt(Q,D.item,E,K)}T+=o;const X={...w,delay:M+T,ref:c,immediate:L.immediate,reset:!1,...P};if(K=="enter"&&F.und(X.from)){const Q=r?r():t,ye=F.und(Q.initial)||g?Q.from:Q.initial;X.from=gt(ye,D.item,E)}const{onResolve:pe}=X;X.onResolve=Q=>{gt(pe,Q);const ye=_.current,R=ye.find(Ee=>Ee.key===A);if(R&&!(Q.cancelled&&R.phase!="update")&&R.ctrl.idle){const Ee=ye.every(be=>be.ctrl.idle);if(R.phase=="leave"){const be=gt(a,R.item);if(be!==!1){const Fe=be===!0?0:be;if(R.expired=!0,!Ee&&Fe>0){Fe<=2147483647&&(R.expirationId=setTimeout(I,Fe));return}}}Ee&&ye.some(be=>be.expired)&&(q.current.delete(R),u&&(U.current=!0),I())}};const ie=uc(D.ctrl,X);K==="leave"&&u?q.current.set(D,{phase:K,springs:ie,payload:X}):N.set(D,{phase:K,springs:ie,payload:X})});const k=m.useContext(Ns),W=Ju(k),B=k!==W&&Vh(k);_r(()=>{B&&ne(h,D=>{D.ctrl.start({default:k})})},[k]),ne(N,(D,E)=>{if(q.current.size){const A=h.findIndex(C=>C.key===E.key);h.splice(A,1)}}),_r(()=>{ne(q.current.size?q.current:N,({phase:D,payload:E},A)=>{const{ctrl:C}=A;A.phase=D,d==null||d.add(C),B&&D=="enter"&&C.start({default:k}),E&&(zh(C,E.ref),(C.ref||d)&&!U.current?C.update(E):(C.start(E),U.current&&(U.current=!1)))})},i?void 0:n);const z=D=>m.createElement(m.Fragment,null,h.map((E,A)=>{const{springs:C}=N.get(E)||E.ctrl,L=D({...C},E.item,E,A);return L&&L.type?m.createElement(L.type,{...L.props,key:F.str(E.key)||F.num(E.key)?E.key:E.ctrl.id,ref:L.ref}):L}));return d?[z,d]:z}var _b=1;function gb(e,{key:t,keys:n=t},r){if(n===null){const i=new Set;return e.map(s=>{const o=r&&r.find(a=>a.item===s&&a.phase!=="leave"&&!i.has(a));return o?(i.add(o),o.key):_b++})}return F.und(n)?e:F.fun(n)?e.map(n):ut(n)}var im=class extends il{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Ji(...t);const n=this._get(),r=ec(n);tl(this,r.create(n))}advance(e){const t=this._get(),n=this.get();In(t,n)||(hn(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Yf(this._active)&&Va(this)}_get(){const e=F.arr(this.source)?this.source.map(_t):ut(_t(this.source));return this.calc(...e)}_start(){this.idle&&!Yf(this._active)&&(this.idle=!1,ne(Qo(this),e=>{e.done=!1}),rn.skipAnimation?(re.batchedUpdates(()=>this.advance()),Va(this)):zo.start(this))}_attach(){let e=1;ne(ut(this.source),t=>{Dt(t)&&ai(t,this),ic(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){ne(ut(this.source),e=>{Dt(e)&&ns(e,this)}),this._active.clear(),Va(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=ut(this.source).reduce((t,n)=>Math.max(t,(ic(n)?n.priority:0)+1),0))}};function vb(e){return e.idle!==!1}function Yf(e){return!e.size||Array.from(e).every(vb)}function Va(e){e.idle||(e.idle=!0,ne(Qo(e),t=>{t.done=!0}),ts(e,{type:"idle",parent:e}))}var o2=(e,...t)=>new im(e,t);rn.assign({createStringInterpolator:Dh,to:(e,t)=>new im(e,t)});var sm=KE();const om=oi(sm);var am=/^--/;function yb(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!am.test(e)&&!(Gi.hasOwnProperty(e)&&Gi[e])?t+"px":(""+t).trim()}var Xf={};function Sb(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:i,children:s,scrollTop:o,scrollLeft:a,viewBox:u,...l}=t,c=Object.values(l),f=Object.keys(l).map(d=>n||e.hasAttribute(d)?d:Xf[d]||(Xf[d]=d.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(e.textContent=s);for(const d in i)if(i.hasOwnProperty(d)){const p=yb(d,i[d]);am.test(d)?e.style.setProperty(d,p):e.style[d]=p}f.forEach((d,p)=>{e.setAttribute(d,c[p])}),r!==void 0&&(e.className=r),o!==void 0&&(e.scrollTop=o),a!==void 0&&(e.scrollLeft=a),u!==void 0&&e.setAttribute("viewBox",u)}var Gi={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Eb=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),bb=["Webkit","Ms","Moz","O"];Gi=Object.keys(Gi).reduce((e,t)=>(bb.forEach(n=>e[Eb(n,t)]=e[t]),e),Gi);var wb=/^(matrix|translate|scale|rotate|skew)/,Tb=/^(translate)/,Ob=/^(rotate|skew)/,za=(e,t)=>F.num(e)&&e!==0?e+t:e,vo=(e,t)=>F.arr(e)?e.every(n=>vo(n,t)):F.num(e)?e===t:parseFloat(e)===t,Cb=class extends Yo{constructor({x:e,y:t,z:n,...r}){const i=[],s=[];(e||t||n)&&(i.push([e||0,t||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>za(a,"px")).join(",")})`,vo(o,0)])),vn(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(u=>[u,u===""]);else if(wb.test(a)){if(delete r[a],F.und(o))return;const u=Tb.test(a)?"px":Ob.test(a)?"deg":"";i.push(ut(o)),s.push(a==="rotate3d"?([l,c,f,d])=>[`rotate3d(${l},${c},${f},${za(d,u)})`,vo(d,0)]:l=>[`${a}(${l.map(c=>za(c,u)).join(",")})`,vo(l,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new Nb(i,s)),super(r)}},Nb=class extends Fh{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return ne(this.inputs,(n,r)=>{const i=_t(n[0]),[s,o]=this.transforms[r](F.arr(i)?i:n.map(_t));e+=" "+s,t=t&&o}),t?"none":e}observerAdded(e){e==1&&ne(this.inputs,t=>ne(t,n=>Dt(n)&&ai(n,this)))}observerRemoved(e){e==0&&ne(this.inputs,t=>ne(t,n=>Dt(n)&&ns(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),ts(this,e)}},Ab=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];rn.assign({batchedUpdates:sm.unstable_batchedUpdates,createStringInterpolator:Dh,colors:E0});var Ib=J0(Ab,{applyAnimatedValues:Sb,createAnimatedStyle:e=>new Cb(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Ze=Ib.animated;const Zo=e=>{const t=document.createElement("div");return t.innerHTML=e.replace(/<br\s*\/?>/g,`
`).replace(/<\/p><p>/g,`

`).replace(/<[^>]*>/g,""),t.textContent},Rb=async e=>{try{e(await Notification.requestPermission())}catch(t){console.warn(t)}};var Ht=typeof window<"u"?window:{screen:{},navigator:{}},Gr=(Ht.matchMedia||function(){return{matches:!1}}).bind(Ht),um=!1,xb={get passive(){return um=!0}},cm=function(){};Ht.addEventListener&&Ht.addEventListener("p",cm,xb);Ht.removeEventListener&&Ht.removeEventListener("p",cm,!1);var Lb=um,sl="ontouchstart"in Ht,Mb="TouchEvent"in Ht,Pb=sl||Mb&&Gr("(any-pointer: coarse)").matches;(Ht.navigator.maxTouchPoints||0)>0;var lm=Ht.navigator.userAgent||"",Fb=Gr("(pointer: coarse)").matches&&/iPad|Macintosh/.test(lm)&&Math.min(Ht.screen.width||0,Ht.screen.height||0)>=768;(Gr("(pointer: coarse)").matches||!Gr("(pointer: fine)").matches&&sl)&&/Windows.*Firefox/.test(lm);Gr("(any-pointer: fine)").matches||Gr("(any-hover: hover)").matches;const Ub=630,kb=e=>e<=Ub,Db=!bh&&!s0,fm=()=>kb(window.innerWidth)?"mobile":!bh&&!Db?"multi-column":"single-column",jb=Lb?{passive:!0}:!1;let dm=!1;const pm=()=>{dm=!0,window.removeEventListener("touchstart",pm)};window.addEventListener("touchstart",pm,jb);const a2=()=>dm,ct=QE(),$b=ct.push.bind(ct),qb=ct.replace.bind(ct);function u2(){return YE()}function hm(e,t){const n=typeof e=="string"?{pathname:e}:{...e};return n.state===void 0&&t!==void 0?n.state=t:n.state!==void 0&&t!==void 0&&f0()&&console.log("You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored"),fm()==="multi-column"&&n.pathname&&!n.pathname.startsWith("/deck")&&(n.pathname=`/deck${n.pathname}`),n}ct.push=(e,t)=>{const n=hm(e,t);n.state=n.state??{},n.state.fromMastodon=!0,$b(n)};ct.replace=(e,t)=>{var r;const n=hm(e,t);n.pathname&&((r=ct.location.state)!=null&&r.fromMastodon&&(n.state=n.state??{},n.state.fromMastodon=!0),qb(n))};const c2=({children:e})=>O.jsxDEV(XE,{history:ct,children:e},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/router.tsx",lineNumber:86,columnNumber:10},void 0);var Bb=n0();const ol=oi(Bb),Hb=(e,{delay:t=100})=>{let n=[],r;const i=ol(()=>{const s=n;n=[],e(r,...s)},t);return(s,...o)=>{r=s,n.push(...o),i()}};var Vb=typeof Symbol=="function"&&Symbol.observable||"@@observable",Zf=Vb,Wa=()=>Math.random().toString(36).substring(7).split("").join("."),zb={INIT:`@@redux/INIT${Wa()}`,REPLACE:`@@redux/REPLACE${Wa()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Wa()}`},vr=zb;function As(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Wb(e){if(e===void 0)return"undefined";if(e===null)return"null";const t=typeof e;switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(Qb(e))return"date";if(Kb(e))return"error";const n=Gb(e);switch(n){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return n}return Object.prototype.toString.call(e).slice(8,-1).toLowerCase().replace(/\s/g,"")}function Gb(e){return typeof e.constructor=="function"?e.constructor.name:null}function Kb(e){return e instanceof Error||typeof e.message=="string"&&e.constructor&&typeof e.constructor.stackTraceLimit=="number"}function Qb(e){return e instanceof Date?!0:typeof e.toDateString=="function"&&typeof e.getDate=="function"&&typeof e.setDate=="function"}function Wn(e){let t=typeof e;return t=Wb(e),t}function mm(e,t,n){if(typeof e!="function")throw new Error(`Expected the root reducer to be a function. Instead, received: '${Wn(e)}'`);if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(`Expected the enhancer to be a function. Instead, received: '${Wn(n)}'`);return n(mm)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function f(g){if(typeof g!="function")throw new Error(`Expected the listener to be a function. Instead, received: '${Wn(g)}'`);if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");let y=!0;l();const S=a++;return o.set(S,g),function(){if(y){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");y=!1,l(),o.delete(S),s=null}}}function d(g){if(!As(g))throw new Error(`Actions must be plain objects. Instead, the actual type was: '${Wn(g)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);if(typeof g.type>"u")throw new Error('Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(typeof g.type!="string")throw new Error(`Action "type" property must be a string. Instead, the actual type was: '${Wn(g.type)}'. Value was: '${g.type}' (stringified)`);if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(S=>{S()}),g}function p(g){if(typeof g!="function")throw new Error(`Expected the nextReducer to be a function. Instead, received: '${Wn(g)}`);r=g,d({type:vr.REPLACE})}function h(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(`Expected the observer to be an object. Instead, received: '${Wn(y)}'`);function S(){const T=y;T.next&&T.next(c())}return S(),{unsubscribe:g(S)}},[Zf](){return this}}}return d({type:vr.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:p,[Zf]:h}}function Jf(e){typeof console<"u"&&typeof console.error=="function"&&console.error(e);try{throw new Error(e)}catch{}}function Yb(e,t,n,r){const i=Object.keys(t),s=n&&n.type===vr.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(i.length===0)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!As(e))return`The ${s} has unexpected type of "${Wn(e)}". Expected argument to be an object with the following keys: "${i.join('", "')}"`;const o=Object.keys(e).filter(a=>!t.hasOwnProperty(a)&&!r[a]);if(o.forEach(a=>{r[a]=!0}),!(n&&n.type===vr.REPLACE)&&o.length>0)return`Unexpected ${o.length>1?"keys":"key"} "${o.join('", "')}" found in ${s}. Expected to find one of the known reducer keys instead: "${i.join('", "')}". Unexpected keys will be ignored.`}function Xb(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:vr.INIT})>"u")throw new Error(`The slice reducer for key "${t}" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof n(void 0,{type:vr.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(`The slice reducer for key "${t}" returned undefined when probed with a random type. Don't try to handle '${vr.INIT}' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.`)})}function Zb(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const a=t[o];typeof e[a]>"u"&&Jf(`No reducer provided for key "${a}"`),typeof e[a]=="function"&&(n[a]=e[a])}const r=Object.keys(n);let i;i={};let s;try{Xb(n)}catch(o){s=o}return function(a={},u){if(s)throw s;{const f=Yb(a,n,u,i);f&&Jf(f)}let l=!1;const c={};for(let f=0;f<r.length;f++){const d=r[f],p=n[d],h=a[d],_=p(h,u);if(typeof _>"u"){const g=u&&u.type;throw new Error(`When called with an action of type ${g?`"${String(g)}"`:"(unknown type)"}, the slice reducer for key "${d}" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.`)}c[d]=_,l=l||_!==h}return l=l||r.length!==Object.keys(a).length,l?c:a}}function Io(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Jb(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=Io(...a)(i.dispatch),{...i,dispatch:s}}}function Is(e){return As(e)&&"type"in e&&typeof e.type=="string"}var _m=Symbol.for("immer-nothing"),ed=Symbol.for("immer-draftable"),It=Symbol.for("immer-state"),ew=[function(e){return`The plugin for '${e}' has not been loaded into Immer. To enable the plugin, import and call \`enable${e}()\` when initializing your application.`},function(e){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${e}'`},"This object has been frozen and should not be mutated",function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(e){return`'current' expects a draft, got: ${e}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(e){return`'original' expects a draft, got: ${e}`}];function vt(e,...t){{const n=ew[e],r=typeof n=="function"?n.apply(null,t):n;throw new Error(`[Immer] ${r}`)}}var Kr=Object.getPrototypeOf;function wr(e){return!!e&&!!e[It]}function xn(e){var t;return e?gm(e)||Array.isArray(e)||!!e[ed]||!!((t=e.constructor)!=null&&t[ed])||ea(e)||ta(e):!1}var tw=Object.prototype.constructor.toString();function gm(e){if(!e||typeof e!="object")return!1;const t=Kr(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===tw}function Ro(e,t){Jo(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Jo(e){const t=e[It];return t?t.type_:Array.isArray(e)?1:ea(e)?2:ta(e)?3:0}function cc(e,t){return Jo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vm(e,t,n){const r=Jo(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nw(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ea(e){return e instanceof Map}function ta(e){return e instanceof Set}function pr(e){return e.copy_||e.base_}function lc(e,t){if(ea(e))return new Map(e);if(ta(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=gm(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[It];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Kr(e),r)}else{const r=Kr(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function al(e,t=!1){return na(e)||wr(e)||!xn(e)||(Jo(e)>1&&(e.set=e.add=e.clear=e.delete=rw),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>al(r,!0))),e}function rw(){vt(2)}function na(e){return Object.isFrozen(e)}var iw={};function Tr(e){const t=iw[e];return t||vt(0,e),t}var us;function ym(){return us}function sw(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function td(e,t){t&&(Tr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fc(e){dc(e),e.drafts_.forEach(ow),e.drafts_=null}function dc(e){e===us&&(us=e.parent_)}function nd(e){return us=sw(us,e)}function ow(e){const t=e[It];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rd(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[It].modified_&&(fc(t),vt(4)),xn(e)&&(e=xo(t,e),t.parent_||Lo(t,e)),t.patches_&&Tr("Patches").generateReplacementPatches_(n[It].base_,e,t.patches_,t.inversePatches_)):e=xo(t,n,[]),fc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_m?e:void 0}function xo(e,t,n){if(na(t))return t;const r=t[It];if(!r)return Ro(t,(i,s)=>id(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Lo(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Ro(s,(a,u)=>id(e,r,i,a,u,n,o)),Lo(e,i,!1),n&&e.patches_&&Tr("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function id(e,t,n,r,i,s,o){if(i===n&&vt(5),wr(i)){const a=s&&t&&t.type_!==3&&!cc(t.assigned_,r)?s.concat(r):void 0,u=xo(e,i,a);if(vm(n,r,u),wr(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(xn(i)&&!na(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xo(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Lo(e,i)}}function Lo(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&al(t,n)}function aw(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ym(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ul;n&&(i=[r],s=cs);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var ul={get(e,t){if(t===It)return e;const n=pr(e);if(!cc(n,t))return uw(e,n,t);const r=n[t];return e.finalized_||!xn(r)?r:r===Ga(e.base_,t)?(Ka(e),e.copy_[t]=hc(r,e)):r},has(e,t){return t in pr(e)},ownKeys(e){return Reflect.ownKeys(pr(e))},set(e,t,n){const r=Sm(pr(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Ga(pr(e),t),s=i==null?void 0:i[It];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(nw(n,i)&&(n!==void 0||cc(e.base_,t)))return!0;Ka(e),pc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ga(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ka(e),pc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=pr(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){vt(11)},getPrototypeOf(e){return Kr(e.base_)},setPrototypeOf(){vt(12)}},cs={};Ro(ul,(e,t)=>{cs[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});cs.deleteProperty=function(e,t){return isNaN(parseInt(t))&&vt(13),cs.set.call(this,e,t,void 0)};cs.set=function(e,t,n){return t!=="length"&&isNaN(parseInt(t))&&vt(14),ul.set.call(this,e[0],t,n,e[0])};function Ga(e,t){const n=e[It];return(n?pr(n):e)[t]}function uw(e,t,n){var i;const r=Sm(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function Sm(e,t){if(!(t in e))return;let n=Kr(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Kr(n)}}function pc(e){e.modified_||(e.modified_=!0,e.parent_&&pc(e.parent_))}function Ka(e){e.copy_||(e.copy_=lc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cw=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&vt(6),r!==void 0&&typeof r!="function"&&vt(7);let i;if(xn(t)){const s=nd(this),o=hc(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?fc(s):dc(s)}return td(s,r),rd(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===_m&&(i=void 0),this.autoFreeze_&&al(i,!0),r){const s=[],o=[];Tr("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else vt(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){xn(e)||vt(8),wr(e)&&(e=lw(e));const t=nd(this),n=hc(e,void 0);return n[It].isManual_=!0,dc(t),n}finishDraft(e,t){const n=e&&e[It];(!n||!n.isManual_)&&vt(9);const{scope_:r}=n;return td(r,t),rd(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Tr("Patches").applyPatches_;return wr(e)?r(e,t):this.produce(e,i=>r(i,t))}};function hc(e,t){const n=ea(e)?Tr("MapSet").proxyMap_(e,t):ta(e)?Tr("MapSet").proxySet_(e,t):aw(e,t);return(t?t.scope_:ym()).drafts_.push(n),n}function lw(e){return wr(e)||vt(10,e),Em(e)}function Em(e){if(!xn(e)||na(e))return e;const t=e[It];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=lc(e,t.scope_.immer_.useStrictShallowCopy_)}else n=lc(e,!0);return Ro(n,(r,i)=>{vm(n,r,Em(i))}),t&&(t.finalized_=!1),n}var Rt=new cw,bm=Rt.produce;Rt.produceWithPatches.bind(Rt);Rt.setAutoFreeze.bind(Rt);Rt.setUseStrictShallowCopy.bind(Rt);Rt.applyPatches.bind(Rt);Rt.createDraft.bind(Rt);Rt.finishDraft.bind(Rt);var fw=(e,t,n)=>{if(t.length===1&&t[0]===n){let r=!1;try{const i={};e(i)===i&&(r=!0)}catch{}if(r){let i;try{throw new Error}catch(s){({stack:i}=s)}console.warn(`The result function returned its own inputs without modification. e.g
\`createSelector([state => state.todos], todos => todos)\`
This could lead to inefficient memoization and unnecessary re-renders.
Ensure transformation logic is in the result function, and extraction logic is in the input selectors.`,{stack:i})}}},dw=(e,t,n)=>{const{memoize:r,memoizeOptions:i}=t,{inputSelectorResults:s,inputSelectorResultsCopy:o}=e,a=r(()=>({}),...i);if(!(a.apply(null,s)===a.apply(null,o))){let l;try{throw new Error}catch(c){({stack:l}=c)}console.warn(`An input selector returned a different result when passed same arguments.
This means your output selector will likely run more frequently than intended.
Avoid returning a new reference inside your input selector, e.g.
\`createSelector([state => state.todos.map(todo => todo.id)], todoIds => todoIds.length)\``,{arguments:n,firstInputs:s,secondInputs:o,stack:l})}},pw={inputStabilityCheck:"once",identityFunctionCheck:"once"};function hw(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function mw(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function _w(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var sd=e=>Array.isArray(e)?e:[e];function gw(e){const t=Array.isArray(e[0])?e[0]:e;return _w(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function od(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var vw=(e,t)=>{const{identityFunctionCheck:n,inputStabilityCheck:r}={...pw,...t};return{identityFunctionCheck:{shouldRun:n==="always"||n==="once"&&e,run:fw},inputStabilityCheck:{shouldRun:r==="always"||r==="once"&&e,run:dw}}},yw=class{constructor(e){this.value=e}deref(){return this.value}},Sw=typeof WeakRef<"u"?WeakRef:yw,Ew=0,ad=1;function Js(){return{s:Ew,v:void 0,o:null,p:null}}function wm(e,t={}){let n=Js();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,p=u;d<p;d++){const h=arguments[d];if(typeof h=="function"||typeof h=="object"&&h!==null){let _=a.o;_===null&&(a.o=_=new WeakMap);const g=_.get(h);g===void 0?(a=Js(),_.set(h,a)):a=g}else{let _=a.p;_===null&&(a.p=_=new Map);const g=_.get(h);g===void 0?(a=Js(),_.set(h,a)):a=g}}const l=a;let c;if(a.s===ad)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Sw(c):c}return l.s=ad,l.v=c,c}return o.clearCache=()=>{n=Js(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function bw(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),hw(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:p=wm,argsMemoizeOptions:h=[],devModeChecks:_={}}=c,g=sd(d),y=sd(h),S=gw(i),b=f(function(){return s++,l.apply(null,arguments)},...g);let T=!0;const I=p(function(){o++;const N=od(S,arguments);a=b.apply(null,N);{const{identityFunctionCheck:q,inputStabilityCheck:U}=vw(T,_);if(q.shouldRun&&q.run(l,N,a),U.shouldRun){const k=od(S,arguments);U.run({inputSelectorResults:N,inputSelectorResultsCopy:k},{memoize:f,memoizeOptions:g},arguments)}T&&(T=!1)}return a},...y);return Object.assign(I,{resultFunc:l,memoizedResultFunc:b,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(r,{withTypes:()=>r}),r}var ra=bw(wm),ww=Object.assign((e,t=ra)=>{mw(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>ww});function Tm(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Tw=Tm(),Ow=Tm,Cw=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Io:Io.apply(null,arguments)},Om=e=>e&&typeof e.match=="function";function ee(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error("prepareAction did not return an object");return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Is(r)&&r.type===e,n}function Nw(e){return typeof e=="function"&&"type"in e&&Om(e)}function Aw(e){const t=e?`${e}`.split("/"):[],n=t[t.length-1]||"actionCreator";return`Detected an action creator with type "${e||"unknown"}" being dispatched. 
Make sure you're calling the action creator before dispatching, i.e. \`dispatch(${n}())\` instead of \`dispatch(${n})\`. This is necessary even if the action has no payload.`}function Iw(e={}){const{isActionCreator:t=Nw}=e;return()=>n=>r=>(t(r)&&console.warn(Aw(r.type)),n(r))}function Cm(e,t){let n=0;return{measureTime(r){const i=Date.now();try{return r()}finally{const s=Date.now();n+=s-i}},warnIfExceeded(){n>e&&console.warn(`${t} took ${n}ms, which is more than the warning threshold of ${e}ms. 
If your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.
It is disabled in production builds, so you don't need to worry about that.`)}}}var Nm=class ki extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ki.prototype)}static get[Symbol.species](){return ki}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ki(...t[0].concat(this)):new ki(...t.concat(this))}};function ud(e){return xn(e)?bm(e,()=>{}):e}function Rw(e){return typeof e!="object"||e==null||Object.isFrozen(e)}function xw(e,t,n){const r=Am(e,t,n);return{detectMutations(){return Im(e,t,r,n)}}}function Am(e,t=[],n,r="",i=new Set){const s={value:n};if(!e(n)&&!i.has(n)){i.add(n),s.children={};for(const o in n){const a=r?r+"."+o:o;t.length&&t.indexOf(a)!==-1||(s.children[o]=Am(e,t,n[o],a))}}return s}function Im(e,t=[],n,r,i=!1,s=""){const o=n?n.value:void 0,a=o===r;if(i&&!a&&!Number.isNaN(r))return{wasMutated:!0,path:s};if(e(o)||e(r))return{wasMutated:!1};const u={};for(let c in n.children)u[c]=!0;for(let c in r)u[c]=!0;const l=t.length>0;for(let c in u){const f=s?s+"."+c:c;if(l&&t.some(h=>h instanceof RegExp?h.test(f):f===h))continue;const d=Im(e,t,n.children[c],r[c],a,f);if(d.wasMutated)return d}return{wasMutated:!1}}function Lw(e={}){{let t=function(a,u,l,c){return JSON.stringify(a,n(u,c),l)},n=function(a,u){let l=[],c=[];return u||(u=function(f,d){return l[0]===d?"[Circular ~]":"[Circular ~."+c.slice(0,l.indexOf(d)).join(".")+"]"}),function(f,d){if(l.length>0){var p=l.indexOf(this);~p?l.splice(p+1):l.push(this),~p?c.splice(p,1/0,f):c.push(f),~l.indexOf(d)&&(d=u.call(this,f,d))}else l.push(d);return a==null?d:a.call(this,f,d)}},{isImmutable:r=Rw,ignoredPaths:i,warnAfter:s=32}=e;const o=xw.bind(null,r,i);return({getState:a})=>{let u=a(),l=o(u),c;return f=>d=>{const p=Cm(s,"ImmutableStateInvariantMiddleware");p.measureTime(()=>{if(u=a(),c=l.detectMutations(),l=o(u),c.wasMutated)throw new Error(`A state mutation was detected between dispatches, in the path '${c.path||""}'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`)});const h=f(d);return p.measureTime(()=>{if(u=a(),c=l.detectMutations(),l=o(u),c.wasMutated)throw new Error(`A state mutation was detected inside a dispatch, in the path: ${c.path||""}. Take a look at the reducer(s) handling the action ${t(d)}. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)`)}),p.warnIfExceeded(),h}}}}function Rm(e){const t=typeof e;return e==null||t==="string"||t==="boolean"||t==="number"||Array.isArray(e)||As(e)}function mc(e,t="",n=Rm,r,i=[],s){let o;if(!n(e))return{keyPath:t||"<root>",value:e};if(typeof e!="object"||e===null||s!=null&&s.has(e))return!1;const a=r!=null?r(e):Object.entries(e),u=i.length>0;for(const[l,c]of a){const f=t?t+"."+l:l;if(!(u&&i.some(p=>p instanceof RegExp?p.test(f):f===p))){if(!n(c))return{keyPath:f,value:c};if(typeof c=="object"&&(o=mc(c,f,n,r,i,s),o))return o}}return s&&xm(e)&&s.add(e),!1}function xm(e){if(!Object.isFrozen(e))return!1;for(const t of Object.values(e))if(!(typeof t!="object"||t===null)&&!xm(t))return!1;return!0}function Mw(e={}){{const{isSerializable:t=Rm,getEntries:n,ignoredActions:r=[],ignoredActionPaths:i=["meta.arg","meta.baseQueryMeta"],ignoredPaths:s=[],warnAfter:o=32,ignoreState:a=!1,ignoreActions:u=!1,disableCache:l=!1}=e,c=!l&&WeakSet?new WeakSet:void 0;return f=>d=>p=>{if(!Is(p))return d(p);const h=d(p),_=Cm(o,"SerializableStateInvariantMiddleware");return!u&&!(r.length&&r.indexOf(p.type)!==-1)&&_.measureTime(()=>{const g=mc(p,"",t,n,i,c);if(g){const{keyPath:y,value:S}=g;console.error(`A non-serializable value was detected in an action, in the path: \`${y}\`. Value:`,S,`
Take a look at the logic that dispatched this action: `,p,`
(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)`,`
(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)`)}}),a||(_.measureTime(()=>{const g=f.getState(),y=mc(g,"",t,n,s,c);if(y){const{keyPath:S,value:b}=y;console.error(`A non-serializable value was detected in the state, in the path: \`${S}\`. Value:`,b,`
Take a look at the reducer(s) handling this action type: ${p.type}.
(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)`)}}),_.warnIfExceeded()),h}}}function eo(e){return typeof e=="boolean"}var Pw=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new Nm;n&&(eo(n)?o.push(Tw):o.push(Ow(n.extraArgument)));{if(r){let a={};eo(r)||(a=r),o.unshift(Lw(a))}if(i){let a={};eo(i)||(a=i),o.push(Mw(a))}if(s){let a={};eo(s)||(a=s),o.unshift(Iw(a))}}return o},Fw="RTK_autoBatch",cd=e=>t=>{setTimeout(t,e)},Uw=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cd(10):e.type==="callback"?e.queueNotification:cd(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Fw]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},kw=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new Nm(e);return r&&i.push(Uw(typeof r=="object"?r:void 0)),i};function Dw(e){const t=Pw(),{reducer:n=void 0,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:s=!0,preloadedState:o=void 0,enhancers:a=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(As(n))u=Zb(n);else throw new Error("`reducer` is a required argument, and must be a function or an object of functions that can be passed to combineReducers");if(r&&typeof r!="function")throw new Error("`middleware` field must be a callback");let l;if(typeof r=="function"){if(l=r(t),!Array.isArray(l))throw new Error("when using a middleware builder function, an array of middleware must be returned")}else l=t();if(l.some(_=>typeof _!="function"))throw new Error("each middleware provided to configureStore must be a function");if(s){let _=new Set;l.forEach(g=>{if(_.has(g))throw new Error("Duplicate middleware references found when creating the store. Ensure that each middleware is only included once.");_.add(g)})}let c=Io;i&&(c=Cw({trace:!0,...typeof i=="object"&&i}));const f=Jb(...l),d=kw(f);if(a&&typeof a!="function")throw new Error("`enhancers` field must be a callback");let p=typeof a=="function"?a(d):d();if(!Array.isArray(p))throw new Error("`enhancers` callback must return an array");if(p.some(_=>typeof _!="function"))throw new Error("each enhancer provided to configureStore must be a function");l.length&&!p.includes(f)&&console.error("middlewares were provided, but middleware enhancer was not included in final enhancers - make sure to call `getDefaultEnhancers`");const h=c(...p);return mm(u,o,h)}function jw(e){const t={},n=[];let r;const i={addCase(s,o){{if(n.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(r)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`")}const a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error(`\`builder.addCase\` cannot be called with two reducers for the same action type '${a}'`);return t[a]=o,i},addMatcher(s,o){if(r)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){if(r)throw new Error("`builder.addDefaultCase` can only be called once");return r=s,i}};return e(i),[t,n,r]}function $w(e){return typeof e=="function"}function Kt(e,t){if(typeof t=="object")throw new Error("The object notation for `createReducer` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer");let[n,r,i]=jw(t),s;if($w(e))s=()=>ud(e());else{const a=ud(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(wr(c)){const p=f(c,u);return p===void 0?c:p}else{if(xn(c))return bm(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var Lm=(e,t)=>Om(e)?e.match(t):e(t);function We(...e){return t=>e.some(n=>Lm(n,t))}function ld(...e){return t=>e.every(n=>Lm(n,t))}function ia(e,t){if(!e||!e.meta)return!1;const n=typeof e.meta.requestId=="string",r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function Rs(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Mm(...e){return e.length===0?t=>ia(t,["pending"]):Rs(e)?We(...e.map(t=>t.pending)):Mm()(e[0])}function Mo(...e){return e.length===0?t=>ia(t,["rejected"]):Rs(e)?We(...e.map(t=>t.rejected)):Mo()(e[0])}function Pm(...e){const t=n=>n&&n.meta&&n.meta.rejectedWithValue;return e.length===0?ld(Mo(...e),t):Rs(e)?ld(Mo(...e),t):Pm()(e[0])}function Po(...e){return e.length===0?t=>ia(t,["fulfilled"]):Rs(e)?We(...e.map(t=>t.fulfilled)):Po()(e[0])}function cl(...e){return e.length===0?t=>ia(t,["pending","fulfilled","rejected"]):Rs(e)?We(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):cl()(e[0])}var qw="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Bw=(e=21)=>{let t="",n=e;for(;n--;)t+=qw[Math.random()*64|0];return t},Hw=["name","message","stack","code"],Qa=class{constructor(e,t){ka(this,"_type");this.payload=e,this.meta=t}},fd=class{constructor(e,t){ka(this,"_type");this.payload=e,this.meta=t}},Vw=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Hw)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},dd="External signal was aborted",Fm=(()=>{function e(t,n,r){const i=ee(t+"/fulfilled",(u,l,c,f)=>({payload:u,meta:{...f||{},arg:c,requestId:l,requestStatus:"fulfilled"}})),s=ee(t+"/pending",(u,l,c)=>({payload:void 0,meta:{...c||{},arg:l,requestId:u,requestStatus:"pending"}})),o=ee(t+"/rejected",(u,l,c,f,d)=>({payload:f,error:(r&&r.serializeError||Vw)(u||"Rejected"),meta:{...d||{},arg:c,requestId:l,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"}}));function a(u,{signal:l}={}){return(c,f,d)=>{const p=r!=null&&r.idGenerator?r.idGenerator(u):Bw(),h=new AbortController;let _,g;function y(b){g=b,h.abort()}l&&(l.aborted?y(dd):l.addEventListener("abort",()=>y(dd),{once:!0}));const S=async function(){var I,w;let b;try{let N=(I=r==null?void 0:r.condition)==null?void 0:I.call(r,u,{getState:f,extra:d});if(Ww(N)&&(N=await N),N===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const q=new Promise((U,k)=>{_=()=>{k({name:"AbortError",message:g||"Aborted"})},h.signal.addEventListener("abort",_)});c(s(p,u,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:p,arg:u},{getState:f,extra:d}))),b=await Promise.race([q,Promise.resolve(n(u,{dispatch:c,getState:f,extra:d,requestId:p,signal:h.signal,abort:y,rejectWithValue:(U,k)=>new Qa(U,k),fulfillWithValue:(U,k)=>new fd(U,k)})).then(U=>{if(U instanceof Qa)throw U;return U instanceof fd?i(U.payload,p,u,U.meta):i(U,p,u)})])}catch(N){b=N instanceof Qa?o(null,p,u,N.payload,N.meta):o(N,p,u)}finally{_&&h.signal.removeEventListener("abort",_)}return r&&!r.dispatchConditionRejection&&o.match(b)&&b.meta.condition||c(b),b}();return Object.assign(S,{abort:y,requestId:p,arg:u,unwrap(){return S.then(zw)}})}}return Object.assign(a,{pending:s,rejected:o,fulfilled:i,settled:We(o,i),typePrefix:t})}return e.withTypes=()=>e,e})();function zw(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Ww(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}const Gw=(e,t)=>an(`v1/accounts/${e}/note`,{comment:t}),l2=(e,t)=>an(`v1/accounts/${e}/follow`,{...t}),Kw=e=>an(`v1/accounts/${e}/remove_from_followers`),Qw=e=>Gt(`v1/accounts/${e}/featured_tags`),Yw=e=>Gt(`v1/accounts/${e}/endorsements`),Xw=e=>Gt("v1/accounts/familiar_followers",{id:e});var Ya={exports:{}},Xa={},pd;function Zw(){if(pd)return Xa;pd=1;/**
 * @license React
 * use-sync-external-store-with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */return function(){function e(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var t=qc(),n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,a=t.useDebugValue;Xa.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var p=i(null);if(p.current===null){var h={hasValue:!1,value:null};p.current=h}else h=p.current;p=o(function(){function g(I){if(!y){if(y=!0,S=I,I=f(I),d!==void 0&&h.hasValue){var w=h.value;if(d(w,I))return b=w}return b=I}if(w=b,n(S,I))return w;var N=f(I);return d!==void 0&&d(w,N)?(S=I,w):(S=I,b=N)}var y=!1,S,b,T=c===void 0?null:c;return[function(){return g(l())},T===null?void 0:function(){return g(T())}]},[l,c,f,d]);var _=r(u,p[0],p[1]);return s(function(){h.hasValue=!0,h.value=_},[_]),a(_),_},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())}(),Xa}var hd;function Um(){return hd||(hd=1,Ya.exports=Zw()),Ya.exports}var Jw=Um(),km=m.version.startsWith("19"),eT=Symbol.for(km?"react.transitional.element":"react.element"),tT=Symbol.for("react.portal"),Dm=Symbol.for("react.fragment"),jm=Symbol.for("react.strict_mode"),$m=Symbol.for("react.profiler"),ll=Symbol.for("react.consumer"),fl=Symbol.for("react.context"),dl=Symbol.for("react.forward_ref"),qm=Symbol.for("react.suspense"),Bm=Symbol.for("react.suspense_list"),sa=Symbol.for("react.memo"),Hm=Symbol.for("react.lazy"),nT=Symbol.for("react.offscreen"),rT=Symbol.for("react.client.reference"),iT=dl,sT=sa;function oT(e){return typeof e=="string"||typeof e=="function"||e===Dm||e===$m||e===jm||e===qm||e===Bm||e===nT||typeof e=="object"&&e!==null&&(e.$$typeof===Hm||e.$$typeof===sa||e.$$typeof===fl||e.$$typeof===ll||e.$$typeof===dl||e.$$typeof===rT||e.getModuleId!==void 0)}function _c(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case eT:switch(e=e.type,e){case Dm:case $m:case jm:case qm:case Bm:return e;default:switch(e=e&&e.$$typeof,e){case fl:case dl:case Hm:case sa:return e;case ll:return e;default:return t}}case tT:return t}}}function aT(e){return km?_c(e)===ll:_c(e)===fl}function uT(e){return _c(e)===sa}function pl(e){typeof console<"u"&&typeof console.error=="function"&&console.error(e);try{throw new Error(e)}catch{}}function Za(e,t){if(e)(t==="mapStateToProps"||t==="mapDispatchToProps")&&(Object.prototype.hasOwnProperty.call(e,"dependsOnOwnProps")||pl(`The selector for ${t} of connect did not specify a value for dependsOnOwnProps.`));else throw new Error(`Unexpected value for ${t} in connect.`)}function cT(e,t,n){Za(e,"mapStateToProps"),Za(t,"mapDispatchToProps"),Za(n,"mergeProps")}function lT(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let a=!1,u,l,c,f,d;function p(S,b){return u=S,l=b,c=e(u,l),f=t(r,l),d=n(c,f,l),a=!0,d}function h(){return c=e(u,l),t.dependsOnOwnProps&&(f=t(r,l)),d=n(c,f,l),d}function _(){return e.dependsOnOwnProps&&(c=e(u,l)),t.dependsOnOwnProps&&(f=t(r,l)),d=n(c,f,l),d}function g(){const S=e(u,l),b=!o(S,c);return c=S,b&&(d=n(c,f,l)),d}function y(S,b){const T=!s(b,l),I=!i(S,u,b,l);return u=S,l=b,T&&I?h():T?_():I?g():d}return function(b,T){return a?y(b,T):p(b,T)}}function fT(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=t(e,i),o=n(e,i),a=r(e,i);return cT(s,o,a),lT(s,o,a,e,i)}function dT(e,t){const n={};for(const r in e){const i=e[r];typeof i=="function"&&(n[r]=(...s)=>t(i(...s)))}return n}function pT(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}function Vm(e,t,n){pT(e)||pl(`${n}() in ${t} must return a plain object. Instead received ${e}.`)}function gc(e){return function(n){const r=e(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function md(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function zm(e,t){return function(r,{displayName:i}){const s=function(a,u){return s.dependsOnOwnProps?s.mapToProps(a,u):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,u){s.mapToProps=e,s.dependsOnOwnProps=md(e);let l=s(a,u);return typeof l=="function"&&(s.mapToProps=l,s.dependsOnOwnProps=md(l),l=s(a,u)),Vm(l,i,t),l},s}}function hl(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function hT(e){return e&&typeof e=="object"?gc(t=>dT(e,t)):e?typeof e=="function"?zm(e,"mapDispatchToProps"):hl(e,"mapDispatchToProps"):gc(t=>({dispatch:t}))}function mT(e){return e?typeof e=="function"?zm(e,"mapStateToProps"):hl(e,"mapStateToProps"):gc(()=>({}))}function _T(e,t,n){return{...n,...e,...t}}function gT(e){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(u,l,c){const f=e(u,l,c);return s?i(f,o)||(o=f):(s=!0,o=f,Vm(o,r,"mergeProps")),o}}}function vT(e){return e?typeof e=="function"?gT(e):hl(e,"mergeProps"):()=>_T}function yT(e){e()}function ST(){let e=null,t=null;return{clear(){e=null,t=null},notify(){yT(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var _d={notify(){},get:()=>[]};function Wm(e,t){let n,r=_d,i=0,s=!1;function o(_){c();const g=r.subscribe(_);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){h.onStateChange&&h.onStateChange()}function l(){return s}function c(){i++,n||(n=t?t.addNestedSub(u):e.subscribe(u),r=ST())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=_d)}function d(){s||(s=!0,c())}function p(){s&&(s=!1,f())}const h={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:p,getListeners:()=>r};return h}var ET=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bT=ET(),wT=()=>typeof navigator<"u"&&navigator.product==="ReactNative",TT=wT(),OT=()=>bT||TT?m.useLayoutEffect:m.useEffect,Fo=OT();function gd(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ja(e,t){if(gd(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!gd(e[n[i]],t[n[i]]))return!1;return!0}var CT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},NT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},AT={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gm={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},IT={[iT]:AT,[sT]:Gm};function vd(e){return uT(e)?Gm:IT[e.$$typeof]||CT}var RT=Object.defineProperty,xT=Object.getOwnPropertyNames,yd=Object.getOwnPropertySymbols,LT=Object.getOwnPropertyDescriptor,MT=Object.getPrototypeOf,Sd=Object.prototype;function vc(e,t){if(typeof t!="string"){if(Sd){const s=MT(t);s&&s!==Sd&&vc(e,s)}let n=xT(t);yd&&(n=n.concat(yd(t)));const r=vd(e),i=vd(t);for(let s=0;s<n.length;++s){const o=n[s];if(!NT[o]&&!(i&&i[o])&&!(r&&r[o])){const a=LT(t,o);try{RT(e,o,a)}catch{}}}}return e}var eu=Symbol.for("react-redux-context"),tu=typeof globalThis<"u"?globalThis:{};function PT(){if(!m.createContext)return{};const e=tu[eu]??(tu[eu]=new Map);let t=e.get(m.createContext);return t||(t=m.createContext(null),t.displayName="ReactRedux",e.set(m.createContext,t)),t}var Ln=PT(),FT=[null,null],UT=e=>{try{return JSON.stringify(e)}catch{return String(e)}};function kT(e,t,n){Fo(()=>e(...t),n)}function DT(e,t,n,r,i,s){e.current=r,n.current=!1,i.current&&(i.current=null,s())}function jT(e,t,n,r,i,s,o,a,u,l,c){if(!e)return()=>{};let f=!1,d=null;const p=()=>{if(f||!a.current)return;const _=t.getState();let g,y;try{g=r(_,i.current)}catch(S){y=S,d=S}y||(d=null),g===s.current?o.current||l():(s.current=g,u.current=g,o.current=!0,c())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}function $T(e,t){return e===t}var Ed=!1;function qT(e,t,n,{pure:r,areStatesEqual:i=$T,areOwnPropsEqual:s=Ja,areStatePropsEqual:o=Ja,areMergedPropsEqual:a=Ja,forwardRef:u=!1,context:l=Ln}={}){r!==void 0&&!Ed&&(Ed=!0,pl('The `pure` option has been removed. `connect` is now always a "pure/memoized" component'));const c=l,f=mT(e),d=hT(t),p=vT(n),h=!!e;return g=>{if(!oT(g))throw new Error(`You must pass a component to the function returned by connect. Instead received ${UT(g)}`);const y=g.displayName||g.name||"Component",S=`Connect(${y})`,b={shouldHandleStateChanges:h,displayName:S,wrappedComponentName:y,WrappedComponent:g,initMapStateToProps:f,initMapDispatchToProps:d,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:a};function T(N){const[q,U,k]=m.useMemo(()=>{const{reactReduxForwardedRef:we,...oe}=N;return[N.context,we,oe]},[N]),W=m.useMemo(()=>{let we=c;if(q!=null&&q.Consumer){if(!aT(m.createElement(q.Consumer,null)))throw new Error("You must pass a valid React context consumer as `props.context`");we=q}return we},[q,c]),B=m.useContext(W),z=!!N.store&&!!N.store.getState&&!!N.store.dispatch,D=!!B&&!!B.store;if(!z&&!D)throw new Error(`Could not find "store" in the context of "${S}". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to ${S} in connect options.`);const E=z?N.store:B.store,A=D?B.getServerState:E.getState,C=m.useMemo(()=>fT(E.dispatch,b),[E]),[L,P]=m.useMemo(()=>{if(!h)return FT;const we=Wm(E,z?void 0:B.subscription),oe=we.notifyNestedSubs.bind(we);return[we,oe]},[E,z,B]),K=m.useMemo(()=>z?B:{...B,subscription:L},[z,B,L]),M=m.useRef(void 0),X=m.useRef(k),pe=m.useRef(void 0),ie=m.useRef(!1),Q=m.useRef(!1),ye=m.useRef(void 0);Fo(()=>(Q.current=!0,()=>{Q.current=!1}),[]);const R=m.useMemo(()=>()=>pe.current&&k===X.current?pe.current:C(E.getState(),k),[E,k]),Ee=m.useMemo(()=>oe=>L?jT(h,E,L,C,X,M,ie,Q,pe,P,oe):()=>{},[L]);kT(DT,[X,M,ie,k,pe,P]);let be;try{be=m.useSyncExternalStore(Ee,R,A?()=>C(A(),k):R)}catch(we){throw ye.current&&(we.message+=`
The error may be correlated with this previous error:
${ye.current.stack}

`),we}Fo(()=>{ye.current=void 0,pe.current=void 0,M.current=be});const Fe=m.useMemo(()=>m.createElement(g,{...be,ref:U}),[U,g,be]);return m.useMemo(()=>h?m.createElement(W.Provider,{value:K},Fe):Fe,[W,Fe,K])}const w=m.memo(T);if(w.WrappedComponent=g,w.displayName=T.displayName=S,u){const q=m.forwardRef(function(k,W){return m.createElement(w,{...k,reactReduxForwardedRef:W})});return q.displayName=S,q.WrappedComponent=g,vc(q,g)}return vc(w,g)}}var f2=qT;function BT(e){const{children:t,context:n,serverState:r,store:i}=e,s=m.useMemo(()=>{const u=Wm(i),l={store:i,subscription:u,getServerState:r?()=>r:void 0};{const{identityFunctionCheck:c="once",stabilityCheck:f="once"}=e;return Object.assign(l,{stabilityCheck:f,identityFunctionCheck:c})}},[i,r]),o=m.useMemo(()=>i.getState(),[i]);Fo(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||Ln;return m.createElement(a.Provider,{value:s},t)}var d2=BT;function ml(e=Ln){return function(){const n=m.useContext(e);if(!n)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return n}}var Km=ml();function Qm(e=Ln){const t=e===Ln?Km:ml(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var HT=Qm();function VT(e=Ln){const t=e===Ln?HT:Qm(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var zT=VT(),WT=(e,t)=>e===t;function GT(e=Ln){const t=e===Ln?Km:ml(e),n=(r,i={})=>{const{equalityFn:s=WT}=typeof i=="function"?{equalityFn:i}:i;{if(!r)throw new Error("You must pass a selector to useSelector");if(typeof r!="function")throw new Error("You must pass a function as a selector to useSelector");if(typeof s!="function")throw new Error("You must pass a function as an equality function to useSelector")}const o=t(),{store:a,subscription:u,getServerState:l}=o,c=m.useRef(!0),f=m.useCallback({[r.name](p){const h=r(p);{const{devModeChecks:_={}}=typeof i=="function"?{}:i,{identityFunctionCheck:g,stabilityCheck:y}=o,{identityFunctionCheck:S,stabilityCheck:b}={stabilityCheck:y,identityFunctionCheck:g,..._};if(b==="always"||b==="once"&&c.current){const T=r(p);if(!s(h,T)){let I;try{throw new Error}catch(w){({stack:I}=w)}console.warn("Selector "+(r.name||"unknown")+` returned a different result when called with the same parameters. This can lead to unnecessary rerenders.
Selectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization`,{state:p,selected:h,selected2:T,stack:I})}}if((S==="always"||S==="once"&&c.current)&&h===p){let T;try{throw new Error}catch(I){({stack:T}=I)}console.warn("Selector "+(r.name||"unknown")+` returned the root state when called. This can lead to unnecessary rerenders.
Selectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.`,{stack:T})}c.current&&(c.current=!1)}return h}}[r.name],[r]),d=Jw.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,f,s);return m.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var KT=GT();const p2=zT.withTypes(),h2=KT.withTypes(),Lt=Fm.withTypes(),m2=ra.withTypes(),QT=Fm.withTypes();function YT(e,t,n={}){return QT(e,async(r,{getState:i,dispatch:s,fulfillWithValue:o,rejectWithValue:a})=>{try{const u=await t(r,{dispatch:s,getState:i});return o(u,{useLoadingBar:n.useLoadingBar})}catch(u){return a({error:u},{useLoadingBar:n.useLoadingBar})}},{getPendingMeta(){return n.useLoadingBar?{useLoadingBar:!0}:{}},condition:n.condition})}const bd=Symbol("discardLoadDataInPayload");function fe(e,t,n,r){let i,s;return typeof n=="function"?i=n:typeof n=="object"&&(s=n),r&&(s=r),YT(e,async(o,{getState:a,dispatch:u})=>{const l=await t(o,{dispatch:u,getState:a});if(!i)return l;const c=await i(l,{dispatch:u,getState:a,discardLoadData:bd,actionArg:o});return typeof c>"u"?l:c===bd?void 0:c},{useLoadingBar:(s==null?void 0:s.useLoadingBar)??!0,condition:s==null?void 0:s.condition})}/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var nu,wd;function XT(){if(wd)return nu;wd=1;var e=/["'&<>]/;nu=t;function t(n){var r=""+n,i=e.exec(r);if(!i)return r;var s,o="",a=0,u=0;for(a=i.index;a<r.length;a++){switch(r.charCodeAt(a)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}u!==a&&(o+=r.substring(u,a)),u=a+1,o+=s}return u!==a?o+r.substring(u,a):o}return nu}var ZT=XT();const ui=oi(ZT);var xs="delete",Ie=5,qt=1<<Ie,lt=qt-1,ue={};function yc(){return{value:!1}}function Bt(e){e&&(e.value=!0)}function _l(){}function Qr(e){return e.size===void 0&&(e.size=e.__iterate(Ym)),e.size}function Jn(e,t){if(typeof t!="number"){var n=t>>>0;if(""+n!==t||n===4294967295)return NaN;t=n}return t<0?Qr(e)+t:t}function Ym(){return!0}function Ls(e,t,n){return(e===0&&!Zm(e)||n!==void 0&&e<=-n)&&(t===void 0||n!==void 0&&t>=n)}function ci(e,t){return Xm(e,t,0)}function Ms(e,t){return Xm(e,t,t)}function Xm(e,t,n){return e===void 0?n:Zm(e)?t===1/0?t:Math.max(0,t+e)|0:t===void 0||t===e?e:Math.min(t,e)|0}function Zm(e){return e<0||e===0&&1/e===-1/0}var Jm="@@__IMMUTABLE_ITERABLE__@@";function tt(e){return!!(e&&e[Jm])}var e_="@@__IMMUTABLE_KEYED__@@";function Oe(e){return!!(e&&e[e_])}var t_="@@__IMMUTABLE_INDEXED__@@";function Ge(e){return!!(e&&e[t_])}function li(e){return Oe(e)||Ge(e)}var Re=function(t){return tt(t)?t:nt(t)},Qt=function(e){function t(n){return Oe(n)?n:ir(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Re),Nr=function(e){function t(n){return Ge(n)?n:Yt(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Re),fi=function(e){function t(n){return tt(n)&&!li(n)?n:hi(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Re);Re.Keyed=Qt;Re.Indexed=Nr;Re.Set=fi;var n_="@@__IMMUTABLE_SEQ__@@";function Ps(e){return!!(e&&e[n_])}var r_="@@__IMMUTABLE_RECORD__@@";function rr(e){return!!(e&&e[r_])}function Mt(e){return tt(e)||rr(e)}var di="@@__IMMUTABLE_ORDERED__@@";function At(e){return!!(e&&e[di])}var Fs=0,sn=1,Vt=2,Sc=typeof Symbol=="function"&&Symbol.iterator,i_="@@iterator",oa=Sc||i_,me=function(t){this.next=t};me.prototype.toString=function(){return"[Iterator]"};me.KEYS=Fs;me.VALUES=sn;me.ENTRIES=Vt;me.prototype.inspect=me.prototype.toSource=function(){return this.toString()};me.prototype[oa]=function(){return this};function xe(e,t,n,r){var i=e===0?t:e===1?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function ft(){return{value:void 0,done:!0}}function gl(e){return Array.isArray(e)?!0:!!aa(e)}function Td(e){return e&&typeof e.next=="function"}function Ec(e){var t=aa(e);return t&&t.call(e)}function aa(e){var t=e&&(Sc&&e[Sc]||e[i_]);if(typeof t=="function")return t}function JT(e){var t=aa(e);return t&&t===e.entries}function e1(e){var t=aa(e);return t&&t===e.keys}var pi=Object.prototype.hasOwnProperty;function vl(e){return Array.isArray(e)||typeof e=="string"?!0:e&&typeof e=="object"&&Number.isInteger(e.length)&&e.length>=0&&(e.length===0?Object.keys(e).length===1:e.hasOwnProperty(e.length-1))}var nt=function(e){function t(n){return n==null?Sl():Mt(n)?n.toSeq():n1(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(r,i){var s=this._cache;if(s){for(var o=s.length,a=0;a!==o;){var u=s[i?o-++a:a++];if(r(u[1],u[0],this)===!1)break}return a}return this.__iterateUncached(r,i)},t.prototype.__iterator=function(r,i){var s=this._cache;if(s){var o=s.length,a=0;return new me(function(){if(a===o)return ft();var u=s[i?o-++a:a++];return xe(r,u[0],u[1])})}return this.__iteratorUncached(r,i)},t}(Re),ir=function(e){function t(n){return n==null?Sl().toKeyedSeq():tt(n)?Oe(n)?n.toSeq():n.fromEntrySeq():rr(n)?n.toSeq():El(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(nt),Yt=function(e){function t(n){return n==null?Sl():tt(n)?Oe(n)?n.entrySeq():n.toIndexedSeq():rr(n)?n.toSeq().entrySeq():s_(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(nt),hi=function(e){function t(n){return(tt(n)&&!li(n)?n:Yt(n)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(nt);nt.isSeq=Ps;nt.Keyed=ir;nt.Set=hi;nt.Indexed=Yt;nt.prototype[n_]=!0;var Or=function(e){function t(n){this._array=n,this.size=n.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return this.has(r)?this._array[Jn(this,r)]:i},t.prototype.__iterate=function(r,i){for(var s=this._array,o=s.length,a=0;a!==o;){var u=i?o-++a:a++;if(r(s[u],u,this)===!1)break}return a},t.prototype.__iterator=function(r,i){var s=this._array,o=s.length,a=0;return new me(function(){if(a===o)return ft();var u=i?o-++a:a++;return xe(r,u,s[u])})},t}(Yt),yl=function(e){function t(n){var r=Object.keys(n).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n):[]);this._object=n,this._keys=r,this.size=r.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return i!==void 0&&!this.has(r)?i:this._object[r]},t.prototype.has=function(r){return pi.call(this._object,r)},t.prototype.__iterate=function(r,i){for(var s=this._object,o=this._keys,a=o.length,u=0;u!==a;){var l=o[i?a-++u:u++];if(r(s[l],l,this)===!1)break}return u},t.prototype.__iterator=function(r,i){var s=this._object,o=this._keys,a=o.length,u=0;return new me(function(){if(u===a)return ft();var l=o[i?a-++u:u++];return xe(r,l,s[l])})},t}(ir);yl.prototype[di]=!0;var t1=function(e){function t(n){this._collection=n,this.size=n.length||n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(r,i){if(i)return this.cacheResult().__iterate(r,i);var s=this._collection,o=Ec(s),a=0;if(Td(o))for(var u;!(u=o.next()).done&&r(u.value,a++,this)!==!1;);return a},t.prototype.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var s=this._collection,o=Ec(s);if(!Td(o))return new me(ft);var a=0;return new me(function(){var u=o.next();return u.done?u:xe(r,a++,u.value)})},t}(Yt),Od;function Sl(){return Od||(Od=new Or([]))}function El(e){var t=bl(e);if(t)return t.fromEntrySeq();if(typeof e=="object")return new yl(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function s_(e){var t=bl(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function n1(e){var t=bl(e);if(t)return JT(e)?t.fromEntrySeq():e1(e)?t.toSetSeq():t;if(typeof e=="object")return new yl(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}function bl(e){return vl(e)?new Or(e):gl(e)?new t1(e):void 0}var o_="@@__IMMUTABLE_MAP__@@";function Us(e){return!!(e&&e[o_])}function ua(e){return Us(e)&&At(e)}function Uo(e){return!!(e&&typeof e.equals=="function"&&typeof e.hashCode=="function")}function ke(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if(typeof e.valueOf=="function"&&typeof t.valueOf=="function"){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(Uo(e)&&Uo(t)&&e.equals(t))}var xi=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,n){t|=0,n|=0;var r=t&65535,i=n&65535;return r*i+((t>>>16)*i+r*(n>>>16)<<16>>>0)|0};function ca(e){return e>>>1&1073741824|e&3221225471}var r1=Object.prototype.valueOf;function ot(e){if(e==null)return Cd(e);if(typeof e.hashCode=="function")return ca(e.hashCode(e));var t=c1(e);if(t==null)return Cd(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return i1(t);case"string":return t.length>l1?s1(t):bc(t);case"object":case"function":return a1(t);case"symbol":return o1(t);default:if(typeof t.toString=="function")return bc(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function Cd(e){return e===null?1108378658:1108378659}function i1(e){if(e!==e||e===1/0)return 0;var t=e|0;for(t!==e&&(t^=e*4294967295);e>4294967295;)e/=4294967295,t^=e;return ca(t)}function s1(e){var t=su[e];return t===void 0&&(t=bc(e),iu===f1&&(iu=0,su={}),iu++,su[e]=t),t}function bc(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return ca(t)}function o1(e){var t=Id[e];return t!==void 0||(t=a_(),Id[e]=t),t}function a1(e){var t;if(wc&&(t=Tc.get(e),t!==void 0)||(t=e[hr],t!==void 0)||!Ad&&(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[hr],t!==void 0||(t=u1(e),t!==void 0)))return t;if(t=a_(),wc)Tc.set(e,t);else{if(Nd!==void 0&&Nd(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Ad)Object.defineProperty(e,hr,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(e.propertyIsEnumerable!==void 0&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[hr]=t;else if(e.nodeType!==void 0)e[hr]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var Nd=Object.isExtensible,Ad=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function u1(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function c1(e){return e.valueOf!==r1&&typeof e.valueOf=="function"?e.valueOf(e):e}function a_(){var e=++ru;return ru&1073741824&&(ru=0),e}var wc=typeof WeakMap=="function",Tc;wc&&(Tc=new WeakMap);var Id=Object.create(null),ru=0,hr="__immutablehash__";typeof Symbol=="function"&&(hr=Symbol(hr));var l1=16,f1=255,iu=0,su={},la=function(e){function t(n,r){this._iter=n,this._useKeys=r,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(r,i){return this._iter.get(r,i)},t.prototype.has=function(r){return this._iter.has(r)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var r=this,i=wl(this,!0);return this._useKeys||(i.valueSeq=function(){return r._iter.toSeq().reverse()}),i},t.prototype.map=function(r,i){var s=this,o=d_(this,r,i);return this._useKeys||(o.valueSeq=function(){return s._iter.toSeq().map(r,i)}),o},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(o,a){return r(o,a,s)},i)},t.prototype.__iterator=function(r,i){return this._iter.__iterator(r,i)},t}(ir);la.prototype[di]=!0;var u_=function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(r){return this._iter.includes(r)},t.prototype.__iterate=function(r,i){var s=this,o=0;return i&&Qr(this),this._iter.__iterate(function(a){return r(a,i?s.size-++o:o++,s)},i)},t.prototype.__iterator=function(r,i){var s=this,o=this._iter.__iterator(sn,i),a=0;return i&&Qr(this),new me(function(){var u=o.next();return u.done?u:xe(r,i?s.size-++a:a++,u.value,u)})},t}(Yt),c_=function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(r){return this._iter.includes(r)},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(o){return r(o,o,s)},i)},t.prototype.__iterator=function(r,i){var s=this._iter.__iterator(sn,i);return new me(function(){var o=s.next();return o.done?o:xe(r,o.value,o.value,o)})},t}(hi),l_=function(e){function t(n){this._iter=n,this.size=n.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(r,i){var s=this;return this._iter.__iterate(function(o){if(o){xd(o);var a=tt(o);return r(a?o.get(1):o[1],a?o.get(0):o[0],s)}},i)},t.prototype.__iterator=function(r,i){var s=this._iter.__iterator(sn,i);return new me(function(){for(;;){var o=s.next();if(o.done)return o;var a=o.value;if(a){xd(a);var u=tt(a);return xe(r,u?a.get(0):a[0],u?a.get(1):a[1],o)}}})},t}(ir);u_.prototype.cacheResult=la.prototype.cacheResult=c_.prototype.cacheResult=l_.prototype.cacheResult=Cl;function f_(e){var t=yn(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var n=e.reverse.apply(this);return n.flip=function(){return e.reverse()},n},t.has=function(n){return e.includes(n)},t.includes=function(n){return e.has(n)},t.cacheResult=Cl,t.__iterateUncached=function(n,r){var i=this;return e.__iterate(function(s,o){return n(o,s,i)!==!1},r)},t.__iteratorUncached=function(n,r){if(n===Vt){var i=e.__iterator(n,r);return new me(function(){var s=i.next();if(!s.done){var o=s.value[0];s.value[0]=s.value[1],s.value[1]=o}return s})}return e.__iterator(n===sn?Fs:sn,r)},t}function d_(e,t,n){var r=yn(e);return r.size=e.size,r.has=function(i){return e.has(i)},r.get=function(i,s){var o=e.get(i,ue);return o===ue?s:t.call(n,o,i,e)},r.__iterateUncached=function(i,s){var o=this;return e.__iterate(function(a,u,l){return i(t.call(n,a,u,l),u,o)!==!1},s)},r.__iteratorUncached=function(i,s){var o=e.__iterator(Vt,s);return new me(function(){var a=o.next();if(a.done)return a;var u=a.value,l=u[0];return xe(i,l,t.call(n,u[1],l,e),a)})},r}function wl(e,t){var n=this,r=yn(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var i=f_(e);return i.reverse=function(){return e.flip()},i}),r.get=function(i,s){return e.get(t?i:-1-i,s)},r.has=function(i){return e.has(t?i:-1-i)},r.includes=function(i){return e.includes(i)},r.cacheResult=Cl,r.__iterate=function(i,s){var o=this,a=0;return s&&Qr(e),e.__iterate(function(u,l){return i(u,t?l:s?o.size-++a:a++,o)},!s)},r.__iterator=function(i,s){var o=0;s&&Qr(e);var a=e.__iterator(Vt,!s);return new me(function(){var u=a.next();if(u.done)return u;var l=u.value;return xe(i,t?l[0]:s?n.size-++o:o++,l[1],u)})},r}function p_(e,t,n,r){var i=yn(e);return r&&(i.has=function(s){var o=e.get(s,ue);return o!==ue&&!!t.call(n,o,s,e)},i.get=function(s,o){var a=e.get(s,ue);return a!==ue&&t.call(n,a,s,e)?a:o}),i.__iterateUncached=function(s,o){var a=this,u=0;return e.__iterate(function(l,c,f){if(t.call(n,l,c,f))return u++,s(l,r?c:u-1,a)},o),u},i.__iteratorUncached=function(s,o){var a=e.__iterator(Vt,o),u=0;return new me(function(){for(;;){var l=a.next();if(l.done)return l;var c=l.value,f=c[0],d=c[1];if(t.call(n,d,f,e))return xe(s,r?f:u++,d,l)}})},i}function d1(e,t,n){var r=V().asMutable();return e.__iterate(function(i,s){r.update(t.call(n,i,s,e),0,function(o){return o+1})}),r.asImmutable()}function p1(e,t,n){var r=Oe(e),i=(At(e)?on():V()).asMutable();e.__iterate(function(o,a){i.update(t.call(n,o,a,e),function(u){return u=u||[],u.push(r?[a,o]:o),u})});var s=Ol(e);return i.map(function(o){return Te(e,s(o))}).asImmutable()}function h1(e,t,n){var r=Oe(e),i=[[],[]];e.__iterate(function(o,a){i[t.call(n,o,a,e)?1:0].push(r?[a,o]:o)});var s=Ol(e);return i.map(function(o){return Te(e,s(o))})}function Tl(e,t,n,r){var i=e.size;if(Ls(t,n,i))return e;if(typeof i>"u"&&(t<0||n<0))return Tl(e.toSeq().cacheResult(),t,n,r);var s=ci(t,i),o=Ms(n,i),a=o-s,u;a===a&&(u=a<0?0:a);var l=yn(e);return l.size=u===0?u:e.size&&u||void 0,!r&&Ps(e)&&u>=0&&(l.get=function(c,f){return c=Jn(this,c),c>=0&&c<u?e.get(c+s,f):f}),l.__iterateUncached=function(c,f){var d=this;if(u===0)return 0;if(f)return this.cacheResult().__iterate(c,f);var p=0,h=!0,_=0;return e.__iterate(function(g,y){if(!(h&&(h=p++<s)))return _++,c(g,r?y:_-1,d)!==!1&&_!==u}),_},l.__iteratorUncached=function(c,f){if(u!==0&&f)return this.cacheResult().__iterator(c,f);if(u===0)return new me(ft);var d=e.__iterator(c,f),p=0,h=0;return new me(function(){for(;p++<s;)d.next();if(++h>u)return ft();var _=d.next();return r||c===sn||_.done?_:c===Fs?xe(c,h-1,void 0,_):xe(c,h-1,_.value[1],_)})},l}function m1(e,t,n){var r=yn(e);return r.__iterateUncached=function(i,s){var o=this;if(s)return this.cacheResult().__iterate(i,s);var a=0;return e.__iterate(function(u,l,c){return t.call(n,u,l,c)&&++a&&i(u,l,o)}),a},r.__iteratorUncached=function(i,s){var o=this;if(s)return this.cacheResult().__iterator(i,s);var a=e.__iterator(Vt,s),u=!0;return new me(function(){if(!u)return ft();var l=a.next();if(l.done)return l;var c=l.value,f=c[0],d=c[1];return t.call(n,d,f,o)?i===Vt?l:xe(i,f,d,l):(u=!1,ft())})},r}function h_(e,t,n,r){var i=yn(e);return i.__iterateUncached=function(s,o){var a=this;if(o)return this.cacheResult().__iterate(s,o);var u=!0,l=0;return e.__iterate(function(c,f,d){if(!(u&&(u=t.call(n,c,f,d))))return l++,s(c,r?f:l-1,a)}),l},i.__iteratorUncached=function(s,o){var a=this;if(o)return this.cacheResult().__iterator(s,o);var u=e.__iterator(Vt,o),l=!0,c=0;return new me(function(){var f,d,p;do{if(f=u.next(),f.done)return r||s===sn?f:s===Fs?xe(s,c++,void 0,f):xe(s,c++,f.value[1],f);var h=f.value;d=h[0],p=h[1],l&&(l=t.call(n,p,d,a))}while(l);return s===Vt?f:xe(s,d,p,f)})},i}function _1(e,t){var n=Oe(e),r=[e].concat(t).map(function(o){return tt(o)?n&&(o=Qt(o)):o=n?El(o):s_(Array.isArray(o)?o:[o]),o}).filter(function(o){return o.size!==0});if(r.length===0)return e;if(r.length===1){var i=r[0];if(i===e||n&&Oe(i)||Ge(e)&&Ge(i))return i}var s=new Or(r);return n?s=s.toKeyedSeq():Ge(e)||(s=s.toSetSeq()),s=s.flatten(!0),s.size=r.reduce(function(o,a){if(o!==void 0){var u=a.size;if(u!==void 0)return o+u}},0),s}function m_(e,t,n){var r=yn(e);return r.__iterateUncached=function(i,s){if(s)return this.cacheResult().__iterate(i,s);var o=0,a=!1;function u(l,c){l.__iterate(function(f,d){return(!t||c<t)&&tt(f)?u(f,c+1):(o++,i(f,n?d:o-1,r)===!1&&(a=!0)),!a},s)}return u(e,0),o},r.__iteratorUncached=function(i,s){if(s)return this.cacheResult().__iterator(i,s);var o=e.__iterator(i,s),a=[],u=0;return new me(function(){for(;o;){var l=o.next();if(l.done!==!1){o=a.pop();continue}var c=l.value;if(i===Vt&&(c=c[1]),(!t||a.length<t)&&tt(c))a.push(o),o=c.__iterator(i,s);else return n?l:xe(i,u++,c,l)}return ft()})},r}function g1(e,t,n){var r=Ol(e);return e.toSeq().map(function(i,s){return r(t.call(n,i,s,e))}).flatten(!0)}function v1(e,t){var n=yn(e);return n.size=e.size&&e.size*2-1,n.__iterateUncached=function(r,i){var s=this,o=0;return e.__iterate(function(a){return(!o||r(t,o++,s)!==!1)&&r(a,o++,s)!==!1},i),o},n.__iteratorUncached=function(r,i){var s=e.__iterator(sn,i),o=0,a;return new me(function(){return(!a||o%2)&&(a=s.next(),a.done)?a:o%2?xe(r,o++,t):xe(r,o++,a.value,a)})},n}function Yr(e,t,n){t||(t=__);var r=Oe(e),i=0,s=e.toSeq().map(function(o,a){return[a,o,i++,n?n(o,a,e):o]}).valueSeq().toArray();return s.sort(function(o,a){return t(o[3],a[3])||o[2]-a[2]}).forEach(r?function(o,a){s[a].length=2}:function(o,a){s[a]=o[1]}),r?ir(s):Ge(e)?Yt(s):hi(s)}function to(e,t,n){if(t||(t=__),n){var r=e.toSeq().map(function(i,s){return[i,n(i,s,e)]}).reduce(function(i,s){return Rd(t,i[1],s[1])?s:i});return r&&r[0]}return e.reduce(function(i,s){return Rd(t,i,s)?s:i})}function Rd(e,t,n){var r=e(n,t);return r===0&&n!==t&&(n==null||n!==n)||r>0}function no(e,t,n,r){var i=yn(e),s=new Or(n).map(function(o){return o.size});return i.size=r?s.max():s.min(),i.__iterate=function(o,a){for(var u=this.__iterator(sn,a),l,c=0;!(l=u.next()).done&&o(l.value,c++,this)!==!1;);return c},i.__iteratorUncached=function(o,a){var u=n.map(function(f){return f=Re(f),Ec(a?f.reverse():f)}),l=0,c=!1;return new me(function(){var f;return c||(f=u.map(function(d){return d.next()}),c=r?f.every(function(d){return d.done}):f.some(function(d){return d.done})),c?ft():xe(o,l++,t.apply(null,f.map(function(d){return d.value})))})},i}function Te(e,t){return e===t?e:Ps(e)?t:e.constructor(t)}function xd(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Ol(e){return Oe(e)?Qt:Ge(e)?Nr:fi}function yn(e){return Object.create((Oe(e)?ir:Ge(e)?Yt:hi).prototype)}function Cl(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):nt.prototype.cacheResult.call(this)}function __(e,t){return e===void 0&&t===void 0?0:e===void 0?1:t===void 0?-1:e>t?1:e<t?-1:0}function mn(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function Nl(e,t){if(!e)throw new Error(t)}function Nt(e){Nl(e!==1/0,"Cannot perform this action with an infinite size.")}function g_(e){if(vl(e)&&typeof e!="string")return e;if(At(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}var y1=Object.prototype.toString;function fa(e){if(!e||typeof e!="object"||y1.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t,r=Object.getPrototypeOf(t);r!==null;)n=r,r=Object.getPrototypeOf(n);return n===t}function er(e){return typeof e=="object"&&(Mt(e)||Array.isArray(e)||fa(e))}function ls(e){try{return typeof e=="string"?JSON.stringify(e):String(e)}catch{return JSON.stringify(e)}}function Al(e,t){return Mt(e)?e.has(t):er(e)&&pi.call(e,t)}function da(e,t,n){return Mt(e)?e.get(t,n):Al(e,t)?typeof e.get=="function"?e.get(t):e[t]:n}function ko(e){if(Array.isArray(e))return mn(e);var t={};for(var n in e)pi.call(e,n)&&(t[n]=e[n]);return t}function Il(e,t){if(!er(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(Mt(e)){if(!e.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+e);return e.remove(t)}if(!pi.call(e,t))return e;var n=ko(e);return Array.isArray(n)?n.splice(t,1):delete n[t],n}function Rl(e,t,n){if(!er(e))throw new TypeError("Cannot update non-data-structure value: "+e);if(Mt(e)){if(!e.set)throw new TypeError("Cannot update immutable value without .set() method: "+e);return e.set(t,n)}if(pi.call(e,t)&&n===e[t])return e;var r=ko(e);return r[t]=n,r}function sr(e,t,n,r){r||(r=n,n=void 0);var i=v_(Mt(e),e,g_(t),0,n,r);return i===ue?n:i}function v_(e,t,n,r,i,s){var o=t===ue;if(r===n.length){var a=o?i:t,u=s(a);return u===a?t:u}if(!o&&!er(t))throw new TypeError("Cannot update within non-data-structure value in path ["+n.slice(0,r).map(ls)+"]: "+t);var l=n[r],c=o?ue:da(t,l,ue),f=v_(c===ue?e:Mt(c),c,n,r+1,i,s);return f===c?t:f===ue?Il(t,l):Rl(o?e?en():{}:t,l,f)}function xl(e,t,n){return sr(e,t,ue,function(){return n})}function Ll(e,t){return xl(this,e,t)}function Ml(e,t){return sr(e,t,function(){return ue})}function Pl(e){return Ml(this,e)}function pa(e,t,n,r){return sr(e,[t],n,r)}function Fl(e,t,n){return arguments.length===1?e(this):pa(this,e,t,n)}function Ul(e,t,n){return sr(this,e,t,n)}function y_(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return E_(this,e)}function S_(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(typeof e!="function")throw new TypeError("Invalid merger function: "+e);return E_(this,t,e)}function E_(e,t,n){for(var r=[],i=0;i<t.length;i++){var s=Qt(t[i]);s.size!==0&&r.push(s)}return r.length===0?e:e.toSeq().size===0&&!e.__ownerID&&r.length===1?e.constructor(r[0]):e.withMutations(function(o){for(var a=n?function(l,c){pa(o,c,ue,function(f){return f===ue?l:n(f,l,c)})}:function(l,c){o.set(c,l)},u=0;u<r.length;u++)r[u].forEach(a)})}function b_(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Ds(e,t)}function w_(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return Ds(t,n,e)}function T_(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return ks(e,t)}function O_(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return ks(t,n,e)}function ks(e,t,n){return Ds(e,t,S1(n))}function Ds(e,t,n){if(!er(e))throw new TypeError("Cannot merge into non-data-structure value: "+e);if(Mt(e))return typeof n=="function"&&e.mergeWith?e.mergeWith.apply(e,[n].concat(t)):e.merge?e.merge.apply(e,t):e.concat.apply(e,t);for(var r=Array.isArray(e),i=e,s=r?Nr:Qt,o=r?function(u){i===e&&(i=ko(i)),i.push(u)}:function(u,l){var c=pi.call(i,l),f=c&&n?n(i[l],u,l):u;(!c||f!==i[l])&&(i===e&&(i=ko(i)),i[l]=f)},a=0;a<t.length;a++)s(t[a]).forEach(o);return i}function S1(e){function t(n,r,i){return er(n)&&er(r)&&E1(n,r)?Ds(n,[r],t):e?e(n,r,i):r}return t}function E1(e,t){var n=nt(e),r=nt(t);return Ge(n)===Ge(r)&&Oe(n)===Oe(r)}function C_(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return ks(this,e)}function N_(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return ks(this,t,e)}function kl(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return sr(this,e,en(),function(r){return Ds(r,t)})}function Dl(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return sr(this,e,en(),function(r){return ks(r,t)})}function js(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function $s(){return this.__ownerID?this:this.__ensureOwner(new _l)}function qs(){return this.__ensureOwner()}function jl(){return this.__altered}var V=function(e){function t(n){return n==null?en():Us(n)&&!At(n)?n:en().withMutations(function(r){var i=e(n);Nt(i.size),i.forEach(function(s,o){return r.set(o,s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return en().withMutations(function(s){for(var o=0;o<r.length;o+=2){if(o+1>=r.length)throw new Error("Missing value for key: "+r[o]);s.set(r[o],r[o+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(r,i){return this._root?this._root.get(0,void 0,r,i):i},t.prototype.set=function(r,i){return Pd(this,r,i)},t.prototype.remove=function(r){return Pd(this,r,ue)},t.prototype.deleteAll=function(r){var i=Re(r);return i.size===0?this:this.withMutations(function(s){i.forEach(function(o){return s.remove(o)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):en()},t.prototype.sort=function(r){return on(Yr(this,r))},t.prototype.sortBy=function(r,i){return on(Yr(this,i,r))},t.prototype.map=function(r,i){var s=this;return this.withMutations(function(o){o.forEach(function(a,u){o.set(u,r.call(i,a,u,s))})})},t.prototype.__iterator=function(r,i){return new b1(this,r,i)},t.prototype.__iterate=function(r,i){var s=this,o=0;return this._root&&this._root.iterate(function(a){return o++,r(a[1],a[0],s)},i),o},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?$l(this.size,this._root,r,this.__hash):this.size===0?en():(this.__ownerID=r,this.__altered=!1,this)},t}(Qt);V.isMap=Us;var Le=V.prototype;Le[o_]=!0;Le[xs]=Le.remove;Le.removeAll=Le.deleteAll;Le.setIn=Ll;Le.removeIn=Le.deleteIn=Pl;Le.update=Fl;Le.updateIn=Ul;Le.merge=Le.concat=y_;Le.mergeWith=S_;Le.mergeDeep=C_;Le.mergeDeepWith=N_;Le.mergeIn=kl;Le.mergeDeepIn=Dl;Le.withMutations=js;Le.wasAltered=jl;Le.asImmutable=qs;Le["@@transducer/init"]=Le.asMutable=$s;Le["@@transducer/step"]=function(e,t){return e.set(t[0],t[1])};Le["@@transducer/result"]=function(e){return e.asImmutable()};var fs=function(t,n){this.ownerID=t,this.entries=n};fs.prototype.get=function(t,n,r,i){for(var s=this.entries,o=0,a=s.length;o<a;o++)if(ke(r,s[o][0]))return s[o][1];return i};fs.prototype.update=function(t,n,r,i,s,o,a){for(var u=s===ue,l=this.entries,c=0,f=l.length;c<f&&!ke(i,l[c][0]);c++);var d=c<f;if(d?l[c][1]===s:u)return this;if(Bt(a),(u||!d)&&Bt(o),!(u&&l.length===1)){if(!d&&!u&&l.length>=A1)return w1(t,l,i,s);var p=t&&t===this.ownerID,h=p?l:mn(l);return d?u?c===f-1?h.pop():h[c]=h.pop():h[c]=[i,s]:h.push([i,s]),p?(this.entries=h,this):new fs(t,h)}};var Xr=function(t,n,r){this.ownerID=t,this.bitmap=n,this.nodes=r};Xr.prototype.get=function(t,n,r,i){n===void 0&&(n=ot(r));var s=1<<((t===0?n:n>>>t)&lt),o=this.bitmap;return(o&s)===0?i:this.nodes[A_(o&s-1)].get(t+Ie,n,r,i)};Xr.prototype.update=function(t,n,r,i,s,o,a){r===void 0&&(r=ot(i));var u=(n===0?r:r>>>n)&lt,l=1<<u,c=this.bitmap,f=(c&l)!==0;if(!f&&s===ue)return this;var d=A_(c&l-1),p=this.nodes,h=f?p[d]:void 0,_=ql(h,t,n+Ie,r,i,s,o,a);if(_===h)return this;if(!f&&_&&p.length>=I1)return O1(t,p,c,u,_);if(f&&!_&&p.length===2&&Fd(p[d^1]))return p[d^1];if(f&&_&&p.length===1&&Fd(_))return _;var g=t&&t===this.ownerID,y=f?_?c:c^l:c|l,S=f?_?I_(p,d,_,g):N1(p,d,g):C1(p,d,_,g);return g?(this.bitmap=y,this.nodes=S,this):new Xr(t,y,S)};var ds=function(t,n,r){this.ownerID=t,this.count=n,this.nodes=r};ds.prototype.get=function(t,n,r,i){n===void 0&&(n=ot(r));var s=(t===0?n:n>>>t)&lt,o=this.nodes[s];return o?o.get(t+Ie,n,r,i):i};ds.prototype.update=function(t,n,r,i,s,o,a){r===void 0&&(r=ot(i));var u=(n===0?r:r>>>n)&lt,l=s===ue,c=this.nodes,f=c[u];if(l&&!f)return this;var d=ql(f,t,n+Ie,r,i,s,o,a);if(d===f)return this;var p=this.count;if(!f)p++;else if(!d&&(p--,p<R1))return T1(t,c,p,u);var h=t&&t===this.ownerID,_=I_(c,u,d,h);return h?(this.count=p,this.nodes=_,this):new ds(t,p,_)};var Zr=function(t,n,r){this.ownerID=t,this.keyHash=n,this.entries=r};Zr.prototype.get=function(t,n,r,i){for(var s=this.entries,o=0,a=s.length;o<a;o++)if(ke(r,s[o][0]))return s[o][1];return i};Zr.prototype.update=function(t,n,r,i,s,o,a){r===void 0&&(r=ot(i));var u=s===ue;if(r!==this.keyHash)return u?this:(Bt(a),Bt(o),Bl(this,t,n,r,[i,s]));for(var l=this.entries,c=0,f=l.length;c<f&&!ke(i,l[c][0]);c++);var d=c<f;if(d?l[c][1]===s:u)return this;if(Bt(a),(u||!d)&&Bt(o),u&&f===2)return new Mn(t,this.keyHash,l[c^1]);var p=t&&t===this.ownerID,h=p?l:mn(l);return d?u?c===f-1?h.pop():h[c]=h.pop():h[c]=[i,s]:h.push([i,s]),p?(this.entries=h,this):new Zr(t,this.keyHash,h)};var Mn=function(t,n,r){this.ownerID=t,this.keyHash=n,this.entry=r};Mn.prototype.get=function(t,n,r,i){return ke(r,this.entry[0])?this.entry[1]:i};Mn.prototype.update=function(t,n,r,i,s,o,a){var u=s===ue,l=ke(i,this.entry[0]);if(l?s===this.entry[1]:u)return this;if(Bt(a),u){Bt(o);return}return l?t&&t===this.ownerID?(this.entry[1]=s,this):new Mn(t,this.keyHash,[i,s]):(Bt(o),Bl(this,t,n,ot(i),[i,s]))};fs.prototype.iterate=Zr.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(e(n[t?i-r:r])===!1)return!1};Xr.prototype.iterate=ds.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var s=n[t?i-r:r];if(s&&s.iterate(e,t)===!1)return!1}};Mn.prototype.iterate=function(e,t){return e(this.entry)};var b1=function(e){function t(n,r,i){this._type=r,this._reverse=i,this._stack=n._root&&Ld(n._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var r=this._type,i=this._stack;i;){var s=i.node,o=i.index++,a=void 0;if(s.entry){if(o===0)return ou(r,s.entry)}else if(s.entries){if(a=s.entries.length-1,o<=a)return ou(r,s.entries[this._reverse?a-o:o])}else if(a=s.nodes.length-1,o<=a){var u=s.nodes[this._reverse?a-o:o];if(u){if(u.entry)return ou(r,u.entry);i=this._stack=Ld(u,i)}continue}i=this._stack=this._stack.__prev}return ft()},t}(me);function ou(e,t){return xe(e,t[0],t[1])}function Ld(e,t){return{node:e,index:0,__prev:t}}function $l(e,t,n,r){var i=Object.create(Le);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var Md;function en(){return Md||(Md=$l(0))}function Pd(e,t,n){var r,i;if(e._root){var s=yc(),o=yc();if(r=ql(e._root,e.__ownerID,0,void 0,t,n,s,o),!o.value)return e;i=e.size+(s.value?n===ue?-1:1:0)}else{if(n===ue)return e;i=1,r=new fs(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?$l(i,r):en()}function ql(e,t,n,r,i,s,o,a){return e?e.update(t,n,r,i,s,o,a):s===ue?e:(Bt(a),Bt(o),new Mn(t,r,[i,s]))}function Fd(e){return e.constructor===Mn||e.constructor===Zr}function Bl(e,t,n,r,i){if(e.keyHash===r)return new Zr(t,r,[e.entry,i]);var s=(n===0?e.keyHash:e.keyHash>>>n)&lt,o=(n===0?r:r>>>n)&lt,a,u=s===o?[Bl(e,t,n+Ie,r,i)]:(a=new Mn(t,r,i),s<o?[e,a]:[a,e]);return new Xr(t,1<<s|1<<o,u)}function w1(e,t,n,r){e||(e=new _l);for(var i=new Mn(e,ot(n),[n,r]),s=0;s<t.length;s++){var o=t[s];i=i.update(e,0,void 0,o[0],o[1])}return i}function T1(e,t,n,r){for(var i=0,s=0,o=new Array(n),a=0,u=1,l=t.length;a<l;a++,u<<=1){var c=t[a];c!==void 0&&a!==r&&(i|=u,o[s++]=c)}return new Xr(e,i,o)}function O1(e,t,n,r,i){for(var s=0,o=new Array(qt),a=0;n!==0;a++,n>>>=1)o[a]=n&1?t[s++]:void 0;return o[r]=i,new ds(e,s+1,o)}function A_(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function I_(e,t,n,r){var i=r?e:mn(e);return i[t]=n,i}function C1(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var s=new Array(i),o=0,a=0;a<i;a++)a===t?(s[a]=n,o=-1):s[a]=e[a+o];return s}function N1(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),s=0,o=0;o<r;o++)o===t&&(s=1),i[o]=e[o+s];return i}var A1=qt/4,I1=qt/2,R1=qt/4,R_="@@__IMMUTABLE_LIST__@@";function Bs(e){return!!(e&&e[R_])}var J=function(e){function t(n){var r=yo();if(n==null)return r;if(Bs(n))return n;var i=e(n),s=i.size;return s===0?r:(Nt(s),s>0&&s<qt?ps(0,s,Ie,null,new Zn(i.toArray())):r.withMutations(function(o){o.setSize(s),i.forEach(function(a,u){return o.set(u,a)})}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(r,i){if(r=Jn(this,r),r>=0&&r<this.size){r+=this._origin;var s=x_(this,r);return s&&s.array[r&lt]}return i},t.prototype.set=function(r,i){return x1(this,r,i)},t.prototype.remove=function(r){return this.has(r)?r===0?this.shift():r===this.size-1?this.pop():this.splice(r,1):this},t.prototype.insert=function(r,i){return this.splice(r,0,i)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ie,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):yo()},t.prototype.push=function(){var r=arguments,i=this.size;return this.withMutations(function(s){Gn(s,0,i+r.length);for(var o=0;o<r.length;o++)s.set(i+o,r[o])})},t.prototype.pop=function(){return Gn(this,0,-1)},t.prototype.unshift=function(){var r=arguments;return this.withMutations(function(i){Gn(i,-r.length);for(var s=0;s<r.length;s++)i.set(s,r[s])})},t.prototype.shift=function(){return Gn(this,1)},t.prototype.concat=function(){for(var r=arguments,i=[],s=0;s<arguments.length;s++){var o=r[s],a=e(typeof o!="string"&&gl(o)?o:[o]);a.size!==0&&i.push(a)}return i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(u){i.forEach(function(l){return l.forEach(function(c){return u.push(c)})})})},t.prototype.setSize=function(r){return Gn(this,0,r)},t.prototype.map=function(r,i){var s=this;return this.withMutations(function(o){for(var a=0;a<s.size;a++)o.set(a,r.call(i,o.get(a),a,s))})},t.prototype.slice=function(r,i){var s=this.size;return Ls(r,i,s)?this:Gn(this,ci(r,s),Ms(i,s))},t.prototype.__iterator=function(r,i){var s=i?this.size:0,o=Ud(this,i);return new me(function(){var a=o();return a===Ki?ft():xe(r,i?--s:s++,a)})},t.prototype.__iterate=function(r,i){for(var s=i?this.size:0,o=Ud(this,i),a;(a=o())!==Ki&&r(a,i?--s:s++,this)!==!1;);return s},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?ps(this._origin,this._capacity,this._level,this._root,this._tail,r,this.__hash):this.size===0?yo():(this.__ownerID=r,this.__altered=!1,this)},t}(Nr);J.isList=Bs;var qe=J.prototype;qe[R_]=!0;qe[xs]=qe.remove;qe.merge=qe.concat;qe.setIn=Ll;qe.deleteIn=qe.removeIn=Pl;qe.update=Fl;qe.updateIn=Ul;qe.mergeIn=kl;qe.mergeDeepIn=Dl;qe.withMutations=js;qe.wasAltered=jl;qe.asImmutable=qs;qe["@@transducer/init"]=qe.asMutable=$s;qe["@@transducer/step"]=function(e,t){return e.push(t)};qe["@@transducer/result"]=function(e){return e.asImmutable()};var Zn=function(t,n){this.array=t,this.ownerID=n};Zn.prototype.removeBefore=function(t,n,r){if(r===n?1<<n:this.array.length===0)return this;var i=r>>>n&lt;if(i>=this.array.length)return new Zn([],t);var s=i===0,o;if(n>0){var a=this.array[i];if(o=a&&a.removeBefore(t,n-Ie,r),o===a&&s)return this}if(s&&!o)return this;var u=Jr(this,t);if(!s)for(var l=0;l<i;l++)u.array[l]=void 0;return o&&(u.array[i]=o),u};Zn.prototype.removeAfter=function(t,n,r){if(r===(n?1<<n:0)||this.array.length===0)return this;var i=r-1>>>n&lt;if(i>=this.array.length)return this;var s;if(n>0){var o=this.array[i];if(s=o&&o.removeAfter(t,n-Ie,r),s===o&&i===this.array.length-1)return this}var a=Jr(this,t);return a.array.splice(i+1),s&&(a.array[i]=s),a};var Ki={};function Ud(e,t){var n=e._origin,r=e._capacity,i=hs(r),s=e._tail;return o(e._root,e._level,0);function o(l,c,f){return c===0?a(l,f):u(l,c,f)}function a(l,c){var f=c===i?s&&s.array:l&&l.array,d=c>n?0:n-c,p=r-c;return p>qt&&(p=qt),function(){if(d===p)return Ki;var h=t?--p:d++;return f&&f[h]}}function u(l,c,f){var d,p=l&&l.array,h=f>n?0:n-f>>c,_=(r-f>>c)+1;return _>qt&&(_=qt),function(){for(;;){if(d){var g=d();if(g!==Ki)return g;d=null}if(h===_)return Ki;var y=t?--_:h++;d=o(p&&p[y],c-Ie,f+(y<<c))}}}}function ps(e,t,n,r,i,s,o){var a=Object.create(qe);return a.size=t-e,a._origin=e,a._capacity=t,a._level=n,a._root=r,a._tail=i,a.__ownerID=s,a.__hash=o,a.__altered=!1,a}var kd;function yo(){return kd||(kd=ps(0,0,Ie))}function x1(e,t,n){if(t=Jn(e,t),t!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(o){t<0?Gn(o,t).set(0,n):Gn(o,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,s=yc();return t>=hs(e._capacity)?r=Oc(r,e.__ownerID,0,t,n,s):i=Oc(i,e.__ownerID,e._level,t,n,s),s.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):ps(e._origin,e._capacity,e._level,i,r):e}function Oc(e,t,n,r,i,s){var o=r>>>n&lt,a=e&&o<e.array.length;if(!a&&i===void 0)return e;var u;if(n>0){var l=e&&e.array[o],c=Oc(l,t,n-Ie,r,i,s);return c===l?e:(u=Jr(e,t),u.array[o]=c,u)}return a&&e.array[o]===i?e:(s&&Bt(s),u=Jr(e,t),i===void 0&&o===u.array.length-1?u.array.pop():u.array[o]=i,u)}function Jr(e,t){return t&&e&&t===e.ownerID?e:new Zn(e?e.array.slice():[],t)}function x_(e,t){if(t>=hs(e._capacity))return e._tail;if(t<1<<e._level+Ie){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&lt],r-=Ie;return n}}function Gn(e,t,n){t!==void 0&&(t|=0),n!==void 0&&(n|=0);var r=e.__ownerID||new _l,i=e._origin,s=e._capacity,o=i+t,a=n===void 0?s:n<0?s+n:i+n;if(o===i&&a===s)return e;if(o>=a)return e.clear();for(var u=e._level,l=e._root,c=0;o+c<0;)l=new Zn(l&&l.array.length?[void 0,l]:[],r),u+=Ie,c+=1<<u;c&&(o+=c,i+=c,a+=c,s+=c);for(var f=hs(s),d=hs(a);d>=1<<u+Ie;)l=new Zn(l&&l.array.length?[l]:[],r),u+=Ie;var p=e._tail,h=d<f?x_(e,a-1):d>f?new Zn([],r):p;if(p&&d>f&&o<s&&p.array.length){l=Jr(l,r);for(var _=l,g=u;g>Ie;g-=Ie){var y=f>>>g&lt;_=_.array[y]=Jr(_.array[y],r)}_.array[f>>>Ie&lt]=p}if(a<s&&(h=h&&h.removeAfter(r,0,a)),o>=d)o-=d,a-=d,u=Ie,l=null,h=h&&h.removeBefore(r,0,o);else if(o>i||d<f){for(c=0;l;){var S=o>>>u&lt;if(S!==d>>>u&lt)break;S&&(c+=(1<<u)*S),u-=Ie,l=l.array[S]}l&&o>i&&(l=l.removeBefore(r,u,o-c)),l&&d<f&&(l=l.removeAfter(r,u,d-c)),c&&(o-=c,a-=c)}return e.__ownerID?(e.size=a-o,e._origin=o,e._capacity=a,e._level=u,e._root=l,e._tail=h,e.__hash=void 0,e.__altered=!0,e):ps(o,a,u,l,h)}function hs(e){return e<qt?0:e-1>>>Ie<<Ie}var on=function(e){function t(n){return n==null?Di():ua(n)?n:Di().withMutations(function(r){var i=Qt(n);Nt(i.size),i.forEach(function(s,o){return r.set(o,s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(r,i){var s=this._map.get(r);return s!==void 0?this._list.get(s)[1]:i},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Di()},t.prototype.set=function(r,i){return jd(this,r,i)},t.prototype.remove=function(r){return jd(this,r,ue)},t.prototype.__iterate=function(r,i){var s=this;return this._list.__iterate(function(o){return o&&r(o[1],o[0],s)},i)},t.prototype.__iterator=function(r,i){return this._list.fromEntrySeq().__iterator(r,i)},t.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var i=this._map.__ensureOwner(r),s=this._list.__ensureOwner(r);return r?Hl(i,s,r,this.__hash):this.size===0?Di():(this.__ownerID=r,this.__altered=!1,this._map=i,this._list=s,this)},t}(V);on.isOrderedMap=ua;on.prototype[di]=!0;on.prototype[xs]=on.prototype.remove;function Hl(e,t,n,r){var i=Object.create(on.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var Dd;function Di(){return Dd||(Dd=Hl(en(),yo()))}function jd(e,t,n){var r=e._map,i=e._list,s=r.get(t),o=s!==void 0,a,u;if(n===ue){if(!o)return e;i.size>=qt&&i.size>=r.size*2?(u=i.filter(function(l,c){return l!==void 0&&s!==c}),a=u.toKeyedSeq().map(function(l){return l[0]}).flip().toMap(),e.__ownerID&&(a.__ownerID=u.__ownerID=e.__ownerID)):(a=r.remove(t),u=s===i.size-1?i.pop():i.set(s,void 0))}else if(o){if(n===i.get(s)[1])return e;a=r,u=i.set(s,[t,n])}else a=r.set(t,i.size),u=i.set(i.size,[t,n]);return e.__ownerID?(e.size=a.size,e._map=a,e._list=u,e.__hash=void 0,e.__altered=!0,e):Hl(a,u)}var L_="@@__IMMUTABLE_STACK__@@";function ms(e){return!!(e&&e[L_])}var mi=function(e){function t(n){return n==null?ro():ms(n)?n:ro().pushAll(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(r,i){var s=this._head;for(r=Jn(this,r);s&&r--;)s=s.next;return s?s.value:i},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var r=arguments;if(arguments.length===0)return this;for(var i=this.size+arguments.length,s=this._head,o=arguments.length-1;o>=0;o--)s={value:r[o],next:s};return this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):ji(i,s)},t.prototype.pushAll=function(r){if(r=e(r),r.size===0)return this;if(this.size===0&&ms(r))return r;Nt(r.size);var i=this.size,s=this._head;return r.__iterate(function(o){i++,s={value:o,next:s}},!0),this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):ji(i,s)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):ro()},t.prototype.slice=function(r,i){if(Ls(r,i,this.size))return this;var s=ci(r,this.size),o=Ms(i,this.size);if(o!==this.size)return e.prototype.slice.call(this,r,i);for(var a=this.size-s,u=this._head;s--;)u=u.next;return this.__ownerID?(this.size=a,this._head=u,this.__hash=void 0,this.__altered=!0,this):ji(a,u)},t.prototype.__ensureOwner=function(r){return r===this.__ownerID?this:r?ji(this.size,this._head,r,this.__hash):this.size===0?ro():(this.__ownerID=r,this.__altered=!1,this)},t.prototype.__iterate=function(r,i){var s=this;if(i)return new Or(this.toArray()).__iterate(function(u,l){return r(u,l,s)},i);for(var o=0,a=this._head;a&&r(a.value,o++,this)!==!1;)a=a.next;return o},t.prototype.__iterator=function(r,i){if(i)return new Or(this.toArray()).__iterator(r,i);var s=0,o=this._head;return new me(function(){if(o){var a=o.value;return o=o.next,xe(r,s++,a)}return ft()})},t}(Nr);mi.isStack=ms;var dt=mi.prototype;dt[L_]=!0;dt.shift=dt.pop;dt.unshift=dt.push;dt.unshiftAll=dt.pushAll;dt.withMutations=js;dt.wasAltered=jl;dt.asImmutable=qs;dt["@@transducer/init"]=dt.asMutable=$s;dt["@@transducer/step"]=function(e,t){return e.unshift(t)};dt["@@transducer/result"]=function(e){return e.asImmutable()};function ji(e,t,n,r){var i=Object.create(dt);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}var $d;function ro(){return $d||($d=ji(0))}var M_="@@__IMMUTABLE_SET__@@";function Hs(e){return!!(e&&e[M_])}function ha(e){return Hs(e)&&At(e)}function Vl(e,t){if(e===t)return!0;if(!tt(t)||e.size!==void 0&&t.size!==void 0&&e.size!==t.size||e.__hash!==void 0&&t.__hash!==void 0&&e.__hash!==t.__hash||Oe(e)!==Oe(t)||Ge(e)!==Ge(t)||At(e)!==At(t))return!1;if(e.size===0&&t.size===0)return!0;var n=!li(e);if(At(e)){var r=e.entries();return t.every(function(u,l){var c=r.next().value;return c&&ke(c[1],u)&&(n||ke(c[0],l))})&&r.next().done}var i=!1;if(e.size===void 0)if(t.size===void 0)typeof e.cacheResult=="function"&&e.cacheResult();else{i=!0;var s=e;e=t,t=s}var o=!0,a=t.__iterate(function(u,l){if(n?!e.has(u):i?!ke(u,e.get(l,ue)):!ke(e.get(l,ue),u))return o=!1,!1});return o&&e.size===a}function Ar(e,t){var n=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}function Do(e){if(!e||typeof e!="object")return e;if(!tt(e)){if(!er(e))return e;e=nt(e)}if(Oe(e)){var t={};return e.__iterate(function(r,i){t[i]=Do(r)}),t}var n=[];return e.__iterate(function(r){n.push(Do(r))}),n}var _i=function(e){function t(n){return n==null?$i():Hs(n)&&!At(n)?n:$i().withMutations(function(r){var i=e(n);Nt(i.size),i.forEach(function(s){return r.add(s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(r){return this(Qt(r).keySeq())},t.intersect=function(r){return r=Re(r).toArray(),r.length?Ye.intersect.apply(t(r.pop()),r):$i()},t.union=function(r){return r=Re(r).toArray(),r.length?Ye.union.apply(t(r.pop()),r):$i()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(r){return this._map.has(r)},t.prototype.add=function(r){return io(this,this._map.set(r,r))},t.prototype.remove=function(r){return io(this,this._map.remove(r))},t.prototype.clear=function(){return io(this,this._map.clear())},t.prototype.map=function(r,i){var s=this,o=!1,a=io(this,this._map.mapEntries(function(u){var l=u[1],c=r.call(i,l,l,s);return c!==l&&(o=!0),[c,c]},i));return o?a:this},t.prototype.union=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return r=r.filter(function(s){return s.size!==0}),r.length===0?this:this.size===0&&!this.__ownerID&&r.length===1?this.constructor(r[0]):this.withMutations(function(s){for(var o=0;o<r.length;o++)typeof r[o]=="string"?s.add(r[o]):e(r[o]).forEach(function(a){return s.add(a)})})},t.prototype.intersect=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(r.length===0)return this;r=r.map(function(o){return e(o)});var s=[];return this.forEach(function(o){r.every(function(a){return a.includes(o)})||s.push(o)}),this.withMutations(function(o){s.forEach(function(a){o.remove(a)})})},t.prototype.subtract=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];if(r.length===0)return this;r=r.map(function(o){return e(o)});var s=[];return this.forEach(function(o){r.some(function(a){return a.includes(o)})&&s.push(o)}),this.withMutations(function(o){s.forEach(function(a){o.remove(a)})})},t.prototype.sort=function(r){return et(Yr(this,r))},t.prototype.sortBy=function(r,i){return et(Yr(this,i,r))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(r,i){var s=this;return this._map.__iterate(function(o){return r(o,o,s)},i)},t.prototype.__iterator=function(r,i){return this._map.__iterator(r,i)},t.prototype.__ensureOwner=function(r){if(r===this.__ownerID)return this;var i=this._map.__ensureOwner(r);return r?this.__make(i,r):this.size===0?this.__empty():(this.__ownerID=r,this._map=i,this)},t}(fi);_i.isSet=Hs;var Ye=_i.prototype;Ye[M_]=!0;Ye[xs]=Ye.remove;Ye.merge=Ye.concat=Ye.union;Ye.withMutations=js;Ye.asImmutable=qs;Ye["@@transducer/init"]=Ye.asMutable=$s;Ye["@@transducer/step"]=function(e,t){return e.add(t)};Ye["@@transducer/result"]=function(e){return e.asImmutable()};Ye.__empty=$i;Ye.__make=P_;function io(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:t.size===0?e.__empty():e.__make(t)}function P_(e,t){var n=Object.create(Ye);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var qd;function $i(){return qd||(qd=P_(en()))}var zl=function(e){function t(n,r,i){if(!(this instanceof t))return new t(n,r,i);if(Nl(i!==0,"Cannot step a Range by 0"),n=n||0,r===void 0&&(r=1/0),i=i===void 0?1:Math.abs(i),r<n&&(i=-i),this._start=n,this._end=r,this._step=i,this.size=Math.max(0,Math.ceil((r-n)/i-1)+1),this.size===0){if(au)return au;au=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(r,i){return this.has(r)?this._start+Jn(this,r)*this._step:i},t.prototype.includes=function(r){var i=(r-this._start)/this._step;return i>=0&&i<this.size&&i===Math.floor(i)},t.prototype.slice=function(r,i){return Ls(r,i,this.size)?this:(r=ci(r,this.size),i=Ms(i,this.size),i<=r?new t(0,0):new t(this.get(r,this._end),this.get(i,this._end),this._step))},t.prototype.indexOf=function(r){var i=r-this._start;if(i%this._step===0){var s=i/this._step;if(s>=0&&s<this.size)return s}return-1},t.prototype.lastIndexOf=function(r){return this.indexOf(r)},t.prototype.__iterate=function(r,i){for(var s=this.size,o=this._step,a=i?this._start+(s-1)*o:this._start,u=0;u!==s&&r(a,i?s-++u:u++,this)!==!1;)a+=i?-o:o;return u},t.prototype.__iterator=function(r,i){var s=this.size,o=this._step,a=i?this._start+(s-1)*o:this._start,u=0;return new me(function(){if(u===s)return ft();var l=a;return a+=i?-o:o,xe(r,i?s-++u:u++,l)})},t.prototype.equals=function(r){return r instanceof t?this._start===r._start&&this._end===r._end&&this._step===r._step:Vl(this,r)},t}(Yt),au;function ma(e,t,n){for(var r=g_(t),i=0;i!==r.length;)if(e=da(e,r[i++],ue),e===ue)return n;return e}function F_(e,t){return ma(this,e,t)}function Wl(e,t){return ma(e,t,ue)!==ue}function L1(e){return Wl(this,e)}function U_(){Nt(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e}Re.isIterable=tt;Re.isKeyed=Oe;Re.isIndexed=Ge;Re.isAssociative=li;Re.isOrdered=At;Re.Iterator=me;Ar(Re,{toArray:function(){Nt(this.size);var t=new Array(this.size||0),n=Oe(this),r=0;return this.__iterate(function(i,s){t[r++]=n?[s,i]:i}),t},toIndexedSeq:function(){return new u_(this)},toJS:function(){return Do(this)},toKeyedSeq:function(){return new la(this,!0)},toMap:function(){return V(this.toKeyedSeq())},toObject:U_,toOrderedMap:function(){return on(this.toKeyedSeq())},toOrderedSet:function(){return et(Oe(this)?this.valueSeq():this)},toSet:function(){return _i(Oe(this)?this.valueSeq():this)},toSetSeq:function(){return new c_(this)},toSeq:function(){return Ge(this)?this.toIndexedSeq():Oe(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return mi(Oe(this)?this.valueSeq():this)},toList:function(){return J(Oe(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,n){return this.size===0?t+n:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+n},concat:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Te(this,_1(this,t))},includes:function(t){return this.some(function(n){return ke(n,t)})},entries:function(){return this.__iterator(Vt)},every:function(t,n){Nt(this.size);var r=!0;return this.__iterate(function(i,s,o){if(!t.call(n,i,s,o))return r=!1,!1}),r},filter:function(t,n){return Te(this,p_(this,t,n,!0))},partition:function(t,n){return h1(this,t,n)},find:function(t,n,r){var i=this.findEntry(t,n);return i?i[1]:r},forEach:function(t,n){return Nt(this.size),this.__iterate(n?t.bind(n):t)},join:function(t){Nt(this.size),t=t!==void 0?""+t:",";var n="",r=!0;return this.__iterate(function(i){r?r=!1:n+=t,n+=i!=null?i.toString():""}),n},keys:function(){return this.__iterator(Fs)},map:function(t,n){return Te(this,d_(this,t,n))},reduce:function(t,n,r){return Bd(this,t,n,r,arguments.length<2,!1)},reduceRight:function(t,n,r){return Bd(this,t,n,r,arguments.length<2,!0)},reverse:function(){return Te(this,wl(this,!0))},slice:function(t,n){return Te(this,Tl(this,t,n,!0))},some:function(t,n){Nt(this.size);var r=!1;return this.__iterate(function(i,s,o){if(t.call(n,i,s,o))return r=!0,!1}),r},sort:function(t){return Te(this,Yr(this,t))},values:function(){return this.__iterator(sn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,n){return Qr(t?this.toSeq().filter(t,n):this)},countBy:function(t,n){return d1(this,t,n)},equals:function(t){return Vl(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Or(t._cache);var n=t.toSeq().map(P1).toIndexedSeq();return n.fromEntrySeq=function(){return t.toSeq()},n},filterNot:function(t,n){return this.filter(uu(t),n)},findEntry:function(t,n,r){var i=r;return this.__iterate(function(s,o,a){if(t.call(n,s,o,a))return i=[o,s],!1}),i},findKey:function(t,n){var r=this.findEntry(t,n);return r&&r[0]},findLast:function(t,n,r){return this.toKeyedSeq().reverse().find(t,n,r)},findLastEntry:function(t,n,r){return this.toKeyedSeq().reverse().findEntry(t,n,r)},findLastKey:function(t,n){return this.toKeyedSeq().reverse().findKey(t,n)},first:function(t){return this.find(Ym,null,t)},flatMap:function(t,n){return Te(this,g1(this,t,n))},flatten:function(t){return Te(this,m_(this,t,!0))},fromEntrySeq:function(){return new l_(this)},get:function(t,n){return this.find(function(r,i){return ke(i,t)},void 0,n)},getIn:F_,groupBy:function(t,n){return p1(this,t,n)},has:function(t){return this.get(t,ue)!==ue},hasIn:L1,isSubset:function(t){return t=typeof t.includes=="function"?t:Re(t),this.every(function(n){return t.includes(n)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:Re(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(n){return ke(n,t)})},keySeq:function(){return this.toSeq().map(M1).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return to(this,t)},maxBy:function(t,n){return to(this,n,t)},min:function(t){return to(this,t?Hd(t):zd)},minBy:function(t,n){return to(this,n?Hd(n):zd,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,n){return Te(this,h_(this,t,n,!0))},skipUntil:function(t,n){return this.skipWhile(uu(t),n)},sortBy:function(t,n){return Te(this,Yr(this,n,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,n){return Te(this,m1(this,t,n))},takeUntil:function(t,n){return this.takeWhile(uu(t),n)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=F1(this))}});var rt=Re.prototype;rt[Jm]=!0;rt[oa]=rt.values;rt.toJSON=rt.toArray;rt.__toStringMapper=ls;rt.inspect=rt.toSource=function(){return this.toString()};rt.chain=rt.flatMap;rt.contains=rt.includes;Ar(Qt,{flip:function(){return Te(this,f_(this))},mapEntries:function(t,n){var r=this,i=0;return Te(this,this.toSeq().map(function(s,o){return t.call(n,[o,s],i++,r)}).fromEntrySeq())},mapKeys:function(t,n){var r=this;return Te(this,this.toSeq().flip().map(function(i,s){return t.call(n,i,s,r)}).flip())}});var Vs=Qt.prototype;Vs[e_]=!0;Vs[oa]=rt.entries;Vs.toJSON=U_;Vs.__toStringMapper=function(e,t){return ls(t)+": "+ls(e)};Ar(Nr,{toKeyedSeq:function(){return new la(this,!1)},filter:function(t,n){return Te(this,p_(this,t,n,!1))},findIndex:function(t,n){var r=this.findEntry(t,n);return r?r[0]:-1},indexOf:function(t){var n=this.keyOf(t);return n===void 0?-1:n},lastIndexOf:function(t){var n=this.lastKeyOf(t);return n===void 0?-1:n},reverse:function(){return Te(this,wl(this,!1))},slice:function(t,n){return Te(this,Tl(this,t,n,!1))},splice:function(t,n){var r=arguments.length;if(n=Math.max(n||0,0),r===0||r===2&&!n)return this;t=ci(t,t<0?this.count():this.size);var i=this.slice(0,t);return Te(this,r===1?i:i.concat(mn(arguments,2),this.slice(t+n)))},findLastIndex:function(t,n){var r=this.findLastEntry(t,n);return r?r[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Te(this,m_(this,t,!1))},get:function(t,n){return t=Jn(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?n:this.find(function(r,i){return i===t},void 0,n)},has:function(t){return t=Jn(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Te(this,v1(this,t))},interleave:function(){var t=[this].concat(mn(arguments)),n=no(this.toSeq(),Yt.of,t),r=n.flatten(!0);return n.size&&(r.size=n.size*t.length),Te(this,r)},keySeq:function(){return zl(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,n){return Te(this,h_(this,t,n,!1))},zip:function(){var t=[this].concat(mn(arguments));return Te(this,no(this,Vd,t))},zipAll:function(){var t=[this].concat(mn(arguments));return Te(this,no(this,Vd,t,!0))},zipWith:function(t){var n=mn(arguments);return n[0]=this,Te(this,no(this,t,n))}});var gi=Nr.prototype;gi[t_]=!0;gi[di]=!0;Ar(fi,{get:function(t,n){return this.has(t)?t:n},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var ei=fi.prototype;ei.has=rt.includes;ei.contains=ei.includes;ei.keys=ei.values;Ar(ir,Vs);Ar(Yt,gi);Ar(hi,ei);function Bd(e,t,n,r,i,s){return Nt(e.size),e.__iterate(function(o,a,u){i?(i=!1,n=o):n=t.call(r,n,o,a,u)},s),n}function M1(e,t){return t}function P1(e,t){return[t,e]}function uu(e){return function(){return!e.apply(this,arguments)}}function Hd(e){return function(){return-e.apply(this,arguments)}}function Vd(){return mn(arguments)}function zd(e,t){return e<t?1:e>t?-1:0}function F1(e){if(e.size===1/0)return 0;var t=At(e),n=Oe(e),r=t?1:0,i=e.__iterate(n?t?function(s,o){r=31*r+Wd(ot(s),ot(o))|0}:function(s,o){r=r+Wd(ot(s),ot(o))|0}:t?function(s){r=31*r+ot(s)|0}:function(s){r=r+ot(s)|0});return U1(i,r)}function U1(e,t){return t=xi(t,3432918353),t=xi(t<<15|t>>>-15,461845907),t=xi(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=xi(t^t>>>16,2246822507),t=xi(t^t>>>13,3266489909),t=ca(t^t>>>16),t}function Wd(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var et=function(e){function t(n){return n==null?Cc():ha(n)?n:Cc().withMutations(function(r){var i=fi(n);Nt(i.size),i.forEach(function(s){return r.add(s)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(r){return this(Qt(r).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(_i);et.isOrderedSet=ha;var Ir=et.prototype;Ir[di]=!0;Ir.zip=gi.zip;Ir.zipWith=gi.zipWith;Ir.zipAll=gi.zipAll;Ir.__empty=Cc;Ir.__make=k_;function k_(e,t){var n=Object.create(Ir);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}var Gd;function Cc(){return Gd||(Gd=k_(Di()))}var D_={LeftThenRight:-1,RightThenLeft:1};function k1(e){if(rr(e))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Mt(e))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(e===null||typeof e!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Se=function(t,n){var r;k1(t);var i=function(a){var u=this;if(a instanceof i)return a;if(!(this instanceof i))return new i(a);if(!r){r=!0;var l=Object.keys(t),c=s._indices={};s._name=n,s._keys=l,s._defaultValues=t;for(var f=0;f<l.length;f++){var d=l[f];c[d]=f,s[d]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+Kl(this)+' with property "'+d+'" since that property name is part of the Record API.'):D1(s,d)}}return this.__ownerID=void 0,this._values=J().withMutations(function(p){p.setSize(u._keys.length),Qt(a).forEach(function(h,_){p.set(u._indices[_],h===u._defaultValues[_]?void 0:h)})}),this},s=i.prototype=Object.create(Ne);return s.constructor=i,n&&(i.displayName=n),i};Se.prototype.toString=function(){for(var t=Kl(this)+" { ",n=this._keys,r,i=0,s=n.length;i!==s;i++)r=n[i],t+=(i?", ":"")+r+": "+ls(this.get(r));return t+" }"};Se.prototype.equals=function(t){return this===t||rr(t)&&ti(this).equals(ti(t))};Se.prototype.hashCode=function(){return ti(this).hashCode()};Se.prototype.has=function(t){return this._indices.hasOwnProperty(t)};Se.prototype.get=function(t,n){if(!this.has(t))return n;var r=this._indices[t],i=this._values.get(r);return i===void 0?this._defaultValues[t]:i};Se.prototype.set=function(t,n){if(this.has(t)){var r=this._values.set(this._indices[t],n===this._defaultValues[t]?void 0:n);if(r!==this._values&&!this.__ownerID)return Gl(this,r)}return this};Se.prototype.remove=function(t){return this.set(t)};Se.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Gl(this,t)};Se.prototype.wasAltered=function(){return this._values.wasAltered()};Se.prototype.toSeq=function(){return ti(this)};Se.prototype.toJS=function(){return Do(this)};Se.prototype.entries=function(){return this.__iterator(Vt)};Se.prototype.__iterator=function(t,n){return ti(this).__iterator(t,n)};Se.prototype.__iterate=function(t,n){return ti(this).__iterate(t,n)};Se.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var n=this._values.__ensureOwner(t);return t?Gl(this,n,t):(this.__ownerID=t,this._values=n,this)};Se.isRecord=rr;Se.getDescriptiveName=Kl;var Ne=Se.prototype;Ne[r_]=!0;Ne[xs]=Ne.remove;Ne.deleteIn=Ne.removeIn=Pl;Ne.getIn=F_;Ne.hasIn=rt.hasIn;Ne.merge=y_;Ne.mergeWith=S_;Ne.mergeIn=kl;Ne.mergeDeep=C_;Ne.mergeDeepWith=N_;Ne.mergeDeepIn=Dl;Ne.setIn=Ll;Ne.update=Fl;Ne.updateIn=Ul;Ne.withMutations=js;Ne.asMutable=$s;Ne.asImmutable=qs;Ne[oa]=Ne.entries;Ne.toJSON=Ne.toObject=rt.toObject;Ne.inspect=Ne.toSource=function(){return this.toString()};function Gl(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._values=t,r.__ownerID=n,r}function Kl(e){return e.constructor.displayName||e.constructor.name||"Record"}function ti(e){return El(e._keys.map(function(t){return[t,e.get(t)]}))}function D1(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(n){Nl(this.__ownerID,"Cannot set on an immutable record."),this.set(t,n)}})}catch{}}var j_=function(e){function t(n,r){if(!(this instanceof t))return new t(n,r);if(this._value=n,this.size=r===void 0?1/0:Math.max(0,r),this.size===0){if(cu)return cu;cu=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(r,i){return this.has(r)?this._value:i},t.prototype.includes=function(r){return ke(this._value,r)},t.prototype.slice=function(r,i){var s=this.size;return Ls(r,i,s)?this:new t(this._value,Ms(i,s)-ci(r,s))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(r){return ke(this._value,r)?0:-1},t.prototype.lastIndexOf=function(r){return ke(this._value,r)?this.size:-1},t.prototype.__iterate=function(r,i){for(var s=this.size,o=0;o!==s&&r(this._value,i?s-++o:o++,this)!==!1;);return o},t.prototype.__iterator=function(r,i){var s=this,o=this.size,a=0;return new me(function(){return a===o?ft():xe(r,i?o-++a:a++,s._value)})},t.prototype.equals=function(r){return r instanceof t?ke(this._value,r._value):Vl(this,r)},t}(Yt),cu;function ve(e,t){return $_([],t||j1,e,"",t&&t.length>2?[]:void 0,{"":e})}function $_(e,t,n,r,i,s){if(typeof n!="string"&&!Mt(n)&&(vl(n)||gl(n)||fa(n))){if(~e.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");e.push(n),i&&r!==""&&i.push(r);var o=t.call(s,r,nt(n).map(function(a,u){return $_(e,t,a,u,i,n)}),i&&i.slice());return e.pop(),i&&i.pop(),o}return n}function j1(e,t){return Ge(t)?t.toList():Oe(t)?t.toMap():t.toSet()}var q_="4.3.7",$1={version:q_,Collection:Re,Iterable:Re,Seq:nt,Map:V,OrderedMap:on,List:J,Stack:mi,Set:_i,OrderedSet:et,PairSorting:D_,Record:Se,Range:zl,Repeat:j_,is:ke,fromJS:ve,hash:ot,isImmutable:Mt,isCollection:tt,isKeyed:Oe,isIndexed:Ge,isAssociative:li,isOrdered:At,isValueObject:Uo,isPlainObject:fa,isSeq:Ps,isList:Bs,isMap:Us,isOrderedMap:ua,isStack:ms,isSet:Hs,isOrderedSet:ha,isRecord:rr,get:da,getIn:ma,has:Al,hasIn:Wl,merge:b_,mergeDeep:T_,mergeWith:w_,mergeDeepWith:O_,remove:Il,removeIn:Ml,set:Rl,setIn:xl,update:pa,updateIn:sr},q1=Re;const B1=Object.freeze(Object.defineProperty({__proto__:null,Collection:Re,Iterable:q1,List:J,Map:V,OrderedMap:on,OrderedSet:et,PairSorting:D_,Range:zl,Record:Se,Repeat:j_,Seq:nt,Set:_i,Stack:mi,default:$1,fromJS:ve,get:da,getIn:ma,has:Al,hasIn:Wl,hash:ot,is:ke,isAssociative:li,isCollection:tt,isImmutable:Mt,isIndexed:Ge,isKeyed:Oe,isList:Bs,isMap:Us,isOrdered:At,isOrderedMap:ua,isOrderedSet:ha,isPlainObject:fa,isRecord:rr,isSeq:Ps,isSet:Hs,isStack:ms,isValueObject:Uo,merge:b_,mergeDeep:T_,mergeDeepWith:O_,mergeWith:w_,remove:Il,removeIn:Ml,set:Rl,setIn:xl,update:pa,updateIn:sr,version:q_},Symbol.toStringTag,{value:"Module"})),B_=Se({shortcode:"",static_url:"",url:"",category:"",visible_in_picker:!1});function vi(e){return Bs(e)?e.reduce((t,n)=>(t[`:${n.shortcode}:`]=n.toJS(),t),{}):e.reduce((t,n)=>(t[`:${n.shortcode}:`]=n,t),{})}function H_(e,t){return{...e,titleHtml:nn(ui(e.title),t)}}const H1={expired:!1,multiple:!1,voters_count:0,votes_count:0,voted:!1,own_votes:[]};function V1(e,t){const n=vi(e.emojis);return{...H1,...e,emojis:e.emojis.map(r=>B_(r)),options:e.options.map((r,i)=>{var a;const s={...r,voted:((a=e.own_votes)==null?void 0:a.includes(i))||!1,titleHtml:nn(ui(r.title),n)},o=t==null?void 0:t.options[i];if(o!=null&&o.translation&&o.title===s.title){const{translation:u}=o;s.translation=H_(u,n)}return s})}}const Ql=ee("accounts/importAccounts"),z1=new DOMParser;function W1(e){const t={...e};return t.filter=t.filter.id,t}function G1(e,t){var r,i,s,o;const n={...e};if(n.account=e.account.id,e.reblog&&e.reblog.id&&(n.reblog=e.reblog.id),(((r=e.quote)==null?void 0:r.quoted_status)??((i=e.quote)==null?void 0:i.quoted_status_id))&&(n.quote={...e.quote,quoted_status:((s=e.quote.quoted_status)==null?void 0:s.id)??((o=e.quote)==null?void 0:o.quoted_status_id)}),e.poll&&e.poll.id&&(n.poll=e.poll.id),e.card&&(n.card={...e.card,authors:e.card.authors.map(a=>{var u;return{...a,accountId:(u=a.account)==null?void 0:u.id,account:void 0}})}),e.filtered&&(n.filtered=e.filtered.map(W1)),t&&t.get("content")===n.content&&t.get("spoiler_text")===n.spoiler_text)n.search_index=t.get("search_index"),n.contentHtml=t.get("contentHtml"),n.spoilerHtml=t.get("spoilerHtml"),n.spoiler_text=t.get("spoiler_text"),n.hidden=t.get("hidden"),t.get("translation")&&(n.translation=t.get("translation"));else{n.spoiler_text&&!n.content&&(n.content=n.spoiler_text,n.spoiler_text="");const a=n.spoiler_text||"",u=[a,e.content].concat(e.poll&&e.poll.options?e.poll.options.map(c=>c.title):[]).concat(e.media_attachments.map(c=>c.description)).join(`

`).replace(/<br\s*\/?>/g,`
`).replace(/<\/p><p>/g,`

`),l=vi(n.emojis);n.search_index=z1.parseFromString(u,"text/html").documentElement.textContent,n.contentHtml=nn(n.content,l),n.spoilerHtml=nn(ui(a),l),n.hidden=o0?!1:a.length>0||n.sensitive,n.url&&!(n.url.startsWith("http://")||n.url.startsWith("https://"))&&(n.url=null),n.url||(n.url=n.uri),n.media_attachments.forEach(c=>{c.remote_url&&!(c.remote_url.startsWith("http://")||c.remote_url.startsWith("https://"))&&(c.remote_url=null)})}if(t){const a=t.get("media_attachments");n.media_attachments&&a&&n.media_attachments.forEach(u=>{const l=a.find(c=>c.get("id")===u.id);l&&l.get("description")===u.description&&(u.translation=l.get("translation"))})}return n}function K1(e,t){const n=vi(t.get("emojis").toJS());return{detected_source_language:e.detected_source_language,language:e.language,provider:e.provider,contentHtml:nn(e.content,n),spoilerHtml:nn(ui(e.spoiler_text),n),spoiler_text:e.spoiler_text}}function V_(e){const t={...e},n=vi(t.emojis);return t.contentHtml=nn(t.content,n),t}const z_=ee("poll/importMultiple"),Q1="STATUS_IMPORT",W_="STATUSES_IMPORT",G_="FILTERS_IMPORT";function Br(e,t){e.every(n=>n.id!==t.id)&&e.push(t)}function Y1(e){return{type:W_,statuses:e}}function X1(e){return{type:G_,filters:e}}function yi(e){return ae([e])}function ae(e){const t=[];function n(r){Br(t,r),r.moved&&n(r.moved)}return e.forEach(n),Ql({accounts:t})}function Pt(e){return He([e])}function He(e){return(t,n)=>{const r=[],i=[],s=[],o=[];function a(u){var l,c,f;Br(i,G1(u,n().getIn(["statuses",u.id]))),Br(r,u.account),u.filtered&&u.filtered.forEach(d=>Br(o,d.filter)),(l=u.reblog)!=null&&l.id&&a(u.reblog),(c=u.quote)!=null&&c.quoted_status&&a(u.quote.quoted_status),(f=u.poll)!=null&&f.id&&Br(s,V1(u.poll,n().polls[u.poll.id])),u.card&&u.card.authors.forEach(d=>d.account&&Br(r,d.account))}e.forEach(a),t(z_({polls:s})),t(ae(r)),t(Y1(i)),t(X1(o))}}const Z1=ee("accounts/revealAccount");function Rr(e){return{payload:{...e,skipLoading:!0}}}const Yl=ee("accounts/followAccount/SUCCESS",Rr),_a=ee("accounts/unfollowAccount/SUCCESS",Rr),ga=ee("accounts/followRequestAuthorize/SUCCESS"),va=ee("accounts/followRequestReject/SUCCESS"),K_=ee("accounts/follow/REQUEST",Rr),Q_=ee("accounts/follow/FAIL",Rr),Y_=ee("accounts/unfollow/REQUEST",Rr),X_=ee("accounts/unfollow/FAIL",Rr),Fn=ee("accounts/block/SUCCESS"),Z_=ee("accounts/unblock/SUCCESS"),Un=ee("accounts/mute/SUCCESS"),J_=ee("accounts/unmute/SUCCESS"),eg=ee("accounts/pin/SUCCESS"),tg=ee("accounts/unpin/SUCCESS"),ng=ee("relationships/fetch/SUCCESS",Rr),J1=fe("accounts/remove_from_followers",({accountId:e})=>Kw(e),e=>({relationship:e})),Qi=fe("accounts/endorsements",({accountId:e})=>Yw(e),(e,{dispatch:t})=>(t(ae(e)),e)),eO="ACCOUNT_FETCH_REQUEST",tO="ACCOUNT_FETCH_SUCCESS",nO="ACCOUNT_FETCH_FAIL",rO="ACCOUNT_LOOKUP_REQUEST",iO="ACCOUNT_LOOKUP_SUCCESS",rg="ACCOUNT_LOOKUP_FAIL",sO="ACCOUNT_BLOCK_REQUEST",oO="ACCOUNT_BLOCK_FAIL",aO="ACCOUNT_UNBLOCK_REQUEST",uO="ACCOUNT_UNBLOCK_FAIL",cO="ACCOUNT_MUTE_REQUEST",lO="ACCOUNT_MUTE_FAIL",fO="ACCOUNT_UNMUTE_REQUEST",dO="ACCOUNT_UNMUTE_FAIL",pO="ACCOUNT_PIN_REQUEST",hO="ACCOUNT_PIN_FAIL",mO="ACCOUNT_UNPIN_REQUEST",_O="ACCOUNT_UNPIN_FAIL",ig="FOLLOWERS_FETCH_REQUEST",sg="FOLLOWERS_FETCH_SUCCESS",og="FOLLOWERS_FETCH_FAIL",ag="FOLLOWERS_EXPAND_REQUEST",ug="FOLLOWERS_EXPAND_SUCCESS",cg="FOLLOWERS_EXPAND_FAIL",lg="FOLLOWING_FETCH_REQUEST",fg="FOLLOWING_FETCH_SUCCESS",dg="FOLLOWING_FETCH_FAIL",pg="FOLLOWING_EXPAND_REQUEST",hg="FOLLOWING_EXPAND_SUCCESS",mg="FOLLOWING_EXPAND_FAIL",gO="RELATIONSHIPS_FETCH_REQUEST",vO="RELATIONSHIPS_FETCH_FAIL",_g="FOLLOW_REQUESTS_FETCH_REQUEST",gg="FOLLOW_REQUESTS_FETCH_SUCCESS",vg="FOLLOW_REQUESTS_FETCH_FAIL",yg="FOLLOW_REQUESTS_EXPAND_REQUEST",Sg="FOLLOW_REQUESTS_EXPAND_SUCCESS",Eg="FOLLOW_REQUESTS_EXPAND_FAIL",yO="FOLLOW_REQUEST_AUTHORIZE_REQUEST",SO="FOLLOW_REQUEST_AUTHORIZE_FAIL",EO="FOLLOW_REQUEST_REJECT_REQUEST",bO="FOLLOW_REQUEST_REJECT_FAIL";function _2(e){return t=>{t(Ve([e])),t(CO(e)),H().get(`/api/v1/accounts/${e}`).then(n=>{t(yi(n.data)),t(NO())}).catch(n=>{t(AO(e,n))})}}const g2=e=>t=>{t(wO(e)),H().get("/api/v1/accounts/lookup",{params:{acct:e}}).then(n=>{t(Ve([n.data.id])),t(yi(n.data)),t(TO())}).catch(n=>{t(OO(e,n))})},wO=e=>({type:rO,acct:e}),TO=()=>({type:iO}),OO=(e,t)=>({type:rg,acct:e,error:t,skipAlert:!0});function CO(e){return{type:eO,id:e}}function NO(){return{type:tO}}function AO(e,t){return{type:nO,id:e,error:t,skipAlert:!0}}function v2(e,t={reblogs:!0}){return(n,r)=>{const i=r().getIn(["relationships",e,"following"]),s=r().getIn(["accounts",e,"locked"],!1);n(K_({id:e,locked:s})),H().post(`/api/v1/accounts/${e}/follow`,t).then(o=>{n(Yl({relationship:o.data,alreadyFollowing:i}))}).catch(o=>{n(Q_({id:e,error:o,locked:s}))})}}function y2(e){return(t,n)=>{t(Y_(e)),H().post(`/api/v1/accounts/${e}/unfollow`).then(r=>{t(_a({relationship:r.data,statuses:n().get("statuses")}))}).catch(r=>{t(X_({id:e,error:r}))})}}function S2(e){return(t,n)=>{t(IO(e)),H().post(`/api/v1/accounts/${e}/block`).then(r=>{t(Fn({relationship:r.data,statuses:n().get("statuses")}))}).catch(r=>{t(RO({id:e,error:r}))})}}function E2(e){return t=>{t(xO(e)),H().post(`/api/v1/accounts/${e}/unblock`).then(n=>{t(Z_({relationship:n.data}))}).catch(n=>{t(LO({id:e,error:n}))})}}function IO(e){return{type:sO,id:e}}function RO(e){return{type:oO,error:e}}function xO(e){return{type:aO,id:e}}function LO(e){return{type:uO,error:e}}function b2(e,t,n=0){return(r,i)=>{r(MO(e)),H().post(`/api/v1/accounts/${e}/mute`,{notifications:t,duration:n}).then(s=>{r(Un({relationship:s.data,statuses:i().get("statuses")}))}).catch(s=>{r(PO({id:e,error:s}))})}}function w2(e){return t=>{t(FO(e)),H().post(`/api/v1/accounts/${e}/unmute`).then(n=>{t(J_({relationship:n.data}))}).catch(n=>{t(UO({id:e,error:n}))})}}function MO(e){return{type:cO,id:e}}function PO(e){return{type:lO,error:e}}function FO(e){return{type:fO,id:e}}function UO(e){return{type:dO,error:e}}function T2(e){return t=>{t(kO(e)),H().get(`/api/v1/accounts/${e}/followers`).then(n=>{const r=Me(n).refs.find(i=>i.rel==="next");t(ae(n.data)),t(DO(e,n.data,r?r.uri:null)),t(Ve(n.data.map(i=>i.id)))}).catch(n=>{t(jO(e,n))})}}function kO(e){return{type:ig,id:e}}function DO(e,t,n){return{type:sg,id:e,accounts:t,next:n}}function jO(e,t){return{type:og,id:e,error:t,skipNotFound:!0}}function O2(e){return(t,n)=>{const r=n().getIn(["user_lists","followers",e,"next"]);r!==null&&(t($O(e)),H().get(r).then(i=>{const s=Me(i).refs.find(o=>o.rel==="next");t(ae(i.data)),t(qO(e,i.data,s?s.uri:null)),t(Ve(i.data.map(o=>o.id)))}).catch(i=>{t(BO(e,i))}))}}function $O(e){return{type:ag,id:e}}function qO(e,t,n){return{type:ug,id:e,accounts:t,next:n}}function BO(e,t){return{type:cg,id:e,error:t}}function C2(e){return t=>{t(HO(e)),H().get(`/api/v1/accounts/${e}/following`).then(n=>{const r=Me(n).refs.find(i=>i.rel==="next");t(ae(n.data)),t(VO(e,n.data,r?r.uri:null)),t(Ve(n.data.map(i=>i.id)))}).catch(n=>{t(zO(e,n))})}}function HO(e){return{type:lg,id:e}}function VO(e,t,n){return{type:fg,id:e,accounts:t,next:n}}function zO(e,t){return{type:dg,id:e,error:t,skipNotFound:!0}}function N2(e){return(t,n)=>{const r=n().getIn(["user_lists","following",e,"next"]);r!==null&&(t(WO(e)),H().get(r).then(i=>{const s=Me(i).refs.find(o=>o.rel==="next");t(ae(i.data)),t(GO(e,i.data,s?s.uri:null)),t(Ve(i.data.map(o=>o.id)))}).catch(i=>{t(KO(e,i))}))}}function WO(e){return{type:pg,id:e}}function GO(e,t,n){return{type:hg,id:e,accounts:t,next:n}}function KO(e,t){return{type:mg,id:e,error:t}}const QO=Hb((e,...t)=>{t.length!==0&&(e(YO(t)),H().get(`/api/v1/accounts/relationships?with_suspended=true&${t.map(n=>`id[]=${n}`).join("&")}`).then(n=>{e(ng({relationships:n.data}))}).catch(n=>{e(XO(n))}))},{delay:500});function Ve(e){return(t,n)=>{const r=n(),i=r.get("relationships"),s=e.filter(a=>i.get(a,null)===null);!r.getIn(["meta","me"])||s.length===0||QO(t,...s)}}function YO(e){return{type:gO,ids:e,skipLoading:!0}}function XO(e){return{type:vO,error:e,skipLoading:!0,skipNotFound:!0}}function ZO(){return e=>{e(JO()),H().get("/api/v1/follow_requests").then(t=>{const n=Me(t).refs.find(r=>r.rel==="next");e(ae(t.data)),e(eC(t.data,n?n.uri:null))}).catch(t=>e(tC(t)))}}function JO(){return{type:_g}}function eC(e,t){return{type:gg,accounts:e,next:t}}function tC(e){return{type:vg,error:e}}function A2(){return(e,t)=>{const n=t().getIn(["user_lists","follow_requests","next"]);n!==null&&(e(nC()),H().get(n).then(r=>{const i=Me(r).refs.find(s=>s.rel==="next");e(ae(r.data)),e(rC(r.data,i?i.uri:null))}).catch(r=>e(iC(r))))}}function nC(){return{type:yg}}function rC(e,t){return{type:Sg,accounts:e,next:t}}function iC(e){return{type:Eg,error:e}}function I2(e){return t=>{t(sC(e)),H().post(`/api/v1/follow_requests/${e}/authorize`).then(()=>t(ga({id:e}))).catch(n=>t(oC(e,n)))}}function sC(e){return{type:yO,id:e}}function oC(e,t){return{type:SO,id:e,error:t}}function R2(e){return t=>{t(aC(e)),H().post(`/api/v1/follow_requests/${e}/reject`).then(()=>t(va({id:e}))).catch(n=>t(uC(e,n)))}}function aC(e){return{type:EO,id:e}}function uC(e,t){return{type:bO,id:e,error:t}}function x2(e){return t=>{t(cC(e)),H().post(`/api/v1/accounts/${e}/pin`).then(n=>{t(eg({relationship:n.data})),t(Qi({accountId:at}))}).catch(n=>{t(lC(n))})}}function L2(e){return t=>{t(fC(e)),H().post(`/api/v1/accounts/${e}/unpin`).then(n=>{t(tg({relationship:n.data})),t(Qi({accountId:at}))}).catch(n=>{t(dC(n))})}}function cC(e){return{type:pO,id:e}}function lC(e){return{type:hO,error:e}}function fC(e){return{type:mO,id:e}}function dC(e){return{type:_O,error:e}}const M2=({displayName:e,note:t,avatar:n,header:r,discoverable:i,indexable:s})=>o=>{const a=new FormData;return a.append("display_name",e),a.append("note",t),n&&a.append("avatar",n),r&&a.append("header",r),a.append("discoverable",i),a.append("indexable",s),H().patch("/api/v1/accounts/update_credentials",a).then(u=>{o(yi(u.data))})},P2=e=>(t,n)=>{const r=n().accounts.getIn([e,"acct"]);r&&ct.push(`/@${r}`)};function yt(e,t){return e===t?0:e.length===t.length?e>t?1:-1:e.length>t.length?1:-1}const F2=Lt("markers/submit",async(e,{getState:t})=>{const n=wh(),r=bg(t());if(!(Object.keys(r).length===0||!n||n==="")){if("fetch"in window&&"keepalive"in new Request("")){await fetch("/api/v1/markers",{keepalive:!0,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(r)});return}else if("sendBeacon"in navigator){const i=new FormData;i.append("bearer_token",n);for(const[s,o]of Object.entries(r))o.last_read_id&&i.append(`${s}[last_read_id]`,o.last_read_id);if(navigator.sendBeacon("/api/v1/markers",i))return}try{const i=new XMLHttpRequest;i.open("POST","/api/v1/markers",!1),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Authorization",`Bearer ${n}`),i.send(JSON.stringify(r))}catch{}}});function pC(e){return e.notificationGroups.lastReadId}const bg=e=>{const t={},n=pC(e);return n&&yt(n,e.markers.notifications)>0&&(t.notifications={last_read_id:n}),t},wg=Lt("markers/submitAction",async(e,{getState:t})=>{var i,s;const n=wh(),r=bg(t());return Object.keys(r).length===0||!n||n===""?{home:void 0,notifications:void 0}:(await H().post("/api/v1/markers",r),{home:(i=r.home)==null?void 0:i.last_read_id,notifications:(s=r.notifications)==null?void 0:s.last_read_id})}),Kd=ol(e=>{e(wg())},3e5,{leading:!0,trailing:!0}),Xl=Lt("markers/submit",(e,{dispatch:t})=>{Kd(t),e.immediate&&Kd.flush()}),Tg=Lt("markers/fetch",async()=>({markers:(await H().get("/api/v1/markers",{params:{timeline:["notifications"]}})).data})),Zl=ee("notifications/update",({playSound:e,...t})=>({payload:t,meta:{sound:e?"boop":void 0}}));class zs{constructor(t=null){this.keyBase=t}generateKey(t){return this.keyBase?[this.keyBase,`id${t}`].join("."):t}set(t,n){const r=this.generateKey(t);try{const i=JSON.stringify(n);return localStorage.setItem(r,i),n}catch{return null}}get(t){const n=this.generateKey(t);try{const r=localStorage.getItem(n);return JSON.parse(r)}catch{return null}}remove(t){const n=this.get(t);if(n){const r=this.generateKey(t);try{localStorage.removeItem(r)}catch{}}return n}}const jo=new zs("mastodon_push_notification_data"),Og=new zs("mastodon_tag_history"),U2=new zs("mastodon_banner_settings"),Jl=new zs("mastodon_search_history"),tr=new zs("mastodon_player"),hC=e=>{const t=window.atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n},Cg="PUSH_NOTIFICATIONS_SET_BROWSER_SUPPORT",Ng="PUSH_NOTIFICATIONS_SET_SUBSCRIPTION",Ag="PUSH_NOTIFICATIONS_CLEAR_SUBSCRIPTION",Ig="PUSH_NOTIFICATIONS_SET_ALERTS";function mC(e){return{type:Cg,value:e}}function _C(e){return{type:Ng,subscription:e}}function gC(){return{type:Ag}}function k2(e,t){return n=>{n({type:Ig,path:e,value:t})}}const Rg=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/");return hC(n)},So=()=>document.querySelector('[name="applicationServerKey"]').getAttribute("content"),Qd=()=>navigator.serviceWorker.ready,Yd=e=>e.pushManager.getSubscription().then(t=>({registration:e,subscription:t})),Xd=e=>e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rg(So())}),Zd=({registration:e,subscription:t})=>t?t.unsubscribe().then(()=>e):e,Jd=e=>{const t={subscription:{...e.toJSON(),standard:!0}};if(at){const n=jo.get(at);n&&(t.data=n)}return H().post("/api/web/push_subscriptions",t).then(n=>n.data)},ep="serviceWorker"in navigator&&"PushManager"in window&&"getKey"in PushSubscription.prototype;function vC(){return(e,t)=>{if(e(mC(ep)),ep){if(!So()){console.error("The VAPID public key is not set. You will not be able to receive Web Push Notifications.");return}Qd().then(Yd).then(({registration:n,subscription:r})=>{if(r!==null){const i=new Uint8Array(r.options.applicationServerKey).toString(),s=Rg(So()).toString(),o=t().getIn(["push_notifications","subscription","endpoint"]);return s===i&&r.endpoint===o?r:Zd({registration:n,subscription:r}).then(Xd).then(a=>Jd(a))}return Xd(n).then(i=>Jd(i))}).then(n=>{n instanceof PushSubscription||(e(_C(n)),at&&jo.set(at,{alerts:n.alerts}))}).catch(n=>(n.code===20&&n.name==="AbortError"?console.warn("Your browser supports Web Push Notifications, but does not seem to implement the VAPID protocol."):n.code===5&&n.name==="InvalidCharacterError"&&console.error("The VAPID public key seems to be invalid:",So()),e(gC()),at&&jo.remove(at),Qd().then(Yd).then(Zd))).catch(console.warn)}else console.warn("Your browser does not support Web Push Notifications.")}}function D2(){return(e,t)=>{const n=t().get("push_notifications"),r=n.get("subscription"),s={alerts:n.get("alerts")};H().put(`/api/web/push_subscriptions/${r.get("id")}`,{data:s}).then(()=>{at&&jo.set(at,s)}).catch(console.warn)}}const xg="NOTIFICATIONS_FILTER_SET",Lg="NOTIFICATIONS_SET_BROWSER_SUPPORT",Mg="NOTIFICATIONS_SET_BROWSER_PERMISSION";function j2(e,t,n){return(r,i)=>{const s=i().getIn(["settings","notifications","alerts",e.type],!0),o=i().getIn(["settings","notifications","sounds",e.type],!0);let a=!1;if(["mention","status"].includes(e.type)&&e.status.filtered){const u=e.status.filtered.filter(l=>l.filter.context.includes("notifications"));if(u.some(l=>l.filter.filter_action==="hide"))return;a=u.length>0}if(["follow_request"].includes(e.type)&&r(ZO()),r(Xl()),r(yi(e.account)),r(Zl({notification:e,playSound:o&&!a})),typeof window.Notification<"u"&&s&&!a){const u=new GE(t[`notification.${e.type}`],n).format({name:e.account.display_name.length>0?e.account.display_name:e.account.username}),l=e.status&&e.status.spoiler_text.length>0?e.status.spoiler_text:Zo(e.status?e.status.content:""),c=new Notification(u,{body:l,icon:e.account.avatar,tag:e.id});c.addEventListener("click",()=>{window.focus(),c.close()})}}}const yC=()=>{};function $2(){return e=>{e(SC("Notification"in window)),"Notification"in window&&e(Nc(Notification.permission)),"Notification"in window&&"permissions"in navigator&&navigator.permissions.query({name:"notifications"}).then(t=>{t.onchange=()=>e(Nc(Notification.permission))}).catch(console.warn)}}function q2(e=yC){return t=>{Rb(n=>{t(Nc(n)),e(n),n==="granted"&&t(vC())})}}function SC(e){return{type:Lg,value:e}}function Nc(e){return{type:Mg,value:e}}const EC="CUSTOM_EMOJIS_FETCH_REQUEST",Pg="CUSTOM_EMOJIS_FETCH_SUCCESS",bC="CUSTOM_EMOJIS_FETCH_FAIL";function B2(){return e=>{e(wC()),H().get("/api/v1/custom_emojis").then(t=>{e(TC(t.data))}).catch(t=>{e(OC(t))})}}function wC(){return{type:EC,skipLoading:!0}}function TC(e){return{type:Pg,custom_emojis:e,skipLoading:!0}}function OC(e){return{type:bC,error:e,skipLoading:!0}}function CC(e,t){for(;e.length<t;)e="0"+e;return e}const NC=e=>{let t="";for(let n=0;n<e.length;n+=2)n>0&&(t+="-"),t+=CC(e.codePointAt(n).toString(16).toUpperCase(),4);return t},[tp,H2,AC,so,V2]=r0,Rn={};Object.keys(tp).forEach(e=>{const t=tp[e];if(!t)return;const[n,r]=t,[i,s,o,a]=r;Rn[e]={native:i,search:o,short_names:s?[e].concat(s):void 0,unified:a??NC(i)}});const IC=e=>{const t=[];let n=(r,i)=>{r&&(Array.isArray(r)?r:[r]).forEach(s=>{(i?s.split(/[-|_|\s]+/):[s]).forEach(o=>{o=o.toLowerCase(),t.indexOf(o)===-1&&t.push(o)})})};return n(e.short_names,!0),n(e.name,!0),n(e.keywords,!1),n(e.emoticons,!1),t.join(",")},RC=String,xC=RC.fromCodePoint||function(){let e=16384,t=[],n,r,i=-1,s=arguments.length;if(!s)return"";let o="";for(;++i<s;){let a=Number(arguments[i]);if(!isFinite(a)||a<0||a>1114111||Math.floor(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?t.push(a):(a-=65536,n=(a>>10)+55296,r=a%1024+56320,t.push(n,r)),(i+1===s||t.length>e)&&(o+=String.fromCharCode.apply(null,t),t.length=0)}return o},np=JSON,LC=/^(?::([^:]+):)(?::skin-tone-(\d):)?$/,MC=["1F3FA","1F3FB","1F3FC","1F3FD","1F3FE","1F3FF"];function PC(e){let t=e.split("-"),n=t.map(r=>`0x${r}`);return xC.apply(null,n)}function FC(e){let{name:t,short_names:n,skin_tone:r,skin_variations:i,emoticons:s,unified:o,custom:a,imageUrl:u}=e,l=e.id||n[0],c=`:${l}:`;return a?{id:l,name:t,colons:c,emoticons:s,custom:a,imageUrl:u}:(r&&(c+=`:skin-tone-${r}:`),{id:l,name:t,colons:c,emoticons:s,unified:o.toLowerCase(),skin:r||(i?1:null),native:PC(o)})}function Fg(){return FC(Ug(...arguments))}function Ug(e,t,n){let r={};if(typeof e=="string"){let i=e.match(LC);i&&(e=i[1],i[2]&&(t=parseInt(i[2]))),Object.hasOwn(so,e)&&(e=so[e]),Object.hasOwn(Rn,e)&&(r=Rn[e])}else e.id&&(Object.hasOwn(so,e.id)&&(e.id=so[e.id]),Object.hasOwn(Rn,e.id)&&(r=Rn[e.id],t=t||e.skin));if(Object.keys(r).length||(r=e,r.custom=!0,r.search||(r.search=IC(e))),r.emoticons=r.emoticons||[],r.variations=r.variations||[],r.skin_variations&&t>1&&n){r=JSON.parse(np.stringify(r));let i=MC[t-1],s=r.skin_variations[i];if(!s.variations&&r.variations&&delete r.variations,s[`has_img_${n}`]){r.skin_tone=t;for(let o in s){let a=s[o];r[o]=a}}}return r.variations&&r.variations.length&&(r=JSON.parse(np.stringify(r)),r.unified=r.variations.shift()),r}function Ac(e){return e.reduce((t,n)=>(t.indexOf(n)===-1&&t.push(n),t),[])}function UC(e,t){const n=Ac(e),r=Ac(t);return n.filter(i=>r.indexOf(i)>=0)}let Ic={},kg={},_s={},rp={},$o=[];for(let e in Rn){let t=Rn[e],{short_names:n,emoticons:r}=t,i=n[0];r&&r.forEach(s=>{rp[s]||(rp[s]=i)}),_s[i]=Fg(i),Ic[i]=t}function kC(e){$o.forEach(t=>{let n=t.id||t.short_names[0];delete e[n],delete _s[n]})}function ip(e,t){$o.length&&kC(t),e.forEach(n=>{let r=n.id||n.short_names[0];r&&!t[r]&&(t[r]=Ug(n),_s[r]=Fg(n))}),$o=e,kg={}}function Dg(e,{emojisToShowFilter:t,maxResults:n,include:r,exclude:i,custom:s}={}){s!==void 0?$o!==s&&ip(s,Ic):s=[],n=n||75,r=r||[],i=i||[];let o=null,a=Ic;if(e.length){if(e==="-"||e==="-1")return[_s[-1]];let u=e.toLowerCase().split(/[\s|,\-_]+/),l=[];if(u.length>2&&(u=[u[0],u[1]]),(r.length||i.length)&&(a={},AC.forEach(f=>{let d=r&&r.length?r.indexOf(f.name.toLowerCase())>-1:!0,p=i&&i.length?i.indexOf(f.name.toLowerCase())>-1:!1;!d||p||f.emojis.forEach(h=>a[h]=Rn[h])}),s.length)){let f=r&&r.length?r.indexOf("custom")>-1:!0,d=i&&i.length?i.indexOf("custom")>-1:!1;f&&!d&&ip(s,a)}const c=f=>{let d=a,p=kg,h=0;for(let _=0;_<f.length;_++){const g=f[_];if(h++,p[g]=p[g]||{},p=p[g],!p.results){let y={};p.results=[],p.pool={};for(let S in d){let b=d[S],{search:T}=b,I=f.slice(0,h),w=T.indexOf(I);if(w!==-1){let N=w+1;I===S&&(N=0),p.results.push(_s[S]),p.pool[S]=b,y[S]=N}}p.results.sort((S,b)=>{let T=y[S.id],I=y[b.id];return T-I})}d=p.pool}return p.results};u.length>1?o=c(e):o=[],l=u.map(c).filter(f=>f),l.length>1?l=UC.apply(null,l):l.length&&(l=l[0]),o=Ac(o.concat(l))}return o&&(t&&(o=o.filter(u=>t(Rn[u.id]))),o&&o.length>n&&(o=o.slice(0,n))),o}const oo=Ho({unexpectedTitle:{id:"alert.unexpected.title",defaultMessage:"Oops!"},unexpectedMessage:{id:"alert.unexpected.message",defaultMessage:"An unexpected error occurred."},rateLimitedTitle:{id:"alert.rate_limited.title",defaultMessage:"Rate limited"},rateLimitedMessage:{id:"alert.rate_limited.message",defaultMessage:"Please retry after {retry_time, time, medium}."}}),DC=ee("alerts/dismiss"),jC=ee("alerts/clear"),yr=ee("alerts/show"),sp=ee("alerts/ignore"),gs=(e,t=!1)=>{if(e instanceof ja&&e.response){const{status:n,statusText:r,headers:i}=e.response,{data:s}=e.response;return t&&(n===404||n===410)?sp():n===429&&i["x-ratelimit-reset"]?yr({title:oo.rateLimitedTitle,message:oo.rateLimitedMessage,values:{retry_time:new Date(i["x-ratelimit-reset"])}}):yr({title:`${n}`,message:s.error??r})}return e instanceof ja&&e.code===ja.ECONNABORTED?sp():(console.error(e),yr({title:oo.unexpectedTitle,message:oo.unexpectedMessage}))},jg="SETTING_CHANGE",$g="SETTING_SAVE";function z2(e,t){return n=>{n({type:jg,path:e,value:t}),n(xr())}}const $C=ol((e,t)=>{if(t().getIn(["settings","saved"])||!t().getIn(["meta","me"]))return;const n=t().get("settings").filter((r,i)=>i!=="saved").toJS();H().put("/api/web/settings",{data:n}).then(()=>e({type:$g})).catch(r=>e(gs(r)))},2e3,{leading:!0,trailing:!0});function xr(){return(e,t)=>$C(e,t)}const qg="EMOJI_USE";function qC(e){return t=>{t({type:qg,emoji:e}),t(xr())}}const Ws=ee("MODAL_OPEN"),BC=ee("MODAL_CLOSE"),Bg=ee("timeline/disconnect",({timeline:e})=>({payload:{timeline:e,usePendingItems:Yn}})),or=ee("timelines/delete"),ef="TIMELINE_UPDATE",Hg="TIMELINE_CLEAR",Vg="TIMELINE_EXPAND_REQUEST",zg="TIMELINE_EXPAND_SUCCESS",Wg="TIMELINE_EXPAND_FAIL",Gg="TIMELINE_SCROLL_TOP",Kg="TIMELINE_LOAD_PENDING",Qg="TIMELINE_CONNECT",Yg="TIMELINE_MARK_AS_PARTIAL",Xg="TIMELINE_INSERT",Zg="inline-follow-suggestions",vs=null,W2=e=>({type:Kg,timeline:e});function HC(e,t,n){return(r,i)=>{typeof n=="function"&&!n(t)||i().getIn(["timelines",e,"isPartial"])||(r(Pt(t)),r({type:ef,timeline:e,status:t,usePendingItems:Yn}),e==="home"&&r(Xl()))}}function VC(e){return(t,n)=>{const r=n().getIn(["statuses",e,"account"]),i=n().get("statuses").filter(o=>o.get("reblog")===e).map(o=>o.get("id")).valueSeq().toJSON(),s=n().getIn(["statuses",e,"reblog"],null);t(or({statusId:e,accountId:r,references:i,reblogOf:s}))}}function G2(e){return t=>{t({type:Hg,timeline:e})}}const lu=(e={},t)=>(e[t]||[]).map(n=>n.value);function Sn(e,t,n={}){return async(r,i)=>{const s=i().getIn(["timelines",e],V()),o=!!n.max_id;if(s.get("isLoading"))return;if(!n.max_id&&!n.pinned&&s.get("items",J()).size+s.get("pendingItems",J()).size>0){const u=s.getIn(["pendingItems",0]),l=s.getIn(["items",0]);u&&l&&yt(u,l)>0?n.since_id=u:n.since_id=l||u}const a=!!n.since_id;r(zC(e,o));try{const u=await H().get(t,{params:n}),l=Me(u).refs.find(c=>c.rel==="next");if(r(He(u.data)),r(WC(e,u.data,l?l.uri:null,u.status===206,a,o,a&&Yn)),e==="home"&&!o&&!a){const c=new Date,f=u.data.findIndex(d=>c-new Date(d.created_at)>4*3600*1e3);f!==-1&&r(KC(e,Zg,Math.max(1,f)))}e==="home"&&r(Xl())}catch(u){r(GC(e,u,o))}}}function ya(e,t,n={}){return async(r,i)=>{const o=i().getIn(["timelines",e],V()).get("items"),u=o.map((l,c)=>l===null?c:null).map(l=>l>0?o.get(l-1):null);for(const l of u.take(2))await r(Sn(e,t,{...n,maxId:l}))}}const K2=({maxId:e}={})=>Sn("home","/api/v1/timelines/home",{max_id:e}),Q2=({maxId:e,onlyMedia:t,onlyRemote:n}={})=>Sn(`public${n?":remote":""}${t?":media":""}`,"/api/v1/timelines/public",{remote:!!n,max_id:e,only_media:!!t}),Y2=({maxId:e,onlyMedia:t}={})=>Sn(`community${t?":media":""}`,"/api/v1/timelines/public",{local:!0,max_id:e,only_media:!!t}),X2=(e,{maxId:t,withReplies:n,tagged:r}={})=>Sn(`account:${e}${n?":with_replies":""}${r?`:${r}`:""}`,`/api/v1/accounts/${e}/statuses`,{exclude_replies:!n,exclude_reblogs:n,tagged:r,max_id:t}),Z2=(e,{tagged:t}={})=>Sn(`account:${e}:pinned${t?`:${t}`:""}`,`/api/v1/accounts/${e}/statuses`,{pinned:!0,tagged:t}),J2=(e,{maxId:t}={})=>Sn(`account:${e}:media`,`/api/v1/accounts/${e}/statuses`,{max_id:t,only_media:!0,limit:40}),ek=(e,{maxId:t}={})=>Sn(`list:${e}`,`/api/v1/timelines/list/${e}`,{max_id:t}),tk=(e,{maxId:t}={})=>Sn(`link:${e}`,"/api/v1/timelines/link",{url:e,max_id:t}),nk=(e,{maxId:t,tags:n,local:r}={})=>Sn(`hashtag:${e}${r?":local":""}`,`/api/v1/timelines/tag/${e}`,{max_id:t,any:lu(n,"any"),all:lu(n,"all"),none:lu(n,"none"),local:r}),rk=()=>ya("home","/api/v1/timelines/home",{}),ik=({onlyMedia:e,onlyRemote:t}={})=>ya(`public${t?":remote":""}${e?":media":""}`,"/api/v1/timelines/public",{remote:!!t,only_media:!!e}),sk=({onlyMedia:e}={})=>ya(`community${e?":media":""}`,"/api/v1/timelines/public",{local:!0,only_media:!!e}),ok=e=>ya(`list:${e}`,`/api/v1/timelines/list/${e}`,{});function zC(e,t){return{type:Vg,timeline:e,skipLoading:!t}}function WC(e,t,n,r,i,s,o){return{type:zg,timeline:e,statuses:t,next:n,partial:r,isLoadingRecent:i,usePendingItems:o,skipLoading:!s}}function GC(e,t,n){return{type:Wg,timeline:e,error:t,skipLoading:!n,skipNotFound:e.startsWith("account:")}}function ak(e,t){return{type:Gg,timeline:e,top:t}}function uk(e){return{type:Qg,timeline:e,usePendingItems:Yn}}const ck=e=>({type:Yg,timeline:e}),KC=(e,t,n)=>({type:Xg,timeline:e,index:n,key:t});let mr,Li;const Jg="COMPOSE_CHANGE",ev="COMPOSE_SUBMIT_REQUEST",tv="COMPOSE_SUBMIT_SUCCESS",nv="COMPOSE_SUBMIT_FAIL",rv="COMPOSE_REPLY",iv="COMPOSE_REPLY_CANCEL",sv="COMPOSE_DIRECT",ov="COMPOSE_MENTION",av="COMPOSE_RESET",uv="COMPOSE_UPLOAD_REQUEST",cv="COMPOSE_UPLOAD_SUCCESS",lv="COMPOSE_UPLOAD_FAIL",fv="COMPOSE_UPLOAD_PROGRESS",dv="COMPOSE_UPLOAD_PROCESSING",pv="COMPOSE_UPLOAD_UNDO",hv="THUMBNAIL_UPLOAD_REQUEST",mv="THUMBNAIL_UPLOAD_SUCCESS",_v="THUMBNAIL_UPLOAD_FAIL",gv="THUMBNAIL_UPLOAD_PROGRESS",vv="COMPOSE_SUGGESTIONS_CLEAR",Sa="COMPOSE_SUGGESTIONS_READY",yv="COMPOSE_SUGGESTION_SELECT",Sv="COMPOSE_SUGGESTION_IGNORE",Ev="COMPOSE_SUGGESTION_TAGS_UPDATE",bv="COMPOSE_TAG_HISTORY_UPDATE",wv="COMPOSE_MOUNT",Tv="COMPOSE_UNMOUNT",QC="COMPOSE_SENSITIVITY_CHANGE",Ov="COMPOSE_SPOILERNESS_CHANGE",Cv="COMPOSE_SPOILER_TEXT_CHANGE",Nv="COMPOSE_VISIBILITY_CHANGE",Av="COMPOSE_COMPOSING_CHANGE",tf="COMPOSE_LANGUAGE_CHANGE",Iv="COMPOSE_EMOJI_INSERT",Rv="COMPOSE_POLL_ADD",xv="COMPOSE_POLL_REMOVE",Lv="COMPOSE_POLL_OPTION_CHANGE",Mv="COMPOSE_POLL_SETTINGS_CHANGE",Pv="COMPOSE_CHANGE_MEDIA_ORDER",Fv="COMPOSE_SET_STATUS",YC="COMPOSE_FOCUS",Yi=Ho({uploadErrorLimit:{id:"upload_error.limit",defaultMessage:"File upload limit exceeded."},uploadErrorPoll:{id:"upload_error.poll",defaultMessage:"File upload not allowed with polls."},open:{id:"compose.published.open",defaultMessage:"Open"},published:{id:"compose.published.body",defaultMessage:"Post published."},saved:{id:"compose.saved.body",defaultMessage:"Post saved."}}),Gs=e=>{e().getIn(["compose","mounted"])||ct.push("/publish")};function XC(e,t,n){return{type:Fv,status:e,text:t,spoiler_text:n}}function lk(e){return{type:Jg,text:e}}function ZC(e){return(t,n)=>{t({type:rv,status:e}),Gs(n)}}function fk(e){return(t,n)=>{const r=n(),i=r.statuses.get(e);if(i){const s=r.accounts.get(i.get("account"));t(ZC(i.set("account",s)))}}}function dk(){return{type:iv}}function pk(){return{type:av}}function JC(e){return(t,n)=>{t({type:ov,account:e}),Gs(n)}}function hk(e){return(t,n)=>{t(JC(n().accounts.get(e)))}}function mk(e){return(t,n)=>{t({type:sv,account:e}),Gs(n)}}function _k(){return function(e,t){const n=t().getIn(["compose","text"],""),r=t().getIn(["compose","media_attachments"]),i=t().getIn(["compose","id"],null);if((!n||!n.length)&&r.size===0)return;e(eN());let s;i!==null&&(s=r.map(o=>{let a;return o.getIn(["meta","focus"])&&(a=`${o.getIn(["meta","focus","x"]).toFixed(2)},${o.getIn(["meta","focus","y"]).toFixed(2)}`),{id:o.get("id"),description:o.get("description"),focus:a}})),H().request({url:i===null?"/api/v1/statuses":`/api/v1/statuses/${i}`,method:i===null?"post":"put",data:{status:n,in_reply_to_id:t().getIn(["compose","in_reply_to"],null),media_ids:r.map(o=>o.get("id")),media_attributes:s,sensitive:t().getIn(["compose","sensitive"]),spoiler_text:t().getIn(["compose","spoiler"])?t().getIn(["compose","spoiler_text"],""):"",visibility:t().getIn(["compose","privacy"]),poll:t().getIn(["compose","poll"],null),language:t().getIn(["compose","language"])},headers:{"Idempotency-Key":t().getIn(["compose","idempotencyKey"])}}).then(function(o){(ct.location.pathname==="/publish"||ct.location.pathname==="/statuses/new")&&window.history.state&&ct.goBack(),e(vN(o.data.tags,n)),e(tN({...o.data}));const a=u=>{const l=t().getIn(["timelines",u]);l&&l.get("items").size>0&&l.getIn(["items",0])!==null&&l.get("online")&&e(HC(u,{...o.data}))};i&&e(Pt({...o.data})),i===null&&o.data.visibility!=="direct"&&a("home"),i===null&&o.data.in_reply_to_id===null&&o.data.visibility==="public"&&(a("community"),a("public"),a(`account:${o.data.account.id}`)),e(yr({message:i===null?Yi.published:Yi.saved,action:Yi.open,dismissAfter:1e4,onClick:()=>ct.push(`/@${o.data.account.username}/${o.data.id}`)}))}).catch(function(o){e(nN(o))})}}function eN(){return{type:ev}}function tN(e){return{type:tv,status:e}}function nN(e){return{type:nv,error:e}}function gk(e){return function(t,n){const r=n().getIn(["server","server","configuration","statuses","max_media_attachments"]),i=n().getIn(["compose","media_attachments"]),s=n().getIn(["compose","pending_media_attachments"]),o=new Array(e.length).fill(0);let a=Array.from(e).reduce((u,l)=>u+l.size,0);if(e.length+i.size+s>r){t(yr({message:Yi.uploadErrorLimit}));return}if(n().getIn(["compose","poll"])){t(yr({message:Yi.uploadErrorPoll}));return}t(uN());for(const[u,l]of Array.from(e).entries()){if(i.size+u>r-1)break;const c=new FormData;c.append("file",l),H().post("/api/v2/media",c,{onUploadProgress:function({loaded:f}){o[u]=f,t(cN(o.reduce((d,p)=>d+p,0),a))}}).then(({status:f,data:d})=>{if(f===200)t(op(d,l));else if(f===202){t(rN());let p=1;const h=()=>{H().get(`/api/v1/media/${d.id}`).then(_=>{if(_.status===200)t(op(_.data,l));else if(_.status===206){const g=(Math.log2(p)||1)*1e3;p+=1,setTimeout(()=>h(),g)}}).catch(_=>t(ap(_)))};h()}}).catch(f=>t(ap(f)))}}}const rN=()=>({type:dv}),vk=(e,t)=>n=>{n(iN());const r=t.size,i=new FormData;i.append("thumbnail",t),H().put(`/api/v1/media/${e}`,i,{onUploadProgress:({loaded:s})=>{n(sN(s,r))}}).then(({data:s})=>{n(oN(s))}).catch(s=>{n(aN(e))})},iN=()=>({type:hv,skipLoading:!0}),sN=(e,t)=>({type:gv,loaded:e,total:t,skipLoading:!0}),oN=e=>({type:mv,media:e,skipLoading:!0}),aN=e=>({type:_v,error:e,skipLoading:!0});function uN(){return{type:uv,skipLoading:!0}}function cN(e,t){return{type:fv,loaded:e,total:t}}function op(e,t){return{type:cv,media:e,file:t,skipLoading:!0}}function ap(e){return{type:lv,error:e,skipLoading:!0}}function yk(e){return{type:pv,media_id:e}}function Sk(){return mr&&mr.abort(),{type:vv}}const lN=Hc((e,t,n)=>{mr&&mr.abort(),mr=new AbortController,H().get("/api/v1/accounts/search",{signal:mr.signal,params:{q:n.slice(1),resolve:!1,limit:4}}).then(r=>{e(ae(r.data)),e(hN(n,r.data))}).catch(r=>{Oh.isCancel(r)||e(gs(r))}).finally(()=>{mr=void 0})},200,{leading:!0,trailing:!0}),fN=(e,t,n)=>{const r=Dg(n.replace(":",""),{maxResults:5});e(pN(n,r))},dN=Hc((e,t,n)=>{Li&&Li.abort(),e(_N(n)),Li=new AbortController,H().get("/api/v2/search",{signal:Li.signal,params:{type:"hashtags",q:n.slice(1),resolve:!1,limit:4,exclude_unreviewed:!0}}).then(({data:r})=>{e(mN(n,r.hashtags))}).catch(r=>{Oh.isCancel(r)||e(gs(r))}).finally(()=>{Li=void 0})},200,{leading:!0,trailing:!0});function Ek(e){return(t,n)=>{switch(e[0]){case":":fN(t,n,e);break;case"#":dN(t,n,e);break;default:lN(t,n,e);break}}}function pN(e,t){return{type:Sa,token:e,emojis:t}}function hN(e,t){return{type:Sa,token:e,accounts:t}}const mN=(e,t)=>({type:Sa,token:e,tags:t});function bk(e,t,n,r){return(i,s)=>{let o,a;n.type==="emoji"?(o=n.native||n.colons,a=e-1,i(qC(n))):n.type==="hashtag"?(o=`#${n.name}`,a=e-1):n.type==="account"&&(o=s().getIn(["accounts",n.id,"acct"]),a=e),n.type!=="hashtag"||t.slice(1).localeCompare(n.name,void 0,{sensitivity:"accent"})!==0?i({type:yv,position:a,token:t,completion:o,path:r}):i({type:Sv,position:a,token:t,completion:o,path:r})}}function _N(e){return{type:Ev,token:e}}function Uv(e){return{type:bv,tags:e}}function gN(){return(e,t)=>{const n=t().getIn(["meta","me"]),r=Og.get(n);r!==null&&e(Uv(r))}}function vN(e,t){return(n,r)=>{const i=r(),s=i.getIn(["compose","tagHistory"]),o=i.getIn(["meta","me"]),a=e.map(c=>{const f=t.match(new RegExp(`#${c.name}`,"i"));return f&&f.length>0?f[0].slice(1):c.name}),u=s.filter(c=>a.findIndex(f=>f.toLowerCase()===c.toLowerCase())===-1);a.push(...u.toJS());const l=a.slice(0,1e3);Og.set(o,l),n(Uv(l))}}function wk(){return{type:wv}}function Tk(){return{type:Tv}}const Ok=e=>({type:tf,language:e});function Ck(){return{type:Ov}}function Nk(e){return{type:Cv,text:e}}function Ak(e){return{type:Nv,value:e}}function Ik(e,t,n){return{type:Iv,position:e,emoji:t,needsSpace:n}}function Rk(e){return{type:Av,value:e}}function xk(){return{type:Rv}}function Lk(){return{type:xv}}function Mk(e,t,n){return{type:Lv,index:e,title:t,maxOptions:n}}function Pk(e,t){return{type:Mv,expiresIn:e,isMultiple:t}}const Fk=(e,t)=>({type:Pv,a:e,b:t}),nf=e=>Gt("v2/search",{...e}),fu=fe("search/submit",async({q:e,type:t},{getState:n})=>{const r=!!n().meta.get("me");return nf({q:e,type:t,resolve:r,limit:11})},(e,{dispatch:t})=>(e.accounts.length>0&&(t(ae(e.accounts)),t(Ve(e.accounts.map(n=>n.id)))),e.statuses.length>0&&t(He(e.statuses)),e),{useLoadingBar:!1}),du=fe("search/expand",async({type:e},{getState:t})=>{const n=t().search.q,r=t().search.results,i=r==null?void 0:r[e].length;return nf({q:n,type:e,limit:10,offset:i})},(e,{dispatch:t})=>(e.accounts.length>0&&(t(ae(e.accounts)),t(Ve(e.accounts.map(n=>n.id)))),e.statuses.length>0&&t(He(e.statuses)),e),{useLoadingBar:!0}),Uk=fe("search/openURL",({url:e})=>nf({q:e,resolve:!0,limit:1}),(e,{dispatch:t})=>(e.accounts.length>0?t(ae(e.accounts)):e.statuses.length>0&&t(He(e.statuses)),e),{useLoadingBar:!0}),kk=Lt("search/clickResult",({q:e,type:t},{dispatch:n,getState:r})=>{const i=r().search.recent;if(i.some(a=>a.q===e&&a.type===t))return;const s=r().meta.get("me"),o=[{type:t,q:e},...i].slice(0,4);Jl.set(s,o),n(Ea(o))}),Dk=Lt("search/forgetResult",({q:e,type:t},{dispatch:n,getState:r})=>{const i=r().search.recent,s=r().meta.get("me"),o=i.filter(a=>a.q!==e||a.type!==t);Jl.set(s,o),n(Ea(o))}),Ea=ee("search/updateHistory"),yN=Lt("search/hydrate",(e,{dispatch:t,getState:n})=>{const r=n().meta.get("me"),i=Jl.get(r);i!==null&&t(Ea(i))}),Si="STORE_HYDRATE",SN=e=>ve(e,(t,n)=>Ge(n)?n.toList():n.toMap());function jk(e){return t=>{const n=SN(e);t({type:Si,state:n}),t(gN()),t(yN()),t(ae(Object.values(e.accounts)))}}const kv="ANNOUNCEMENTS_FETCH_REQUEST",Dv="ANNOUNCEMENTS_FETCH_SUCCESS",jv="ANNOUNCEMENTS_FETCH_FAIL",$v="ANNOUNCEMENTS_UPDATE",qv="ANNOUNCEMENTS_DELETE",EN="ANNOUNCEMENTS_DISMISS_REQUEST",Bv="ANNOUNCEMENTS_DISMISS_SUCCESS",bN="ANNOUNCEMENTS_DISMISS_FAIL",Hv="ANNOUNCEMENTS_REACTION_ADD_REQUEST",wN="ANNOUNCEMENTS_REACTION_ADD_SUCCESS",Vv="ANNOUNCEMENTS_REACTION_ADD_FAIL",zv="ANNOUNCEMENTS_REACTION_REMOVE_REQUEST",TN="ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS",Wv="ANNOUNCEMENTS_REACTION_REMOVE_FAIL",Gv="ANNOUNCEMENTS_REACTION_UPDATE",Kv="ANNOUNCEMENTS_TOGGLE_SHOW",ON=()=>{},$k=(e=ON)=>t=>{t(CN()),H().get("/api/v1/announcements").then(n=>{t(NN(n.data.map(r=>V_(r))))}).catch(n=>{t(AN(n))}).finally(()=>{e()})},CN=()=>({type:kv,skipLoading:!0}),NN=e=>({type:Dv,announcements:e,skipLoading:!0}),AN=e=>({type:jv,error:e,skipLoading:!0,skipAlert:!0}),qk=e=>({type:$v,announcement:V_(e)}),Bk=e=>t=>{t(IN(e)),H().post(`/api/v1/announcements/${e}/dismiss`).then(()=>{t(RN(e))}).catch(n=>{t(xN(e,n))})},IN=e=>({type:EN,id:e}),RN=e=>({type:Bv,id:e}),xN=(e,t)=>({type:bN,id:e,error:t}),Hk=(e,t)=>(n,r)=>{const i=r().getIn(["announcements","items"]).find(o=>o.get("id")===e);let s=!1;if(i){const o=i.get("reactions").find(a=>a.get("name")===t);o&&o.get("me")&&(s=!0)}s||n(LN(e,t)),H().put(`/api/v1/announcements/${e}/reactions/${encodeURIComponent(t)}`).then(()=>{n(MN(e,t))}).catch(o=>{s||n(PN(e,t,o))})},LN=(e,t)=>({type:Hv,id:e,name:t,skipLoading:!0}),MN=(e,t)=>({type:wN,id:e,name:t,skipLoading:!0}),PN=(e,t,n)=>({type:Vv,id:e,name:t,error:n,skipLoading:!0}),Vk=(e,t)=>n=>{n(FN(e,t)),H().delete(`/api/v1/announcements/${e}/reactions/${encodeURIComponent(t)}`).then(()=>{n(UN(e,t))}).catch(r=>{n(kN(e,t,r))})},FN=(e,t)=>({type:zv,id:e,name:t,skipLoading:!0}),UN=(e,t)=>({type:TN,id:e,name:t,skipLoading:!0}),kN=(e,t,n)=>({type:Wv,id:e,name:t,error:n,skipLoading:!0}),zk=e=>({type:Gv,reaction:e}),Wk=()=>({type:Kv}),Gk=e=>({type:qv,id:e}),Qv="CONVERSATIONS_MOUNT",Yv="CONVERSATIONS_UNMOUNT",Xv="CONVERSATIONS_FETCH_REQUEST",Zv="CONVERSATIONS_FETCH_SUCCESS",Jv="CONVERSATIONS_FETCH_FAIL",ey="CONVERSATIONS_UPDATE",ty="CONVERSATIONS_READ",DN="CONVERSATIONS_DELETE_REQUEST",ny="CONVERSATIONS_DELETE_SUCCESS",jN="CONVERSATIONS_DELETE_FAIL",Kk=()=>({type:Qv}),Qk=()=>({type:Yv}),Yk=e=>t=>{t({type:ty,id:e}),H().post(`/api/v1/conversations/${e}/read`)},Xk=({maxId:e}={})=>(t,n)=>{t($N());const r={max_id:e};e||(r.since_id=n().getIn(["conversations","items",0,"last_status"]));const i=!!r.since_id;H().get("/api/v1/conversations",{params:r}).then(s=>{const o=Me(s).refs.find(a=>a.rel==="next");t(ae(s.data.reduce((a,u)=>a.concat(u.accounts),[]))),t(He(s.data.map(a=>a.last_status).filter(a=>!!a))),t(qN(s.data,o?o.uri:null,i))}).catch(s=>t(BN(s)))},$N=()=>({type:Xv}),qN=(e,t,n)=>({type:Zv,conversations:e,next:t,isLoadingRecent:n}),BN=e=>({type:Jv,error:e}),Zk=e=>t=>{t(ae(e.accounts)),e.last_status&&t(Pt(e.last_status)),t({type:ey,conversation:e})},Jk=e=>t=>{t(HN(e)),H().delete(`/api/v1/conversations/${e}`).then(()=>t(VN(e))).catch(n=>t(zN(e,n)))},HN=e=>({type:DN,id:e}),VN=e=>({type:ny,id:e}),zN=(e,t)=>({type:jN,id:e,error:t}),ry=async(e,t)=>{const n=await H().request({method:"GET",url:t??"/api/v1/notifications",params:e});return{notifications:n.data,links:Me(n)}},rf=async e=>{const t=await H().request({method:"GET",url:"/api/v2/notifications",params:e}),{statuses:n,accounts:r,notification_groups:i}=t.data;return{statuses:n,accounts:r,notifications:i,links:Me(t)}},WN=()=>t0("POST","v1/notifications/clear"),iy=async(e,t)=>{const n=await H().request({method:"GET",url:t??"/api/v1/notifications/requests",params:e});return{requests:n.data,links:Me(n)}},GN=async e=>Gt(`v1/notifications/requests/${e}`),KN=async e=>an(`v1/notifications/requests/${e}/accept`),QN=async e=>an(`v1/notifications/requests/${e}/dismiss`),YN=async e=>an("v1/notifications/requests/accept",{id:e}),XN=async e=>an("v1/notifications/requests/dismiss",{id:e}),ZN=["follow","follow_request","favourite","reblog","mention","poll","status","update","admin.sign_up","admin.report","moderation_warning","severed_relationships","annual_report"],sy=ra([e=>e.settings.getIn(["notifications","shows"])],e=>e.toJS()),JN=ra([sy],e=>Object.entries(e).filter(([t,n])=>!n).map(([t,n])=>t)),eD=e=>e.settings.getIn(["notifications","quickFilter","show"]),oy=e=>e.settings.getIn(["notifications","quickFilter","active"]),tD=e=>e.settings.getIn(["notifications","quickFilter","advanced"]),nD=e=>e.settings.getIn(["notifications","showUnread"]),rD=e=>e.settings.getIn(["notifications","alerts"]).includes(!0)&&e.notifications.get("browserSupport")&&e.notifications.get("browserPermission")==="default"&&!e.settings.getIn(["notifications","dismissPermissionBanner"]),iD=e=>e.settings.getIn(["notifications","minimizeFilteredBanner"]),eA=e=>e.settings.getIn(["notifications","group","follow"]);function tA(e){return ZN.filter(t=>t!==e)}function sf(e){const t=oy(e);return t==="all"?JN(e):tA(t)}function ba(e,t){const n=[],r=[];t.forEach(i=>{i.type==="admin.report"&&n.push(i.report.target_account),i.type==="moderation_warning"&&n.push(i.moderation_warning.target_account),"status"in i&&i.status&&r.push(i.status)}),n.length>0&&e(ae(n)),r.length>0&&e(He(r))}function wa(e){const t=["favourite","reblog"];return eA(e)&&t.push("follow"),t}const Sr=fe("notificationGroups/fetch",async(e,{getState:t})=>rf({grouped_types:wa(t()),exclude_types:sf(t())}),({notifications:e,accounts:t,statuses:n},{dispatch:r})=>{var s;r(ae(t)),r(He(n)),ba(r,e);const i=e;return e.length>1&&i.push({type:"gap",maxId:(s=e.at(-1))==null?void 0:s.page_min_id}),i}),pu=fe("notificationGroups/fetchGap",async(e,{getState:t})=>rf({grouped_types:wa(t()),max_id:e.gap.maxId,exclude_types:sf(t())}),({notifications:e,accounts:t,statuses:n},{dispatch:r})=>(r(ae(t)),r(He(n)),ba(r,e),{notifications:e})),hu=fe("notificationGroups/pollRecentNotifications",async(e,{getState:t})=>{var n;return rf({grouped_types:wa(t()),max_id:void 0,exclude_types:sf(t()),since_id:Yn?(n=t().notificationGroups.groups.find(r=>r.type!=="gap"))==null?void 0:n.page_max_id:void 0})},({notifications:e,accounts:t,statuses:n},{dispatch:r})=>(r(ae(t)),r(He(n)),ba(r,e),{notifications:e}),{useLoadingBar:!1}),nA=Lt("notificationGroups/processNew",(e,{dispatch:t,getState:n})=>{var a;const r=n(),i=oy(r),s=sy(r);if((i==="all"?s[e.type]!==!1:i===e.type)&&!((e.type==="mention"||e.type==="update")&&((a=e.status)!=null&&a.filtered)&&e.status.filtered.filter(l=>l.filter.context.includes("notifications")).some(l=>l.filter.filter_action==="hide")))return ba(t,[e]),{notification:e,groupedTypes:wa(r)}}),rA=ee("notificationGroups/loadPending"),iA=Lt("notificationGroups/updateScrollPosition",({top:e},{dispatch:t,getState:n})=>(e&&n().notificationGroups.mergedNotifications==="needs-reload"&&t(Sr()),{top:e})),sD=Lt("notifications/filter/set",({filterType:e},{dispatch:t})=>{t({type:xg,path:["notifications","quickFilter","active"],value:e}),t(Sr()),t(xr())}),sA=fe("notifications/clear",()=>WN()),oA=ee("notificationGroups/markAsRead"),aA=Lt("notificationGroups/mount",(e,{dispatch:t,getState:n})=>{const r=n();r.notificationGroups.mounted===0&&r.notificationGroups.mergedNotifications==="needs-reload"&&t(Sr())}),uA=ee("notificationGroups/unmount"),cA=Lt("notificationGroups/refreshStale",(e,{dispatch:t,getState:n})=>{const r=n();return r.notificationGroups.scrolledToTop||!r.notificationGroups.mounted?(t(Sr()),{deferredRefresh:!1}):{deferredRefresh:!0}}),lA=e=>Gt(`v1/statuses/${e}/context`),ay=fe("status/context",({statusId:e})=>lA(e),(e,{dispatch:t})=>{const n=e.ancestors.concat(e.descendants);return t(He(n)),{context:e}}),uy="STATUS_FETCH_REQUEST",fA="STATUS_FETCH_SUCCESS",cy="STATUS_FETCH_FAIL",dA="STATUS_DELETE_REQUEST",pA="STATUS_DELETE_SUCCESS",hA="STATUS_DELETE_FAIL",mA="STATUS_MUTE_REQUEST",ly="STATUS_MUTE_SUCCESS",_A="STATUS_MUTE_FAIL",gA="STATUS_UNMUTE_REQUEST",fy="STATUS_UNMUTE_SUCCESS",vA="STATUS_UNMUTE_FAIL",dy="STATUS_REVEAL",py="STATUS_HIDE",hy="STATUS_COLLAPSE",my="REDRAFT",yA="STATUS_FETCH_SOURCE_REQUEST",SA="STATUS_FETCH_SOURCE_SUCCESS",EA="STATUS_FETCH_SOURCE_FAIL",bA="STATUS_TRANSLATE_REQUEST",of="STATUS_TRANSLATE_SUCCESS",wA="STATUS_TRANSLATE_FAIL",af="STATUS_TRANSLATE_UNDO";function TA(e,t){return{type:uy,id:e,skipLoading:t}}function oD(e,t=!1,n=!0){return(r,i)=>{const s=!t&&i().getIn(["statuses",e],null)!==null;n&&r(ay({statusId:e})),!s&&(r(TA(e,s)),H().get(`/api/v1/statuses/${e}`).then(o=>{r(Pt(o.data)),r(OA(s))}).catch(o=>{r(CA(e,o,s))}))}}function OA(e){return{type:fA,skipLoading:e}}function CA(e,t,n){return{type:cy,id:e,error:t,skipLoading:n,skipAlert:!0}}function NA(e,t){return{type:my,status:e,raw_text:t}}const aD=e=>(t,n)=>{let r=n().getIn(["statuses",e]);r.get("poll")&&(r=r.set("poll",n().getIn(["polls",r.get("poll")]))),t(AA()),H().get(`/api/v1/statuses/${e}/source`).then(i=>{t(IA()),Gs(n),t(XC(r,i.data.text,i.data.spoiler_text))}).catch(i=>{t(RA(i))})},AA=()=>({type:yA}),IA=()=>({type:SA}),RA=e=>({type:EA,error:e});function uD(e,t=!1){return(n,r)=>{let i=r().getIn(["statuses",e]);i.get("poll")&&(i=i.set("poll",r().getIn(["polls",i.get("poll")]))),n(xA(e)),H().delete(`/api/v1/statuses/${e}`,{params:{delete_media:!t}}).then(s=>{n(LA(e)),n(VC(e)),n(yi(s.data.account)),t&&(n(NA(i,s.data.text)),Gs(r))}).catch(s=>{n(MA(e,s))})}}function xA(e){return{type:dA,id:e}}function LA(e){return{type:pA,id:e}}function MA(e,t){return{type:hA,id:e,error:t}}const cD=e=>t=>t(Pt(e));function lD(e){return t=>{t(PA(e)),H().post(`/api/v1/statuses/${e}/mute`).then(()=>{t(FA(e))}).catch(n=>{t(UA(e,n))})}}function PA(e){return{type:mA,id:e}}function FA(e){return{type:ly,id:e}}function UA(e,t){return{type:_A,id:e,error:t}}function fD(e){return t=>{t(kA(e)),H().post(`/api/v1/statuses/${e}/unmute`).then(()=>{t(DA(e))}).catch(n=>{t(jA(e,n))})}}function kA(e){return{type:gA,id:e}}function DA(e){return{type:fy,id:e}}function jA(e,t){return{type:vA,id:e,error:t}}function $A(e){return Array.isArray(e)||(e=[e]),{type:py,ids:e}}function qA(e){return Array.isArray(e)||(e=[e]),{type:dy,ids:e}}function dD(e){return(t,n)=>{const r=n().statuses.get(e);r&&(r.get("hidden")?t(qA(e)):t($A(e)))}}function pD(e,t){return{type:hy,id:e,isCollapsed:t}}const hD=e=>t=>{t(BA(e)),H().post(`/api/v1/statuses/${e}/translate`).then(n=>{t(HA(e,n.data))}).catch(n=>{t(VA(e,n))})},BA=e=>({type:bA,id:e}),HA=(e,t)=>({type:of,id:e,translation:t}),VA=(e,t)=>({type:wA,id:e,error:t}),mD=(e,t)=>({type:af,id:e,pollId:t}),_D=e=>(t,n)=>{const r=n(),i=r.statuses.getIn([e,"account"]),s=r.accounts.getIn([i,"acct"]);s&&ct.push(`/@${s}/${e}`)},zA=ee("APP_FOCUS"),WA=ee("APP_UNFOCUS"),GA=ee("APP_LAYOUT_CHANGE");var mu={},_u={};function _y(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function gy(e){function t(n){var r=this.constructor.getDerivedStateFromProps(e,n);return r??null}this.setState(t.bind(this))}function vy(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}_y.__suppressDeprecationWarning=!0;gy.__suppressDeprecationWarning=!0;vy.__suppressDeprecationWarning=!0;function KA(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,r=null,i=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?i="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),n!==null||r!==null||i!==null){var s=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=_y,t.componentWillReceiveProps=gy),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=vy;var a=t.componentDidUpdate;t.componentDidUpdate=function(l,c,f){var d=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;a.call(this,l,c,d)}}return e}const QA=Object.freeze(Object.defineProperty({__proto__:null,polyfill:KA},Symbol.toStringTag,{value:"Module"})),YA=vh(QA);var gu={exports:{}},vu,up;function XA(){if(up)return vu;up=1;var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(v,x)=>{for(var j in x)t(v,j,{get:x[j],enumerable:!0})},a=(v,x,j,Y)=>{if(x&&typeof x=="object"||typeof x=="function")for(let G of r(x))!s.call(v,G)&&G!==j&&t(v,G,{get:()=>x[G],enumerable:!(Y=n(x,G))||Y.enumerable});return v},u=(v,x,j)=>(j=v!=null?e(i(v)):{},a(!v||!v.__esModule?t(j,"default",{value:v,enumerable:!0}):j,v)),l=v=>a(t({},"__esModule",{value:!0}),v),c={};o(c,{Provider:()=>DE,ReactReduxContext:()=>$,batch:()=>HE,connect:()=>UE,createDispatchHook:()=>Tf,createSelectorHook:()=>Of,createStoreHook:()=>Ia,shallowEqual:()=>pt,useDispatch:()=>jE,useSelector:()=>BE,useStore:()=>wf}),vu=l(c);var f=u(qc()),d=f.version.startsWith("19"),p=Symbol.for(d?"react.transitional.element":"react.element"),h=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),b=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),k=Symbol.for("react.client.reference"),W=T,B=N;function z(v){return typeof v=="string"||typeof v=="function"||v===_||v===y||v===g||v===I||v===w||v===U||typeof v=="object"&&v!==null&&(v.$$typeof===q||v.$$typeof===N||v.$$typeof===b||v.$$typeof===S||v.$$typeof===T||v.$$typeof===k||v.getModuleId!==void 0)}function D(v){if(typeof v=="object"&&v!==null){const{$$typeof:x}=v;switch(x){case p:switch(v=v.type,v){case _:case y:case g:case I:case w:return v;default:switch(v=v&&v.$$typeof,v){case b:case T:case q:case N:return v;case S:return v;default:return x}}case h:return x}}}function E(v){return d?D(v)===S:D(v)===b}function A(v){return D(v)===N}function C(v){typeof console<"u"&&typeof console.error=="function"&&console.error(v);try{throw new Error(v)}catch{}}function L(v,x){if(v)(x==="mapStateToProps"||x==="mapDispatchToProps")&&(Object.prototype.hasOwnProperty.call(v,"dependsOnOwnProps")||C(`The selector for ${x} of connect did not specify a value for dependsOnOwnProps.`));else throw new Error(`Unexpected value for ${x} in connect.`)}function P(v,x,j){L(v,"mapStateToProps"),L(x,"mapDispatchToProps"),L(j,"mergeProps")}function K(v,x,j,Y,{areStatesEqual:G,areOwnPropsEqual:Z,areStatePropsEqual:_e}){let Ae=!1,ce,le,Ce,Pe,De;function Tt($e,it){return ce=$e,le=it,Ce=v(ce,le),Pe=x(Y,le),De=j(Ce,Pe,le),Ae=!0,De}function Xe(){return Ce=v(ce,le),x.dependsOnOwnProps&&(Pe=x(Y,le)),De=j(Ce,Pe,le),De}function jn(){return v.dependsOnOwnProps&&(Ce=v(ce,le)),x.dependsOnOwnProps&&(Pe=x(Y,le)),De=j(Ce,Pe,le),De}function Ue(){const $e=v(ce,le),it=!_e($e,Ce);return Ce=$e,it&&(De=j(Ce,Pe,le)),De}function Ut($e,it){const ht=!Z(it,le),$n=!G($e,ce,it,le);return ce=$e,le=it,ht&&$n?Xe():ht?jn():$n?Ue():De}return function(it,ht){return Ae?Ut(it,ht):Tt(it,ht)}}function M(v,{initMapStateToProps:x,initMapDispatchToProps:j,initMergeProps:Y,...G}){const Z=x(v,G),_e=j(v,G),Ae=Y(v,G);return P(Z,_e,Ae),K(Z,_e,Ae,v,G)}function X(v,x){const j={};for(const Y in v){const G=v[Y];typeof G=="function"&&(j[Y]=(...Z)=>x(G(...Z)))}return j}function pe(v){if(typeof v!="object"||v===null)return!1;const x=Object.getPrototypeOf(v);if(x===null)return!0;let j=x;for(;Object.getPrototypeOf(j)!==null;)j=Object.getPrototypeOf(j);return x===j}function ie(v,x,j){pe(v)||C(`${j}() in ${x} must return a plain object. Instead received ${v}.`)}function Q(v){return function(j){const Y=v(j);function G(){return Y}return G.dependsOnOwnProps=!1,G}}function ye(v){return v.dependsOnOwnProps?!!v.dependsOnOwnProps:v.length!==1}function R(v,x){return function(Y,{displayName:G}){const Z=function(Ae,ce){return Z.dependsOnOwnProps?Z.mapToProps(Ae,ce):Z.mapToProps(Ae,void 0)};return Z.dependsOnOwnProps=!0,Z.mapToProps=function(Ae,ce){Z.mapToProps=v,Z.dependsOnOwnProps=ye(v);let le=Z(Ae,ce);return typeof le=="function"&&(Z.mapToProps=le,Z.dependsOnOwnProps=ye(le),le=Z(Ae,ce)),ie(le,G,x),le},Z}}function Ee(v,x){return(j,Y)=>{throw new Error(`Invalid value of type ${typeof v} for ${x} argument when connecting component ${Y.wrappedComponentName}.`)}}function be(v){return v&&typeof v=="object"?Q(x=>X(v,x)):v?typeof v=="function"?R(v,"mapDispatchToProps"):Ee(v,"mapDispatchToProps"):Q(x=>({dispatch:x}))}function Fe(v){return v?typeof v=="function"?R(v,"mapStateToProps"):Ee(v,"mapStateToProps"):Q(()=>({}))}function Ke(v,x,j){return{...j,...v,...x}}function we(v){return function(j,{displayName:Y,areMergedPropsEqual:G}){let Z=!1,_e;return function(ce,le,Ce){const Pe=v(ce,le,Ce);return Z?G(Pe,_e)||(_e=Pe):(Z=!0,_e=Pe,ie(_e,Y,"mergeProps")),_e}}}function oe(v){return v?typeof v=="function"?we(v):Ee(v,"mergeProps"):()=>Ke}function kn(v){v()}function Qe(){let v=null,x=null;return{clear(){v=null,x=null},notify(){kn(()=>{let j=v;for(;j;)j.callback(),j=j.next})},get(){const j=[];let Y=v;for(;Y;)j.push(Y),Y=Y.next;return j},subscribe(j){let Y=!0;const G=x={callback:j,next:null,prev:x};return G.prev?G.prev.next=G:v=G,function(){!Y||v===null||(Y=!1,G.next?G.next.prev=G.prev:x=G.prev,G.prev?G.prev.next=G.next:v=G.next)}}}}var bt={notify(){},get:()=>[]};function Xt(v,x){let j,Y=bt,G=0,Z=!1;function _e(jn){Ce();const Ue=Y.subscribe(jn);let Ut=!1;return()=>{Ut||(Ut=!0,Ue(),Pe())}}function Ae(){Y.notify()}function ce(){Xe.onStateChange&&Xe.onStateChange()}function le(){return Z}function Ce(){G++,j||(j=x?x.addNestedSub(ce):v.subscribe(ce),Y=Qe())}function Pe(){G--,j&&G===0&&(j(),j=void 0,Y.clear(),Y=bt)}function De(){Z||(Z=!0,Ce())}function Tt(){Z&&(Z=!1,Pe())}const Xe={addNestedSub:_e,notifyNestedSubs:Ae,handleChangeWrapper:ce,isSubscribed:le,trySubscribe:De,tryUnsubscribe:Tt,getListeners:()=>Y};return Xe}var ur=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cr=ur(),wt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ft=wt(),En=()=>cr||Ft?f.useLayoutEffect:f.useEffect,Zt=En();function un(v,x){return v===x?v!==0||x!==0||1/v===1/x:v!==v&&x!==x}function pt(v,x){if(un(v,x))return!0;if(typeof v!="object"||v===null||typeof x!="object"||x===null)return!1;const j=Object.keys(v),Y=Object.keys(x);if(j.length!==Y.length)return!1;for(let G=0;G<j.length;G++)if(!Object.prototype.hasOwnProperty.call(x,j[G])||!un(v[j[G]],x[j[G]]))return!1;return!0}var bn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Dn={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Lr={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ei={[W]:Dn,[B]:Lr};function Tn(v){return A(v)?Lr:Ei[v.$$typeof]||bn}var Mr=Object.defineProperty,bi=Object.getOwnPropertyNames,Pr=Object.getOwnPropertySymbols,wi=Object.getOwnPropertyDescriptor,Ti=Object.getPrototypeOf,Fr=Object.prototype;function lr(v,x){if(typeof x!="string"){if(Fr){const Z=Ti(x);Z&&Z!==Fr&&lr(v,Z)}let j=bi(x);Pr&&(j=j.concat(Pr(x)));const Y=Tn(v),G=Tn(x);for(let Z=0;Z<j.length;++Z){const _e=j[Z];if(!wn[_e]&&!(G&&G[_e])&&!(Y&&Y[_e])){const Ae=wi(x,_e);try{Mr(v,_e,Ae)}catch{}}}}return v}var fr=Symbol.for("react-redux-context"),cn=typeof globalThis<"u"?globalThis:{};function te(){if(!f.createContext)return{};const v=cn[fr]??(cn[fr]=new Map);let x=v.get(f.createContext);return x||(x=f.createContext(null),x.displayName="ReactRedux",v.set(f.createContext,x)),x}var $=te(),se=[null,null],he=v=>{try{return JSON.stringify(v)}catch{return String(v)}};function ze(v,x,j){Zt(()=>v(...x),j)}function Be(v,x,j,Y,G,Z){v.current=Y,j.current=!1,G.current&&(G.current=null,Z())}function ln(v,x,j,Y,G,Z,_e,Ae,ce,le,Ce){if(!v)return()=>{};let Pe=!1,De=null;const Tt=()=>{if(Pe||!Ae.current)return;const jn=x.getState();let Ue,Ut;try{Ue=Y(jn,G.current)}catch($e){Ut=$e,De=$e}Ut||(De=null),Ue===Z.current?_e.current||le():(Z.current=Ue,ce.current=Ue,_e.current=!0,Ce())};return j.onStateChange=Tt,j.trySubscribe(),Tt(),()=>{if(Pe=!0,j.tryUnsubscribe(),j.onStateChange=null,De)throw De}}function Ur(v,x){return v===x}var Ef=!1;function FE(v,x,j,{pure:Y,areStatesEqual:G=Ur,areOwnPropsEqual:Z=pt,areStatePropsEqual:_e=pt,areMergedPropsEqual:Ae=pt,forwardRef:ce=!1,context:le=$}={}){Y!==void 0&&!Ef&&(Ef=!0,C('The `pure` option has been removed. `connect` is now always a "pure/memoized" component'));const Ce=le,Pe=Fe(v),De=be(x),Tt=oe(j),Xe=!!v;return Ue=>{if(!z(Ue))throw new Error(`You must pass a component to the function returned by connect. Instead received ${he(Ue)}`);const Ut=Ue.displayName||Ue.name||"Component",$e=`Connect(${Ut})`,it={shouldHandleStateChanges:Xe,displayName:$e,wrappedComponentName:Ut,WrappedComponent:Ue,initMapStateToProps:Pe,initMapDispatchToProps:De,initMergeProps:Tt,areStatesEqual:G,areStatePropsEqual:_e,areOwnPropsEqual:Z,areMergedPropsEqual:Ae};function ht(On){const[fn,Ra,qn]=f.useMemo(()=>{const{reactReduxForwardedRef:Ot,...jr}=On;return[On.context,Ot,jr]},[On]),Oi=f.useMemo(()=>{let Ot=Ce;if(fn!=null&&fn.Consumer){if(!E(f.createElement(fn.Consumer,null)))throw new Error("You must pass a valid React context consumer as `props.context`");Ot=fn}return Ot},[fn,Ce]),Cn=f.useContext(Oi),Dr=!!On.store&&!!On.store.getState&&!!On.store.dispatch,Cf=!!Cn&&!!Cn.store;if(!Dr&&!Cf)throw new Error(`Could not find "store" in the context of "${$e}". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to ${$e} in connect options.`);const Bn=Dr?On.store:Cn.store,Nf=Cf?Cn.getServerState:Bn.getState,xa=f.useMemo(()=>M(Bn.dispatch,it),[Bn]),[Ci,Af]=f.useMemo(()=>{if(!Xe)return se;const Ot=Xt(Bn,Dr?void 0:Cn.subscription),jr=Ot.notifyNestedSubs.bind(Ot);return[Ot,jr]},[Bn,Dr,Cn]),If=f.useMemo(()=>Dr?Cn:{...Cn,subscription:Ci},[Dr,Cn,Ci]),La=f.useRef(void 0),Ma=f.useRef(qn),Ni=f.useRef(void 0),Rf=f.useRef(!1),Pa=f.useRef(!1),Fa=f.useRef(void 0);Zt(()=>(Pa.current=!0,()=>{Pa.current=!1}),[]);const xf=f.useMemo(()=>()=>Ni.current&&qn===Ma.current?Ni.current:xa(Bn.getState(),qn),[Bn,qn]),VE=f.useMemo(()=>jr=>Ci?ln(Xe,Bn,Ci,xa,Ma,La,Rf,Pa,Ni,Af,jr):()=>{},[Ci]);ze(Be,[Ma,La,Rf,qn,Ni,Af]);let Xs;try{Xs=f.useSyncExternalStore(VE,xf,Nf?()=>xa(Nf(),qn):xf)}catch(Ot){throw Fa.current&&(Ot.message+=`
The error may be correlated with this previous error:
${Fa.current.stack}

`),Ot}Zt(()=>{Fa.current=void 0,Ni.current=void 0,La.current=Xs});const Ua=f.useMemo(()=>f.createElement(Ue,{...Xs,ref:Ra}),[Ra,Ue,Xs]);return f.useMemo(()=>Xe?f.createElement(Oi.Provider,{value:If},Ua):Ua,[Oi,Ua,If])}const kr=f.memo(ht);if(kr.WrappedComponent=Ue,kr.displayName=ht.displayName=$e,ce){const fn=f.forwardRef(function(qn,Oi){return f.createElement(kr,{...qn,reactReduxForwardedRef:Oi})});return fn.displayName=$e,fn.WrappedComponent=Ue,lr(fn,Ue)}return lr(kr,Ue)}}var UE=FE;function kE(v){const{children:x,context:j,serverState:Y,store:G}=v,Z=f.useMemo(()=>{const ce=Xt(G),le={store:G,subscription:ce,getServerState:Y?()=>Y:void 0};{const{identityFunctionCheck:Ce="once",stabilityCheck:Pe="once"}=v;return Object.assign(le,{stabilityCheck:Pe,identityFunctionCheck:Ce})}},[G,Y]),_e=f.useMemo(()=>G.getState(),[G]);Zt(()=>{const{subscription:ce}=Z;return ce.onStateChange=ce.notifyNestedSubs,ce.trySubscribe(),_e!==G.getState()&&ce.notifyNestedSubs(),()=>{ce.tryUnsubscribe(),ce.onStateChange=void 0}},[Z,_e]);const Ae=j||$;return f.createElement(Ae.Provider,{value:Z},x)}var DE=kE;function Aa(v=$){return function(){const j=f.useContext(v);if(!j)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return j}}var bf=Aa();function Ia(v=$){const x=v===$?bf:Aa(v),j=()=>{const{store:Y}=x();return Y};return Object.assign(j,{withTypes:()=>j}),j}var wf=Ia();function Tf(v=$){const x=v===$?wf:Ia(v),j=()=>x().dispatch;return Object.assign(j,{withTypes:()=>j}),j}var jE=Tf(),$E=Um(),qE=(v,x)=>v===x;function Of(v=$){const x=v===$?bf:Aa(v),j=(Y,G={})=>{const{equalityFn:Z=qE}=typeof G=="function"?{equalityFn:G}:G;{if(!Y)throw new Error("You must pass a selector to useSelector");if(typeof Y!="function")throw new Error("You must pass a function as a selector to useSelector");if(typeof Z!="function")throw new Error("You must pass a function as an equality function to useSelector")}const _e=x(),{store:Ae,subscription:ce,getServerState:le}=_e,Ce=f.useRef(!0),Pe=f.useCallback({[Y.name](Tt){const Xe=Y(Tt);{const{devModeChecks:jn={}}=typeof G=="function"?{}:G,{identityFunctionCheck:Ue,stabilityCheck:Ut}=_e,{identityFunctionCheck:$e,stabilityCheck:it}={stabilityCheck:Ut,identityFunctionCheck:Ue,...jn};if(it==="always"||it==="once"&&Ce.current){const ht=Y(Tt);if(!Z(Xe,ht)){let $n;try{throw new Error}catch(kr){({stack:$n}=kr)}console.warn("Selector "+(Y.name||"unknown")+` returned a different result when called with the same parameters. This can lead to unnecessary rerenders.
Selectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization`,{state:Tt,selected:Xe,selected2:ht,stack:$n})}}if(($e==="always"||$e==="once"&&Ce.current)&&Xe===Tt){let ht;try{throw new Error}catch($n){({stack:ht}=$n)}console.warn("Selector "+(Y.name||"unknown")+` returned the root state when called. This can lead to unnecessary rerenders.
Selectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.`,{stack:ht})}Ce.current&&(Ce.current=!1)}return Xe}}[Y.name],[Y]),De=(0,$E.useSyncExternalStoreWithSelector)(ce.addNestedSub,Ae.getState,le||Ae.getState,Pe,Z);return f.useDebugValue(De),De};return Object.assign(j,{withTypes:()=>j}),j}var BE=Of(),HE=kn;return vu}var cp;function yy(){return cp||(cp=1,gu.exports=XA()),gu.exports}var st={},lp;function Ta(){if(lp)return st;lp=1,Object.defineProperty(st,"__esModule",{value:!0}),st.showLoading=a,st.hideLoading=u,st.resetLoading=l,st.loadingBarReducer=c,st.DEFAULT_SCOPE=st.RESET=st.HIDE=st.SHOW=void 0;function e(f,d){var p=Object.keys(f);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(f);d&&(h=h.filter(function(_){return Object.getOwnPropertyDescriptor(f,_).enumerable})),p.push.apply(p,h)}return p}function t(f){for(var d=1;d<arguments.length;d++){var p=arguments[d]!=null?arguments[d]:{};d%2?e(Object(p),!0).forEach(function(h){n(f,h,p[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(p)):e(Object(p)).forEach(function(h){Object.defineProperty(f,h,Object.getOwnPropertyDescriptor(p,h))})}return f}function n(f,d,p){return d in f?Object.defineProperty(f,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[d]=p,f}var r="loading-bar/SHOW";st.SHOW=r;var i="loading-bar/HIDE";st.HIDE=i;var s="loading-bar/RESET";st.RESET=s;var o="default";st.DEFAULT_SCOPE=o;function a(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o;return{type:r,payload:{scope:f}}}function u(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o;return{type:i,payload:{scope:f}}}function l(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o;return{type:s,payload:{scope:f}}}function c(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=d.payload||{},h=p.scope,_=h===void 0?o:h;switch(d.type){case r:return t(t({},f),{},n({},_,(f[_]||0)+1));case i:return t(t({},f),{},n({},_,Math.max(0,(f[_]||1)-1)));case s:return t(t({},f),{},n({},_,0));default:return f}}return st}var fp;function Sy(){return fp||(fp=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LoadingBar=e.TERMINATING_ANIMATION_DURATION=e.ANIMATION_DURATION=e.PROGRESS_INCREASE=e.MAX_PROGRESS=e.UPDATE_TIME=void 0;var t=a(qc()),n=YA,r=ZE(),i=yy(),s=Ta();function o(){if(typeof WeakMap!="function")return null;var E=new WeakMap;return o=function(){return E},E}function a(E){if(E&&E.__esModule)return E;if(E===null||u(E)!=="object"&&typeof E!="function")return{default:E};var A=o();if(A&&A.has(E))return A.get(E);var C={},L=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var P in E)if(Object.prototype.hasOwnProperty.call(E,P)){var K=L?Object.getOwnPropertyDescriptor(E,P):null;K&&(K.get||K.set)?Object.defineProperty(C,P,K):C[P]=E[P]}return C.default=E,A&&A.set(E,C),C}function u(E){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(C){return typeof C}:u=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},u(E)}function l(E,A){var C=Object.keys(E);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(E);A&&(L=L.filter(function(P){return Object.getOwnPropertyDescriptor(E,P).enumerable})),C.push.apply(C,L)}return C}function c(E){for(var A=1;A<arguments.length;A++){var C=arguments[A]!=null?arguments[A]:{};A%2?l(Object(C),!0).forEach(function(L){f(E,L,C[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(C)):l(Object(C)).forEach(function(L){Object.defineProperty(E,L,Object.getOwnPropertyDescriptor(C,L))})}return E}function f(E,A,C){return A in E?Object.defineProperty(E,A,{value:C,enumerable:!0,configurable:!0,writable:!0}):E[A]=C,E}function d(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function p(E,A){for(var C=0;C<A.length;C++){var L=A[C];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(E,L.key,L)}}function h(E,A,C){return A&&p(E.prototype,A),C&&p(E,C),E}function _(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),A&&g(E,A)}function g(E,A){return g=Object.setPrototypeOf||function(L,P){return L.__proto__=P,L},g(E,A)}function y(E){var A=T();return function(){var L=I(E),P;if(A){var K=I(this).constructor;P=Reflect.construct(L,arguments,K)}else P=L.apply(this,arguments);return S(this,P)}}function S(E,A){return A&&(u(A)==="object"||typeof A=="function")?A:b(E)}function b(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(E){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},I(E)}var w=400;e.UPDATE_TIME=w;var N=99;e.MAX_PROGRESS=N;var q=20;e.PROGRESS_INCREASE=q;var U=w*2;e.ANIMATION_DURATION=U;var k=w/2;e.TERMINATING_ANIMATION_DURATION=k;var W={percent:0,status:"hidden"},B=function(E){_(C,E);var A=y(C);h(C,null,[{key:"shouldStart",value:function(P,K){return P.loading>0&&["hidden","stopping"].indexOf(K.status)>=0}},{key:"shouldStop",value:function(P,K){return P.loading===0&&["starting","running"].indexOf(K.status)>=0}},{key:"getDerivedStateFromProps",value:function(P,K){return C.shouldStart(P,K)?{status:"starting"}:C.shouldStop(P,K)?{status:"stopping"}:null}}]);function C(L){var P;return d(this,C),P=A.call(this,L),P.reset=function(){P.terminatingAnimationTimeoutId=null,P.setState(W)},P.newPercent=function(K,M){var X=M*Math.cos(K*(Math.PI/2/100));return K+X},P.simulateProgress=function(){P.setState(function(K,M){var X=M.maxProgress,pe=M.progressIncrease,ie=K.percent,Q=P.newPercent(ie,pe);return Q<=X&&(ie=Q),{percent:ie}})},P.state=c({},W),P}return h(C,[{key:"componentDidMount",value:function(){var P=this.state.status;P==="starting"&&this.start()}},{key:"componentDidUpdate",value:function(P,K){var M=this.state.status;K.status!==M&&(M==="starting"&&this.start(),M==="stopping"&&this.stop())}},{key:"componentWillUnmount",value:function(){clearInterval(this.progressIntervalId),clearTimeout(this.terminatingAnimationTimeoutId)}},{key:"start",value:function(){this.terminatingAnimationTimeoutId&&(clearTimeout(this.terminatingAnimationTimeoutId),this.reset());var P=this.props.updateTime;this.progressIntervalId=setInterval(this.simulateProgress,P),this.setState({status:"running"})}},{key:"stop",value:function(){var P=this.props.showFastActions;clearInterval(this.progressIntervalId),this.progressIntervalId=null;var K=this.isShown()||P?k:0;this.terminatingAnimationTimeoutId=setTimeout(this.reset,K),this.setState({percent:100})}},{key:"isShown",value:function(){var P=this.state.percent;return P>0&&P<=100}},{key:"buildStyle",value:function(){var P=this.state,K=P.status,M=P.percent,X=this.props,pe=X.className,ie=X.style,Q=K==="stopping"?k:U,ye={width:"".concat(M,"%"),transition:"width ".concat(Q,"ms linear 0s"),msTransition:"width ".concat(Q,"ms linear 0s"),WebkitTransition:"width ".concat(Q,"ms linear 0s"),MozTransition:"width ".concat(Q,"ms linear 0s"),OTransition:"width ".concat(Q,"ms linear 0s"),willChange:"width, opacity"};return pe||(ye.height="3px",ye.backgroundColor="red",ye.position="absolute"),this.isShown()?ye.opacity="1":ye.opacity="0",c(c({},ye),ie)}},{key:"render",value:function(){var P=this.state.status,K=this.props,M=K.direction,X=K.className;return P==="hidden"?t.default.createElement("div",null):t.default.createElement("div",{style:{direction:M}},t.default.createElement("div",{style:this.buildStyle(),className:X}),t.default.createElement("div",{style:{display:"table",clear:"both"}}))}}]),C}(t.Component);e.LoadingBar=B,B.propTypes={className:r.string,direction:r.string,loading:r.number,maxProgress:r.number,progressIncrease:r.number,scope:r.string,showFastActions:r.bool,style:r.object,updateTime:r.number},B.defaultProps={className:"",direction:"ltr",loading:0,maxProgress:N,progressIncrease:q,scope:s.DEFAULT_SCOPE,showFastActions:!1,style:{},updateTime:w};var z=function(A,C){return{loading:A.loadingBar[C.scope||s.DEFAULT_SCOPE]}};(0,n.polyfill)(B);var D=(0,i.connect)(z)(B);e.default=D}(_u)),_u}var yu={},dp;function ZA(){return dp||(dp=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=Ta();function n(c,f){return a(c)||o(c,f)||i(c,f)||r()}function r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i(c,f){if(c){if(typeof c=="string")return s(c,f);var d=Object.prototype.toString.call(c).slice(8,-1);if(d==="Object"&&c.constructor&&(d=c.constructor.name),d==="Map"||d==="Set")return Array.from(c);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return s(c,f)}}function s(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,p=new Array(f);d<f;d++)p[d]=c[d];return p}function o(c,f){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(c)))){var d=[],p=!0,h=!1,_=void 0;try{for(var g=c[Symbol.iterator](),y;!(p=(y=g.next()).done)&&(d.push(y.value),!(f&&d.length===f));p=!0);}catch(S){h=!0,_=S}finally{try{!p&&g.return!=null&&g.return()}finally{if(h)throw _}}return d}}function a(c){if(Array.isArray(c))return c}var u=["PENDING","FULFILLED","REJECTED"];function l(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=c.promiseTypeSuffixes||u,d=c.scope||t.DEFAULT_SCOPE;return function(p){var h=p.dispatch;return function(_){return function(g){if(g.type){var y=n(f,3),S=y[0],b=y[1],T=y[2],I=new RegExp("".concat(S,"$"),"g"),w=new RegExp("".concat(b,"$"),"g"),N=new RegExp("".concat(T,"$"),"g"),q=g.meta&&g.meta.scope||g.scope||d;g.type.match(I)?h((0,t.showLoading)(q)):(g.type.match(w)||g.type.match(N))&&h((0,t.hideLoading)(q))}return _(g)}}}}}(yu)),yu}var Su={},pp;function JA(){return pp||(pp=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=yy(),n=Sy(),r=Ta(),i=function(a,u){return{loading:a.get("loadingBar")[u.scope||r.DEFAULT_SCOPE]}},s=(0,t.connect)(i)(n.LoadingBar);e.default=s}(Su)),Su}var hp;function eI(){return hp||(hp=1,function(e){function t(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(d){return typeof d}:t=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},t(c)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"LoadingBar",{enumerable:!0,get:function(){return n.LoadingBar}}),Object.defineProperty(e,"loadingBarMiddleware",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"DEFAULT_SCOPE",{enumerable:!0,get:function(){return i.DEFAULT_SCOPE}}),Object.defineProperty(e,"HIDE",{enumerable:!0,get:function(){return i.HIDE}}),Object.defineProperty(e,"hideLoading",{enumerable:!0,get:function(){return i.hideLoading}}),Object.defineProperty(e,"loadingBarReducer",{enumerable:!0,get:function(){return i.loadingBarReducer}}),Object.defineProperty(e,"RESET",{enumerable:!0,get:function(){return i.RESET}}),Object.defineProperty(e,"resetLoading",{enumerable:!0,get:function(){return i.resetLoading}}),Object.defineProperty(e,"SHOW",{enumerable:!0,get:function(){return i.SHOW}}),Object.defineProperty(e,"showLoading",{enumerable:!0,get:function(){return i.showLoading}}),Object.defineProperty(e,"ImmutableLoadingBar",{enumerable:!0,get:function(){return s.default}}),e.default=void 0;var n=u(Sy()),r=o(ZA()),i=Ta(),s=o(JA());function o(c){return c&&c.__esModule?c:{default:c}}function a(){if(typeof WeakMap!="function")return null;var c=new WeakMap;return a=function(){return c},c}function u(c){if(c&&c.__esModule)return c;if(c===null||t(c)!=="object"&&typeof c!="function")return{default:c};var f=a();if(f&&f.has(c))return f.get(c);var d={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in c)if(Object.prototype.hasOwnProperty.call(c,h)){var _=p?Object.getOwnPropertyDescriptor(c,h):null;_&&(_.get||_.set)?Object.defineProperty(d,h,_):d[h]=c[h]}return d.default=c,f&&f.set(c,d),d}var l=n.default;e.default=l}(mu)),mu}var qo=eI();const gD=oi(qo);var Mi={},ao={exports:{}};const uf=vh(B1);var Nn={},uo={exports:{}},mp;function Ey(){return mp||(mp=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return n&&n.type==="@@redux/INIT"?"initialState argument passed to createStore":"previous state received by the reducer"},e.exports=t.default}(uo,uo.exports)),uo.exports}var co={exports:{}},_p;function tI(){return _p||(_p=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=uf,r=o(n),i=Ey(),s=o(i);function o(a){return a&&a.__esModule?a:{default:a}}t.default=function(a,u,l){var c=Object.keys(u);if(!c.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var f=(0,s.default)(l);if(r.default.isImmutable?!r.default.isImmutable(a):!r.default.Iterable.isIterable(a))return"The "+f+' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: "'+c.join('", "')+'".';var d=a.toSeq().keySeq().toArray().filter(function(p){return!u.hasOwnProperty(p)});return d.length>0?"Unexpected "+(d.length===1?"property":"properties")+' "'+d.join('", "')+'" found in '+f+'. Expected to find one of the known reducer property names instead: "'+c.join('", "')+'". Unexpected properties will be ignored.':null},e.exports=t.default}(co,co.exports)),co.exports}var lo={exports:{}},gp;function nI(){return gp||(gp=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,r,i){if(n===void 0)throw new Error('Reducer "'+r+'" returned undefined when handling "'+i.type+'" action. To ignore an action, you must explicitly return the previous state.')},e.exports=t.default}(lo,lo.exports)),lo.exports}var vp;function rI(){if(vp)return Nn;vp=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.validateNextState=Nn.getUnexpectedInvocationParameterMessage=Nn.getStateName=void 0;var e=Ey(),t=o(e),n=tI(),r=o(n),i=nI(),s=o(i);function o(a){return a&&a.__esModule?a:{default:a}}return Nn.getStateName=t.default,Nn.getUnexpectedInvocationParameterMessage=r.default,Nn.validateNextState=s.default,Nn}var yp;function iI(){return yp||(yp=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=uf,r=s(n),i=rI();function s(o){return o&&o.__esModule?o:{default:o}}t.default=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.default.Map,u=Object.keys(o);return function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),c=arguments[1];{var f=(0,i.getUnexpectedInvocationParameterMessage)(l,o,c);f&&console.error(f)}return l.withMutations(function(d){u.forEach(function(p){var h=o[p],_=d.get(p),g=h(_,c);(0,i.validateNextState)(g,p,c),d.set(p,g)})})}},e.exports=t.default}(ao,ao.exports)),ao.exports}var Sp;function sI(){if(Sp)return Mi;Sp=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.combineReducers=void 0;var e=iI(),t=n(e);function n(r){return r&&r.__esModule?r:{default:r}}return Mi.combineReducers=t.default,Mi}var oI=sI();const aI=Se({name:"",value:"",verified_at:null,name_emojified:"",value_emojified:"",value_plain:null}),uI=Se({color:"",id:"",name:""}),cI={acct:"",avatar:"",avatar_static:"",bot:!1,created_at:"",discoverable:!1,indexable:!1,display_name:"",display_name_html:"",emojis:J(),fields:J(),group:!1,header:"",header_static:"",id:"",last_status_at:"",locked:!1,noindex:!1,note:"",note_emojified:"",note_plain:"string",roles:J(),uri:"",url:"",username:"",followers_count:0,following_count:0,statuses_count:0,hidden:!1,suspended:!1,memorial:!1,limited:!1,moved:null,hide_collections:!1,mute_expires_at:null},lI=Se(cI);function fI(e,t){return aI({...e,name_emojified:nn(ui(e.name),t),value_emojified:nn(e.value,t),value_plain:Zo(e.value)})}function dI(e){var s;const{moved:t,...n}=e,r=vi(n.emojis),i=n.display_name.trim().length===0?n.username:n.display_name;return lI({...n,moved:t==null?void 0:t.id,fields:J(e.fields.map(o=>fI(o,r))),emojis:J(e.emojis.map(o=>B_(o))),roles:J((s=e.roles)==null?void 0:s.map(o=>uI(o))),display_name_html:nn(ui(i),r),note_emojified:nn(n.note,r),note_plain:Zo(n.note),url:n.url.startsWith("http://")||n.url.startsWith("https://")?n.url:n.uri})}const pI=V(),hI=(e,t)=>{var n;return e.set(t.id,dI(t).set("hidden",((n=e.get(t.id))==null?void 0:n.hidden)===!1?!1:t.limited||!1))},mI=(e,t)=>(t.forEach(n=>{e=hI(e,n)}),e);function Ep(){if(!at)throw new Error("No current user (me) defined when calling `accountsReducer`");return at}const _I=(e=pI,t)=>Z1.match(t)?e.setIn([t.payload.id,"hidden"],!1):Ql.match(t)?mI(e,t.payload.accounts):Yl.match(t)&&!t.payload.alreadyFollowing?e.update(t.payload.relationship.id,n=>n==null?void 0:n.update("followers_count",r=>r+1)).update(Ep(),n=>n==null?void 0:n.update("following_count",r=>r+1)):_a.match(t)?e.update(t.payload.relationship.id,n=>n==null?void 0:n.update("followers_count",r=>Math.max(0,r-1))).update(Ep(),n=>n==null?void 0:n.update("following_count",r=>Math.max(0,r-1))):e,gI=fe("accounts_familiar_followers/fetch",({id:e})=>Xw(e),([e],{dispatch:t})=>e?(t(ae(e.accounts)),{id:e.id,accountIds:e.accounts.map(n=>n.id)}):null),vI={},yI=Kt(vI,e=>{e.addCase(gI.fulfilled,(t,{payload:n})=>{n&&(t[n.id]=n.accountIds)})}),SI=new RegExp(`@${a0}$`,"gi"),bp=e=>e.toLowerCase().replace(SI,""),EI={},bI=Kt(EI,e=>{e.addCase(Ql,(t,n)=>{n.payload.accounts.forEach(r=>{t[bp(r.acct)]=r.id})}).addMatcher(t=>t.type===rg,(t,n)=>{var r,i;((i=(r=n.error)==null?void 0:r.response)==null?void 0:i.status)===404&&(t[bp(n.acct)]=null)})}),wI=[];let TI=0;const OI=Kt(wI,e=>{e.addCase(yr,(t,{payload:n})=>{t.push({key:TI++,...n})}).addCase(DC,(t,{payload:{key:n}})=>t.filter(r=>r.key!==n)).addCase(jC,()=>[])}),CI=V({items:J(),isLoading:!1,show:!1}),cf=(e,t,n,r)=>e.update("items",i=>i.map(s=>s.get("id")===t?s.update("reactions",o=>{const a=o.findIndex(u=>u.get("name")===n);return a>-1?o.update(a,u=>r(u)):o.push(r(ve({name:n,count:0})))}):s)),NI=(e,t)=>cf(e,t.announcement_id,t.name,n=>n.set("count",t.count)),AI=(e,t,n)=>cf(e,t,n,r=>r.set("me",!0).update("count",i=>i+1)),II=(e,t,n)=>cf(e,t,n,r=>r.set("me",!1).update("count",i=>i-1)),wp=e=>e.sortBy(t=>t.get("starts_at")||t.get("published_at")),Tp=(e,t)=>{const n=e.get("items").findIndex(r=>r.get("id")===t.get("id"));return n>-1?e.update("items",r=>wp(r.update(n,i=>i.mergeDeep(t)))):e.update("items",r=>wp(r.unshift(t)))};function RI(e=CI,t){switch(t.type){case Kv:return e.withMutations(n=>{n.set("show",!n.get("show"))});case kv:return e.set("isLoading",!0);case Dv:return e.withMutations(n=>{const r=ve(t.announcements);n.set("items",r),n.set("isLoading",!1)});case jv:return e.set("isLoading",!1);case $v:return Tp(e,ve(t.announcement));case Gv:return NI(e,t.reaction);case Hv:case Wv:return AI(e,t.id,t.name);case zv:case Vv:return II(e,t.id,t.name);case Bv:return Tp(e,ve({id:t.id,read:!0}));case qv:return e.update("items",n=>{const r=n.findIndex(i=>i.get("id")===t.id);return r>-1?n.delete(r):n});default:return e}}const xI=(e,t)=>Bc(`v1/media/${e}`,t),LI=(e,t)=>{const[n,r]=(t.focus??"").split(",");return{...e.toJS(),...t,meta:{focus:{x:parseFloat(n??"0"),y:parseFloat(r??"0")}}}},Eu=fe("compose/changeUpload",async({id:e,...t},{getState:n})=>{const r=n().compose.get("media_attachments").find(i=>i.get("id")===e);return r&&!r.get("unattached")?new Promise(i=>{i(LI(r,t))}):xI(e,t)},e=>({media:e,attached:typeof e.unattached<"u"&&!e.unattached}),{useLoadingBar:!1});function je(e){return e?(e^Math.random()*16>>e/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,je)}const MI=V({mounted:0,sensitive:!1,spoiler:!1,spoiler_text:"",privacy:null,id:null,text:"",focusDate:null,caretPosition:null,preselectDate:null,in_reply_to:null,is_composing:!1,is_submitting:!1,is_changing_upload:!1,is_uploading:!1,progress:0,isUploadingThumbnail:!1,thumbnailProgress:0,media_attachments:J(),pending_media_attachments:0,poll:null,suggestion_token:null,suggestions:J(),default_privacy:"public",default_sensitive:!1,default_language:"en",resetFileKey:Math.floor(Math.random()*65536),idempotencyKey:null,tagHistory:J()}),PI=V({options:J(["",""]),expires_in:24*3600,multiple:!1});function FI(e,t){let n=et([]);return t.getIn(["account","id"])!==at&&(n=n.add(`@${t.getIn(["account","acct"])} `)),n.union(t.get("mentions").filterNot(r=>r.get("id")===at).map(r=>`@${r.get("acct")} `)).join("")}function by(e){return e.withMutations(t=>{t.set("id",null),t.set("text",""),t.set("spoiler",!1),t.set("spoiler_text",""),t.set("is_submitting",!1),t.set("is_changing_upload",!1),t.set("in_reply_to",null),t.set("privacy",e.get("default_privacy")),t.set("sensitive",e.get("default_sensitive")),t.set("language",e.get("default_language")),t.update("media_attachments",n=>n.clear()),t.set("progress",0),t.set("poll",null),t.set("idempotencyKey",je())})}function UI(e,t,n){const r=e.get("media_attachments").size;return e.withMutations(i=>{t.get("type")==="image"&&(t=t.set("file",n)),i.update("media_attachments",s=>s.push(t.set("unattached",!0))),i.set("is_uploading",!1),i.set("is_processing",!1),i.set("progress",0),i.set("resetFileKey",Math.floor(Math.random()*65536)),i.set("idempotencyKey",je()),i.update("pending_media_attachments",s=>s-1),r===0&&(e.get("default_sensitive")||e.get("spoiler"))&&i.set("sensitive",!0)})}function kI(e,t){const n=e.get("media_attachments").size;return e.withMutations(r=>{r.update("media_attachments",i=>i.filterNot(s=>s.get("id")===t)),r.set("idempotencyKey",je()),n===1&&r.set("sensitive",!1)})}const DI=(e,t,n,r,i)=>e.withMutations(s=>{s.updateIn(i,o=>`${o.slice(0,t)}${r} ${o.slice(t+n.length)}`),s.set("suggestion_token",null),s.set("suggestions",J()),i.length===1&&i[0]==="text"&&(s.set("focusDate",new Date),s.set("caretPosition",t+r.length+1)),s.set("idempotencyKey",je())}),jI=(e,t,n,r,i)=>e.withMutations(s=>{s.updateIn(i,o=>`${o.slice(0,t+n.length)} ${o.slice(t+n.length)}`),s.set("suggestion_token",null),s.set("suggestions",J()),s.set("focusDate",new Date),s.set("caretPosition",t+n.length+1),s.set("idempotencyKey",je())}),$I=(e,t)=>{const n=e.get("tagHistory").map(s=>s.toLowerCase()),i=t.map(s=>({...s,lowerName:s.name.toLowerCase()})).sort((s,o)=>{const a=n.includes(s.lowerName),u=n.includes(o.lowerName);return a===u?0:a&&!u?-1:1});return i.forEach(s=>delete s.lowerName),i},qI=(e,t,n,r)=>{const i=e.get("text"),s=r?" "+n.native:n.native;return e.merge({text:`${i.slice(0,t)}${s} ${i.slice(t)}`,focusDate:new Date,caretPosition:t+s.length+1,idempotencyKey:je()})},BI=(e,t)=>{const n=["public","unlisted","private","direct"];return n[Math.max(n.indexOf(e),n.indexOf(t),0)]},HI=(e,t)=>(e=by(e.merge(t)),t.get("text")&&(e=e.set("text",t.get("text")).set("focusDate",new Date)),e),VI=new DOMParser,zI=e=>{const t=VI.parseFromString(e.get("content"),"text/html").documentElement;return e.get("mentions").forEach(n=>{t.querySelector(`a[href="${n.get("url")}"]`).textContent=`@${n.get("acct")}`}),t.innerHTML},Op=e=>{if(!e)return 24*3600;const t=(new Date(e).getTime()-Date.now())/1e3;return[300,1800,3600,21600,86400,259200,604800].find(n=>n>=t)||24*3600},wy=(e,t,n)=>{if(t=t.toLowerCase(),e.length<4){const i=n.filter(s=>s.toLowerCase().startsWith(t)&&!e.some(o=>o.type==="hashtag"&&o.name.toLowerCase()===s.toLowerCase()));e=e.concat(i.slice(0,4-e.length).toJS().map(s=>({type:"hashtag",name:s})))}const r=i=>{if(i.type!=="hashtag")return i;const s=n.find(o=>o.localeCompare(i.name,void 0,{sensitivity:"accent"})===0);return!s||s.toLowerCase()===s?i:{...i,name:s}};return e.map(r)},WI=(e,{accounts:t,emojis:n,tags:r,token:i})=>t?t.map(s=>({id:s.id,type:"account"})):n?n.map(s=>({...s,type:"emoji"})):wy($I(e,r.map(s=>({...s,type:"hashtag"}))),i.slice(1),e.get("tagHistory")),GI=(e,t)=>{const n=t.slice(1),r=e.get("suggestions").toJS();return e.merge({suggestions:J(wy(r,n,e.get("tagHistory"))),suggestion_token:t})},KI=(e,t,n,r)=>e.updateIn(["poll","options"],i=>{const s=i.set(t,n).filterNot(o=>o.trim().length===0);return s.size===0?s.push("").push(""):s.size<r?s.push(""):s}),Cp=(e,t)=>Math.min(Math.round(e/t*100),100),QI=(e=MI,t)=>{if(Eu.fulfilled.match(t))return e.set("is_changing_upload",!1).update("media_attachments",n=>n.map(r=>r.get("id")===t.payload.media.id?ve(t.payload.media).set("unattached",!t.payload.attached):r));if(Eu.pending.match(t))return e.set("is_changing_upload",!0);if(Eu.rejected.match(t))return e.set("is_changing_upload",!1);switch(t.type){case Si:return HI(e,t.state.get("compose"));case wv:return e.set("mounted",e.get("mounted")+1);case Tv:return e.set("mounted",Math.max(e.get("mounted")-1,0)).set("is_composing",!1);case QC:return e.withMutations(n=>{e.get("spoiler")||n.set("sensitive",!e.get("sensitive")),n.set("idempotencyKey",je())});case Ov:return e.withMutations(n=>{n.set("spoiler",!e.get("spoiler")),n.set("idempotencyKey",je()),e.get("media_attachments").size>=1&&!e.get("default_sensitive")&&n.set("sensitive",!e.get("spoiler"))});case Cv:return e.get("spoiler")?e.set("spoiler_text",t.text).set("idempotencyKey",je()):e;case Nv:return e.set("privacy",t.value).set("idempotencyKey",je());case Jg:return e.set("text",t.text).set("idempotencyKey",je());case Av:return e.set("is_composing",t.value);case rv:return e.withMutations(n=>{n.set("id",null),n.set("in_reply_to",t.status.get("id")),n.set("text",FI(e,t.status)),n.set("privacy",BI(t.status.get("visibility"),e.get("default_privacy"))),n.set("focusDate",new Date),n.set("caretPosition",null),n.set("preselectDate",new Date),n.set("idempotencyKey",je()),n.update("media_attachments",r=>r.filter(i=>i.get("unattached"))),t.status.get("language")&&!t.status.has("translation")?n.set("language",t.status.get("language")):n.set("language",e.get("default_language")),t.status.get("spoiler_text").length>0?(n.set("spoiler",!0),n.set("spoiler_text",t.status.get("spoiler_text")),n.get("media_attachments").size>=1&&n.set("sensitive",!0)):(n.set("spoiler",!1),n.set("spoiler_text",""))});case ev:return e.set("is_submitting",!0);case iv:case av:case tv:return by(e);case nv:return e.set("is_submitting",!1);case uv:return e.set("is_uploading",!0).update("pending_media_attachments",n=>n+1);case dv:return e.set("is_processing",!0);case cv:return UI(e,ve(t.media),t.file);case lv:return e.set("is_uploading",!1).set("is_processing",!1).set("progress",0).update("pending_media_attachments",n=>n-1);case pv:return kI(e,t.media_id);case fv:return e.set("progress",Cp(t.loaded,t.total));case hv:return e.set("isUploadingThumbnail",!0);case gv:return e.set("thumbnailProgress",Cp(t.loaded,t.total));case _v:return e.set("isUploadingThumbnail",!1);case mv:return e.set("isUploadingThumbnail",!1).update("media_attachments",n=>n.map(r=>r.get("id")===t.media.id?ve(t.media).set("unattached",r.get("unattached")):r));case ov:return e.withMutations(n=>{n.update("text",r=>[r.trim(),`@${t.account.get("acct")} `].filter(i=>i.length!==0).join(" ")),n.set("focusDate",new Date),n.set("caretPosition",null),n.set("idempotencyKey",je())});case sv:return e.withMutations(n=>{n.update("text",r=>[r.trim(),`@${t.account.get("acct")} `].filter(i=>i.length!==0).join(" ")),n.set("privacy","direct"),n.set("focusDate",new Date),n.set("caretPosition",null),n.set("idempotencyKey",je())});case vv:return e.update("suggestions",J(),n=>n.clear()).set("suggestion_token",null);case Sa:return e.set("suggestions",J(WI(e,t))).set("suggestion_token",t.token);case yv:return DI(e,t.position,t.token,t.completion,t.path);case Sv:return jI(e,t.position,t.token,t.completion,t.path);case Ev:return GI(e,t.token);case bv:return e.set("tagHistory",ve(t.tags));case or.type:return t.payload.statusId===e.get("in_reply_to")?e.set("in_reply_to",null):t.payload.statusId===e.get("id")?e.set("id",null):e;case Iv:return qI(e,t.position,t.emoji,t.needsSpace);case my:return e.withMutations(n=>{n.set("text",t.raw_text||Zo(zI(t.status))),n.set("in_reply_to",t.status.get("in_reply_to_id")),n.set("privacy",t.status.get("visibility")),n.set("media_attachments",t.status.get("media_attachments").map(r=>r.set("unattached",!0))),n.set("focusDate",new Date),n.set("caretPosition",null),n.set("idempotencyKey",je()),n.set("sensitive",t.status.get("sensitive")),n.set("language",t.status.get("language")),n.set("id",null),t.status.get("spoiler_text").length>0?(n.set("spoiler",!0),n.set("spoiler_text",t.status.get("spoiler_text"))):(n.set("spoiler",!1),n.set("spoiler_text","")),t.status.get("poll")&&n.set("poll",V({options:J(t.status.get("poll").options.map(r=>r.title)),multiple:t.status.get("poll").multiple,expires_in:Op(t.status.get("poll").expires_at)}))});case Fv:return e.withMutations(n=>{n.set("id",t.status.get("id")),n.set("text",t.text),n.set("in_reply_to",t.status.get("in_reply_to_id")),n.set("privacy",t.status.get("visibility")),n.set("media_attachments",t.status.get("media_attachments")),n.set("focusDate",new Date),n.set("caretPosition",null),n.set("idempotencyKey",je()),n.set("sensitive",t.status.get("sensitive")),n.set("language",t.status.get("language")),t.spoiler_text.length>0?(n.set("spoiler",!0),n.set("spoiler_text",t.spoiler_text)):(n.set("spoiler",!1),n.set("spoiler_text","")),t.status.get("poll")&&n.set("poll",V({options:J(t.status.get("poll").options.map(r=>r.title)),multiple:t.status.get("poll").multiple,expires_in:Op(t.status.get("poll").expires_at)}))});case Rv:return e.set("poll",PI);case xv:return e.set("poll",null);case Lv:return KI(e,t.index,t.title,t.maxOptions);case Mv:return e.update("poll",n=>n.set("expires_in",t.expiresIn).set("multiple",t.isMultiple));case tf:return e.set("language",t.language);case YC:return e.set("focusDate",new Date).update("text",n=>n.length>0?n:t.defaultText);case Pv:return e.update("media_attachments",n=>{const r=n.findIndex(o=>o.get("id")===t.a),i=n.get(r),s=n.findIndex(o=>o.get("id")===t.b);return n.splice(r,1).splice(s,0,i)});default:return e}},YI={inReplyTos:{},replies:{}},XI=(e,t,{ancestors:n,descendants:r})=>{var s;const i=({id:o,in_reply_to_id:a})=>{var u;if(a&&!e.inReplyTos[o]){const l=(u=e.replies)[a]??(u[a]=[]),c=l.findIndex(f=>yt(f,o)<0);l.splice(c+1,0,o),e.inReplyTos[o]=a}};n.forEach(i),n[0]&&i({id:t,in_reply_to_id:(s=n[n.length-1])==null?void 0:s.id}),r.forEach(i)},Ty=(e,t)=>{t.forEach(n=>{const r=e.inReplyTos[n],i=e.replies[n];if(r){const s=e.replies[r];s&&(e.replies[r]=s.filter(o=>o!==n))}i&&i.forEach(s=>{delete e.inReplyTos[s]}),delete e.inReplyTos[n],delete e.replies[n]})},Np=(e,t,n)=>{const r=n.filter(i=>i.get("account")===t.id).map(i=>i.get("id"));Ty(e,r.toArray())},ZI=(e,t)=>{var r,i;if(!t.in_reply_to_id)return;const n=(r=e.replies)[i=t.in_reply_to_id]??(r[i]=[]);e.inReplyTos[t.id]=t.in_reply_to_id,n.includes(t.id)||n.push(t.id)},JI=Kt(YI,e=>{e.addCase(ay.fulfilled,(t,n)=>{XI(t,n.meta.arg.statusId,n.payload.context)}).addCase(Fn,(t,n)=>{Np(t,n.payload.relationship,n.payload.statuses)}).addCase(Un,(t,n)=>{Np(t,n.payload.relationship,n.payload.statuses)}).addCase(or,(t,n)=>{Ty(t,[n.payload.statusId])}).addMatcher(t=>t.type===ef,(t,n)=>{ZI(t,n.status)})}),Oa=ee("domain_blocks/block/SUCCESS"),eR=ee("domain_blocks/unblock/SUCCESS"),tR=V({items:J(),isLoading:!1,hasMore:!0,mounted:!1}),Oy=e=>V({id:e.id,unread:e.unread,accounts:J(e.accounts.map(t=>t.id)),last_status:e.last_status?e.last_status.id:null}),nR=(e,t)=>e.update("items",n=>{const r=n.findIndex(s=>s.get("id")===t.id),i=Oy(t);return r===-1?n.unshift(i):n.set(r,i)}),rR=(e,t,n,r)=>{let i=J(t.map(Oy));return e.withMutations(s=>{i.isEmpty()||s.update("items",o=>(o=o.map(a=>{const u=i.findIndex(c=>c.get("id")===a.get("id"));if(u===-1)return a;const l=i.get(u);return i=i.delete(u),l}),o=o.concat(i),o.sortBy(a=>a.get("last_status"),(a,u)=>a===null||u===null?-1:yt(a,u)*-1))),!n&&!r&&s.set("hasMore",!1),s.set("isLoading",!1)})},Ap=(e,t)=>e.update("items",n=>n.filterNot(r=>r.get("accounts").some(i=>t.includes(i))));function iR(e=tR,t){switch(t.type){case Xv:return e.set("isLoading",!0);case Jv:return e.set("isLoading",!1);case Zv:return rR(e,t.conversations,t.next,t.isLoadingRecent);case ey:return nR(e,t.conversation);case Qv:return e.update("mounted",n=>n+1);case Yv:return e.update("mounted",n=>n-1);case ty:return e.update("items",n=>n.map(r=>r.get("id")===t.id?r.set("unread",!1):r));case Fn.type:case Un.type:return Ap(e,[t.payload.relationship.id]);case Oa.type:return Ap(e,t.payload.accounts);case ny:return e.update("items",n=>n.filterNot(r=>r.get("id")===t.id));default:return e}}const sR=J([]);function oR(e=sR,t){return t.type===Pg&&(e=ve(t.custom_emojis),Dg("",{custom:i0(e)})),e}const aR=ee("dropdownMenu/open"),uR=ee("dropdownMenu/close"),cR={openId:null,keyboard:!1,scrollKey:void 0},lR=Kt(cR,e=>{e.addCase(aR,(t,{payload:{id:n,keyboard:r,scrollKey:i}})=>{t.openId=n,t.keyboard=r,t.scrollKey=i}).addCase(uR,(t,{payload:{id:n}})=>{t.openId===n&&(t.openId=null,t.scrollKey=void 0)})}),fR="FILTERS_FETCH_REQUEST",Cy="FILTERS_FETCH_SUCCESS",dR="FILTERS_FETCH_FAIL",pR="FILTERS_STATUS_CREATE_REQUEST",hR="FILTERS_STATUS_CREATE_SUCCESS",mR="FILTERS_STATUS_CREATE_FAIL",_R="FILTERS_CREATE_REQUEST",Ny="FILTERS_CREATE_SUCCESS",gR="FILTERS_CREATE_FAIL",vD=(e,{contextType:t})=>n=>n(Ws({modalType:"FILTER",modalProps:{statusId:e==null?void 0:e.get("id"),contextType:t}})),yD=()=>e=>{e({type:fR,skipLoading:!0}),H().get("/api/v2/filters").then(({data:t})=>e({type:Cy,filters:t,skipLoading:!0})).catch(t=>e({type:dR,err:t,skipLoading:!0,skipAlert:!0}))},SD=(e,t,n)=>r=>{r(vR()),H().post(`/api/v2/filters/${e.filter_id}/statuses`,e).then(i=>{r(yR(i.data)),t&&t()}).catch(i=>{r(SR(i)),n&&n()})},vR=()=>({type:pR}),yR=e=>({type:hR,filter_status:e}),SR=e=>({type:mR,error:e}),ED=(e,t,n)=>r=>{r(ER()),H().post("/api/v2/filters",e).then(i=>{r(bR(i.data)),t&&t(i.data)}).catch(i=>{r(wR(i)),n&&n()})},ER=()=>({type:_R}),bR=e=>({type:Ny,filter:e}),wR=e=>({type:gR,error:e}),Ay=(e,t)=>{const n=ve({id:t.id,title:t.title,context:t.context,filter_action:t.filter_action,keywords:t.keywords,expires_at:t.expires_at?Date.parse(t.expires_at):null});return ke(e.get(t.id),n)?e:e.update(t.id,V(),r=>r.mergeWith((i,s)=>s===void 0?i:s,n))},Ip=(e,t)=>(t.forEach(n=>{e=Ay(e,n)}),e);function TR(e=V(),t){switch(t.type){case Ny:return Ay(e,t.filter);case Cy:return Ip(V(),t.filters);case G_:return Ip(e,t.filters);default:return e}}const Iy="HEIGHT_CACHE_SET",Ry="HEIGHT_CACHE_CLEAR";function bD(e,t,n){return{type:Iy,key:e,id:t,height:n}}function wD(){return{type:Ry}}const OR=V(),CR=(e,t,n,r)=>e.update(t,V(),i=>i.set(n,r)),NR=()=>V();function AR(e=OR,t){switch(t.type){case Iy:return CR(e,t.key,t.id,t.height);case Ry:return NR();default:return e}}const xy="HISTORY_FETCH_REQUEST",Ly="HISTORY_FETCH_SUCCESS",My="HISTORY_FETCH_FAIL",TD=e=>(t,n)=>{n().getIn(["history",e,"loading"])||(t(IR(e)),H().get(`/api/v1/statuses/${e}/history`).then(({data:i})=>{t(ae(i.map(s=>s.account))),t(RR(e,i))}).catch(i=>t(xR(i))))},IR=e=>({type:xy,statusId:e}),RR=(e,t)=>({type:Ly,statusId:e,history:t}),xR=e=>({type:My,error:e}),bu=V({loading:!1,items:J()}),LR=V();function MR(e=LR,t){switch(t.type){case xy:return e.update(t.statusId,bu,n=>n.withMutations(r=>{r.set("loading",!0),r.set("items",J())}));case Ly:return e.update(t.statusId,bu,n=>n.withMutations(r=>{r.set("loading",!1),r.set("items",ve(t.history.map((i,s)=>({...i,account:i.account.id,original:s===0})).reverse()))}));case My:return e.update(t.statusId,bu,n=>n.set("loading",!1));default:return e}}const PR=e=>an("v1/lists",e),FR=e=>Bc(`v1/lists/${e.id}`,e),UR=()=>Gt("v1/lists"),OD=e=>Gt(`v1/lists/${e}/accounts`,{limit:0}),CD=e=>Gt(`v1/accounts/${e}/lists`),ND=(e,t)=>an(`v1/lists/${e}/accounts`,{account_ids:[t]}),AD=(e,t)=>Eh(`v1/lists/${e}/accounts`,{account_ids:[t]}),kR=fe("list/create",e=>PR(e)),DR=fe("list/update",e=>FR(e)),jR=fe("lists/fetch",()=>UR()),$R=Se({id:"",title:"",exclusive:!1,replies_policy:"list"});function qR(e){return $R(e)}const BR="LIST_FETCH_REQUEST",Py="LIST_FETCH_SUCCESS",lf="LIST_FETCH_FAIL",HR="LIST_DELETE_REQUEST",ff="LIST_DELETE_SUCCESS",VR="LIST_DELETE_FAIL",ID=e=>(t,n)=>{n().getIn(["lists",e])||(t(zR(e)),H().get(`/api/v1/lists/${e}`).then(({data:r})=>t(WR(r))).catch(r=>t(GR(e,r))))},zR=e=>({type:BR,id:e}),WR=e=>({type:Py,list:e}),GR=(e,t)=>({type:lf,id:e,error:t}),RD=e=>t=>{t(KR(e)),H().delete(`/api/v1/lists/${e}`).then(()=>t(QR(e))).catch(n=>t(YR(e,n)))},KR=e=>({type:HR,id:e}),QR=e=>({type:ff,id:e}),YR=(e,t)=>({type:VR,id:e,error:t}),XR=V(),Rc=(e,t)=>e.set(t.id,qR(t)),ZR=(e,t)=>(t.forEach(n=>{e=Rc(e,n)}),e),JR=(e=XR,t)=>{if(kR.fulfilled.match(t)||DR.fulfilled.match(t))return Rc(e,t.payload);if(jR.fulfilled.match(t))return ZR(e,t.payload);switch(t.type){case Py:return Rc(e,t.list);case ff:case lf:return e.set(t.id,null);default:return e}},ex={home:"0",notifications:"0"},tx=Kt(ex,e=>{e.addCase(wg.fulfilled,(t,{payload:{home:n,notifications:r}})=>{n&&(t.home=n),r&&(t.notifications=r)}),e.addCase(Tg.fulfilled,(t,{payload:{markers:{home:n,notifications:r}}})=>{n&&yt(n.last_read_id,t.home)>0&&(t.home=n.last_read_id),r&&yt(r.last_read_id,t.notifications)>0&&(t.notifications=r.last_read_id)})}),nx=V({accept_content_types:[]});function rx(e=nx,t){switch(t.type){case Si:return e.merge(t.state.get("media_attachments"));default:return e}}const ix=V({streaming_api_base_url:null,layout:fm(),permissions:"0"});function sx(e=ix,t){switch(t.type){case Si:return e.merge(t.state.get("meta")).delete("access_token").set("permissions",t.state.getIn(["role","permissions"]));case GA.type:return e.set("layout",t.payload.layout);default:return e}}const Rp=Se({modalType:"ACTIONS",modalProps:Se({})()}),ox=Se({ignoreFocus:!1,stack:mi()})(),ax=(e,{modalType:t,ignoreFocus:n})=>{var r;return t===void 0||t===((r=e.get("stack").get(0))==null?void 0:r.get("modalType"))?e.set("ignoreFocus",!!n).update("stack",i=>i.shift()):e},ux=(e,t,n,r)=>e.withMutations(i=>{i.set("ignoreFocus",!1),i.update("stack",s=>{let o=s;if(r){const a=o.first();a&&(o=o.shift().unshift(Rp({modalType:a.modalType,modalProps:{...a.modalProps,...r}})))}return o=o.unshift(Rp({modalType:t,modalProps:n})),o})}),cx=(e=ox,t)=>Ws.match(t)?ux(e,t.payload.modalType,t.payload.modalProps,t.payload.previousModalProps):BC.match(t)?ax(e,t.payload):or.match(t)?e.update("stack",n=>n.filterNot(r=>r.get("modalProps").statusId===t.payload.statusId)):e,lx=ee("navigation/open"),fx=ee("navigation/close"),dx=ee("navigation/toggle"),px={open:!1},hx=Kt(px,e=>{e.addCase(lx,t=>{t.open=!0}).addCase(fx,t=>{t.open=!1}).addCase(dx,t=>{t.open=!t.open})}),Fy=8;function Uy(e){const{target_account:t,...n}=e;return{targetAccountId:t.id,...n}}function ky(e){const{target_account:t,...n}=e;return{targetAccountId:t.id,...n}}function Dy(e){const{sample_account_ids:t,...n}=e;switch(n.type){case"favourite":case"reblog":case"status":case"mention":case"poll":case"update":{const{status_id:r,...i}=n;return{statusId:r??void 0,sampleAccountIds:t,partial:!1,...i}}case"admin.report":{const{report:r,...i}=n;return{report:Uy(r),sampleAccountIds:t,partial:!1,...i}}case"severed_relationships":return{...n,partial:!1,event:n.event,sampleAccountIds:t};case"moderation_warning":{const{moderation_warning:r,...i}=n;return{...i,partial:!1,moderationWarning:ky(r),sampleAccountIds:t}}case"annual_report":{const{annual_report:r,...i}=n;return{...i,partial:!1,annualReport:r,sampleAccountIds:t}}default:return{sampleAccountIds:t,partial:!1,...n}}}function mx(e){var n;const t={sampleAccountIds:[e.account.id],group_key:e.group_key,notifications_count:1,most_recent_notification_id:e.id,page_min_id:e.id,page_max_id:e.id,latest_page_notification_at:e.created_at,partial:!0};switch(e.type){case"favourite":case"reblog":case"status":case"mention":case"poll":case"update":return{...t,type:e.type,statusId:(n=e.status)==null?void 0:n.id};case"admin.report":return{...t,type:e.type,report:Uy(e.report)};case"severed_relationships":return{...t,type:e.type,event:e.event};case"moderation_warning":return{...t,type:e.type,moderationWarning:ky(e.moderation_warning)};default:return{...t,type:e.type}}}const xp=50,_x={groups:[],pendingGroups:[],scrolledToTop:!1,isLoading:!1,mergedNotifications:"ok",lastReadId:"0",readMarkerId:"0",mounted:0,isTabVisible:!0};function Lp(e,t,n){return e=e.map(r=>{if(r.type!=="gap"&&(!n||r.type===n)){const i=r.sampleAccountIds.length;r.sampleAccountIds=r.sampleAccountIds.filter(a=>!t.includes(a));const s=r.sampleAccountIds.length,o=i-s;r.notifications_count-=o}return r}).filter(r=>r.type==="gap"||r.sampleAccountIds.length>0),Ca(e),e}function Mp(e,t){return e=e.filter(n=>n.type==="gap"||!("statusId"in n)||n.statusId!==t),Ca(e),e}function fo(e,t,n){e.groups=Lp(e.groups,t,n),e.pendingGroups=Lp(e.pendingGroups,t,n)}function gx(e,t){e.groups=Mp(e.groups,t),e.pendingGroups=Mp(e.pendingGroups,t)}function ys(e){return e.type!=="gap"}function Ca(e){for(let t=0;t<e.length;t++){const n=e[t];if((n==null?void 0:n.type)==="gap"){let r=n,i=t+1;for(;i<e.length;i++){const s=e[i];if((s==null?void 0:s.type)==="gap")r=s;else break}i-t>1&&e.splice(t,i-t,{type:"gap",maxId:n.maxId,sinceId:r.sinceId})}}}function vx(e,t){if(t>0){const n=e[t-1],r=e[t];(n==null?void 0:n.type)==="gap"&&(r==null?void 0:r.type)==="gap"&&e.splice(t-1,2,{type:"gap",maxId:n.maxId,sinceId:r.sinceId})}}function yx(e,t,n){var i;n.includes(t.type)||(t={...t,group_key:`ungrouped-${t.id}`});const r=e.findIndex(s=>s.type!=="gap"&&s.group_key===t.group_key);if(e.length>0&&((i=e[0])==null?void 0:i.type)==="gap"&&(e[0].maxId=t.id),r>-1){const s=e[r];s&&s.type!=="gap"&&!s.sampleAccountIds.includes(t.account.id)&&(s.sampleAccountIds.unshift(t.account.id)>Fy&&s.sampleAccountIds.pop(),s.most_recent_notification_id=t.id,s.page_max_id=t.id,s.latest_page_notification_at=t.created_at,s.notifications_count+=1,e.splice(r,1),vx(e,r),e.unshift(s))}else e.unshift(mx(t))}function po(e){e.scrolledToTop&&e.groups.length>xp&&(e.groups.splice(xp),Sx(e.groups))}function jy({isTabVisible:e,scrolledToTop:t,mounted:n,lastReadId:r,groups:i},s=!1){var c;const o=n>0,a=i.findLast(ys),l=!(((c=i.at(-1))==null?void 0:c.type)==="gap")||r==="0"||(a==null?void 0:a.page_min_id)&&yt(a.page_min_id,r)<=0;return e&&(s||t)&&o&&l}function dr(e,t=void 0){jy(e)&&(t=t??e.groups.find(ys),t!=null&&t.page_max_id&&yt(e.lastReadId,t.page_max_id)<0&&(e.lastReadId=t.page_max_id))}function Pp(e){jy(e)&&(e.readMarkerId=e.lastReadId)}function wu(e,t,n){var l,c;const r=e.findIndex(f=>f.type==="gap"&&f.sinceId===t.sinceId&&f.maxId===t.maxId);if(r<0)return e;const i=(l=n.at(-1))==null?void 0:l.page_min_id,s=e.slice(0,r).filter(ys).map(f=>f.group_key),o=n.map(f=>Dy(f)).filter(f=>!s.includes(f.group_key)),a=o.map(f=>f.group_key),u=t.sinceId;return n.length>0&&!(i&&u&&yt(i,u)<=0)&&o.push({type:"gap",maxId:(c=n.at(-1))==null?void 0:c.page_max_id,sinceId:u}),e=e.filter(f=>f.type!=="gap"&&!a.includes(f.group_key)),e.splice(r,1,...o),Ca(e),e}function Fp(e){var t,n;if(((t=e[0])==null?void 0:t.type)==="gap")return e[0].maxId=void 0,e[0];{const r={type:"gap",sinceId:(n=e[0])==null?void 0:n.page_min_id};return e.unshift(r),r}}function Sx(e){const t=e.at(-1);if((t==null?void 0:t.type)==="gap")return t.sinceId=void 0,t;{const n={type:"gap",maxId:t==null?void 0:t.page_min_id};return e.push(n),n}}const Ex=Kt(_x,e=>{e.addCase(Sr.fulfilled,(t,n)=>{t.groups=n.payload.map(r=>r.type==="gap"?r:Dy(r)),t.isLoading=!1,t.mergedNotifications="ok",dr(t)}).addCase(pu.fulfilled,(t,n)=>{t.groups=wu(t.groups,n.meta.arg.gap,n.payload.notifications),t.isLoading=!1,dr(t)}).addCase(hu.fulfilled,(t,n)=>{if(Yn){const r=Fp(t.pendingGroups);t.pendingGroups=wu(t.pendingGroups,r,n.payload.notifications)}else{const r=Fp(t.groups);t.groups=wu(t.groups,r,n.payload.notifications)}t.isLoading=!1,dr(t),po(t)}).addCase(nA.fulfilled,(t,n)=>{if(n.payload){const{notification:r,groupedTypes:i}=n.payload;yx(Yn?t.pendingGroups:t.groups,r,i),dr(t),po(t)}}).addCase(Bg,(t,n)=>{var r,i;if(n.payload.timeline==="home"){const s=Yn?t.pendingGroups:t.groups;s.length>0&&((r=s[0])==null?void 0:r.type)!=="gap"&&s.unshift({type:"gap",sinceId:(i=s[0])==null?void 0:i.page_min_id})}}).addCase(or,(t,n)=>{gx(t,n.payload.statusId)}).addCase(sA.pending,t=>{t.groups=[],t.pendingGroups=[]}).addCase(Fn,(t,n)=>{fo(t,[n.payload.relationship.id])}).addCase(Un,(t,n)=>{n.payload.relationship.muting_notifications&&fo(t,[n.payload.relationship.id])}).addCase(Oa,(t,n)=>{fo(t,n.payload.accounts.map(r=>r.id))}).addCase(rA,t=>{t.pendingGroups.forEach(n=>{if(n.type!=="gap"){const r=t.groups.findIndex(i=>ys(i)&&i.group_key===n.group_key);if(r>-1){const i=t.groups[r];i&&i.type!=="gap"&&(n.partial&&(n.notifications_count+=i.notifications_count,n.sampleAccountIds=n.sampleAccountIds.concat(i.sampleAccountIds).slice(0,Fy)),t.groups.splice(r,1))}}}),t.groups=t.pendingGroups.concat(t.groups),t.pendingGroups=[],Ca(t.groups),po(t)}).addCase(iA.fulfilled,(t,n)=>{t.scrolledToTop=n.payload.top,dr(t),po(t)}).addCase(oA,t=>{const n=t.groups.find(ys);n!=null&&n.page_max_id&&yt(t.lastReadId,n.page_max_id)<0&&(t.lastReadId=n.page_max_id),t.readMarkerId=t.lastReadId}).addCase(Tg.fulfilled,(t,n)=>{n.payload.markers.notifications&&yt(t.lastReadId,n.payload.markers.notifications.last_read_id)<0&&(t.lastReadId=n.payload.markers.notifications.last_read_id,t.readMarkerId=n.payload.markers.notifications.last_read_id)}).addCase(aA.fulfilled,t=>{t.mounted+=1,Pp(t),dr(t)}).addCase(uA,t=>{t.mounted-=1}).addCase(zA,t=>{t.isTabVisible=!0,Pp(t),dr(t)}).addCase(WA,t=>{t.isTabVisible=!1}).addCase(cA.fulfilled,(t,n)=>{n.payload.deferredRefresh&&(t.mergedNotifications="needs-reload")}).addMatcher(We(ga,va),(t,n)=>{fo(t,[n.payload.id],"follow_request")}).addMatcher(We(Sr.pending,pu.pending,hu.pending),t=>{t.isLoading=!0}).addMatcher(We(Sr.rejected,pu.rejected,hu.rejected),t=>{t.isLoading=!1})}),bx=()=>Gt("v2/notifications/policy"),wx=e=>Bc("v2/notifications/policy",e),Tx=fe("notificationPolicy/fetch",()=>bx()),Ox=fe("notificationPolicy/update",e=>wx(e)),Ks=ee("notificationPolicy/decreasePendingRequestsCount"),Cx=Kt(null,e=>{e.addCase(Ks,(t,n)=>{t&&(t.summary.pending_requests_count-=n.payload)}).addMatcher(We(Tx.fulfilled,Ox.fulfilled),(t,n)=>n.payload)});function $y(e,t){const n=[],r=[];t.forEach(i=>{i.type==="admin.report"&&n.push(i.report.target_account),i.type==="moderation_warning"&&n.push(i.moderation_warning.target_account),"status"in i&&i.status&&r.push(i.status)}),n.length>0&&e(ae(n)),r.length>0&&e(He(r))}const Tu=fe("notificationRequests/fetch",async(e,{getState:t})=>{var r;let n;return t().notificationRequests.items.length>0&&(n=(r=t().notificationRequests.items[0])==null?void 0:r.id),iy({since_id:n})},({requests:e,links:t},{dispatch:n})=>{const r=t.refs.find(i=>i.rel==="next");return n(ae(e.map(i=>i.account))),{requests:e,next:r==null?void 0:r.uri}},{condition:(e,{getState:t})=>!t().notificationRequests.isLoading}),Ou=fe("notificationRequest/fetch",async({id:e})=>GN(e),{condition:({id:e},{getState:t})=>{var n;return!(((n=t().notificationRequests.current.item)==null?void 0:n.id)===e||t().notificationRequests.current.isLoading)}}),Cu=fe("notificationRequests/expand",async(e,{getState:t})=>{const n=t().notificationRequests.next;if(!n)throw new Error("missing URL");return iy(void 0,n)},({requests:e,links:t},{dispatch:n})=>{const r=t.refs.find(i=>i.rel==="next");return n(ae(e.map(i=>i.account))),{requests:e,next:r==null?void 0:r.uri}},{condition:(e,{getState:t})=>!!t().notificationRequests.next&&!t().notificationRequests.isLoading}),Nu=fe("notificationRequest/fetchNotifications",async({accountId:e},{getState:t})=>{var r;const n=(r=t().notificationRequests.current.notifications.items[0])==null?void 0:r.get("id");return ry({since_id:n,account_id:e})},({notifications:e,links:t},{dispatch:n})=>{const r=t.refs.find(i=>i.rel==="next");return $y(n,e),{notifications:e,next:r==null?void 0:r.uri}},{condition:({accountId:e},{getState:t})=>{var r;const n=t().notificationRequests.current;return!(((r=n.item)==null?void 0:r.account_id)===e&&n.notifications.isLoading)}}),Au=fe("notificationRequest/expandNotifications",async(e,{getState:t})=>{const n=t().notificationRequests.current.notifications.next;if(!n)throw new Error("missing URL");return ry(void 0,n)},({notifications:e,links:t},{dispatch:n})=>{const r=t.refs.find(i=>i.rel==="next");return $y(n,e),{notifications:e,next:r==null?void 0:r.uri}},{condition:({accountId:e},{getState:t})=>{var r;return!!t().notificationRequests.current.notifications.next&&!t().notificationRequests.current.notifications.isLoading&&((r=t().notificationRequests.current.item)==null?void 0:r.account_id)===e}}),Nx=fe("notificationRequest/accept",({id:e})=>KN(e),(e,{dispatch:t,discardLoadData:n})=>(t(Ks(1)),n)),Ax=fe("notificationRequest/dismiss",({id:e})=>QN(e),(e,{dispatch:t,discardLoadData:n})=>(t(Ks(1)),n)),Ix=fe("notificationRequests/acceptBulk",({ids:e})=>YN(e),(e,{dispatch:t,discardLoadData:n,actionArg:{ids:r}})=>(t(Ks(r.length)),n)),Rx=fe("notificationRequests/dismissBulk",({ids:e})=>XN(e),(e,{dispatch:t,discardLoadData:n,actionArg:{ids:r}})=>(t(Ks(r.length)),n));function Iu(e){const{account:t,notifications_count:n,...r}=e;return{account_id:t.id,notifications_count:+n,...r}}const xx=V({browserSupport:!1,browserPermission:"default"}),Up=e=>V({id:e.id,type:e.type,account:e.account.id,created_at:e.created_at,status:e.status?e.status.id:null,report:e.report?ve(e.report):null,event:e.event?ve(e.event):null,moderation_warning:e.moderation_warning?ve(e.moderation_warning):null});function Lx(e=xx,t){switch(t.type){case Lg:return e.set("browserSupport",t.value);case Mg:return e.set("browserPermission",t.value);default:return e}}const kp={items:[],isLoading:!1,next:null,current:{item:null,isLoading:!1,removed:!1,notifications:{isLoading:!1,items:[],next:null}}},Dp=(e,t)=>{var n;((n=e.current.item)==null?void 0:n.id)===t&&(e.current.removed=!0),e.items=e.items.filter(r=>r.id!==t)},jp=(e,t)=>{var n;((n=e.current.item)==null?void 0:n.account_id)===t&&(e.current.removed=!0),e.items=e.items.filter(r=>r.account_id!==t)},Mx=Kt(kp,e=>{e.addCase(Tu.fulfilled,(t,n)=>{t.items=n.payload.requests.map(Iu).concat(t.items),t.isLoading=!1,t.next??(t.next=n.payload.next??null)}).addCase(Cu.fulfilled,(t,n)=>{t.items=t.items.concat(n.payload.requests.map(Iu)),t.isLoading=!1,t.next=n.payload.next??null}).addCase(Fn,(t,n)=>{jp(t,n.payload.relationship.id)}).addCase(Un,(t,n)=>{n.payload.relationship.muting_notifications&&jp(t,n.payload.relationship.id)}).addCase(Ou.pending,t=>{t.current={...kp.current,isLoading:!0}}).addCase(Ou.rejected,t=>{t.current.isLoading=!1}).addCase(Ou.fulfilled,(t,n)=>{t.current.isLoading=!1,t.current.item=Iu(n.payload)}).addCase(Nu.fulfilled,(t,n)=>{var r;t.current.notifications.isLoading=!1,t.current.notifications.items.unshift(...n.payload.notifications.map(Up)),(r=t.current.notifications).next??(r.next=n.payload.next??null)}).addCase(Au.fulfilled,(t,n)=>{t.current.notifications.isLoading=!1,t.current.notifications.items.push(...n.payload.notifications.map(Up)),t.current.notifications.next=n.payload.next??null}).addMatcher(We(Tu.pending,Cu.pending),t=>{t.isLoading=!0}).addMatcher(We(Tu.rejected,Cu.rejected),t=>{t.isLoading=!1}).addMatcher(We(Nx.pending,Ax.pending),(t,n)=>{Dp(t,n.meta.arg.id)}).addMatcher(We(Ix.pending,Rx.pending),(t,n)=>{n.meta.arg.ids.forEach(r=>{Dp(t,r)})}).addMatcher(We(Nu.pending,Au.pending),t=>{t.current.notifications.isLoading=!0}).addMatcher(We(Nu.rejected,Au.rejected),t=>{t.current.notifications.isLoading=!1})}),Px=ee("pip/remove"),qy=ee("pip/deploy"),xD=Lt("pip/deploy",(e,{dispatch:t,getState:n})=>{const{statusId:r}=e;n().hasIn(["statuses",r])&&t(qy(e))}),Ru={type:null,muted:!1,volume:0,currentTime:0},Fx=(e=Ru,t)=>qy.match(t)?{statusId:t.payload.statusId,accountId:t.payload.accountId,type:t.payload.playerType,...t.payload.props}:Px.match(t)||or.match(t)&&e.type&&e.statusId===t.payload.statusId?Ru:e,Ux={},kx=(e,t)=>{if(!t)return;const n=e[t.id];if(!n)return;const r=vi(n.emojis);t.options.forEach((i,s)=>{const o=n.options[s];o&&(o.translation=H_(i,r))})},Dx=(e,t)=>{var n;(n=e[t])==null||n.options.forEach(r=>{r.translation=null})},jx=(e=Ux,t)=>(z_.match(t)?t.payload.polls.forEach(n=>{e[n.id]=n}):t.type===of?kx(e,t.translation.poll):t.type===af&&Dx(e,t.pollId),e),xu=V({subscription:null,alerts:V({follow:!1,follow_request:!1,favourite:!1,reblog:!1,mention:!1,poll:!1}),isSubscribed:!1,browserSupport:!1});function $x(e=xu,t){switch(t.type){case Si:{const n=t.state.get("push_subscription");return n?e.set("subscription",V({id:n.get("id"),endpoint:n.get("endpoint")})).set("alerts",n.get("alerts")||xu.get("alerts")).set("isSubscribed",!0):e}case Ng:return e.set("subscription",V({id:t.subscription.id,endpoint:t.subscription.endpoint})).set("alerts",V(t.subscription.alerts)).set("isSubscribed",!0);case Cg:return e.set("browserSupport",t.value);case Ag:return xu;case Ig:return e.setIn(t.path,t.value);default:return e}}const qx=Se({blocked_by:!1,blocking:!1,domain_blocking:!1,endorsed:!1,followed_by:!1,following:!1,id:"",languages:null,muting_notifications:!1,muting:!1,note:"",notifying:!1,requested_by:!1,requested:!1,showing_reblogs:!1});function Bx(e){return qx(e)}const Hx=fe("account_note/submit",({accountId:e,note:t})=>Gw(e,t),e=>({relationship:e})),Vx=V(),By=(e,t)=>e.set(t.id,Bx(t)),zx=(e,t)=>(t.forEach(n=>{e=By(e,n)}),e),$p=(e,t,n)=>e.withMutations(r=>{t.forEach(i=>{r.setIn([i,"domain_blocking"],n)})}),Wx=(e=Vx,t)=>ga.match(t)?e.setIn([t.payload.id,"followed_by"],!0).setIn([t.payload.id,"requested_by"],!1):va.match(t)?e.setIn([t.payload.id,"followed_by"],!1).setIn([t.payload.id,"requested_by"],!1):Zl.match(t)?t.payload.notification.type==="follow_request"?e.setIn([t.payload.notification.account.id,"requested_by"],!0):e:K_.match(t)?e.getIn([t.payload.id,"following"])?e:e.setIn([t.payload.id,t.payload.locked?"requested":"following"],!0):Q_.match(t)?e.setIn([t.payload.id,t.payload.locked?"requested":"following"],!1):Y_.match(t)?e.setIn([t.payload.id,"following"],!1):X_.match(t)?e.setIn([t.payload.id,"following"],!0):Yl.match(t)||_a.match(t)||Fn.match(t)||Z_.match(t)||Un.match(t)||J_.match(t)||eg.match(t)||tg.match(t)||Po(Hx)(t)||Po(J1)(t)?By(e,t.payload.relationship):ng.match(t)?zx(e,t.payload.relationships):Oa.match(t)?$p(e,t.payload.accounts,!0):eR.match(t)?$p(e,t.payload.accounts,!1):e,qp=e=>({accounts:e.accounts.map(t=>t.id),statuses:e.statuses.map(t=>t.id),hashtags:e.hashtags}),Gx={recent:[],q:"",type:void 0,loading:!1,results:void 0},Kx=Kt(Gx,e=>{e.addCase(fu.fulfilled,(t,n)=>{t.q=n.meta.arg.q,t.type=n.meta.arg.type,t.results=qp(n.payload),t.loading=!1}),e.addCase(du.fulfilled,(t,n)=>{const r=n.meta.arg.type,i=qp(n.payload);t.type=r,t.results={accounts:t.results?[...t.results.accounts,...i.accounts]:i.accounts,statuses:t.results?[...t.results.statuses,...i.statuses]:i.statuses,hashtags:t.results?[...t.results.hashtags,...i.hashtags]:i.hashtags},t.loading=!1}),e.addCase(Ea,(t,n)=>{t.recent=n.payload}),e.addMatcher(We(du.pending,fu.pending),(t,n)=>{t.type=n.meta.arg.type,t.loading=!0}),e.addMatcher(We(du.rejected,fu.rejected),t=>{t.loading=!1})}),Hy="Server_FETCH_REQUEST",Vy="Server_FETCH_SUCCESS",zy="Server_FETCH_FAIL",Wy="SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST",Gy="SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS",Ky="SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL",Qy="EXTENDED_DESCRIPTION_REQUEST",Yy="EXTENDED_DESCRIPTION_SUCCESS",Xy="EXTENDED_DESCRIPTION_FAIL",Zy="SERVER_DOMAIN_BLOCKS_FETCH_REQUEST",Jy="SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS",eS="SERVER_DOMAIN_BLOCKS_FETCH_FAIL",LD=()=>(e,t)=>{t().getIn(["server","server","isLoading"])||(e(Qx()),H().get("/api/v2/instance").then(({data:n})=>{n.contact.account&&e(yi(n.contact.account)),e(Yx(n))}).catch(n=>e(Xx(n))))},Qx=()=>({type:Hy}),Yx=e=>({type:Vy,server:e}),Xx=e=>({type:zy,error:e}),MD=()=>e=>{e(Zx()),H().get("/api/v1/instance/translation_languages").then(({data:t})=>{e(Jx(t))}).catch(t=>e(eL(t)))},Zx=()=>({type:Wy}),Jx=e=>({type:Gy,translationLanguages:e}),eL=e=>({type:Ky,error:e}),PD=()=>(e,t)=>{t().getIn(["server","extendedDescription","isLoading"])||(e(tL()),H().get("/api/v1/instance/extended_description").then(({data:n})=>e(nL(n))).catch(n=>e(rL(n))))},tL=()=>({type:Qy}),nL=e=>({type:Yy,description:e}),rL=e=>({type:Xy,error:e}),FD=()=>(e,t)=>{t().getIn(["server","domainBlocks","isLoading"])||(e(iL()),H().get("/api/v1/instance/domain_blocks").then(({data:n})=>e(Bp(!0,n))).catch(n=>{n.response.status===404?e(Bp(!1,[])):e(sL(n))}))},iL=()=>({type:Zy}),Bp=(e,t)=>({type:Jy,isAvailable:e,blocks:t}),sL=e=>({type:eS,error:e}),oL=V({server:V({isLoading:!1}),extendedDescription:V({isLoading:!1}),domainBlocks:V({isLoading:!1,isAvailable:!0,items:J()})});function aL(e=oL,t){switch(t.type){case Hy:return e.setIn(["server","isLoading"],!0);case Vy:return e.set("server",ve(t.server)).setIn(["server","isLoading"],!1);case zy:return e.setIn(["server","isLoading"],!1);case Wy:return e.setIn(["translationLanguages","isLoading"],!0);case Gy:return e.setIn(["translationLanguages","items"],ve(t.translationLanguages)).setIn(["translationLanguages","isLoading"],!1);case Ky:return e.setIn(["translationLanguages","isLoading"],!1);case Qy:return e.setIn(["extendedDescription","isLoading"],!0);case Yy:return e.set("extendedDescription",ve(t.description)).setIn(["extendedDescription","isLoading"],!1);case Xy:return e.setIn(["extendedDescription","isLoading"],!1);case Zy:return e.setIn(["domainBlocks","isLoading"],!0);case Jy:return e.setIn(["domainBlocks","items"],ve(t.blocks)).setIn(["domainBlocks","isLoading"],!1).setIn(["domainBlocks","isAvailable"],t.isAvailable);case eS:return e.setIn(["domainBlocks","isLoading"],!1);default:return e}}const tS="COLUMN_ADD",nS="COLUMN_REMOVE",rS="COLUMN_MOVE",iS="COLUMN_PARAMS_CHANGE";function UD(e,t){return n=>{n({type:tS,id:e,params:t}),n(xr())}}function kD(e){return t=>{t({type:nS,uuid:e}),t(xr())}}function DD(e,t){return n=>{n({type:rS,uuid:e,direction:t}),n(xr())}}function jD(e,t,n){return r=>{r({type:iS,uuid:e,path:t,value:n}),r(xr())}}const uL=V({saved:!0,skinTone:1,trends:V({show:!0}),home:V({shows:V({quote:!0,reblog:!0,reply:!0}),regex:V({body:""})}),notifications:V({alerts:V({follow:!1,follow_request:!1,favourite:!1,reblog:!1,mention:!1,poll:!1,status:!1,update:!1,"admin.sign_up":!1,"admin.report":!1}),quickFilter:V({active:"all",show:!0,advanced:!1}),dismissPermissionBanner:!1,showUnread:!0,minimizeFilteredBanner:!1,shows:V({follow:!0,follow_request:!1,favourite:!0,reblog:!0,mention:!0,poll:!0,status:!0,update:!0,"admin.sign_up":!0,"admin.report":!0}),sounds:V({follow:!0,follow_request:!1,favourite:!0,reblog:!0,mention:!0,poll:!0,status:!0,update:!0,"admin.sign_up":!0,"admin.report":!0}),group:V({follow:!0})}),firehose:V({onlyMedia:!1}),community:V({regex:V({body:""})}),public:V({regex:V({body:""})}),direct:V({regex:V({body:""})}),dismissed_banners:V({public_timeline:!1,community_timeline:!1,"home/follow-suggestions":!1,"explore/links":!1,"explore/statuses":!1,"explore/tags":!1})}),cL=ve([{id:"COMPOSE",uuid:je(),params:{}},{id:"HOME",uuid:je(),params:{}},{id:"NOTIFICATIONS",uuid:je(),params:{}}]),lL=(e,t)=>e.mergeDeep(t).update("columns",(n=cL)=>n),fL=(e,t,n)=>{const r=e.get("columns"),i=r.findIndex(a=>a.get("uuid")===t),s=i+n;let o;return o=r.splice(i,1),o=o.splice(s,0,r.get(i)),e.set("columns",o).set("saved",!1)},dL=(e,t,n,r)=>{const i=e.get("columns"),s=i.findIndex(a=>a.get("uuid")===t),o=i.update(s,a=>a.updateIn(["params",...n],()=>r));return e.set("columns",o).set("saved",!1)},pL=(e,t)=>e.update("frequentlyUsedEmojis",V(),n=>n.update(t.id,0,r=>r+1)).set("saved",!1),hL=(e,t)=>e.update("frequentlyUsedLanguages",V(),n=>n.update(t,0,r=>r+1)).set("saved",!1),Hp=(e,t)=>e.update("columns",n=>n.filterNot(r=>r.get("id")==="LIST"&&r.get("params").get("id")===t));function mL(e=uL,t){switch(t.type){case Si:return lL(e,t.state.get("settings"));case xg:case jg:return e.setIn(t.path,t.value).set("saved",!1);case tS:return e.update("columns",n=>n.push(ve({id:t.id,uuid:je(),params:t.params}))).set("saved",!1);case nS:return e.update("columns",n=>n.filterNot(r=>r.get("uuid")===t.uuid)).set("saved",!1);case rS:return fL(e,t.uuid,t.direction);case iS:return dL(e,t.uuid,t.path,t.value);case qg:return pL(e,t.emoji);case tf:return hL(e,t.language);case $g:return e.set("saved",!0);case lf:return t.error.response.status===404?Hp(e,t.id):e;case ff:return Hp(e,t.id);default:return e}}const sS="BOOKMARKED_STATUSES_FETCH_REQUEST",oS="BOOKMARKED_STATUSES_FETCH_SUCCESS",aS="BOOKMARKED_STATUSES_FETCH_FAIL",uS="BOOKMARKED_STATUSES_EXPAND_REQUEST",cS="BOOKMARKED_STATUSES_EXPAND_SUCCESS",lS="BOOKMARKED_STATUSES_EXPAND_FAIL";function $D(){return(e,t)=>{t().getIn(["status_lists","bookmarks","isLoading"])||(e(_L()),H().get("/api/v1/bookmarks").then(n=>{const r=Me(n).refs.find(i=>i.rel==="next");e(He(n.data)),e(gL(n.data,r?r.uri:null))}).catch(n=>{e(vL(n))}))}}function _L(){return{type:sS}}function gL(e,t){return{type:oS,statuses:e,next:t}}function vL(e){return{type:aS,error:e}}function qD(){return(e,t)=>{const n=t().getIn(["status_lists","bookmarks","next"],null);n===null||t().getIn(["status_lists","bookmarks","isLoading"])||(e(yL()),H().get(n).then(r=>{const i=Me(r).refs.find(s=>s.rel==="next");e(He(r.data)),e(SL(r.data,i?i.uri:null))}).catch(r=>{e(EL(r))}))}}function yL(){return{type:uS}}function SL(e,t){return{type:cS,statuses:e,next:t}}function EL(e){return{type:lS,error:e}}const fS="FAVOURITED_STATUSES_FETCH_REQUEST",dS="FAVOURITED_STATUSES_FETCH_SUCCESS",pS="FAVOURITED_STATUSES_FETCH_FAIL",hS="FAVOURITED_STATUSES_EXPAND_REQUEST",mS="FAVOURITED_STATUSES_EXPAND_SUCCESS",_S="FAVOURITED_STATUSES_EXPAND_FAIL";function BD(){return(e,t)=>{t().getIn(["status_lists","favourites","isLoading"])||(e(bL()),H().get("/api/v1/favourites").then(n=>{const r=Me(n).refs.find(i=>i.rel==="next");e(He(n.data)),e(wL(n.data,r?r.uri:null))}).catch(n=>{e(TL(n))}))}}function bL(){return{type:fS,skipLoading:!0}}function wL(e,t){return{type:dS,statuses:e,next:t,skipLoading:!0}}function TL(e){return{type:pS,error:e,skipLoading:!0}}function HD(){return(e,t)=>{const n=t().getIn(["status_lists","favourites","next"],null);n===null||t().getIn(["status_lists","favourites","isLoading"])||(e(OL()),H().get(n).then(r=>{const i=Me(r).refs.find(s=>s.rel==="next");e(He(r.data)),e(CL(r.data,i?i.uri:null))}).catch(r=>{e(NL(r))}))}}function OL(){return{type:hS}}function CL(e,t){return{type:mS,statuses:e,next:t}}function NL(e){return{type:_S,error:e}}const AL=(e,t)=>an(`v1/statuses/${e}/reblog`,{visibility:t}),IL=e=>an(`v1/statuses/${e}/unreblog`),xc=fe("status/reblog",({statusId:e,visibility:t})=>AL(e,t),(e,{dispatch:t,discardLoadData:n})=>(t(Pt(e.reblog)),n)),Lc=fe("status/unreblog",({statusId:e})=>IL(e),(e,{dispatch:t,discardLoadData:n})=>(t(Pt(e)),n)),gS="REBLOGS_EXPAND_REQUEST",vS="REBLOGS_EXPAND_SUCCESS",yS="REBLOGS_EXPAND_FAIL",SS="FAVOURITE_REQUEST",ES="FAVOURITE_SUCCESS",bS="FAVOURITE_FAIL",wS="UNFAVOURITE_REQUEST",TS="UNFAVOURITE_SUCCESS",OS="UNFAVOURITE_FAIL",CS="REBLOGS_FETCH_REQUEST",NS="REBLOGS_FETCH_SUCCESS",AS="REBLOGS_FETCH_FAIL",IS="FAVOURITES_FETCH_REQUEST",RS="FAVOURITES_FETCH_SUCCESS",xS="FAVOURITES_FETCH_FAIL",LS="FAVOURITES_EXPAND_REQUEST",MS="FAVOURITES_EXPAND_SUCCESS",PS="FAVOURITES_EXPAND_FAIL",RL="PIN_REQUEST",FS="PIN_SUCCESS",xL="PIN_FAIL",LL="UNPIN_REQUEST",US="UNPIN_SUCCESS",ML="UNPIN_FAIL",kS="BOOKMARK_REQUEST",DS="BOOKMARKED_SUCCESS",jS="BOOKMARKED_FAIL",$S="UNBOOKMARKED_REQUEST",qS="UNBOOKMARKED_SUCCESS",BS="UNBOOKMARKED_FAIL";function PL(e){return function(t){t(UL(e)),H().post(`/api/v1/statuses/${e.get("id")}/favourite`).then(function(n){t(Pt(n.data)),t(kL(e))}).catch(function(n){t(DL(e,n))})}}function FL(e){return t=>{t(jL(e)),H().post(`/api/v1/statuses/${e.get("id")}/unfavourite`).then(n=>{t(Pt(n.data)),t($L(e))}).catch(n=>{t(qL(e,n))})}}function UL(e){return{type:SS,status:e,skipLoading:!0}}function kL(e){return{type:ES,status:e,skipLoading:!0}}function DL(e,t){return{type:bS,status:e,error:t,skipLoading:!0}}function jL(e){return{type:wS,status:e,skipLoading:!0}}function $L(e){return{type:TS,status:e,skipLoading:!0}}function qL(e,t){return{type:OS,status:e,error:t,skipLoading:!0}}function VD(e){return function(t){t(BL(e)),H().post(`/api/v1/statuses/${e.get("id")}/bookmark`).then(function(n){t(Pt(n.data)),t(HL(e,n.data))}).catch(function(n){t(VL(e,n))})}}function zD(e){return t=>{t(zL(e)),H().post(`/api/v1/statuses/${e.get("id")}/unbookmark`).then(n=>{t(Pt(n.data)),t(WL(e,n.data))}).catch(n=>{t(GL(e,n))})}}function BL(e){return{type:kS,status:e}}function HL(e,t){return{type:DS,status:e,response:t}}function VL(e,t){return{type:jS,status:e,error:t}}function zL(e){return{type:$S,status:e}}function WL(e,t){return{type:qS,status:e,response:t}}function GL(e,t){return{type:BS,status:e,error:t}}function WD(e){return t=>{t(KL(e)),H().get(`/api/v1/statuses/${e}/reblogged_by`).then(n=>{const r=Me(n).refs.find(i=>i.rel==="next");t(ae(n.data)),t(QL(e,n.data,r?r.uri:null)),t(Ve(n.data.map(i=>i.id)))}).catch(n=>{t(YL(e,n))})}}function KL(e){return{type:CS,id:e}}function QL(e,t,n){return{type:NS,id:e,accounts:t,next:n}}function YL(e,t){return{type:AS,id:e,error:t}}function GD(e){return(t,n)=>{const r=n().getIn(["user_lists","reblogged_by",e,"next"]);r!==null&&(t(XL(e)),H().get(r).then(i=>{const s=Me(i).refs.find(o=>o.rel==="next");t(ae(i.data)),t(ZL(e,i.data,s?s.uri:null)),t(Ve(i.data.map(o=>o.id)))}).catch(i=>t(JL(e,i))))}}function XL(e){return{type:gS,id:e}}function ZL(e,t,n){return{type:vS,id:e,accounts:t,next:n}}function JL(e,t){return{type:yS,id:e,error:t}}function KD(e){return t=>{t(eM(e)),H().get(`/api/v1/statuses/${e}/favourited_by`).then(n=>{const r=Me(n).refs.find(i=>i.rel==="next");t(ae(n.data)),t(tM(e,n.data,r?r.uri:null)),t(Ve(n.data.map(i=>i.id)))}).catch(n=>{t(nM(e,n))})}}function eM(e){return{type:IS,id:e}}function tM(e,t,n){return{type:RS,id:e,accounts:t,next:n}}function nM(e,t){return{type:xS,id:e,error:t}}function QD(e){return(t,n)=>{const r=n().getIn(["user_lists","favourited_by",e,"next"]);r!==null&&(t(rM(e)),H().get(r).then(i=>{const s=Me(i).refs.find(o=>o.rel==="next");t(ae(i.data)),t(iM(e,i.data,s?s.uri:null)),t(Ve(i.data.map(o=>o.id)))}).catch(i=>t(sM(e,i))))}}function rM(e){return{type:LS,id:e}}function iM(e,t,n){return{type:MS,id:e,accounts:t,next:n}}function sM(e,t){return{type:PS,id:e,error:t}}function YD(e){return t=>{t(oM(e)),H().post(`/api/v1/statuses/${e.get("id")}/pin`).then(n=>{t(Pt(n.data)),t(aM(e))}).catch(n=>{t(uM(e,n))})}}function oM(e){return{type:RL,status:e,skipLoading:!0}}function aM(e){return{type:FS,status:e,skipLoading:!0}}function uM(e,t){return{type:xL,status:e,error:t,skipLoading:!0}}function XD(e){return t=>{t(cM(e)),H().post(`/api/v1/statuses/${e.get("id")}/unpin`).then(n=>{t(Pt(n.data)),t(lM(e))}).catch(n=>{t(fM(e,n))})}}function cM(e){return{type:LL,status:e,skipLoading:!0}}function lM(e){return{type:US,status:e,skipLoading:!0}}function fM(e,t){return{type:ML,status:e,error:t,skipLoading:!0}}function Vp(e,t){return n=>{e.get("reblogged")?n(Lc({statusId:e.get("id")})):n(xc({statusId:e.get("id"),visibility:t}))}}function ZD(e,t=!1){return(n,r)=>{const i=r();let s=i.statuses.get(e);s&&(s=s.set("account",i.accounts.get(s.get("account"))),n(u0&&!t?Ws({modalType:"BOOST",modalProps:{status:s,onReblog:(o,a)=>n(Vp(o,a))}}):Vp(s)))}}function JD(e){return(t,n)=>{const i=n().statuses.get(e);i&&(i.get("favourited")?t(FL(i)):t(PL(i)))}}const dM="PINNED_STATUSES_FETCH_REQUEST",HS="PINNED_STATUSES_FETCH_SUCCESS",pM="PINNED_STATUSES_FETCH_FAIL";function e5(){return e=>{e(hM()),H().get(`/api/v1/accounts/${at}/statuses`,{params:{pinned:!0}}).then(t=>{e(He(t.data)),e(mM(t.data,null))}).catch(t=>{e(_M(t))})}}function hM(){return{type:dM}}function mM(e,t){return{type:HS,statuses:e,next:t}}function _M(e){return{type:pM,error:e}}const VS="TRENDS_TAGS_FETCH_REQUEST",zS="TRENDS_TAGS_FETCH_SUCCESS",WS="TRENDS_TAGS_FETCH_FAIL",GS="TRENDS_LINKS_FETCH_REQUEST",KS="TRENDS_LINKS_FETCH_SUCCESS",QS="TRENDS_LINKS_FETCH_FAIL",YS="TRENDS_STATUSES_FETCH_REQUEST",XS="TRENDS_STATUSES_FETCH_SUCCESS",ZS="TRENDS_STATUSES_FETCH_FAIL",JS="TRENDS_STATUSES_EXPAND_REQUEST",eE="TRENDS_STATUSES_EXPAND_SUCCESS",tE="TRENDS_STATUSES_EXPAND_FAIL",t5=()=>e=>{e(gM()),H().get("/api/v1/trends/tags").then(({data:t})=>e(vM(t))).catch(t=>e(yM(t)))},gM=()=>({type:VS,skipLoading:!0}),vM=e=>({type:zS,trends:e,skipLoading:!0}),yM=e=>({type:WS,error:e,skipLoading:!0,skipAlert:!0}),n5=()=>e=>{e(SM()),H().get("/api/v1/trends/links",{params:{limit:20}}).then(({data:t})=>{e(ae(t.flatMap(n=>n.authors.map(r=>r.account)).filter(n=>!!n))),e(EM(t))}).catch(t=>e(bM(t)))},SM=()=>({type:GS,skipLoading:!0}),EM=e=>({type:KS,trends:e,skipLoading:!0}),bM=e=>({type:QS,error:e,skipLoading:!0,skipAlert:!0}),r5=()=>(e,t)=>{t().getIn(["status_lists","trending","isLoading"])||(e(wM()),H().get("/api/v1/trends/statuses").then(n=>{const r=Me(n).refs.find(i=>i.rel==="next");e(He(n.data)),e(TM(n.data,r?r.uri:null))}).catch(n=>e(OM(n))))},wM=()=>({type:YS,skipLoading:!0}),TM=(e,t)=>({type:XS,statuses:e,next:t,skipLoading:!0}),OM=e=>({type:ZS,error:e,skipLoading:!0,skipAlert:!0}),i5=()=>(e,t)=>{const n=t().getIn(["status_lists","trending","next"],null);n===null||t().getIn(["status_lists","trending","isLoading"])||(e(CM()),H().get(n).then(r=>{const i=Me(r).refs.find(s=>s.rel==="next");e(He(r.data)),e(NM(r.data,i?i.uri:null))}).catch(r=>{e(AM(r))}))},CM=()=>({type:JS}),NM=(e,t)=>({type:eE,statuses:e,next:t}),AM=e=>({type:tE,error:e}),IM=V({favourites:V({next:null,loaded:!1,items:et()}),bookmarks:V({next:null,loaded:!1,items:et()}),pins:V({next:null,loaded:!1,items:et()}),trending:V({next:null,loaded:!1,items:et()})}),ho=(e,t,n,r)=>e.update(t,i=>i.withMutations(s=>{s.set("next",r),s.set("loaded",!0),s.set("isLoading",!1),s.set("items",et(n.map(o=>o.id)))})),Lu=(e,t,n,r)=>e.update(t,i=>i.withMutations(s=>{s.set("next",r),s.set("isLoading",!1),s.set("items",s.get("items").union(n.map(o=>o.id)))})),Mu=(e,t,n)=>e.updateIn([t,"items"],r=>r.includes(n.get("id"))?r:et([n.get("id")]).union(r)),Pu=(e,t,n)=>e.updateIn([t,"items"],r=>r.delete(n.get("id")));function RM(e=IM,t){switch(t.type){case fS:case hS:return e.setIn(["favourites","isLoading"],!0);case pS:case _S:return e.setIn(["favourites","isLoading"],!1);case dS:return ho(e,"favourites",t.statuses,t.next);case mS:return Lu(e,"favourites",t.statuses,t.next);case sS:case uS:return e.setIn(["bookmarks","isLoading"],!0);case aS:case lS:return e.setIn(["bookmarks","isLoading"],!1);case oS:return ho(e,"bookmarks",t.statuses,t.next);case cS:return Lu(e,"bookmarks",t.statuses,t.next);case YS:case JS:return e.setIn(["trending","isLoading"],!0);case ZS:case tE:return e.setIn(["trending","isLoading"],!1);case XS:return ho(e,"trending",t.statuses,t.next);case eE:return Lu(e,"trending",t.statuses,t.next);case ES:return Mu(e,"favourites",t.status);case TS:return Pu(e,"favourites",t.status);case DS:return Mu(e,"bookmarks",t.status);case qS:return Pu(e,"bookmarks",t.status);case HS:return ho(e,"pins",t.statuses,t.next);case FS:return Mu(e,"pins",t.status);case US:return Pu(e,"pins",t.status);case Fn.type:case Un.type:return e.updateIn(["trending","items"],et(),n=>n.filterNot(r=>t.payload.statuses.getIn([r,"account"])===t.payload.relationship.id));default:return e}}const nE=(e,t)=>e.set(t.id,ve(t)),xM=(e,t)=>e.withMutations(n=>t.forEach(r=>nE(n,r))),rE=(e,t,n)=>(n.forEach(r=>{e=rE(e,r,[])}),e.delete(t)),LM=(e,t,n)=>e.withMutations(r=>{r.setIn([t,"translation"],ve(K1(n,r.get(t))));const i=r.getIn([t,"media_attachments"]);n.media_attachments&&i&&n.media_attachments.forEach(s=>{const o=i.findIndex(a=>a.get("id")===s.id);r.setIn([t,"media_attachments",o,"translation"],ve({description:s.description}))})}),MM=(e,t)=>e.withMutations(n=>{n.deleteIn([t,"translation"]),n.getIn([t,"media_attachments"]).forEach((r,i)=>n.deleteIn([t,"media_attachments",i,"translation"]))}),PM=V();function FM(e=PM,t){switch(t.type){case uy:return e.setIn([t.id,"isLoading"],!0);case cy:return e.delete(t.id);case Q1:return nE(e,t.status);case W_:return xM(e,t.statuses);case SS:return e.setIn([t.status.get("id"),"favourited"],!0);case bS:return e.get(t.status.get("id"))===void 0?e:e.setIn([t.status.get("id"),"favourited"],!1);case wS:return e.setIn([t.status.get("id"),"favourited"],!1);case OS:return e.get(t.status.get("id"))===void 0?e:e.setIn([t.status.get("id"),"favourited"],!0);case kS:return e.get(t.status.get("id"))===void 0?e:e.setIn([t.status.get("id"),"bookmarked"],!0);case jS:return e.get(t.status.get("id"))===void 0?e:e.setIn([t.status.get("id"),"bookmarked"],!1);case $S:return e.get(t.status.get("id"))===void 0?e:e.setIn([t.status.get("id"),"bookmarked"],!1);case BS:return e.get(t.status.get("id"))===void 0?e:e.setIn([t.status.get("id"),"bookmarked"],!0);case ly:return e.setIn([t.id,"muted"],!0);case fy:return e.setIn([t.id,"muted"],!1);case dy:return e.withMutations(n=>{t.ids.forEach(r=>{e.get(r)!==void 0&&n.setIn([r,"hidden"],!1)})});case py:return e.withMutations(n=>{t.ids.forEach(r=>{e.get(r)!==void 0&&n.setIn([r,"hidden"],!0)})});case hy:return e.setIn([t.id,"collapsed"],t.isCollapsed);case or.type:return rE(e,t.payload.statusId,t.payload.references);case of:return LM(e,t.id,t.translation);case af:return MM(e,t.id);default:return xc.pending.match(t)?e.setIn([t.meta.arg.statusId,"reblogged"],!0):xc.rejected.match(t)?e.get(t.meta.arg.statusId)===void 0?e:e.setIn([t.meta.arg.statusId,"reblogged"],!1):Lc.pending.match(t)?e.setIn([t.meta.arg.statusId,"reblogged"],!1):Lc.rejected.match(t)?e.get(t.meta.arg.statusId)===void 0?e:e.setIn([t.meta.arg.statusId,"reblogged"],!0):e}}const UM=e=>Gt("v2/suggestions",{limit:e}),kM=e=>Eh(`v1/suggestions/${e}`),Fu=fe("suggestions/fetch",()=>UM(20),(e,{dispatch:t})=>(t(ae(e.map(n=>n.account))),t(Ve(e.map(n=>n.account.id))),e)),DM=fe("suggestions/dismiss",({accountId:e})=>kM(e)),jM=e=>({sources:e.sources,account_id:e.account.id}),$M={items:[],isLoading:!1},qM=Kt($M,e=>{e.addCase(Fu.pending,t=>{t.isLoading=!0}),e.addCase(Fu.fulfilled,(t,n)=>{t.items=n.payload.map(jM),t.isLoading=!1}),e.addCase(Fu.rejected,t=>{t.isLoading=!1}),e.addCase(DM.pending,(t,n)=>{t.items=t.items.filter(r=>r.account_id!==n.meta.arg.accountId)}),e.addCase(Oa,(t,n)=>{t.items=t.items.filter(r=>!n.payload.accounts.some(i=>i.id===r.account_id))}),e.addMatcher(We(Fn,Un),(t,n)=>{t.items=t.items.filter(r=>r.account_id!==n.payload.relationship.id)})}),BM=V(),kt=V({unread:0,online:!1,top:!0,isLoading:!1,hasMore:!0,pendingItems:J(),items:J()}),Uu=e=>e===vs||e===Zg,HM=(e,t,n,r,i,s,o)=>e.update(t,kt,a=>a.withMutations(u=>{u.set("isLoading",!1),u.set("isPartial",i),!r&&!s&&u.set("hasMore",!1),t.endsWith(":pinned")?u.set("items",n.map(l=>l.get("id"))):n.isEmpty()||(o=s&&(o||!u.get("pendingItems").isEmpty()),u.update(o?"pendingItems":"items",J(),l=>{const c=n.map(h=>h.get("id")),f=l.findLastIndex(h=>!Uu(h)&&yt(h,c.last())>=0)+1,d=l.take(f).findLastIndex(h=>!Uu(h)&&yt(h,c.first())>0)+1;let p=et(c).withMutations(h=>{const _=l.slice(d,f).filter(g=>!Uu(g)&&yt(g,c.last())<0);h.union(_),h.subtract(l.take(d),l.skip(f))}).toList();return i&&(d===0||l.get(d-1)!==vs)&&(p=p.unshift(vs)),l.take(d).concat(p,l.skip(f))}))})),VM=(e,t,n,r)=>{const i=e.getIn([t,"top"]);if(r||!e.getIn([t,"pendingItems"]).isEmpty())return e.getIn([t,"pendingItems"],J()).includes(n.get("id"))||e.getIn([t,"items"],J()).includes(n.get("id"))?e:e.update(t,kt,l=>l.update("pendingItems",c=>c.unshift(n.get("id"))).update("unread",c=>c+1));const s=e.getIn([t,"items"],J()),o=s.includes(n.get("id")),a=e.getIn([t,"unread"],0);if(o)return e;let u=s;return e.update(t,kt,l=>l.withMutations(c=>{i||c.set("unread",a+1),i&&s.size>40&&(u=u.take(20)),c.set("items",u.unshift(n.get("id")))}))},df=(e,t,n,r=null)=>(e.keySeq().forEach(i=>{if(r===null||i!==`account:${r}`&&!i.startsWith(`account:${r}:`)){const s=o=>o.filterNot(a=>a===t);e=e.updateIn([i,"items"],s).updateIn([i,"pendingItems"],s)}}),n.forEach(i=>{e=df(e,i,[],r)}),e),zM=(e,t)=>e.set(t,kt),WM=(e,t,n)=>{let r;return n.forEach(i=>{i.get("account")===t.id&&(r=n.filter(s=>s.get("reblog")===i.get("id")).map(s=>s.get("id")).valueSeq().toJSON(),e=df(e,i.get("id"),r,t.id))}),e},GM=(e,t,n,r)=>{const i=s=>s.filterNot(o=>r.getIn([o,"account"])===n.id);return t.updateIn([e,"items"],J(),i).updateIn([e,"pendingItems"],J(),i)},KM=(e,t,n)=>e.update(t,kt,r=>r.withMutations(i=>{n&&i.set("unread",i.get("pendingItems").size),i.set("top",n)})),QM=(e,t)=>e.get("online")?e:e.withMutations(n=>{n.update(t?"pendingItems":"items",r=>r.first()?r.unshift(vs):r),n.set("online",!0)});function YM(e=BM,t){switch(t.type){case Kg:return e.update(t.timeline,kt,n=>n.update("items",r=>n.get("pendingItems").concat(r.take(40))).set("pendingItems",J()).set("unread",0));case Vg:return e.update(t.timeline,kt,n=>n.set("isLoading",!0));case Wg:return e.update(t.timeline,kt,n=>n.set("isLoading",!1));case zg:return HM(e,t.timeline,ve(t.statuses),t.next,t.partial,t.isLoadingRecent,t.usePendingItems);case ef:return VM(e,t.timeline,ve(t.status),t.usePendingItems);case or.type:return df(e,t.payload.statusId,t.payload.references,t.payload.reblogOf);case Hg:return zM(e,t.timeline);case Fn.type:case Un.type:return WM(e,t.payload.relationship,t.payload.statuses);case _a.type:return GM("home",e,t.payload.relationship,t.payload.statuses);case Gg:return KM(e,t.timeline,t.top);case Qg:return e.update(t.timeline,kt,n=>QM(n,t.usePendingItems));case Bg.type:return e.update(t.payload.timeline,kt,n=>n.set("online",!1).update(t.payload.usePendingItems?"pendingItems":"items",r=>r.first()?r.unshift(vs):r));case Yg:return e.update(t.timeline,kt,n=>n.set("isPartial",!0).set("items",J()).set("pendingItems",J()).set("unread",0));case Xg:return e.update(t.timeline,kt,n=>n.update("items",J(),r=>r.includes(t.key)?r:r.insert(t.index,t.key)));default:return e}}const XM=V({tags:V({items:J(),isLoading:!1}),links:V({items:J(),isLoading:!1})});function ZM(e=XM,t){switch(t.type){case VS:return e.setIn(["tags","isLoading"],!0);case zS:return e.withMutations(n=>{n.setIn(["tags","items"],ve(t.trends)),n.setIn(["tags","isLoading"],!1)});case WS:return e.setIn(["tags","isLoading"],!1);case GS:return e.setIn(["links","isLoading"],!0);case KS:return e.withMutations(n=>{n.setIn(["links","items"],ve(t.trends)),n.setIn(["links","isLoading"],!1)});case QS:return e.setIn(["links","isLoading"],!1);default:return e}}const iE=(e,t=20)=>Gt("v1/directory",{...e,limit:t}),ku=fe("directory/fetch",async e=>iE(e),(e,{dispatch:t})=>(t(ae(e)),t(Ve(e.map(n=>n.id))),{accounts:e})),Du=fe("directory/expand",async(e,{getState:t})=>{const n=t().user_lists.getIn(["directory","items"]);return iE({...e,offset:n.size},20)},(e,{dispatch:t})=>(t(ae(e)),t(Ve(e.map(n=>n.id))),{accounts:e})),ju=fe("accounts/featured_tags",({accountId:e})=>Qw(e)),sE="BLOCKS_FETCH_REQUEST",oE="BLOCKS_FETCH_SUCCESS",aE="BLOCKS_FETCH_FAIL",uE="BLOCKS_EXPAND_REQUEST",cE="BLOCKS_EXPAND_SUCCESS",lE="BLOCKS_EXPAND_FAIL";function s5(){return e=>{e(JM()),H().get("/api/v1/blocks").then(t=>{const n=Me(t).refs.find(r=>r.rel==="next");e(ae(t.data)),e(eP(t.data,n?n.uri:null)),e(Ve(t.data.map(r=>r.id)))}).catch(t=>e(tP(t)))}}function JM(){return{type:sE}}function eP(e,t){return{type:oE,accounts:e,next:t}}function tP(e){return{type:aE,error:e}}function o5(){return(e,t)=>{const n=t().getIn(["user_lists","blocks","next"]);n!==null&&(e(nP()),H().get(n).then(r=>{const i=Me(r).refs.find(s=>s.rel==="next");e(ae(r.data)),e(rP(r.data,i?i.uri:null)),e(Ve(r.data.map(s=>s.id)))}).catch(r=>e(iP(r))))}}function nP(){return{type:uE}}function rP(e,t){return{type:cE,accounts:e,next:t}}function iP(e){return{type:lE,error:e}}function a5(e){return t=>{t(Ws({modalType:"BLOCK",modalProps:{accountId:e.get("id"),acct:e.get("acct")}}))}}const fE="MUTES_FETCH_REQUEST",dE="MUTES_FETCH_SUCCESS",pE="MUTES_FETCH_FAIL",hE="MUTES_EXPAND_REQUEST",mE="MUTES_EXPAND_SUCCESS",_E="MUTES_EXPAND_FAIL";function u5(){return e=>{e(sP()),H().get("/api/v1/mutes").then(t=>{const n=Me(t).refs.find(r=>r.rel==="next");e(ae(t.data)),e(oP(t.data,n?n.uri:null)),e(Ve(t.data.map(r=>r.id)))}).catch(t=>e(aP(t)))}}function sP(){return{type:fE}}function oP(e,t){return{type:dE,accounts:e,next:t}}function aP(e){return{type:pE,error:e}}function c5(){return(e,t)=>{const n=t().getIn(["user_lists","mutes","next"]);n!==null&&(e(uP()),H().get(n).then(r=>{const i=Me(r).refs.find(s=>s.rel==="next");e(ae(r.data)),e(cP(r.data,i?i.uri:null)),e(Ve(r.data.map(s=>s.id)))}).catch(r=>e(lP(r))))}}function uP(){return{type:hE}}function cP(e,t){return{type:mE,accounts:e,next:t}}function lP(e){return{type:_E,error:e}}function l5(e){return t=>{t(Ws({modalType:"MUTE",modalProps:{accountId:e.get("id"),acct:e.get("acct")}}))}}const Vn=V({next:null,isLoading:!1,items:J()}),fP=V({followers:Vn,following:Vn,reblogged_by:Vn,favourited_by:Vn,follow_requests:Vn,blocks:Vn,mutes:Vn,featured_tags:Vn}),An=(e,t,n,r)=>e.setIn(t,V({next:r,items:J(n.map(i=>i.id)),isLoading:!1})),zn=(e,t,n,r)=>e.updateIn(t,i=>i.set("next",r).set("isLoading",!1).update("items",s=>s.concat(n.map(o=>o.id)))),dP=(e,t)=>e.updateIn(["follow_requests","items"],n=>n.filterNot(r=>r===t.account.id).unshift(t.account.id)),pP=(e,t)=>{const n={...e,accountId:t};return ve(n)},hP=(e,t,n,r)=>e.setIn(t,V({items:J(n.map(i=>pP(i,r)).sort((i,s)=>s.get("statuses_count")-i.get("statuses_count"))),isLoading:!1}));function mP(e=fP,t){switch(t.type){case sg:return An(e,["followers",t.id],t.accounts,t.next);case ug:return zn(e,["followers",t.id],t.accounts,t.next);case ig:case ag:return e.setIn(["followers",t.id,"isLoading"],!0);case og:case cg:return e.setIn(["followers",t.id,"isLoading"],!1);case fg:return An(e,["following",t.id],t.accounts,t.next);case hg:return zn(e,["following",t.id],t.accounts,t.next);case lg:case pg:return e.setIn(["following",t.id,"isLoading"],!0);case dg:case mg:return e.setIn(["following",t.id,"isLoading"],!1);case NS:return An(e,["reblogged_by",t.id],t.accounts,t.next);case vS:return zn(e,["reblogged_by",t.id],t.accounts,t.next);case CS:case gS:return e.setIn(["reblogged_by",t.id,"isLoading"],!0);case AS:case yS:return e.setIn(["reblogged_by",t.id,"isLoading"],!1);case RS:return An(e,["favourited_by",t.id],t.accounts,t.next);case MS:return zn(e,["favourited_by",t.id],t.accounts,t.next);case IS:case LS:return e.setIn(["favourited_by",t.id,"isLoading"],!0);case xS:case PS:return e.setIn(["favourited_by",t.id,"isLoading"],!1);case Zl.type:return t.payload.notification.type==="follow_request"?dP(e,t.payload.notification):e;case gg:return An(e,["follow_requests"],t.accounts,t.next);case Sg:return zn(e,["follow_requests"],t.accounts,t.next);case _g:case yg:return e.setIn(["follow_requests","isLoading"],!0);case vg:case Eg:return e.setIn(["follow_requests","isLoading"],!1);case ga.type:case va.type:return e.updateIn(["follow_requests","items"],n=>n.filterNot(r=>r===t.payload.id));case oE:return An(e,["blocks"],t.accounts,t.next);case cE:return zn(e,["blocks"],t.accounts,t.next);case sE:case uE:return e.setIn(["blocks","isLoading"],!0);case aE:case lE:return e.setIn(["blocks","isLoading"],!1);case dE:return An(e,["mutes"],t.accounts,t.next);case mE:return zn(e,["mutes"],t.accounts,t.next);case fE:case hE:return e.setIn(["mutes","isLoading"],!0);case pE:case _E:return e.setIn(["mutes","isLoading"],!1);default:return Qi.fulfilled.match(t)?An(e,["featured_accounts",t.meta.arg.accountId],t.payload,void 0):Qi.pending.match(t)?e.setIn(["featured_accounts",t.meta.arg.accountId,"isLoading"],!0):Qi.rejected.match(t)?e.setIn(["featured_accounts",t.meta.arg.accountId,"isLoading"],!1):ju.fulfilled.match(t)?hP(e,["featured_tags",t.meta.arg.accountId],t.payload,t.meta.arg.accountId):ju.pending.match(t)?e.setIn(["featured_tags",t.meta.arg.accountId,"isLoading"],!0):ju.rejected.match(t)?e.setIn(["featured_tags",t.meta.arg.accountId,"isLoading"],!1):ku.fulfilled.match(t)?An(e,["directory"],t.payload.accounts,void 0):Du.fulfilled.match(t)?zn(e,["directory"],t.payload.accounts,void 0):ku.pending.match(t)||Du.pending.match(t)?e.setIn(["directory","isLoading"],!0):ku.rejected.match(t)||Du.rejected.match(t)?e.setIn(["directory","isLoading"],!1):e}}const gE={announcements:RI,dropdownMenu:lR,timelines:YM,meta:sx,alerts:OI,loadingBar:qo.loadingBarReducer,modal:cx,user_lists:mP,status_lists:RM,accounts:_I,accounts_map:bI,accounts_familiar_followers:yI,statuses:FM,relationships:Wx,settings:mL,push_notifications:$x,server:aL,contexts:JI,compose:QI,search:Kx,media_attachments:rx,notifications:Lx,notificationGroups:Ex,height_cache:AR,custom_emojis:oR,lists:JR,filters:TR,conversations:iR,suggestions:qM,polls:jx,trends:ZM,markers:tx,picture_in_picture:Fx,history:MR,notificationPolicy:Cx,notificationRequests:Mx,navigation:hx},_P=Object.fromEntries(Object.entries(gE).map(([e,t])=>[e,t(void 0,{})])),gP=Se(_P,"RootState"),vP=oI.combineReducers(gE,gP),yP="FAIL",SP=new RegExp(`${yP}$`,"g");function EP(e){return cl(e)&&Pm(e)}function bP(e){return Is(e)}const wP=({dispatch:e})=>t=>n=>{var r;if(EP(n)&&!n.payload.skipAlert)e(gs(n.payload.error,n.payload.skipNotFound));else if(bP(n)&&!((r=n.payload)!=null&&r.skipAlert||n.skipAlert)&&n.type.match(SP)){const{error:i,skipNotFound:s}=n.payload??n;e(gs(i,s))}return t(n)},TP=["PENDING","FULFILLED","REJECTED"];function OP(e){return Is(e)&&"skipLoading"in e&&typeof e.skipLoading=="boolean"}const CP=(e={})=>{const t=e.promiseTypeSuffixes??TP;return({dispatch:n})=>r=>i=>{let s=!1,o=!1,a=!1;if(cl(i)&&"useLoadingBar"in i.meta&&i.meta.useLoadingBar)Mm(i)?s=!0:Po(i)?o=!0:Mo(i)&&(a=!0);else if(OP(i)&&!i.skipLoading&&typeof i.type=="string"){const[u,l,c]=t,f=new RegExp(`${u}$`,"g"),d=new RegExp(`${l}$`,"g"),p=new RegExp(`${c}$`,"g");i.type.match(f)?s=!0:i.type.match(d)?o=!0:i.type.match(p)&&(a=!0)}return s?n(qo.showLoading()):(o||a)&&n(qo.hideLoading()),r(i)}};function NP(e){return Is(e)&&"meta"in e&&typeof e.meta=="object"&&!!e.meta&&"sound"in e.meta&&typeof e.meta.sound=="string"}const AP=e=>{const t=new Audio;return e.forEach(({type:n,src:r})=>{const i=document.createElement("source");i.type=n,i.src=r,t.appendChild(i)}),t},IP=e=>{e.paused||(e.pause(),typeof e.fastSeek=="function"?e.fastSeek(0):e.currentTime=0),e.play()},RP=()=>{const e={};return p0(()=>{e.boop=AP([{src:`${Lf}/sounds/boop.ogg`,type:"audio/ogg"},{src:`${Lf}/sounds/boop.mp3`,type:"audio/mpeg"}])}),()=>t=>n=>{if(NP(n)){const r=n.meta.sound;if(r){const i=e[r];i&&IP(i)}}return t(n)}},f5=Dw({reducer:vP,middleware:e=>e({serializableCheck:!1,immutableCheck:!1}).concat(CP({promiseTypeSuffixes:["REQUEST","SUCCESS","FAIL"]})).concat(wP).concat(RP())});function zp(){return m.useState(null)}const Wp=e=>!e||typeof e=="function"?e:t=>{e.current=t};function xP(e,t){const n=Wp(e),r=Wp(t);return i=>{n&&n(i),r&&r(i)}}function LP(e,t){return m.useMemo(()=>xP(e,t),[e,t])}var St="top",zt="bottom",Wt="right",Et="left",pf="auto",Qs=[St,zt,Wt,Et],ni="start",Ss="end",MP="clippingParents",vE="viewport",Pi="popper",PP="reference",Gp=Qs.reduce(function(e,t){return e.concat([t+"-"+ni,t+"-"+Ss])},[]),hf=[].concat(Qs,[pf]).reduce(function(e,t){return e.concat([t,t+"-"+ni,t+"-"+Ss])},[]),FP="beforeRead",UP="read",kP="afterRead",DP="beforeMain",jP="main",$P="afterMain",qP="beforeWrite",BP="write",HP="afterWrite",VP=[FP,UP,kP,DP,jP,$P,qP,BP,HP];function _n(e){return e.split("-")[0]}function xt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Cr(e){var t=xt(e).Element;return e instanceof t||e instanceof Element}function gn(e){var t=xt(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function mf(e){if(typeof ShadowRoot>"u")return!1;var t=xt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Er=Math.max,Bo=Math.min,ri=Math.round;function Mc(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function yE(){return!/^((?!chrome|android).)*safari/i.test(Mc())}function ii(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&gn(e)&&(i=e.offsetWidth>0&&ri(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&ri(r.height)/e.offsetHeight||1);var o=Cr(e)?xt(e):window,a=o.visualViewport,u=!yE()&&n,l=(r.left+(u&&a?a.offsetLeft:0))/i,c=(r.top+(u&&a?a.offsetTop:0))/s,f=r.width/i,d=r.height/s;return{width:f,height:d,top:c,right:l+f,bottom:c+d,left:l,x:l,y:c}}function _f(e){var t=ii(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function SE(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&mf(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function nr(e){return e?(e.nodeName||"").toLowerCase():null}function Pn(e){return xt(e).getComputedStyle(e)}function zP(e){return["table","td","th"].indexOf(nr(e))>=0}function ar(e){return((Cr(e)?e.ownerDocument:e.document)||window.document).documentElement}function Na(e){return nr(e)==="html"?e:e.assignedSlot||e.parentNode||(mf(e)?e.host:null)||ar(e)}function Kp(e){return!gn(e)||Pn(e).position==="fixed"?null:e.offsetParent}function WP(e){var t=/firefox/i.test(Mc()),n=/Trident/i.test(Mc());if(n&&gn(e)){var r=Pn(e);if(r.position==="fixed")return null}var i=Na(e);for(mf(i)&&(i=i.host);gn(i)&&["html","body"].indexOf(nr(i))<0;){var s=Pn(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Ys(e){for(var t=xt(e),n=Kp(e);n&&zP(n)&&Pn(n).position==="static";)n=Kp(n);return n&&(nr(n)==="html"||nr(n)==="body"&&Pn(n).position==="static")?t:n||WP(e)||t}function gf(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Xi(e,t,n){return Er(e,Bo(t,n))}function GP(e,t,n){var r=Xi(e,t,n);return r>n?n:r}function EE(){return{top:0,right:0,bottom:0,left:0}}function bE(e){return Object.assign({},EE(),e)}function wE(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var KP=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,bE(typeof t!="number"?t:wE(t,Qs))};function QP(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=_n(n.placement),u=gf(a),l=[Et,Wt].indexOf(a)>=0,c=l?"height":"width";if(!(!s||!o)){var f=KP(i.padding,n),d=_f(s),p=u==="y"?St:Et,h=u==="y"?zt:Wt,_=n.rects.reference[c]+n.rects.reference[u]-o[u]-n.rects.popper[c],g=o[u]-n.rects.reference[u],y=Ys(s),S=y?u==="y"?y.clientHeight||0:y.clientWidth||0:0,b=_/2-g/2,T=f[p],I=S-d[c]-f[h],w=S/2-d[c]/2+b,N=Xi(T,w,I),q=u;n.modifiersData[r]=(t={},t[q]=N,t.centerOffset=N-w,t)}}function YP(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||SE(t.elements.popper,i)&&(t.elements.arrow=i))}const XP={name:"arrow",enabled:!0,phase:"main",fn:QP,effect:YP,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function si(e){return e.split("-")[1]}var ZP={top:"auto",right:"auto",bottom:"auto",left:"auto"};function JP(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:ri(n*i)/i||0,y:ri(r*i)/i||0}}function Qp(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,f=e.isFixed,d=o.x,p=d===void 0?0:d,h=o.y,_=h===void 0?0:h,g=typeof c=="function"?c({x:p,y:_}):{x:p,y:_};p=g.x,_=g.y;var y=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),b=Et,T=St,I=window;if(l){var w=Ys(n),N="clientHeight",q="clientWidth";if(w===xt(n)&&(w=ar(n),Pn(w).position!=="static"&&a==="absolute"&&(N="scrollHeight",q="scrollWidth")),w=w,i===St||(i===Et||i===Wt)&&s===Ss){T=zt;var U=f&&w===I&&I.visualViewport?I.visualViewport.height:w[N];_-=U-r.height,_*=u?1:-1}if(i===Et||(i===St||i===zt)&&s===Ss){b=Wt;var k=f&&w===I&&I.visualViewport?I.visualViewport.width:w[q];p-=k-r.width,p*=u?1:-1}}var W=Object.assign({position:a},l&&ZP),B=c===!0?JP({x:p,y:_},xt(n)):{x:p,y:_};if(p=B.x,_=B.y,u){var z;return Object.assign({},W,(z={},z[T]=S?"0":"",z[b]=y?"0":"",z.transform=(I.devicePixelRatio||1)<=1?"translate("+p+"px, "+_+"px)":"translate3d("+p+"px, "+_+"px, 0)",z))}return Object.assign({},W,(t={},t[T]=S?_+"px":"",t[b]=y?p+"px":"",t.transform="",t))}function eF(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,u=a===void 0?!0:a,l={placement:_n(t.placement),variation:si(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Qp(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Qp(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const tF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:eF,data:{}};var mo={passive:!0};function nF(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,u=xt(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach(function(c){c.addEventListener("scroll",n.update,mo)}),a&&u.addEventListener("resize",n.update,mo),function(){s&&l.forEach(function(c){c.removeEventListener("scroll",n.update,mo)}),a&&u.removeEventListener("resize",n.update,mo)}}const rF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nF,data:{}};var iF={left:"right",right:"left",bottom:"top",top:"bottom"};function Eo(e){return e.replace(/left|right|bottom|top/g,function(t){return iF[t]})}var sF={start:"end",end:"start"};function Yp(e){return e.replace(/start|end/g,function(t){return sF[t]})}function vf(e){var t=xt(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function yf(e){return ii(ar(e)).left+vf(e).scrollLeft}function oF(e,t){var n=xt(e),r=ar(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;var l=yE();(l||!l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a+yf(e),y:u}}function aF(e){var t,n=ar(e),r=vf(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=Er(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Er(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+yf(e),u=-r.scrollTop;return Pn(i||n).direction==="rtl"&&(a+=Er(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:u}}function Sf(e){var t=Pn(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function TE(e){return["html","body","#document"].indexOf(nr(e))>=0?e.ownerDocument.body:gn(e)&&Sf(e)?e:TE(Na(e))}function Zi(e,t){var n;t===void 0&&(t=[]);var r=TE(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=xt(r),o=i?[s].concat(s.visualViewport||[],Sf(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(Zi(Na(o)))}function Pc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function uF(e,t){var n=ii(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Xp(e,t,n){return t===vE?Pc(oF(e,n)):Cr(t)?uF(t,n):Pc(aF(ar(e)))}function cF(e){var t=Zi(Na(e)),n=["absolute","fixed"].indexOf(Pn(e).position)>=0,r=n&&gn(e)?Ys(e):e;return Cr(r)?t.filter(function(i){return Cr(i)&&SE(i,r)&&nr(i)!=="body"}):[]}function lF(e,t,n,r){var i=t==="clippingParents"?cF(e):[].concat(t),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(u,l){var c=Xp(e,l,r);return u.top=Er(c.top,u.top),u.right=Bo(c.right,u.right),u.bottom=Bo(c.bottom,u.bottom),u.left=Er(c.left,u.left),u},Xp(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function OE(e){var t=e.reference,n=e.element,r=e.placement,i=r?_n(r):null,s=r?si(r):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,u;switch(i){case St:u={x:o,y:t.y-n.height};break;case zt:u={x:o,y:t.y+t.height};break;case Wt:u={x:t.x+t.width,y:a};break;case Et:u={x:t.x-n.width,y:a};break;default:u={x:t.x,y:t.y}}var l=i?gf(i):null;if(l!=null){var c=l==="y"?"height":"width";switch(s){case ni:u[l]=u[l]-(t[c]/2-n[c]/2);break;case Ss:u[l]=u[l]+(t[c]/2-n[c]/2);break}}return u}function Es(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,s=n.strategy,o=s===void 0?e.strategy:s,a=n.boundary,u=a===void 0?MP:a,l=n.rootBoundary,c=l===void 0?vE:l,f=n.elementContext,d=f===void 0?Pi:f,p=n.altBoundary,h=p===void 0?!1:p,_=n.padding,g=_===void 0?0:_,y=bE(typeof g!="number"?g:wE(g,Qs)),S=d===Pi?PP:Pi,b=e.rects.popper,T=e.elements[h?S:d],I=lF(Cr(T)?T:T.contextElement||ar(e.elements.popper),u,c,o),w=ii(e.elements.reference),N=OE({reference:w,element:b,placement:i}),q=Pc(Object.assign({},b,N)),U=d===Pi?q:w,k={top:I.top-U.top+y.top,bottom:U.bottom-I.bottom+y.bottom,left:I.left-U.left+y.left,right:U.right-I.right+y.right},W=e.modifiersData.offset;if(d===Pi&&W){var B=W[i];Object.keys(k).forEach(function(z){var D=[Wt,zt].indexOf(z)>=0?1:-1,E=[St,zt].indexOf(z)>=0?"y":"x";k[z]+=B[E]*D})}return k}function fF(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?hf:u,c=si(r),f=c?a?Gp:Gp.filter(function(h){return si(h)===c}):Qs,d=f.filter(function(h){return l.indexOf(h)>=0});d.length===0&&(d=f);var p=d.reduce(function(h,_){return h[_]=Es(e,{placement:_,boundary:i,rootBoundary:s,padding:o})[_n(_)],h},{});return Object.keys(p).sort(function(h,_){return p[h]-p[_]})}function dF(e){if(_n(e)===pf)return[];var t=Eo(e);return[Yp(e),t,Yp(t)]}function pF(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,u=n.fallbackPlacements,l=n.padding,c=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,_=n.allowedAutoPlacements,g=t.options.placement,y=_n(g),S=y===g,b=u||(S||!h?[Eo(g)]:dF(g)),T=[g].concat(b).reduce(function(ie,Q){return ie.concat(_n(Q)===pf?fF(t,{placement:Q,boundary:c,rootBoundary:f,padding:l,flipVariations:h,allowedAutoPlacements:_}):Q)},[]),I=t.rects.reference,w=t.rects.popper,N=new Map,q=!0,U=T[0],k=0;k<T.length;k++){var W=T[k],B=_n(W),z=si(W)===ni,D=[St,zt].indexOf(B)>=0,E=D?"width":"height",A=Es(t,{placement:W,boundary:c,rootBoundary:f,altBoundary:d,padding:l}),C=D?z?Wt:Et:z?zt:St;I[E]>w[E]&&(C=Eo(C));var L=Eo(C),P=[];if(s&&P.push(A[B]<=0),a&&P.push(A[C]<=0,A[L]<=0),P.every(function(ie){return ie})){U=W,q=!1;break}N.set(W,P)}if(q)for(var K=h?3:1,M=function(Q){var ye=T.find(function(R){var Ee=N.get(R);if(Ee)return Ee.slice(0,Q).every(function(be){return be})});if(ye)return U=ye,"break"},X=K;X>0;X--){var pe=M(X);if(pe==="break")break}t.placement!==U&&(t.modifiersData[r]._skip=!0,t.placement=U,t.reset=!0)}}const hF={name:"flip",enabled:!0,phase:"main",fn:pF,requiresIfExists:["offset"],data:{_skip:!1}};function Zp(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Jp(e){return[St,Wt,zt,Et].some(function(t){return e[t]>=0})}function mF(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=Es(t,{elementContext:"reference"}),a=Es(t,{altBoundary:!0}),u=Zp(o,r),l=Zp(a,i,s),c=Jp(u),f=Jp(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}const _F={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mF};function gF(e,t,n){var r=_n(e),i=[Et,St].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Et,Wt].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function vF(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=i===void 0?[0,0]:i,o=hf.reduce(function(c,f){return c[f]=gF(f,t.rects,s),c},{}),a=o[t.placement],u=a.x,l=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=o}const yF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:vF};function SF(e){var t=e.state,n=e.name;t.modifiersData[n]=OE({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const EF={name:"popperOffsets",enabled:!0,phase:"read",fn:SF,data:{}};function bF(e){return e==="x"?"y":"x"}function wF(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,f=n.padding,d=n.tether,p=d===void 0?!0:d,h=n.tetherOffset,_=h===void 0?0:h,g=Es(t,{boundary:u,rootBoundary:l,padding:f,altBoundary:c}),y=_n(t.placement),S=si(t.placement),b=!S,T=gf(y),I=bF(T),w=t.modifiersData.popperOffsets,N=t.rects.reference,q=t.rects.popper,U=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,k=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),W=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,B={x:0,y:0};if(w){if(s){var z,D=T==="y"?St:Et,E=T==="y"?zt:Wt,A=T==="y"?"height":"width",C=w[T],L=C+g[D],P=C-g[E],K=p?-q[A]/2:0,M=S===ni?N[A]:q[A],X=S===ni?-q[A]:-N[A],pe=t.elements.arrow,ie=p&&pe?_f(pe):{width:0,height:0},Q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:EE(),ye=Q[D],R=Q[E],Ee=Xi(0,N[A],ie[A]),be=b?N[A]/2-K-Ee-ye-k.mainAxis:M-Ee-ye-k.mainAxis,Fe=b?-N[A]/2+K+Ee+R+k.mainAxis:X+Ee+R+k.mainAxis,Ke=t.elements.arrow&&Ys(t.elements.arrow),we=Ke?T==="y"?Ke.clientTop||0:Ke.clientLeft||0:0,oe=(z=W==null?void 0:W[T])!=null?z:0,kn=C+be-oe-we,Qe=C+Fe-oe,bt=Xi(p?Bo(L,kn):L,C,p?Er(P,Qe):P);w[T]=bt,B[T]=bt-C}if(a){var Xt,ur=T==="x"?St:Et,cr=T==="x"?zt:Wt,wt=w[I],Ft=I==="y"?"height":"width",En=wt+g[ur],Zt=wt-g[cr],un=[St,Et].indexOf(y)!==-1,pt=(Xt=W==null?void 0:W[I])!=null?Xt:0,bn=un?En:wt-N[Ft]-q[Ft]-pt+k.altAxis,wn=un?wt+N[Ft]+q[Ft]-pt-k.altAxis:Zt,Dn=p&&un?GP(bn,wt,wn):Xi(p?bn:En,wt,p?wn:Zt);w[I]=Dn,B[I]=Dn-wt}t.modifiersData[r]=B}}const TF={name:"preventOverflow",enabled:!0,phase:"main",fn:wF,requiresIfExists:["offset"]};function OF(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function CF(e){return e===xt(e)||!gn(e)?vf(e):OF(e)}function NF(e){var t=e.getBoundingClientRect(),n=ri(t.width)/e.offsetWidth||1,r=ri(t.height)/e.offsetHeight||1;return n!==1||r!==1}function AF(e,t,n){n===void 0&&(n=!1);var r=gn(t),i=gn(t)&&NF(t),s=ar(t),o=ii(e,i,n),a={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((nr(t)!=="body"||Sf(s))&&(a=CF(t)),gn(t)?(u=ii(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):s&&(u.x=yf(s))),{x:o.left+a.scrollLeft-u.x,y:o.top+a.scrollTop-u.y,width:o.width,height:o.height}}function IF(e){var t=new Map,n=new Set,r=[];e.forEach(function(s){t.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var u=t.get(a);u&&i(u)}}),r.push(s)}return e.forEach(function(s){n.has(s.name)||i(s)}),r}function RF(e){var t=IF(e);return VP.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function xF(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function LF(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var eh={placement:"bottom",modifiers:[],strategy:"absolute"};function th(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function MF(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,s=i===void 0?eh:i;return function(a,u,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},eh,s),modifiersData:{},elements:{reference:a,popper:u},attributes:{},styles:{}},f=[],d=!1,p={state:c,setOptions:function(y){var S=typeof y=="function"?y(c.options):y;_(),c.options=Object.assign({},s,c.options,S),c.scrollParents={reference:Cr(a)?Zi(a):a.contextElement?Zi(a.contextElement):[],popper:Zi(u)};var b=RF(LF([].concat(r,c.options.modifiers)));return c.orderedModifiers=b.filter(function(T){return T.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var y=c.elements,S=y.reference,b=y.popper;if(th(S,b)){c.rects={reference:AF(S,Ys(b),c.options.strategy==="fixed"),popper:_f(b)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(k){return c.modifiersData[k.name]=Object.assign({},k.data)});for(var T=0;T<c.orderedModifiers.length;T++){if(c.reset===!0){c.reset=!1,T=-1;continue}var I=c.orderedModifiers[T],w=I.fn,N=I.options,q=N===void 0?{}:N,U=I.name;typeof w=="function"&&(c=w({state:c,options:q,name:U,instance:p})||c)}}}},update:xF(function(){return new Promise(function(g){p.forceUpdate(),g(c)})}),destroy:function(){_(),d=!0}};if(!th(a,u))return p;p.setOptions(l).then(function(g){!d&&l.onFirstUpdate&&l.onFirstUpdate(g)});function h(){c.orderedModifiers.forEach(function(g){var y=g.name,S=g.options,b=S===void 0?{}:S,T=g.effect;if(typeof T=="function"){var I=T({state:c,name:y,instance:p,options:b}),w=function(){};f.push(I||w)}})}function _(){f.forEach(function(g){return g()}),f=[]}return p}}var PF=MF({defaultModifiers:[_F,EF,tF,rF,yF,hF,TF,XP]});function FF(){const e=m.useRef(!0),t=m.useRef(()=>e.current);return m.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function UF(e){const t=FF();return[e[0],m.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var nh=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},kF={name:"applyStyles",enabled:!1},DF={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var n=t.state;return function(){var r=n.elements,i=r.reference,s=r.popper;if("removeAttribute"in i){var o=(i.getAttribute("aria-describedby")||"").split(",").filter(function(a){return a.trim()!==s.id});o.length?i.setAttribute("aria-describedby",o.join(",")):i.removeAttribute("aria-describedby")}}},fn:function(t){var n,r=t.state,i=r.elements,s=i.popper,o=i.reference,a=(n=s.getAttribute("role"))==null?void 0:n.toLowerCase();if(s.id&&a==="tooltip"&&"setAttribute"in o){var u=o.getAttribute("aria-describedby");if(u&&u.split(",").indexOf(s.id)!==-1)return;o.setAttribute("aria-describedby",u?u+","+s.id:s.id)}}},jF=[];function $F(e,t,n){var r=n===void 0?{}:n,i=r.enabled,s=i===void 0?!0:i,o=r.placement,a=o===void 0?"bottom":o,u=r.strategy,l=u===void 0?"absolute":u,c=r.modifiers,f=c===void 0?jF:c,d=Sh(r,["enabled","placement","strategy","modifiers"]),p=m.useRef(),h=m.useCallback(function(){var T;(T=p.current)==null||T.update()},[]),_=m.useCallback(function(){var T;(T=p.current)==null||T.forceUpdate()},[]),g=UF(m.useState({placement:a,update:h,forceUpdate:_,attributes:{},styles:{popper:nh(l),arrow:{}}})),y=g[0],S=g[1],b=m.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(I){var w=I.state,N={},q={};Object.keys(w.elements).forEach(function(U){N[U]=w.styles[U],q[U]=w.attributes[U]}),S({state:w,styles:N,attributes:q,update:h,forceUpdate:_,placement:w.placement})}}},[h,_,S]);return m.useEffect(function(){!p.current||!s||p.current.setOptions({placement:a,strategy:l,modifiers:[].concat(f,[b,kF])})},[l,a,b,s]),m.useEffect(function(){if(!(!s||e==null||t==null))return p.current=PF(e,t,Ct({},d,{placement:a,strategy:l,modifiers:[].concat(f,[DF,b])})),function(){p.current!=null&&(p.current.destroy(),p.current=void 0,S(function(T){return Ct({},T,{attributes:{},styles:{popper:nh(l)}})}))}},[s,e,t]),y}function qF(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const BF=!!(typeof window<"u"&&window.document&&window.document.createElement);var Fc=!1,Uc=!1;try{var $u={get passive(){return Fc=!0},get once(){return Uc=Fc=!0}};BF&&(window.addEventListener("test",$u,$u),window.removeEventListener("test",$u,!0))}catch{}function HF(e,t,n,r){if(r&&typeof r!="boolean"&&!Uc){var i=r.once,s=r.capture,o=n;!Uc&&i&&(o=n.__once||function a(u){this.removeEventListener(t,a,s),n.call(this,u)},n.__once=o),e.addEventListener(t,o,Fc?r:s)}e.addEventListener(t,n,r)}function VF(e,t,n,r){var i=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}function _o(e,t,n,r){return HF(e,t,n,r),function(){VF(e,t,n,r)}}function zF(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e},[e]),t}function rh(e){const t=zF(e);return m.useCallback(function(...n){return t.current&&t.current(...n)},[t])}var qu,ih;function WF(){if(ih)return qu;ih=1;var e=function(){};{var t=function(r,i){var s=arguments.length;i=new Array(s>1?s-1:0);for(var o=1;o<s;o++)i[o-1]=arguments[o];var a=0,u="Warning: "+r.replace(/%s/g,function(){return i[a++]});typeof console<"u"&&console.error(u);try{throw new Error(u)}catch{}};e=function(n,r,i){var s=arguments.length;i=new Array(s>2?s-2:0);for(var o=2;o<s;o++)i[o-2]=arguments[o];if(r===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");n||t.apply(null,[r].concat(i))}}return qu=e,qu}var GF=WF();const KF=oi(GF);function CE(e){return e&&e.ownerDocument||document}function QF(e){return e&&"setState"in e?om.findDOMNode(e):e??null}const YF=function(e){return CE(QF(e))};var XF=27,sh=function(){};function ZF(e){return e.button===0}function JF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var oh=function(t){return t&&("current"in t?t.current:t)};function eU(e,t,n){var r=n===void 0?{}:n,i=r.disabled,s=r.clickTrigger,o=s===void 0?"click":s,a=m.useRef(!1),u=t||sh,l=m.useCallback(function(d){var p,h=oh(e);KF(!!h,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),a.current=!h||JF(d)||!ZF(d)||!!qF(h,(p=d.composedPath==null?void 0:d.composedPath()[0])!=null?p:d.target)},[e]),c=rh(function(d){a.current||u(d)}),f=rh(function(d){d.keyCode===XF&&u(d)});m.useEffect(function(){if(!(i||e==null)){var d=window.event,p=YF(oh(e)),h=_o(p,o,l,!0),_=_o(p,o,function(S){if(S===d){d=void 0;return}c(S)}),g=_o(p,"keyup",function(S){if(S===d){d=void 0;return}f(S)}),y=[];return"ontouchstart"in p.documentElement&&(y=[].slice.call(p.body.children).map(function(S){return _o(S,"mousemove",sh)})),function(){h(),_(),g(),y.forEach(function(S){return S()})}}},[e,i,o,l,c,f])}var Bu=function(t){var n;return typeof document>"u"?null:t==null?CE().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(n=t)!=null&&n.nodeType&&t||null)};function ah(e,t){var n=m.useState(function(){return Bu(e)}),r=n[0],i=n[1];if(!r){var s=Bu(e);s&&i(s)}return m.useEffect(function(){},[t,r]),m.useEffect(function(){var o=Bu(e);o!==r&&i(o)},[e,r]),r}function tU(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(n){t[n.name]=n}),t):e||t}function nU(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function rU(e){var t,n,r,i,s=e.enabled,o=e.enableEvents,a=e.placement,u=e.flip,l=e.offset,c=e.fixed,f=e.containerPadding,d=e.arrowElement,p=e.popperConfig,h=p===void 0?{}:p,_=tU(h.modifiers);return Ct({},h,{placement:a,enabled:s,strategy:c?"fixed":h.strategy,modifiers:nU(Ct({},_,{eventListeners:{enabled:o},preventOverflow:Ct({},_.preventOverflow,{options:f?Ct({padding:f},(t=_.preventOverflow)==null?void 0:t.options):(n=_.preventOverflow)==null?void 0:n.options}),offset:{options:Ct({offset:l},(r=_.offset)==null?void 0:r.options)},arrow:Ct({},_.arrow,{enabled:!!d,options:Ct({},(i=_.arrow)==null?void 0:i.options,{element:d})}),flip:Ct({enabled:!!u},_.flip)}))})}var NE=Qu.forwardRef(function(e,t){var n=e.flip,r=e.offset,i=e.placement,s=e.containerPadding,o=s===void 0?5:s,a=e.popperConfig,u=a===void 0?{}:a,l=e.transition,c=zp(),f=c[0],d=c[1],p=zp(),h=p[0],_=p[1],g=LP(d,t),y=ah(e.container),S=ah(e.target),b=m.useState(!e.show),T=b[0],I=b[1],w=$F(S,f,rU({placement:i,enableEvents:!!e.show,containerPadding:o||5,flip:n,offset:r,arrowElement:h,popperConfig:u})),N=w.styles,q=w.attributes,U=Sh(w,["styles","attributes"]);e.show?T&&I(!1):!e.transition&&!T&&I(!0);var k=function(){I(!0),e.onExited&&e.onExited.apply(e,arguments)},W=e.show||l&&!T;if(eU(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!W)return null;var B=e.children(Ct({},U,{show:!!e.show,props:Ct({},q.popper,{style:N.popper,ref:g}),arrowProps:Ct({},q.arrow,{style:N.arrow,ref:_})}));if(l){var z=e.onExit,D=e.onExiting,E=e.onEnter,A=e.onEntering,C=e.onEntered;B=Qu.createElement(l,{in:e.show,appear:!0,onExit:z,onExiting:D,onExited:k,onEnter:E,onEntering:A,onEntered:C},B)}return y?om.createPortal(B,y):null});NE.displayName="Overlay";NE.propTypes={show:ge.bool,placement:ge.oneOf(hf),target:ge.any,container:ge.any,flip:ge.bool,children:ge.func.isRequired,containerPadding:ge.number,popperConfig:ge.object,rootClose:ge.bool,rootCloseEvent:ge.oneOf(["click","mousedown"]),rootCloseDisabled:ge.bool,onHide:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(t.rootClose){var s;return(s=ge.func).isRequired.apply(s,[t].concat(r))}return ge.func.apply(ge,[t].concat(r))},transition:ge.elementType,onEnter:ge.func,onEntering:ge.func,onEntered:ge.func,onExit:ge.func,onExiting:ge.func,onExited:ge.func};const d5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"})),iU=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Z"})),$t=({id:e,icon:t,className:n,title:r,...i})=>{if(!t){if(!d0())throw new Error(`<Icon id="${e}" className="${n}"> is missing an "icon" prop.`);t=iU}const s=r?void 0:!0,o=s?void 0:"img",a=r||"";return O.jsxDEV(t,{className:Je("icon",`icon-${e}`,n),title:a,"aria-hidden":s,role:o,...i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/icon.tsx",lineNumber:45,columnNumber:5},void 0)},sU=e=>{const[t,n]=m.useState(e??!1),r=m.useCallback(()=>{e||n(!0)},[e]),i=m.useCallback(()=>{e||n(!1)},[e]);return{hovering:t,handleMouseEnter:r,handleMouseLeave:i}},p5=({account:e,animate:t=c0,size:n=20,inline:r=!1,withLink:i=!1,style:s,className:o,counter:a,counterBorderColor:u})=>{const{hovering:l,handleMouseEnter:c,handleMouseLeave:f}=sU(t),[d,p]=m.useState(!0),[h,_]=m.useState(!1),g={...s,width:`${n}px`,height:`${n}px`},y=l||t?e==null?void 0:e.avatar:e==null?void 0:e.avatar_static,S=m.useCallback(()=>{p(!1)},[p]),b=m.useCallback(()=>{_(!0)},[_]),T=O.jsxDEV("div",{className:Je(o,"account__avatar",{"account__avatar--inline":r,"account__avatar--loading":d}),onMouseEnter:c,onMouseLeave:f,style:g,children:[y&&!h&&O.jsxDEV("img",{src:y,alt:"",onLoad:S,onError:b},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/avatar.tsx",lineNumber:66,columnNumber:5},void 0),a&&O.jsxDEV("div",{className:"account__avatar__counter",style:{borderColor:u},children:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/avatar.tsx",lineNumber:70,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/avatar.tsx",lineNumber:56,columnNumber:3},void 0);return i?O.jsxDEV(JE,{to:`/@${e==null?void 0:e.acct}`,title:`@${e==null?void 0:e.acct}`,"data-hover-card-account":e==null?void 0:e.id,children:T},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/avatar.tsx",lineNumber:82,columnNumber:7},void 0):T},h5=ge.shape({signedIn:ge.bool.isRequired,accountId:ge.string,disabledAccountId:ge.string}).isRequired,m5=e=>{var t;return{signedIn:!!e.meta.me,accountId:e.meta.me,disabledAccountId:e.meta.disabled_account_id,permissions:((t=e.role)==null?void 0:t.permissions)??0}},AE=m.createContext({signedIn:!1,permissions:0,accountId:void 0,disabledAccountId:void 0}),_5=()=>m.useContext(AE);function g5(e){const t=`withIdentity(${e.displayName??e.name})`,n=r=>{const{wrappedComponentRef:i,...s}=r;return O.jsxDEV(AE.Consumer,{children:o=>O.jsxDEV(e,{...s,identity:o,ref:i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/identity_context.tsx",lineNumber:55,columnNumber:13},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/identity_context.tsx",lineNumber:51,columnNumber:7},this)};return n.displayName=t,n.WrappedComponent=e,yh(n,e)}const v5=({size:e,strokeWidth:t})=>{const n=`0 0 ${e} ${e}`,r=(e-t)/2;return O.jsxDEV("svg",{width:e,height:e,viewBox:n,className:"circular-progress",role:"progressbar",children:O.jsxDEV("circle",{fill:"none",cx:e/2,cy:e/2,r,strokeWidth:`${t}px`},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/circular_progress.tsx",lineNumber:18,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/circular_progress.tsx",lineNumber:11,columnNumber:5},void 0)},oU=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"})),IE=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M480-80q-75 0-140.5-28.5t-114-77q-48.5-48.5-77-114T120-440q0-75 28.5-140.5t77-114q48.5-48.5 114-77T480-800h6l-62-62 56-58 160 160-160 160-56-58 62-62h-6q-117 0-198.5 81.5T200-440q0 117 81.5 198.5T480-160q117 0 198.5-81.5T760-440h80q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-80ZM380-320v-60h120v-40H380v-140h180v60H440v40h80q17 0 28.5 11.5T560-420v60q0 17-11.5 28.5T520-320H380Z"})),qi=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M560-200v-560h160v560H560Zm-320 0v-560h160v560H240Z"})),Bi=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M320-200v-560l440 280-440 280Z"})),RE=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M480-80q-75 0-140.5-28.5t-114-77q-48.5-48.5-77-114T120-440h80q0 117 81.5 198.5T480-160q117 0 198.5-81.5T760-440q0-117-81.5-198.5T480-720h-6l62 62-56 58-160-160 160-160 56 58-62 62h6q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-440q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-80ZM380-320v-60h120v-40H380v-140h180v60H440v40h80q17 0 28.5 11.5T560-420v60q0 17-11.5 28.5T520-320H380Z"})),kc=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M792-56 671-177q-25 16-53 27.5T560-131v-82q14-5 27.5-10t25.5-12L480-368v208L280-360H120v-240h128L56-792l56-56 736 736-56 56Zm-8-232-58-58q17-31 25.5-65t8.5-70q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 53-14.5 102T784-288ZM650-422l-90-90v-130q47 22 73.5 66t26.5 96q0 15-2.5 29.5T650-422ZM480-592 376-696l104-104v208Z"})),bo=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320Z"}));var aU=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Hi=e=>{let t=0;for(let n=0;n<e.length;n++){let r=e[n],i=aU.indexOf(r);t=t*83+i}return t},Hu=e=>{let t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Vu=e=>{let t=Math.max(0,Math.min(1,e));return t<=.0031308?Math.trunc(t*12.92*255+.5):Math.trunc((1.055*Math.pow(t,.4166666666666667)-.055)*255+.5)},uU=e=>e<0?-1:1,zu=(e,t)=>uU(e)*Math.pow(Math.abs(e),t),uh=class extends Error{constructor(e){super(e),this.name="ValidationError",this.message=e}},cU=e=>{if(!e||e.length<6)throw new uh("The blurhash string must be at least 6 characters");let t=Hi(e[0]),n=Math.floor(t/9)+1,r=t%9+1;if(e.length!==4+2*r*n)throw new uh(`blurhash length mismatch: length is ${e.length} but it should be ${4+2*r*n}`)},lU=e=>{let t=e>>16,n=e>>8&255,r=e&255;return[Hu(t),Hu(n),Hu(r)]},fU=(e,t)=>{let n=Math.floor(e/361),r=Math.floor(e/19)%19,i=e%19;return[zu((n-9)/9,2)*t,zu((r-9)/9,2)*t,zu((i-9)/9,2)*t]},dU=(e,t,n,r)=>{cU(e),r=r|1;let i=Hi(e[0]),s=Math.floor(i/9)+1,o=i%9+1,a=(Hi(e[1])+1)/166,u=new Array(o*s);for(let f=0;f<u.length;f++)if(f===0){let d=Hi(e.substring(2,6));u[f]=lU(d)}else{let d=Hi(e.substring(4+f*2,6+f*2));u[f]=fU(d,a*r)}let l=t*4,c=new Uint8ClampedArray(l*n);for(let f=0;f<n;f++)for(let d=0;d<t;d++){let p=0,h=0,_=0;for(let b=0;b<s;b++)for(let T=0;T<o;T++){let I=Math.cos(Math.PI*d*T/t)*Math.cos(Math.PI*f*b/n),w=u[T+b*o];p+=w[0]*I,h+=w[1]*I,_+=w[2]*I}let g=Vu(p),y=Vu(h),S=Vu(_);c[4*d+0+f*l]=g,c[4*d+1+f*l]=y,c[4*d+2+f*l]=S,c[4*d+3+f*l]=255}return c},pU=dU;const hU=({hash:e,width:t=32,height:n=t,dummy:r=!1,...i})=>{const s=m.useRef(null);return m.useEffect(()=>{const o=s.current;if(o.width=o.width,!(r||!e))try{const a=pU(e,t,n),u=o.getContext("2d"),l=new ImageData(a,t,n);u==null||u.putImageData(l,0,0)}catch(a){console.error("Blurhash decoding failure",{err:a,hash:e})}},[r,e,t,n]),O.jsxDEV("canvas",{...i,ref:s,width:t,height:n},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/blurhash.tsx",lineNumber:42,columnNumber:5},void 0)},xE=m.memo(hU),LE=({hidden:e=!1,sensitive:t,uncached:n=!1,matchedFilters:r,onClick:i})=>{let s,o;return n?(s=O.jsxDEV(pn,{id:"status.uncached_media_warning",defaultMessage:"Preview not available"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:25,columnNumber:5},void 0),o=O.jsxDEV(pn,{id:"status.media.open",defaultMessage:"Click to open"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:31,columnNumber:5},void 0)):r?(s=O.jsxDEV(pn,{id:"filter_warning.matches_filter",defaultMessage:"Matches filter <span>{title}</span>",values:{title:r.join(", "),span:a=>O.jsxDEV("span",{className:"filter-name",children:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:40,columnNumber:27},void 0)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:35,columnNumber:5},void 0),o=O.jsxDEV(pn,{id:"status.media.show",defaultMessage:"Click to show"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:45,columnNumber:5},void 0)):t?(s=O.jsxDEV(pn,{id:"status.sensitive_warning",defaultMessage:"Sensitive content"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:49,columnNumber:5},void 0),o=O.jsxDEV(pn,{id:"status.media.show",defaultMessage:"Click to show"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:55,columnNumber:5},void 0)):(s=O.jsxDEV(pn,{id:"status.media_hidden",defaultMessage:"Media hidden"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:59,columnNumber:5},void 0),o=O.jsxDEV(pn,{id:"status.media.show",defaultMessage:"Click to show"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:65,columnNumber:5},void 0)),O.jsxDEV("div",{className:Je("spoiler-button",{"spoiler-button--hidden":e,"spoiler-button--click-thru":n}),children:O.jsxDEV("button",{type:"button",className:"spoiler-button__overlay",onClick:i,disabled:n,children:O.jsxDEV("span",{className:"spoiler-button__overlay__label",children:[s,O.jsxDEV("span",{className:"spoiler-button__overlay__action",children:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:84,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:82,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:76,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/spoiler_button.tsx",lineNumber:70,columnNumber:5},void 0)},Wu=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z"})),Fi=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M240-120v-120H120v-80h200v200h-80Zm400 0v-200h200v80H720v120h-80ZM120-640v-80h120v-120h80v200H120Zm520 0v-200h80v120h120v80H640Z"})),mU=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M80-160v-640h800v640H80Zm80-80h640v-480H160v480Zm0 0v-480 480Z"})),_U=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M200-360v-240h160l200-200v640L360-360H200Zm440 40v-322q45 21 72.5 65t27.5 97q0 53-27.5 96T640-320Z"})),qr=()=>{const e=document;return!!(e.fullscreenElement??e.webkitFullscreenElement??e.mozFullScreenElement)},ch=()=>{const e=document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen&&e.mozCancelFullScreen()},gU=e=>{e&&(e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen&&e.mozRequestFullScreen())},vU=e=>{const t=document;"onfullscreenchange"in t?t.addEventListener("fullscreenchange",e):"onwebkitfullscreenchange"in t?t.addEventListener("webkitfullscreenchange",e):"onmozfullscreenchange"in t&&t.addEventListener("mozfullscreenchange",e)},yU=e=>{const t=document;"onfullscreenchange"in t?t.removeEventListener("fullscreenchange",e):"onwebkitfullscreenchange"in t?t.removeEventListener("webkitfullscreenchange",e):"onmozfullscreenchange"in t&&t.removeEventListener("mozfullscreenchange",e)},SU=({events:e,onDismiss:t})=>{const n=$c(),r=mb(e,{from:{opacity:0},keys:i=>i.key,enter:[{opacity:1}],leave:[{opacity:0}],onRest:(i,s,o)=>{t(o)}});return O.jsxDEV(O.Fragment,{children:r((i,s)=>O.jsxDEV(Ze.div,{className:"video-player__hotkey-indicator",style:i,children:[O.jsxDEV($t,{id:"",icon:s.icon},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/components/hotkey_indicator.tsx",lineNumber:35,columnNumber:11},void 0),O.jsxDEV("span",{className:"video-player__hotkey-indicator__label",children:n.formatMessage(s.label)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/components/hotkey_indicator.tsx",lineNumber:36,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/components/hotkey_indicator.tsx",lineNumber:34,columnNumber:7},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/components/hotkey_indicator.tsx",lineNumber:32,columnNumber:5},void 0)},de=Ho({play:{id:"video.play",defaultMessage:"Play"},pause:{id:"video.pause",defaultMessage:"Pause"},mute:{id:"video.mute",defaultMessage:"Mute"},unmute:{id:"video.unmute",defaultMessage:"Unmute"},hide:{id:"video.hide",defaultMessage:"Hide video"},expand:{id:"video.expand",defaultMessage:"Expand video"},close:{id:"video.close",defaultMessage:"Close video"},fullscreen:{id:"video.fullscreen",defaultMessage:"Full screen"},exit_fullscreen:{id:"video.exit_fullscreen",defaultMessage:"Exit full screen"},volumeUp:{id:"video.volume_up",defaultMessage:"Volume up"},volumeDown:{id:"video.volume_down",defaultMessage:"Volume down"},skipForward:{id:"video.skip_forward",defaultMessage:"Skip forward"},skipBackward:{id:"video.skip_backward",defaultMessage:"Skip backward"}}),EU=250,lh=4e3,bs=e=>{const t=Math.floor(e/3600),n=Math.floor((e-t*3600)/60),r=e-t*3600-n*60,i=`${t<10?"0":""}${t}`,s=`${n<10?"0":""}${n}`,o=`${r<10?"0":""}${r}`;return(i==="00"?"":`${i}:`)+`${s}:${o}`},ME=e=>{const t=e.getBoundingClientRect(),n=document.documentElement,r=document.body,i=n.clientLeft||r.clientLeft||0,s=window.scrollX||r.scrollLeft,o=t.left+s-i,a=n.clientTop||r.clientTop||0,u=window.scrollY||r.scrollTop,l=t.top+u-a;return{left:Math.round(o),top:Math.round(l)}},ws=(e,t)=>{if(!e)return{y:0,x:0};const n=ME(e),r=e.offsetWidth,i=e.offsetHeight,s=n.top,o=n.left,{pageY:a,pageX:u}=t;return{y:Math.max(0,Math.min(1,(a-s)/i)),x:Math.max(0,Math.min(1,(u-o)/r))}},bU=e=>{const n=new URL(e).pathname,r=n.lastIndexOf("/");return n.slice(r+1)},wU=e=>e.includes("/")?e.split("/").map(t=>parseInt(t)).reduce((t,n)=>t/n):parseInt(e),TU=(e,t)=>{tr.set("volume",e),tr.set("muted",t)},OU=e=>{const t=tr.get("volume")??.5,n=tr.get("muted")??!1;e.volume=t,e.muted=n};let PE=0;const dn=(e,t)=>{e(()=>[{key:PE++,...t}])},fh=({preview:e,frameRate:t="25",aspectRatio:n,src:r,alt:i="",lang:s,sensitive:o,onOpenVideo:a,onCloseVideo:u,detailed:l,editable:c,alwaysVisible:f,visible:d,onToggleVisibility:p,deployPictureInPicture:h,blurhash:_,startPlaying:g,startTime:y,startVolume:S,startMuted:b,matchedFilters:T})=>{const I=$c(),[w,N]=m.useState(0),[q,U]=m.useState(0),[k,W]=m.useState(.5),[B,z]=m.useState(!0),[D,E]=m.useState(!1),[A,C]=m.useState(!1),[L,P]=m.useState(!1),[K,M]=m.useState(!1),[X,pe]=m.useState(!1),[ie,Q]=m.useState([]),ye=m.useRef(null),R=m.useRef(null),Ee=m.useRef(null),be=m.useRef(null),Fe=m.useRef(),Ke=m.useRef(),[we,oe]=Hr(()=>({progress:"0%",buffer:"0%",volume:"0%"})),kn=m.useCallback($=>{R.current&&!R.current.paused&&$===null&&(h==null||h("video",{src:r,currentTime:R.current.currentTime,muted:R.current.muted,volume:R.current.volume})),R.current=$,R.current&&(OU(R.current),W(R.current.volume),M(R.current.muted),oe.start({volume:`${R.current.volume*100}%`}))},[oe,W,M,r,h]),Qe=m.useCallback(()=>{R.current&&(R.current.paused?R.current.play():R.current.pause())},[]),bt=m.useCallback(()=>{qr()?ch():gU(ye.current)},[]),Xt=m.useCallback(()=>{if(!R.current)return;R.current.muted||R.current.volume===0?(R.current.muted=!1,R.current.volume===0&&(R.current.volume=.05)):R.current.muted=!0},[]),ur=m.useCallback($=>{$.stopPropagation()},[]),cr=m.useCallback(()=>{Fe.current?(clearTimeout(Fe.current),Fe.current=null,dn(Q,{icon:qr()?Fi:Wu,label:qr()?de.exit_fullscreen:de.fullscreen}),bt()):Fe.current=setTimeout(()=>{var $,se;dn(Q,{icon:($=R.current)!=null&&$.paused?Bi:qi,label:(se=R.current)!=null&&se.paused?de.play:de.pause}),Qe(),Fe.current=null},EU)},[Q,Qe,bt]),wt=m.useCallback(()=>{z(!1)},[z]),Ft=m.useCallback(()=>{z(!0)},[z]);m.useEffect(()=>{let $;const se=()=>{$=requestAnimationFrame(()=>{if(R.current){const he=R.current.currentTime/R.current.duration;oe.start({progress:isNaN(he)?"0%":`${he*100}%`,config:gr.stiff})}se()})};return se(),()=>{cancelAnimationFrame($)}},[oe]),m.useEffect(()=>{R.current&&(R.current.volume=k,R.current.muted=K)},[k,K]),m.useEffect(()=>{pe(typeof d<"u"?d:To==="show_all"||To!=="hide_all"&&!o)},[d,o]),m.useEffect(()=>{!X&&R.current&&R.current.pause()},[X]),m.useEffect(()=>{const $=()=>{C(qr())},se=Hc(()=>{if(!R.current)return;const{top:he,height:ze}=R.current.getBoundingClientRect(),Be=he<=(window.innerHeight||document.documentElement.clientHeight)&&he+ze>=0;!R.current.paused&&!Be&&(R.current.pause(),h==null||h("video",{src:r,currentTime:R.current.currentTime,muted:R.current.muted,volume:R.current.volume}))},150,{trailing:!0});return vU($),window.addEventListener("scroll",se),()=>{window.removeEventListener("scroll",se),yU($)}},[z,C,r,h]);const En=m.useCallback(()=>{R.current&&N(R.current.currentTime)},[N]),Zt=m.useCallback($=>{const se=()=>{document.removeEventListener("mousemove",he,!0),document.removeEventListener("mouseup",se,!0)},he=ze=>{if(!be.current||!R.current)return;const{x:Be}=ws(be.current,ze);isNaN(Be)||(R.current.volume=Be,R.current.muted=!(Be>0),oe.start({volume:`${Be*100}%`,immediate:!0}))};document.addEventListener("mousemove",he,!0),document.addEventListener("mouseup",se,!0),he($.nativeEvent),$.preventDefault(),$.stopPropagation()},[oe]),un=m.useCallback($=>{var ze;const se=()=>{var Be;document.removeEventListener("mousemove",he,!0),document.removeEventListener("mouseup",se,!0),E(!1),(Be=R.current)==null||Be.play()},he=Be=>{if(!Ee.current||!R.current)return;const{x:ln}=ws(Ee.current,Be),Ur=R.current.duration*ln;isNaN(Ur)||(R.current.currentTime=Ur,oe.start({progress:`${ln*100}%`,immediate:!0}))};document.addEventListener("mousemove",he,!0),document.addEventListener("mouseup",se,!0),E(!0),(ze=R.current)==null||ze.pause(),he($.nativeEvent),$.preventDefault(),$.stopPropagation()},[E,oe]),pt=$=>{if(!R.current)return;const se=R.current.currentTime+$;isNaN(se)||(R.current.currentTime=se)},bn=$=>{if(!R.current)return;const se=R.current.volume+$;isNaN(se)||(R.current.volume=se,R.current.muted=!(se>0))},wn=m.useCallback($=>{var se,he;$.key===" "&&($.preventDefault(),$.stopPropagation(),dn(Q,{icon:(se=R.current)!=null&&se.paused?Bi:qi,label:(he=R.current)!=null&&he.paused?de.play:de.pause}),Qe())},[Q,Qe]),Dn=m.useCallback($=>{var he,ze,Be,ln;const se=1/wU(t);switch($.key){case"k":case" ":$.preventDefault(),$.stopPropagation(),dn(Q,{icon:(he=R.current)!=null&&he.paused?Bi:qi,label:(ze=R.current)!=null&&ze.paused?de.play:de.pause}),Qe();break;case"m":$.preventDefault(),$.stopPropagation(),dn(Q,{icon:(Be=R.current)!=null&&Be.muted?bo:kc,label:(ln=R.current)!=null&&ln.muted?de.unmute:de.mute}),Xt();break;case"f":$.preventDefault(),$.stopPropagation(),dn(Q,{icon:qr()?Fi:Wu,label:qr()?de.exit_fullscreen:de.fullscreen}),bt();break;case"j":case"ArrowLeft":$.preventDefault(),$.stopPropagation(),dn(Q,{icon:RE,label:de.skipBackward}),pt(-5);break;case"l":case"ArrowRight":$.preventDefault(),$.stopPropagation(),dn(Q,{icon:IE,label:de.skipForward}),pt(5);break;case",":$.preventDefault(),$.stopPropagation(),pt(-se);break;case".":$.preventDefault(),$.stopPropagation(),pt(se);break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),dn(Q,{icon:bo,label:de.volumeUp}),bn(.15);break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),dn(Q,{icon:_U,label:de.volumeDown}),bn(-.15);break}A&&($.preventDefault(),$.stopPropagation(),$.key==="Escape"&&(Q(Ur=>[...Ur,{key:PE++,icon:Fi,label:de.exit_fullscreen}]),ch()))},[Q,Qe,bt,Xt,A,t]),Lr=m.useCallback(()=>{P(!0),Ke.current&&clearTimeout(Ke.current),Ke.current=setTimeout(()=>{P(!1)},lh)},[P]),Ei=m.useCallback(()=>{P(!0),Ke.current&&clearTimeout(Ke.current),Ke.current=setTimeout(()=>{P(!1)},lh)},[P]),Tn=m.useCallback(()=>{P(!1)},[P]),Mr=m.useCallback(()=>{p?p():pe($=>!$)},[pe,p]),bi=m.useCallback(()=>{R.current&&(U(R.current.duration),typeof y<"u"&&(R.current.currentTime=y),typeof S<"u"&&(R.current.volume=S),typeof b<"u"&&(R.current.muted=b),g&&R.current.play())},[U,y,S,b,g]),Pr=m.useCallback(()=>{if(!R.current)return;const $=R.current.buffered.length-1;$>-1&&oe.start({buffer:`${Math.ceil(R.current.buffered.end($)/R.current.duration)*100}%`})},[oe]),wi=m.useCallback(()=>{R.current&&(W(R.current.volume),M(R.current.muted),oe.start({volume:`${R.current.muted?0:R.current.volume*100}%`}),TU(R.current.volume,R.current.muted))},[oe,W,M]),Ti=m.useCallback(()=>{if(!R.current)return;const $=R.current.paused;R.current.pause(),a==null||a({startTime:R.current.currentTime,autoPlay:!$,defaultVolume:R.current.volume})},[a]),Fr=m.useCallback(()=>{R.current&&(R.current.pause(),u==null||u())},[u]),lr=m.useCallback(({key:$})=>{Q(se=>se.filter(he=>he.key!==$))},[Q]),fr=Math.min(w/q*100,100),cn=K||k===0;let te;return y||A||D?te="auto":l?te="metadata":te="none",O.jsxDEV("div",{children:O.jsxDEV("div",{role:"menuitem",className:Je("video-player",{inactive:!X,detailed:l,fullscreen:A,editable:c}),style:{aspectRatio:n},ref:ye,onMouseEnter:Lr,onMouseMove:Ei,onMouseLeave:Tn,onClick:ur,onKeyDownCapture:Dn,tabIndex:0,children:[_&&O.jsxDEV(xE,{hash:_,className:Je("media-gallery__preview",{"media-gallery__preview--hidden":X}),dummy:!Th},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:821,columnNumber:9},void 0),(X||c)&&O.jsxDEV("video",{ref:kn,src:r,poster:e,preload:te,role:"button",tabIndex:0,"aria-label":i,title:i,lang:s,onClick:cr,onKeyDownCapture:wn,onPlay:wt,onPause:Ft,onLoadedData:bi,onProgress:Pr,onTimeUpdate:En,onVolumeChange:wi,style:{width:"100%"}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:831,columnNumber:9},void 0),O.jsxDEV(SU,{events:ie,onDismiss:lr},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:853,columnNumber:9},void 0),O.jsxDEV(LE,{hidden:X||c,sensitive:o??!1,onClick:Mr,matchedFilters:T},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:858,columnNumber:9},void 0),!u&&!c&&!A&&!f&&X&&O.jsxDEV("div",{className:Je("media-gallery__actions",{active:B||L}),children:O.jsxDEV("button",{className:"media-gallery__actions__pill",onClick:Mr,children:O.jsxDEV(pn,{id:"media_gallery.hide",defaultMessage:"Hide"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:879,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:875,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:870,columnNumber:9},void 0),O.jsxDEV("div",{className:Je("video-player__controls",{active:B||L}),children:[O.jsxDEV("div",{className:"video-player__seek",role:"slider","aria-valuemin":0,"aria-valuenow":fr,"aria-valuemax":100,onMouseDown:un,onKeyDown:wn,tabIndex:0,ref:Ee,children:[O.jsxDEV(Ze.div,{className:"video-player__seek__buffer",style:{width:we.buffer}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:903,columnNumber:13},void 0),O.jsxDEV(Ze.div,{className:"video-player__seek__progress",style:{width:we.progress}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:907,columnNumber:13},void 0),O.jsxDEV(Ze.span,{className:Je("video-player__seek__handle",{active:D}),style:{left:we.progress}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:912,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:892,columnNumber:11},void 0),O.jsxDEV("div",{className:"video-player__buttons-bar",children:[O.jsxDEV("div",{className:"video-player__buttons left",children:[O.jsxDEV("button",{type:"button",title:I.formatMessage(B?de.play:de.pause),"aria-label":I.formatMessage(B?de.play:de.pause),className:"player-button",onClick:Qe,children:O.jsxDEV($t,{id:B?"play":"pause",icon:B?Bi:qi},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:933,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:922,columnNumber:15},void 0),O.jsxDEV("button",{type:"button",title:I.formatMessage(cn?de.unmute:de.mute),"aria-label":I.formatMessage(K?de.unmute:de.mute),className:"player-button",onClick:Xt,children:O.jsxDEV($t,{id:cn?"volume-off":"volume-up",icon:cn?kc:bo},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:949,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:938,columnNumber:15},void 0),O.jsxDEV("div",{className:Je("video-player__volume",{active:L}),role:"slider","aria-valuemin":0,"aria-valuenow":cn?0:k*100,"aria-valuemax":100,onMouseDown:Zt,ref:be,tabIndex:0,children:[O.jsxDEV(Ze.div,{className:"video-player__volume__current",style:{width:we.volume}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:967,columnNumber:17},void 0),O.jsxDEV(Ze.span,{className:Je("video-player__volume__handle"),style:{left:we.volume}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:972,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:955,columnNumber:15},void 0),(l||A)&&O.jsxDEV("span",{className:"video-player__time",children:[O.jsxDEV("span",{className:"video-player__time-current",children:bs(Math.floor(w))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:980,columnNumber:19},void 0),O.jsxDEV("span",{className:"video-player__time-sep",children:"/"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:983,columnNumber:19},void 0),O.jsxDEV("span",{className:"video-player__time-total",children:bs(Math.floor(q))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:984,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:979,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:921,columnNumber:13},void 0),O.jsxDEV("div",{className:"video-player__buttons right",children:[!A&&a&&O.jsxDEV("button",{type:"button",title:I.formatMessage(de.expand),"aria-label":I.formatMessage(de.expand),className:"player-button",onClick:Ti,children:O.jsxDEV($t,{id:"expand",icon:mU},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:1e3,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:993,columnNumber:15},void 0),u&&O.jsxDEV("button",{type:"button",title:I.formatMessage(de.close),"aria-label":I.formatMessage(de.close),className:"player-button",onClick:Fr,children:O.jsxDEV($t,{id:"compress",icon:Fi},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:1011,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:1004,columnNumber:15},void 0),O.jsxDEV("button",{type:"button",title:I.formatMessage(A?de.exit_fullscreen:de.fullscreen),"aria-label":I.formatMessage(A?de.exit_fullscreen:de.fullscreen),className:"player-button",onClick:bt,children:O.jsxDEV($t,{id:A?"compress":"arrows-alt",icon:A?Fi:Wu},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:1025,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:1014,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:991,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:920,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:887,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:803,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/video/index.tsx",lineNumber:802,columnNumber:5},void 0)},y5=Object.freeze(Object.defineProperty({__proto__:null,Video:fh,default:fh,fileNameFromURL:bU,findElementPosition:ME,formatTime:bs,getPointerPosition:ws},Symbol.toStringTag,{value:"Module"})),CU=({audioElementRef:e})=>{const t=m.useRef(),n=m.useRef(),r=m.useRef();m.useEffect(()=>{if(!e.current)return;const o=t.current??new AudioContext,a=n.current??o.createMediaElementSource(e.current),u=o.createGain();return u.connect(o.destination),a.connect(u),t.current=o,r.current=u,n.current=a,()=>{o.state!=="closed"&&o.close()}},[e]);const i=m.useCallback(()=>{var o,a;(o=e.current)==null||o.play(),(a=t.current)==null||a.resume()},[e]),s=m.useCallback(()=>{var o,a;(o=e.current)==null||o.pause(),(a=t.current)==null||a.suspend()},[e]);return{audioContextRef:t,sourceRef:n,gainNodeRef:r,playAudio:i,pauseAudio:s}},NU=e=>new Array(...e).map(t=>t===-1/0?0:Math.sqrt(1-Math.max(-100,Math.min(-10,t))*-1/100)),AU=({audioContextRef:e,sourceRef:t,numBands:n})=>{const r=m.useRef(),[i,s]=m.useState(new Array(n).fill(0));return m.useEffect(()=>{e.current&&(r.current=e.current.createAnalyser(),r.current.smoothingTimeConstant=.6,r.current.fftSize=2048)},[e]),m.useEffect(()=>{r.current&&t.current&&t.current.connect(r.current);const o=t.current;return()=>{o&&r.current&&o.disconnect(r.current)}},[e,t]),m.useEffect(()=>{const o=r.current,a=e.current;if(!o||!a)return;const u=o.frequencyBinCount,l=new Float32Array(u),f=setInterval(()=>{o.getFloatFrequencyData(l);const d=NU(l.slice(100,600)),p=[],h=Math.ceil(d.length/n);for(let _=0;_<n;_++){const g=d.slice(_*h,(_+1)*h).reduce((y,S)=>y+S,0);p.push(g/h)}s(p)},15);return()=>{clearInterval(f)}},[n,e]),i},mt=Ho({play:{id:"video.play",defaultMessage:"Play"},pause:{id:"video.pause",defaultMessage:"Pause"},mute:{id:"video.mute",defaultMessage:"Mute"},unmute:{id:"video.unmute",defaultMessage:"Unmute"},download:{id:"video.download",defaultMessage:"Download file"},hide:{id:"audio.hide",defaultMessage:"Hide audio"},skipForward:{id:"video.skip_forward",defaultMessage:"Skip forward"},skipBackward:{id:"video.skip_backward",defaultMessage:"Skip backward"}}),IU=(e,t)=>{tr.set("volume",e),tr.set("muted",t)},RU=e=>{const t=tr.get("volume")??.5,n=tr.get("muted")??!1;e.volume=t,e.muted=n},Gu=4e3,dh=({src:e,alt:t,lang:n,poster:r,duration:i,sensitive:s,editable:o,blurhash:a,visible:u,onToggleVisibility:l,backgroundColor:c="#000000",foregroundColor:f="#ffffff",accentColor:d="#ffffff",startTime:p,startPlaying:h,startVolume:_,startMuted:g,deployPictureInPicture:y,matchedFilters:S})=>{const b=$c(),[T,I]=m.useState(0),[w,N]=m.useState(i??0),[q,U]=m.useState(!0),[k,W]=m.useState(!1),[B,z]=m.useState(.5),[D,E]=m.useState(!1),[A,C]=m.useState(!1),[L,P]=m.useState(!1),K=m.useRef(null),M=m.useRef(null),X=m.useRef(null),pe=m.useRef(null),ie=m.useRef(),Q=m.useId(),{audioContextRef:ye,sourceRef:R,gainNodeRef:Ee,playAudio:be,pauseAudio:Fe}=CU({audioElementRef:M}),Ke=AU({audioContextRef:ye,sourceRef:R,numBands:3}),[we,oe]=Hr(()=>({progress:"0%",buffer:"0%",volume:"0%"})),kn=m.useCallback(te=>{M.current&&!M.current.paused&&te===null&&(y==null||y("audio",{src:e,poster:r,backgroundColor:c,foregroundColor:f,accentColor:d,currentTime:M.current.currentTime,muted:M.current.muted,volume:M.current.volume})),M.current=te,M.current&&(RU(M.current),z(M.current.volume),W(M.current.muted),Ee.current&&(Ee.current.gain.value=M.current.volume),oe.start({volume:`${M.current.volume*100}%`}))},[y,e,r,c,f,d,Ee,oe]);m.useEffect(()=>{M.current&&(M.current.volume=B,M.current.muted=k,Ee.current&&(Ee.current.gain.value=k?0:B))},[B,k,Ee]),m.useEffect(()=>{P(typeof u<"u"?u:To==="show_all"||To!=="hide_all"&&!s)},[u,s]),m.useEffect(()=>{L||Fe()},[Fe,L]),m.useEffect(()=>{let te;const $=()=>{te=requestAnimationFrame(()=>{M.current&&M.current.duration>0&&oe.start({progress:`${M.current.currentTime/M.current.duration*100}%`,config:gr.stiff}),$()})};return $(),()=>{cancelAnimationFrame(te)}},[oe]);const Qe=m.useCallback(()=>{M.current&&(M.current.paused?be():Fe())},[be,Fe]),bt=m.useCallback(()=>{U(!1)},[]),Xt=m.useCallback(()=>{U(!0)},[]),ur=m.useCallback(()=>{if(!M.current)return;const te=M.current.buffered.length-1;te>-1&&oe.start({buffer:`${Math.ceil(M.current.buffered.end(te)/M.current.duration)*100}%`})},[oe]),cr=m.useCallback(()=>{M.current&&(z(M.current.volume),W(M.current.muted),oe.start({volume:`${M.current.muted?0:M.current.volume*100}%`}),IU(M.current.volume,M.current.muted))},[oe,z,W]),wt=m.useCallback(()=>{M.current&&I(M.current.currentTime)},[I]),Ft=m.useCallback(()=>{if(!M.current)return;M.current.muted||M.current.volume===0?(M.current.muted=!1,M.current.volume===0&&(M.current.volume=.05)):M.current.muted=!0},[]),En=m.useCallback(()=>{l?l():P(te=>!te)},[l,P]),Zt=m.useCallback(te=>{const $=()=>{document.removeEventListener("mousemove",se,!0),document.removeEventListener("mouseup",$,!0)},se=he=>{if(!pe.current||!M.current)return;const{x:ze}=ws(pe.current,he);isNaN(ze)||(M.current.volume=ze,M.current.muted=!(ze>0),oe.start({volume:`${ze*100}%`,immediate:!0}))};document.addEventListener("mousemove",se,!0),document.addEventListener("mouseup",$,!0),se(te.nativeEvent),te.preventDefault(),te.stopPropagation()},[oe]),un=m.useCallback(te=>{var he;const $=()=>{document.removeEventListener("mousemove",se,!0),document.removeEventListener("mouseup",$,!0),C(!1),be()},se=ze=>{if(!X.current||!M.current)return;const{x:Be}=ws(X.current,ze),ln=M.current.duration*Be;isNaN(ln)||(M.current.currentTime=ln,oe.start({progress:`${Be*100}%`,immediate:!0}))};document.addEventListener("mousemove",se,!0),document.addEventListener("mouseup",$,!0),C(!0),(he=M.current)==null||he.pause(),se(te.nativeEvent),te.preventDefault(),te.stopPropagation()},[be,oe]),pt=m.useCallback(()=>{E(!0),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{E(!1)},Gu)},[E]),bn=m.useCallback(()=>{E(!0),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{E(!1)},Gu)},[E]),wn=m.useCallback(()=>{E(!1),ie.current&&clearTimeout(ie.current)},[E]),Dn=m.useCallback(()=>{E(!0),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{E(!1)},Gu)},[E]),Lr=m.useCallback(()=>{M.current&&(N(M.current.duration),typeof p<"u"&&(M.current.currentTime=p),typeof _<"u"&&(M.current.volume=_),typeof g<"u"&&(M.current.muted=g))},[N,p,_,g]),Ei=m.useCallback(()=>{h&&be()},[h,be]),Tn=te=>{if(!M.current)return;const $=M.current.currentTime+te;isNaN($)||(M.current.currentTime=$)},Mr=m.useCallback(te=>{te.key===" "&&(te.preventDefault(),te.stopPropagation(),Qe())},[Qe]),bi=m.useCallback(()=>{Tn(-5)},[]),Pr=m.useCallback(()=>{Tn(5)},[]),wi=m.useCallback(te=>{const $=se=>{if(!M.current)return;const he=Math.max(0,M.current.volume+se);isNaN(he)||(M.current.volume=he,M.current.muted=!(he>0))};switch(te.key){case"k":case" ":te.preventDefault(),te.stopPropagation(),Qe();break;case"m":te.preventDefault(),te.stopPropagation(),Ft();break;case"j":case"ArrowLeft":te.preventDefault(),te.stopPropagation(),Tn(-5);break;case"l":case"ArrowRight":te.preventDefault(),te.stopPropagation(),Tn(5);break;case"ArrowUp":te.preventDefault(),te.stopPropagation(),$(.15);break;case"ArrowDown":te.preventDefault(),te.stopPropagation(),$(-.15);break}},[Qe,Ft]),Ti=Hr({to:{r:50+(Ke[0]??0)*10},config:gr.wobbly}),Fr=Hr({to:{r:50+(Ke[1]??0)*10},config:gr.wobbly}),lr=Hr({to:{r:50+(Ke[2]??0)*10},config:gr.wobbly}),fr=Math.min(T/w*100,100),cn=k||B===0;return O.jsxDEV("div",{className:Je("audio-player",{inactive:!L}),ref:K,style:{"--player-background-color":c,"--player-foreground-color":f,"--player-accent-color":d},onMouseEnter:pt,onMouseMove:bn,onMouseLeave:wn,onTouchEnd:Dn,role:"button",tabIndex:0,onKeyDownCapture:wi,"aria-label":t,lang:n,children:[a&&O.jsxDEV(xE,{hash:a,className:Je("media-gallery__preview",{"media-gallery__preview--hidden":L}),dummy:!Th},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:579,columnNumber:7},void 0),O.jsxDEV("audio",{src:e,ref:kn,preload:h?"auto":"none",onPlay:bt,onPause:Xt,onProgress:ur,onLoadedData:Lr,onCanPlayThrough:Ei,onTimeUpdate:wt,onVolumeChange:cr,crossOrigin:"anonymous"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:588,columnNumber:7},void 0),O.jsxDEV("div",{className:"video-player__seek","aria-valuemin":0,"aria-valuenow":fr,"aria-valuemax":100,onMouseDown:un,onKeyDownCapture:Mr,ref:X,role:"slider",tabIndex:0,children:[O.jsxDEV(Ze.div,{className:"video-player__seek__buffer",style:{width:we.buffer}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:613,columnNumber:9},void 0),O.jsxDEV(Ze.div,{className:"video-player__seek__progress",style:{width:we.progress}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:617,columnNumber:9},void 0),O.jsxDEV(Ze.span,{className:Je("video-player__seek__handle",{active:A}),style:{left:we.progress}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:622,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:602,columnNumber:7},void 0),O.jsxDEV("div",{className:"audio-player__controls",children:[O.jsxDEV("div",{className:"audio-player__controls__play",children:O.jsxDEV("button",{type:"button",title:b.formatMessage(mt.skipBackward),"aria-label":b.formatMessage(mt.skipBackward),className:"player-button",onClick:bi,children:O.jsxDEV($t,{id:"",icon:RE},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:639,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:632,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:631,columnNumber:9},void 0),O.jsxDEV("div",{className:"audio-player__controls__play",children:[O.jsxDEV("svg",{className:"audio-player__visualizer",viewBox:"0 0 124 124",xmlns:"http://www.w3.org/2000/svg",children:[O.jsxDEV(Ze.circle,{opacity:.5,cx:57,cy:62.5,r:Ti.r,fill:"var(--player-accent-color)"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:649,columnNumber:13},void 0),O.jsxDEV(Ze.circle,{opacity:.5,cx:65,cy:57.5,r:Fr.r,fill:"var(--player-accent-color)"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:656,columnNumber:13},void 0),O.jsxDEV(Ze.circle,{opacity:.5,cx:63,cy:66.5,r:lr.r,fill:"var(--player-accent-color)"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:663,columnNumber:13},void 0),O.jsxDEV("g",{clipPath:`url(#${Q}-clip)`,children:[O.jsxDEV("rect",{x:14,y:14,width:96,height:96,fill:`url(#${Q}-pattern)`},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:672,columnNumber:15},void 0),O.jsxDEV("rect",{x:14,y:14,width:96,height:96,fill:"var(--player-background-color",opacity:.45},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:679,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:671,columnNumber:13},void 0),O.jsxDEV("defs",{children:[O.jsxDEV("pattern",{id:`${Q}-pattern`,patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:O.jsxDEV("use",{href:`#${Q}-image`},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:696,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:690,columnNumber:15},void 0),O.jsxDEV("clipPath",{id:`${Q}-clip`,children:O.jsxDEV("rect",{x:14,y:14,width:96,height:96,rx:48,fill:"white"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:700,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:699,columnNumber:15},void 0),O.jsxDEV("image",{id:`${Q}-image`,href:r,width:1,height:1,preserveAspectRatio:"none"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:710,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:689,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:644,columnNumber:11},void 0),O.jsxDEV("button",{type:"button",title:b.formatMessage(q?mt.play:mt.pause),"aria-label":b.formatMessage(q?mt.play:mt.pause),className:"player-button",onClick:Qe,children:O.jsxDEV($t,{id:q?"play":"pause",icon:q?Bi:qi},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:729,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:720,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:643,columnNumber:9},void 0),O.jsxDEV("div",{className:"audio-player__controls__play",children:O.jsxDEV("button",{type:"button",title:b.formatMessage(mt.skipForward),"aria-label":b.formatMessage(mt.skipForward),className:"player-button",onClick:Pr,children:O.jsxDEV($t,{id:"",icon:IE},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:744,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:737,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:736,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:630,columnNumber:7},void 0),O.jsxDEV(LE,{hidden:L||o,sensitive:s??!1,onClick:En,matchedFilters:S},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:749,columnNumber:7},void 0),O.jsxDEV("div",{className:Je("video-player__controls",{active:D}),children:O.jsxDEV("div",{className:"video-player__buttons-bar",children:[O.jsxDEV("div",{className:"video-player__buttons left",children:[O.jsxDEV("button",{type:"button",title:b.formatMessage(k?mt.unmute:mt.mute),"aria-label":b.formatMessage(k?mt.unmute:mt.mute),className:"player-button",onClick:Ft,children:O.jsxDEV($t,{id:k?"volume-off":"volume-up",icon:k?kc:bo},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:772,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:761,columnNumber:13},void 0),O.jsxDEV("div",{className:"video-player__volume active",ref:pe,onMouseDown:Zt,role:"slider","aria-valuemin":0,"aria-valuenow":cn?0:B*100,"aria-valuemax":100,tabIndex:0,children:[O.jsxDEV(Ze.div,{className:"video-player__volume__current",style:{width:we.volume}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:788,columnNumber:15},void 0),O.jsxDEV(Ze.span,{className:Je("video-player__volume__handle"),style:{left:we.volume}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:793,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:778,columnNumber:13},void 0),O.jsxDEV("span",{className:"video-player__time",children:[O.jsxDEV("span",{className:"video-player__time-current",children:bs(Math.floor(T))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:800,columnNumber:15},void 0),O.jsxDEV("span",{className:"video-player__time-sep",children:"/"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:803,columnNumber:15},void 0),O.jsxDEV("span",{className:"video-player__time-total",children:bs(Math.floor(w))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:804,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:799,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:760,columnNumber:11},void 0),O.jsxDEV("div",{className:"video-player__buttons right",children:!o&&O.jsxDEV(O.Fragment,{children:[O.jsxDEV("button",{type:"button",className:"player-button",onClick:En,children:O.jsxDEV(pn,{id:"media_gallery.hide",defaultMessage:"Hide"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:818,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:813,columnNumber:17},void 0),O.jsxDEV("a",{title:b.formatMessage(mt.download),"aria-label":b.formatMessage(mt.download),className:"video-player__download__icon player-button",href:e,download:!0,children:O.jsxDEV($t,{id:"download",icon:oU},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:831,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:824,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:812,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:810,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:759,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:756,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/audio/index.tsx",lineNumber:558,columnNumber:5},void 0)},S5=Object.freeze(Object.defineProperty({__proto__:null,Audio:dh,default:dh},Symbol.toStringTag,{value:"Module"})),E5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z"})),b5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M280-80 120-240l160-160 56 58-62 62h406v-160h80v240H274l62 62-56 58Zm-80-440v-240h486l-62-62 56-58 160 160-160 160-56-58 62-62H280v160h-80Z"})),w5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M760-200v-160q0-50-35-85t-85-35H273l144 144-57 56-240-240 240-240 57 56-144 144h367q83 0 141.5 58.5T840-360v160h-80Z"})),T5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M320-280 80-520l240-240 57 56-184 184 184 184-57 56Zm480 80v-160q0-50-35-85t-85-35H433l144 144-57 56-240-240 240-240 57 56-144 144h247q83 0 141.5 58.5T880-360v160h-80Z"})),O5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"m233-120 65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Z"})),C5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-350Z"})),N5=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M7 22L3 18L7 14L8.4 15.45L6.85 17H17V13H19V19H6.85L8.4 20.55L7 22ZM5 11V5H17.15L15.6 3.45L17 2L21 6L17 10L15.6 8.55L17.15 7H7V11H5Z"}),m.createElement("path",{d:"M9 9H15V15H9V9Z"})),A5=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M19 13V17.8787L17 15.8787V13H19Z"}),m.createElement("path",{d:"M2.41421 2.70711L1 4.12132L5 8.12132V11H7V10.1213L13.8787 17H6.85L8.4 15.45L7 14L3 18L7 22L8.4 20.55L6.85 19H15.8787L19.3848 22.5061L20.799 21.0919L2.41421 2.70711Z"}),m.createElement("path",{d:"M17.15 7H8.12132L6.12132 5H17.15L15.6 3.45L17 2L21 6L17 10L15.6 8.55L17.15 7Z"})),I5=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M8.4 15.45L7 14L3 18L7 22L8.4 20.55L6.85 19H13.5V18C13.5 17.6567 13.5638 17.3171 13.6988 17H6.85L8.4 15.45Z"}),m.createElement("path",{d:"M5 5V11H7V7H17.15L15.6 8.55L17 10L21 6L17 2L15.6 3.45L17.15 5H5Z"}),m.createElement("path",{d:"M16 22C15.7167 22 15.475 21.9083 15.275 21.725C15.0917 21.525 15 21.2833 15 21V18C15 17.7167 15.0917 17.4833 15.275 17.3C15.475 17.1 15.7167 17 16 17V16C16 15.45 16.1917 14.9833 16.575 14.6C16.975 14.2 17.45 14 18 14C18.55 14 19.0167 14.2 19.4 14.6C19.8 14.9833 20 15.45 20 16V17C20.2833 17 20.5167 17.1 20.7 17.3C20.9 17.4833 21 17.7167 21 18V21C21 21.2833 20.9 21.525 20.7 21.725C20.5167 21.9083 20.2833 22 20 22H16ZM17 17H19V16C19 15.7167 18.9 15.4833 18.7 15.3C18.5167 15.1 18.2833 15 18 15C17.7167 15 17.475 15.1 17.275 15.3C17.0917 15.4833 17 15.7167 17 16V17Z"})),R5=e=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M8.4 15.45L7 14L3 18L7 22L8.4 20.55L6.85 19H13.5V18C13.5 17.6567 13.5638 17.3171 13.6988 17H6.85L8.4 15.45Z"}),m.createElement("path",{d:"M15 14.1883C14.8435 14.443 14.7232 14.7147 14.6398 15H9V9H15V14.1883Z"}),m.createElement("path",{d:"M5 5V11H7V7H17.15L15.6 8.55L17 10L21 6L17 2L15.6 3.45L17.15 5H5Z"}),m.createElement("path",{d:"M16 22C15.7167 22 15.475 21.9083 15.275 21.725C15.0917 21.525 15 21.2833 15 21V18C15 17.7167 15.0917 17.4833 15.275 17.3C15.475 17.1 15.7167 17 16 17V16C16 15.45 16.1917 14.9833 16.575 14.6C16.975 14.2 17.45 14 18 14C18.55 14 19.0167 14.2 19.4 14.6C19.8 14.9833 20 15.45 20 16V17C20.2833 17 20.5167 17.1 20.7 17.3C20.9 17.4833 21 17.7167 21 18V21C21 21.2833 20.9 21.525 20.7 21.725C20.5167 21.9083 20.2833 22 20 22H16ZM17 17H19V16C19 15.7167 18.9 15.4833 18.7 15.3C18.5167 15.1 18.2833 15 18 15C17.7167 15 17.475 15.1 17.275 15.3C17.0917 15.4833 17 15.7167 17 16V17Z"})),xU=({value:e})=>{const[t,n]=m.useState(e),r=e>t?-1:1,[i,s]=Hr(()=>({from:{transform:`translateY(${100*r}%)`},to:{transform:"translateY(0%)"},onRest(){n(e)},config:{...gr.gentle,duration:200},immediate:!0}),[e,t]);return m.useEffect(()=>{e!==t&&s.start({reset:!0})},[s,t,e]),l0?O.jsxDEV(Da,{value:e},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/animated_number.tsx",lineNumber:37,columnNumber:12},void 0):O.jsxDEV("span",{className:"animated-number",children:[O.jsxDEV(Ze.span,{style:i,children:O.jsxDEV(Da,{value:e},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/animated_number.tsx",lineNumber:43,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/animated_number.tsx",lineNumber:42,columnNumber:7},void 0),e!==t&&O.jsxDEV(Ze.span,{style:{...i,position:"absolute",top:`${-100*r}%`},role:"presentation",children:O.jsxDEV(Da,{value:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/animated_number.tsx",lineNumber:54,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/animated_number.tsx",lineNumber:46,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/animated_number.tsx",lineNumber:41,columnNumber:5},void 0)},LU=m.forwardRef(({className:e,expanded:t,icon:n,iconComponent:r,inverted:i,title:s,counter:o,href:a,style:u,activeStyle:l,onClick:c,onKeyDown:f,onKeyPress:d,onMouseDown:p,active:h=!1,disabled:_=!1,animate:g=!1,overlay:y=!1,tabIndex:S=0,ariaHidden:b=!1,ariaControls:T},I)=>{const[w,N]=m.useState(!1),[q,U]=m.useState(!1);m.useEffect(()=>{g&&(w&&!h?(N(!1),U(!0)):!w&&h&&(N(!0),U(!1)))},[N,U,g,h,w]);const k=m.useCallback(C=>{C.preventDefault(),_||c==null||c(C)},[_,c]),W=m.useCallback(C=>{_||d==null||d(C)},[_,d]),B=m.useCallback(C=>{_||p==null||p(C)},[_,p]),z=m.useCallback(C=>{_||f==null||f(C)},[_,f]),D={...u,...h?l:{}},E=Je(e,"icon-button",{active:h,disabled:_,inverted:i,activate:w,deactivate:q,overlayed:y,"icon-button--with-counter":typeof o<"u"});let A=O.jsxDEV(O.Fragment,{children:[O.jsxDEV($t,{id:n,icon:r,"aria-hidden":"true"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/icon_button.tsx",lineNumber:135,columnNumber:9},void 0)," ",typeof o<"u"&&O.jsxDEV("span",{className:"icon-button__counter",children:O.jsxDEV(xU,{value:o},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/icon_button.tsx",lineNumber:138,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/icon_button.tsx",lineNumber:137,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/icon_button.tsx",lineNumber:134,columnNumber:5},void 0);return a!=null&&(A=O.jsxDEV("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:A},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/icon_button.tsx",lineNumber:146,columnNumber:7},void 0)),O.jsxDEV("button",{type:"button","aria-label":s,"aria-expanded":t,"aria-hidden":b,"aria-controls":T,title:s,className:E,onClick:k,onMouseDown:B,onKeyDown:z,onKeyPress:W,style:D,tabIndex:S,disabled:_,ref:I,children:A},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/icon_button.tsx",lineNumber:153,columnNumber:7},void 0)});LU.displayName="IconButton";const x5={match:ge.object.isRequired,location:ge.object.isRequired,history:ge.object.isRequired},L5={match:ge.object,location:ge.object,history:ge.object};function M5(e){const t=`withRouter(${e.displayName??e.name})`,n=r=>{const{wrappedComponentRef:i,...s}=r;return O.jsxDEV(e0.Consumer,{children:o=>o?O.jsxDEV(e,{...s,...o,ref:i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/utils/react_router.tsx",lineNumber:40,columnNumber:15},this):O.jsxDEV(e,{...s,ref:i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/utils/react_router.tsx",lineNumber:48,columnNumber:20},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/utils/react_router.tsx",lineNumber:34,columnNumber:7},this)};return n.displayName=t,n.WrappedComponent=e,yh(n,e)}var Ku,ph;function MU(){if(ph)return Ku;ph=1;var e=uf,t="<<anonymous>>",n;n={listOf:l,mapOf:f,orderedMapOf:d,setOf:p,orderedSetOf:h,stackOf:_,iterableOf:g,recordOf:y,shape:b,contains:b,mapContains:T,orderedMapContains:I,list:s("List",e.List.isList),map:s("Map",e.Map.isMap),orderedMap:s("OrderedMap",e.OrderedMap.isOrderedMap),set:s("Set",e.Set.isSet),orderedSet:s("OrderedSet",e.OrderedSet.isOrderedSet),stack:s("Stack",e.Stack.isStack),seq:s("Seq",e.Seq.isSeq),record:s("Record",function(w){return w instanceof e.Record}),iterable:s("Iterable",e.Iterable.isIterable)},n.iterable.indexed=o("Indexed",e.Iterable.isIndexed),n.iterable.keyed=o("Keyed",e.Iterable.isKeyed);function r(w){var N=typeof w;return Array.isArray(w)?"array":w instanceof RegExp?"object":w instanceof e.Iterable?"Immutable."+w.toSource().split(" ")[0]:N}function i(w){function N(U,k,W,B,z,D){for(var E=arguments.length,A=Array(E>6?E-6:0),C=6;C<E;C++)A[C-6]=arguments[C];if(D=D||W,B=B||t,k[W]==null){var L=z;if(U)return new Error("Required "+L+" `"+D+"` was not specified in "+("`"+B+"`."))}else return w.apply(void 0,[k,W,B,z,D].concat(A))}var q=N.bind(null,!1);return q.isRequired=N.bind(null,!0),q}function s(w,N){function q(U,k,W,B,z){var D=U[k];if(!N(D)){var E=r(D);return new Error("Invalid "+B+" `"+z+"` of type `"+E+"` "+("supplied to `"+W+"`, expected `"+w+"`."))}return null}return i(q)}function o(w,N){return s("Iterable."+w,function(q){return e.Iterable.isIterable(q)&&N(q)})}function a(w,N,q){function U(k,W,B,z,D){for(var E=arguments.length,A=Array(E>5?E-5:0),C=5;C<E;C++)A[C-5]=arguments[C];var L=k[W];if(!q(L)){var P=z,K=r(L);return new Error("Invalid "+P+" `"+D+"` of type "+("`"+K+"` supplied to `"+B+"`, expected an Immutable.js "+N+"."))}if(typeof w!="function")return new Error("Invalid typeChecker supplied to `"+B+"` "+("for propType `"+D+"`, expected a function."));for(var M=L.valueSeq().toArray(),X=0,pe=M.length;X<pe;X++){var ie=w.apply(void 0,[M,X,B,z,""+D+"["+X+"]"].concat(A));if(ie instanceof Error)return ie}}return i(U)}function u(w){function N(q,U,k,W,B){for(var z=arguments.length,D=Array(z>5?z-5:0),E=5;E<z;E++)D[E-5]=arguments[E];var A=q[U];if(typeof w!="function")return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+k+"` "+("for propType `"+B+"`, expected a function."));for(var C=A.keySeq().toArray(),L=0,P=C.length;L<P;L++){var K=w.apply(void 0,[C,L,k,W,""+B+" -> key("+C[L]+")"].concat(D));if(K instanceof Error)return K}}return i(N)}function l(w){return a(w,"List",e.List.isList)}function c(w,N,q,U){function k(){for(var W=arguments.length,B=Array(W),z=0;z<W;z++)B[z]=arguments[z];return a(w,q,U).apply(void 0,B)||N&&u(N).apply(void 0,B)}return i(k)}function f(w,N){return c(w,N,"Map",e.Map.isMap)}function d(w,N){return c(w,N,"OrderedMap",e.OrderedMap.isOrderedMap)}function p(w){return a(w,"Set",e.Set.isSet)}function h(w){return a(w,"OrderedSet",e.OrderedSet.isOrderedSet)}function _(w){return a(w,"Stack",e.Stack.isStack)}function g(w){return a(w,"Iterable",e.Iterable.isIterable)}function y(w){function N(q,U,k,W,B){for(var z=arguments.length,D=Array(z>5?z-5:0),E=5;E<z;E++)D[E-5]=arguments[E];var A=q[U];if(!(A instanceof e.Record)){var C=r(A),L=W;return new Error("Invalid "+L+" `"+B+"` of type `"+C+"` "+("supplied to `"+k+"`, expected an Immutable.js Record."))}for(var P in w){var K=w[P];if(K){var M=A.toObject(),X=K.apply(void 0,[M,P,k,W,""+B+"."+P].concat(D));if(X)return X}}}return i(N)}function S(w){var N=arguments[1]===void 0?"Iterable":arguments[1],q=arguments[2]===void 0?e.Iterable.isIterable:arguments[2];function U(k,W,B,z,D){for(var E=arguments.length,A=Array(E>5?E-5:0),C=5;C<E;C++)A[C-5]=arguments[C];var L=k[W];if(!q(L)){var P=r(L),K=z;return new Error("Invalid "+K+" `"+D+"` of type `"+P+"` "+("supplied to `"+B+"`, expected an Immutable.js "+N+"."))}var M=L.toObject();for(var X in w){var pe=w[X];if(pe){var ie=pe.apply(void 0,[M,X,B,z,""+D+"."+X].concat(A));if(ie)return ie}}}return i(U)}function b(w){return S(w)}function T(w){return S(w,"Map",e.Map.isMap)}function I(w){return S(w,"OrderedMap",e.OrderedMap.isOrderedMap)}return Ku=n,Ku}var PU=MU();const P5=oi(PU);function wo(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wo=function(t){return typeof t}:wo=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wo(e)}function FU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kU(e,t,n){return t&&UU(e.prototype,t),e}function DU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hh(n,!0).forEach(function(r){DU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hh(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $U(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jc(e,t)}function Dc(e){return Dc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Dc(e)}function jc(e,t){return jc=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},jc(e,t)}function qU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BU(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:qU(e)}var mh={};function HU(e){return e!==null&&wo(e)==="object"&&typeof e.get=="function"&&typeof e.has=="function"}function VU(e){return e==null}function zU(e,t,n){return VU(e)?n:HU(e)?e.has(t)?e.get(t):n:hasOwnProperty.call(e,t)?e[t]:n}function _h(e,t,n){for(var r=0;r!==t.length;)if(e=zU(e,t[r++],mh),e===mh)return n;return e}function gh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=WU(t,n),i=e||Object.keys(jU({},n,{},t));return i.every(r)}function WU(e,t){return function(n){if(typeof n=="string")return ke(t[n],e[n]);if(Array.isArray(n))return ke(_h(t,n),_h(e,n));throw new TypeError("Invalid key: expected Array or string: "+n)}}var F5=function(e){$U(t,e);function t(){return FU(this,t),BU(this,Dc(t).apply(this,arguments))}return kU(t,[{key:"shouldComponentUpdate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return!gh(this.updateOnProps,this.props,r,"updateOnProps")||!gh(this.updateOnStates,this.state,i,"updateOnStates")}}]),t}(Qu.Component);const U5=e=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...e},m.createElement("path",{d:"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z"})),k5=(e,t=5)=>{const n=m.useRef(null),r=m.useCallback(s=>{n.current=[s.clientX,s.clientY]},[]),i=m.useCallback(s=>{if(!n.current)return;const[o,a]=n.current,[u,l]=[Math.abs(s.clientX-o),Math.abs(s.clientY-a)];let c=s.target;for(;c&&c instanceof HTMLElement;){if(c.localName==="button"||c.localName==="a"||c.localName==="label")return;c=c.parentNode}u+l<t&&(s.button===0||s.button===1)&&s.detail>=1&&e(s),n.current=null},[t,e]);return[r,i]};export{c2 as $,p5 as A,g5 as B,F2 as C,zA as D,Xl as E,WA as F,gk as G,ol as H,$t as I,wD as J,GA as K,fm as L,Tg as M,K2 as N,NE as O,Sr as P,MD as Q,pk as R,d5 as S,Ck as T,f5 as U,fh as V,jk as W,B2 as X,m5 as Y,AE as Z,d2 as _,h2 as a,JD as a$,rn as a0,$2 as a1,oD as a2,dD as a3,DC as a4,gD as a5,k5 as a6,vk as a7,Eu as a8,gs as a9,nA as aA,VC as aB,cD as aC,HC as aD,Bg as aE,uk as aF,rk as aG,sk as aH,ik as aI,ok as aJ,hu as aK,$k as aL,z2 as aM,xr as aN,sm as aO,u2 as aP,U5 as aQ,x5 as aR,h5 as aS,w5 as aT,T5 as aU,N5 as aV,R5 as aW,I5 as aX,A5 as aY,M5 as aZ,L5 as a_,ws as aa,b5 as ab,uD as ac,RD as ad,kD as ae,ZC as af,aD as ag,y2 as ah,sA as ai,_k as aj,BC as ak,Se as al,cI as am,ra as an,uR as ao,Ve as ap,a2 as aq,aR as ar,v5 as as,om as at,Gk as au,zk as av,qk as aw,Zk as ax,cA as ay,j2 as az,LU as b,pD as b$,ZD as b0,E5 as b1,kb as b2,o2 as b3,xE as b4,sU as b5,Uk as b6,Po as b7,Mo as b8,gI as b9,Sk as bA,bk as bB,yk as bC,Fk as bD,Ik as bE,Nk as bF,lk as bG,E2 as bH,S2 as bI,w2 as bJ,l5 as bK,b2 as bL,l2 as bM,Yl as bN,L2 as bO,x2 as bP,t5 as bQ,WF as bR,m2 as bS,Lb as bT,qC as bU,TD as bV,xU as bW,J as bX,LE as bY,bs as bZ,xD as b_,eD as ba,oy as bb,JN as bc,yt as bd,ke as be,Bi as bf,v2 as bg,fe as bh,Lt as bi,z_ as bj,V1 as bk,vi as bl,ui as bm,Dk as bn,kk as bo,Lk as bp,xk as bq,Ak as br,zT as bs,KT as bt,dk as bu,V as bv,Ok as bw,Pk as bx,Mk as by,Ek as bz,dh as c,Y2 as c$,fD as c0,lD as c1,vD as c2,a5 as c3,JC as c4,mk as c5,mD as c6,hD as c7,XD as c8,YD as c9,aA as cA,uA as cB,iA as cC,pu as cD,rA as cE,UD as cF,DD as cG,oA as cH,bD as cI,vU as cJ,yU as cK,qr as cL,Ox as cM,mb as cN,Vk as cO,Hk as cP,Bk as cQ,Wk as cR,W2 as cS,ak as cT,Fu as cU,DM as cV,vs as cW,Zg as cX,jD as cY,Q2 as cZ,U2 as c_,zD as ca,VD as cb,Oa as cc,eR as cd,k2 as ce,D2 as cf,Ag as cg,Cg as ch,Ng as ci,Ig as cj,vC as ck,iD as cl,Tx as cm,q2 as cn,yr as co,sD as cp,fk as cq,_D as cr,Fy as cs,I2 as ct,R2 as cu,hk as cv,P2 as cw,tD as cx,nD as cy,rD as cz,_5 as d,Ax as d$,G2 as d0,nk as d1,Yk as d2,Jk as d3,Xk as d4,Kk as d5,Qk as d6,ID as d7,ek as d8,qA as d9,s5 as dA,o5 as dB,u5 as dC,c5 as dD,et as dE,Ja as dF,CD as dG,ND as dH,AD as dI,kR as dJ,ku as dK,Du as dL,Zo as dM,M2 as dN,ck as dO,ae as dP,n5 as dQ,r5 as dR,i5 as dS,fu as dT,du as dU,SD as dV,ED as dW,yD as dX,_i as dY,PD as dZ,FD as d_,$A as da,e5 as db,Z2 as dc,bp as dd,X2 as de,g2 as df,Hx as dg,J1 as dh,Z1 as di,J2 as dj,ju as dk,Qi as dl,T2 as dm,O2 as dn,C2 as dp,N2 as dq,WD as dr,GD as ds,KD as dt,QD as du,A2 as dv,BD as dw,HD as dx,$D as dy,qD as dz,LD as e,Nx as e0,Cu as e1,Tu as e2,Ix as e3,Rx as e4,Au as e5,Ou as e6,Nu as e7,tk as e8,He as e9,DR as ea,OD as eb,ve as ec,y5 as ed,S5 as ee,_2 as f,Hr as g,gr as h,Ze as i,f2 as j,Rk as k,Tk as l,wk as m,jR as n,Ws as o,fx as p,lx as q,Px as r,Db as s,dx as t,p2 as u,O5 as v,C5 as w,ZO as x,F5 as y,P5 as z};
//# sourceMappingURL=useSelectableClick-DBo53LOf.js.map
