import{j as e}from"./client-BG6VvM0b.js";import{u as E,r as a,d as M}from"./index-ykyyQSL-.js";import{H as V}from"./Helmet-D0DLVOv1.js";import{L as k}from"./short_number--sxn3OKQ.js";import{c as A}from"./index.module-CVExFLDO.js";import{S as C}from"./person-BiDPmDpQ.js";import{u as L,a as v,cU as y,dO as R,dP as F,ap as I}from"./useSelectableClick-DBo53LOf.js";import{d as H}from"./api-uqk9CYtW.js";import{A as _}from"./account-1vhP702Z.js";import{C as q}from"./column-CXD4Tnpb.js";import{C as P}from"./column_header-CtuyYpNB.js";import{C as T}from"./column_search_header-BmO1Q-01.js";import{S as U}from"./scrollable_list-DlG-2WSw.js";import{M as b}from"./message-Bb0z64dP.js";import"./numbers-CGZQWBYL.js";import"./index-DHslUCy5.js";import"./ready-DpOgoWSg.js";import"./initial_state-BP3UcUr4.js";import"./load_locale-C-B7BkCQ.js";import"./index-lj9VQs0f.js";import"./index-guCj-HqV.js";import"./content_warning-ZcoJE_cd.js";import"./skeleton-_5CK2hDo.js";import"./index-JeRepxZU.js";import"./counters-BuwkZXvq.js";import"./follow_button-DdHXSblv.js";import"./loading_indicator-BBuNQ1GS.js";import"./verified_badge-BOKoz3CJ.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";const u=M({title:{id:"onboarding.follows.title",defaultMessage:"Follow people to get started"},search:{id:"onboarding.follows.search",defaultMessage:"Search"},back:{id:"onboarding.follows.back",defaultMessage:"Back"}}),Ee=({multiColumn:i})=>{const r=E(),s=L(),g=v(o=>o.suggestions.isLoading),x=v(o=>o.suggestions.items),[j,h]=a.useState([]),[d,n]=a.useState("remove"),[N,f]=a.useState(!1),[w,m]=a.useState(!1);a.useEffect(()=>(s(y()),()=>{s(R("home"))}),[s]);const S=a.useCallback(()=>{n("add")},[n]),D=a.useCallback(()=>{n("remove"),m(!1)},[n,m]),l=a.useRef(null),B=A(o=>{if(l.current&&l.current.abort(),o.trim().length===0){m(!1),h([]);return}m(!0),f(!0),l.current=new AbortController,H("GET","v1/accounts/search",{signal:l.current.signal,params:{q:o}}).then(c=>(s(F(c)),s(I(c.map(p=>p.id))),h(c.map(p=>p.id)),f(!1),"")).catch(()=>{f(!1)})},500,{leading:!0,trailing:!0});let t;return d==="add"&&w?t=j:t=x.map(o=>o.account_id),e.jsxDEV(q,{bindToDocument:!i,label:r.formatMessage(u.title),children:[e.jsxDEV(P,{title:r.formatMessage(u.title),icon:"person",iconComponent:C,multiColumn:i,showBackButton:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:119,columnNumber:7},void 0),e.jsxDEV(T,{placeholder:r.formatMessage(u.search),onBack:D,onActivate:S,active:d==="add",onSubmit:B},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:127,columnNumber:7},void 0),e.jsxDEV(U,{scrollKey:"follow_recommendations",trackScroll:!i,bindToDocument:!i,showLoading:(g||N)&&t.length===0,hasMore:!1,isLoading:g||N,footer:e.jsxDEV(e.Fragment,{children:[t.length>0&&e.jsxDEV("div",{className:"spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:146,columnNumber:48},void 0),e.jsxDEV("div",{className:"column-footer",children:e.jsxDEV(k,{className:"button button--block",to:"/home",children:e.jsxDEV(b,{id:"onboarding.follows.done",defaultMessage:"Done"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:150,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:149,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:148,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:145,columnNumber:9},void 0),emptyMessage:d==="remove"?e.jsxDEV(b,{id:"onboarding.follows.empty",defaultMessage:"Unfortunately, no results can be shown right now. You can try using search or browsing the explore page to find people to follow, or try again later."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:160,columnNumber:9},void 0):e.jsxDEV(b,{id:"lists.no_results_found",defaultMessage:"No results found."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:165,columnNumber:9},void 0),children:t.map(o=>e.jsxDEV(_,{id:o,withBio:!0,withMenu:!1},o,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:173,columnNumber:9},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:135,columnNumber:7},void 0),e.jsxDEV(V,{children:[e.jsxDEV("title",{children:r.formatMessage(u.title)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:178,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:179,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:177,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/onboarding/follows.tsx",lineNumber:115,columnNumber:5},void 0)};export{Ee as Follows,Ee as default};
//# sourceMappingURL=follows-k9i01sgN.js.map
