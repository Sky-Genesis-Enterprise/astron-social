import{j as s}from"./client-BG6VvM0b.js";import{r as c,i as T}from"./index-ykyyQSL-.js";import{c as I}from"./index-guCj-HqV.js";import{L as S}from"./short_number--sxn3OKQ.js";import{j as D,o as l,b_ as M,b$ as B,a3 as y,c0 as P,c1 as k,bJ as V,bK as A,c2 as w,bH as R,c3 as Q,c4 as H,c5 as F,c6 as L,c7 as O,ag as Z,ac as U,c8 as z,c9 as $,ca as G,cb as K,a$ as W,b0 as J,af as X,a as p,u as Y,a2 as ee,I as g,aQ as te}from"./useSelectableClick-DBo53LOf.js";import{u as oe,i as ae}from"./domain_blocks-DiDVA5xw.js";import{i as se}from"./reports-BY0N2xif.js";import{S as ne}from"./status-D92xLx8p.js";import{I as ue}from"./initial_state-BP3UcUr4.js";import{m as _,a as ie}from"./index-Ds3K_5LX.js";import{M as d}from"./message-Bb0z64dP.js";const me=t=>c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:24,...t},c.createElement("path",{d:"M280-280h280v-80H280v80Zm0-160h400v-80H280v80Zm0-160h400v-80H280v80Zm-80 480q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z"})),re=()=>{const t=_(),u=ie();return(o,a)=>({status:t(o,a),nextInReplyToId:a.nextId?o.getIn(["statuses",a.nextId,"in_reply_to_id"]):null,pictureInPicture:u(o,a)})},le=(t,{contextType:u})=>({onReply(e){t((o,a)=>{a().getIn(["compose","text"]).trim().length!==0?t(l({modalType:"CONFIRM_REPLY",modalProps:{status:e}})):t(X(e))})},onReblog(e,o){t(J(e.get("id"),o.shiftKey))},onFavourite(e){t(W(e.get("id")))},onBookmark(e){e.get("bookmarked")?t(G(e)):t(K(e))},onPin(e){e.get("pinned")?t(z(e)):t($(e))},onEmbed(e){t(l({modalType:"EMBED",modalProps:{id:e.get("id")}}))},onDelete(e,o=!1){t(ue?l({modalType:"CONFIRM_DELETE_STATUS",modalProps:{statusId:e.get("id"),withRedraft:o}}):U(e.get("id"),o))},onEdit(e){t((o,a)=>{a().getIn(["compose","text"]).trim().length!==0?t(l({modalType:"CONFIRM_EDIT_STATUS",modalProps:{statusId:e.get("id")}})):t(Z(e.get("id")))})},onTranslate(e){e.get("translation")?t(L(e.get("id"),e.get("poll"))):t(O(e.get("id")))},onDirect(e){t(F(e))},onMention(e){t(H(e))},onOpenMedia(e,o,a,n){t(l({modalType:"MEDIA",modalProps:{statusId:e,media:o,index:a,lang:n}}))},onOpenVideo(e,o,a,n){t(l({modalType:"VIDEO",modalProps:{statusId:e,media:o,lang:a,options:n}}))},onBlock(e){const o=e.get("account");t(Q(o))},onUnblock(e){t(R(e.get("id")))},onReport(e){t(se(e.get("account"),e))},onAddFilter(e){t(w(e,{contextType:u}))},onMute(e){t(A(e))},onUnmute(e){t(V(e.get("id")))},onMuteConversation(e){e.get("muted")?t(P(e.get("id"))):t(k(e.get("id")))},onToggleHidden(e){t(y(e.get("id")))},onToggleCollapsed(e,o){t(B(e.get("id"),o))},onBlockDomain(e){t(ae(e))},onUnblockDomain(e){t(oe(e))},deployPictureInPicture(e,o,a){t(M({statusId:e.get("id"),accountId:e.getIn(["account","id"]),playerType:o,props:a}))},onInteractionModal(e,o){t(l({modalType:"INTERACTION",modalProps:{type:e,accountId:o.getIn(["account","id"]),url:o.get("uri")}}))}}),b=T(D(re,le)(ne)),de=t=>c.createElement("svg",{width:24,height:20,viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{d:"M23.933 2.82414C22.324 4.07931 21.0726 5.3569 20.1788 6.6569C19.3296 7.91207 18.905 9.1 18.905 10.2207C19.0838 10.131 19.3073 10.0862 19.5754 10.0862C19.8883 10.0414 20.1564 10.019 20.3799 10.019C21.4078 10.019 22.257 10.4448 22.9274 11.2966C23.6425 12.1034 24 13.1121 24 14.3224C24 15.8017 23.5084 17.0345 22.5251 18.0207C21.5419 19.0069 20.3129 19.5 18.838 19.5C17.2737 19.5 16.0447 18.9397 15.1508 17.819C14.257 16.6535 13.8101 15.1069 13.8101 13.1793C13.8101 10.8931 14.5028 8.62931 15.8883 6.38793C17.2737 4.14655 19.3073 2.01724 21.9888 0L23.933 2.82414ZM10.1229 2.82414C8.51397 4.07931 7.26257 5.3569 6.36872 6.6569C5.51955 7.91207 5.09497 9.1 5.09497 10.2207C5.27374 10.131 5.49721 10.0862 5.76536 10.0862C6.07821 10.0414 6.34637 10.019 6.56983 10.019C7.59777 10.019 8.44693 10.4448 9.11732 11.2966C9.8324 12.1034 10.1899 13.1121 10.1899 14.3224C10.1899 15.8017 9.69832 17.0345 8.71508 18.0207C7.73184 19.0069 6.50279 19.5 5.02793 19.5C3.46369 19.5 2.23464 18.9397 1.34078 17.819C0.446927 16.6535 0 15.1069 0 13.1793C0 10.8931 0.692738 8.62931 2.07821 6.38793C3.46369 4.14655 5.49721 2.01724 8.17877 0L10.1229 2.82414Z",fill:"currentColor"})),N=1,h=({isError:t,children:u})=>s.jsxDEV("div",{className:I("status__quote",{"status__quote--error":t}),children:[s.jsxDEV(g,{id:"quote",icon:de,className:"status__quote-icon"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:34,columnNumber:7},void 0),u]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:29,columnNumber:5},void 0),ce=({status:t})=>{const u=t.get("account"),e=p(r=>u?r.accounts.get(u):void 0),o=e==null?void 0:e.display_name_html;if(!o)return null;const a=s.jsxDEV("span",{dangerouslySetInnerHTML:{__html:o}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:55,columnNumber:3},void 0),n=`/@${e.get("acct")}/${t.get("id")}`;return s.jsxDEV(S,{to:n,className:"status__quote-author-button",children:[s.jsxDEV(d,{id:"status.quote_post_author",defaultMessage:"Post by {name}",values:{name:a}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:61,columnNumber:7},void 0),s.jsxDEV(g,{id:"chevron_right",icon:te},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:66,columnNumber:7},void 0),s.jsxDEV(g,{id:"article",icon:me},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:67,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:60,columnNumber:5},void 0)},x=({quote:t,contextType:u,nestingLevel:e=1,variant:o="full"})=>{const a=Y(),n=t.get("quoted_status"),r=t.get("state"),i=p(f=>n?f.statuses.get(n):void 0);c.useEffect(()=>{!i&&n&&a(ee(n))},[i,n,a]);const j=c.useMemo(()=>_(),[]),q=p(f=>j(f,{id:n,contextType:u})),E=i&&q===null;let m=null;if(E?m=s.jsxDEV(d,{id:"status.quote_error.filtered",defaultMessage:"Hidden due to one of your filters"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:110,columnNumber:5},void 0):r==="deleted"?m=s.jsxDEV(d,{id:"status.quote_error.removed",defaultMessage:"This post was removed by its author."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:117,columnNumber:5},void 0):r==="unauthorized"?m=s.jsxDEV(d,{id:"status.quote_error.unauthorized",defaultMessage:"This post cannot be displayed as you are not authorized to view it."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:124,columnNumber:5},void 0):r==="pending"?m=s.jsxDEV(d,{id:"status.quote_error.pending_approval",defaultMessage:"This post is pending approval from the original author."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:131,columnNumber:5},void 0):r==="rejected"||r==="revoked"?m=s.jsxDEV(d,{id:"status.quote_error.rejected",defaultMessage:"This post cannot be displayed as the original author does not allow it to be quoted."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:138,columnNumber:5},void 0):(!i||!n)&&(m=s.jsxDEV(d,{id:"status.quote_error.not_found",defaultMessage:"This post cannot be displayed."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:145,columnNumber:5},void 0)),m)return s.jsxDEV(h,{isError:!0,children:m},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:153,columnNumber:12},void 0);if(o==="link"&&i)return s.jsxDEV(ce,{status:i},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:157,columnNumber:12},void 0);const v=i==null?void 0:i.get("quote"),C=v&&e<=N;return s.jsxDEV(h,{children:s.jsxDEV(b,{isQuotedPost:!0,id:n,contextType:u,avatarSize:40,children:C&&s.jsxDEV(x,{quote:v,contextType:u,variant:e===N?"link":"full",nestingLevel:e+1},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:174,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:167,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:165,columnNumber:5},void 0)},Ee=t=>{const u=p(o=>{const a=o.statuses.get(t.id),n=a==null?void 0:a.get("reblog");return n?o.statuses.get(n):a}),e=u==null?void 0:u.get("quote");return e?s.jsxDEV(b,{...t,children:s.jsxDEV(x,{quote:e,contextType:t.contextType},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:211,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:210,columnNumber:7},void 0):s.jsxDEV(b,{...t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/components/status_quoted.tsx",lineNumber:216,columnNumber:10},void 0)};export{x as Q,Ee as S,b as a};
//# sourceMappingURL=status_quoted-D9176USW.js.map
