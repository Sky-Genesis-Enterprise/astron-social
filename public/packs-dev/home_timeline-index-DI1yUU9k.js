var T=Object.defineProperty;var L=(i,o,e)=>o in i?T(i,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[o]=e;var m=(i,o,e)=>L(i,typeof o!="symbol"?o+"":o,e);import{j as n}from"./client-BG6VvM0b.js";import{i as y,d as k,b as x,r as b}from"./index-ykyyQSL-.js";import{c as E}from"./index-guCj-HqV.js";import{H as q}from"./Helmet-D0DLVOv1.js";import{y as j,z as f,b as V,aQ as F,cN as H,I as z,aR as Y,i as $,bW as U,j as S,an as K,bv as W,cO as G,cP as O,cQ as Q,a as J,u as X,aM as Z,B as ee,ae as te,cF as ne,cG as se,N as C,aL as ae,cR as ie}from"./useSelectableClick-DBo53LOf.js";import{S as oe}from"./campaign-Cs8BqRUa.js";import{S as me}from"./home-fill-Bk1KNO-t.js";import{S as re}from"./card-v59kuVL6.js";import{I as ue}from"./icon_with_badge-C_Uawi2r.js";import{N as le}from"./not_signed_in_indicator-CrtlqFso.js";import{P as l,w as de}from"./short_number--sxn3OKQ.js";import{R as ce}from"./index-DTgehdR6.js";import{e as pe}from"./elephant_ui_plane-B72fsiXe.js";import{S as he}from"./add-ZanakRnh.js";import{S as ge}from"./chevron_left-R_fqLHXp.js";import{E as fe}from"./emoji_picker_dropdown_container-CTLm3tVm.js";import{u as v,b as be}from"./index-DHslUCy5.js";import{J as Ne,A as ve,k as je,l as D,K as xe}from"./initial_state-BP3UcUr4.js";import{M as h}from"./message-Bb0z64dP.js";import{w as _e}from"./useBreakpoint-DZ8I7Qpm.js";import{C as De}from"./column-CXD4Tnpb.js";import{C as Ee}from"./column_header-CtuyYpNB.js";import{S as Be}from"./status_list_container-BG44PHcd.js";import{S as _}from"./setting_toggle-j35gvWMe.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./load_locale-C-B7BkCQ.js";import"./numbers-CGZQWBYL.js";import"./content_warning-ZcoJE_cd.js";import"./skeleton-_5CK2hDo.js";import"./scroll-BygYx8ga.js";import"./close-DPVxbBbs.js";import"./status_list-DcEuEIsE.js";import"./gif-CQLWVfmH.js";import"./info-C9UTTy-Y.js";import"./follow_button-DdHXSblv.js";import"./index-JeRepxZU.js";import"./loading_indicator-BBuNQ1GS.js";import"./verified_badge-BOKoz3CJ.js";import"./status_quoted-D9176USW.js";import"./domain_blocks-DiDVA5xw.js";import"./reports-BY0N2xif.js";import"./status-D92xLx8p.js";import"./index.es-D--CQIAj.js";import"./avatar_overlay-XCWEKsBg.js";import"./toString-CBWlLvSL.js";import"./status_content-BS1khha6.js";import"./poll-wjP7LpZg.js";import"./permissions-Djze7cmB.js";import"./visibility_icon-B5XmIQZP.js";import"./index-Ds3K_5LX.js";import"./load_gap-B92Gyxe3.js";import"./scrollable_list-DlG-2WSw.js";import"./scroll_container-BQpJ36fQ.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./schedule_idle_task-CTsEu-tt.js";import"./load_more-BJ-OkDO5.js";import"./index-Bvr20mGV.js";const R=k({close:{id:"lightbox.close",defaultMessage:"Close"},previous:{id:"lightbox.previous",defaultMessage:"Previous"},next:{id:"lightbox.next",defaultMessage:"Next"}});class A extends j{constructor(){super(...arguments);m(this,"setRef",e=>{this.node=e});m(this,"onMentionClick",(e,t)=>{this.props.history&&t.button===0&&!(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.props.history.push(`/@${e.get("acct")}`))});m(this,"onHashtagClick",(e,t)=>{e=e.replace(/^#/,""),this.props.history&&t.button===0&&!(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.props.history.push(`/tags/${e}`))});m(this,"onStatusClick",(e,t)=>{this.props.history&&t.button===0&&!(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.props.history.push(`/@${e.getIn(["account","acct"])}/${e.get("id")}`))});m(this,"handleMouseEnter",({currentTarget:e})=>{if(D)return;const t=e.querySelectorAll(".custom-emoji");for(var a=0;a<t.length;a++){let s=t[a];s.src=s.getAttribute("data-original")}});m(this,"handleMouseLeave",({currentTarget:e})=>{if(D)return;const t=e.querySelectorAll(".custom-emoji");for(var a=0;a<t.length;a++){let s=t[a];s.src=s.getAttribute("data-static")}})}componentDidMount(){this._updateLinks()}componentDidUpdate(){this._updateLinks()}_updateLinks(){const e=this.node;if(!e)return;const t=e.querySelectorAll("a");for(var a=0;a<t.length;++a){let s=t[a];if(s.classList.contains("status-link"))continue;s.classList.add("status-link");let u=this.props.announcement.get("mentions").find(d=>s.href===d.get("url"));if(u)s.addEventListener("click",this.onMentionClick.bind(this,u),!1),s.setAttribute("title",u.get("acct"));else if(s.textContent[0]==="#"||s.previousSibling&&s.previousSibling.textContent&&s.previousSibling.textContent[s.previousSibling.textContent.length-1]==="#")s.addEventListener("click",this.onHashtagClick.bind(this,s.text),!1);else{let d=this.props.announcement.get("statuses").find(r=>s.href===r.get("url"));d&&s.addEventListener("click",this.onStatusClick.bind(this,d),!1),s.setAttribute("title",s.href),s.classList.add("unhandled-link")}s.setAttribute("target","_blank"),s.setAttribute("rel","noopener")}}render(){const{announcement:e}=this.props;return n.jsxDEV("div",{className:"announcements__item__content translate",ref:this.setRef,dangerouslySetInnerHTML:{__html:e.get("contentHtml")},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:144,columnNumber:7},this)}}m(A,"propTypes",{announcement:f.map.isRequired,...Y});const Me=de(A);class Ve extends b.PureComponent{render(){const{emoji:o,emojiMap:e,hovered:t}=this.props;if(v[o]){const{filename:a,shortCode:s}=v[this.props.emoji],u=s?`:${s}:`:"";return n.jsxDEV("img",{draggable:"false",className:"emojione",alt:o,title:u,src:`${be}/emoji/${a}.svg`},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:174,columnNumber:9},this)}else if(e.get(o)){const a=D||t?e.getIn([o,"url"]):e.getIn([o,"static_url"]),s=`:${o}:`;return n.jsxDEV("img",{draggable:"false",className:"emojione custom-emoji",alt:s,title:s,src:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:187,columnNumber:9},this)}else return null}}class w extends j{constructor(){super(...arguments);m(this,"state",{hovered:!1});m(this,"handleClick",()=>{const{reaction:e,announcementId:t,addReaction:a,removeReaction:s}=this.props;e.get("me")?s(t,e.get("name")):a(t,e.get("name"))});m(this,"handleMouseEnter",()=>this.setState({hovered:!0}));m(this,"handleMouseLeave",()=>this.setState({hovered:!1}))}render(){const{reaction:e}=this.props;let t=e.get("name");return v[t]&&(t=v[t].shortCode),n.jsxDEV($.button,{className:E("reactions-bar__item",{active:e.get("me")}),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,title:`:${t}:`,style:this.props.style,children:[n.jsxDEV("span",{className:"reactions-bar__item__emoji",children:n.jsxDEV(Ve,{hovered:this.state.hovered,emoji:e.get("name"),emojiMap:this.props.emojiMap},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:242,columnNumber:54},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:242,columnNumber:9},this),n.jsxDEV("span",{className:"reactions-bar__item__count",children:n.jsxDEV(U,{value:e.get("count")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:243,columnNumber:54},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:243,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:241,columnNumber:7},this)}}m(w,"propTypes",{announcementId:l.string.isRequired,reaction:f.map.isRequired,addReaction:l.func.isRequired,removeReaction:l.func.isRequired,emojiMap:f.map.isRequired,style:l.object});const Ce=({announcementId:i,reactions:o,emojiMap:e,addReaction:t,removeReaction:a})=>{const s=b.useMemo(()=>o.filter(r=>r.get("count")>0).toArray(),[o]),u=b.useCallback(r=>{t(i,r.native.replaceAll(/:/g,""))},[t,i]),d=H(s,{from:{scale:0},enter:{scale:1},leave:{scale:0},keys:s.map(r=>r.get("name"))});return n.jsxDEV("div",{className:E("reactions-bar",{"reactions-bar--empty":s.length===0}),children:[d(({scale:r},p)=>n.jsxDEV(w,{reaction:p,style:{transform:r.to(c=>`scale(${c})`)},addReaction:t,removeReaction:a,announcementId:i,emojiMap:e},p.get("name"),!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:283,columnNumber:7},void 0)),s.length<8&&n.jsxDEV(fe,{onPickEmoji:u,button:n.jsxDEV(z,{id:"plus",icon:he},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:297,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:295,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:277,columnNumber:5},void 0)};class I extends j{constructor(){super(...arguments);m(this,"state",{unread:!this.props.announcement.get("read")})}componentDidUpdate(){const{selected:e,announcement:t}=this.props;!e&&this.state.unread!==!t.get("read")&&this.setState({unread:!t.get("read")})}render(){const{announcement:e}=this.props,{unread:t}=this.state,a=e.get("starts_at")&&new Date(e.get("starts_at")),s=e.get("ends_at")&&new Date(e.get("ends_at")),u=new Date,d=a&&s,r=e.get("all_day");let p=null;if(d){const c=a.getFullYear()===s.getFullYear()&&s.getFullYear()===u.getFullYear(),N=a.getDate()===s.getDate()&&a.getMonth()===s.getMonth()&&a.getFullYear()===s.getFullYear();p=n.jsxDEV(n.Fragment,{children:[n.jsxDEV(x,{value:a,year:c||a.getFullYear()===u.getFullYear()?void 0:"numeric",month:"short",day:"2-digit",hour:r?void 0:"2-digit",minute:r?void 0:"2-digit"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:348,columnNumber:11},this)," - ",n.jsxDEV(x,{value:s,year:c||s.getFullYear()===u.getFullYear()?void 0:"numeric",month:N?void 0:"short",day:N?void 0:"2-digit",hour:r?void 0:"2-digit",minute:r?void 0:"2-digit"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:348,columnNumber:246},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:347,columnNumber:7},this)}else{const c=new Date(e.get("published_at"));p=n.jsxDEV(x,{value:c,year:c.getFullYear()===u.getFullYear()?void 0:"numeric",month:"short",day:"2-digit",hour:r?void 0:"2-digit",minute:r?void 0:"2-digit"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:354,columnNumber:7},this)}return n.jsxDEV("div",{className:"announcements__item",children:[n.jsxDEV("strong",{className:"announcements__item__range",children:[n.jsxDEV(h,{id:"announcement.announcement",defaultMessage:"Announcement"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:361,columnNumber:11},this),n.jsxDEV("span",{children:[" · ",p]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:362,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:360,columnNumber:9},this),n.jsxDEV(Me,{announcement:e},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:365,columnNumber:9},this),n.jsxDEV(Ce,{reactions:e.get("reactions"),announcementId:e.get("id"),addReaction:this.props.addReaction,removeReaction:this.props.removeReaction,emojiMap:this.props.emojiMap},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:367,columnNumber:9},this),t&&n.jsxDEV("span",{className:"announcements__item__unread"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:375,columnNumber:20},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:359,columnNumber:7},this)}}m(I,"propTypes",{announcement:f.map.isRequired,emojiMap:f.map.isRequired,addReaction:l.func.isRequired,removeReaction:l.func.isRequired,intl:l.object.isRequired,selected:l.bool});class P extends j{constructor(){super(...arguments);m(this,"state",{index:0});m(this,"handleChangeIndex",e=>{this.setState({index:e%this.props.announcements.size})});m(this,"handleNextClick",()=>{this.setState({index:(this.state.index+1)%this.props.announcements.size})});m(this,"handlePrevClick",()=>{this.setState({index:(this.props.announcements.size+this.state.index-1)%this.props.announcements.size})})}static getDerivedStateFromProps(e,t){return e.announcements.size>0&&t.index>=e.announcements.size?{index:e.announcements.size-1}:null}componentDidMount(){this._markAnnouncementAsRead()}componentDidUpdate(){this._markAnnouncementAsRead()}_markAnnouncementAsRead(){const{dismissAnnouncement:e,announcements:t}=this.props,{index:a}=this.state,s=t.get(t.size-1-a);s.get("read")||e(s.get("id"))}render(){const{announcements:e,intl:t}=this.props,{index:a}=this.state;return e.isEmpty()?null:n.jsxDEV("div",{className:"announcements",children:[n.jsxDEV("img",{className:"announcements__mastodon",alt:"",draggable:"false",src:Ne||pe},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:442,columnNumber:9},this),n.jsxDEV("div",{className:"announcements__container",children:[n.jsxDEV(ce,{animateHeight:!0,animateTransitions:!je,index:a,onChangeIndex:this.handleChangeIndex,children:e.map((s,u)=>n.jsxDEV(I,{announcement:s,emojiMap:this.props.emojiMap,addReaction:this.props.addReaction,removeReaction:this.props.removeReaction,intl:t,selected:a===u,disabled:ve},s.get("id"),!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:447,columnNumber:13},this)).reverse()},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:445,columnNumber:11},this),e.size>1&&n.jsxDEV("div",{className:"announcements__pagination",children:[n.jsxDEV(V,{disabled:e.size===1,title:t.formatMessage(R.previous),icon:"chevron-left",iconComponent:ge,onClick:this.handlePrevClick,size:13},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:462,columnNumber:15},this),n.jsxDEV("span",{children:[a+1," / ",e.size]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:463,columnNumber:15},this),n.jsxDEV(V,{disabled:e.size===1,title:t.formatMessage(R.next),icon:"chevron-right",iconComponent:F,onClick:this.handleNextClick,size:13},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:464,columnNumber:15},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:461,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:444,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/getting_started/components/announcements.jsx",lineNumber:441,columnNumber:7},this)}}m(P,"propTypes",{announcements:f.list,emojiMap:f.map.isRequired,dismissAnnouncement:l.func.isRequired,addReaction:l.func.isRequired,removeReaction:l.func.isRequired,intl:l.object.isRequired});const Re=y(P),ye=K([i=>i.get("custom_emojis")],i=>i.reduce((o,e)=>o.set(e.get("shortcode"),e),W())),ke=i=>({announcements:i.getIn(["announcements","items"]),emojiMap:ye(i)}),Se=i=>({dismissAnnouncement:o=>i(Q(o)),addReaction:(o,e)=>i(O(o,e)),removeReaction:(o,e)=>i(G(o,e))}),Ae=S(ke,Se)(Re),we=()=>{const i=J(t=>t.settings.get("home")),o=X(),e=b.useCallback((t,a)=>{o(Z(["home",...t],a))},[o]);return n.jsxDEV("div",{className:"column-settings",children:n.jsxDEV("section",{children:n.jsxDEV("div",{className:"column-settings__row",children:[n.jsxDEV(_,{prefix:"home_timeline",settings:i,settingPath:["shows","reblog"],onChange:e,label:n.jsxDEV(h,{id:"home.column_settings.show_reblogs",defaultMessage:"Show boosts"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:36,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:30,columnNumber:11},void 0),n.jsxDEV(_,{prefix:"home_timeline",settings:i,settingPath:["shows","quote"],onChange:e,label:n.jsxDEV(h,{id:"home.column_settings.show_quotes",defaultMessage:"Show quotes"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:49,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:43,columnNumber:11},void 0),n.jsxDEV(_,{prefix:"home_timeline",settings:i,settingPath:["shows","reply"],onChange:e,label:n.jsxDEV(h,{id:"home.column_settings.show_replies",defaultMessage:"Show replies"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:62,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:56,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:29,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:28,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/column_settings.tsx",lineNumber:27,columnNumber:5},void 0)},Ie=()=>n.jsxDEV("div",{className:"warning-banner",children:n.jsxDEV("div",{className:"warning-banner__message",children:[n.jsxDEV("h1",{children:n.jsxDEV(h,{id:"home.pending_critical_update.title",defaultMessage:"Critical security update available!"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:7,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:6,columnNumber:7},void 0),n.jsxDEV("p",{children:[n.jsxDEV(h,{id:"home.pending_critical_update.body",defaultMessage:"Please update your Mastodon server as soon as possible!"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:13,columnNumber:9},void 0)," ",n.jsxDEV("a",{href:"/admin/software_updates",children:n.jsxDEV(h,{id:"home.pending_critical_update.link",defaultMessage:"See updates"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:18,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:12,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:5,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/components/critical_update_banner.tsx",lineNumber:4,columnNumber:1},void 0),g=k({title:{id:"column.home",defaultMessage:"Home"},show_announcements:{id:"home.show_announcements",defaultMessage:"Show announcements"},hide_announcements:{id:"home.hide_announcements",defaultMessage:"Hide announcements"}}),Pe=i=>({hasUnread:i.getIn(["timelines","home","unread"])>0,isPartial:i.getIn(["timelines","home","isPartial"]),hasAnnouncements:!i.getIn(["announcements","items"]).isEmpty(),unreadAnnouncements:i.getIn(["announcements","items"]).count(o=>!o.get("read")),showAnnouncements:i.getIn(["announcements","show"])});class Te extends b.PureComponent{constructor(){super(...arguments);m(this,"handlePin",()=>{const{columnId:e,dispatch:t}=this.props;t(e?te(e):ne("HOME",{}))});m(this,"handleMove",e=>{const{columnId:t,dispatch:a}=this.props;a(se(t,e))});m(this,"handleHeaderClick",()=>{this.column.scrollTop()});m(this,"setRef",e=>{this.column=e});m(this,"handleLoadMore",e=>{this.props.dispatch(C({maxId:e}))});m(this,"handleToggleAnnouncementsClick",e=>{e.stopPropagation(),this.props.dispatch(ie())})}componentDidMount(){setTimeout(()=>this.props.dispatch(ae()),700),this._checkIfReloadNeeded(!1,this.props.isPartial)}componentDidUpdate(e){this._checkIfReloadNeeded(e.isPartial,this.props.isPartial)}componentWillUnmount(){this._stopPolling()}_checkIfReloadNeeded(e,t){const{dispatch:a}=this.props;e!==t&&(!e&&t?this.polling=setInterval(()=>{a(C())},3e3):e&&!t&&this._stopPolling())}_stopPolling(){this.polling&&(clearInterval(this.polling),this.polling=null)}render(){const{intl:e,hasUnread:t,columnId:a,multiColumn:s,hasAnnouncements:u,unreadAnnouncements:d,showAnnouncements:r,matchesBreakpoint:p}=this.props,c=!!a,{signedIn:N}=this.props.identity,B=[];let M;return u&&(M=n.jsxDEV("button",{type:"button",className:E("column-header__button",{active:r}),title:e.formatMessage(r?g.hide_announcements:g.show_announcements),"aria-label":e.formatMessage(r?g.hide_announcements:g.show_announcements),onClick:this.handleToggleAnnouncementsClick,children:n.jsxDEV(ue,{id:"bullhorn",icon:oe,count:d},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:143,columnNumber:11},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:136,columnNumber:7},this)),xe&&B.push(n.jsxDEV(Ie,{},"critical-update-banner",!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:149,columnNumber:20},this)),n.jsxDEV(De,{bindToDocument:!s,ref:this.setRef,label:e.formatMessage(g.title),children:[n.jsxDEV(Ee,{icon:"home",iconComponent:p?re:me,active:t,title:e.formatMessage(g.title),onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:c,multiColumn:s,extraButton:M,appendContent:u&&r&&n.jsxDEV(Ae,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:165,columnNumber:67},this),children:n.jsxDEV(we,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:167,columnNumber:11},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:154,columnNumber:9},this),N?n.jsxDEV(Be,{prepend:B,alwaysPrepend:!0,trackScroll:!c,scrollKey:`home_timeline-${a}`,onLoadMore:this.handleLoadMore,timelineId:"home",emptyMessage:n.jsxDEV(h,{id:"empty_column.home",defaultMessage:"Your home timeline is empty! Follow more people to fill it up."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:178,columnNumber:25},this),bindToDocument:!s},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:171,columnNumber:9},this):n.jsxDEV(le,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:181,columnNumber:9},this),n.jsxDEV(q,{children:[n.jsxDEV("title",{children:e.formatMessage(g.title)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:184,columnNumber:11},this),n.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:185,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:183,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/home_timeline/index.jsx",lineNumber:153,columnNumber:7},this)}}const Ut=S(Pe)(_e(ee(y(Te))));export{Ut as default};
//# sourceMappingURL=home_timeline-index-DI1yUU9k.js.map
