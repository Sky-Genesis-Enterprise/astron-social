{"version":3,"file":"scroll-BygYx8ga.js","sources":["../../app/javascript/mastodon/scroll.ts"],"sourcesContent":["const easingOutQuint = (\n  x: number,\n  t: number,\n  b: number,\n  c: number,\n  d: number,\n) => c * ((t = t / d - 1) * t * t * t * t + 1) + b;\nconst scroll = (\n  node: Element,\n  key: 'scrollTop' | 'scrollLeft',\n  target: number,\n) => {\n  const startTime = Date.now();\n  const offset = node[key];\n  const gap = target - offset;\n  const duration = 1000;\n  let interrupt = false;\n\n  const step = () => {\n    const elapsed = Date.now() - startTime;\n    const percentage = elapsed / duration;\n\n    if (percentage > 1 || interrupt) {\n      return;\n    }\n\n    node[key] = easingOutQuint(0, elapsed, offset, gap, duration);\n    requestAnimationFrame(step);\n  };\n\n  step();\n\n  return () => {\n    interrupt = true;\n  };\n};\n\nconst isScrollBehaviorSupported =\n  'scrollBehavior' in document.documentElement.style;\n\nexport const scrollRight = (node: Element, position: number) =>\n  requestIdleCallback(() => {\n    if (isScrollBehaviorSupported) {\n      node.scrollTo({ left: position, behavior: 'smooth' });\n    } else {\n      scroll(node, 'scrollLeft', position);\n    }\n  });\n\nexport const scrollTop = (node: Element) =>\n  requestIdleCallback(() => {\n    if (isScrollBehaviorSupported) {\n      node.scrollTo({ top: 0, behavior: 'smooth' });\n    } else {\n      scroll(node, 'scrollTop', 0);\n    }\n  });\n"],"names":["easingOutQuint","x","t","b","c","d","scroll","node","key","target","startTime","Date","now","offset","gap","duration","interrupt","step","elapsed","requestAnimationFrame","isScrollBehaviorSupported","document","documentElement","style","scrollRight","position","requestIdleCallback","scrollTo","left","behavior","scrollTop","top"],"mappings":"AAAA,MAAMA,EAAiBA,CACrBC,EACAC,EACAC,EACAC,EACAC,IACGD,IAAMF,EAAIA,EAAIG,EAAI,GAAKH,EAAIA,EAAIA,EAAIA,EAAI,GAAKC,EAC3CG,EAASA,CACbC,EACAC,EACAC,IACG,CACH,MAAMC,EAAYC,KAAKC,IAAAA,EACjBC,EAASN,EAAKC,CAAG,EACjBM,EAAML,EAASI,EACfE,EAAW,IACjB,IAAIC,EAAY,GAEhB,MAAMC,EAAOA,IAAM,CACjB,MAAMC,EAAUP,KAAKC,IAAAA,EAAQF,EACVQ,EAAUH,EAEZ,GAAKC,IAItBT,EAAKC,CAAG,EAAIR,EAAe,EAAGkB,EAASL,EAAQC,EAAKC,CAAQ,EAC5DI,sBAAsBF,CAAI,EAAA,EAG5BA,OAAAA,EAAAA,EAEO,IAAM,CACXD,EAAY,EAAA,CAEhB,EAEMI,EACJ,mBAAoBC,SAASC,gBAAgBC,MAElCC,EAAcA,CAACjB,EAAekB,IACzCC,oBAAoB,IAAM,CACpBN,EACFb,EAAKoB,SAAS,CAAEC,KAAMH,EAAUI,SAAU,QAAA,CAAU,EAEpDvB,EAAOC,EAAM,aAAckB,CAAQ,CAEvC,CAAC,EAEUK,EAAavB,GACxBmB,oBAAoB,IAAM,CACpBN,EACFb,EAAKoB,SAAS,CAAEI,IAAK,EAAGF,SAAU,QAAA,CAAU,EAE5CvB,EAAOC,EAAM,YAAa,CAAC,CAE/B,CAAC"}