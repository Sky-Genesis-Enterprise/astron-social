var A=Object.defineProperty;var P=(o,r,a)=>r in o?A(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a;var m=(o,r,a)=>P(o,typeof r!="symbol"?r+"":r,a);import{j as e}from"./client-BG6VvM0b.js";import{P as _}from"./short_number--sxn3OKQ.js";import{i as T,r as p,d as y,u as $}from"./index-ykyyQSL-.js";import{j as g,bX as w,u as F,a as I,an as z,dE as b,f as L,dF as q,A as Y,ah as K,bL as U,bI as O,y as W,z as G,de as H,e as X,b as J}from"./useSelectableClick-DBo53LOf.js";import{S as Q}from"./close-DPVxbBbs.js";import{s as Z}from"./reports-BY0N2xif.js";import{B as h}from"./index-JeRepxZU.js";import{O as S}from"./option-d983-o0i.js";import{M as i}from"./message-Bb0z64dP.js";import{T as ee}from"./index-Bvr20mGV.js";import{L as ae}from"./loading_indicator-BBuNQ1GS.js";import{m as se}from"./index-Ds3K_5LX.js";import{D as te,ak as oe}from"./content_warning-ZcoJE_cd.js";import{M as ie}from"./media_attachments-DGp0YzNB.js";import{R as re}from"./index-DHslUCy5.js";import{S as le}from"./status_content-BS1khha6.js";import{V as me}from"./visibility_icon-B5XmIQZP.js";import"./initial_state-BP3UcUr4.js";import"./numbers-CGZQWBYL.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./load_locale-C-B7BkCQ.js";import"./index-guCj-HqV.js";import"./done-stYzd4iP.js";import"./skeleton-_5CK2hDo.js";import"./poll-wjP7LpZg.js";const V=y({dislike:{id:"report.reasons.dislike",defaultMessage:"I don't like it"},dislike_description:{id:"report.reasons.dislike_description",defaultMessage:"It is not something you want to see"},spam:{id:"report.reasons.spam",defaultMessage:"It's spam"},spam_description:{id:"report.reasons.spam_description",defaultMessage:"Malicious links, fake engagement, or repetitive replies"},legal:{id:"report.reasons.legal",defaultMessage:"It's illegal"},legal_description:{id:"report.reasons.legal_description",defaultMessage:"You believe it violates the law of your or the server's country"},violation:{id:"report.reasons.violation",defaultMessage:"It violates server rules"},violation_description:{id:"report.reasons.violation_description",defaultMessage:"You are aware that it breaks specific rules"},other:{id:"report.reasons.other",defaultMessage:"It's something else"},other_description:{id:"report.reasons.other_description",defaultMessage:"The issue does not fit into other categories"},status:{id:"report.category.title_status",defaultMessage:"post"},account:{id:"report.category.title_account",defaultMessage:"profile"}}),ue=o=>({rules:o.getIn(["server","server","rules"],w())});class ne extends p.PureComponent{constructor(){super(...arguments);m(this,"handleNextClick",()=>{const{onNextStep:a,category:s}=this.props;switch(s){case"dislike":a("thanks");break;case"violation":a("rules");break;default:a("statuses");break}});m(this,"handleCategoryToggle",(a,s)=>{const{onChangeCategory:t}=this.props;s&&t(a)})}render(){const{category:a,startedFrom:s,rules:t,intl:u}=this.props,d=t.size>0?["dislike","spam","legal","violation","other"]:["dislike","spam","legal","other"];return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h3",{className:"report-dialog-modal__title",children:e.jsxDEV(i,{id:"report.category.title",defaultMessage:"Tell us what's going on with this {type}",values:{type:u.formatMessage(V[s])}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:86,columnNumber:52},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:86,columnNumber:9},this),e.jsxDEV("p",{className:"report-dialog-modal__lead",children:e.jsxDEV(i,{id:"report.category.subtitle",defaultMessage:"Choose the best match"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:87,columnNumber:50},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:87,columnNumber:9},this),e.jsxDEV("div",{children:d.map(n=>e.jsxDEV(S,{name:"category",value:n,checked:a===n,onToggle:this.handleCategoryToggle,label:u.formatMessage(V[n]),description:u.formatMessage(V[`${n}_description`])},n,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:91,columnNumber:11},this))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:89,columnNumber:9},this),e.jsxDEV("div",{className:"flex-spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:103,columnNumber:9},this),e.jsxDEV("div",{className:"report-dialog-modal__actions",children:e.jsxDEV(h,{onClick:this.handleNextClick,disabled:a===null,children:e.jsxDEV(i,{id:"report.next",defaultMessage:"Next"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:106,columnNumber:79},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:106,columnNumber:11},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:105,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/category.jsx",lineNumber:85,columnNumber:7},this)}}const de=g(ue)(T(ne)),pe=y({placeholder:{id:"report.placeholder",defaultMessage:"Type or paste additional comments"}}),ce=z([o=>o.get("statuses"),(o,r)=>r],(o,r)=>r.map(a=>o.getIn([a,"in_reply_to_account_id"])),{resultEqualityCheck:q}),he=({comment:o,domain:r,statusIds:a,isRemote:s,isSubmitting:t,selectedDomains:u,onSubmit:d,onChangeComment:n,onToggleDomain:f})=>{const k=$(),D=F(),v=p.useRef(!1),j=p.useCallback(()=>d(),[d]),B=p.useCallback(l=>n(l.target.value),[n]),x=p.useCallback(l=>f(l.target.value,l.target.checked),[f]),E=p.useCallback(l=>{l.keyCode===13&&(l.ctrlKey||l.metaKey)&&j()},[j]),c=I(l=>r?ce(l,a):w()),C=I(l=>l.get("accounts")),M=r?b([r]).union(c.map(l=>C.getIn([l,"acct"],"").split("@")[1]).filter(l=>!!l)):b();return p.useEffect(()=>{if(v.current)return;v.current=!0,M.forEach(N=>{f(N,!0)}),b(c.filter(N=>N&&!C.has(N))).forEach(N=>{D(L(N))})}),e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h3",{className:"report-dialog-modal__title",children:e.jsxDEV(i,{id:"report.comment.title",defaultMessage:"Is there anything else you think we should know?"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:76,columnNumber:50},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:76,columnNumber:7},void 0),e.jsxDEV("textarea",{className:"report-dialog-modal__textarea",placeholder:k.formatMessage(pe.placeholder),value:o,onChange:B,onKeyDown:E,disabled:t},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:78,columnNumber:7},void 0),s&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("p",{className:"report-dialog-modal__lead",children:e.jsxDEV(i,{id:"report.forward_hint",defaultMessage:"The account is from another server. Send an anonymized copy of the report there as well?"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:89,columnNumber:52},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:89,columnNumber:11},void 0),M.map(l=>e.jsxDEV("label",{className:"report-dialog-modal__toggle",children:[e.jsxDEV(ee,{checked:u.includes(l),disabled:t,onChange:x,value:l},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:93,columnNumber:15},void 0),e.jsxDEV(i,{id:"report.forward",defaultMessage:"Forward to {target}",values:{target:l}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:94,columnNumber:15},void 0)]},`toggle-${l}`,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:92,columnNumber:9},void 0))]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:88,columnNumber:7},void 0),e.jsxDEV("div",{className:"flex-spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:100,columnNumber:7},void 0),e.jsxDEV("div",{className:"report-dialog-modal__actions",children:e.jsxDEV(h,{onClick:j,disabled:t,children:e.jsxDEV(i,{id:"report.submit",defaultMessage:"Submit report"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:103,columnNumber:63},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:103,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:102,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/comment.jsx",lineNumber:75,columnNumber:5},void 0)},fe=o=>({rules:o.getIn(["server","server","rules"]),locale:o.getIn(["meta","locale"])});class be extends p.PureComponent{constructor(){super(...arguments);m(this,"handleNextClick",()=>{const{onNextStep:a}=this.props;a("statuses")});m(this,"handleRulesToggle",(a,s)=>{const{onToggle:t}=this.props;t(a,s)})}render(){const{rules:a,locale:s,selectedRuleIds:t}=this.props;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h3",{className:"report-dialog-modal__title",children:e.jsxDEV(i,{id:"report.rules.title",defaultMessage:"Which rules are being violated?"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:43,columnNumber:52},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:43,columnNumber:9},this),e.jsxDEV("p",{className:"report-dialog-modal__lead",children:e.jsxDEV(i,{id:"report.rules.subtitle",defaultMessage:"Select all that apply"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:44,columnNumber:50},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:44,columnNumber:9},this),e.jsxDEV("div",{children:a.map(u=>e.jsxDEV(S,{name:"rule_ids",value:u.get("id"),checked:t.includes(u.get("id")),onToggle:this.handleRulesToggle,label:u.getIn(["translations",s,"text"])||u.getIn(["translations",s.split("-")[0],"text"])||u.get("text"),multiple:!0},u.get("id"),!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:48,columnNumber:11},this))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:46,columnNumber:9},this),e.jsxDEV("div",{className:"flex-spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:60,columnNumber:9},this),e.jsxDEV("div",{className:"report-dialog-modal__actions",children:e.jsxDEV(h,{onClick:this.handleNextClick,disabled:t.size<1,children:e.jsxDEV(i,{id:"report.next",defaultMessage:"Next"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:63,columnNumber:86},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:63,columnNumber:11},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:62,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/rules.jsx",lineNumber:42,columnNumber:7},this)}}const Ne=g(fe)(be);let ge=class extends p.PureComponent{constructor(){super(...arguments);m(this,"handleStatusesToggle",(a,s)=>{const{onToggle:t}=this.props;t(a,s)})}render(){const{status:a,checked:s}=this.props;if(a.get("reblog"))return null;const t=e.jsxDEV("div",{className:"status-check-box__status poll__option__text",children:[e.jsxDEV("div",{className:"detailed-status__display-name",children:[e.jsxDEV("div",{className:"detailed-status__display-avatar",children:e.jsxDEV(Y,{account:a.get("account"),size:46},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:41,columnNumber:13},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:40,columnNumber:11},this),e.jsxDEV("div",{children:[e.jsxDEV(te,{account:a.get("account")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:45,columnNumber:13},this)," Â· ",e.jsxDEV("span",{className:"status__visibility-icon",children:e.jsxDEV(me,{visibility:a.get("visibility")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:45,columnNumber:105},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:45,columnNumber:63},this)," ",e.jsxDEV(re,{timestamp:a.get("created_at")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:45,columnNumber:169},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:44,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:39,columnNumber:9},this),e.jsxDEV(le,{status:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:49,columnNumber:9},this),e.jsxDEV(ie,{status:a,visible:!1},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:50,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:38,columnNumber:5},this);return e.jsxDEV(S,{name:"status_ids",value:a.get("id"),checked:s,onToggle:this.handleStatusesToggle,label:a.get("search_index"),labelComponent:t,multiple:!0},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/components/status_check_box.jsx",lineNumber:55,columnNumber:7},this)}};const je=()=>{const o=se();return(a,{id:s})=>({status:o(a,{id:s})})},ve=g(je)(ge),xe=(o,{accountId:r})=>({availableStatusIds:b(o.getIn(["timelines",`account:${r}:with_replies`,"items"])),isLoading:o.getIn(["timelines",`account:${r}:with_replies`,"isLoading"])});class _e extends p.PureComponent{constructor(){super(...arguments);m(this,"handleNextClick",()=>{const{onNextStep:a}=this.props;a("comment")})}render(){const{availableStatusIds:a,selectedStatusIds:s,onToggle:t,isLoading:u}=this.props;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h3",{className:"report-dialog-modal__title",children:e.jsxDEV(i,{id:"report.statuses.title",defaultMessage:"Are there any posts that back up this report?"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:40,columnNumber:52},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:40,columnNumber:9},this),e.jsxDEV("p",{className:"report-dialog-modal__lead",children:e.jsxDEV(i,{id:"report.statuses.subtitle",defaultMessage:"Select all that apply"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:41,columnNumber:50},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:41,columnNumber:9},this),e.jsxDEV("div",{className:"report-dialog-modal__statuses",children:u?e.jsxDEV(ae,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:44,columnNumber:24},this):a.union(s).map(d=>e.jsxDEV(ve,{id:d,checked:s.includes(d),onToggle:t},d,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:45,columnNumber:11},this))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:43,columnNumber:9},this),e.jsxDEV("div",{className:"flex-spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:54,columnNumber:9},this),e.jsxDEV("div",{className:"report-dialog-modal__actions",children:e.jsxDEV(h,{onClick:this.handleNextClick,children:e.jsxDEV(i,{id:"report.next",defaultMessage:"Next"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:57,columnNumber:50},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:57,columnNumber:11},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:56,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/statuses.jsx",lineNumber:39,columnNumber:7},this)}}const ke=g(xe)(_e),De=()=>({});class Be extends p.PureComponent{constructor(){super(...arguments);m(this,"handleCloseClick",()=>{const{onClose:a}=this.props;a()});m(this,"handleUnfollowClick",()=>{const{dispatch:a,account:s,onClose:t}=this.props;a(K(s.get("id"))),t()});m(this,"handleMuteClick",()=>{const{dispatch:a,account:s,onClose:t}=this.props;a(U(s.get("id"))),t()});m(this,"handleBlockClick",()=>{const{dispatch:a,account:s,onClose:t}=this.props;a(O(s.get("id"))),t()})}render(){const{account:a,submitted:s}=this.props;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h3",{className:"report-dialog-modal__title",children:s?e.jsxDEV(i,{id:"report.thanks.title_actionable",defaultMessage:"Thanks for reporting, we'll look into this."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:55,columnNumber:65},this):e.jsxDEV(i,{id:"report.thanks.title",defaultMessage:"Don't want to see this?"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:55,columnNumber:185},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:55,columnNumber:9},this),e.jsxDEV("p",{className:"report-dialog-modal__lead",children:s?e.jsxDEV(i,{id:"report.thanks.take_action_actionable",defaultMessage:"While we review this, you can take action against @{name}:",values:{name:a.get("username")}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:56,columnNumber:63},this):e.jsxDEV(i,{id:"report.thanks.take_action",defaultMessage:"Here are your options for controlling what you see on Mastodon:"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:56,columnNumber:247},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:56,columnNumber:9},this),a.getIn(["relationship","following"])&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("h4",{className:"report-dialog-modal__subtitle",children:e.jsxDEV(i,{id:"report.unfollow",defaultMessage:"Unfollow @{name}",values:{name:a.get("username")}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:60,columnNumber:59},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:60,columnNumber:13},this),e.jsxDEV("p",{className:"report-dialog-modal__lead",children:e.jsxDEV(i,{id:"report.unfollow_explanation",defaultMessage:"You are following this account. To not see their posts in your home feed anymore, unfollow them."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:61,columnNumber:54},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:61,columnNumber:13},this),e.jsxDEV(h,{secondary:!0,onClick:this.handleUnfollowClick,children:e.jsxDEV(i,{id:"account.unfollow",defaultMessage:"Unfollow"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:62,columnNumber:66},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:62,columnNumber:13},this),e.jsxDEV("hr",{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:63,columnNumber:13},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:59,columnNumber:9},this),e.jsxDEV("h4",{className:"report-dialog-modal__subtitle",children:e.jsxDEV(i,{id:"account.mute",defaultMessage:"Mute @{name}",values:{name:a.get("username")}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:67,columnNumber:55},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:67,columnNumber:9},this),e.jsxDEV("p",{className:"report-dialog-modal__lead",children:e.jsxDEV(i,{id:"report.mute_explanation",defaultMessage:"You will not see their posts. They can still follow you and see your posts and will not know that they are muted."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:68,columnNumber:50},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:68,columnNumber:9},this),e.jsxDEV(h,{secondary:!0,onClick:this.handleMuteClick,children:a.getIn(["relationship","muting"])?e.jsxDEV(i,{id:"account.muted",defaultMessage:"Muted"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:69,columnNumber:166},this):e.jsxDEV(i,{id:"report.mute",defaultMessage:"Mute"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:69,columnNumber:104},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:69,columnNumber:9},this),e.jsxDEV("hr",{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:71,columnNumber:9},this),e.jsxDEV("h4",{className:"report-dialog-modal__subtitle",children:e.jsxDEV(i,{id:"account.block",defaultMessage:"Block @{name}",values:{name:a.get("username")}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:73,columnNumber:55},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:73,columnNumber:9},this),e.jsxDEV("p",{className:"report-dialog-modal__lead",children:e.jsxDEV(i,{id:"report.block_explanation",defaultMessage:"You will not see their posts. They will not be able to see your posts or follow you. They will be able to tell that they are blocked."},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:74,columnNumber:50},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:74,columnNumber:9},this),e.jsxDEV(h,{secondary:!0,onClick:this.handleBlockClick,children:a.getIn(["relationship","blocking"])?e.jsxDEV(i,{id:"account.blocked",defaultMessage:"Blocked"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:75,columnNumber:171},this):e.jsxDEV(i,{id:"report.block",defaultMessage:"Block"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:75,columnNumber:107},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("div",{className:"flex-spacer"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:77,columnNumber:9},this),e.jsxDEV("div",{className:"report-dialog-modal__actions",children:e.jsxDEV(h,{onClick:this.handleCloseClick,children:e.jsxDEV(i,{id:"report.close",defaultMessage:"Done"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:80,columnNumber:51},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:80,columnNumber:11},this)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:79,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/report/thanks.jsx",lineNumber:54,columnNumber:7},this)}}const Ee=g(De)(Be),Ve=y({close:{id:"lightbox.close",defaultMessage:"Close"}}),ye=()=>{const o=oe();return(a,{accountId:s})=>({account:o(a,s)})};class R extends W{constructor(){super(...arguments);m(this,"state",{step:"category",selectedStatusIds:b(this.props.statusId?[this.props.statusId]:[]),selectedDomains:b(),comment:"",category:null,selectedRuleIds:b(),isSubmitting:!1,isSubmitted:!1});m(this,"handleSubmit",()=>{const{dispatch:a,accountId:s}=this.props,{selectedStatusIds:t,selectedDomains:u,comment:d,category:n,selectedRuleIds:f}=this.state;this.setState({isSubmitting:!0}),a(Z({account_id:s,status_ids:t.toArray(),forward_to_domains:u.toArray(),comment:d,forward:u.size>0,category:n,rule_ids:f.toArray()},this.handleSuccess,this.handleFail))});m(this,"handleSuccess",()=>{this.setState({isSubmitting:!1,isSubmitted:!0,step:"thanks"})});m(this,"handleFail",()=>{this.setState({isSubmitting:!1})});m(this,"handleStatusToggle",(a,s)=>{const{selectedStatusIds:t}=this.state;s?this.setState({selectedStatusIds:t.add(a)}):this.setState({selectedStatusIds:t.remove(a)})});m(this,"handleDomainToggle",(a,s)=>{s?this.setState(t=>({selectedDomains:t.selectedDomains.add(a)})):this.setState(t=>({selectedDomains:t.selectedDomains.remove(a)}))});m(this,"handleRuleToggle",(a,s)=>{s?this.setState(t=>({selectedRuleIds:t.selectedRuleIds.add(a)})):this.setState(t=>({selectedRuleIds:t.selectedRuleIds.remove(a)}))});m(this,"handleChangeCategory",a=>{this.setState({category:a})});m(this,"handleChangeComment",a=>{this.setState({comment:a})});m(this,"handleNextStep",a=>{this.setState({step:a})})}componentDidMount(){const{dispatch:a,accountId:s}=this.props;a(H(s,{withReplies:!0})),a(X())}render(){const{accountId:a,account:s,intl:t,onClose:u}=this.props;if(!s)return null;const{step:d,selectedStatusIds:n,selectedRuleIds:f,selectedDomains:k,comment:D,category:v,isSubmitting:j,isSubmitted:B}=this.state,x=s.get("acct").split("@")[1],E=!!x;let c;switch(d){case"category":c=e.jsxDEV(de,{onNextStep:this.handleNextStep,startedFrom:this.props.statusId?"status":"account",category:v,onChangeCategory:this.handleChangeCategory},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:158,columnNumber:9},this);break;case"rules":c=e.jsxDEV(Ne,{onNextStep:this.handleNextStep,selectedRuleIds:f,onToggle:this.handleRuleToggle},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:168,columnNumber:9},this);break;case"statuses":c=e.jsxDEV(ke,{onNextStep:this.handleNextStep,accountId:a,selectedStatusIds:n,onToggle:this.handleStatusToggle},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:177,columnNumber:9},this);break;case"comment":c=e.jsxDEV(he,{onSubmit:this.handleSubmit,isSubmitting:j,isRemote:E,comment:D,domain:x,onChangeComment:this.handleChangeComment,statusIds:n,selectedDomains:k,onToggleDomain:this.handleDomainToggle},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:187,columnNumber:9},this);break;case"thanks":c=e.jsxDEV(Ee,{submitted:B,account:s,onClose:u},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:202,columnNumber:9},this)}return e.jsxDEV("div",{className:"modal-root__modal report-dialog-modal",children:[e.jsxDEV("div",{className:"report-modal__target",children:[e.jsxDEV(J,{className:"report-modal__close",title:t.formatMessage(Ve.close),icon:"times",iconComponent:Q,onClick:u,size:20},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:213,columnNumber:11},this),e.jsxDEV(i,{id:"report.target",defaultMessage:"Report {target}",values:{target:e.jsxDEV("strong",{children:s.get("acct")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:214,columnNumber:99},this)}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:214,columnNumber:11},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:212,columnNumber:9},this),e.jsxDEV("div",{className:"report-dialog-modal__container",children:c},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/ui/components/report_modal.jsx",lineNumber:211,columnNumber:7},this)}}m(R,"propTypes",{accountId:_.string.isRequired,statusId:_.string,dispatch:_.func.isRequired,intl:_.object.isRequired,account:G.record.isRequired});const oa=g(ye)(T(R));export{oa as default};
//# sourceMappingURL=report_modal-CgT8Hhn2.js.map
