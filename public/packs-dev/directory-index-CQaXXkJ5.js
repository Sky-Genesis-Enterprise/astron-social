import{j as e}from"./client-BG6VvM0b.js";import{u as q,r as n,d as S}from"./index-ykyyQSL-.js";import{H as T}from"./Helmet-D0DLVOv1.js";import{a as j,u as F,o as U,bg as G,bH as I,bJ as z,A as K,ae as W,cF as Y,bX as $,dK as J,cG as X,cY as L,dL as Q}from"./useSelectableClick-DBo53LOf.js";import{S as Z}from"./group-D_XsjWSa.js";import{C as ee}from"./column-CXD4Tnpb.js";import{C as ae}from"./column_header-CtuyYpNB.js";import{L as oe}from"./load_more-BJ-OkDO5.js";import{L as te}from"./loading_indicator-BBuNQ1GS.js";import{R as x}from"./radio_button-CwG8JH7Y.js";import{S as ie}from"./scroll_container-BQpJ36fQ.js";import{u as P}from"./useSearchParam-BFvbS2Uy.js";import{c as se}from"./index-guCj-HqV.js";import{L as re,S as E}from"./short_number--sxn3OKQ.js";import{B as h}from"./index-JeRepxZU.js";import{ak as ne,D as ue}from"./content_warning-ZcoJE_cd.js";import{l as D,e as le}from"./initial_state-BP3UcUr4.js";import{M as B}from"./message-Bb0z64dP.js";import"./api-uqk9CYtW.js";import"./index-lj9VQs0f.js";import"./ready-DpOgoWSg.js";import"./index-DHslUCy5.js";import"./load_locale-C-B7BkCQ.js";import"./scroll-BygYx8ga.js";import"./add-ZanakRnh.js";import"./chevron_left-R_fqLHXp.js";import"./close-DPVxbBbs.js";import"./react-router-scroll-4.es-6ieDtVAa.js";import"./interopRequireDefault-CdiRfGvq.js";import"./numbers-CGZQWBYL.js";import"./skeleton-_5CK2hDo.js";const f=S({unfollow:{id:"account.unfollow",defaultMessage:"Unfollow"},follow:{id:"account.follow",defaultMessage:"Follow"},cancel_follow_request:{id:"account.cancel_follow_request",defaultMessage:"Withdraw follow request"},requested:{id:"account.requested",defaultMessage:"Awaiting approval. Click to cancel follow request"},unblock:{id:"account.unblock_short",defaultMessage:"Unblock"},unmute:{id:"account.unmute_short",defaultMessage:"Unmute"},edit_profile:{id:"account.edit_profile",defaultMessage:"Edit profile"}}),me=ne(),ce=({accountId:r})=>{var u;const l=q(),a=j(o=>me(o,r)),i=F(),s=n.useCallback(({currentTarget:o})=>{if(D)return;o.querySelectorAll(".custom-emoji").forEach(d=>{const c=d.getAttribute("data-original");c&&(d.src=c)})},[]),N=n.useCallback(({currentTarget:o})=>{if(D)return;o.querySelectorAll(".custom-emoji").forEach(d=>{const c=d.getAttribute("data-static");c&&(d.src=c)})},[]),v=n.useCallback(()=>{a&&(a.getIn(["relationship","following"])||a.getIn(["relationship","requested"])?i(U({modalType:"CONFIRM_UNFOLLOW",modalProps:{account:a}})):i(G(a.get("id"))))},[a,i]),g=n.useCallback(()=>{var o;(o=a==null?void 0:a.relationship)!=null&&o.blocking&&i(I(a.get("id")))},[a,i]),_=n.useCallback(()=>{var o;(o=a==null?void 0:a.relationship)!=null&&o.muting&&i(z(a.get("id")))},[a,i]),b=n.useCallback(()=>{window.open("/settings/profile","_blank")},[]);if(!a)return null;let m;return le!==a.get("id")?a.get("relationship")?a.getIn(["relationship","requested"])?m=e.jsxDEV(h,{text:l.formatMessage(f.cancel_follow_request),title:l.formatMessage(f.requested),onClick:v},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:121,columnNumber:7},void 0):a.getIn(["relationship","muting"])?m=e.jsxDEV(h,{text:l.formatMessage(f.unmute),onClick:_},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:129,columnNumber:7},void 0):a.getIn(["relationship","blocking"])?a.getIn(["relationship","blocking"])&&(m=e.jsxDEV(h,{text:l.formatMessage(f.unblock),onClick:g},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:151,columnNumber:7},void 0)):m=e.jsxDEV(h,{disabled:(u=a.relationship)==null?void 0:u.blocked_by,className:se({"button--destructive":a.getIn(["relationship","following"])}),text:l.formatMessage(a.getIn(["relationship","following"])?f.unfollow:f.follow),onClick:v},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:136,columnNumber:7},void 0):m="":m=e.jsxDEV(h,{text:l.formatMessage(f.edit_profile),onClick:b},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:159,columnNumber:5},void 0),e.jsxDEV("div",{className:"account-card",children:[e.jsxDEV(re,{to:`/@${a.get("acct")}`,className:"account-card__permalink",children:[e.jsxDEV("div",{className:"account-card__header",children:e.jsxDEV("img",{src:D?a.get("header"):a.get("header_static"),alt:""},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:170,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:169,columnNumber:9},void 0),e.jsxDEV("div",{className:"account-card__title",children:[e.jsxDEV("div",{className:"account-card__title__avatar",children:e.jsxDEV(K,{account:a,size:56},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:180,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:179,columnNumber:11},void 0),e.jsxDEV(ue,{account:a},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:182,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:178,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:168,columnNumber:7},void 0),a.get("note").length>0&&e.jsxDEV("div",{className:"account-card__bio translate",onMouseEnter:s,onMouseLeave:N,dangerouslySetInnerHTML:{__html:a.get("note_emojified")}},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:187,columnNumber:7},void 0),e.jsxDEV("div",{className:"account-card__actions",children:[e.jsxDEV("div",{className:"account-card__counters",children:[e.jsxDEV("div",{className:"account-card__counters__item",children:[e.jsxDEV(E,{value:a.get("statuses_count")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:198,columnNumber:13},void 0),e.jsxDEV("small",{children:e.jsxDEV(B,{id:"account.posts",defaultMessage:"Posts"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:200,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:199,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:197,columnNumber:11},void 0),e.jsxDEV("div",{className:"account-card__counters__item",children:[e.jsxDEV(E,{value:a.get("followers_count")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:205,columnNumber:13},void 0)," ",e.jsxDEV("small",{children:e.jsxDEV(B,{id:"account.followers",defaultMessage:"Followers"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:207,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:206,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:204,columnNumber:11},void 0),e.jsxDEV("div",{className:"account-card__counters__item",children:[e.jsxDEV(E,{value:a.get("following_count")},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:215,columnNumber:13},void 0)," ",e.jsxDEV("small",{children:e.jsxDEV(B,{id:"account.following",defaultMessage:"Following"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:217,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:216,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:214,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:196,columnNumber:9},void 0),e.jsxDEV("div",{className:"account-card__actions__button",children:m},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:225,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:195,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/components/account_card.tsx",lineNumber:167,columnNumber:5},void 0)},p=S({title:{id:"column.directory",defaultMessage:"Browse profiles"},recentlyActive:{id:"directory.recently_active",defaultMessage:"Recently active"},newArrivals:{id:"directory.new_arrivals",defaultMessage:"New arrivals"},local:{id:"directory.local",defaultMessage:"From {domain} only"},federated:{id:"directory.federated",defaultMessage:"From known fediverse"}}),Ge=({columnId:r,multiColumn:l,params:a})=>{const i=q(),s=F(),N=n.useRef(null),[v,g]=P("order"),[_,b]=P("local");let m;_==="false"&&(m=!1);const u=v??(a==null?void 0:a.order)??"active",o=m??(a==null?void 0:a.local)??!0,y=n.useCallback(()=>{s(r?W(r):Y("DIRECTORY",{order:u,local:o}))},[s,r,u,o]),d=j(t=>t.meta.get("domain")),c=j(t=>t.user_lists.getIn(["directory","items"],$())),V=j(t=>t.user_lists.getIn(["directory","isLoading"],!0));n.useEffect(()=>{s(J({order:u,local:o}))},[s,u,o]);const R=n.useCallback(t=>{s(X(r,t))},[s,r]),H=n.useCallback(()=>{var t;(t=N.current)==null||t.scrollTop()},[]),M=n.useCallback(t=>{r?s(L(r,["order"],t.target.value)):g(t.target.value)},[s,r,g]),k=n.useCallback(t=>{r?s(L(r,["local"],t.target.value==="1")):t.target.value==="1"?b("true"):b("false")},[s,r,b]),O=n.useCallback(()=>{s(Q({order:u,local:o}))},[s,u,o]),C=!!r,w=V&&c.size===0,A=e.jsxDEV("div",{className:"scrollable",children:[e.jsxDEV("div",{className:"filter-form",children:[e.jsxDEV("div",{className:"filter-form__column",role:"group",children:[e.jsxDEV(x,{name:"order",value:"active",label:i.formatMessage(p.recentlyActive),checked:u==="active",onChange:M},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:139,columnNumber:11},void 0),e.jsxDEV(x,{name:"order",value:"new",label:i.formatMessage(p.newArrivals),checked:u==="new",onChange:M},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:146,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:138,columnNumber:9},void 0),e.jsxDEV("div",{className:"filter-form__column",role:"group",children:[e.jsxDEV(x,{name:"local",value:"1",label:i.formatMessage(p.local,{domain:d}),checked:o,onChange:k},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:156,columnNumber:11},void 0),e.jsxDEV(x,{name:"local",value:"0",label:i.formatMessage(p.federated),checked:!o,onChange:k},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:163,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:155,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:137,columnNumber:7},void 0),e.jsxDEV("div",{className:"directory__list",children:w?e.jsxDEV(te,{},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:175,columnNumber:7},void 0):c.map(t=>e.jsxDEV(ce,{accountId:t},t,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:178,columnNumber:7},void 0))},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:173,columnNumber:7},void 0),e.jsxDEV(oe,{onClick:O,visible:!w,loading:V},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:183,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:136,columnNumber:3},void 0);return e.jsxDEV(ee,{bindToDocument:!l,ref:N,label:i.formatMessage(p.title),children:[e.jsxDEV(ae,{icon:"address-book-o",iconComponent:Z,title:i.formatMessage(p.title),onPin:y,onMove:R,onClick:H,pinned:C,multiColumn:l},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:197,columnNumber:7},void 0),l&&!C?e.jsxDEV(ie,{scrollKey:"directory",children:A},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:210,columnNumber:7},void 0):A,e.jsxDEV(T,{children:[e.jsxDEV("title",{children:i.formatMessage(p.title)},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:218,columnNumber:9},void 0),e.jsxDEV("meta",{name:"robots",content:"noindex"},void 0,!1,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:219,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:217,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/liam-esia/Bureau/github/mastodon/app/javascript/mastodon/features/directory/index.tsx",lineNumber:192,columnNumber:5},void 0)};export{Ge as Directory,Ge as default};
//# sourceMappingURL=directory-index-CQaXXkJ5.js.map
