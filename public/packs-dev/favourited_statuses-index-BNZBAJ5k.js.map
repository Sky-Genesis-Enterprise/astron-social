{"version":3,"file":"favourited_statuses-index-BNZBAJ5k.js","sources":["../../app/javascript/mastodon/features/favourited_statuses/index.tsx"],"sourcesContent":["import { useEffect, useRef, useCallback } from 'react';\n\nimport { defineMessages, useIntl, FormattedMessage } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\n\nimport StarIcon from '@/material-icons/400-24px/star-fill.svg?react';\nimport { addColumn, removeColumn, moveColumn } from 'mastodon/actions/columns';\nimport {\n  fetchFavouritedStatuses,\n  expandFavouritedStatuses,\n} from 'mastodon/actions/favourites';\nimport { Column } from 'mastodon/components/column';\nimport type { ColumnRef } from 'mastodon/components/column';\nimport { ColumnHeader } from 'mastodon/components/column_header';\nimport StatusList from 'mastodon/components/status_list';\nimport { getStatusList } from 'mastodon/selectors';\nimport { useAppDispatch, useAppSelector } from 'mastodon/store';\n\nconst messages = defineMessages({\n  heading: { id: 'column.favourites', defaultMessage: 'Favorites' },\n});\n\nconst Favourites: React.FC<{ columnId: string; multiColumn: boolean }> = ({\n  columnId,\n  multiColumn,\n}) => {\n  const dispatch = useAppDispatch();\n  const intl = useIntl();\n  const columnRef = useRef<ColumnRef>(null);\n  const statusIds = useAppSelector((state) =>\n    getStatusList(state, 'favourites'),\n  );\n  const isLoading = useAppSelector(\n    (state) =>\n      state.status_lists.getIn(['favourites', 'isLoading'], true) as boolean,\n  );\n  const hasMore = useAppSelector(\n    (state) => !!state.status_lists.getIn(['favourites', 'next']),\n  );\n\n  useEffect(() => {\n    dispatch(fetchFavouritedStatuses());\n  }, [dispatch]);\n\n  const handlePin = useCallback(() => {\n    if (columnId) {\n      dispatch(removeColumn(columnId));\n    } else {\n      dispatch(addColumn('FAVOURITES', {}));\n    }\n  }, [dispatch, columnId]);\n\n  const handleMove = useCallback(\n    (dir: number) => {\n      dispatch(moveColumn(columnId, dir));\n    },\n    [dispatch, columnId],\n  );\n\n  const handleHeaderClick = useCallback(() => {\n    columnRef.current?.scrollTop();\n  }, []);\n\n  const handleLoadMore = useCallback(() => {\n    dispatch(expandFavouritedStatuses());\n  }, [dispatch]);\n\n  const pinned = !!columnId;\n\n  const emptyMessage = (\n    <FormattedMessage\n      id='empty_column.favourited_statuses'\n      defaultMessage=\"You don't have any favorite posts yet. When you favorite one, it will show up here.\"\n    />\n  );\n\n  return (\n    <Column\n      bindToDocument={!multiColumn}\n      ref={columnRef}\n      label={intl.formatMessage(messages.heading)}\n    >\n      <ColumnHeader\n        icon='star'\n        iconComponent={StarIcon}\n        title={intl.formatMessage(messages.heading)}\n        onPin={handlePin}\n        onMove={handleMove}\n        onClick={handleHeaderClick}\n        pinned={pinned}\n        multiColumn={multiColumn}\n      />\n\n      <StatusList\n        trackScroll={!pinned}\n        statusIds={statusIds}\n        scrollKey={`favourited_statuses-${columnId}`}\n        hasMore={hasMore}\n        isLoading={isLoading}\n        onLoadMore={handleLoadMore}\n        emptyMessage={emptyMessage}\n        bindToDocument={!multiColumn}\n        timelineId='favourites'\n      />\n\n      <Helmet>\n        <title>{intl.formatMessage(messages.heading)}</title>\n        <meta name='robots' content='noindex' />\n      </Helmet>\n    </Column>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default Favourites;\n"],"names":["messages","defineMessages","heading","id","defaultMessage","Favourites","columnId","multiColumn","dispatch","useAppDispatch","intl","useIntl","columnRef","useRef","statusIds","useAppSelector","state","getStatusList","isLoading","status_lists","getIn","hasMore","useEffect","fetchFavouritedStatuses","handlePin","useCallback","removeColumn","addColumn","handleMove","dir","moveColumn","handleHeaderClick","current","scrollTop","handleLoadMore","expandFavouritedStatuses","pinned","emptyMessage","jsxDEV","FormattedMessage","this","Column","formatMessage","ColumnHeader","StarIcon","StatusList","Helmet"],"mappings":"ovDAmBA,MAAMA,EAAWC,EAAe,CAC9BC,QAAS,CAAEC,uBAAyBC,2BACtC,CAAC,EAEKC,GAAmEA,CAAC,CACxEC,SAAAA,EACAC,YAAAA,CACF,IAAM,CACJ,MAAMC,EAAWC,EAAAA,EACXC,EAAOC,EAAAA,EACPC,EAAYC,EAAAA,OAAkB,IAAI,EAClCC,EAAYC,EAAgBC,GAChCC,EAAcD,EAAO,YAAY,CAAA,EAE7BE,EAAYH,EACfC,GACCA,EAAMG,aAAaC,MAAM,CAAC,aAAc,WAAW,EAAG,EAAI,CAAA,EAExDC,EAAUN,EACbC,GAAU,CAAC,CAACA,EAAMG,aAAaC,MAAM,CAAC,aAAc,MAAM,CAAC,CAAA,EAG9DE,EAAAA,UAAU,IAAM,CACdd,EAASe,GAAyB,CAAA,EACjC,CAACf,CAAQ,CAAC,EAEb,MAAMgB,EAAYC,EAAAA,YAAY,IAAM,CAEhCjB,EADEF,EACOoB,EAAapB,CAAQ,EAErBqB,EAAU,aAAc,CAAA,CAAE,CAFJ,CAGjC,EACC,CAACnB,EAAUF,CAAQ,CAAC,EAEjBsB,EAAaH,EAAAA,YAChBI,GAAgB,CACfrB,EAASsB,EAAWxB,EAAUuB,CAAG,CAAC,CAAA,EAEpC,CAACrB,EAAUF,CAAQ,CAAA,EAGfyB,EAAoBN,EAAAA,YAAY,IAAM,QAC1Cb,EAAAA,EAAUoB,UAAVpB,MAAAA,EAAmBqB,WAAU,EAC5B,EAAE,EAECC,EAAiBT,EAAAA,YAAY,IAAM,CACvCjB,EAAS2B,GAA0B,CAAA,EAClC,CAAC3B,CAAQ,CAAC,EAEP4B,EAAS,CAAC,CAAC9B,EAEX+B,EACJC,EAAAA,OAACC,EAAA,CACC,GAAE,mCACF,eAAe,qFAAA,EAFjB,OAAA,GAAA,CAAA,SAAA,wGAAA,WAAA,GAAA,aAAA,CAAA,EAAAC,MAAA,EAMF,OACEF,EAAAA,OAACG,EAAA,CACC,eAAgB,CAAClC,EACjB,IAAKK,EACL,MAAOF,EAAKgC,cAAc1C,EAASE,OAAO,EAE1C,SAAA,CAAAoC,EAAAA,OAACK,EAAA,CACC,KAAK,OACL,cAAeC,EACf,MAAOlC,EAAKgC,cAAc1C,EAASE,OAAO,EAC1C,MAAOsB,EACP,OAAQI,EACR,QAASG,EACT,OAAAK,EACA,YAAA7B,CAAA,EARF,OAAA,GAAA,CAAA,SAAA,wGAAA,WAAA,GAAA,aAAA,CAAA,EAAAiC,MAAA,EAWAF,EAAAA,OAACO,EAAA,CACC,YAAa,CAACT,EACd,UAAAtB,EACA,UAAW,uBAAuBR,CAAQ,GAC1C,QAAAe,EACA,UAAAH,EACA,WAAYgB,EACZ,aAAAG,EACA,eAAgB,CAAC9B,EACjB,WAAW,YAAA,EATb,OAAA,GAAA,CAAA,SAAA,wGAAA,WAAA,GAAA,aAAA,CAAA,EAAAiC,MAAA,WAYCM,EAAA,CACC,SAAA,CAAAR,EAAAA,OAAC,QAAA,CAAO5B,SAAAA,EAAKgC,cAAc1C,EAASE,OAAO,CAAA,EAA3C,OAAA,GAAA,CAAA,SAAA,wGAAA,WAAA,IAAA,aAAA,CAAA,EAAAsC,MAA6C,EAC7CF,SAAC,OAAA,CAAK,KAAK,SAAS,QAAQ,SAAA,EAA5B,OAAA,GAAA,CAAA,SAAA,wGAAA,WAAA,IAAA,aAAA,CAAA,EAAAE,MAAqC,CAAA,CAAA,EAFvC,OAAA,GAAA,CAAA,SAAA,wGAAA,WAAA,IAAA,aAAA,CAAA,EAAAA,MAGA,CAAA,CAAA,EA/BF,OAAA,GAAA,CAAA,SAAA,wGAAA,WAAA,GAAA,aAAA,CAAA,EAAAA,MAAA,CAkCJ"}