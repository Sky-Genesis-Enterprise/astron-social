{"version":3,"file":"hashtag--bDjNoob.js","sources":["../../app/javascript/mastodon/components/hashtag.tsx"],"sourcesContent":["import type { JSX } from 'react';\nimport { Component } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\n\nimport type Immutable from 'immutable';\n\nimport { Sparklines, SparklinesCurve } from 'react-sparklines';\n\nimport { ShortNumber } from 'mastodon/components/short_number';\nimport { Skeleton } from 'mastodon/components/skeleton';\nimport type { Hashtag as HashtagType } from 'mastodon/models/tags';\n\ninterface SilentErrorBoundaryProps {\n  children: React.ReactNode;\n}\n\nclass SilentErrorBoundary extends Component<SilentErrorBoundaryProps> {\n  state = {\n    error: false,\n  };\n\n  componentDidCatch() {\n    this.setState({ error: true });\n  }\n\n  render() {\n    if (this.state.error) {\n      return null;\n    }\n\n    return this.props.children;\n  }\n}\n\n/**\n * Used to render counter of how much people are talking about hashtag\n * @param displayNumber Counter number to display\n * @param pluralReady Whether the count is plural\n * @returns Formatted counter of how much people are talking about hashtag\n */\nexport const accountsCountRenderer = (\n  displayNumber: JSX.Element,\n  pluralReady: number,\n) => (\n  <FormattedMessage\n    id='trends.counter_by_accounts'\n    defaultMessage='{count, plural, one {{counter} person} other {{counter} people}} in the past {days, plural, one {day} other {# days}}'\n    values={{\n      count: pluralReady,\n      counter: <strong>{displayNumber}</strong>,\n      days: 2,\n    }}\n  />\n);\n\ninterface ImmutableHashtagProps {\n  hashtag: Immutable.Map<string, unknown>;\n}\n\nexport const ImmutableHashtag = ({ hashtag }: ImmutableHashtagProps) => (\n  <Hashtag\n    name={hashtag.get('name') as string}\n    to={`/tags/${hashtag.get('name') as string}`}\n    people={\n      (hashtag.getIn(['history', 0, 'accounts']) as number) * 1 +\n      (hashtag.getIn(['history', 1, 'accounts']) as number) * 1\n    }\n    history={(\n      hashtag.get('history') as Immutable.Collection.Indexed<\n        Immutable.Map<string, number>\n      >\n    )\n      .reverse()\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      .map((day) => day.get('uses')!)\n      .toArray()}\n  />\n);\n\nexport const CompatibilityHashtag: React.FC<{\n  hashtag: HashtagType;\n}> = ({ hashtag }) => (\n  <Hashtag\n    name={hashtag.name}\n    to={`/tags/${hashtag.name}`}\n    people={\n      (hashtag.history[0].accounts as unknown as number) * 1 +\n      ((hashtag.history[1]?.accounts ?? 0) as unknown as number) * 1\n    }\n    history={hashtag.history\n      .map((day) => (day.uses as unknown as number) * 1)\n      .reverse()}\n  />\n);\n\nexport interface HashtagProps {\n  className?: string;\n  description?: React.ReactNode;\n  history?: number[];\n  name: string;\n  people?: number;\n  to: string;\n  uses?: number;\n  withGraph?: boolean;\n  children?: React.ReactNode;\n}\n\nexport const Hashtag: React.FC<HashtagProps> = ({\n  name,\n  to,\n  people,\n  uses,\n  history,\n  className,\n  description,\n  withGraph = true,\n  children,\n}) => (\n  <div className={classNames('trends__item', className)}>\n    <div className='trends__item__name'>\n      <Link to={to}>\n        {name ? (\n          <>\n            #<span>{name}</span>\n          </>\n        ) : (\n          <Skeleton width={50} />\n        )}\n      </Link>\n\n      {description ? (\n        <span>{description}</span>\n      ) : typeof people !== 'undefined' ? (\n        <ShortNumber value={people} renderer={accountsCountRenderer} />\n      ) : (\n        <Skeleton width={100} />\n      )}\n    </div>\n\n    {typeof uses !== 'undefined' && (\n      <div className='trends__item__current'>\n        <ShortNumber value={uses} />\n      </div>\n    )}\n\n    {withGraph && (\n      <div className='trends__item__sparkline'>\n        <SilentErrorBoundary>\n          <Sparklines\n            width={50}\n            height={28}\n            data={history ?? Array.from(Array(7)).map(() => 0)}\n          >\n            <SparklinesCurve style={{ fill: 'none' }} />\n          </Sparklines>\n        </SilentErrorBoundary>\n      </div>\n    )}\n\n    {children && <div className='trends__item__buttons'>{children}</div>}\n  </div>\n);\n"],"names":["SilentErrorBoundary","Component","state","error","componentDidCatch","setState","render","props","children","accountsCountRenderer","displayNumber","pluralReady","jsxDEV","FormattedMessage","count","counter","this","days","ImmutableHashtag","hashtag","Hashtag","get","getIn","reverse","map","day","toArray","CompatibilityHashtag","name","history","accounts","uses","to","people","className","description","withGraph","classNames","Link","Fragment","Skeleton","ShortNumber","Sparklines","Array","from","SparklinesCurve","fill"],"mappings":"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"}